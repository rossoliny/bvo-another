globalsinteger array udg_Player_HeroTypeinteger udg_Player_MaxHeroes=0string array udg_Player_Colorstring udg_MapName=""multiboard udg_Board=nullstring array udg_Player_Icon
boolean udg_GameModeAr=false
boolean udg_GameModeBh=false
integer udg_Bounty_Bonus=0unit udg_Bounty_Hero=nullinteger udg_Bounty_Medal=0effect udg_Bounty_Eff=nullgroup udg_Searing_Group=null
integer array udg_Boss_Lvboolean array udg_Boss_Check
unit udg_Hogyoku=nullgroup udg_Hogyoku_G=null
unit udg_Fgt_Unit=nulllocation array udg_Fgt_Point
group udg_Fgt_Group=null
unit array udg_Gat_Unitboolean udg_Gat_Bool=falsereal array udg_Gat_Reallocation array udg_Gat_Point
rect udg_Gat_Rect=nullgroup udg_Gat_Group=null
group udg_Gat_Group2=nullinteger udg_Gat_Int=0integer udg_Gat_Int2=0boolean udg_Fgt_Bool=falsereal udg_Fgt_Real=0unit array udg_Rdw_Unitlocation array udg_Rdw_Point
real array udg_Rdw_Realinteger udg_Rdw_Int=0group array udg_Rdw_Group2group udg_Rdw_Group=null
unit array udg_Kkg_Unitlocation array udg_Kkg_Point
real array udg_Kkg_Realinteger udg_Kkg_Int=0group array udg_Kkg_Groupunit array udg_Lrs_Unitlocation array udg_Lrs_Point
real array udg_Lrs_Realinteger udg_Lrs_Int=0group udg_Lrs_Group=null
unit array udg_Cbr_Unitlocation array udg_Cbr_Point
real array udg_Cbr_Realgroup array udg_Cbr_Groupinteger array udg_Board_Intboolean array udg_Player_Randomboolean udg_GameModeFh=false
boolean udg_GameModeSc=false
timer udg_BossTimer=null
boolean udg_GameModeNe=false
timer udg_Timer_SuperCreeps=null
boolean udg_GameModeDs=false
real udg_Revive_Time=0timer udg_Kill_Timer1=nullboolean udg_Testtttttt=false
unit array udg_Trs_Unitlocation array udg_Trs_Point
real array udg_Trs_Realinteger udg_Trs_Int=0group udg_Trs_Group=null
unit array udg_Smt_Unitreal udg_Smt_Real=0location udg_Smt_Point=nullgroup udg_Smt_Group=null
unit array udg_Hkr_Unitlocation array udg_Hkr_Point
real array udg_Hkr_Realtexttag array udg_Hkr_Textinteger udg_Hkr_Int=0boolean udg_Hkr_Bool=falsestring udg_Hkr_String=""
group udg_Hkr_Group=null
group udg_Hkr_Group2=nullunit array udg_Ykd_Unitlocation array udg_Ykd_Locreal array udg_Ykd_Realinteger udg_Ykd_Int=0boolean udg_Ykd_Bool=falsegroup udg_Ykd_Group=null
group udg_Ykd_Group2=nullunit array udg_Sph_Unitlocation array udg_Sph_Locinteger udg_Sph_Int=0real udg_Sph_Real=0group array udg_Sph_Groupgroup udg_Sph_Group2=nullunit array udg_Csp_Unitlocation array udg_Csp_Locreal array udg_Csp_Realinteger udg_Csp_Int=0group array udg_Csp_Groupunit array udg_Tmk_Unitlocation array udg_Tmk_Locgroup udg_Tmk_Group=null
group udg_Tmk_Group2=nullinteger udg_Tmk_Int=0unit array udg_Sds_Unitlocation array udg_Sds_Locreal array udg_Sds_Realinteger array udg_Sds_Intgroup array udg_Sds_Groupboolean udg_Sds_Bool=falsereal udg_Tmk_Real=0unit array udg_Ssn_Unitreal udg_Ssn_Real=0unit array udg_Gkn_Unitlocation array udg_Gkn_Locreal array udg_Gkn_Realinteger array udg_Gkn_Intgroup array udg_Gkn_Groupgroup udg_Gkn_Group2=nullunit array udg_Dot_Unitlocation array udg_Dot_Locreal array udg_Dot_Realgroup udg_Dot_Group=null
boolean udg_Dot_Bool=falsereal array udg_Dot_Real2
location array udg_Ssn_Locunit array udg_Sck_Unitinteger array udg_GlobalSkilllocation array udg_Sck_Locgroup array udg_Sck_Groupinteger array udg_Sck_Intunit array udg_Osg_Unitlocation array udg_Osg_Locreal array udg_Osg_Realinteger udg_Osg_Int=0group udg_Osg_Group=null
group udg_Osg_Group5=nullgroup udg_Osg_Group4=nullgroup udg_Osg_Group3=nullgroup udg_Osg_Group2=nullgroup udg_Osg_Group7=nullgroup udg_Osg_Group6=nullunit array udg_Lao_Unitlocation array udg_Lao_Locgroup udg_Lao_Group=null
unit array udg_Ets_Unitinteger array udg_Ets_Dummyreal array udg_Ets_Reallocation array udg_Ets_Locinteger array udg_Ets_Intgroup udg_Ets_Group=null
unit array udg_Tdh_Unitreal array udg_Tdh_Reallocation array udg_Tdh_Locinteger udg_Tdh_Int=0unit udg_Mto_Unit=nullunit array udg_Lrt_Unitlocation array udg_Lrt_Point
real array udg_Lrt_Realinteger udg_Lrt_Int=0group udg_Lrt_Group=null
unit array udg_Tbt_Unitlocation array udg_Tbt_Locinteger udg_Tbt_Int=0real array udg_Tbt_Realinteger udg_Tbt_Skill=0group udg_Tbt_Group=null
location array udg_Scs_Locunit array udg_Scs_Unitinteger udg_Scs_Int=0real array udg_Scs_Realgroup udg_Scs_Group=null
unit array udg_Tlt_Unitreal array udg_Tlt_Realinteger udg_Tlt_Type=0location array udg_Tlt_Loceffect udg_Tlt_Eff=nullinteger udg_Tlt_Int=0group udg_Tlt_Group2=nullgroup udg_Tlt_Group=null
group udg_Tlt_Group3=nullreal udg_Sck_Real=0integer udg_Dot_Int=0integer udg_Dot_Int2=0integer udg_Dsf_Int=0real udg_Dsf_Real=0unit array udg_Rkb_Unitlocation array udg_Rkb_Locinteger udg_Rkb_Int=0group udg_Rkb_Group=null
unit array udg_Lib_Unitlocation array udg_Lib_Point
real array udg_Lib_Realgroup udg_Lib_Group=null
unit array udg_Kml_Unitlocation array udg_Kml_Locreal array udg_Kml_Realinteger udg_Kml_Int=0group udg_Kml_Group=null
group udg_Kml_Group2=nullunit array udg_Lie_Unitlocation array udg_Lie_Point
real array udg_Lie_Realinteger udg_Lie_Int=0group udg_Lie_Group=null
group udg_Lie_Group2=nullreal udg_CameraArea=0real udg_CameraShakePow=0unit array udg_Tls_Unitreal array udg_Tls_Reallocation array udg_Tls_Locinteger udg_Tls_Int=0boolean udg_Tls_Bool=falsereal udg_CameraShakeTime=0real udg_TransformArea=0
unit udg_Mts_Unit=nullinteger udg_Mts_Skill=0integer udg_Mts_Buff=0unit array udg_Lrg_Unitboolean udg_Lrg_Bool=falselocation array udg_Lrg_Locreal array udg_Lrg_Realinteger array udg_Lrg_Intgroup udg_Lrg_Group=null
unit array udg_Sda_Unitlocation array udg_Sda_Locreal array udg_Sda_Realtexttag udg_Sda_Text=nullinteger udg_Sda_Int=0boolean udg_Sda_Bool=falserect udg_Sda_Map=nullgroup udg_Sda_Group=null
group udg_Sda_Group2=nullreal array udg_MapSizeunit array udg_Sgr_Unitlocation array udg_Sgr_Locreal array udg_Sgr_Realinteger udg_Sgr_Skill=0integer udg_Sgr_Int=0integer udg_Sgr_Int2=0group udg_Sgr_Group2=nullgroup udg_Sgr_Group=null
integer udg_TransformSkill=0
real udg_TransformBackstab=0
unit array udg_Qff_Unitlocation array udg_Qff_Locgroup udg_Qff_Group=null
real array udg_Qff_Realgroup array udg_Qff_Group2integer udg_Qff_Skill=0integer udg_Qff_Type=0unit udg_Stf_Hero=nullreal udg_Stf_Cooldown=0integer array udg_Stf_Skillunit array udg_Seg_Unitlocation array udg_Seg_Locplayer udg_Seg_Own=nullreal array udg_Seg_Realinteger udg_Seg_Int=0group udg_Seg_Group=null
unit array udg_Abe_Unitlocation array udg_Abe_Locplayer udg_Abe_Own=nullreal array udg_Abe_Realinteger udg_Abe_Type=0integer array udg_Abe_Intgroup udg_Abe_Group=null
group udg_Abe_Group2=nullunit array udg_Ipf_Unitlocation array udg_Ipf_Locplayer udg_Ipf_Own=nullreal array udg_Ipf_Realinteger array udg_Ipf_Intinteger array udg_Ipf_Typehashtable udg_Ipf_Hash=nullboolean udg_Ipf_Bool=falsestring array udg_Ipf_Key
group udg_Ipf_Group3=nullgroup udg_Ipf_Group=null
group udg_Ipf_Group2=nullgroup udg_Ipf_Group4=nullunit array udg_Gef_Unitreal array udg_Gef_Reallocation array udg_Gef_Locrect udg_Ipf_Map=nullunit array udg_Eth_Unitlocation array udg_Eth_Locplayer udg_Eth_Own=nullreal array udg_Eth_Realinteger udg_Eth_Int=0boolean udg_Eth_Bool=falseinteger udg_Eth_Type=0group udg_Eth_Group=null
group udg_Eth_Group2=nullunit array udg_Rti_Unitplayer udg_Rti_Own=nullinteger udg_Rti_Type=0real array udg_Rti_Realinteger udg_Rti_Int=0hashtable udg_Rti_Hash=nulllocation array udg_Rti_Locboolean udg_Rti_Bool=falsegroup udg_Rti_Group2=nullgroup udg_Rti_Group3=nullgroup udg_Rti_Group=null
unit array udg_Bkg_Unitinteger udg_Bkg_Type=0player udg_Bkg_Own=nullstring udg_Bkg_String=""
real udg_Bkg_Burn=0location array udg_Bkg_Locgroup udg_Bkg_Group=null
group udg_Bkg_Group2=nullinteger udg_Bkg_Slot=0trigger array udg_Bkg_Trigunit array udg_Hns_Unitplayer udg_Hns_Own=nullinteger array udg_Hns_Typelocation udg_Hns_Loc=nullinteger array udg_Hns_Intreal array udg_Hns_Realboolean udg_Hns_Bool=falsegroup udg_Hns_Group=null
group udg_Hns_Group2=nullunit array udg_Etp_Unitplayer udg_Etp_Own=nulllocation array udg_Etp_Locreal array udg_Etp_Realinteger udg_Etp_Int=0location udg_Hns_Loc2=nulltimer udg_ShakeTimer1=nullgroup udg_DummyCheckerGroup=null
group udg_DummyCheckDisplay=null
integer udg_Score_Team1=0integer udg_Score_Team2=0integer array udg_Board_Time
integer udg_Gold_Rate=0timer udg_Game_Timer=nullinteger udg_Game_Score=0
timer udg_Timer_Mode=nulltimerdialog udg_Game_TimerWindow=nulltimer udg_Timer_Creep=nullunit array udg_Player_UnitHeroboolean array udg_Player_Repickboolean array udg_Player_Selectedinteger array udg_Player_DummyTypegroup udg_Duel_Team1=nullgroup udg_Duel_Team2=nullboolean udg_AI_Run=false
group udg_Leave_Group=nullgroup udg_Duel_DummyTeam1=nullgroup udg_Duel_DummyTeam2=nullboolean udg_Duel_On=falsetimer udg_Timer_DuelReal=nullboolean udg_Duel_OverTime=falseboolean udg_Teleport_On=falseinteger udg_TreeType=0integer array udg_Player_Deathinteger udg_Kill_Gold=0integer udg_Kill_Medal=0
integer udg_Kill_HeroExpMax=0integer udg_Kill_HeroExpMin=0integer array udg_Player_Killstring array udg_AI_Name
integer array udg_Kill_Stack
timer udg_Kill_Timer2=nulltimer udg_Kill_Timer3=nulltimer udg_Kill_Timer4=nulltimer udg_Kill_Timer5=nulltimer udg_Kill_Timer6=nulltimer udg_Kill_Timer7=nulltimer udg_Kill_Timer8=nulltimer udg_Kill_Timer9=nulltimer udg_Kill_Timer10=nulltimer udg_Kill_Timer11=nulltimer udg_Kill_Timer12=nullreal udg_Player_ManaATK=0string array udg_Player_Anc_2string array udg_Player_Anc_3string array udg_Player_Anc_4string array udg_Player_Anc_5string array udg_Player_Anc_6string array udg_Player_Anc_1integer udg_Rune_Rand=0rect udg_Rune_Rect=nulllocation udg_Rune_Loc=nullunit array udg_End_Unitplayer udg_End_Own=nulllocation array udg_End_Locgroup udg_End_GroupDummy=nullgroup udg_End_Group=null
boolean udg_End_Game=falseboolean udg_AI_Bool=falserect array udg_End_Rectinteger array udg_BoardIntegerinteger udg_Sound_Volume=0timer udg_ShakeTimer2=nulltimer udg_ShakeTimer3=nulltimer udg_ShakeTimer4=nulltimer udg_ShakeTimer5=nulltimer udg_ShakeTimer6=nulltimer udg_ShakeTimer7=nulltimer udg_ShakeTimer8=nulltimer udg_ShakeTimer9=nulltimer udg_ShakeTimer10=nulltimer udg_ShakeTimer11=nulltimer udg_ShakeTimer12=nulldialog udg_End_DialogWin=nulldialog udg_End_DialogLose=nulltimer udg_Home_RegenTimer=nullreal udg_Home_RegenDelay=0integer udg_Home_RegenBuff=0
real udg_Home_RegenRate=0integer array udg_Creep_Lv1integer array udg_Creep_Lv2integer array udg_Creep_Lv3integer array udg_Creep_Lv4integer udg_Creep_MaxLv1=0integer udg_Creep_MaxLv2=0integer udg_Creep_MaxLv3=0integer udg_Creep_MaxLv4=0timer udg_Creep_SpawnTimer=nullreal udg_Creep_SpawnDelay=0integer udg_Creep_Rounds=0integer udg_Golem_Type=0
real udg_Golem_Delay=0integer array udg_Golem_BossType
integer udg_Golem_Stack=0timer udg_Golem_Timer=nullinteger udg_Golem_Lv=0boolean udg_Golem_SpawnAollow=falseinteger udg_Kill_CreepExp=0group udg_AI_Team1=nullgroup udg_AI_Team2=nulltimer udg_AI_Timer=nullreal udg_AI_Delay=0integer array udg_AI_BlinkAbilityinteger udg_AI_MaxBlink=0timer udg_Timer_Duel=nullreal udg_Duel_Time=0
group udg_Etp_Group=null
boolean udg_Game_Mode=falsestring udg_Bounty_Color=""real udg_Display_Time=0integer array udg_Boss_Typeeffect array udg_Upgrade_Effectgroup udg_Ipf_GroupShake=nullunit array udg_Tcb_Unitlocation array udg_Tcb_Locplayer udg_Tcb_Own=nullreal array udg_Tcb_Realinteger udg_Tcb_Int=0boolean udg_Tcb_Bool=falsegroup udg_Tcb_Group=null
group udg_Tcb_Group2=nullunit array udg_Srl_Unitlocation udg_Srl_Loc=nullgroup udg_Srl_Group=null
unit array udg_Anl_Unitplayer udg_Anl_Own=nullinteger udg_Anl_Type=0real array udg_Anl_Realinteger array udg_Anl_Intlocation array udg_Anl_Locgroup udg_Anl_Group1=nullgroup udg_Anl_GroupHakke=nullgroup udg_Anl_Group2=nullrect udg_Anl_Rect=nullinteger array udg_Anl_Buffgroup udg_Anl_Group=null
trigger array udg_Anl_Triggerinteger udg_Anl_Lv=0
integer udg_Anl_Skill=0unit array udg_Wes_Unitplayer udg_Wes_Own=nulllocation array udg_Wes_Locreal array udg_Wes_Realunit array udg_Mti_Unitplayer udg_Mti_Own=nulllocation array udg_Mti_Locgroup udg_Mti_GroupDummy=nullrect udg_Mti_Rect=nullreal array udg_Mti_Realgroup udg_Mti_Group=null
weathereffect udg_Mti_Weather=nullinteger udg_Mti_Int=0unit array udg_Nrt_Unitplayer udg_Nrt_Own=nulllocation array udg_Nrt_Locreal array udg_Nrt_Realhashtable udg_Nrt_Hash=nullgroup udg_Nrt_Group=null
group udg_Nrt_GroupFly=nullinteger udg_Nrt_Int=0unit udg_Grc_Unit=nullreal udg_Grc_Delay=0
integer udg_Grc_Rand=0real udg_Grc_Radius=0integer array udg_Grc_Abilityunit array udg_Gks_Unitlocation array udg_Gks_Locreal array udg_Ggs_Realplayer udg_Gks_Own=nullinteger udg_Gks_Int=0group udg_Gks_Group=null
group udg_Gks_Group2=nullrect udg_Gks_Map=nullunit array udg_Kin_Unitlocation array udg_Kin_Locplayer udg_Kin_Own=nullreal array udg_Kin_Realgroup udg_Kin_GroupDummy=nullinteger udg_Kin_Int=0group udg_Kin_Group=null
group udg_Kin_Group2=nullgroup udg_Kin_Group3=nullunit array udg_Isk_Unitplayer udg_Isk_Own=nulllocation udg_Isk_Loc=nullreal udg_Isk_Real=0group udg_Isk_Group=null
group udg_Isk_GroupShake=nullunit array udg_Cof_Unitplayer udg_Cof_Own=nulllocation array udg_Cof_Locgroup udg_Cof_Group=null
boolean udg_Ays_Bool=falseunit array udg_Khg_Unitplayer udg_Khg_Own=nullreal udg_Khg_Dmg=0integer udg_Khg_Int=0real udg_Khg_Delay=0
location array udg_Khg_Locboolean array udg_Bug_Return
boolean array udg_Bug_ReturnAliveinteger udg_Golem_Count=0unit array udg_Hnm_Unitlocation array udg_Hnm_Locreal array udg_Hnm_Realplayer udg_Hnm_Own=nullboolean udg_Hnm_Bool=falseinteger udg_Hnm_Count=0integer udg_Hnm_Int=0group udg_Hnm_Group=null
group udg_Hnm_Group2=nullunit array udg_Inv_Unitlocation array udg_Inv_Locplayer udg_Inv_Own=nullreal array udg_Inv_Realgroup udg_Inv_Group=null
group udg_Inv_Group2=nullinteger array udg_Inv_Inthashtable udg_Pause_Hash=nullunit array udg_Dhf_Unitlocation array udg_Dhf_Locreal array udg_Dhf_Realplayer udg_Dhf_Own=nullinteger array udg_Dhf_Intgroup udg_Dhf_Group=null
group udg_Dhf_Group2=nullunit array udg_Hho_Unitreal array udg_Hho_Reallocation array udg_Hho_Locrect udg_Hho_Rect=nullweathereffect udg_Hho_Weather=nullplayer udg_Hho_Own=nullinteger udg_Hho_Int=0group udg_Hho_Group=null
group udg_Hho_GroupDummy=nullunit array udg_Hik_Unitlocation array udg_Hik_Locreal array udg_Hik_Realplayer udg_Hik_Own=nullinteger array udg_Hik_Intgroup udg_Hik_Group=null
group udg_Hik_Group2=nullunit array udg_Hdb_Unitreal array udg_Hdb_Realplayer udg_Hdb_Own=nulllocation array udg_Hdb_Locgroup udg_Hdb_Group=null
integer array udg_Hdb_Intinteger udg_Hdb_Max=0group udg_Hdb_Group2=nullhashtable udg_Hdb_Hash=nullunit array udg_Eti_Unitlocation array udg_Eti_Locreal array udg_Eti_Realplayer udg_Eti_Own=nullinteger udg_Eti_Int=0group udg_Eti_Group=null
unit array udg_Ffb_Unitlocation array udg_Ffb_Locreal array udg_Ffb_Realplayer udg_Ffb_Own=nullboolean udg_Ffb_Bool=falseinteger array udg_Ffb_Intgroup udg_Ffb_Group2=nullgroup udg_Ffb_GroupFire=null
group udg_Ffb_Group=null
hashtable udg_Ffb_Hash=nullunit array udg_Cge_Unitlocation array udg_Cge_Locreal array udg_Cge_Realplayer udg_Cge_Own=nullinteger udg_Cge_Int=0group udg_Cge_Group=null
trigger udg_Iss_TrigDeath=nulltrigger udg_TrigAttack=nulltrigger udg_Iss_TrigAttack=nullunit udg_Iss_Unit=nullinteger udg_Iss_Int=0unit array udg_Hii_Unitlocation array udg_Hii_Locreal array udg_Hii_Realboolean udg_Hii_Bool=falseplayer udg_Hii_Own=nullgroup udg_Hii_Group=null
integer udg_Hii_Buff=0rect udg_Hii_Rect=nullinteger array udg_Hii_Intunit array udg_Dsd_Unitlocation array udg_Dsd_Locreal array udg_Dsd_Realinteger udg_Dsd_Int=0player udg_Dsd_Own=nullgroup udg_Dsd_Group2=nullgroup udg_Dsd_Group=null
unit array udg_Csd_Unitplayer udg_Csd_Own=nulllocation udg_Csd_Loc=nullinteger udg_Csd_Int=0real array udg_Csd_Realboolean udg_Csd_Bool=falseunit array udg_Gse_Unitlocation array udg_Gse_Locreal array udg_Gse_Realplayer udg_Gse_Own=nullinteger udg_Gse_Int=0group udg_Gse_Group=null
terraindeformation udg_Gse_Ter=nullunit array udg_Sad_Unitlocation array udg_Sad_Locreal array udg_Sad_Realplayer udg_Sad_Own=nullinteger udg_Sad_Int=0integer udg_Sad_Count=0group udg_Sad_Group=null
group udg_Sad_Group2=nullrect udg_Sad_Map=nullunit array udg_Coe_Unitreal array udg_Coe_Realplayer udg_Coe_Own=nullinteger udg_Coe_Max=0location udg_Coe_Loc=nullinteger udg_Coe_Int=0group udg_Coe_Group=null
group udg_Coe_GroupShake=nullunit array udg_Amp_Unitplayer udg_Amp_Own=nullreal array udg_Amp_Reallocation array udg_Amp_Locgroup udg_Amp_Group=null
integer udg_Amp_Int=0boolean udg_Amp_Bool=falsegroup udg_Amp_Group2=nullhashtable udg_Amp_Hash=nullinteger udg_Amp_Key=0boolean udg_Amp_BoolSpawn=falseunit array udg_Uvp_Unitplayer udg_Uvp_Own=nullreal array udg_Uvp_Reallocation array udg_Uvp_Locgroup udg_Uvp_Group=null
boolean udg_Uvp_Bool=falseinteger udg_Uvp_Int=0unit array udg_Rkj_Unitinteger udg_Rkj_Lv=0
integer udg_Rkj_Skill=0integer array udg_Rkj_Buffreal udg_Rkj_Real=0real udg_Rkj_Delay=0
real udg_Rkj_Time=0player udg_Rkj_Own=nullgroup udg_Rkj_Group=null
location udg_Rkj_Loc=nullgroup udg_Rkj_Group2=nullweathereffect array udg_Weather_Mapunit array udg_Pdn_Unitlocation array udg_Pdn_Locplayer udg_Pdn_Own=nullreal array udg_Pdn_Realinteger udg_Pdn_Int=0group udg_Pdn_Group=null
rect udg_Pdn_Rect=nullboolean udg_Pdn_Bool=falsegroup udg_Pdn_GroupDummy=nullhashtable udg_Pdn_Hash=nullinteger udg_Pdn_Key=0integer udg_Pdn_Result=0
boolean udg_Sdt_Bool=falseunit udg_Sdt_Unit=nullplayer udg_Sdt_Own=nullreal udg_Sdt_Real=0unit udg_Czj_Unit=nulllocation array udg_Czj_Locreal array udg_Czj_Realplayer udg_Czj_Own=nullboolean udg_Czj_Bool=falsereal array udg_Czj_Speed
integer udg_Czj_Int=0group udg_Czj_Group=null
integer udg_Rep_Buff=0boolean udg_Kds_Bool=falsegroup udg_Kds_Group=null
group udg_Kds_Group2=nullinteger udg_Kds_Int=0location array udg_Kds_Locplayer udg_Kds_Own=nullreal array udg_Kds_Realunit array udg_Kds_Unitunit udg_Jog_Unit=nulllocation array udg_Jog_Locreal array udg_Jog_Realinteger array udg_Jog_Intplayer udg_Jog_Own=nullgroup udg_Jog_Group=null
player udg_Tmt_Own=nullinteger udg_Tmt_Buff=0unit array udg_Vri_Unitplayer udg_Vri_Own=nulllocation udg_Vri_Loc=nullreal array udg_Vri_Realgroup udg_Vri_Group=null
texttag udg_Vri_Text=nulltrigger udg_Mmg_TrigDie=null
trigger udg_Mmg_TrigAtk=null
unit udg_Mmg_Unit=nullinteger array udg_Mmg_Intplayer udg_Mmg_Own=nullboolean udg_Mmg_Bool=falseunit array udg_Rgo_Unitlocation array udg_Rgo_Locplayer udg_Rgo_Own=nullreal array udg_Rgo_Realinteger udg_Rgo_Int=0group udg_Rgo_Group=null
effect udg_Rgo_Eff=nullinteger array udg_Weather_Stackinteger array udg_Upgrade_Typegroup udg_C1_Group=nullgroup udg_C1_GroupDummy=null
integer array udg_C1_Int
location array udg_C1_Locplayer udg_C1_Own=nullreal array udg_C1_Realtrigger udg_C1_TrigAtk=nulltrigger udg_C1_TrigDie=nullinteger udg_C1_Type=0unit udg_C1_Unit=nullunit array udg_C12_Unitlocation array udg_C12_Locreal array udg_C12_RealLocreal array udg_C12_Realplayer udg_C12_Own=nullgroup udg_C12_Group=null
integer udg_C12_Int=0unit array udg_C3_Unitlocation udg_C3_Loc=null
player udg_C3_Own=nullreal array udg_C3_Realgroup udg_C3_Group=nullunit array udg_C4_Unitlocation udg_C4_Loc=null
player udg_C4_Own=nullreal array udg_C4_Realgroup udg_C4_Group=nullgroup udg_C4_Group2=null
unit array udg_C0_Unitlocation udg_C0_Loc=null
player udg_C0_Own=nullinteger udg_C0_Int=0
real array udg_C0_Realgroup udg_C0_Group=nulleffect udg_C0_Eff=nullinteger udg_Rgo_Skill=0unit udg_C13_Unit=nulllocation array udg_C13_Locreal array udg_C13_Realboolean udg_C13_Bool=falseunit udg_Fsw_Unit=nullplayer udg_Fsw_Own=nullgroup udg_Fsw_Group=null
integer udg_Fsw_Stack=0integer udg_Fsw_Dmg=0trigger udg_Lot_Trig=nulltrigger udg_Lot_TrigCast=nullinteger array udg_Cin_Intunit array udg_Cin_Unitinteger udg_Cin_Type=0player udg_Cin_Own=nulllocation array udg_Cin_Locreal array udg_Cin_RealLocreal array udg_Cin_Realgroup udg_Cin_Group=null
group udg_Cin_GroupDummy=nullgroup udg_Cin_Group2=nullgroup udg_Cin_GroupTake=null
integer array udg_Cin_Dmgunit udg_Lot_Unit=nullreal udg_Lot_Delay=0
boolean udg_Lot_Bool=falseunit array udg_Kjd_Unitplayer udg_Kjd_Own=nulllocation array udg_Kjd_Locrect udg_Kjd_Rect=nullinteger array udg_Kjd_Intreal udg_Kjd_Real=0group udg_Kjd_GroupAtk=nullgroup udg_Kjd_GroupDummy=nullgroup udg_Kjd_Group=null
trigger array udg_AI_Trigtimer udg_Timer_DuelWarning=null
unit udg_Tjr_Unit=nullreal udg_Tjr_Dmg=0player udg_Tjr_Own=nullgroup udg_Tjr_Group=null
integer udg_Frostmourne_Stack=0boolean udg_AI_ForbiddenItem=falseboolean udg_AI_PickItemBool=falseunit udg_AI_PickItemUnit=nullunit udg_Ovp_Unit=nullreal udg_Ovp_Dmg=0player udg_Ovp_Own=nullinteger udg_Ovp_Int=0integer udg_Ovp_Buff=0unit array udg_Bst_Unitinteger udg_Bst_Int=0unit udg_Hws_Unit=nulllocation array udg_Hws_Locreal array udg_Hws_Realinteger udg_Hws_Int=0player udg_Hws_Own=nullgroup udg_Hws_Group=null
group udg_Hws_Group2=nullgroup udg_Hws_GroupDummy=nullgroup udg_Hws_GroupShake=nullunit array udg_Bwt_Unitlocation array udg_Bwt_Locreal array udg_Bwt_Realplayer udg_Bwt_Own=nullinteger udg_Bwt_Int=0unit array udg_Bwt_Dummy
effect array udg_Bwt_Eff
unit array udg_Czs_Unitplayer udg_Czs_Own=nulllocation udg_Czs_Loc=nullreal array udg_Czs_Realinteger udg_Czs_Int=0group udg_Czs_Group=null
location udg_Czs_Loc2=nullunit udg_Hidan_Blood=nullunit udg_Hidan_Target=nullreal udg_Hidan_Reduce=0trigger udg_Hidan_BloodTrig=null
effect udg_Hidan_Eff=nullunit udg_Hidan_Curse=nullunit udg_Hidan=nullunit udg_Hidan_AreaUnit=null
trigger udg_Btz_TrigDie=null
real udg_Btz_Delay=0
unit udg_Btz_Unit=nullboolean udg_Btz_Bool=falseunit array udg_Hsm_Unitlocation array udg_Hsm_Locreal array udg_Hsm_Realplayer udg_Hsm_Own=nullinteger udg_Hsm_Int=0effect array udg_Hsm_Eff
real udg_Kkg_Fly=0unit array udg_Ptk_Unitplayer udg_Ptk_Own=nullreal array udg_Ptk_Reallocation array udg_Ptk_Locgroup udg_Ptk_Group=null
integer udg_Ptk_Int=0boolean udg_Ptk_Bool=falsegroup udg_Ptk_Group2=nullhashtable udg_Ptk_Hash=nullinteger udg_Ptk_Key=0boolean udg_Ptk_BoolSpawn=falseunit array udg_Csh_Unitlocation array udg_Csh_Locreal array udg_Csh_Realplayer udg_Csh_Own=nullinteger array udg_Csh_Intgroup udg_Csh_Group=null
effect udg_Csh_Eff=nullunit array udg_Lsh_Unitplayer udg_Lsh_Own=nullinteger udg_Lsh_Int=0location array udg_Lsh_Locreal array udg_Lsh_Realeffect array udg_Lsh_Eff
integer udg_Wdg_Int=0unit array udg_Wdg_Unitlocation array udg_Wdg_Locreal array udg_Wdg_Realplayer udg_Wdg_Own=nullgroup udg_Wdg_Group=null
unit array udg_Skl_Unitlocation array udg_Skl_Locinteger udg_Skl_Int=0integer udg_Demon_Power_Buff=0unit array udg_Gvj_Unitlocation array udg_Gvj_Locreal array udg_Gvj_Realplayer udg_Gvj_Own=nullinteger array udg_Gvj_Intgroup udg_Gvj_GroupDummy=nullgroup udg_Gvj_GroupDummy2=nullgroup udg_Gvj_Group2=nullgroup udg_Gvj_GroupMove=null
group udg_Gvj_GroupShake=nullhashtable udg_Gvj_Hash=nullgroup udg_Gvj_GroupDmg=nullunit array udg_Flb_Unitlocation array udg_Flb_Locreal array udg_Flb_Realplayer udg_Flb_Own=nullinteger udg_Flb_Dmg=0group udg_Flb_Group=null
group udg_Flb_Group2=nullinteger udg_Flb_Int=0integer udg_Flw_Buff=0effect array udg_Flw_Eff
integer udg_Flw_Int=0player udg_Flw_Own=nullreal array udg_Flw_Realinteger udg_Flw_Skill=0unit udg_Flw_Target=null
unit udg_Flw_Unit=nullgroup udg_Flw_Group=null
boolean udg_Flw_Bool=falsetrigger udg_Shunko_Trig=null
unit array udg_Flo_Unitreal array udg_Flo_Realplayer udg_Flo_Own=nulllocation array udg_Flo_Locinteger udg_Flo_Int=0effect array udg_Flo_Eff
unit array udg_Tpk_Unitlocation array udg_Tpk_Locreal array udg_Tpk_Realplayer udg_Tpk_Own=nullinteger udg_Tpk_Int=0group udg_Tpk_Group=null
group udg_Tpk_Group2=nullinteger udg_Tki_Int=0trigger udg_Tki_TrigAttack=nulltrigger udg_Baf_TrigDie=null
trigger udg_Baf_TrigAtk=null
unit udg_Baf_Unit=nullplayer udg_Baf_Own=nullunit array udg_Rog_Unitlocation array udg_Rog_Locreal array udg_Rog_Realreal array udg_Rog_XYinteger array udg_Rog_Intboolean udg_Rog_Bool=falseplayer udg_Rog_Own=nulleffect array udg_Rog_Eff
player udg_Kkg_Own=nullinteger array udg_Player_PermanentBonusinteger udg_PermanentBonus_STR=0
integer udg_PermanentBonus_AGI=0
integer udg_PermanentBonus_INT=0
real udg_PermanentBonus_Delay=0boolean udg_GameModeMax=falseunit array udg_Kot_Unitlocation array udg_Kot_Locreal array udg_Kot_Realplayer udg_Kot_Own=nullinteger udg_Kot_Int=0integer udg_Kot_Count=0group udg_Kot_Group=null
group udg_Kot_Group2=nullunit udg_KamuiStrike_Unit=nullreal udg_KamuiStrike_Delay=0
unit array udg_Kmo_Unitlocation array udg_Kmo_Locplayer udg_Kmo_Own=nullinteger udg_Kmo_Int=0real array udg_Kmo_Realgroup udg_Kmo_Group=null
group udg_Kmo_Group2=nullinteger udg_Izanagi_Int=0unit udg_Izanagi_Unit=nullinteger udg_KamuiStrike_Chance=0
unit array udg_Izanagi_Dummy
location array udg_Izanagi_Locinteger udg_Izanagi_Count=0player udg_Izanagi_Own=nullboolean udg_Izanagi_Bool=falsereal udg_SwitchBody_X=0real udg_SwitchBody_Y=0boolean udg_Kmo_Bool=falseinteger udg_SpaceTime_Int=0unit udg_SpaceTime_Unit=null
unit udg_SpaceTime_Dummy=nullinteger udg_Rapid_Chance=0real udg_Rapid_Delay=0unit udg_Rapid_Unit=null
unit udg_Shs_Unit=nullreal array udg_Shs_Reallocation array udg_Shs_Locplayer udg_Shs_Own=nullinteger udg_Shs_Int=0group array udg_Shs_Groupgroup udg_Shs_Group2=nullunit array udg_Iah_Unitlocation array udg_Iah_Locreal array udg_Iah_Realreal array udg_Iah_X
real array udg_Iah_Y
player udg_Iah_Own=nullinteger array udg_Iah_Inthashtable udg_Iah_Hash=nullgroup udg_Iah_GroupDummy=nullgroup udg_Iah_GroupPush=null
group udg_Iah_GroupDmg=nullrect udg_Iah_Map=nullunit udg_Wlv_Unit=nullplayer udg_Wlv_Own=nullinteger udg_Wlv_Type=0integer array udg_Wlv_Intreal array udg_Wlv_Realtrigger array udg_Wlv_Triggerinteger udg_Mgh_Buff=0group udg_Mgh_Group=null
integer array udg_Mgh_DmgBuffinteger udg_Mgh_Skill=0unit array udg_Ing_Unitplayer udg_Ing_Own=nulllocation array udg_Ing_Locreal array udg_Ing_Realinteger array udg_Ing_Intgroup udg_Ing_Group=null
unit udg_Ryu_Unit=nulllocation array udg_Ryu_Locreal array udg_Ryu_Realrect udg_Ryu_Rect=nullplayer udg_Ryu_Own=nullinteger array udg_Ryu_Intgroup udg_Ryu_Group=null
group udg_Ryu_GroupDummy=nullunit array udg_Mgo_Unitlocation array udg_Mgo_Locreal array udg_Mgo_Realeffect udg_Mgo_Eff=nullplayer udg_Mgo_Own=nullunit udg_Wgf_Unit=nulllocation array udg_Wgf_Locreal array udg_Wgf_Realreal udg_Wgf_X=0
real udg_Wgf_Y=0
integer array udg_Wgf_Intplayer udg_Wgf_Own=nullgroup udg_Wgf_Group=null
group udg_Wgf_GroupDummy=nullgroup udg_Wgf_Group2=nulleffect array udg_Sds_Eff
rect udg_Wmk_Rect=nullplayer udg_Wmk_Own=nullunit array udg_Wmk_Unitreal array udg_Wmk_Realinteger array udg_Wmk_Intboolean udg_Wmk_Bool=falsegroup udg_Wmk_GroupDummy=nullgroup udg_Wmk_Group=null
location array udg_Wmk_Locunit udg_Wdm_Unit=nullreal array udg_Wdm_Realplayer udg_Wdm_Own=nulllocation array udg_Wdm_Locrect udg_Wdm_Rect=nullgroup udg_Wdm_Group=null
integer udg_Wdm_Int=0group udg_Wdm_GroupDummy=nullplayer udg_Kml_Own=nullgroup udg_Kml_GroupDummy=nullplayer udg_Tls_Own=nullinteger udg_Mto_Type=0player udg_Mto_Own=nullreal udg_Osg_X=0
real udg_Osg_Y=0
unit udg_Dial_Unit=nullreal array udg_Dial_Real
player udg_Dial_Own=null
location array udg_Dial_Locgroup udg_Dial_Group=nullinteger udg_Dial_Int=0hashtable udg_Dial_Hash=null
group udg_Dial_Group2=nullgroup udg_Pdn_Group2=nullinteger udg_Mgh_Count=0unit udg_Hoq_Unit=nullreal array udg_Hoq_Realboolean udg_Urs_Bool=falseunit udg_Urs_Type=nullreal udg_Urs_Delay=0
unit udg_Urs_Unit=nullhashtable udg_Lance_of_Lightning_Hash=nullunit udg_Lsc_Unit=nullgroup udg_Lsc_Group=null
group udg_Lsc_Group2=nullreal array udg_Lsc_XYreal array udg_Lsc_Realplayer udg_Lsc_Own=nullreal array udg_Teleport_UnitXreal array udg_Teleport_UnitYunit udg_Cje_Unit=nullrect udg_Cje_Rect=nullreal array udg_Cje_Realreal array udg_Cje_XYinteger udg_Cje_Skill=0integer udg_Cje_Int=0group udg_Cje_GroupDummy=nullplayer udg_Cje_Own=nullinteger udg_Wvf_Int=0group udg_Wvf_Group2=nullplayer udg_Wvf_Own=nullreal array udg_Wvf_Realunit udg_Wvf_Unit=nullreal array udg_Wvf_XYinteger udg_Wdj_Int=0player udg_Wdj_Own=nullreal array udg_Wdj_Realunit array udg_Wdj_Unitreal array udg_Wdj_XYunit array udg_Www_Dummy
integer udg_Www_Int=0player udg_Www_Own=nullreal array udg_Www_Realunit udg_Www_Unit=nullfogmodifier array udg_Vision_Duel1fogmodifier array udg_Vision_Duel2fogmodifier array udg_Vision_Homefogmodifier array udg_Vision_Golemfogmodifier array udg_Vision_BossLeftfogmodifier array udg_Vision_BossRightfogmodifier array udg_Vision_Centerinteger udg_Infinite_Darkness_Ability=0unit array udg_Infinite_Darkness_Dummyunit udg_Infinite_Darkness_Unit=null
boolean udg_Pkc_Bool=falsegroup udg_Pkc_Group=null
group udg_Pkc_Group2=nullgroup udg_Pkc_GroupShake=nullinteger udg_Pkc_Int=0player udg_Pkc_Own=nullreal array udg_Pkc_Realunit array udg_Pkc_Unitreal array udg_Pkc_XYinteger array udg_BerserkerBlood_Skillreal udg_BerserkerBlood_BuffDur=0group udg_BerserkerBlood_GroupDelay=null
hashtable udg_BerserkerBlood_Hash=nulleffect udg_Gvs_Eff=nullgroup udg_Gvs_Group=null
integer array udg_Gvs_Intplayer udg_Gvs_Own=nullreal array udg_Gvs_Realunit udg_Gvs_Unit=nullstring udg_Gvs_SEff=""integer array udg_GravityBlade_Buffinteger udg_GravityBlade_Chance=0real udg_GravityBlade_Delay=0real udg_GravityBlade_Dmg=0group udg_GravityBlade_Group=nullboolean udg_GravityBlade_IsCooldown=falseunit udg_GravityBlade_Unit=nullinteger array udg_GravityBlade_Abilityreal udg_GravityBlade_TrigDelay=0boolean udg_Fgr_Bool=falsegroup udg_Fgr_Group=null
group udg_Fgr_GroupShake=nullhashtable udg_Fgr_Hash=nullinteger array udg_Fgr_Intplayer udg_Fgr_Own=nullreal array udg_Fgr_Realunit udg_Fgr_Unit=nullreal array udg_Fgr_XYunit udg_Tbi_Dummy=nullgroup udg_Tbi_Group=null
group udg_Tbi_Group2=nullgroup udg_Tbi_GroupDummy=nullhashtable udg_Tbi_Hash=nullinteger udg_Tbi_Int=0player udg_Tbi_Own=nullreal array udg_Tbi_Realunit udg_Tbi_Unit=nullreal array udg_Tbi_XYhashtable udg_Tnh_Hash=nullgroup udg_TnhA_Group=nullinteger array udg_Tnh_Buffreal udg_Tnh_Dmg=0real udg_Tnh_TrigDelay=0
boolean udg_Tbi_BonusBool=falseinteger udg_Tnh_Max=0real udg_Tnh_Per=0group udg_Aoi_GroupDummy=nullinteger array udg_Aoi_Intplayer udg_Aoi_Own=nullreal array udg_Aoi_Realrect udg_Aoi_Rect=nullunit udg_Aoi_Unit=nullreal array udg_Aoi_XYboolean udg_Aoi_Bool=falsetimer udg_Aoi_Timer=null
integer array udg_Tso_Intplayer udg_Tso_Own=nullreal array udg_Tso_Realunit array udg_Tso_Unitreal array udg_Tso_XYunit udg_Ush_Dummy=nullinteger udg_Ush_Int=0real array udg_Ush_Realunit udg_Ush_Unit=nullreal array udg_Gvs_XYeffect array udg_Cpt_Eff
integer udg_Cpt_Int=0real array udg_Cpt_Realunit array udg_Cpt_Unitinteger udg_OrbFrost_Stack=0
real udg_Boss_SpawnDelay=0integer udg_Boss_MaxRand=0trigger array udg_FinalBoss_Triggerboolean udg_Golem_Final=falseinteger udg_GateBoss_Integer=0trigger array udg_GateBoss_Triggerboolean udg_Forgot_Bool=falsegroup udg_Divine_Group=nullboolean udg_Divine_Bool=falseforce udg_SoundPatch_EnableGroup=nullstring udg_soundPatch_Bleach=""string udg_soundPatch_Naruto=""string udg_soundPatch_OnePiece=""boolean udg_Hdb_Bool=falseboolean udg_Eng_Game=falsestring array udg_SoundPatch_List_Bleachstring array udg_SoundPatch_List_Narutostring array udg_SoundPatch_List_OnePiecestring array udg_SoundPatch_List_Wc3
integer udg_SoundPatch_MaxList_Wc3=0
integer udg_SoundPatch_MaxList_Bleach=0integer udg_SoundPatch_MaxList_OnePiece=0integer udg_SoundPatch_MaxList_Naruto=0boolean udg_SwitchBody_Bool=falsereal udg_TreeScale=0
integer array udg_CounterSpin_Abilityreal udg_CounterSpin_Delay=0
hashtable udg_Cooldown_Hash=null
hashtable udg_CounterSpin_Hash=nullgroup udg_CounterSpin_Group=null
integer udg_Ikkaku_UpgradeSk=0integer array udg_WindWalk_Abilityinteger udg_WindWalk_Max=0boolean udg_Fnm_Bool=falsegroup udg_Fnm_Group2=nullgroup udg_Fnm_Group3=nullhashtable udg_Fnm_Hash=nullinteger array udg_Fnm_Intplayer udg_Fnm_Own=nullreal array udg_Fnm_Realunit udg_Fnm_Unit=nullinteger udg_Gat_Count=0integer udg_Creep_MaxLv5=0integer udg_Creep_MaxLv6=0integer udg_Creep_MaxLvX=0integer array udg_Creep_Lv5integer array udg_Creep_Lv6integer array udg_Creep_LvXboolean udg_GameModeE1=false
rect gg_rct_Side_Team_2=null
rect gg_rct_Side_Team_1=null
rect gg_rct_BossLeft=nullrect gg_rct_BossRight=nullrect gg_rct_HeroSelection=nullrect gg_rct_Home_1=nullrect gg_rct_Home_2=nullrect gg_rct_Golem=nullrect gg_rct_Center=nullrect gg_rct_Divine_Area=null
rect gg_rct_PVP_Zone_1=nullrect gg_rct_PVP_Zone_2=nullsound gg_snd_ShadowClone=nullsound gg_snd_Shunpo=null
sound gg_snd_Soru=nullsound gg_snd_ShunpoAizen=nulltrigger gg_trg_Initialization1=nulltrigger gg_trg_Initalization2=nulltrigger gg_trg_Initalization3=nulltrigger gg_trg_GLOBALS=nulltrigger gg_trg_Life_Steal_System=nulltrigger gg_trg_Test_System=nulltrigger gg_trg_Global_Variables=null
trigger gg_trg_Game_Score=nulltrigger gg_trg_Hero_Setup=nulltrigger gg_trg_Teleport_Setup=nulltrigger gg_trg_Player_Setup=null
trigger gg_trg_Creep_Setup=nulltrigger gg_trg_Golem_Setup=nulltrigger gg_trg_Blue_Staff_Setup=null
trigger gg_trg_Music_Setup=nulltrigger gg_trg_Sound_Setup=nulltrigger gg_trg_Preload_System=nulltrigger gg_trg_Terrain_Set=nulltrigger gg_trg_Restore_Tree=null
trigger gg_trg_VisionStart1=null
trigger gg_trg_VisionStart2=null
trigger gg_trg_Board=nulltrigger gg_trg_Board_Update=null
trigger gg_trg_Mode_On=nulltrigger gg_trg_Mode_Checker=null
trigger gg_trg_All_Random=nulltrigger gg_trg_No_Event=null
trigger gg_trg_BountyHunter=null
trigger gg_trg_BountyHunterSet=nulltrigger gg_trg_BountyHunterRun=nulltrigger gg_trg_BountyHunterCheck=nulltrigger gg_trg_Fast_Hunt=nulltrigger gg_trg_SuperCreep=nulltrigger gg_trg_ScSpawn=nulltrigger gg_trg_ScDie=nulltrigger gg_trg_DoubleScore=nulltrigger gg_trg_Maximum_Score=nulltrigger gg_trg_Event_1v1=nulltrigger gg_trg_Pick=null
trigger gg_trg_Random=nulltrigger gg_trg_Repick=nulltrigger gg_trg_AI_Variables=null
trigger gg_trg_AI_Blink=null
trigger gg_trg_AI_Run=nulltrigger gg_trg_AI_Start=null
trigger gg_trg_AI_Action=nulltrigger gg_trg_AI_Return_1=nulltrigger gg_trg_AI_Return_2=nulltrigger gg_trg_AI_Duel=nulltrigger gg_trg_AI_Item=nulltrigger gg_trg_Teleport_Run=null
trigger gg_trg_All_Teleport=null
trigger gg_trg_Duel_Warning=null
trigger gg_trg_Duel=null
trigger gg_trg_Duel_Invul=nulltrigger gg_trg_Duel_Vul=null
trigger gg_trg_Duel_Kill=nulltrigger gg_trg_Duel_OverTime=nulltrigger gg_trg_Duel_Move=nulltrigger gg_trg_Atk_Disable=nulltrigger gg_trg_Kill=null
trigger gg_trg_First_Blood=nulltrigger gg_trg_Lvup=null
trigger gg_trg_Kill_Countdown=nulltrigger gg_trg_Revive=nulltrigger gg_trg_Home_Set=null
trigger gg_trg_Home_Regen=nulltrigger gg_trg_Remove_Regen=null
trigger gg_trg_Home1_Kill=nulltrigger gg_trg_Home2_Kil=nulltrigger gg_trg_Leavegame=nulltrigger gg_trg_Spawn_Creep=nulltrigger gg_trg_Exp_Bonus=nulltrigger gg_trg_Remove_Unit=nulltrigger gg_trg_Golem_Spawn=nulltrigger gg_trg_Golem_Leave=nulltrigger gg_trg_Golem_Die=nulltrigger gg_trg_Golem_Final=nulltrigger gg_trg_Boss_Setup=nulltrigger gg_trg_Boss_Spawn=nulltrigger gg_trg_Boss_BackL=nulltrigger gg_trg_Boss_BackR=nulltrigger gg_trg_FinalBoss_Ability1=nulltrigger gg_trg_FinalBoss_Ability2=nulltrigger gg_trg_FinalBoss=nulltrigger gg_trg_Gate_Boss=nulltrigger gg_trg_Gate_Boss_Back=nulltrigger gg_trg_Forgot_Init=nulltrigger gg_trg_Forgot_Boss=nulltrigger gg_trg_Forgot_Back=nulltrigger gg_trg_Forgot_Die=nulltrigger gg_trg_Divine_Init=nulltrigger gg_trg_Divine_Warp=nulltrigger gg_trg_DivineSword=nulltrigger gg_trg_Divine_Back=nulltrigger gg_trg_Divine_Death=null
trigger gg_trg_Bonus_Gold=nulltrigger gg_trg_Item_Stacking=nulltrigger gg_trg_Remove_Item=nulltrigger gg_trg_Refresh_Ring=null
trigger gg_trg_Permanent_Bonus=nulltrigger gg_trg_RegenRune=nulltrigger gg_trg_Fuison=nulltrigger gg_trg_Fusion2=nulltrigger gg_trg_Fusion3=nulltrigger gg_trg_Blade_Mail=nulltrigger gg_trg_DagonActive=nulltrigger gg_trg_Manta_Style=nulltrigger gg_trg_HexActive=nulltrigger gg_trg_DiffusalActive=nulltrigger gg_trg_DoomSearing=nulltrigger gg_trg_Spiritual=nulltrigger gg_trg_Frostmourne_Stack=nulltrigger gg_trg_Frostmourne_Remove=nulltrigger gg_trg_Frostmourne_Attack=nulltrigger gg_trg_Orb_of_Frost_Stack=nulltrigger gg_trg_Orb_of_Frost_Remove=nulltrigger gg_trg_Orb_of_Frost_Attack=nulltrigger gg_trg_Shop5_Upgrade=nulltrigger gg_trg_Space_Boots=nulltrigger gg_trg_Natural_Boots=nulltrigger gg_trg_Heavy_Boots=nulltrigger gg_trg_Fire_Boots=nulltrigger gg_trg_Adventure_Boots=nulltrigger gg_trg_Red_Boots=nulltrigger gg_trg_Helm_Battle_Thirst=nulltrigger gg_trg_God_Sphere=nulltrigger gg_trg_Arcanite_Shield=nulltrigger gg_trg_Frostmourne=nulltrigger gg_trg_Blood_Sword=nulltrigger gg_trg_Corrupted_Desolator=nulltrigger gg_trg_Zanbato=nulltrigger gg_trg_EyeSkadi=null
trigger gg_trg_TheHeaven=nulltrigger gg_trg_Hogyoku=nulltrigger gg_trg_Hex=nulltrigger gg_trg_Monkey=nulltrigger gg_trg_HellCrusher=nulltrigger gg_trg_UltimaSword=nulltrigger gg_trg_MysticStaff=nulltrigger gg_trg_Assault=nulltrigger gg_trg_HyperStone=nulltrigger gg_trg_AncientFigurine=nulltrigger gg_trg_Maximillian=nulltrigger gg_trg_TheRedButterfly=nulltrigger gg_trg_SilverHelm=nulltrigger gg_trg_Excalibur=nulltrigger gg_trg_Evasion=nulltrigger gg_trg_Quarterstaff=null
trigger gg_trg_Dagon=nulltrigger gg_trg_UltimateOrb=nulltrigger gg_trg_Linken=nulltrigger gg_trg_Satanic=nulltrigger gg_trg_Heart=nulltrigger gg_trg_Messerschmid=null
trigger gg_trg_Radiance=null
trigger gg_trg_SacredRelic=nulltrigger gg_trg_BoosSpeed=nulltrigger gg_trg_GloveHaste=nulltrigger gg_trg_MithrilHammer=nulltrigger gg_trg_MaelStrom=nulltrigger gg_trg_DemonEdge=nulltrigger gg_trg_Buriza=nulltrigger gg_trg_Lothar=nulltrigger gg_trg_Eaglehorn=nulltrigger gg_trg_PointBooster=null
trigger gg_trg_VitBooster=nulltrigger gg_trg_Shield=nulltrigger gg_trg_Planeswalker=null
trigger gg_trg_HelmIronWill=null
trigger gg_trg_ChainMail=nulltrigger gg_trg_BladeMail=nulltrigger gg_trg_BroadSword=nulltrigger gg_trg_BladeAtk=null
trigger gg_trg_Crystalys=nulltrigger gg_trg_Berserk=nulltrigger gg_trg_MaskofDeath=nulltrigger gg_trg_Vladmi=nulltrigger gg_trg_Diffusal=null
trigger gg_trg_StaffWizard=nulltrigger gg_trg_BladeAgi=null
trigger gg_trg_OrgeAxe=nulltrigger gg_trg_Searing=nulltrigger gg_trg_Sange=nulltrigger gg_trg_Yasha=nulltrigger gg_trg_EnergyBooster=nulltrigger gg_trg_SobiMask=null
trigger gg_trg_RingProtect=nulltrigger gg_trg_RobeMagi=null
trigger gg_trg_BootsAgi=null
trigger gg_trg_BeltStr=nulltrigger gg_trg_GiantStr=null
trigger gg_trg_Slipper=nulltrigger gg_trg_Mantle=nulltrigger gg_trg_Circlet=nulltrigger gg_trg_VoidStone=nulltrigger gg_trg_RingHealth=nulltrigger gg_trg_Ultimate_Upgrade=null
trigger gg_trg_Remove_Upgrade=nulltrigger gg_trg_Ms_Show=nulltrigger gg_trg_CameraNormal=null
trigger gg_trg_CameraHigh=nulltrigger gg_trg_CameraLow=nulltrigger gg_trg_Clear=nulltrigger gg_trg_Music_Command=nulltrigger gg_trg_SoundPatch_Enable=nulltrigger gg_trg_SoundPatch_Disable=nulltrigger gg_trg_End_Skill=nulltrigger gg_trg_End_Dialog=nulltrigger gg_trg_Stop_Shake=nulltrigger gg_trg_Return=nulltrigger gg_trg_Skill_Point_Manage=nulltrigger gg_trg_Destroy_AI=nulltrigger gg_trg_Blink1=nulltrigger gg_trg_Blink2=nulltrigger gg_trg_Cero=null
trigger gg_trg_AI_Ichigo=nulltrigger gg_trg_Getsuga_Tenshou=nulltrigger gg_trg_White_Getsuga_Tenshou=nulltrigger gg_trg_Ichigo_Getsuga=nulltrigger gg_trg_Hollow_Power=null
trigger gg_trg_Fgt_Init=null
trigger gg_trg_Fgt=nulltrigger gg_trg_FgtAtk=nulltrigger gg_trg_FgtDeath=null
trigger gg_trg_Black_Moon_Slash=null
trigger gg_trg_Gran_Getsuga_Cero=nulltrigger gg_trg_AI_Luffy=null
trigger gg_trg_Gomu_Rocket=nulltrigger gg_trg_Gomu_Bazooka=null
trigger gg_trg_Gat=nulltrigger gg_trg_GatL=null
trigger gg_trg_GatC=null
trigger gg_trg_Gear4_Init=nulltrigger gg_trg_Gear4=nulltrigger gg_trg_Rdw=nulltrigger gg_trg_Rdw2=null
trigger gg_trg_RdwV=null
trigger gg_trg_Kkg=nulltrigger gg_trg_KkgL=null
trigger gg_trg_KkgS=null
trigger gg_trg_KkgS2=nulltrigger gg_trg_AI_Naruto=nulltrigger gg_trg_Lrs=nulltrigger gg_trg_LrsL=null
trigger gg_trg_Jiton_Rasengan=nulltrigger gg_trg_Jiton_RasenganC=nulltrigger gg_trg_Kage_Bushin=nulltrigger gg_trg_Biju_Rasenshuriken=nulltrigger gg_trg_Cbr=nulltrigger gg_trg_CbrS=null
trigger gg_trg_CbrL=null
trigger gg_trg_AI_Rukia=null
trigger gg_trg_Trs=nulltrigger gg_trg_TrsL=null
trigger gg_trg_Smt=nulltrigger gg_trg_Hkr=nulltrigger gg_trg_HkrC=null
trigger gg_trg_HkrL=null
trigger gg_trg_HkrCancel=nulltrigger gg_trg_WhiteSword=nulltrigger gg_trg_HakkanoTogame=nulltrigger gg_trg_AI_Zoro=nulltrigger gg_trg_Ssn=nulltrigger gg_trg_Ykd=nulltrigger gg_trg_YkdL=null
trigger gg_trg_Sph=nulltrigger gg_trg_SphL=null
trigger gg_trg_Csp=nulltrigger gg_trg_CspL=null
trigger gg_trg_Tmk=nulltrigger gg_trg_TmkR=null
trigger gg_trg_Sds=nulltrigger gg_trg_SdsL=null
trigger gg_trg_SdsV=null
trigger gg_trg_AI_Sasuke=nulltrigger gg_trg_Amenotejikara=nulltrigger gg_trg_Sasuke_Genjutsu=nulltrigger gg_trg_Gkn=nulltrigger gg_trg_GknL=null
trigger gg_trg_GknD=null
trigger gg_trg_Dot=nulltrigger gg_trg_DotL=null
trigger gg_trg_Sasuke_Susanoo=nulltrigger gg_trg_Kirin=nulltrigger gg_trg_Sck=nulltrigger gg_trg_SckL=null
trigger gg_trg_Sasuke_Amaterasu=null
trigger gg_trg_AI_Sado=nulltrigger gg_trg_Osg=nulltrigger gg_trg_OsgL=null
trigger gg_trg_Dsf_Init=null
trigger gg_trg_Dsf=nulltrigger gg_trg_BrazoDiablo=nulltrigger gg_trg_Ets=nulltrigger gg_trg_Tdh=nulltrigger gg_trg_TdhL=null
trigger gg_trg_AI_Nami=nulltrigger gg_trg_Lrt=nulltrigger gg_trg_LrtL=null
trigger gg_trg_Tbt=nulltrigger gg_trg_Mto=nulltrigger gg_trg_MtoC=null
trigger gg_trg_Scs=nulltrigger gg_trg_ScsL=null
trigger gg_trg_Tlt=nulltrigger gg_trg_TltR=null
trigger gg_trg_AI_Kakashi=nulltrigger gg_trg_Rkb=nulltrigger gg_trg_RkbC=null
trigger gg_trg_RkbD=null
trigger gg_trg_Lib=nulltrigger gg_trg_LibL=null
trigger gg_trg_Kml=nulltrigger gg_trg_KmlL=null
trigger gg_trg_Lie=nulltrigger gg_trg_LieL=null
trigger gg_trg_Kakashi_KamuiStrike=nulltrigger gg_trg_Tls=nulltrigger gg_trg_TlsL=null
trigger gg_trg_AI_Ishida=nulltrigger gg_trg_Mts=nulltrigger gg_trg_Lrg=nulltrigger gg_trg_LrgM=null
trigger gg_trg_LrgL=null
trigger gg_trg_Sda=nulltrigger gg_trg_SdaR=null
trigger gg_trg_SdaC=null
trigger gg_trg_SdaL=null
trigger gg_trg_Sgr=nulltrigger gg_trg_Qff=nulltrigger gg_trg_QffC=null
trigger gg_trg_QffL=null
trigger gg_trg_AI_Usopp=null
trigger gg_trg_Dial=null
trigger gg_trg_DialL=nulltrigger gg_trg_Tjr=nulltrigger gg_trg_Stf_Init=null
trigger gg_trg_StfU=null
trigger gg_trg_Stf=nulltrigger gg_trg_Seg=nulltrigger gg_trg_Abe=nulltrigger gg_trg_Ipf=nulltrigger gg_trg_IpfB=null
trigger gg_trg_IpfL=null
trigger gg_trg_IpfL2=nulltrigger gg_trg_AI_Neji=nulltrigger gg_trg_Gef=nulltrigger gg_trg_Eth=nulltrigger gg_trg_EthL=null
trigger gg_trg_Rti=nulltrigger gg_trg_RtiL=null
trigger gg_trg_Bkg=nulltrigger gg_trg_BkgC=null
trigger gg_trg_BkgDmg=nulltrigger gg_trg_Hns=nulltrigger gg_trg_HnsL=null
trigger gg_trg_HnsC=null
trigger gg_trg_Etp=nulltrigger gg_trg_EtpL=null
trigger gg_trg_Etp2=null
trigger gg_trg_AI_Byakuya=nulltrigger gg_trg_Tcb=nulltrigger gg_trg_TcbL=null
trigger gg_trg_Srl=nulltrigger gg_trg_Senbonzakura_Kageyoshi=nulltrigger gg_trg_Anl=nulltrigger gg_trg_AnlL=null
trigger gg_trg_AnlE=null
trigger gg_trg_Wes=nulltrigger gg_trg_AI_Shirohige=null
trigger gg_trg_Endurance=nulltrigger gg_trg_Nrt=nulltrigger gg_trg_NrtL=null
trigger gg_trg_Grc_Init=null
trigger gg_trg_Grc=nulltrigger gg_trg_Gks=nulltrigger gg_trg_GksL=null
trigger gg_trg_Kin=nulltrigger gg_trg_KinL=null
trigger gg_trg_Isk=nulltrigger gg_trg_IskD=null
trigger gg_trg_AI_Madara=nulltrigger gg_trg_Madara_SixPath=nulltrigger gg_trg_Inton_Raiha=nulltrigger gg_trg_Shadow_Strike=nulltrigger gg_trg_Goka_Mekkyaku=nulltrigger gg_trg_Rinbo=nulltrigger gg_trg_Mti=nulltrigger gg_trg_MtiL=null
trigger gg_trg_AI_Aizen=null
trigger gg_trg_Kanzen_Saimin=nulltrigger gg_trg_Hypnosis_Strike=nulltrigger gg_trg_Hogyoku_Power=nulltrigger gg_trg_Kyokya_Suigetsu=nulltrigger gg_trg_Mirage_Strike=nulltrigger gg_trg_Khg=nulltrigger gg_trg_KhgL=null
trigger gg_trg_AI_Ace=nulltrigger gg_trg_Fire_Skin=nulltrigger gg_trg_Hik=nulltrigger gg_trg_HikL=null
trigger gg_trg_Fire_Shield=nulltrigger gg_trg_Hibashira=nulltrigger gg_trg_Hdb=nulltrigger gg_trg_HdbL=null
trigger gg_trg_Eti=nulltrigger gg_trg_EtiL=null
trigger gg_trg_AI_Itachi=nulltrigger gg_trg_Izanami=nulltrigger gg_trg_Ffb_Init=null
trigger gg_trg_Ffb=nulltrigger gg_trg_FfbL=null
trigger gg_trg_Bunshin_Daibakuha=nulltrigger gg_trg_Iss_Init=null
trigger gg_trg_Iss=nulltrigger gg_trg_Iss_Anim=null
trigger gg_trg_Tsukuyomi=nulltrigger gg_trg_Hii=nulltrigger gg_trg_HiiL=null
trigger gg_trg_AI_Hitsugaya=null
trigger gg_trg_Hnm=nulltrigger gg_trg_HnmL=null
trigger gg_trg_Inv=nulltrigger gg_trg_InvL=null
trigger gg_trg_Inv2=null
trigger gg_trg_InvL2=nulltrigger gg_trg_Daiguren_Init=nulltrigger gg_trg_Daiguren=null
trigger gg_trg_Dhf=nulltrigger gg_trg_DhfL=null
trigger gg_trg_Hho=nulltrigger gg_trg_HhoL=null
trigger gg_trg_HhoR=null
trigger gg_trg_AI_Crocodile=null
trigger gg_trg_Sand_Skin=nulltrigger gg_trg_Dsd=nulltrigger gg_trg_DsdL=null
trigger gg_trg_Csd=nulltrigger gg_trg_CsdL=null
trigger gg_trg_Crocodile_Init=nulltrigger gg_trg_Gse=nulltrigger gg_trg_GseL=null
trigger gg_trg_Sad=nulltrigger gg_trg_SadL=null
trigger gg_trg_Coe=nulltrigger gg_trg_AI_Pain=nulltrigger gg_trg_Samsara=nulltrigger gg_trg_Amp=nulltrigger gg_trg_AmpL=null
trigger gg_trg_Uvp=nulltrigger gg_trg_UvpL=null
trigger gg_trg_Rkj=nulltrigger gg_trg_Pdn=nulltrigger gg_trg_PdnL=null
trigger gg_trg_PdnL2=nulltrigger gg_trg_Sdt=nulltrigger gg_trg_Sdt_Die=nulltrigger gg_trg_AI_Kenpachi=nulltrigger gg_trg_Thrilling_Spiritual=nulltrigger gg_trg_Czj=nulltrigger gg_trg_CzjL=null
trigger gg_trg_Release_Eye=nulltrigger gg_trg_Release_Eye_Attack=nulltrigger gg_trg_Kds=nulltrigger gg_trg_AI_Enel=nulltrigger gg_trg_Jog=nulltrigger gg_trg_Tmt=nulltrigger gg_trg_Tmt_Attack=nulltrigger gg_trg_Vri_Cast=null
trigger gg_trg_Vri_L=nulltrigger gg_trg_Vri=nulltrigger gg_trg_Mmg=nulltrigger gg_trg_MmgL=null
trigger gg_trg_Rgo=nulltrigger gg_trg_RgoL=null
trigger gg_trg_AI_Deidara=nulltrigger gg_trg_C13=nulltrigger gg_trg_C13L=null
trigger gg_trg_C1=nulltrigger gg_trg_C1_Bomb=nulltrigger gg_trg_C12=nulltrigger gg_trg_C12L=null
trigger gg_trg_C3=nulltrigger gg_trg_C3L=nulltrigger gg_trg_C4=nulltrigger gg_trg_C4L=nulltrigger gg_trg_C4L2=null
trigger gg_trg_C0=nulltrigger gg_trg_C0L=nulltrigger gg_trg_AI_Yamamoto=nulltrigger gg_trg_Fsw=nulltrigger gg_trg_FswL=null
trigger gg_trg_Lot_Init=null
trigger gg_trg_Lot=nulltrigger gg_trg_Lot_Atk=nulltrigger gg_trg_Cin=nulltrigger gg_trg_CinL=null
trigger gg_trg_CinL2=nulltrigger gg_trg_CinL3=nulltrigger gg_trg_Kjd=nulltrigger gg_trg_KjdL=null
trigger gg_trg_Kjd_Atk=nulltrigger gg_trg_AI_Mihawk=nulltrigger gg_trg_Ovp=nulltrigger gg_trg_Ovp_Atk=nulltrigger gg_trg_Bst=nulltrigger gg_trg_BstV=null
trigger gg_trg_Hws=nulltrigger gg_trg_HwsL=null
trigger gg_trg_Wof=nulltrigger gg_trg_Bwt=nulltrigger gg_trg_BwtL=null
trigger gg_trg_BwtL2=nulltrigger gg_trg_AI_Hidan=null
trigger gg_trg_Scythe_Slash=null
trigger gg_trg_Wielding_Strike=nulltrigger gg_trg_Blood_Die=nulltrigger gg_trg_Czs=nulltrigger gg_trg_Czs_L=nulltrigger gg_trg_Czs_End=nulltrigger gg_trg_Curse_Jutsu=nulltrigger gg_trg_Curse_Dmg=nulltrigger gg_trg_Curse_Area=nulltrigger gg_trg_Spear_Self_Pain=nulltrigger gg_trg_AI_Evil_Ichigo=nulltrigger gg_trg_White_Getsuga=nulltrigger gg_trg_Getsuga_Strike=nulltrigger gg_trg_Btz_Init=null
trigger gg_trg_Btz=nulltrigger gg_trg_Btz_Atk=nulltrigger gg_trg_Hsm=nulltrigger gg_trg_HsmL=null
trigger gg_trg_HsmL2=nulltrigger gg_trg_Evil_Moon_Slash=nulltrigger gg_trg_AI_Sanji=null
trigger gg_trg_Ptk_Cast=null
trigger gg_trg_Ptk=nulltrigger gg_trg_PtkL=null
trigger gg_trg_Veal_Shot=nulltrigger gg_trg_Diable_Jambe=null
trigger gg_trg_Csh=nulltrigger gg_trg_CshL=null
trigger gg_trg_Lsh=nulltrigger gg_trg_LshL=null
trigger gg_trg_Lsh2=null
trigger gg_trg_Lsh3=null
trigger gg_trg_AI_Zabuza=nulltrigger gg_trg_Water_Prison=null
trigger gg_trg_Wdg=nulltrigger gg_trg_WdgL=null
trigger gg_trg_Flying_Turn_Slash=nulltrigger gg_trg_Hidden_Mist_Jutsu=nulltrigger gg_trg_Skl=nulltrigger gg_trg_SklV=null
trigger gg_trg_Demon_Power=nulltrigger gg_trg_Demon_Power_Attack=nulltrigger gg_trg_Gvj=nulltrigger gg_trg_GvjL=null
trigger gg_trg_GvjM=null
trigger gg_trg_AI_Yoruichi=nulltrigger gg_trg_Flb=nulltrigger gg_trg_FlbL=null
trigger gg_trg_Flw=nulltrigger gg_trg_Flw_Atk=nulltrigger gg_trg_FlwL=null
trigger gg_trg_Flash_Strike=null
trigger gg_trg_Shunko_Init=nulltrigger gg_trg_Shunko=nulltrigger gg_trg_Flo=nulltrigger gg_trg_FloL=null
trigger gg_trg_FloL2=nulltrigger gg_trg_AI_Lucci=null
trigger gg_trg_Tpk=nulltrigger gg_trg_TpkL=null
trigger gg_trg_Shigan=nulltrigger gg_trg_Tki_Init=null
trigger gg_trg_Tki=nulltrigger gg_trg_Baf_Init=null
trigger gg_trg_Baf=nulltrigger gg_trg_Rog=nulltrigger gg_trg_RogL=null
trigger gg_trg_AI_Tobi=nulltrigger gg_trg_TimeSpace=nulltrigger gg_trg_TimeSpaceL=nulltrigger gg_trg_Kot=nulltrigger gg_trg_KotL=null
trigger gg_trg_Kamui_Strike_Learn=nulltrigger gg_trg_Kamui_Strike=null
trigger gg_trg_Kmo=nulltrigger gg_trg_KmoL=null
trigger gg_trg_Switch_Body_Init=null
trigger gg_trg_Switch_Body=nulltrigger gg_trg_Switch_Body_Dmg=nulltrigger gg_trg_Izanagi_Init=null
trigger gg_trg_Izanagi=nulltrigger gg_trg_Izanagi_L=nulltrigger gg_trg_Izanagi_Speed=nulltrigger gg_trg_AI_Starrk=nulltrigger gg_trg_Rapid_Shot_Learn=null
trigger gg_trg_Rapid_Shot=nulltrigger gg_trg_Shs=nulltrigger gg_trg_ShsL=null
trigger gg_trg_Iah=nulltrigger gg_trg_IahL=null
trigger gg_trg_IahM=null
trigger gg_trg_IahP=null
trigger gg_trg_IahC=null
trigger gg_trg_Wlv=nulltrigger gg_trg_AI_Akainu=nulltrigger gg_trg_Mgh=nulltrigger gg_trg_MghA=null
trigger gg_trg_Ing=nulltrigger gg_trg_IngL=null
trigger gg_trg_Magma_Frenzy=null
trigger gg_trg_Ryu=nulltrigger gg_trg_RyuL=null
trigger gg_trg_Mgo=nulltrigger gg_trg_MgoL=null
trigger gg_trg_AI_Hashirama=null
trigger gg_trg_Universe=null
trigger gg_trg_Wgf=nulltrigger gg_trg_WgfL=null
trigger gg_trg_Wood_Destruction=null
trigger gg_trg_Five_Rashomon=nulltrigger gg_trg_Wdm=nulltrigger gg_trg_Wdm_L=nulltrigger gg_trg_Wmk=nulltrigger gg_trg_WmkL=null
trigger gg_trg_AI_Ulquiorra=null
trigger gg_trg_Memory_Erasing=nulltrigger gg_trg_Hoq=nulltrigger gg_trg_HoqL=null
trigger gg_trg_Urs_Init=null
trigger gg_trg_Urs=nulltrigger gg_trg_Urs_Atk=nulltrigger gg_trg_Lance_of_Lightning=nulltrigger gg_trg_AI_Kizaru=nulltrigger gg_trg_Lsc=nulltrigger gg_trg_LscL=null
trigger gg_trg_Ama_no_Murakumo=nulltrigger gg_trg_Eight_Span_Mirror=nulltrigger gg_trg_Light_Regeneration=nulltrigger gg_trg_Cje=nulltrigger gg_trg_CjeL=null
trigger gg_trg_CjeC=null
trigger gg_trg_AI_Tobirama=nulltrigger gg_trg_Wvf=nulltrigger gg_trg_WvfL=null
trigger gg_trg_Giant_Water=nulltrigger gg_trg_Wdj=nulltrigger gg_trg_WdjL=null
trigger gg_trg_Www=nulltrigger gg_trg_WwwL=null
trigger gg_trg_Water_Wave=nulltrigger gg_trg_Infinite_Darkness=nulltrigger gg_trg_AI_Grimmjow=nulltrigger gg_trg_Cpt=nulltrigger gg_trg_CptL=null
trigger gg_trg_BerserkerBlood_Learn=null
trigger gg_trg_BerserkerBlood=nulltrigger gg_trg_Grimmjow_Res_Init=nulltrigger gg_trg_Grimmjow_Res=null
trigger gg_trg_Pkc=nulltrigger gg_trg_PkcL=null
trigger gg_trg_AI_Fujitora=nulltrigger gg_trg_GravityBlade_Init=nulltrigger gg_trg_GravityBlade=null
trigger gg_trg_Gravity_Slam=null
trigger gg_trg_Gvs=nulltrigger gg_trg_GvsL=null
trigger gg_trg_Meteor_Storm=null
trigger gg_trg_Fgr=nulltrigger gg_trg_FgrC=null
trigger gg_trg_FgrL=null
trigger gg_trg_FgrL2=nulltrigger gg_trg_AI_Kaguya=nulltrigger gg_trg_Ush=nulltrigger gg_trg_UshL=null
trigger gg_trg_Tbi=nulltrigger gg_trg_TbiC=null
trigger gg_trg_TbiL=null
trigger gg_trg_Dark_Roots=nulltrigger gg_trg_Tnh=nulltrigger gg_trg_TnhA=null
trigger gg_trg_Aoi_Learn=nulltrigger gg_trg_Aoi=nulltrigger gg_trg_Tso=nulltrigger gg_trg_TsoL=null
trigger gg_trg_AI_Ikkaku=nulltrigger gg_trg_Great_Cleave=null
trigger gg_trg_Counter_Spin=null
trigger gg_trg_Ikkaku_Bankai_Init=nulltrigger gg_trg_Ikkaku_Bankai=nulltrigger gg_trg_Dragon_Charge=nulltrigger gg_trg_Fnm=nulltrigger gg_trg_FnmL=null
trigger gg_trg_FnmL2=nulltrigger gg_trg_AI_Aokiji=nulltrigger gg_trg_FrostCounter=null
trigger gg_trg_Pheasant_Beak=nulltrigger gg_trg_Ice_Saber=nulltrigger gg_trg_Ice_Time=null
trigger gg_trg_Partisan=null
trigger gg_trg_IceAge=nulltrigger gg_trg_AI_Minato=nulltrigger gg_trg_Flying_Thunder_God=nulltrigger gg_trg_Flying_Raijin_Slash=nulltrigger gg_trg_NineTails_Mode=nulltrigger gg_trg_Rinbuko_Sanshiki=null
trigger gg_trg_Flying_Raijin_Rasengan=nulltrigger gg_trg_AI_Soifon=nulltrigger gg_trg_Suzumebachi=nulltrigger gg_trg_Wind_Blast=nulltrigger gg_trg_Nigeki_Kessatsu=nulltrigger gg_trg_Soifon_Shunkou=nulltrigger gg_trg_Soifon_ShunkouD=nulltrigger gg_trg_Jakuho_Raikoben=nulltrigger gg_trg_AI_Doflamingo=nulltrigger gg_trg_Goshikito=nulltrigger gg_trg_Tamaito=nulltrigger gg_trg_Black_Knight=null
trigger gg_trg_Sora_no_Michi=nulltrigger gg_trg_God_Thread=nulltrigger gg_trg_AI_Shunsui=nulltrigger gg_trg_Bushogoma=nulltrigger gg_trg_Katen_Kyokotsu=nulltrigger gg_trg_Kageoni=nulltrigger gg_trg_Kageoni_Strike=nulltrigger gg_trg_Karamatsu_Shinju=null
unit gg_unit_n01C_0098=nullunit gg_unit_n004_0029=nullunit gg_unit_n000_0074=nullunit gg_unit_n004_0028=nullunit gg_unit_n000_0061=nullunit gg_unit_n000_0059=nullunit gg_unit_n000_0058=nullunit gg_unit_n000_0057=nullunit gg_unit_n000_0056=nullunit gg_unit_n004_0027=nullunit gg_unit_n004_0026=nullunit gg_unit_n004_0024=nullunit gg_unit_n00Q_0212=nullunit gg_unit_n000_0055=nullunit gg_unit_n000_0052=nullunit gg_unit_n000_0051=nullunit gg_unit_n000_0050=nullunit gg_unit_n000_0049=nullunit gg_unit_n004_0030=nullunit gg_unit_n004_0031=nullunit gg_unit_n004_0032=nullunit gg_unit_n004_0033=nullunit gg_unit_n004_0034=nullunit gg_unit_n00Q_0197=nullunit gg_unit_n000_0073=nullunit gg_unit_n00Q_0196=nullunit gg_unit_n00Q_0019=nullunit gg_unit_n00Q_0198=nullunit gg_unit_n00Q_0100=nullunit gg_unit_n01Y_0097=nullunit gg_unit_h0BK_0096=nullunit gg_unit_h0BK_0093=nullunit gg_unit_n00Q_0020=nullunit gg_unit_n01Y_0099=nullitem gg_item_I077_0102=nullunit gg_unit_n003_0025=nulltrigger Sasuke_EyesTrg=CreateTrigger()trigger Sasuke_SusanooD=CreateTrigger()trigger Madara_Goka_Mekkyaku_Cast=CreateTrigger()trigger Aizen_Hogyoku_Learn=CreateTrigger()trigger Akainu_MagmaFrenzyDmg=CreateTrigger()trigger Kizaru_Ama_no_MurakumoD=CreateTrigger()trigger Aokiji_FrostCounterDmg=CreateTrigger()trigger Minato_FlyingThunderGodB=CreateTrigger()
trigger Minato_FlyingRaijinSlashA=CreateTrigger()trigger Minato_FlyingRaijinSlashB=CreateTrigger()trigger Soifon_SuzumebachiLearn=CreateTrigger()trigger Byakuya_Gokei=CreateTrigger()trigger Shunsui_Itokiribasami=CreateTrigger()hashtable Ichigo_Hashhashtable Naruto_RikenHashhashtable Rukia_BankaiHashhashtable Madara_KatonHashhashtable Soifon_AtkedHashhashtable Joker_TamaitoHashhashtable Joker_SoraHash
hashtable Joker_SoraCDHashhashtable BlackDamageHash=InitHashtable()integer DivineItemId='I077'hashtable LifeSteal___lifeStealTBreal LifeSteal___delayTimeinteger LifeSteal___maxStack
integer LifeSteal___maxLifeStSkinteger array LifeSteal___lifeStSkId
real array LifeSteal___lifeStRatetrigger TestSystem___goldTrg=CreateTrigger()
trigger TestSystem___lvTrg=CreateTrigger()trigger TestSystem___refreshTrg=CreateTrigger()trigger TestSystem___spawnTrg=CreateTrigger()constant real AI_TrigDelayRun=.05constant real AI_TrigDelayEnable=.5constant real AI_AtkSelfHP=34.constant real AI_AtkSelfHPAvt=29.constant real AI_AtkTargetHPBelow=15.constant real AI_OrderBlinkDistance=499.
constant real AI_DelayAfterBlink=.5constant player SpawnCreep___p=Player($C)constant real SpawnCreep___centerX=GetUnitX(gg_unit_n003_0025)-45constant real SpawnCreep___centerY=GetUnitY(gg_unit_n003_0025)-400constant real SpawnCreep___countArea=400.constant integer SpawnCreep___maxSpawn=8
constant integer RefreshRing___skId='A0JZ'constant integer BladeMail___skid='A01T'
constant integer BladeMail___itemSkid='A01N'
constant integer BladeMail___buffid='B005'constant string BladeMail___effStr="Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl"constant integer MantaStyle___skId='A03P'constant integer AIIchigo__AINo=0constant integer AIIchigo__AIType1='H001'constant integer AIIchigo__AIType2='H018'constant integer GetsugaTenshou__skId='A0IJ'
constant real GetsugaTenshou__garea=200.
constant real GetsugaTenshou__speed=72.constant integer WhiteGetsugaTenshou__skId='A0IK'constant real WhiteGetsugaTenshou__garea=200.constant real WhiteGetsugaTenshou__speed=72.
constant real WhiteGetsugaTenshou__polar=-100.constant integer IchigoGetsuga__skId='A045'constant integer IchigoGetsuga__dummySkId1='A0IJ'constant integer IchigoGetsuga__dummySkId2='A0IK'constant integer HollowPower__skId='A046'constant integer HollowPower__dmgSkId='A047'
constant integer BlackMoonSlash__skId='A04A'
constant integer BlackMoonSlash__getsugaSkId1='A0IJ'
constant integer BlackMoonSlash__getsugaSkId2='A0IK'
constant integer GranGetsugaCero__skId='A04C'constant real GranGetsugaCero__garea=200.constant real GranGetsugaCero__speed=72.
unit array GranGetsugaCero__ureal GranGetsugaCero__dmgreal GranGetsugaCero__facing
player GranGetsugaCero__pgroup GranGetsugaCero__gcheckinteger GranGetsugaCero__iboolean GranGetsugaCero__btimer GranGetsugaCero__t
constant integer AILuffy__AINo=1
constant integer AILuffy__AIType1='N002'
constant integer AILuffy__AIType2='N011'
constant integer GomuRocket__skId1='A04F'constant integer GomuRocket__skId2='A077'constant integer GomuRocket__skStunId='A0IO'
constant real GomuRocket__garea=320.
constant real GomuRocket__speed=85.unit GomuRocket__ureal GomuRocket__spellXreal GomuRocket__spellYplayer GomuRocket__p
group GomuRocket__geffect GomuRocket__effinteger GomuRocket__skDummyinteger GomuRocket__itimer GomuRocket__tconstant integer GomuBazooka__skId1='A0B7'constant integer GomuBazooka__skId2='A04D'constant integer AINaruto__AINo=2constant integer AINaruto__AIType1='U000'constant integer AINaruto__AIType2='U004'constant integer JitonRasengan__skId='A04O'constant integer KageBushin__skId='A04Q'
constant integer KageBushin__cloneBuffId='B00L'unit KageBushin__uinteger KageBushin__itrigger KageBushin__summonTrgconstant integer BijudamaRasenshuriken__skId='A04R'constant real BijudamaRasenshuriken__garea=400.constant real BijudamaRasenshuriken__speed=67.unit array BijudamaRasenshuriken__ureal BijudamaRasenshuriken__dmgplayer BijudamaRasenshuriken__pinteger BijudamaRasenshuriken__i
integer BijudamaRasenshuriken__count
group BijudamaRasenshuriken__gchecktimer BijudamaRasenshuriken__tconstant integer AIRukia__AINo=3
constant integer AIRukia__AIType='O001'constant integer HakkanoTogame__skId='A05B'unit HakkanoTogame__uplayer HakkanoTogame__preal HakkanoTogame__dmginteger HakkanoTogame__count
constant integer HakkanoTogame__maxCount=($A-1)constant integer HakkanoTogame__buffId='B04J'trigger HakkanoTogame__atkTrgconstant integer AISasuke__AINo=5constant integer AISasuke__AIType1='O000'constant integer AISasuke__AIType2='O003'integer Sasuke_skBookId='A05Z'integer Sasuke_skUpgrade='A0IT'integer Sasuke_skSwitch='A0IS'integer Sasuke_skSpeedBuff='B00R'integer Sasuke_skBonusAgi='A0IV'
integer Sasuke_skDefBonus='A0IW'
integer Sasuke_skRinneEff='A05V'
boolean SasukeSusanoo__isSharingan=false
constant integer SasukeSusanoo__skId='A05P'constant integer SasukeSusanoo__morpId='O003'constant integer Kirin__skId='A05R'constant integer SasukeAmaterasu__skId='A05T'constant integer AIKakashi__AINo=8constant integer AIKakashi__AIType='N01E'constant integer KakashiKamuiStrike__skId='A06O'
constant integer AIByakuya__AINo=$Cconstant integer AIByakuya__AIType='U002'constant integer SenbonzakuraKageyoshi__skId='A07W'constant integer SenbonzakuraKageyoshi__skBuff='B01I'player SenbonzakuraKageyoshi__pTemp=null
constant integer SenbonzakuraKageyoshi__GokeiskId='A0J3'
unit array SenbonzakuraKageyoshi__GokeiUnitunit array SenbonzakuraKageyoshi__GokeiDummy
constant real SenbonzakuraKageyoshi__GokeiSpeed=36constant integer SenbonzakuraKageyoshi__GokeiMax=24integer SenbonzakuraKageyoshi__GokeiItimer SenbonzakuraKageyoshi__GokeiTimerconstant integer AIMadara__AINo=$Econstant integer AIMadara__AIType='H002'
constant integer IntonRaiha__skId='A021'
constant integer IntonRaiha__skLightning='A084'constant integer ShadowStrike__skId='A088'constant integer ShadowStrike__cloneBuff='B04N'constant integer GokaMekkyaku__skId='A087'unit array GokaMekkyaku__uunit array GokaMekkyaku__dummyplayer GokaMekkyaku__pgroup GokaMekkyaku__gcheckgroup GokaMekkyaku__gdmg
real array GokaMekkyaku__facingconstant real GokaMekkyaku__speed=62.constant real GokaMekkyaku__garea=300.real GokaMekkyaku__dmg1real GokaMekkyaku__dmg2constant integer GokaMekkyaku__maxDummy=3integer GokaMekkyaku__iinteger GokaMekkyaku__iSpawn
timer GokaMekkyaku__t1timer GokaMekkyaku__t2boolean GokaMekkyaku__isDmgOnconstant integer Rinbo___skId='A085'
constant integer Rinbo___cloneBuff='B04N'constant integer Rinbo___maxRinbo=4integer Rinbo___counttrigger Rinbo___RinboSummonTrgunit Rinbo___selfconstant integer AIAizen___AINo=$Fconstant integer AIAizen___AIType='O004'
constant integer KanzenSaimin___skId='A08M'constant integer KanzenSaimin___buffKyokaId='B01S'constant integer KanzenSaimin___buffWwId='B04X'boolean KanzenSaimin___canUseunit KanzenSaimin___self
unit array KanzenSaimin___dummyinteger KanzenSaimin___count
player KanzenSaimin___ptrigger KanzenSaimin___summonTrg
trigger KanzenSaimin___atkTrgconstant integer HypnosisStrike___skId='A08N'constant integer HogyokuPower___skId='A0K1'constant integer HogyokuPower___statsSkill='A0K0'constant integer HogyokuPower___dmgSkill='A0K9'constant integer HogyokuPower___dummyType='h03P'
effect array HogyokuPower___effreal HogyokuPower___healRate
unit HogyokuPower___self
player HogyokuPower___pconstant integer KyokyaSuigetsu___skId='A08T'constant integer KyokyaSuigetsu___buffId='B01T'constant integer KyokyaSuigetsu___bookId='A08P'constant integer MirageStrike___skId1='A0K6'
constant integer MirageStrike___skId2='A08Q'
constant integer MirageStrike___cloneBuff='B01S'
constant integer MirageStrike___bloodlustSkill='A0K3'unit MirageStrike___self
unit MirageStrike___targetplayer MirageStrike___ptrigger MirageStrike___summonTrg
constant integer AIAce___AINo=16
constant integer AIAce___AIType='N01F'constant real FireSkin___dist=251.constant integer FireShield___skId='A099'constant integer Hibashira___skId='A09B'
constant integer AIItachi___AINo=17constant integer AIItachi___AIType1='N01G'constant integer AIItachi___AIType2='N01I'constant integer Izanami___skId='A09I'unit Izanami___dummy
real Izanami___hpreal Izanami___spreal Izanami___markX
real Izanami___markY
timer Izanami___tinteger Izanami___iconstant integer BunshinDaibakuha___skId='A0ER'constant integer Tsukuyomi___skId='A09M'
constant integer Tsukuyomi___maxItachi=$Cunit array Tsukuyomi___itachiunit array Tsukuyomi___u
player Tsukuyomi___p
group Tsukuyomi___gdummy
real Tsukuyomi___dmg
integer Tsukuyomi___iinteger Tsukuyomi___counttimer Tsukuyomi___tconstant integer AIAkainu___AINo=34constant integer AIAkainu___AIType='H0AV'constant real MagmaFrenzy___dmgDef=.3constant integer MagmaFrenzy___skBuff='B039'
constant integer AmanoMurakumo___skId='A0EW'
constant integer AmanoMurakumo___morpType='N01Z'
constant integer AmanoMurakumo___chacne=$Ftrigger AmanoMurakumo___atkTrgconstant integer LightRegeneration___skId='A0EQ'
unit LightRegeneration___selfreal LightRegeneration___healHPreal LightRegeneration___healMPinteger LightRegeneration___itimer LightRegeneration___tconstant integer AIAokiji___AINo=43constant integer AIAokiji___AIType1='N01X'constant integer AIAokiji___AIType2='N02F'constant integer FrostCounter___skid='A0HR'constant integer FrostCounter___buffid='B048'constant integer FrostCounter___blockSkid='A0HT'
constant real FrostCounter___garea=250.constant integer PheasantBeak___skid='A0HF'unit array PheasantBeak___uplayer PheasantBeak___preal PheasantBeak___rreal PheasantBeak___facingreal PheasantBeak___dmgreal PheasantBeak___gareainteger PheasantBeak___i
timer PheasantBeak___tgroup PheasantBeak___gcheck=CreateGroup()trigger IceSaber___atkTrgtrigger IceSaber___deathTrgunit IceSaber___iSaberUnitconstant integer IceSaber___freezeRate=$Bconstant real IceSaber___freezeDmg=250.constant real IceSaber___garea=200.constant integer IceTime___skid='A0HN'constant integer Partisan___skid='A0HO'constant integer Partisan___maxDummy=$Aconstant real Partisan___speed=62.constant real Partisan___garea=200.unit array Partisan___uplayer Partisan___preal array Partisan___xreal array Partisan___yreal Partisan___dmginteger Partisan___i
timer Partisan___tconstant integer IceAge___skid='A0HP'constant real IceAge___garea=200.constant integer IceAge___maxL=8
unit IceAge___ugroup IceAge___gdummygroup IceAge___gcheckplayer IceAge___preal IceAge___xreal IceAge___yreal IceAge___dmginteger IceAge___itimer IceAge___t
boolean IceAge___bconstant integer AIMinato___AINo=44constant integer AIMinato___AIType1='O00D'constant integer AIMinato___AIType2='O00E'constant integer FlyingThunderGod___skid1='A0HL'
constant integer FlyingThunderGod___skid2='A0HU'
constant real FlyingThunderGod___garea1=200.
constant real FlyingThunderGod___garea2=120.
constant real FlyingThunderGod___speed=65.unit array FlyingThunderGod___ugroup FlyingThunderGod___gcheckplayer FlyingThunderGod___ptimer FlyingThunderGod___treal FlyingThunderGod___spellXreal FlyingThunderGod___spellYreal FlyingThunderGod___facingreal FlyingThunderGod___dmginteger FlyingThunderGod___i
constant integer FlyingRaijinSlash___skid1='A0HW'constant integer FlyingRaijinSlash___skid2='A0HX'constant integer FlyingRaijinSlash___buffid='B049'constant integer FlyingRaijinSlash___morpId='O00E'unit array FlyingRaijinSlash___spellUplayer FlyingRaijinSlash___spellPtimer FlyingRaijinSlash___treal FlyingRaijinSlash___dmg
integer FlyingRaijinSlash___timesconstant integer NineTailsMode___skid='A0HY'
constant integer NineTailsMode___morpId='O00E'constant integer RinbukoSanshiki___skid='A0HZ'constant real RinbukoSanshiki___timerDelay=.1constant real RinbukoSanshiki___garea=500.constant integer RinbukoSanshiki___minDummy=1constant integer RinbukoSanshiki___maxDummy=$Aunit array RinbukoSanshiki___uunit array RinbukoSanshiki___kunaiunit array RinbukoSanshiki___dummyplayer RinbukoSanshiki___ptimer RinbukoSanshiki___treal RinbukoSanshiki___spellXreal RinbukoSanshiki___spellYreal RinbukoSanshiki___dmgreal array RinbukoSanshiki___rinteger RinbukoSanshiki___iboolean RinbukoSanshiki___bconstant integer FlyingRaijinRasengan___skid='A0I1'constant real FlyingRaijinRasengan___speed=65.constant real FlyingRaijinRasengan___distan=300.
constant real FlyingRaijinRasengan___tarea=150.unit array FlyingRaijinRasengan___ueffect array FlyingRaijinRasengan___effplayer FlyingRaijinRasengan___ptimer FlyingRaijinRasengan___treal array FlyingRaijinRasengan___xreal array FlyingRaijinRasengan___yreal FlyingRaijinRasengan___facingreal FlyingRaijinRasengan___dmginteger FlyingRaijinRasengan___i
boolean FlyingRaijinRasengan___b
constant integer AISoifon___AINo=45constant integer AISoifon___AIType1='O00F'constant integer AISoifon___AIType2='O00G'constant integer Suzumebachi___skId='A0I2'constant integer Suzumebachi___stunBuff='B04E'constant integer Suzumebachi___dmySkId='A0I3'constant integer Suzumebachi___skBuff='B04B'
constant real Suzumebachi___cooldown=2.real Suzumebachi___dmgMulti=.0boolean Suzumebachi___isCooldown=falseunit Suzumebachi___u
constant integer WindBlast___skId='A0I5'
constant integer WindBlast___bWwId='B04C'constant integer WindBlast___sAspdId='A0I6'unit WindBlast___uconstant integer NigekiKessatsu___skId='A0I7'constant integer SoiFonShonko__skId='A0I8'constant integer SoiFonShonko__morpId='O00G'
constant integer JakuhoRaikoben__skId='A0I9'
constant real JakuhoRaikoben__garea1=120.constant real JakuhoRaikoben__garea2=440.constant real JakuhoRaikoben__dummySpeed=80.
real JakuhoRaikoben__backSpeedunit array JakuhoRaikoben__u
player JakuhoRaikoben__p
timer JakuhoRaikoben__t1
timer JakuhoRaikoben__t2
real array JakuhoRaikoben__facingreal JakuhoRaikoben__dmg
integer JakuhoRaikoben__iinteger JakuhoRaikoben__jconstant integer AIDoflamingo__AINo=46constant integer AIDoflamingo__AIType='U00R'
constant integer Goshikito__skId='A0IA'constant integer Goshikito__cloneId='U00R'constant integer Goshikito__cloneBuffId='B04F'constant integer Tamaito__skId='A0IB'constant real Tamaito__speed=80.
constant integer Tamaito__cloneId='U00R'
constant integer Tamaito__cloneBuffId='B04F'
constant integer BlackKnight__skId='A0ID'constant integer BlackKnight__cloneBuffId='B04F'
unit BlackKnight__utrigger BlackKnight__summonTrgconstant integer SoranoMichi__skId='A0IE'constant integer SoranoMichi__cloneId='U00R'
constant integer SoranoMichi__cloneBuffId='B04F'
constant integer SoranoMichi__dummySkId='A0IF'constant integer SoranoMichi__countRun=4
constant integer SoranoMichi__max=34
constant integer SoranoMichi__halfMax=SoranoMichi__max/ 2constant real SoranoMichi__heightRate=38.constant real SoranoMichi__maxHeight=(SoranoMichi__max*SoranoMichi__heightRate)constant real SoranoMichi__polarTarget=120.constant real SoranoMichi__garea=250.constant real SoranoMichi__cooldown=25.constant integer SoranoMichi__cdSkId='A0IG'integer SoranoMichi__stack=3
constant integer GodThread__skId='A0IH'constant integer GodThread__skRootId='A0II'constant integer GodThread__bufRootId='B04H'
unit array GodThread__uplayer GodThread__preal GodThread__anglereal GodThread__dmginteger GodThread__i
boolean GodThread__b
timer GodThread__tconstant integer AIShunsui__AINo=47constant integer AIShunsui__AIType='N01H'constant integer KatenKyokotsu__skId='A0JM'constant integer Kageoni__skId='A0JQ'constant integer Kageoni__buffId='B04T'constant integer Kageoni__skDmg='A0JR'constant integer Kageoni__skInvis='A0F9'
constant integer Kageoni__skStrike='A0JT'unit Kageoni__selfplayer Kageoni__ptimer Kageoni__t
constant integer KageoniStrike__skId='A0JT'constant integer KaramatsuShinju__skId1='A0JP'constant integer KaramatsuShinju__skId2='A0JY'constant integer KaramatsuShinju__skBook='A0JW'constant integer KaramatsuShinju__skHowl='A0JU'constant integer KaramatsuShinju__buffId='B04U'unit KaramatsuShinju__selfunit KaramatsuShinju__dummyplayer KaramatsuShinju__ptimer KaramatsuShinju__thashtable nzHash=InitHashtable()
endglobalsfunction InitGlobals takes nothing returns nothinglocal integer i=0set i=0loop
exitwhen(i>1)set udg_Player_Color[i]=""set udg_Player_Icon[i]=""set udg_Boss_Lv[i]=0
set udg_Boss_Check[i]=falseset udg_Gat_Real[i]=0set udg_Rdw_Real[i]=0set udg_Rdw_Group2[i]=CreateGroup()set udg_Kkg_Real[i]=0set udg_Kkg_Group[i]=CreateGroup()set udg_Lrs_Real[i]=0set udg_Cbr_Real[i]=0set udg_Cbr_Group[i]=CreateGroup()set udg_Board_Int[i]=0set udg_Player_Random[i]=falseset udg_Trs_Real[i]=0set udg_Hkr_Real[i]=0set udg_Ykd_Real[i]=0set udg_Sph_Group[i]=CreateGroup()set udg_Csp_Real[i]=0set udg_Csp_Group[i]=CreateGroup()set udg_Sds_Real[i]=0set udg_Sds_Int[i]=0
set udg_Sds_Group[i]=CreateGroup()set udg_Gkn_Real[i]=0set udg_Gkn_Int[i]=0
set udg_Gkn_Group[i]=CreateGroup()set udg_Dot_Real[i]=0set udg_Dot_Real2[i]=0set udg_Sck_Group[i]=CreateGroup()set udg_Sck_Int[i]=0
set udg_Osg_Real[i]=0set udg_Ets_Real[i]=0set udg_Tdh_Real[i]=0set udg_Lrt_Real[i]=0set udg_Tbt_Real[i]=0set udg_Scs_Real[i]=0set udg_Tlt_Real[i]=0set udg_Lib_Real[i]=0set udg_Kml_Real[i]=0set udg_Lie_Real[i]=0set udg_Tls_Real[i]=0set udg_Lrg_Real[i]=0set udg_Lrg_Int[i]=0
set udg_Sda_Real[i]=0set udg_MapSize[i]=0
set udg_Sgr_Real[i]=0set udg_Qff_Real[i]=0set udg_Qff_Group2[i]=CreateGroup()set udg_Seg_Real[i]=0set udg_Abe_Real[i]=0set udg_Abe_Int[i]=0
set udg_Ipf_Real[i]=0set udg_Ipf_Int[i]=0
set udg_Ipf_Key[i]=""set udg_Gef_Real[i]=0set udg_Eth_Real[i]=0set udg_Rti_Real[i]=0set udg_Hns_Int[i]=0
set udg_Hns_Real[i]=0set udg_Etp_Real[i]=0set udg_Board_Time[i]=0set udg_Player_Repick[i]=falseset udg_Player_Selected[i]=false
set udg_Player_Death[i]=0set udg_Player_Kill[i]=0
set udg_AI_Name[i]=""set udg_Kill_Stack[i]=0set udg_Player_Anc_2[i]=""set udg_Player_Anc_3[i]=""set udg_Player_Anc_4[i]=""set udg_Player_Anc_5[i]=""set udg_Player_Anc_6[i]=""set udg_Player_Anc_1[i]=""set udg_BoardInteger[i]=0set udg_Tcb_Real[i]=0set udg_Anl_Real[i]=0set udg_Anl_Int[i]=0
set udg_Wes_Real[i]=0set udg_Mti_Real[i]=0set udg_Nrt_Real[i]=0set udg_Ggs_Real[i]=0set udg_Kin_Real[i]=0set udg_Bug_Return[i]=falseset udg_Bug_ReturnAlive[i]=false
set udg_Hnm_Real[i]=0set udg_Inv_Real[i]=0set udg_Inv_Int[i]=0
set udg_Dhf_Real[i]=0set udg_Dhf_Int[i]=0
set udg_Hho_Real[i]=0set udg_Hik_Real[i]=0set udg_Hik_Int[i]=0
set udg_Hdb_Real[i]=0set udg_Eti_Real[i]=0set udg_Ffb_Real[i]=0set udg_Ffb_Int[i]=0
set udg_Cge_Real[i]=0set udg_Hii_Real[i]=0set udg_Hii_Int[i]=0
set udg_Dsd_Real[i]=0set udg_Csd_Real[i]=0set udg_Gse_Real[i]=0set udg_Sad_Real[i]=0set udg_Coe_Real[i]=0set udg_Amp_Real[i]=0set udg_Uvp_Real[i]=0set udg_Pdn_Real[i]=0set udg_Czj_Real[i]=0set udg_Czj_Speed[i]=0set udg_Kds_Real[i]=0set udg_Jog_Real[i]=0set udg_Jog_Int[i]=0
set udg_Vri_Real[i]=0set udg_Mmg_Int[i]=0
set udg_Rgo_Real[i]=0set udg_Weather_Stack[i]=0set udg_C1_Int[i]=0set udg_C1_Real[i]=0
set udg_C12_RealLoc[i]=0
set udg_C12_Real[i]=0set udg_C3_Real[i]=0
set udg_C4_Real[i]=0
set udg_C0_Real[i]=0
set udg_C13_Real[i]=0set udg_Cin_Int[i]=0
set udg_Cin_RealLoc[i]=0
set udg_Cin_Real[i]=0set udg_Cin_Dmg[i]=0
set udg_Kjd_Int[i]=0
set udg_Hws_Real[i]=0set udg_Bwt_Real[i]=0set udg_Czs_Real[i]=0set udg_Hsm_Real[i]=0set udg_Ptk_Real[i]=0set udg_Csh_Real[i]=0set udg_Csh_Int[i]=0
set udg_Lsh_Real[i]=0set udg_Wdg_Real[i]=0set udg_Gvj_Real[i]=0set udg_Gvj_Int[i]=0
set udg_Flb_Real[i]=0set udg_Flw_Real[i]=0set udg_Flo_Real[i]=0set udg_Tpk_Real[i]=0set udg_Rog_Real[i]=0set udg_Rog_XY[i]=0set udg_Rog_Int[i]=0
set udg_Player_PermanentBonus[i]=0set udg_Kot_Real[i]=0set udg_Kmo_Real[i]=0set udg_Shs_Real[i]=0set udg_Shs_Group[i]=CreateGroup()set udg_Iah_Real[i]=0set udg_Iah_X[i]=0set udg_Iah_Y[i]=0set udg_Iah_Int[i]=0
set udg_Wlv_Int[i]=0
set udg_Wlv_Real[i]=0set udg_Ing_Real[i]=0set udg_Ing_Int[i]=0
set udg_Ryu_Real[i]=0set udg_Mgo_Real[i]=0set udg_Wgf_Real[i]=0set udg_Wgf_Int[i]=0
set udg_Wmk_Real[i]=0set udg_Wmk_Int[i]=0
set udg_Wdm_Real[i]=0set udg_Dial_Real[i]=0set udg_Hoq_Real[i]=0set udg_Lsc_XY[i]=0set udg_Lsc_Real[i]=0set udg_Teleport_UnitX[i]=0set udg_Teleport_UnitY[i]=0set udg_Cje_Real[i]=0set udg_Cje_XY[i]=0set udg_Wvf_Real[i]=0set udg_Wvf_XY[i]=0set udg_Wdj_Real[i]=0set udg_Wdj_XY[i]=0set udg_Www_Real[i]=0set udg_Pkc_Real[i]=0set udg_Pkc_XY[i]=0set udg_Gvs_Int[i]=0
set udg_Gvs_Real[i]=0set udg_Fgr_Int[i]=0
set udg_Fgr_Real[i]=0set udg_Fgr_XY[i]=0set udg_Tbi_Real[i]=0set udg_Tbi_XY[i]=0set udg_Tnh_Buff[i]=0set udg_Aoi_Int[i]=0
set udg_Aoi_Real[i]=0set udg_Aoi_XY[i]=0set udg_Tso_Int[i]=0
set udg_Tso_Real[i]=0set udg_Tso_XY[i]=0set udg_Ush_Real[i]=0set udg_Gvs_XY[i]=0set udg_Cpt_Real[i]=0set udg_SoundPatch_List_Bleach[i]=""
set udg_SoundPatch_List_Naruto[i]=""
set udg_SoundPatch_List_OnePiece[i]=""set udg_SoundPatch_List_Wc3[i]=""set udg_CounterSpin_Ability[i]=0
set udg_WindWalk_Ability[i]=0set udg_Fnm_Int[i]=0
set udg_Fnm_Real[i]=0set i=i+1endloopset udg_Searing_Group=CreateGroup()set udg_Hogyoku_G=CreateGroup()set udg_Fgt_Group=CreateGroup()set udg_Gat_Group=CreateGroup()set udg_Gat_Group2=CreateGroup()
set udg_Rdw_Group=CreateGroup()set udg_Lrs_Group=CreateGroup()set udg_BossTimer=CreateTimer()set udg_Timer_SuperCreeps=CreateTimer()set udg_Kill_Timer1=CreateTimer()set udg_Trs_Group=CreateGroup()set udg_Smt_Group=CreateGroup()set udg_Hkr_Group=CreateGroup()set udg_Hkr_Group2=CreateGroup()
set udg_Ykd_Group=CreateGroup()set udg_Ykd_Group2=CreateGroup()
set udg_Sph_Group2=CreateGroup()
set udg_Tmk_Group=CreateGroup()set udg_Tmk_Group2=CreateGroup()
set udg_Gkn_Group2=CreateGroup()
set udg_Dot_Group=CreateGroup()set udg_Osg_Group=CreateGroup()set udg_Osg_Group5=CreateGroup()
set udg_Osg_Group4=CreateGroup()
set udg_Osg_Group3=CreateGroup()
set udg_Osg_Group2=CreateGroup()
set udg_Osg_Group7=CreateGroup()
set udg_Osg_Group6=CreateGroup()
set udg_Lao_Group=CreateGroup()set udg_Ets_Group=CreateGroup()set udg_Lrt_Group=CreateGroup()set udg_Tbt_Group=CreateGroup()set udg_Scs_Group=CreateGroup()set udg_Tlt_Group2=CreateGroup()
set udg_Tlt_Group=CreateGroup()set udg_Tlt_Group3=CreateGroup()
set udg_Rkb_Group=CreateGroup()set udg_Lib_Group=CreateGroup()set udg_Kml_Group=CreateGroup()set udg_Kml_Group2=CreateGroup()
set udg_Lie_Group=CreateGroup()set udg_Lie_Group2=CreateGroup()
set udg_Lrg_Group=CreateGroup()set udg_Sda_Group=CreateGroup()set udg_Sda_Group2=CreateGroup()
set udg_Sgr_Group2=CreateGroup()
set udg_Sgr_Group=CreateGroup()set udg_Qff_Group=CreateGroup()set udg_Seg_Group=CreateGroup()set udg_Abe_Group=CreateGroup()set udg_Abe_Group2=CreateGroup()
set udg_Ipf_Group3=CreateGroup()
set udg_Ipf_Group=CreateGroup()set udg_Ipf_Group2=CreateGroup()
set udg_Ipf_Group4=CreateGroup()
set udg_Eth_Group=CreateGroup()set udg_Eth_Group2=CreateGroup()
set udg_Rti_Group2=CreateGroup()
set udg_Rti_Group3=CreateGroup()
set udg_Rti_Group=CreateGroup()set udg_Bkg_Group=CreateGroup()set udg_Bkg_Group2=CreateGroup()
set udg_Hns_Group=CreateGroup()set udg_Hns_Group2=CreateGroup()
set udg_ShakeTimer1=CreateTimer()set udg_DummyCheckerGroup=CreateGroup()set udg_DummyCheckDisplay=CreateGroup()set udg_Game_Timer=CreateTimer()
set udg_Timer_Mode=CreateTimer()
set udg_Timer_Creep=CreateTimer()set udg_Duel_Team1=CreateGroup()
set udg_Duel_Team2=CreateGroup()
set udg_Leave_Group=CreateGroup()set udg_Duel_DummyTeam1=CreateGroup()set udg_Duel_DummyTeam2=CreateGroup()set udg_Timer_DuelReal=CreateTimer()
set udg_Kill_Timer2=CreateTimer()set udg_Kill_Timer3=CreateTimer()set udg_Kill_Timer4=CreateTimer()set udg_Kill_Timer5=CreateTimer()set udg_Kill_Timer6=CreateTimer()set udg_Kill_Timer7=CreateTimer()set udg_Kill_Timer8=CreateTimer()set udg_Kill_Timer9=CreateTimer()set udg_Kill_Timer10=CreateTimer()set udg_Kill_Timer11=CreateTimer()set udg_Kill_Timer12=CreateTimer()set udg_End_GroupDummy=CreateGroup()
set udg_End_Group=CreateGroup()set udg_ShakeTimer2=CreateTimer()set udg_ShakeTimer3=CreateTimer()set udg_ShakeTimer4=CreateTimer()set udg_ShakeTimer5=CreateTimer()set udg_ShakeTimer6=CreateTimer()set udg_ShakeTimer7=CreateTimer()set udg_ShakeTimer8=CreateTimer()set udg_ShakeTimer9=CreateTimer()set udg_ShakeTimer10=CreateTimer()set udg_ShakeTimer11=CreateTimer()set udg_ShakeTimer12=CreateTimer()set udg_End_DialogWin=DialogCreate()
set udg_End_DialogLose=DialogCreate()set udg_Home_RegenTimer=CreateTimer()set udg_Creep_SpawnTimer=CreateTimer()set udg_Golem_Timer=CreateTimer()set udg_AI_Team1=CreateGroup()set udg_AI_Team2=CreateGroup()set udg_AI_Timer=CreateTimer()set udg_Timer_Duel=CreateTimer()
set udg_Etp_Group=CreateGroup()set udg_Ipf_GroupShake=CreateGroup()
set udg_Tcb_Group=CreateGroup()set udg_Tcb_Group2=CreateGroup()
set udg_Srl_Group=CreateGroup()set udg_Anl_Group1=CreateGroup()
set udg_Anl_GroupHakke=CreateGroup()
set udg_Anl_Group2=CreateGroup()
set udg_Anl_Group=CreateGroup()set udg_Mti_GroupDummy=CreateGroup()
set udg_Mti_Group=CreateGroup()set udg_Nrt_Group=CreateGroup()set udg_Nrt_GroupFly=CreateGroup()set udg_Gks_Group=CreateGroup()set udg_Gks_Group2=CreateGroup()
set udg_Kin_GroupDummy=CreateGroup()
set udg_Kin_Group=CreateGroup()set udg_Kin_Group2=CreateGroup()
set udg_Kin_Group3=CreateGroup()
set udg_Isk_Group=CreateGroup()set udg_Isk_GroupShake=CreateGroup()
set udg_Cof_Group=CreateGroup()set udg_Hnm_Group=CreateGroup()set udg_Hnm_Group2=CreateGroup()
set udg_Inv_Group=CreateGroup()set udg_Inv_Group2=CreateGroup()
set udg_Dhf_Group=CreateGroup()set udg_Dhf_Group2=CreateGroup()
set udg_Hho_Group=CreateGroup()set udg_Hho_GroupDummy=CreateGroup()
set udg_Hik_Group=CreateGroup()set udg_Hik_Group2=CreateGroup()
set udg_Hdb_Group=CreateGroup()set udg_Hdb_Group2=CreateGroup()
set udg_Eti_Group=CreateGroup()set udg_Ffb_Group2=CreateGroup()
set udg_Ffb_GroupFire=CreateGroup()set udg_Ffb_Group=CreateGroup()set udg_Cge_Group=CreateGroup()set udg_Hii_Group=CreateGroup()set udg_Dsd_Group2=CreateGroup()
set udg_Dsd_Group=CreateGroup()set udg_Gse_Group=CreateGroup()set udg_Sad_Group=CreateGroup()set udg_Sad_Group2=CreateGroup()
set udg_Coe_Group=CreateGroup()set udg_Coe_GroupShake=CreateGroup()
set udg_Amp_Group=CreateGroup()set udg_Amp_Group2=CreateGroup()
set udg_Uvp_Group=CreateGroup()set udg_Rkj_Group=CreateGroup()set udg_Rkj_Group2=CreateGroup()
set udg_Pdn_Group=CreateGroup()set udg_Pdn_GroupDummy=CreateGroup()
set udg_Czj_Group=CreateGroup()set udg_Kds_Group=CreateGroup()set udg_Kds_Group2=CreateGroup()
set udg_Jog_Group=CreateGroup()set udg_Vri_Group=CreateGroup()set udg_Rgo_Group=CreateGroup()set udg_C1_Group=CreateGroup()set udg_C1_GroupDummy=CreateGroup()set udg_C12_Group=CreateGroup()set udg_C3_Group=CreateGroup()set udg_C4_Group=CreateGroup()set udg_C4_Group2=CreateGroup()set udg_C0_Group=CreateGroup()set udg_Fsw_Group=CreateGroup()set udg_Cin_Group=CreateGroup()set udg_Cin_GroupDummy=CreateGroup()
set udg_Cin_Group2=CreateGroup()
set udg_Cin_GroupTake=CreateGroup()set udg_Kjd_GroupAtk=CreateGroup()set udg_Kjd_GroupDummy=CreateGroup()
set udg_Kjd_Group=CreateGroup()set udg_Timer_DuelWarning=CreateTimer()set udg_Tjr_Group=CreateGroup()set udg_Hws_Group=CreateGroup()set udg_Hws_Group2=CreateGroup()
set udg_Hws_GroupDummy=CreateGroup()
set udg_Hws_GroupShake=CreateGroup()
set udg_Czs_Group=CreateGroup()set udg_Ptk_Group=CreateGroup()set udg_Ptk_Group2=CreateGroup()
set udg_Csh_Group=CreateGroup()set udg_Wdg_Group=CreateGroup()set udg_Gvj_GroupDummy=CreateGroup()
set udg_Gvj_GroupDummy2=CreateGroup()set udg_Gvj_Group2=CreateGroup()
set udg_Gvj_GroupMove=CreateGroup()set udg_Gvj_GroupShake=CreateGroup()
set udg_Gvj_GroupDmg=CreateGroup()set udg_Flb_Group=CreateGroup()set udg_Flb_Group2=CreateGroup()
set udg_Flw_Group=CreateGroup()set udg_Tpk_Group=CreateGroup()set udg_Tpk_Group2=CreateGroup()
set udg_Kot_Group=CreateGroup()set udg_Kot_Group2=CreateGroup()
set udg_Kmo_Group=CreateGroup()set udg_Kmo_Group2=CreateGroup()
set udg_Shs_Group2=CreateGroup()
set udg_Iah_GroupDummy=CreateGroup()
set udg_Iah_GroupPush=CreateGroup()set udg_Iah_GroupDmg=CreateGroup()set udg_Mgh_Group=CreateGroup()set udg_Ing_Group=CreateGroup()set udg_Ryu_Group=CreateGroup()set udg_Ryu_GroupDummy=CreateGroup()
set udg_Wgf_Group=CreateGroup()set udg_Wgf_GroupDummy=CreateGroup()
set udg_Wgf_Group2=CreateGroup()
set udg_Wmk_GroupDummy=CreateGroup()
set udg_Wmk_Group=CreateGroup()set udg_Wdm_Group=CreateGroup()set udg_Wdm_GroupDummy=CreateGroup()
set udg_Kml_GroupDummy=CreateGroup()
set udg_Dial_Group=CreateGroup()
set udg_Dial_Group2=CreateGroup()set udg_Pdn_Group2=CreateGroup()
set udg_Lsc_Group=CreateGroup()set udg_Lsc_Group2=CreateGroup()
set udg_Cje_GroupDummy=CreateGroup()
set udg_Wvf_Group2=CreateGroup()
set udg_Pkc_Group=CreateGroup()set udg_Pkc_Group2=CreateGroup()
set udg_Pkc_GroupShake=CreateGroup()
set udg_BerserkerBlood_GroupDelay=CreateGroup()set udg_Gvs_Group=CreateGroup()set udg_GravityBlade_Group=CreateGroup()
set udg_Fgr_Group=CreateGroup()set udg_Fgr_GroupShake=CreateGroup()
set udg_Tbi_Group=CreateGroup()set udg_Tbi_Group2=CreateGroup()
set udg_Tbi_GroupDummy=CreateGroup()
set udg_TnhA_Group=CreateGroup()
set udg_Aoi_GroupDummy=CreateGroup()
set udg_Aoi_Timer=CreateTimer()set udg_Divine_Group=CreateGroup()set udg_SoundPatch_EnableGroup=CreateForce()
set udg_CounterSpin_Group=CreateGroup()set udg_Fnm_Group2=CreateGroup()
set udg_Fnm_Group3=CreateGroup()
endfunctionfunction InitSounds takes nothing returns nothingset gg_snd_ShadowClone=CreateSound("Sounds\\ShadowClone.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundDuration(gg_snd_ShadowClone,$449)call SetSoundChannel(gg_snd_ShadowClone,0)call SetSoundVolume(gg_snd_ShadowClone,$7F)call SetSoundPitch(gg_snd_ShadowClone,1.)call SetSoundDistances(gg_snd_ShadowClone,.0,10000.)
call SetSoundDistanceCutoff(gg_snd_ShadowClone,2000.)call SetSoundConeAngles(gg_snd_ShadowClone,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_ShadowClone,.0,.0,.0)set gg_snd_Shunpo=CreateSound("Sounds\\Shunpo.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundDuration(gg_snd_Shunpo,940)
call SetSoundChannel(gg_snd_Shunpo,0)call SetSoundVolume(gg_snd_Shunpo,'s')call SetSoundPitch(gg_snd_Shunpo,1.)
call SetSoundDistances(gg_snd_Shunpo,.0,10000.)call SetSoundDistanceCutoff(gg_snd_Shunpo,1500.)
call SetSoundConeAngles(gg_snd_Shunpo,.0,.0,$7F)
call SetSoundConeOrientation(gg_snd_Shunpo,.0,.0,.0)
set gg_snd_Soru=CreateSound("Sounds\\Soru.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundDuration(gg_snd_Soru,992)call SetSoundChannel(gg_snd_Soru,0)call SetSoundVolume(gg_snd_Soru,'s')
call SetSoundPitch(gg_snd_Soru,1.)call SetSoundDistances(gg_snd_Soru,.0,10000.)call SetSoundDistanceCutoff(gg_snd_Soru,1500.)call SetSoundConeAngles(gg_snd_Soru,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_Soru,.0,.0,.0)set gg_snd_ShunpoAizen=CreateSound("Sounds\\ShunpoAizen.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundDuration(gg_snd_ShunpoAizen,$449)call SetSoundChannel(gg_snd_ShunpoAizen,0)call SetSoundVolume(gg_snd_ShunpoAizen,$7F)call SetSoundPitch(gg_snd_ShunpoAizen,1.)call SetSoundDistances(gg_snd_ShunpoAizen,.0,10000.)
call SetSoundDistanceCutoff(gg_snd_ShunpoAizen,1500.)call SetSoundConeAngles(gg_snd_ShunpoAizen,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_ShunpoAizen,.0,.0,.0)endfunctionfunction CreateAllItems takes nothing returns nothinglocal integer itemID
set gg_item_I077_0102=CreateItem('I077',-6398.2,-4206.)endfunctionfunction CreateBuildingsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',-6272.,768.,270.)set u=CreateUnit(p,'n000',3200.,-6528.,270.)
set gg_unit_n000_0074=CreateUnit(p,'n000',-6272.,768.,270.)endfunctionfunction CreateUnitsForPlayer0 takes nothing returns nothing
local player p=Player(0)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'h005',5882.5,742.6,203.429)set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
endfunctionfunction CreateBuildingsForPlayer1 takes nothing returns nothing
local player p=Player(1)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3328.,-6528.,270.)
set u=CreateUnit(p,'n000',-6016.,768.,270.)set gg_unit_n000_0073=CreateUnit(p,'n000',-6016.,768.,270.)endfunctionfunction CreateBuildingsForPlayer2 takes nothing returns nothing
local player p=Player(2)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3456.,-6528.,270.)
set gg_unit_n000_0049=CreateUnit(p,'n000',-5760.,768.,270.)set u=CreateUnit(p,'n000',-5760.,768.,270.)endfunctionfunction CreateBuildingsForPlayer3 takes nothing returns nothing
local player p=Player(3)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3584.,-6528.,270.)
set gg_unit_n000_0051=CreateUnit(p,'n000',-6272.,512.,270.)set u=CreateUnit(p,'n000',-6272.,512.,270.)endfunctionfunction CreateBuildingsForPlayer4 takes nothing returns nothing
local player p=Player(4)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3712.,-6528.,270.)
set gg_unit_n000_0052=CreateUnit(p,'n000',-6016.,512.,270.)set u=CreateUnit(p,'n000',-6016.,512.,270.)endfunctionfunction CreateBuildingsForPlayer5 takes nothing returns nothing
local player p=Player(5)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3840.,-6528.,270.)
set gg_unit_n000_0050=CreateUnit(p,'n000',-5760.,512.,270.)set u=CreateUnit(p,'n000',-5760.,512.,270.)endfunctionfunction CreateBuildingsForPlayer6 takes nothing returns nothing
local player p=Player(6)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3200.,-6720.,270.)
set gg_unit_n000_0058=CreateUnit(p,'n000',5632.,768.,270.)endfunctionfunction CreateBuildingsForPlayer7 takes nothing returns nothing
local player p=Player(7)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3328.,-6720.,270.)
set gg_unit_n000_0056=CreateUnit(p,'n000',5888.,768.,270.)endfunctionfunction CreateBuildingsForPlayer8 takes nothing returns nothing
local player p=Player(8)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3456.,-6720.,270.)
set gg_unit_n000_0055=CreateUnit(p,'n000',6144.,768.,270.)endfunctionfunction CreateBuildingsForPlayer9 takes nothing returns nothing
local player p=Player(9)
local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3584.,-6720.,270.)
set gg_unit_n000_0059=CreateUnit(p,'n000',5632.,512.,270.)endfunctionfunction CreateBuildingsForPlayer10 takes nothing returns nothinglocal player p=Player($A)local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3712.,-6720.,270.)
set gg_unit_n000_0061=CreateUnit(p,'n000',5888.,512.,270.)endfunctionfunction CreateBuildingsForPlayer11 takes nothing returns nothinglocal player p=Player($B)local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n000',3840.,-6720.,270.)
set gg_unit_n000_0057=CreateUnit(p,'n000',6144.,512.,270.)endfunctionfunction CreateNeutralHostile takes nothing returns nothinglocal player p=Player($C)local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n01B',-6824.9,-6665.4,358.546)set u=CreateUnit(p,'n01B',-5969.1,-4605.5,180.602)set u=CreateUnit(p,'n01B',-6818.8,-6237.1,356.782)set u=CreateUnit(p,'n01B',-5968.1,-6676.,178.833)set u=CreateUnit(p,'n01B',-6826.9,-5860.6,358.313)set u=CreateUnit(p,'n01B',-5963.9,-5442.9,177.765)set u=CreateUnit(p,'n01B',-6820.7,-5432.3,1.719)
set u=CreateUnit(p,'n01B',-5962.,-6247.7,178.174)set u=CreateUnit(p,'n01B',-6832.1,-5023.2,357.)set u=CreateUnit(p,'n01B',-5975.3,-5033.8,176.09)set u=CreateUnit(p,'n01B',-6825.9,-4594.9,355.938)set u=CreateUnit(p,'n01B',-5970.1,-5871.2,177.243)endfunctionfunction CreateNeutralPassiveBuildings takes nothing returns nothing
local player p=Player($F)local unit u
local integer unitID
local trigger tlocal real lifeset u=CreateUnit(p,'n008',3520.,-6208.,270.)
call SetUnitColor(u,ConvertPlayerColor(0))set u=CreateUnit(p,'n00A',3520.,-6976.,270.)
call SetUnitColor(u,ConvertPlayerColor(0))set u=CreateUnit(p,'n001',3008.,-6336.,270.)
call SetUnitColor(u,ConvertPlayerColor(1))set u=CreateUnit(p,'n00B',3008.,-6848.,270.)
call SetUnitColor(u,ConvertPlayerColor(1))set u=CreateUnit(p,'n00C',4032.,-6848.,270.)
call SetUnitColor(u,ConvertPlayerColor(5))set u=CreateUnit(p,'n009',4032.,-6400.,270.)
call SetUnitColor(u,ConvertPlayerColor(5))set gg_unit_n00Q_0019=CreateUnit(p,'n00Q',-6400.,-7296.,270.)set gg_unit_n00Q_0020=CreateUnit(p,'n00Q',3136.,4864.,270.)set gg_unit_n004_0024=CreateUnit(p,'n004',-6464.,-1344.,270.)set gg_unit_n003_0025=CreateUnit(p,'n003',-64.,-448.,270.)set gg_unit_n004_0026=CreateUnit(p,'n004',-6208.,-1344.,270.)set gg_unit_n004_0027=CreateUnit(p,'n004',-5952.,-1344.,270.)set gg_unit_n004_0028=CreateUnit(p,'n004',-5696.,-1344.,270.)set gg_unit_n004_0029=CreateUnit(p,'n004',-5440.,-1344.,270.)set gg_unit_n004_0030=CreateUnit(p,'n004',6144.,-1344.,270.)
set gg_unit_n004_0031=CreateUnit(p,'n004',6400.,-1344.,270.)
set gg_unit_n004_0032=CreateUnit(p,'n004',5376.,-1344.,270.)
set gg_unit_n004_0033=CreateUnit(p,'n004',5632.,-1344.,270.)
set gg_unit_n004_0034=CreateUnit(p,'n004',5888.,-1344.,270.)
set u=CreateUnit(p,'h007',-6528.,128.,270.)set u=CreateUnit(p,'n00S',-6528.,-128.,270.)
set u=CreateUnit(p,'h00G',-6528.,-384.,270.)
set u=CreateUnit(p,'h00I',-6528.,-896.,270.)
set u=CreateUnit(p,'h00H',-6528.,-640.,270.)
set u=CreateUnit(p,'h00J',-5504.,192.,270.)set u=CreateUnit(p,'h007',6400.,128.,270.)set u=CreateUnit(p,'h00K',-5696.,192.,270.)set u=CreateUnit(p,'h00L',-5888.,192.,270.)set u=CreateUnit(p,'h00M',-6080.,192.,270.)set u=CreateUnit(p,'n00S',6400.,-128.,270.)set u=CreateUnit(p,'h00G',6400.,-384.,270.)set u=CreateUnit(p,'h00H',6400.,-640.,270.)set u=CreateUnit(p,'h00I',6400.,-896.,270.)set u=CreateUnit(p,'h00M',5952.,192.,270.)set u=CreateUnit(p,'h00J',5376.,192.,270.)set u=CreateUnit(p,'h00L',5760.,192.,270.)set u=CreateUnit(p,'h00K',5568.,192.,270.)set gg_unit_h0BK_0093=CreateUnit(p,'h0BK',-6272.,192.,270.)set gg_unit_h0BK_0096=CreateUnit(p,'h0BK',6144.,192.,270.)set gg_unit_n01Y_0097=CreateUnit(p,'n01Y',-3648.,-2624.,270.)set gg_unit_n01C_0098=CreateUnit(p,'n01C',-64.,-3712.,270.)set gg_unit_n01Y_0099=CreateUnit(p,'n01Y',3456.,-2688.,270.)
set gg_unit_n00Q_0100=CreateUnit(p,'n00Q',5888.,-4224.,270.)
set u=CreateUnit(p,'n021',-1536.,3072.,270.)
set gg_unit_n00Q_0196=CreateUnit(p,'n00Q',-2944.,-1984.,270.)set gg_unit_n00Q_0197=CreateUnit(p,'n00Q',2816.,1024.,270.)set gg_unit_n00Q_0198=CreateUnit(p,'n00Q',2816.,-1984.,270.)
set gg_unit_n00Q_0212=CreateUnit(p,'n00Q',-2944.,1024.,270.)
endfunctionfunction CreatePlayerBuildings takes nothing returns nothing
local player plocal unit u
local integer unitID
local trigger tlocal real lifeset p=Player(0)set u=CreateUnit(p,'n000',-6272.,768.,270.)set u=CreateUnit(p,'n000',3200.,-6528.,270.)
set gg_unit_n000_0074=CreateUnit(p,'n000',-6272.,768.,270.)set p=Player(1)set u=CreateUnit(p,'n000',3328.,-6528.,270.)
set u=CreateUnit(p,'n000',-6016.,768.,270.)set gg_unit_n000_0073=CreateUnit(p,'n000',-6016.,768.,270.)set p=Player(2)set u=CreateUnit(p,'n000',3456.,-6528.,270.)
set gg_unit_n000_0049=CreateUnit(p,'n000',-5760.,768.,270.)set u=CreateUnit(p,'n000',-5760.,768.,270.)set p=Player(3)set u=CreateUnit(p,'n000',3584.,-6528.,270.)
set gg_unit_n000_0051=CreateUnit(p,'n000',-6272.,512.,270.)set u=CreateUnit(p,'n000',-6272.,512.,270.)set p=Player(4)set u=CreateUnit(p,'n000',3712.,-6528.,270.)
set gg_unit_n000_0052=CreateUnit(p,'n000',-6016.,512.,270.)set u=CreateUnit(p,'n000',-6016.,512.,270.)set p=Player(5)set u=CreateUnit(p,'n000',3840.,-6528.,270.)
set gg_unit_n000_0050=CreateUnit(p,'n000',-5760.,512.,270.)set u=CreateUnit(p,'n000',-5760.,512.,270.)set p=Player(6)set u=CreateUnit(p,'n000',3200.,-6720.,270.)
set gg_unit_n000_0058=CreateUnit(p,'n000',5632.,768.,270.)set p=Player(7)set u=CreateUnit(p,'n000',3328.,-6720.,270.)
set gg_unit_n000_0056=CreateUnit(p,'n000',5888.,768.,270.)set p=Player(8)set u=CreateUnit(p,'n000',3456.,-6720.,270.)
set gg_unit_n000_0055=CreateUnit(p,'n000',6144.,768.,270.)set p=Player(9)set u=CreateUnit(p,'n000',3584.,-6720.,270.)
set gg_unit_n000_0059=CreateUnit(p,'n000',5632.,512.,270.)set p=Player($A)
set u=CreateUnit(p,'n000',3712.,-6720.,270.)
set gg_unit_n000_0061=CreateUnit(p,'n000',5888.,512.,270.)set p=Player($B)
set u=CreateUnit(p,'n000',3840.,-6720.,270.)
set gg_unit_n000_0057=CreateUnit(p,'n000',6144.,512.,270.)endfunctionfunction CreatePlayerUnits takes nothing returns nothing
local player plocal unit u
local integer unitID
local trigger tlocal real lifeset p=Player(0)set u=CreateUnit(p,'h005',5882.5,742.6,203.429)set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
endfunctionfunction CreateAllUnits takes nothing returns nothingcall CreateNeutralPassiveBuildings()
call CreatePlayerBuildings()
call CreateNeutralHostile()call CreatePlayerUnits()
endfunctionfunction CreateRegions takes nothing returns nothing
local weathereffect weset gg_rct_Side_Team_2=Rect(3520.,-928.,5184.,32.)set gg_rct_Side_Team_1=Rect(-5280.,-864.,-3616.,-64.)set gg_rct_BossLeft=Rect(-4000.,1984.,-3296.,3616.)set gg_rct_BossRight=Rect(3168.,1984.,3872.,3616.)set gg_rct_HeroSelection=Rect(2464.,-7392.,4576.,-5632.)
set gg_rct_Home_1=Rect(-6688.,-1216.,-5248.,352.)set gg_rct_Home_2=Rect(5152.,-1216.,6560.,352.)set gg_rct_Golem=Rect(-1760.,3840.,1696.,6048.)set gg_rct_Center=Rect(-2688.,-1856.,2624.,928.)
set gg_rct_Divine_Area=Rect(-7008.,-7520.,-5792.,-3904.)
set we=AddWeatherEffect(gg_rct_Divine_Area,'MEds')call EnableWeatherEffect(we,true)set gg_rct_PVP_Zone_1=Rect(-7040.,4608.,-3776.,6848.)set gg_rct_PVP_Zone_2=Rect(-5120.,-7712.,-1216.,-4768.)endfunctionfunction Echo takes string s returns nothing
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,.01,s)
endfunctionfunction UnitDropItems takes unit u returns nothinglocal integer i=0local integer maxSlot=5loop
if(UnitItemInSlot(u,i)!=null)thencall UnitRemoveItemFromSlot(u,i)
endifset i=i+1exitwhen(i>maxSlot)endloopendfunctionfunction UnitReplaceItemId takes unit u,integer baseItemId,integer replaceItemId returns boolean
local integer i=0local integer maxSlot=5loop
if(GetItemTypeId(UnitItemInSlot(u,i))==baseItemId)thencall RemoveItem(UnitRemoveItemFromSlot(u,i))
call UnitAddItemToSlotById(u,replaceItemId,i)return trueendifset i=i+1exitwhen(i>maxSlot)endloopreturn false
endfunctionfunction UnitDropItemId takes unit u,integer dropItemId returns item
local integer i=0local integer maxSlot=5loop
if(GetItemTypeId(UnitItemInSlot(u,i))==dropItemId)thenreturn(UnitRemoveItemFromSlot(u,i))endifset i=i+1exitwhen(i>maxSlot)endloopreturn nullendfunctionfunction CreateDivine takes nothing returns nothinglocal real x=-6398.2
local real y=-4206.set gg_item_I077_0102=nullset gg_item_I077_0102=CreateItem(DivineItemId,x,y)call UnitApplyTimedLife(CreateUnit(Player($C),'h004',x,y,bj_UNIT_FACING),'BTLF',1.)endfunctionfunction UnitReturnDivine takes unit u returns nothinglocal integer i=0local integer maxSlot=5loop
if(GetItemTypeId(UnitItemInSlot(u,i))==DivineItemId)then
call RemoveItem(UnitRemoveItemFromSlot(u,i))
call CreateDivine()set i=maxSlotendifset i=i+1exitwhen(i>maxSlot)endloopendfunctionfunction IsUnitInPVP takes unit u returns booleanreturn RectContainsUnit(gg_rct_PVP_Zone_1,u)or RectContainsUnit(gg_rct_PVP_Zone_2,u)
endfunctionfunction IsUnitSamePlace takes unit u1,unit u2 returns booleanif(IsUnitInPVP(u1))thenreturn IsUnitInPVP(u2)else
return not(IsUnitInPVP(u2))endifendfunctionfunction BlockDamageAct2 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local unit u=LoadUnitHandle(BlackDamageHash,tId,0)local real heal=LoadReal(BlackDamageHash,tId,1)call FlushChildHashtable(BlackDamageHash,tId)call PauseTimer(t)call DestroyTimer(t)
set t=nullcall SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)+heal))set u=nullendfunctionfunction BlockDamageAct takes unit u,real heal returns nothinglocal real currentHP=GetUnitState(u,UNIT_STATE_LIFE)
local real afterHealHP=heal+currentHPlocal real maxHP=GetUnitState(u,UNIT_STATE_MAX_LIFE)
local timer tlocal integer tIdif(afterHealHP>maxHP)thenset t=CreateTimer()set tId=GetHandleId(t)call SaveUnitHandle(BlackDamageHash,tId,0,u)
call SaveReal(BlackDamageHash,tId,1,heal)call TimerStart(t,0,false,function BlockDamageAct2)set t=nullelse
call SetUnitState(u,UNIT_STATE_LIFE,afterHealHP)
endifset u=nullendfunctionfunction CreateGroupUnitBuffCond takes unit u,integer buffId returns boolean
return(GetUnitAbilityLevel(u,buffId)>0)endfunctionfunction CreateGroupUnitBuff takes integer buffId returns grouplocal integer maxPlayer=$Blocal group gdummy=CreateGroup()
local group glocal unit pickedlocal integer index=0loop
set g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Player(index),null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(CreateGroupUnitBuffCond(picked,buffId))thencall GroupAddUnit(gdummy,picked)
endifendloopcall DestroyGroup(g)
set g=nullset index=index+1exitwhen(index>maxPlayer)endloopset g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Player($C),null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(CreateGroupUnitBuffCond(picked,buffId))thencall GroupAddUnit(gdummy,picked)
endifendloopcall DestroyGroup(g)
set g=nullreturn gdummyendfunctionfunction CreateGroupUnitType takes integer unitid,player p returns group
local group g=CreateGroup()set bj_groupEnumTypeId=unitidcall GroupEnumUnitsOfPlayer(g,p,filterGetUnitsOfTypeIdAll)return g
endfunctionfunction GetRandomIntDist takes integer min,integer max,integer dist returns integer
local integer maxLoops=30local integer result
loop
set result=GetRandomInt(min,max)
exitwhen(maxLoops<1 or result!=dist)
set maxLoops=maxLoops-1endloopif(maxLoops<1)thenreturn 999endifreturn resultendfunctionfunction IsWindWalk takes unit u returns boolean
local integer i=0local boolean b=falseloop
exitwhen i>udg_WindWalk_Maxif(GetUnitAbilityLevel(u,udg_WindWalk_Ability[i])>0)then
set b=trueset i=udg_WindWalk_Maxendifset i=i+1endloopreturn b
endfunctionfunction SetAbilityCooldown_End takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer id=GetHandleId(t)local unit u=LoadUnitHandle(udg_Cooldown_Hash,id,0)local integer skDummy=LoadInteger(udg_Cooldown_Hash,id,1)local integer skBase=LoadInteger(udg_Cooldown_Hash,id,2)
local player p=LoadPlayerHandle(udg_Cooldown_Hash,id,3)call UnitRemoveAbility(u,skDummy)call SetPlayerAbilityAvailable(p,skBase,true)call FlushChildHashtable(udg_Cooldown_Hash,id)call PauseTimer(t)call DestroyTimer(t)
set t=nullset u=nullset p=nullendfunctionfunction SetAbilityCooldown takes unit u,integer skBase,integer skDummy,real cd returns nothinglocal real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p1=GetOwningPlayer(u)local player p2=Player($E)local unit dummy=CreateUnit(p2,'h05Z',x,y,bj_UNIT_FACING)local timer t=CreateTimer()local integer id=GetHandleId(t)call SetPlayerAbilityAvailable(p1,skBase,false)call UnitAddAbility(u,skDummy)call SetUnitAbilityLevel(u,skDummy,GetUnitAbilityLevel(u,skBase))call SetPlayerAlliance(p2,p1,ALLIANCE_PASSIVE,true)call IssueTargetOrderById(dummy,$D006B,u)call SetPlayerAlliance(p2,p1,ALLIANCE_PASSIVE,false)
call UnitApplyTimedLife(dummy,'BTLF',1.)
call SaveUnitHandle(udg_Cooldown_Hash,id,0,u)call SaveInteger(udg_Cooldown_Hash,id,1,skDummy)
call SaveInteger(udg_Cooldown_Hash,id,2,skBase)call SavePlayerHandle(udg_Cooldown_Hash,id,3,p1)
call TimerStart(t,cd,false,function SetAbilityCooldown_End)set t=nullset p1=nullset p2=nullset dummy=nullendfunctionfunction SoundPatch_Music takes string s returns nothing
call StopMusic(true)
call PlayMusic(s)endfunctionfunction SoundPatch_Spell takes string s,real x,real y returns nothinglocal sound mySoundlocal integer myVolumeif(IsPlayerInForce(GetLocalPlayer(),udg_SoundPatch_EnableGroup))then
set myVolume=$96
else
set myVolume=0endifset mySound=CreateSound(s,false,true,true,$A,$A,"DefaultEAXON")call SetSoundDuration(mySound,$BB8)call SetSoundChannel(mySound,0)call SetSoundVolume(mySound,myVolume)call SetSoundPitch(mySound,1.)call SetSoundDistances(mySound,600.,2500.)call SetSoundDistanceCutoff(mySound,2000.)call SetSoundConeAngles(mySound,.0,.0,$7F)call SetSoundConeOrientation(mySound,.0,.0,.0)call SetSoundPosition(mySound,x,y,0)
call StartSound(mySound)
call KillSoundWhenDone(mySound)set s=nullset mySound=null
endfunctionfunction GateTeleportCond takes nothing returns booleanlocal unit u=GetTriggerUnit()if(IsUnitType(u,UNIT_TYPE_HERO)==false)thenreturn false
elseif(GetOwningPlayer(u)==Player($C))thenreturn false
elseif(GetUnitAbilityLevel(u,udg_GlobalSkill[0])>0)thenreturn false
else
return trueendifendfunctionfunction FinalBossCheck takes nothing returns nothingif(udg_Golem_Final and udg_Boss_Check[0]and udg_Boss_Check[1]and udg_GateBoss_Integer>3 and udg_Divine_Bool and udg_Forgot_Bool)then
call TriggerSleepAction(60.)
call TriggerExecute(gg_trg_FinalBoss)endifendfunctionfunction FrozenItemSwap takes unit u,boolean toRanged returns nothinglocal integer array base_itemlocal integer array replace_item
local real delay=.1local integer i=0local integer jlocal integer maxFrozenSlotif(toRanged)then
set base_item[0]='I05L'set replace_item[0]='I05P'set base_item[1]='I04L'set replace_item[1]='I05G'else
set base_item[0]='I05P'set replace_item[0]='I05L'set base_item[1]='I05G'set replace_item[1]='I04L'endifset maxFrozenSlot=1loop
exitwhen(GetWidgetLife(u)>0)or i>30set i=i+1call TriggerSleepAction(delay)endloopif(GetWidgetLife(u)<1)thenreturnendifset i=0loop
set j=0loop
if(GetItemTypeId(UnitItemInSlot(u,i))==base_item[j])then
call RemoveItem(UnitItemInSlot(u,i))
call UnitAddItemToSlotById(u,replace_item[j],i)endifset j=j+1exitwhen j>maxFrozenSlot
endloopset i=i+1exitwhen i>5
endloopendfunctionfunction PanCameraToTimedXYForPlayer takes player whichPlayer,real x,real y,real duration returns nothingif(GetLocalPlayer()==whichPlayer)thencall PanCameraToTimed(x,y,duration)endifendfunctionfunction CheckDay takes nothing returns booleanlocal real gtime=GetFloatGameState(GAME_STATE_TIME_OF_DAY)return(gtime>6.)and(gtime<18.)endfunctionfunction TerrainDeformationRippleXY takes real duration,boolean limitNeg,real x,real y,real startRadius,real endRadius,real depth,real wavePeriod,real waveWidth returns terraindeformationlocal real spaceWave
local real timeWavelocal real radiusRatioif(endRadius<=0 or waveWidth<=0 or wavePeriod<=0)thenreturn nullendifset timeWave=2.*duration/ wavePeriod
set spaceWave=2.*endRadius/ waveWidthset radiusRatio=startRadius/ endRadiusset bj_lastCreatedTerrainDeformation=TerrainDeformRipple(x,y,endRadius,depth,R2I(duration*$3E8),1,spaceWave,timeWave,radiusRatio,limitNeg)return bj_lastCreatedTerrainDeformationendfunctionfunction CreateRectXY takes real x,real y,real width,real height returns rectreturn Rect(x-width*.5,y-height*.5,x+width*.5,y+height*.5)endfunctionfunction UnitHideSelect takes unit whichUnit returns nothing
call ShowUnit(whichUnit,false)call UnitRemoveAbility(whichUnit,'Aloc')
call ShowUnit(whichUnit,true)endfunctionfunction CreateNUnitsXY takes integer count,integer unitId,player whichPlayer,real x,real y,real face returns nothingloop
set count=count-1exitwhen count<0
call CreateUnit(whichPlayer,unitId,x,y,face)
endloopendfunctionfunction RandomXInRect takes rect whichRect returns real
return GetRandomReal(GetRectMinX(whichRect),GetRectMaxX(whichRect))endfunctionfunction RandomYInRect takes rect whichRect returns real
return GetRandomReal(GetRectMinY(whichRect),GetRectMaxY(whichRect))endfunctionfunction DistanceBetweenXY takes real x1,real y1,real x2,real y2 returns reallocal real dx=x2-x1local real dy=y2-y1return SquareRoot(dx*dx+dy*dy)endfunctionfunction PolarX takes real x,real dist,real angle returns realreturn(x+dist*Cos(angle*bj_DEGTORAD))endfunctionfunction PolarY takes real y,real dist,real angle returns realreturn(y+dist*Sin(angle*bj_DEGTORAD))endfunctionfunction AngleBetweenXY takes real x1,real y1,real x2,real y2 returns realreturn bj_RADTODEG*Atan2(y2-y1,x2-x1)endfunctionfunction UnitMoveLoc takes unit u,location loc returns nothinglocal real x=GetLocationX(loc)local real y=GetLocationY(loc)if(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(u,x)call SetUnitY(u,y)endifendfunctionfunction UnitMoveXY takes unit u,real x,real y returns booleanif(IsUnitType(u,UNIT_TYPE_ANCIENT)or IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY))thenreturn false
else
call SetUnitX(u,x)call SetUnitY(u,y)return trueendifendfunctionfunction UnitMoveXY2 takes unit u,real x,real y returns booleanif(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY))thencall SetUnitPosition(u,x,y)return false
else
call SetUnitX(u,x)call SetUnitY(u,y)return trueendifendfunctionfunction UnitPureDamageTarget takes unit atker,unit atked,real rdmg returns nothinglocal integer hp=R2I(GetWidgetLife(atked))local integer dmg=R2I(rdmg)local unit dummy
if(hp>dmg)thencall SetUnitState(atked,UNIT_STATE_LIFE,I2R(hp-dmg))
else
set dummy=CreateUnit(GetOwningPlayer(atker),'u003',GetUnitX(atker),GetUnitY(atker),bj_UNIT_FACING)call SetUnitState(atked,UNIT_STATE_LIFE,1.)call UnitDamageTarget(dummy,atked,I2R(dmg),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=nullendifendfunctionfunction BasicDmg_Q takes unit u,integer sk,integer whichStat returns reallocal integer my_atb
local integer sklv=GetUnitAbilityLevel(u,sk)
if(u==null or sklv==0)thencall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,.01,"#ERROR#  UNIT: "+GetUnitName(u)+" / ABILITY: "+GetObjectName(sk))
return .0endifif(whichStat==0)then
set my_atb=GetHeroStr(u,true)elseif(whichStat==1)then
set my_atb=GetHeroAgi(u,true)elseif(whichStat==2)then
set my_atb=GetHeroInt(u,true)else
call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,.01,"#ERROR#  UNIT: "+GetUnitName(u)+" / ATTRIBUTE: "+I2S(whichStat))return .0endifreturn(145.+(I2R(sklv)*65.))+(I2R(my_atb)*.75)endfunctionfunction BonusAbilityCheck takes unit u returns nothinglocal integer slot=((1+GetPlayerId(GetOwningPlayer(u)))-1)if(udg_Player_PermanentBonus[slot]==1 and GetUnitAbilityLevel(u,udg_PermanentBonus_STR)==0)thencall UnitAddAbility(u,udg_PermanentBonus_STR)elseif(udg_Player_PermanentBonus[slot]==2 and GetUnitAbilityLevel(u,udg_PermanentBonus_AGI)==0)thencall UnitAddAbility(u,udg_PermanentBonus_AGI)elseif(udg_Player_PermanentBonus[slot]==3 and GetUnitAbilityLevel(u,udg_PermanentBonus_INT)==0)thencall UnitAddAbility(u,udg_PermanentBonus_INT)endifset slot=0endfunctionfunction AttributeCheck takes unit u returns integer
local integer STR=GetHeroStr(u,false)local integer AGI=GetHeroAgi(u,false)local integer INT=GetHeroInt(u,false)if((INT>STR)and(INT>AGI))thenreturn 2
elseif((STR>AGI)and(STR>INT))thenreturn 0
else
return 1
endifendfunctionfunction GetPimaryAttribute takes unit u returns integer
local integer i=AttributeCheck(u)if(i==0)then
return GetHeroStr(u,true)elseif(i==1)then
return GetHeroAgi(u,true)else
return GetHeroInt(u,true)endifendfunctionfunction Dynamic_3D takes string s,real X,real Y returns nothing
local sound My3d=CreateSound(s,false,true,true,$A,$A,"DefaultEAXON")
if(My3d!=null)thencall SetSoundChannel(My3d,0)
call SetSoundVolume(My3d,$96)call SetSoundPitch(My3d,1.)call SetSoundDistances(My3d,600.,2500.)call SetSoundDistanceCutoff(My3d,2000.)call SetSoundConeAngles(My3d,.0,.0,$7F)call SetSoundConeOrientation(My3d,.0,.0,.0)call SetSoundPosition(My3d,X,Y,0)call StartSound(My3d)call KillSoundWhenDone(My3d)
set My3d=nullendifset s=nullendfunctionfunction DynamicCreateGroupCond takes unit picked,player p returns booleanif(IsUnitAlly(picked,p))then
return false
elseif(GetUnitState(picked,UNIT_STATE_LIFE)<1)thenreturn false
elseif(GetUnitAbilityLevel(picked,udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction DynamicCreateGroup takes location loc,real area,player p returns grouplocal unit pickedlocal group g2=CreateGroup()
local group g=GetUnitsInRangeOfLocAll(area,loc)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p))then
call GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction DynamicCreateGroup2 takes location loc,real area,player p,group gcheck returns grouplocal unit pickedlocal group g2=CreateGroup()
local group g=GetUnitsInRangeOfLocAll(area,loc)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p)and IsUnitInGroup(picked,gcheck)==false)thencall GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction GetUnitNearestXY takes real x,real y,real area,player p returns unitlocal group g=CreateGroup()local group g2=CreateGroup()
local unit pickedlocal unit nearestUnitlocal real nearestReallocal real r
call GroupEnumUnitsInRange(g,x,y,area,null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p))then
call GroupAddUnit(g2,picked)
endifendloopcall DestroyGroup(g)
set g=nullset nearestUnit=FirstOfGroup(g2)
if(nearestUnit!=null)thencall GroupRemoveUnit(g2,nearestUnit)
set nearestReal=DistanceBetweenXY(x,y,GetUnitX(nearestUnit),GetUnitY(nearestUnit))loop
set picked=FirstOfGroup(g2)exitwhen(picked==null)call GroupRemoveUnit(g2,picked)set r=DistanceBetweenXY(x,y,GetUnitX(picked),GetUnitY(picked))if(nearestReal>r)thenset nearestUnit=pickedset nearestReal=rendifendloopendifcall DestroyGroup(g2)set g2=nullreturn nearestUnitendfunctionfunction CreateGroupXY takes real x,real y,real area,player p returns grouplocal group g=CreateGroup()local group g2=CreateGroup()
local unit pickedcall GroupEnumUnitsInRange(g,x,y,area,null)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p))then
call GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction CreateGroupXY2 takes real x,real y,real area,player p,group g_check returns grouplocal group g=CreateGroup()local group g2=CreateGroup()
local unit pickedcall GroupEnumUnitsInRange(g,x,y,area,null)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p)and IsUnitInGroup(picked,g_check)==false)then
call GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction CreateGroupXYHero takes real x,real y,real area,player p returns grouplocal group g=CreateGroup()local group g2=CreateGroup()
local unit pickedcall GroupEnumUnitsInRange(g,x,y,area,null)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p)and IsUnitType(picked,UNIT_TYPE_HERO))thencall GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction CreateGroupXYnWW takes real x,real y,real area,player p returns grouplocal group g=CreateGroup()local group g2=CreateGroup()
local unit pickedcall GroupEnumUnitsInRange(g,x,y,area,null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(DynamicCreateGroupCond(picked,p)and IsWindWalk(picked)==false)thencall GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullreturn g2endfunctionfunction GroupRandomUnit takes group g returns unitlocal unit u
local unit array pickedlocal integer ilocal integer slot=0
local group g2=CreateGroup()
call GroupAddGroup(g,g2)
loop
set picked[slot]=FirstOfGroup(g2)exitwhen(picked[slot]==null)
call GroupRemoveUnit(g2,picked[slot])set slot=slot+1endloopcall DestroyGroup(g2)set g2=nullif(slot>0)thenset slot=slot-1set u=picked[(GetRandomInt(0,slot))]
set i=0loop
set picked[i]=nullset i=i+1exitwhen(i>slot)
endloopelse
set u=nullendifset i=0set slot=0return u
endfunctionfunction SetUnitFly takes unit u returns nothing
call UnitAddAbility(u,udg_GlobalSkill[1])call UnitMakeAbilityPermanent(u,true,udg_GlobalSkill[1])
call UnitRemoveAbility(u,udg_GlobalSkill[1])
endfunctionfunction PauseSystem takes unit u,boolean b returns nothinglocal integer handle_id=GetHandleId(u)local integer stackif(b)thenset stack=LoadInteger(udg_Pause_Hash,handle_id,0)+1else
set stack=LoadInteger(udg_Pause_Hash,handle_id,0)-1endifif(stack>0)thencall SaveInteger(udg_Pause_Hash,handle_id,0,stack)call PauseUnit(u,true)else
call FlushChildHashtable(udg_Pause_Hash,handle_id)call PauseUnit(u,false)endifset u=nullset handle_id=0set stack=0set b=falseendfunctionfunction TreeKiller takes nothing returns nothingcall KillDestructable(GetEnumDestructable())
endfunctionfunction DestroyTreeXY takes real centerX,real centerY,real radius returns nothinglocal rect r
local location loc=Location(centerX,centerY)
set bj_enumDestructableCenter=locset bj_enumDestructableRadius=radius
set r=Rect(centerX-radius,centerY-radius,centerX+radius,centerY+radius)call EnumDestructablesInRect(r,filterEnumDestructablesInCircleBJ,function TreeKiller)call RemoveLocation(loc)
set loc=null
call RemoveRect(r)set r=nullendfunctionfunction TransformGroup_Cond takes unit u,unit dummy returns boolean
if(not(IsUnitEnemy(dummy,GetOwningPlayer(u))))thenreturn false
elseif(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],dummy)!=0)thenreturn false
elseif(not(IsUnitAliveBJ(dummy)))thenreturn false
elseif(IsUnitPaused(dummy))thenreturn false
endifreturn trueendfunctionfunction TransfromAction takes unit u,real x,real y returns nothinglocal real array xylocal real facinglocal unit pickedlocal player p=GetOwningPlayer(u)local group g=CreateGroupXY(x,y,udg_TransformArea,p)
call DestroyTreeXY(x,y,udg_TransformArea)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(TransformGroup_Cond(u,picked))thenset xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set facing=AngleBetweenXY(x,y,xy[0],xy[1])set xy[0]=PolarX(xy[0],udg_TransformBackstab,facing)
set xy[1]=PolarY(xy[1],udg_TransformBackstab,facing)
call UnitMoveXY(picked,xy[0],xy[1])set bj_lastCreatedUnit=CreateUnit(p,'h017',xy[0],xy[1],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call IssueImmediateOrderById(picked,$D0004)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset p=nullendfunctionfunction All_PlayerCond takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunctionfunction Force_Display takes real t,string s returns nothing
local force Foc=GetPlayersMatching(Condition(function All_PlayerCond))call DisplayTimedTextToForce(Foc,t,s)call DestroyForce(Foc)set Foc=null
set s=nullendfunctionfunction GroupCountUnits takes group G returns integerlocal group g=CreateGroup()local unit Dummy
local integer i=0call GroupAddGroup(G,g)loop
set Dummy=FirstOfGroup(g)exitwhen Dummy==null
set i=i+1call GroupRemoveUnit(g,Dummy)set Dummy=nullendloopcall DestroyGroup(g)
set g=nullreturn i
endfunctionfunction Golem_Check takes unit U returns booleanlocal integer i=0loop
if(GetUnitTypeId(U)==udg_Golem_BossType[i])thenset U=nullreturn trueendifset i=i+1exitwhen i>$Aendloopset U=nullreturn false
endfunctionfunction Scept_UpgradeCheck takes nothing returns booleanif(GetItemTypeId(GetManipulatedItem())=='I05F')thenreturn trueelseif(GetItemTypeId(GetManipulatedItem())=='I05L')thenreturn trueelseif(GetItemTypeId(GetManipulatedItem())=='I05P')thenreturn trueelse
return false
endifendfunctionfunction Scept_AlreadyCheck takes unit u returns boolean
if(GetUnitAbilityLevel(u,'A00D')>0)thenreturn false
elseif(GetUnitAbilityLevel(u,'A0GE')>0)thenreturn false
else
return trueendifendfunctionfunction DoSoundPreload takes string path returns nothinglocal sound s=CreateSound(path,false,false,false,$A,$A,"")call SetSoundVolume(s,0)
call StartSound(s)call KillSoundWhenDone(s)set s=nullset path=nullendfunctionfunction Dynamic_Sound takes string s returns nothinglocal sound MySound=CreateSound(s,false,false,false,$A,$A,"")call SetSoundChannel(MySound,0)call SetSoundVolume(MySound,udg_Sound_Volume)call SetSoundPitch(MySound,1.)call StartSound(MySound)
call KillSoundWhenDone(MySound)set MySound=null
set s=nullendfunctionfunction Alert takes player p,string msg returns nothing
local string s=""local force fif(GetLocalPlayer()==p)thenset s="Sound\\Interface\\UpkeepRing.wav"
endifcall Dynamic_Sound(s)set f=GetForceOfPlayer(p)call DisplayTimedTextToForce(f,3.,msg)call DestroyForce(f)
set f=nullset s=nullset msg=null
endfunctionfunction Player_Check takes unit U,integer i,integer j returns booleanlocal player P=GetOwningPlayer(U)set U=nullif(GetPlayerController(P)!=MAP_CONTROL_COMPUTER)then
set P=nullreturn false
endifloop
if(P==Player(i))then
set P=nullreturn trueendifset i=i+1exitwhen i>j
endloopset P=nullreturn false
endfunctionfunction Hero_Check takes unit U,integer i,integer j returns boolean
loop
if(U==udg_Player_UnitHero[i])thenset U=nullreturn trueendifset i=i+1exitwhen i>j
endloopset U=nullreturn false
endfunctionfunction AddGold_Cond takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunctionfunction AddGold_Act takes nothing returns nothingcall AdjustPlayerStateBJ(udg_Gold_Rate,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction AddGold takes nothing returns nothinglocal force AG=GetPlayersMatching(Condition(function AddGold_Cond))call ForForce(AG,function AddGold_Act)call DestroyForce(AG)set AG=nullendfunctionfunction Player_RandomHeroCheck takes integer Rand_Slot returns booleanreturn(udg_Player_HeroType[Rand_Slot]!=0)endfunctionfunction Player_RandomGet takes integer Rand_Slot,integer Player_Slot returns nothinglocal location Loc=GetRandomLocInRect(gg_rct_HeroSelection)call CreateNUnitsAtLoc(1,udg_Player_DummyType[Rand_Slot],Player(Player_Slot),Loc,bj_UNIT_FACING)
call RemoveLocation(Loc)
set Loc=null
endfunctionfunction Player_HideUnit takes integer Player_Type returns nothinglocal integer Player_Loop=0loop
exitwhen Player_Loop>$Bcall SetPlayerUnitAvailableBJ(Player_Type,false,Player(Player_Loop))
set Player_Loop=Player_Loop+1endloopset Player_Loop=0set Player_Type=0endfunctionfunction Player_ShowUnit takes player Player_Unit returns nothinglocal integer Player_Loop=0loop
exitwhen Player_Loop>udg_Player_MaxHeroesif(udg_Player_HeroType[Player_Loop]!=0)thencall SetPlayerUnitAvailableBJ(udg_Player_HeroType[Player_Loop],true,Player_Unit)
endifset Player_Loop=Player_Loop+1endloopset Player_Loop=0set Player_Unit=null
endfunctionfunction Random_Act takes integer Player_Slot returns nothinglocal integer Loop=0
local integer Loop2=0local integer Rand_Slotlocal boolean Player_Get=trueset udg_Player_Random[Player_Slot]=false
loop
set Rand_Slot=GetRandomInt(0,udg_Player_MaxHeroes)if(Player_RandomHeroCheck(Rand_Slot))thenset udg_Player_HeroType[Rand_Slot]=0
call Player_HideUnit(udg_Player_DummyType[Rand_Slot])call Player_RandomGet(Rand_Slot,Player_Slot)
set Player_Get=false
else
set Loop=Loop+1if(Loop>30)thenloop
if(Player_RandomHeroCheck(Loop2))thenset udg_Player_HeroType[Loop2]=0
call Player_HideUnit(udg_Player_DummyType[Rand_Slot])call Player_RandomGet(Loop2,Player_Slot)
set Loop2=udg_Player_MaxHeroesendifset Loop2=Loop2+1exitwhen Loop2>udg_Player_MaxHeroesendloopset Player_Get=false
endifendifexitwhen Player_Get==falseendloopset Player_Slot=0set Loop=0set Loop2=0set Rand_Slot=0endfunctionfunction DisplayText takes string T,unit U,real Size,boolean Move,integer r,integer g,integer b,integer a returns nothinglocal texttag tt=CreateTextTag()
call SetTextTagText(tt,T,Size)call SetTextTagPosUnit(tt,U,0)call SetTextTagColor(tt,r,g,b,a)
if(Move)then
call SetTextTagVelocity(tt,0,.055)endifcall SetTextTagFadepoint(tt,2)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagVisibility(tt,true)set tt=nullendfunctionfunction DisplayCriticalText takes string str,unit u,integer r,integer g,integer b,integer a returns nothing
local texttag tt=CreateTextTag()
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real facing=222.set x=PolarX(x,20.,facing)set y=PolarY(y,20.,facing)call SetTextTagText(tt,str,.024)
call SetTextTagPos(tt,x,y,0)
call SetTextTagColor(tt,$DC,5,5,$FF)
call SetTextTagVelocity(tt,0,.04)call SetTextTagFadepoint(tt,3.)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,5.)call SetTextTagVisibility(tt,true)set tt=nullendfunctionfunction CameraShake takes real DuringTime,real ShakePower,unit U returns nothinglocal integer Slot=((1+GetPlayerId(GetOwningPlayer(U)))-1)call CameraSetEQNoiseForPlayer(Player(Slot),ShakePower)if(Slot==0)thencall StartTimerBJ(udg_ShakeTimer1,false,DuringTime)elseif(Slot==1)thencall StartTimerBJ(udg_ShakeTimer2,false,DuringTime)elseif(Slot==2)thencall StartTimerBJ(udg_ShakeTimer3,false,DuringTime)elseif(Slot==3)thencall StartTimerBJ(udg_ShakeTimer4,false,DuringTime)elseif(Slot==4)thencall StartTimerBJ(udg_ShakeTimer5,false,DuringTime)elseif(Slot==5)thencall StartTimerBJ(udg_ShakeTimer6,false,DuringTime)elseif(Slot==6)thencall StartTimerBJ(udg_ShakeTimer7,false,DuringTime)elseif(Slot==7)thencall StartTimerBJ(udg_ShakeTimer8,false,DuringTime)elseif(Slot==8)thencall StartTimerBJ(udg_ShakeTimer9,false,DuringTime)elseif(Slot==9)thencall StartTimerBJ(udg_ShakeTimer10,false,DuringTime)
elseif(Slot==$A)then
call StartTimerBJ(udg_ShakeTimer11,false,DuringTime)
else
call StartTimerBJ(udg_ShakeTimer12,false,DuringTime)
endifset U=nullset Slot=0endfunctionfunction Dynamic_GroupShakeCond takes nothing returns booleanif(GetPlayerController(GetOwningPlayer(GetFilterUnit()))!=MAP_CONTROL_USER)thenreturn false
elseif(IsUnitAliveBJ(GetFilterUnit())==false)thenreturn false
elseif(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL))then
return false
endifreturn trueendfunctionfunction Dynamic_GroupShake takes real x,real y,real time,real power,real area,group gcheck returns nothinglocal unit dummy
local group g=CreateGroup()call GroupEnumUnitsInRange(g,x,y,area,Condition(function Dynamic_GroupShakeCond))loop
set dummy=FirstOfGroup(g)exitwhen dummy==null
if(gcheck!=null)then
if(IsUnitInGroup(dummy,gcheck)==false)thencall GroupAddUnit(gcheck,dummy)call CameraShake(time,power,dummy)endifelse
call CameraShake(time,power,dummy)endifcall GroupRemoveUnit(g,dummy)set dummy=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction Duel_CountCheck takes integer i returns boolean
return udg_Player_UnitHero[i]!=nullendfunctionfunction Duel_Count takes nothing returns integerlocal integer Loop=0
local integer Duel_Count1=0local integer Duel_Count2=0call GroupClear(udg_Duel_Team1)call GroupClear(udg_Duel_Team2)loop
if(Duel_CountCheck(Loop))thencall GroupAddUnit(udg_Duel_Team1,udg_Player_UnitHero[Loop])set Duel_Count1=Duel_Count1+1endifset Loop=Loop+1exitwhen Loop>5endlooploop
if(Duel_CountCheck(Loop))thencall GroupAddUnit(udg_Duel_Team2,udg_Player_UnitHero[Loop])set Duel_Count2=Duel_Count2+1endifset Loop=Loop+1exitwhen Loop>$B
endloopif(Duel_Count1>Duel_Count2)thenreturn Duel_Count2elseif(Duel_Count1<Duel_Count2)thenreturn Duel_Count1else
return Duel_Count1endifendfunctionfunction Duel_DestroyCheck takes nothing returns boolean
return(udg_GameModeNe==false)and(Duel_Count()>0)
endfunctionfunction Duel_Destroy takes nothing returns nothingif(Duel_DestroyCheck())thencall StartTimerBJ(udg_Timer_Duel,false,udg_Duel_Time)call StartTimerBJ(udg_Timer_DuelWarning,false,(udg_Duel_Time-$A))call CreateTimerDialogBJ(udg_Timer_Duel,"Next Event")set udg_Game_TimerWindow=bj_lastCreatedTimerDialogcall TimerDialogSetTitleColorBJ(udg_Game_TimerWindow,30.,80.,90.,0)call TimerDialogSetTimeColorBJ(udg_Game_TimerWindow,30.,80.,90.,0)else
call DestroyTrigger(gg_trg_Duel)
set gg_trg_Duel=null
call DestroyTrigger(gg_trg_Duel_Invul)set gg_trg_Duel_Invul=nullcall DestroyTrigger(gg_trg_Duel_Vul)
set gg_trg_Duel_Vul=null
call DestroyTrigger(gg_trg_Duel_Kill)set gg_trg_Duel_Kill=nullcall DestroyTrigger(gg_trg_Duel_OverTime)set gg_trg_Duel_OverTime=nullcall DestroyTrigger(gg_trg_Duel_Move)set gg_trg_Duel_Move=nullcall PauseTimer(udg_Timer_Duel)call DestroyTimer(udg_Timer_Duel)set udg_Timer_Duel=nullif(udg_Timer_DuelReal!=null)then
call PauseTimer(udg_Timer_DuelReal)call DestroyTimer(udg_Timer_DuelReal)set udg_Timer_DuelReal=nullendifif(gg_trg_First_Blood!=null)then
call DestroyTrigger(gg_trg_First_Blood)set gg_trg_First_Blood=nullendifendifcall GroupClear(udg_Duel_Team1)call GroupClear(udg_Duel_Team2)endfunctionfunction Duel_Cancel takes nothing returns nothinglocal force Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(true,Foc)call DestroyForce(Foc)set Foc=null
set udg_Duel_On=falseif(IsTriggerEnabled(gg_trg_AI_Duel))then
call DisableTrigger(gg_trg_AI_Duel)endifif(IsTriggerEnabled(gg_trg_Duel_Kill))thencall DisableTrigger(gg_trg_Duel_Kill)endifif(IsTriggerEnabled(gg_trg_Duel_OverTime))thencall DisableTrigger(gg_trg_Duel_OverTime)endifset udg_Duel_OverTime=falsecall Dynamic_Sound("Sound\\Interface\\GoodJob.wav")call DestroyTimerDialog(udg_Game_TimerWindow)call TriggerExecute(gg_trg_Duel_Move)endfunctionfunction Duel_Draw takes nothing returns integer
local integer Count1=CountUnitsInGroup(udg_Duel_DummyTeam1)local integer Count2=CountUnitsInGroup(udg_Duel_DummyTeam2)if(Count1>Count2)thenreturn 2
elseif(Count2>Count1)thenreturn 1
else
return 3
endifendfunctionfunction Duel_Reward takes integer i returns nothing
local integer StartLooplocal integer EndLooplocal integer Gold=$3E8local integer Medal=3local integer Exp=$FAlocal force Foc=GetPlayersMatching(Condition(function All_PlayerCond))if(i==1)then
call DisplayTextToForce(Foc,"Winner: |c001E90FFTeam 2|r")call DisplayTextToForce(Foc,"+1000 gold, +3 medal, +250 exp")set StartLoop=6set EndLoop=$Belseif(i==2)then
call DisplayTextToForce(Foc,"Winner: |c00ff0000Team 1|r")call DisplayTextToForce(Foc,"+1000 gold, +3 medal, +250 exp")set StartLoop=0set EndLoop=5else
call DisplayTextToForce(Foc,"|c00FFD700Draw|r")call DisplayTextToForce(Foc,"+500 gold and +1 medal")set Gold=500
set Medal=1set Exp=0set StartLoop=0set EndLoop=$Bendifcall DestroyForce(Foc)set Foc=null
loop
call AdjustPlayerStateBJ(Gold,Player(StartLoop),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(Medal,Player(StartLoop),PLAYER_STATE_RESOURCE_LUMBER)if(IsUnitAliveBJ(udg_Player_UnitHero[StartLoop]))thencall AddHeroXPSwapped(Exp,udg_Player_UnitHero[StartLoop],true)endifcall SetUnitAnimation(udg_Player_UnitHero[StartLoop],"stand")set StartLoop=StartLoop+1exitwhen StartLoop>EndLoopendloopendfunctionfunction Duel_CancelCheck1 takes nothing returns boolean
if(IsUnitGroupEmptyBJ(udg_Duel_Team1))and(IsUnitGroupEmptyBJ(udg_Duel_Team2))thencall Duel_Cancel()call Duel_Reward(3)return trueelseif(IsUnitGroupEmptyBJ(udg_Duel_Team1))thencall Duel_Cancel()call Duel_Reward(1)return trueelseif(IsUnitGroupEmptyBJ(udg_Duel_Team2))thencall Duel_Cancel()call Duel_Reward(2)return trueendifreturn false
endfunctionfunction Duel_CancelCheck2 takes nothing returns boolean
if(udg_Duel_OverTime)thencall Duel_Cancel()call Duel_Reward((Duel_Draw()))return trueelseif(IsUnitGroupEmptyBJ(udg_Duel_DummyTeam1))and(IsUnitGroupEmptyBJ(udg_Duel_DummyTeam2))thencall Duel_Cancel()call Duel_Reward(3)return trueelseif(IsUnitGroupEmptyBJ(udg_Duel_DummyTeam1))thencall Duel_Cancel()call Duel_Reward(1)return trueelseif(IsUnitGroupEmptyBJ(udg_Duel_DummyTeam2))thencall Duel_Cancel()call Duel_Reward(2)return trueendifreturn false
endfunctionfunction Duel_SummonWarp takes unit U,real R returns nothing
local player P=GetOwningPlayer(U)local group G=GetUnitsOfPlayerAll(P)
local location Loc=GetUnitLoc(U)
local unit Dummy
call GroupRemoveUnit(G,U)loop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
if(IsUnitType(Dummy,UNIT_TYPE_MECHANICAL)==false)thencall SetUnitPositionLocFacingBJ(Dummy,Loc,R)
call CreateNUnitsAtLoc(1,'h004',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
endifcall GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall RemoveLocation(Loc)
set Loc=null
call DestroyGroup(G)
set G=nullset U=nullset P=nullset R=.0
endfunctionfunction Map_Vul_GroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()if(IsUnitInGroup(U,udg_Leave_Group)==false and IsUnitType(U,UNIT_TYPE_MECHANICAL)==false)thencall SetUnitInvulnerable(U,false)call PauseUnit(U,false)endifset U=nullendfunctionfunction Map_Vul takes nothing returns nothinglocal group array Glocal integer Loop=0
loop
set G[Loop]=GetUnitsOfPlayerAll(Player(Loop))call ForGroupBJ(G[Loop],function Map_Vul_GroupAct)call DestroyGroup(G[Loop])set G[Loop]=null
set Loop=Loop+1exitwhen Loop>$B
endloopendfunctionfunction Map_Kill_SummonGroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()if(IsUnitType(U,UNIT_TYPE_MECHANICAL)==false)thencall KillUnit(U)
endifset U=nullendfunctionfunction Map_Kill_Summon takes unit U returns nothinglocal group G=GetUnitsOfPlayerAll(GetOwningPlayer(U))call GroupRemoveUnit(G,U)call ForGroupBJ(G,function Map_Kill_SummonGroupAct)call DestroyGroup(G)
set G=nullset U=nullendfunctionfunction End_ClearTrigger takes nothing returns nothingset udg_Duel_On=falseset udg_GameModeNe=truecall Duel_Destroy()call DestroyTimerDialog(udg_Game_TimerWindow)set udg_Game_TimerWindow=nullset udg_AI_Run=false
call DestroyTrigger(gg_trg_Leavegame)set gg_trg_Leavegame=nullcall DestroyTrigger(gg_trg_Remove_Unit)set gg_trg_Remove_Unit=nullcall DestroyTrigger(gg_trg_Spawn_Creep)set gg_trg_Spawn_Creep=nullcall FogEnableOff()call FogMaskEnableOff()endfunctionfunction End_Invul_GroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()call SetUnitInvulnerable(U,true)
call PauseUnit(U,true)set U=nullendfunctionfunction End_Invul_Actions takes nothing returns nothing
local group array Glocal integer Loop=0
loop
set G[Loop]=GetUnitsOfPlayerAll(Player(Loop))call ForGroupBJ(G[Loop],function End_Invul_GroupAct)
call DestroyGroup(G[Loop])set G[Loop]=null
set Loop=Loop+1exitwhen Loop>$B
endloopendfunctionfunction End_GameRun takes integer i returns nothing
local force Foclocal rect R
local rect RWinlocal rect RLose
local real FaceWinlocal real FaceLoselocal integer Looplocal integer WinLoop1local integer WinLoop2local integer LoseLoop1local integer LoseLoop2local location Loclocal unit DummyEndcall DialogSetMessage(udg_End_DialogWin,"Victory !")
call DialogSetMessage(udg_End_DialogLose,"Defeat !")
call DialogAddButtonBJ(udg_End_DialogWin,"Continue")
call DialogAddButtonBJ(udg_End_DialogLose,"Continue")set udg_Eng_Game=truecall End_ClearTrigger()call FogEnableOff()call FogMaskEnableOff()set Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(true,Foc)call DisplayTextToForce(Foc,"|cffff0000LOADING RESULT....|r")call DestroyForce(Foc)set Foc=null
call StopMusic(false)call VolumeGroupSetVolumeBJ(SOUND_VOLUMEGROUP_MUSIC,.0)set udg_Sound_Volume=$96
call Dynamic_Sound("Sound\\Interface\\ClanInvitation.wav")call End_Invul_Actions()
call TriggerSleepAction(4.)call DestroyTrigger(gg_trg_Revive)set gg_trg_Revive=nullcall End_Invul_Actions()
if(i==1)then
set WinLoop1=0set WinLoop2=5set LoseLoop1=6set LoseLoop2=$B
else
set WinLoop1=6set WinLoop2=$Bset LoseLoop1=0set LoseLoop2=5endifset RWin=Rect($A0,-6976,544,-6144)set RLose=Rect(928,-7040,$560,-6400)
set FaceWin=360set FaceLose=$B4
loop
if((IsUnitAliveBJ(udg_Player_UnitHero[WinLoop1])!=null)and(IsUnitAliveBJ(udg_Player_UnitHero[WinLoop1])==false))then
call TriggerSleepAction(.1)else
call SetUnitLifePercentBJ(udg_Player_UnitHero[WinLoop1],'d')
call SetUnitManaPercentBJ(udg_Player_UnitHero[WinLoop1],0)call UnitRemoveAbility(udg_Player_UnitHero[WinLoop1],'Aatk')
call PauseUnit(udg_Player_UnitHero[WinLoop1],true)call UnitAddAbility(udg_Player_UnitHero[WinLoop1],'A07R')call UnitAddAbility(udg_Player_UnitHero[WinLoop1],'A07S')set Loc=GetRandomLocInRect(RWin)
call SetUnitPositionLocFacingBJ(udg_Player_UnitHero[WinLoop1],Loc,FaceWin)call RemoveLocation(Loc)
set Loc=null
call IssueImmediateOrderById(udg_Player_UnitHero[WinLoop1],$D0019)call SetUnitAnimation(udg_Player_UnitHero[WinLoop1],"stand")
call UnitRemoveBuffsBJ(1,udg_Player_UnitHero[WinLoop1])call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",udg_Player_UnitHero[WinLoop1],"origin"))call Duel_SummonWarp(udg_Player_UnitHero[WinLoop1],FaceWin)set WinLoop1=WinLoop1+1endifexitwhen WinLoop1>WinLoop2endlooploop
if((IsUnitAliveBJ(udg_Player_UnitHero[LoseLoop1])!=null)and(IsUnitAliveBJ(udg_Player_UnitHero[LoseLoop1])==false))thencall TriggerSleepAction(.1)else
call GroupAddUnit(udg_End_Group,udg_Player_UnitHero[LoseLoop1])call SetUnitLifePercentBJ(udg_Player_UnitHero[LoseLoop1],'d')call SetUnitManaPercentBJ(udg_Player_UnitHero[LoseLoop1],0)call UnitRemoveAbility(udg_Player_UnitHero[LoseLoop1],'Aatk')call PauseUnit(udg_Player_UnitHero[LoseLoop1],true)call UnitAddAbility(udg_Player_UnitHero[LoseLoop1],'A07R')call UnitAddAbility(udg_Player_UnitHero[LoseLoop1],'A07S')set Loc=GetRandomLocInRect(RLose)call SetUnitPositionLocFacingBJ(udg_Player_UnitHero[LoseLoop1],Loc,FaceLose)
call RemoveLocation(Loc)
set Loc=null
call IssueImmediateOrderById(udg_Player_UnitHero[LoseLoop1],$D0019)call SetUnitAnimation(udg_Player_UnitHero[LoseLoop1],"stand")call UnitRemoveBuffsBJ(1,udg_Player_UnitHero[LoseLoop1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",udg_Player_UnitHero[LoseLoop1],"origin"))
call Duel_SummonWarp(udg_Player_UnitHero[LoseLoop1],FaceLose)set LoseLoop1=LoseLoop1+1endifexitwhen LoseLoop1>LoseLoop2
endloopcall RemoveRect(RWin)set RWin=nullcall RemoveRect(RLose)set RLose=nullset Loop=0set R=Rect(-352,-7520,$760,-5696)set Loc=GetRectCenter(R)
loop
call PanCameraToTimedLocForPlayer(Player(Loop),Loc,0)set Loop=Loop+1exitwhen Loop>$B
endloopcall RemoveRect(R)set R=nullcall RemoveLocation(Loc)
set Loc=null
call TriggerSleepAction(.9)set Loc=Location($479,-6170)
call CreateNUnitsAtLoc(1,'h008',Player($F),Loc,270)set DummyEnd=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h004',Player($F),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call TriggerSleepAction(1.4)
call IssueImmediateOrderById(DummyEnd,$D0277)set Foc=GetPlayersMatching(Condition(function All_PlayerCond))call TransmissionFromUnitWithNameBJ(Foc,DummyEnd,"Thanks for playing",null,"Get the latest version from |c00FBB41Bwww.facebook.com/BvONewWorld|r",0,5.,false)call DestroyForce(Foc)set Foc=null
call TriggerSleepAction(.1)call StopMusic(false)call StopMusic(true)
call TriggerSleepAction(2.5)
call StopMusic(false)set udg_Sound_Volume=$A0
call Dynamic_Sound("Sound\\Music\\mp3Music\\Credits.mp3")set Loc=Location($479,-6170)
call CreateNUnitsAtLoc(1,'h004',Player($F),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveUnit(DummyEnd)call RemoveLocation(Loc)
set Loc=null
set DummyEnd=nullcall TriggerSleepAction(2.5)
set Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(false,Foc)call DestroyForce(Foc)set Foc=null
if(i==1)then
set WinLoop1=0set WinLoop2=5set LoseLoop1=6set LoseLoop2=$B
else
set WinLoop1=6set WinLoop2=$Bset LoseLoop1=0set LoseLoop2=5endifloop
call DialogDisplayBJ(true,udg_End_DialogWin,Player(WinLoop1))set WinLoop1=WinLoop1+1exitwhen WinLoop1>WinLoop2endlooploop
call DialogDisplayBJ(true,udg_End_DialogLose,Player(LoseLoop1))set LoseLoop1=LoseLoop1+1exitwhen LoseLoop1>LoseLoop2
endloopendfunctionfunction End_Game takes nothing returns nothingif(udg_End_Game==false)thenif(udg_Score_Team1>=udg_Game_Score)thenset udg_End_Game=truecall End_GameRun(1)elseif(udg_Score_Team2>=udg_Game_Score)thenset udg_End_Game=truecall End_GameRun(2)endifendifendfunctionfunction Is_IkkakuBankai takes unit u returns booleanif(GetUnitTypeId(u)=='U00M')then
return trueelseif(GetUnitTypeId(u)=='U00N')then
return trueelseif(GetUnitTypeId(u)=='U00O')then
return trueelseif(GetUnitTypeId(u)=='U00P')then
return trueelseif(GetUnitTypeId(u)=='U00Q')then
return trueelse
return false
endifendfunctionfunction Trig_Initialization1_Actions takes nothing returns nothingcall TriggerExecute(gg_trg_Global_Variables)
call TriggerExecute(gg_trg_Game_Score)call TriggerExecute(gg_trg_Hero_Setup)call TriggerExecute(gg_trg_Teleport_Setup)call TriggerExecute(gg_trg_Player_Setup)
call TriggerExecute(gg_trg_Creep_Setup)call TriggerExecute(gg_trg_Golem_Setup)call TriggerExecute(gg_trg_Blue_Staff_Setup)
set udg_Weather_Map[0]=AddWeatherEffectSaveLast(bj_mapInitialPlayableArea,'RAlr')set udg_Weather_Map[1]=AddWeatherEffectSaveLast(bj_mapInitialPlayableArea,'WOcw')call TriggerExecute(gg_trg_Terrain_Set)call TriggerExecute(gg_trg_VisionStart1)
call TriggerExecute(gg_trg_Board)call StopMusic(false)call PlayMusic("Sound\\Music\\mp3Music\\War2IntroMusic.mp3")
call StartTimerBJ(udg_Timer_Mode,false,20.)call StartTimerBJ(udg_BossTimer,false,180.)set udg_BossTimer=bj_lastStartedTimercall TriggerExecute(gg_trg_Forgot_Init)call TriggerSleepAction(6.5)
call CinematicFilterGenericBJ(.0,BLEND_MODE_BLEND,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",'d','d','d','d',0,0,0,100.)
call CinematicModeBJ(false,bj_FORCE_ALL_PLAYERS)
call SetTimeOfDay(3.27)call CinematicFadeBJ(0,2.,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0,0,0,0)call CreateTimerDialogBJ(udg_Timer_Mode,"Game Modes")set udg_Game_TimerWindow=bj_lastCreatedTimerDialogcall SetCreepCampFilterState(false)call CreateQuestBJ(0,"Game Modes","TRIGSTR_2437","ReplaceableTextures\\CommandButtons\\BTNBansheeMaster.blp")call CreateQuestBJ(0,"Player Commands","TRIGSTR_2439","ReplaceableTextures\\CommandButtons\\BTNBookOfTheDead.blp")call CreateQuestBJ(2,"Credit","TRIGSTR_2441","ReplaceableTextures\\CommandButtons\\BTNArthas.blp")
call CreateQuestBJ(2,"Sponsor & Donator","Wisan Meeaudnun  :  1$","ReplaceableTextures\\CommandButtons\\BTNSnazzyPotion.blp")call VolumeGroupSetVolumeBJ(SOUND_VOLUMEGROUP_MUSIC,150.)call TriggerSleepAction(.01)
call Force_Display(udg_Display_Time,"Information about game modes, player commands and credit press F9.")call TriggerExecute(gg_trg_Test_System)call TriggerExecute(gg_trg_Sound_Setup)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Initialization1 takes nothing returns nothingset gg_trg_Initialization1=CreateTrigger()call TriggerAddAction(gg_trg_Initialization1,function Trig_Initialization1_Actions)endfunctionfunction Trig_Initalization2_Func018C takes nothing returns booleanreturn(udg_GameModeAr)endfunctionfunction Trig_Initalization2_Func019C takes nothing returns booleanreturn(udg_GameModeBh==false)endfunctionfunction Trig_Initalization2_Func020C takes nothing returns booleanreturn(udg_GameModeSc)endfunctionfunction Trig_Initalization2_Actions takes nothing returns nothinglocal integer Loop=0
call DestroyTimer(udg_Timer_Mode)set udg_Timer_Mode=nullcall DestroyTimerDialog(udg_Game_TimerWindow)call DestroyTrigger(gg_trg_Mode_On)call DestroyTrigger(gg_trg_Mode_Checker)
call DestroyTrigger(gg_trg_All_Random)call DestroyTrigger(gg_trg_No_Event)
call DestroyTrigger(gg_trg_BountyHunter)
call DestroyTrigger(gg_trg_Fast_Hunt)call DestroyTrigger(gg_trg_SuperCreep)call DestroyTrigger(gg_trg_DoubleScore)call TriggerExecute(gg_trg_AI_Run)if(Trig_Initalization2_Func018C())thenloop
if(GetPlayerSlotState(Player(Loop))==PLAYER_SLOT_STATE_PLAYING)thencall Random_Act(Loop)endifset udg_Player_Random[Loop]=falseset udg_Player_Repick[Loop]=falseset udg_Player_Selected[Loop]=trueset Loop=Loop+1exitwhen Loop>$B
endloopelse
call EnableTrigger(gg_trg_Random)endifif(Trig_Initalization2_Func019C())thencall DestroyTrigger(gg_trg_BountyHunterSet)call DestroyTrigger(gg_trg_BountyHunterRun)call DestroyTrigger(gg_trg_BountyHunterCheck)endifif(Trig_Initalization2_Func020C())thencall StartTimerBJ(udg_Timer_SuperCreeps,false,480.)call EnableTrigger(gg_trg_ScSpawn)call EnableTrigger(gg_trg_ScDie)
else
call DestroyTrigger(gg_trg_ScSpawn)call DestroyTrigger(gg_trg_ScDie)endifcall StartTimerBJ(udg_Timer_Creep,false,40.)
call CreateTimerDialogBJ(udg_Timer_Creep,"Creep Spawn")
set udg_Game_TimerWindow=bj_lastCreatedTimerDialogcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Initalization2 takes nothing returns nothingset gg_trg_Initalization2=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Initalization2,udg_Timer_Mode)call TriggerAddAction(gg_trg_Initalization2,function Trig_Initalization2_Actions)endfunctionfunction Trig_Initalization3_Actions takes nothing returns nothinglocal integer Loop=0
call DestroyTimer(udg_Timer_Creep)set udg_Timer_Creep=null
call DestroyTimerDialog(udg_Game_TimerWindow)call Duel_Destroy()loop
if(GetPlayerSlotState(Player(Loop))==PLAYER_SLOT_STATE_PLAYING and udg_Player_UnitHero[Loop]==null)thencall Random_Act(Loop)endifset udg_Player_Random[Loop]=falseset udg_Player_Repick[Loop]=falseset udg_Player_Selected[Loop]=falseset Loop=Loop+1exitwhen Loop>$B
endloopcall TriggerExecute(gg_trg_Teleport_Run)
call TriggerRegisterTimerExpireEvent(gg_trg_Spawn_Creep,udg_Creep_SpawnTimer)call StartTimerBJ(udg_Creep_SpawnTimer,true,udg_Creep_SpawnDelay)call TriggerExecute(gg_trg_Spawn_Creep)call StartTimerBJ(udg_Golem_Timer,true,udg_Golem_Delay)call TriggerSleepAction(.1)call DestroyTrigger(gg_trg_Pick)
call DestroyTrigger(gg_trg_Random)call DestroyTrigger(gg_trg_Repick)call RemoveRect(gg_rct_HeroSelection)set gg_rct_HeroSelection=nullcall TriggerExecute(gg_trg_Destroy_AI)endfunctionfunction InitTrig_Initalization3 takes nothing returns nothingset gg_trg_Initalization3=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Initalization3,udg_Timer_Creep)call TriggerAddAction(gg_trg_Initalization3,function Trig_Initalization3_Actions)endfunctionfunction LifeSteal___DmgTrg_Act takes unit atker,real rate returns nothinglocal real dmg=GetEventDamage()local real hp=GetUnitState(atker,UNIT_STATE_LIFE)local real lifeStTotal=(dmg*rate)/ 1.16local real maxLifeSt=GetPimaryAttribute(atker)*2
if(lifeStTotal>maxLifeSt)thenset lifeStTotal=maxLifeStendifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",atker,"origin"))
call SetUnitState(atker,UNIT_STATE_LIFE,(hp+lifeStTotal))set atker=nullendfunctionfunction LifeSteal___DmgTrg_Conds takes nothing returns booleanlocal unit u=GetEventDamageSource()local integer i=LifeSteal___maxLifeStSkloop
exitwhen i<0
if(GetUnitAbilityLevel(u,LifeSteal___lifeStSkId[i])>0)thencall LifeSteal___DmgTrg_Act(u,LifeSteal___lifeStRate[i])
set i=0endifset i=i-1endloopset u=nullreturn false
endfunctionfunction LifeSteal___TimerAction takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer timer_id=GetHandleId(t)local integer atked_id=LoadInteger(LifeSteal___lifeStealTB,timer_id,$A)local integer stack=LoadInteger(LifeSteal___lifeStealTB,atked_id,0)-1local trigger dmgTrg
local triggercondition dmgTrgCondif(stack<1)thenset dmgTrg=LoadTriggerHandle(LifeSteal___lifeStealTB,atked_id,1)
set dmgTrgCond=LoadTriggerConditionHandle(LifeSteal___lifeStealTB,atked_id,2)call TriggerRemoveCondition(dmgTrg,dmgTrgCond)call DestroyTrigger(dmgTrg)set dmgTrgCond=nullset dmgTrg=nullcall PauseTimer(t)call DestroyTimer(t)
call FlushChildHashtable(LifeSteal___lifeStealTB,atked_id)call FlushChildHashtable(LifeSteal___lifeStealTB,timer_id)else
call SaveInteger(LifeSteal___lifeStealTB,atked_id,0,stack)endifset t=nullendfunctionfunction LifeSteal___AttackTrg_Conditions takes nothing returns booleanlocal unit u=GetAttacker()local integer i=LifeSteal___maxLifeStSklocal boolean b=falseloop
exitwhen i<0
if(GetUnitAbilityLevel(u,LifeSteal___lifeStSkId[i])>0)thenset b=trueset i=0endifset i=i-1endloopset u=nullreturn b
endfunctionfunction LifeSteal___AttackTrg_Actions takes nothing returns nothing
local unit atked=GetTriggerUnit()local integer atked_id=GetHandleId(atked)local integer stack=LoadInteger(LifeSteal___lifeStealTB,atked_id,0)local trigger dmgTrg
local triggercondition dmgTrgCondlocal timer tif(stack>=LifeSteal___maxStack)thencall SaveInteger(LifeSteal___lifeStealTB,atked_id,0,LifeSteal___maxStack)else
call SaveInteger(LifeSteal___lifeStealTB,atked_id,0,(stack+1))endifif(stack<1)thenset dmgTrg=CreateTrigger()set dmgTrgCond=TriggerAddCondition(dmgTrg,Condition(function LifeSteal___DmgTrg_Conds))call TriggerRegisterUnitEvent(dmgTrg,atked,EVENT_UNIT_DAMAGED)call SaveTriggerHandle(LifeSteal___lifeStealTB,atked_id,1,dmgTrg)call SaveTriggerConditionHandle(LifeSteal___lifeStealTB,atked_id,2,dmgTrgCond)set dmgTrg=nullset dmgTrgCond=nullset t=CreateTimer()call SaveInteger(LifeSteal___lifeStealTB,GetHandleId(t),$A,atked_id)
call TimerStart(t,LifeSteal___delayTime,true,function LifeSteal___TimerAction)set t=nullendifset atked=nullendfunctionfunction LifeSteal___init takes nothing returns nothingset LifeSteal___lifeStealTB=InitHashtable()set LifeSteal___delayTime=3set LifeSteal___maxStack=2set LifeSteal___maxLifeStSk=4set LifeSteal___lifeStSkId[0]='A0HH'
set LifeSteal___lifeStRate[0]=.1
set LifeSteal___lifeStSkId[1]='A0HI'
set LifeSteal___lifeStRate[1]=.15set LifeSteal___lifeStSkId[2]='A0HJ'
set LifeSteal___lifeStRate[2]=.2
set LifeSteal___lifeStSkId[3]='A0HK'
set LifeSteal___lifeStRate[3]=.33set LifeSteal___lifeStSkId[4]='A0JC'
set LifeSteal___lifeStRate[4]=.38set gg_trg_Life_Steal_System=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Life_Steal_System,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Life_Steal_System,Condition(function LifeSteal___AttackTrg_Conditions))call TriggerAddAction(gg_trg_Life_Steal_System,function LifeSteal___AttackTrg_Actions)endfunctionfunction TestSystem___goldAct takes nothing returns nothinglocal string eventStr=GetEventPlayerChatString()
local integer amount=S2I(SubString(eventStr,5,StringLength(eventStr)))call AdjustPlayerStateBJ(amount,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(amount,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER)
set eventStr=nullendfunctionfunction TestSystem___lvAct takes nothing returns nothinglocal string eventStr=GetEventPlayerChatString()
local integer amount=S2I(SubString(eventStr,6,StringLength(eventStr)))local group g=CreateGroup()local unit pickedcall GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall SetHeroLevel(picked,(GetHeroLevel(picked)+amount),true)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset eventStr=nullendfunctionfunction TestSystem___refreshAct takes nothing returns nothinglocal group g=CreateGroup()local unit pickedcall GroupEnumUnitsOfPlayer(g,GetTriggerPlayer(),null)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))and(IsUnitIllusion(picked)==false)thencall SetUnitLifePercentBJ(picked,'d')call SetUnitManaPercentBJ(picked,'d')endifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction TestSystem___spawnAct takes nothing returns nothing
call TriggerExecute(gg_trg_Spawn_Creep)endfunctionfunction TestSystem___Act takes nothing returns nothinglocal player plocal integer tempIlocal integer userCount=0local integer index=0loop
set p=Player(index)if(GetPlayerSlotState(p)==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(p)!=MAP_CONTROL_COMPUTER)thenset tempI=indexset userCount=userCount+1endifset index=index+1exitwhen(index>$B)endloopif(userCount==1)then
set p=Player(tempI)call TriggerRegisterPlayerChatEvent(TestSystem___goldTrg,p,"-gold ",false)call TriggerRegisterPlayerChatEvent(TestSystem___lvTrg,p,"-lvlup ",false)call TriggerRegisterPlayerChatEvent(TestSystem___refreshTrg,p,"-refresh",true)call TriggerRegisterPlayerChatEvent(TestSystem___spawnTrg,p,"-spawncreeps",true)
call Force_Display(60,"|c000ce411**** Single Player Mode Enabled ****|r")call Force_Display(60,"You can use single player command....")call Force_Display(60,"-gold xxx, -lvlup xxx, -refresh, -spawncreeps")endifset p=nullendfunctionfunction TestSystem___Init takes nothing returns nothing
call TriggerAddAction(TestSystem___goldTrg,function TestSystem___goldAct)call TriggerAddAction(TestSystem___lvTrg,function TestSystem___lvAct)call TriggerAddAction(TestSystem___refreshTrg,function TestSystem___refreshAct)call TriggerAddAction(TestSystem___spawnTrg,function TestSystem___spawnAct)set gg_trg_Test_System=CreateTrigger()call TriggerAddAction(gg_trg_Test_System,function TestSystem___Act)endfunctionfunction Trig_Global_Variables_Actions takes nothing returns nothing
set udg_MapName="  BVO New World 5.0  "set udg_Gold_Rate=4set udg_Revive_Time=2.7set udg_Player_ManaATK=30.set udg_Sound_Volume=$82
set udg_Display_Time=10.
set udg_Duel_Time=240.set udg_Home_RegenDelay=1.5set udg_Home_RegenBuff='B01G'set udg_Home_RegenRate=.2set udg_Kill_HeroExpMax=$FAset udg_Kill_HeroExpMin=50set udg_Kill_CreepExp=3set udg_Kill_Gold=25
set udg_Kill_Medal=1
set udg_Player_Color[0]="|c00ff0303"
set udg_Player_Color[1]="|c000042ff"
set udg_Player_Color[2]="|c001ce6b9"
set udg_Player_Color[3]="|c00540081"
set udg_Player_Color[4]="|c00fffc01"
set udg_Player_Color[5]="|c00ff8000"
set udg_Player_Color[6]="|c0020c000"
set udg_Player_Color[7]="|c00e55bb0"
set udg_Player_Color[8]="|c00afb6bc"
set udg_Player_Color[9]="|c007ebff1"
set udg_Player_Color[$A]="|c00106246"set udg_Player_Color[$B]="|c004e2a04"set udg_Player_Color[$C]="|c00FFD700"set udg_GlobalSkill[0]='Avul'set udg_GlobalSkill[1]='Amrf'set udg_GlobalSkill[2]='A04G'set udg_GlobalSkill[3]='A04I'set udg_GlobalSkill[4]='A08U'set udg_GlobalSkill[5]='A090'set udg_GlobalSkill[6]='Aloc'set udg_GlobalSkill[7]='ACmi'set udg_GlobalSkill[9]='A0A8'set udg_GlobalSkill[$A]='A0CE'set udg_PermanentBonus_STR='A0D1'set udg_PermanentBonus_AGI='A0D2'set udg_PermanentBonus_INT='A0D3'set udg_PermanentBonus_Delay=.4set udg_TransformSkill='A049'set udg_TransformArea=400.set udg_TransformBackstab=120.set udg_CameraArea=2000.
set udg_CameraShakePow=15.set udg_CameraShakeTime=2.3set udg_MapSize[0]=-7360.set udg_MapSize[1]=-7744.set udg_MapSize[2]=7328.
set udg_MapSize[3]=7040.
set udg_WindWalk_Max=$Aset udg_WindWalk_Ability[0]='BOwk'set udg_WindWalk_Ability[1]='B012'set udg_WindWalk_Ability[2]='B006'set udg_WindWalk_Ability[3]='A0CO'set udg_WindWalk_Ability[4]='A0CH'set udg_WindWalk_Ability[5]='A0F9'set udg_WindWalk_Ability[6]='A0D0'set udg_WindWalk_Ability[7]='Apiv'set udg_WindWalk_Ability[8]='B04C'set udg_WindWalk_Ability[9]='B04Q'set udg_WindWalk_Ability[$A]='B04X'set udg_Pause_Hash=InitHashtable()set udg_Cooldown_Hash=InitHashtable()set udg_Lance_of_Lightning_Hash=InitHashtable()call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Global_Variables takes nothing returns nothing
set gg_trg_Global_Variables=CreateTrigger()call TriggerAddAction(gg_trg_Global_Variables,function Trig_Global_Variables_Actions)endfunctionfunction Trig_Game_Score_Func007Func001Func001Func001C takes nothing returns boolean
return(udg_Game_Score==$B4)endfunctionfunction Trig_Game_Score_Func007Func001Func001C takes nothing returns booleanreturn(udg_Game_Score==$96)endfunctionfunction Trig_Game_Score_Func007Func001C takes nothing returns booleanreturn(udg_Game_Score=='x')endfunctionfunction Trig_Game_Score_Func007C takes nothing returns booleanreturn(udg_Game_Score==30)endfunctionfunction Trig_Game_Score_Actions takes nothing returns nothinglocal force Foccall TriggerSleepAction(.01)
set Foc=GetPlayersMatching(Condition(function All_PlayerCond))set udg_Game_Score=(CountPlayersInForceBJ(Foc)*$F)call DestroyForce(Foc)set Foc=null
if(Trig_Game_Score_Func007C())thenset udg_Game_Score=20else
if(Trig_Game_Score_Func007Func001C())thenset udg_Game_Score=$8Celse
if(Trig_Game_Score_Func007Func001Func001C())then
set udg_Game_Score=$DCelse
if(Trig_Game_Score_Func007Func001Func001Func001C())thenset udg_Game_Score=270endifendifendifendifcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Game_Score takes nothing returns nothingset gg_trg_Game_Score=CreateTrigger()call TriggerAddAction(gg_trg_Game_Score,function Trig_Game_Score_Actions)endfunctionfunction Trig_Hero_Setup_Actions takes nothing returns nothingset udg_Player_MaxHeroes=47set udg_Player_HeroType[0]='H001'set udg_Player_HeroType[1]='N002'set udg_Player_HeroType[2]='U000'set udg_Player_HeroType[3]='O001'set udg_Player_HeroType[4]='N005'set udg_Player_HeroType[5]='O000'set udg_Player_HeroType[6]='H003'set udg_Player_HeroType[7]='E000'set udg_Player_HeroType[8]='N01E'set udg_Player_HeroType[9]='E001'set udg_Player_HeroType[$A]='N007'set udg_Player_HeroType[$B]='U006'set udg_Player_HeroType[$C]='U002'set udg_Player_HeroType[$D]='H071'set udg_Player_HeroType[$E]='H002'set udg_Player_HeroType[$F]='O004'set udg_Player_HeroType[16]='N01F'set udg_Player_HeroType[17]='N01G'set udg_Player_HeroType[18]='E003'set udg_Player_HeroType[19]='N01J'set udg_Player_HeroType[20]='O008'set udg_Player_HeroType[21]='U001'set udg_Player_HeroType[22]='E005'set udg_Player_HeroType[23]='E006'set udg_Player_HeroType[24]='U00B'set udg_Player_HeroType[25]='N01S'set udg_Player_HeroType[26]='H09N'set udg_Player_HeroType[27]='H006'set udg_Player_HeroType[28]='N006'set udg_Player_HeroType[29]='U00E'set udg_Player_HeroType[30]='O002'set udg_Player_HeroType[31]='N01U'set udg_Player_HeroType[32]='O00A'set udg_Player_HeroType[33]='E007'set udg_Player_HeroType[34]='H0AV'set udg_Player_HeroType[35]='U00F'set udg_Player_HeroType[36]='U00G'set udg_Player_HeroType[37]='N01W'set udg_Player_HeroType[38]='O00B'set udg_Player_HeroType[39]='U00H'set udg_Player_HeroType[40]='H0AW'set udg_Player_HeroType[41]='O00C'set udg_Player_HeroType[42]='U00L'set udg_Player_HeroType[43]='N01X'set udg_Player_HeroType[44]='O00D'set udg_Player_HeroType[45]='O00F'set udg_Player_HeroType[46]='U00R'set udg_Player_HeroType[47]='N01H'set udg_Player_HeroType[48]='U00T'set udg_Player_Icon[0]="ReplaceableTextures\\CommandButtons\\BTNIchigo.blp"set udg_Player_Icon[1]="ReplaceableTextures\\CommandButtons\\BTNLuffy.blp"set udg_Player_Icon[2]="ReplaceableTextures\\CommandButtons\\BTNNaruto.blp"set udg_Player_Icon[3]="ReplaceableTextures\\CommandButtons\\BTNRukia.blp"set udg_Player_Icon[4]="ReplaceableTextures\\CommandButtons\\BTNZoro.blp"set udg_Player_Icon[5]="ReplaceableTextures\\CommandButtons\\BTNSasuke.blp"set udg_Player_Icon[6]="ReplaceableTextures\\CommandButtons\\BTNChad.blp"set udg_Player_Icon[7]="ReplaceableTextures\\CommandButtons\\BTNNami.blp"set udg_Player_Icon[8]="ReplaceableTextures\\CommandButtons\\BTNKakashi.blp"
set udg_Player_Icon[9]="ReplaceableTextures\\CommandButtons\\BTNUryu.blp"set udg_Player_Icon[$A]="ReplaceableTextures\\CommandButtons\\BTNUsop.blp"set udg_Player_Icon[$B]="ReplaceableTextures\\CommandButtons\\BTNNeji.blp"set udg_Player_Icon[$C]="ReplaceableTextures\\CommandButtons\\BTNByakuya.blp"set udg_Player_Icon[$D]="ReplaceableTextures\\CommandButtons\\BTNEdward.blp"
set udg_Player_Icon[$E]="ReplaceableTextures\\CommandButtons\\BTNMadara.blp"
set udg_Player_Icon[$F]="ReplaceableTextures\\CommandButtons\\BTNAizen.blp"set udg_Player_Icon[16]="ReplaceableTextures\\CommandButtons\\BTNAce.blp"set udg_Player_Icon[17]="ReplaceableTextures\\CommandButtons\\BTNItachi.blp"
set udg_Player_Icon[18]="ReplaceableTextures\\CommandButtons\\BTNHitsugaya.blp"set udg_Player_Icon[19]="ReplaceableTextures\\CommandButtons\\BTNCrocodile.blp"set udg_Player_Icon[20]="ReplaceableTextures\\CommandButtons\\BTNPain.blp"set udg_Player_Icon[21]="ReplaceableTextures\\CommandButtons\\BTNKenpachi.blp"set udg_Player_Icon[22]="ReplaceableTextures\\CommandButtons\\BTNEnel.blp"set udg_Player_Icon[23]="ReplaceableTextures\\CommandButtons\\BTNDeidara.blp"set udg_Player_Icon[24]="ReplaceableTextures\\CommandButtons\\BTNYamamoto.blp"set udg_Player_Icon[25]="ReplaceableTextures\\CommandButtons\\BTNMihawk.blp"
set udg_Player_Icon[26]="ReplaceableTextures\\CommandButtons\\BTNHidan.blp"set udg_Player_Icon[27]="ReplaceableTextures\\CommandButtons\\BTNEvilIchigo.blp"
set udg_Player_Icon[28]="ReplaceableTextures\\CommandButtons\\BTNSanji.blp"set udg_Player_Icon[29]="ReplaceableTextures\\CommandButtons\\BTNZabuza.blp"
set udg_Player_Icon[30]="ReplaceableTextures\\CommandButtons\\BTNYoruichi.blp"set udg_Player_Icon[31]="ReplaceableTextures\\CommandButtons\\BTNLucci.blp"set udg_Player_Icon[32]="ReplaceableTextures\\CommandButtons\\BTNTobi.blp"set udg_Player_Icon[33]="ReplaceableTextures\\CommandButtons\\BTNStarrk.blp"
set udg_Player_Icon[34]="ReplaceableTextures\\CommandButtons\\BTNAkainu.blp"
set udg_Player_Icon[35]="ReplaceableTextures\\CommandButtons\\BTNHashirama.blp"set udg_Player_Icon[36]="ReplaceableTextures\\CommandButtons\\BTNUlquiorra.blp"set udg_Player_Icon[37]="ReplaceableTextures\\CommandButtons\\BTNKizaru.blp"
set udg_Player_Icon[38]="ReplaceableTextures\\CommandButtons\\BTNNidaime.blp"set udg_Player_Icon[39]="ReplaceableTextures\\CommandButtons\\BTNGrimmjow.blp"set udg_Player_Icon[40]="ReplaceableTextures\\CommandButtons\\BTNFujitora.blp"set udg_Player_Icon[41]="ReplaceableTextures\\CommandButtons\\BTNKaguya.blp"
set udg_Player_Icon[42]="ReplaceableTextures\\CommandButtons\\BTNIkkaku.blp"
set udg_Player_Icon[43]="ReplaceableTextures\\CommandButtons\\BTNAokiji.blp"
set udg_Player_Icon[44]="ReplaceableTextures\\CommandButtons\\BTNMinato.blp"
set udg_Player_Icon[45]="ReplaceableTextures\\CommandButtons\\BTNSoifon.blp"
set udg_Player_Icon[46]="ReplaceableTextures\\CommandButtons\\BTNDoflamingo.blp"
set udg_Player_Icon[47]="ReplaceableTextures\\CommandButtons\\BTNShunsui.blp"set udg_Player_Icon[48]="ReplaceableTextures\\CommandButtons\\BTNIchibei.blp"call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Hero_Setup takes nothing returns nothingset gg_trg_Hero_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Hero_Setup,function Trig_Hero_Setup_Actions)endfunctionfunction Trig_TeleportSetup_Actions takes nothing returns nothinglocal unit array Tele_Ulocal integer Loops=0set Tele_U[0]=gg_unit_n004_0024set Tele_U[1]=gg_unit_n004_0026set Tele_U[2]=gg_unit_n004_0027set Tele_U[3]=gg_unit_n004_0028set Tele_U[4]=gg_unit_n004_0029set Tele_U[5]=gg_unit_n004_0032set Tele_U[6]=gg_unit_n004_0033set Tele_U[7]=gg_unit_n004_0034set Tele_U[8]=gg_unit_n004_0030set Tele_U[9]=gg_unit_n004_0031loop
exitwhen Loops>9
call SetUnitVertexColor(Tele_U[Loops],0,0,0,$FF)
set Tele_U[Loops]=nullset Loops=Loops+1endloopset udg_Teleport_UnitX[0]=GetUnitX(gg_unit_n00Q_0212)set udg_Teleport_UnitY[0]=GetUnitY(gg_unit_n00Q_0212)set udg_Teleport_UnitX[1]=GetUnitX(gg_unit_n00Q_0196)set udg_Teleport_UnitY[1]=GetUnitY(gg_unit_n00Q_0196)set udg_Teleport_UnitX[2]=GetUnitX(gg_unit_n00Q_0197)set udg_Teleport_UnitY[2]=GetUnitY(gg_unit_n00Q_0197)set udg_Teleport_UnitX[3]=GetUnitX(gg_unit_n00Q_0198)set udg_Teleport_UnitY[3]=GetUnitY(gg_unit_n00Q_0198)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Teleport_Setup takes nothing returns nothingset gg_trg_Teleport_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Teleport_Setup,function Trig_TeleportSetup_Actions)
endfunctionfunction Trig_Player_Setup_Actions takes nothing returns nothing
local integer Loops=0loop
set udg_Player_Random[Loops]=trueset Loops=Loops+1exitwhen Loops>$Bendloopset Loops=0loop
set udg_Player_DummyType[Loops]=udg_Player_HeroType[Loops]set Loops=Loops+1exitwhen Loops>udg_Player_MaxHeroesendloopset Loops=0loop
set udg_Player_Anc_1[Loops]="Announces\\FirstBlood.mp3"set udg_Player_Anc_2[Loops]="Announces\\Double_Kill.mp3"
set udg_Player_Anc_3[Loops]="Announces\\Triple_Kill.mp3"
set udg_Player_Anc_4[Loops]="Announces\\Ultra_Kill.mp3"set udg_Player_Anc_5[Loops]="Announces\\Rampage.mp3"
set udg_Player_Anc_6[Loops]="Announces\\Humiliation.mp3"
set Loops=Loops+1exitwhen Loops>$Bendloopcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Player_Setup takes nothing returns nothing
set gg_trg_Player_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Player_Setup,function Trig_Player_Setup_Actions)endfunctionfunction Trig_Creep_Setup_Actions takes nothing returns nothingset udg_Creep_SpawnDelay=35.
set udg_Creep_MaxLv1=1set udg_Creep_Lv1[0]='n00D'set udg_Creep_Lv1[1]='n029'set udg_Creep_MaxLv2=3set udg_Creep_Lv2[0]='n00J'set udg_Creep_Lv2[1]='n02C'set udg_Creep_Lv2[2]='n00E'set udg_Creep_Lv2[3]='n028'set udg_Creep_MaxLv3=4set udg_Creep_Lv3[0]='n027'set udg_Creep_Lv3[1]='n00H'set udg_Creep_Lv3[2]='n00F'set udg_Creep_Lv3[3]='n00G'set udg_Creep_Lv3[4]='n02A'set udg_Creep_MaxLv4=1set udg_Creep_Lv4[0]='n02E'set udg_Creep_Lv4[1]='n02B'set udg_Creep_MaxLv5=2set udg_Creep_Lv5[0]='n00I'set udg_Creep_Lv5[1]='n00P'set udg_Creep_Lv5[2]='n00K'set udg_Creep_MaxLv6=2set udg_Creep_Lv6[0]='n02D'set udg_Creep_Lv6[1]='n00L'set udg_Creep_Lv6[2]='n00N'set udg_Creep_MaxLvX=4set udg_Creep_LvX[0]='n00R'set udg_Creep_LvX[1]='n01N'set udg_Creep_LvX[2]='n01L'set udg_Creep_LvX[3]='n00O'set udg_Creep_LvX[4]='n00M'call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Creep_Setup takes nothing returns nothingset gg_trg_Creep_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Creep_Setup,function Trig_Creep_Setup_Actions)endfunctionfunction Trig_Golem_Setup_Actions takes nothing returns nothinglocal location Loclocal player P=Player($C)local integer i=0set udg_Golem_Delay=20.set udg_Golem_Type='n00T'set udg_Golem_BossType[0]='n00V'
set udg_Golem_BossType[1]='n00W'
set udg_Golem_BossType[2]='n00X'
set udg_Golem_BossType[3]='n00Y'
set udg_Golem_BossType[4]='n00Z'
set udg_Golem_BossType[5]='n010'
set udg_Golem_BossType[6]='n012'
set udg_Golem_BossType[7]='n013'
set udg_Golem_BossType[8]='n014'
set udg_Golem_BossType[9]='n015'
set udg_Golem_BossType[$A]='n016'loop
set Loc=GetRandomLocInRect(gg_rct_Golem)
call CreateNUnitsAtLoc(1,udg_Golem_Type,P,Loc,GetRandomReal(0,360))call RemoveLocation(Loc)
set Loc=null
set i=i+1exitwhen i>24endloopset Loc=GetRectCenter(gg_rct_Golem)call CreateNUnitsAtLoc(1,udg_Golem_BossType[0],P,Loc,270.)call RemoveLocation(Loc)
set Loc=null
call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Golem_Setup takes nothing returns nothingset gg_trg_Golem_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Golem_Setup,function Trig_Golem_Setup_Actions)endfunctionfunction Trig_Blue_Staff_Setup_Actions takes nothing returns nothing
set udg_Upgrade_Type[0]='E000'set udg_Upgrade_Type[1]='O008'set udg_Upgrade_Type[2]='E005'set udg_Upgrade_Type[3]='E006'set udg_Upgrade_Type[4]='O00C'call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Blue_Staff_Setup takes nothing returns nothing
set gg_trg_Blue_Staff_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Blue_Staff_Setup,function Trig_Blue_Staff_Setup_Actions)endfunctionfunction Trig_Music_Setup_Actions takes nothing returns nothingset udg_SoundPatch_MaxList_Wc3=9
set udg_SoundPatch_List_Wc3[0]="Sound\\Music\\mp3Music\\ArthasTheme.mp3"
set udg_SoundPatch_List_Wc3[1]="Sound\\Music\\mp3Music\\Doom.mp3"set udg_SoundPatch_List_Wc3[2]="Sound\\Music\\mp3Music\\HeroicVictory.mp3"set udg_SoundPatch_List_Wc3[3]="Sound\\Music\\mp3Music\\Human1.mp3"set udg_SoundPatch_List_Wc3[4]="Sound\\Music\\mp3Music\\HumanX1.mp3"
set udg_SoundPatch_List_Wc3[5]="Sound\\Music\\mp3Music\\IllidansTheme.mp3"set udg_SoundPatch_List_Wc3[6]="Sound\\Music\\mp3Music\\LichKingTheme.mp3"set udg_SoundPatch_List_Wc3[7]="Sound\\Music\\mp3Music\\Orc3.mp3"set udg_SoundPatch_List_Wc3[8]="Sound\\Music\\mp3Music\\PursuitTheme.mp3"set udg_SoundPatch_List_Wc3[9]="Sound\\Music\\mp3Music\\PH1.mp3"
set udg_SoundPatch_MaxList_Bleach=3set udg_SoundPatch_List_Bleach[0]="BVO New World\\Sounds\\Music\\Bleach1.mp3"set udg_SoundPatch_List_Bleach[1]="BVO New World\\Sounds\\Music\\Bleach2.mp3"set udg_SoundPatch_List_Bleach[2]="BVO New World\\Sounds\\Music\\Bleach3.mp3"set udg_SoundPatch_List_Bleach[3]="BVO New World\\Sounds\\Music\\Bleach4.mp3"set udg_SoundPatch_MaxList_OnePiece=3set udg_SoundPatch_List_OnePiece[0]="BVO New World\\Sounds\\Music\\OnePiece1.mp3"set udg_SoundPatch_List_OnePiece[1]="BVO New World\\Sounds\\Music\\OnePiece2.mp3"set udg_SoundPatch_List_OnePiece[2]="BVO New World\\Sounds\\Music\\OnePiece3.mp3"set udg_SoundPatch_List_OnePiece[3]="BVO New World\\Sounds\\Music\\OnePiece4.mp3"set udg_SoundPatch_MaxList_Naruto=3set udg_SoundPatch_List_Naruto[0]="BVO New World\\Sounds\\Music\\Naruto1.mp3"set udg_SoundPatch_List_Naruto[1]="BVO New World\\Sounds\\Music\\Naruto2.mp3"set udg_SoundPatch_List_Naruto[2]="BVO New World\\Sounds\\Music\\Naruto3.mp3"set udg_SoundPatch_List_Naruto[3]="BVO New World\\Sounds\\Music\\Naruto4.mp3"call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Music_Setup takes nothing returns nothingset gg_trg_Music_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Music_Setup,function Trig_Music_Setup_Actions)endfunctionfunction Trig_Sound_Setup_Actions takes nothing returns nothinglocal integer icall DoSoundPreload("Sound\\Interface\\GoodJob.wav")
call DoSoundPreload("Sound\\Interface\\ClanInvitation.wav")call DoSoundPreload("Sound\\Music\\mp3Music\\Credits.mp3")call DoSoundPreload("Sound\\Interface\\SecretFound.wav")
call DoSoundPreload("Sound\\Interface\\MapPing")
call DoSoundPreload("Sound\\Interface\\QuestLog.wav")call DoSoundPreload("Sound\\Interface\\GameFound.wav")call DoSoundPreload("Sound\\Interface\\NewTournament.wav")call DoSoundPreload("Sound\\Interface\\BattleNetTick.wav")call DoSoundPreload("Sound\\Interface\\ArrangedTeamInvitation.wav")call DoSoundPreload("Announces\\FirstBlood.mp3")
call DoSoundPreload("Announces\\Double_Kill.mp3")call DoSoundPreload("Announces\\Triple_Kill.mp3")call DoSoundPreload("Announces\\Ultra_Kill.mp3")
call DoSoundPreload("Announces\\Rampage.mp3")call DoSoundPreload("Announces\\Humiliation.mp3")call DoSoundPreload("Sound\\Interface\\ItemReceived.wav")call DoSoundPreload("Sound\\Interface\\UpkeepRing.wav")call DoSoundPreload("Sounds\\Haki.mp3")call DoSoundPreload("Sounds\\GetsugaIchigo.mp3")
call DoSoundPreload("Sounds\\KingKong.mp3")call DoSoundPreload("Sounds\\Explosion.mp3")
call DoSoundPreload("Sounds\\ChouBijuu.mp3")
call DoSoundPreload("Sounds\\Juhaku.mp3")call DoSoundPreload("Sounds\\IchidaiSanzen.mp3")
call DoSoundPreload("Sounds\\Sharingan.mp3")
call DoSoundPreload("Sounds\\Asura.mp3")
call DoSoundPreload("Sounds\\ThunderLance.mp3")call DoSoundPreload("Sounds\\Hakuteiken.mp3")call DoSoundPreload("Sounds\\ShakeIsland.mp3")call DoSoundPreload("Sounds\\Infinite.mp3")call DoSoundPreload("Sounds\\Kurohitsugi.mp3")call DoSoundPreload("Sounds\\KurohitsugiEnd.mp3")call DoSoundPreload("Sounds\\Ryuusenka.mp3")
call DoSoundPreload("Sounds\\Enkai.mp3")
call DoSoundPreload("Sounds\\Entei.mp3")
call DoSoundPreload("Sounds\\Amaterasu2.mp3")call DoSoundPreload("Sounds\\Amaterasu1.mp3")call DoSoundPreload("Sounds\\GroundDeath.mp3")call DoSoundPreload("Sounds\\ShinraTensei2.mp3")
call DoSoundPreload("Sounds\\Raigo.mp3")
call DoSoundPreload("Sounds\\JokakuEnjo.mp3")call DoSoundPreload("Sounds\\Mihawk1.mp3")call DoSoundPreload("Sounds\\Mihawk2.mp3")call DoSoundPreload("Sounds\\Hidan1.mp3")call DoSoundPreload("Sounds\\Hidan2.mp3")call DoSoundPreload("Sounds\\EvilGetsuga.mp3")call DoSoundPreload("Sounds\\SanjiStrike.mp3")call DoSoundPreload("Sounds\\Rokuogan.mp3")call DoSoundPreload("Sounds\\Meigo.mp3")
call DoSoundPreload("Sounds\\HashiramaBuddha.mp3")call DoSoundPreload("Sounds\\FujitoraMeteor.mp3")call DoSoundPreload("Sounds\\64Palms.mp3")call DoSoundPreload("Sounds\\Desgarron.mp3")
call DoSoundPreload("Sounds\\Gudodama.mp3")call DoSoundPreload("Sounds\\HyotenHyakkaso.mp3")call DoSoundPreload("Sounds\\ImpatctWolf.mp3")call DoSoundPreload("Sounds\\InfinitiesDarkness.mp3")call DoSoundPreload("Sounds\\Moko.mp3")call DoSoundPreload("Sounds\\YasakaniMagatama.mp3")call DoSoundPreload("Sounds\\YoruichiUlti.mp3")call DoSoundPreload("Sounds\\ORaikiri.mp3")call DoSoundPreload("Sounds\\Lanza.mp3")
call DoSoundPreload("Sounds\\IceAge.mp3")call DoSoundPreload("Sounds\\Rasengan.mp3")call DoSoundPreload("Sounds\\JakuhoRaikoben.mp3")call DoSoundPreload("Sounds\\Joker.mp3")
call DoSoundPreload("Sounds\\SwordSlash.wav")call DoSoundPreload("Abilities\\Spells\\Human\\InnerFire\\InnerFireBirth.wav")call DoSoundPreload("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav")
call DoSoundPreload("Sounds\\GuraGura.wav")call DoSoundPreload("Abilities\\Spells\\Other\\Volcano\\VolcanoLoop.wav")call DoSoundPreload("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav")call DoSoundPreload("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav")call DoSoundPreload("Abilities\\Spells\\Other\\Monsoon\\MonsoonLightningHit.wav")call DoSoundPreload("Abilities\\Spells\\Orc\\FeralSpirit\\FeralSpiritTarget1.wav")call DoSoundPreload("Sound\\Units\\Combat\\MetalHeavyChopFlesh1.wav")call DoSoundPreload("Sound\\Units\\Combat\\MetalHeavyChopFlesh2.wav")call DoSoundPreload("Sound\\Units\\Combat\\MetalHeavyChopFlesh3.wav")call DoSoundPreload("Sound\\Ambient\\BattleNetWindStereoLoop1.wav")call TriggerSleepAction(.01)
call TriggerExecute(gg_trg_Music_Setup)set i=0loop
call ForceAddPlayer(udg_SoundPatch_EnableGroup,Player(i))set i=i+1exitwhen i==$Cendloopset udg_soundPatch_Bleach="BVO New World\\Sounds\\Spell\\Bleach"
set udg_soundPatch_Naruto="BVO New World\\Sounds\\Spell\\Naruto"
set udg_soundPatch_OnePiece="BVO New World\\Sounds\\Spell\\One Piece"call TriggerSleepAction(.01)
call DoSoundPreload(udg_soundPatch_Bleach+"\\Aizen\\KyokaSuigetsu.wav")call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Byakuya\\Bankai.wav",$DA2,-6650)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Byakuya\\Senkei.wav",$DA2,-6650)call DoSoundPreload(udg_soundPatch_Bleach+"\\Grimmjow\\GranReyCero.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Grimmjow\\Pantera.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Hitsugaya\\Bankai.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Hitsugaya\\Ryuusenka.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Hitsugaya\\SennenHyoro.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Ichigo\\Bankai.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Ishida\\Sprenger.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Kenpachi\\EyePatchRelease.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Rukia\\Hakuren.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Rukia\\TsukiShiro.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Starrk\\InfiniteCero.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Ulquiorra\\CeroOscuras.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\Ulquiorra\\SegundaEtapa.wav")call DoSoundPreload(udg_soundPatch_Bleach+"\\WhiteIchigo\\HighSlam.wav")
call DoSoundPreload(udg_soundPatch_Bleach+"\\Yoruichi\\Shunkou.wav")
call DoSoundPreload(udg_soundPatch_Naruto+"\\Deidara\\DeidaraBomb.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Hashirama\\JukaiKotan.wav")
call DoSoundPreload(udg_soundPatch_Naruto+"\\Hashirama\\Rashomon.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Itachi\\Fireball.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Kaguya\\Amenominaka.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Kakashi\\Kamui.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Kakashi\\LightningWolf.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Kakashi\\Raikiri.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Madara\\ChibakuTensei.wav")
call DoSoundPreload(udg_soundPatch_Naruto+"\\Madara\\IntonRaiha.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Madara\\Limbo.wav")
call DoSoundPreload(udg_soundPatch_Naruto+"\\Naruto\\Rasengan.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Naruto\\RasenganCharge.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Neji\\128Palms.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Neji\\Rotation.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Pein\\BanshoTein.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Pein\\ChibakuTensei.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Pein\\ShinraTensei.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Pein\\ShinraTenseiEffect.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Sasuke\\Chidori.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Sasuke\\Kirin.wav")
call DoSoundPreload(udg_soundPatch_Naruto+"\\Tobirama\\Waterwall.wav")call DoSoundPreload(udg_soundPatch_Naruto+"\\Tobirama\\Waterwave.wav")call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Zabuza\\HiddenMist.wav",$DA2,-6650)call DoSoundPreload(udg_soundPatch_OnePiece+"\\Ace\\Hibashira.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Ace\\Hidaruma.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Ace\\Hiken.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Ace\\Hotarubi.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Akainu\\Daifunka.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Akainu\\InugamiGuren.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Akainu\\RyuseiKazan.wav")
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Akainu\\RyuseiKazanEffect.wav",$DA2,-6650)call DoSoundPreload(udg_soundPatch_OnePiece+"\\Crocodile\\DesertGirasole.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Crocodile\\Heavy.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Enel\\Mamaragan.wav")
call DoSoundPreload(udg_soundPatch_OnePiece+"\\Enel\\Vari.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Kizaru\\Laser.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Kizaru\\YatanoKagami.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Lucci\\Shigan.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Lucci\\Tekkai.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Luffy\\Gear4.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Luffy\\RedHawk.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Mihawk\\ShockWave.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Nami\\HeatEgg.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Sanji\\DiableJambe.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Usopp\\SkullExplosion.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Zoro\\CrossingSixPatch.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Zoro\\OTatsumaki.wav")call DoSoundPreload(udg_soundPatch_OnePiece+"\\Zoro\\RokudoTsuji.wav")call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Sound_Setup takes nothing returns nothingset gg_trg_Sound_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Sound_Setup,function Trig_Sound_Setup_Actions)endfunctionfunction Trig_Poreload_Remove_Unit_Actions takes nothing returns nothing
call RemoveUnit(GetEnteringUnit())endfunctionfunction Trig_Preload_System_Actions takes nothing returns nothinglocal string array loading_msglocal integer ilocal integer j=0local integer mytype='h000'local real x=.0local real y=.0local player p=Player($D)local trigger t=CreateTrigger()local triggeraction trgActcall TriggerRegisterEnterRectSimple(t,gg_rct_Center)
set trgAct=TriggerAddAction(t,function Trig_Poreload_Remove_Unit_Actions)call CinematicModeBJ(true,bj_FORCE_ALL_PLAYERS)call CinematicFilterGenericBJ(.0,BLEND_MODE_BLEND,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",'d','d','d','d',0,0,0,0)set loading_msg[0]="|c00e31802P|r|c00e52611r|r|c00e73420e|r|c00e8412fl|r|c00ea4f3eo|r"set loading_msg[1]="|c00ec5c4da|r|c00ed6a5cd|r|c00ef786bi|r|c00f1857an|r|c00f29388g|r"set loading_msg[2]="|c00f6aea6 D|r|c00f7bcb5a|r|c00f9c9c4t|r|c00fbd7d3a|r|c00fce4e2.|r"set loading_msg[3]="|c00fef2f1.|r|c00ffffff.|r"call Force_Display(6.5,loading_msg[0]+loading_msg[1]+loading_msg[2]+loading_msg[3])set loading_msg[0]=nullset loading_msg[1]=nullset loading_msg[2]=nullset loading_msg[3]=nullcall TriggerSleepAction(.5)set j=0loop
call CreateUnit(p,udg_Creep_Lv1[j],x,y,bj_UNIT_FACING)set j=j+1exitwhen j>udg_Creep_MaxLv1endloopset j=0loop
call CreateUnit(p,udg_Creep_Lv2[j],x,y,bj_UNIT_FACING)set j=j+1exitwhen j>udg_Creep_MaxLv2endloopset j=0loop
call CreateUnit(p,udg_Creep_Lv3[j],x,y,bj_UNIT_FACING)set j=j+1exitwhen j>udg_Creep_MaxLv3endloopset j=0loop
call CreateUnit(p,udg_Creep_Lv4[j],x,y,bj_UNIT_FACING)set j=j+1exitwhen j>udg_Creep_MaxLv4endloopcall EnableWeatherEffect(udg_Weather_Map[0],true)call EnableWeatherEffect(udg_Weather_Map[0],false)call EnableWeatherEffect(udg_Weather_Map[0],true)call EnableWeatherEffect(udg_Weather_Map[0],false)call TriggerSleepAction(.01)
set j=0loop
set i=0loop
call CreateUnit(p,mytype,x,y,bj_UNIT_FACING)
set mytype=mytype+1set i=i+1exitwhen i>850endloopcall TriggerSleepAction(.0)set j=j+1exitwhen j>3
endloopcall TriggerSleepAction(1.)call DestroyTrigger(gg_trg_Preload_System)call TriggerRemoveAction(t,trgAct)call DestroyTrigger(t)set t=nullset trgAct=nullset p=nullendfunctionfunction InitTrig_Preload_System takes nothing returns nothingset gg_trg_Preload_System=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Preload_System,.5)call TriggerAddAction(gg_trg_Preload_System,function Trig_Preload_System_Actions)endfunctionfunction TreeAct takes nothing returns nothingcall TriggerRegisterDeathEvent(gg_trg_Restore_Tree,GetEnumDestructable())endfunctionfunction TreeTerAct takes nothing returns nothinglocal destructable d=GetEnumDestructable()local real x=GetDestructableX(d)
local real y=GetDestructableY(d)
call RemoveDestructable(d)call CreateDestructable(udg_TreeType,x,y,GetRandomReal(0,360),udg_TreeScale,0)set d=nullendfunctionfunction TerrainSys_Act takes nothing returns nothinglocal location array Ter_Loc
local rect array Ter_Rectlocal integer array Ter_Intlocal integer array Ter_Type
local integer array Ter_Cornerlocal integer array Ter_Tree
local integer Ter_Rand=2
local integer Loops=0if(Ter_Rand>-1)thenset Ter_Type[0]='Zsan'set Ter_Corner[0]='Zvin'
set Ter_Tree[0]='B001'set Ter_Type[1]='Fdro'set Ter_Corner[1]='Fgrs'
set Ter_Tree[1]='FTtw'set Ter_Type[2]='Ldrt'set Ter_Corner[2]='Lgrs'
set Ter_Tree[2]='LTlt'set Ter_Int[0]=0
set Ter_Int[1]=-1set Ter_Int[2]=2
set Ter_Int[3]=384if(Ter_Rand==0)thenset Ter_Loc[0]=GetUnitLoc(gg_unit_n003_0025)
call RemoveUnit(gg_unit_n003_0025)call CreateNUnitsAtLoc(1,'n01D',Player($F),Ter_Loc[0],bj_UNIT_FACING)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullendifset Ter_Rect[0]=Rect(-$E40,-$A40,$DC0,$620)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],21,1)
call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Rect[0]=Rect(-$BE0,928,-$AE0,$4A0)set Ter_Rect[1]=Rect(-$BE0,-672,-$AE0,-416)set Ter_Rect[2]=Rect(-$BE0,-$900,-$AE0,-$800)set Ter_Rect[3]=Rect($A60,864,$B60,$460)
set Ter_Rect[4]=Rect($A60,-640,$B60,-384)set Ter_Rect[5]=Rect($A60,-$8E0,$B60,-$7E0)loop
exitwhen Loops>5
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Type[Ter_Rand],Ter_Int[0],8,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Loops=0set Ter_Rect[0]=Rect(-288,-$E40,$C0,-$C40)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],5,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Rect[0]=Rect(-$F40,$8A0,-$D40,$A80)set Ter_Rect[1]=Rect(-$F40,$B40,-$D40,$D20)set Ter_Rect[2]=Rect($CC0,$8A0,$EC0,$A80)set Ter_Rect[3]=Rect($CC0,$B40,$EC0,$D20)loop
exitwhen Loops>3
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Type[Ter_Rand],Ter_Int[0],4,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Loops=0set Ter_Rect[0]=Rect(-6304,5376,-5664,6016)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],9,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Rect[0]=Rect(-5152,5376,-4512,6016)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],9,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Rect[0]=Rect(-4096,-6624,-$D80,-5984)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],$C,1)
call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Rect[0]=Rect(-$B40,-6624,-$8C0,-5984)set Ter_Loc[0]=GetRectCenter(Ter_Rect[0])call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call SetTerrainTypeBJ(Ter_Loc[0],Ter_Type[Ter_Rand],Ter_Int[0],$C,1)
call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Ter_Int[4]=-$B80
set Ter_Int[5]=-$A80
set Ter_Rect[0]=Rect(-$C20,$700,-$BA0,$7A0)set Ter_Rect[1]=Rect(Ter_Int[4],$6A0,Ter_Int[5],$7C0)set Loops=2loop
exitwhen Loops>6
set Ter_Rect[Loops]=Rect((Ter_Int[4]+((Loops-1)*Ter_Int[3])),$6A0,(Ter_Int[5]+((Loops-1)*Ter_Int[3])),$7C0)set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>6
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],3,0)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Loops=1loop
exitwhen Loops>6
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],Ter_Int[2],1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[4]=$A20set Ter_Int[5]=$B20set Ter_Rect[0]=Rect($B40,$720,$BC0,$7C0)set Ter_Rect[1]=Rect(Ter_Int[4],$6A0,Ter_Int[5],$7C0)set Loops=2loop
exitwhen Loops>6
set Ter_Rect[Loops]=Rect((Ter_Int[4]-((Loops-1)*Ter_Int[3])),$6A0,(Ter_Int[5]-((Loops-1)*Ter_Int[3])),$7C0)set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>6
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],3,0)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Loops=1loop
exitwhen Loops>6
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],Ter_Int[2],1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[4]=$AE0set Ter_Int[5]=$BE0set Ter_Rect[0]=Rect($B60,-$BA0,$BE0,-$B00)set Ter_Rect[1]=Rect(Ter_Int[4],-$B80,Ter_Int[5],-$A60)set Loops=2loop
exitwhen Loops>7
set Ter_Rect[Loops]=Rect((Ter_Int[4]-((Loops-1)*Ter_Int[3])),-$B80,(Ter_Int[5]-((Loops-1)*Ter_Int[3])),-$A60)set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>7
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],3,0)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Loops=1loop
exitwhen Loops>7
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],Ter_Int[2],1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[4]=-$C60
set Ter_Int[5]=-$B60
set Ter_Rect[0]=Rect(-$D00,-$C00,-$C80,-$B60)set Ter_Rect[1]=Rect(Ter_Int[4],-$B80,Ter_Int[5],-$A60)set Loops=2loop
exitwhen Loops>7
set Ter_Rect[Loops]=Rect((Ter_Int[4]+((Loops-1)*Ter_Int[3])),-$B80,(Ter_Int[5]+((Loops-1)*Ter_Int[3])),-$A60)set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>7
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],3,0)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullset Loops=1loop
exitwhen Loops>7
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],Ter_Int[2],1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[3]=300set Ter_Int[4]=-$820
set Ter_Int[5]=-$700
set Ter_Rect[0]=Rect(-$F40,-$8C0,-$EC0,-$840)set Ter_Rect[1]=Rect(-$F60,Ter_Int[4],-$E60,Ter_Int[5])set Loops=2loop
exitwhen Loops>3
set Ter_Rect[Loops]=Rect(-$F60,(Ter_Int[4]+((Loops-1)*Ter_Int[3])),-$E60,(Ter_Int[5]+((Loops-1)*Ter_Int[3])))set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>3
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType(-$E60,-$79E,Ter_Corner[Ter_Rand],Ter_Int[0],2,0)
call SetTerrainType(GetLocationX(Ter_Loc[1]),GetLocationY(Ter_Loc[1])+'d',Ter_Corner[Ter_Rand],Ter_Int[0],3,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullcall RemoveLocation(Ter_Loc[1])set Ter_Loc[1]=nullset Loops=2loop
exitwhen Loops>3
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],3,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[4]=$480set Ter_Int[5]=$5A0set Ter_Rect[0]=Rect(-$F40,$580,-$EC0,$600)set Ter_Rect[1]=Rect(-$F60,Ter_Int[4],-$E60,Ter_Int[5])set Loops=2loop
exitwhen Loops>4
set Ter_Rect[Loops]=Rect(-$F60,(Ter_Int[4]-((Loops-1)*Ter_Int[3])),-$E60,(Ter_Int[5]-((Loops-1)*Ter_Int[3])))set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>4
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType(-$E88,$53C,Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType(GetLocationX(Ter_Loc[1]),GetLocationY(Ter_Loc[1])-'d',Ter_Corner[Ter_Rand],Ter_Int[0],3,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullcall RemoveLocation(Ter_Loc[1])set Ter_Loc[1]=nullset Loops=2loop
exitwhen Loops>4
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],3,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[3]=$FAset Ter_Int[4]=-$884
set Ter_Int[5]=-$764
set Ter_Rect[0]=Rect($E20,-$940,$EA0,-$8C0)set Ter_Rect[1]=Rect($DC0,Ter_Int[4],$EC0,Ter_Int[5])set Loops=2loop
exitwhen Loops>4
set Ter_Rect[Loops]=Rect($DC0,(Ter_Int[4]+((Loops-1)*Ter_Int[3])),$EC0,(Ter_Int[5]+((Loops-1)*Ter_Int[3])))set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>4
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainType($DFC,-$85C,Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType(GetLocationX(Ter_Loc[1]),GetLocationY(Ter_Loc[1])+'d',Ter_Corner[Ter_Rand],Ter_Int[0],3,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullcall RemoveLocation(Ter_Loc[1])set Ter_Loc[1]=nullset Loops=2loop
exitwhen Loops>4
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],3,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset Ter_Int[3]=300set Ter_Int[4]=$480set Ter_Int[5]=$5A0set Ter_Rect[0]=Rect($E20,$5A0,$EA0,$620)set Ter_Rect[1]=Rect($DC0,Ter_Int[4],$EC0,Ter_Int[5])set Loops=2loop
exitwhen Loops>4
set Ter_Rect[Loops]=Rect($DC0,(Ter_Int[4]-((Loops-1)*Ter_Int[3])),$EC0,(Ter_Int[5]-((Loops-1)*Ter_Int[3])))set Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>4
set Ter_Loc[Loops]=GetRectCenter(Ter_Rect[Loops])call RemoveRect(Ter_Rect[Loops])
set Ter_Rect[Loops]=null
set Loops=Loops+1endloopcall SetTerrainTypeBJ(Ter_Loc[0],Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType($E1F,$4E2,Ter_Corner[Ter_Rand],Ter_Int[0],2,0)call SetTerrainType(GetLocationX(Ter_Loc[1]),GetLocationY(Ter_Loc[1])-'d',Ter_Corner[Ter_Rand],Ter_Int[0],3,1)call RemoveLocation(Ter_Loc[0])set Ter_Loc[0]=nullcall RemoveLocation(Ter_Loc[1])set Ter_Loc[1]=nullset Loops=2loop
exitwhen Loops>4
call SetTerrainTypeBJ(Ter_Loc[Loops],Ter_Corner[Ter_Rand],Ter_Int[1],3,1)call RemoveLocation(Ter_Loc[Loops])set Ter_Loc[Loops]=nullset Loops=Loops+1endloopset udg_TreeType=Ter_Tree[Ter_Rand]set udg_TreeScale=1.
else
set udg_TreeType='B003'set udg_TreeScale=.6
endifset Ter_Rect[0]=GetWorldBounds()
call EnumDestructablesInRectAll(Ter_Rect[0],function TreeTerAct)
call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call TriggerSleepAction(.01)
set Ter_Rect[0]=GetWorldBounds()
call EnumDestructablesInRectAll(Ter_Rect[0],function TreeAct)call RemoveRect(Ter_Rect[0])
set Ter_Rect[0]=null
call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Terrain_Set takes nothing returns nothingset gg_trg_Terrain_Set=CreateTrigger()call TriggerAddAction(gg_trg_Terrain_Set,function TerrainSys_Act)endfunctionfunction Trig_Restore_Tree_Actions takes nothing returns nothing
local destructable Tree=GetDyingDestructable()call TriggerSleepAction(60.)
call DestructableRestoreLife(Tree,GetDestructableMaxLife(Tree),true)
set Tree=nullendfunctionfunction InitTrig_Restore_Tree takes nothing returns nothing
set gg_trg_Restore_Tree=CreateTrigger()call TriggerAddAction(gg_trg_Restore_Tree,function Trig_Restore_Tree_Actions)endfunctionfunction Trig_VisionStart1_Actions takes nothing returns nothing
local rect array Rec
local integer Loops=0local real array xyset Rec[0]=Rect(2400.,-7488.,4640.,-5600.)set Rec[1]=Rect(-7040.,4640.,-3808.,6816.)set Rec[2]=Rect(-5184.,-7680.,-1184.,-4768.)
set Rec[3]=Rect(-6816.,-1600.,-5216.,1056.)set Rec[4]=Rect(5088.,-1600.,6688.,1056.)set Rec[5]=gg_rct_HeroSelectionset xy[0]=GetRectCenterX(Rec[5])
set xy[1]=GetRectCenterY(Rec[5])
set xy[0]=PolarX(xy[0],100.,270.)set xy[1]=PolarY(xy[1],100.,270.)loop
call PanCameraToTimedXYForPlayer(Player(Loops),xy[0],xy[1],0)set Loops=Loops+1exitwhen Loops>$Bendloopcall TriggerSleepAction(.5)set Loops=0loop
if(GetPlayerSlotState(Player(Loops))==PLAYER_SLOT_STATE_PLAYING)then
call SetPlayerStateBJ(Player(Loops),PLAYER_STATE_RESOURCE_GOLD,$5DC)
call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec[1])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec[1])set udg_Vision_Duel1[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec[1])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec[2])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec[2])set udg_Vision_Duel2[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec[2])if(GetPlayerRace(Player(Loops))==RACE_HUMAN)then
call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec[3])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec[3])set udg_Vision_Home[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec[3])
elseif(GetPlayerRace(Player(Loops))==RACE_NIGHTELF)thencall CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec[4])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec[4])set udg_Vision_Home[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec[4])
endifcall CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec[0])call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec[0])call CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec[0])endifset Loops=Loops+1exitwhen Loops>$Bendloopset Loops=0loop
exitwhen Loops>4
call RemoveRect(Rec[Loops])set Rec[Loops]=nullset Loops=Loops+1endloopset Loops=0call DestroyTrigger(GetTriggeringTrigger())call TriggerSleepAction(.01)
call TriggerExecute(gg_trg_VisionStart2)
endfunctionfunction InitTrig_VisionStart1 takes nothing returns nothing
set gg_trg_VisionStart1=CreateTrigger()call TriggerAddAction(gg_trg_VisionStart1,function Trig_VisionStart1_Actions)endfunctionfunction VisionStart2_Act takes nothing returns nothinglocal rect Rec1=Rect(-3968.,-$BE0,3840.,2048.)local rect R_Golem=Rect(-$6E0,$F00,$6A0,6048)local integer Loops=0loop
exitwhen Loops>$Bif(GetPlayerSlotState(Player(Loops))==PLAYER_SLOT_STATE_PLAYING)then
call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,R_Golem)call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,R_Golem)set udg_Vision_Golem[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,R_Golem)call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,gg_rct_BossLeft)call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,gg_rct_BossLeft)set udg_Vision_BossLeft[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,gg_rct_BossLeft)call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,gg_rct_BossRight)
call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,gg_rct_BossRight)
set udg_Vision_BossRight[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,gg_rct_BossRight)call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_MASKED,Rec1)
call CreateFogModifierRectBJ(false,Player(Loops),FOG_OF_WAR_FOGGED,Rec1)
set udg_Vision_Center[Loops]=CreateFogModifierRectBJ(true,Player(Loops),FOG_OF_WAR_VISIBLE,Rec1)
endifset Loops=Loops+1endloopcall RemoveRect(Rec1)set Rec1=nullcall RemoveRect(R_Golem)
set R_Golem=null
set Loops=0call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_VisionStart2 takes nothing returns nothing
set gg_trg_VisionStart2=CreateTrigger()call TriggerAddAction(gg_trg_VisionStart2,function VisionStart2_Act)
endfunctionfunction Trig_Board_Actions takes nothing returns nothingcall TriggerSleepAction(.01)
call CreateMultiboardBJ(6,22,udg_MapName)set udg_Board=bj_lastCreatedMultiboardcall MultiboardMinimize(udg_Board,true)call MultiboardSetItemValueBJ(udg_Board,3,1,"K")call MultiboardSetItemValueBJ(udg_Board,4,1,"D")call MultiboardSetItemValueBJ(udg_Board,5,1,"LV")call MultiboardSetItemIconBJ(udg_Board,6,1,"ReplaceableTextures\\CommandButtons\\BTNChestOfGold.blp")call TriggerSleepAction(.01)
set udg_Board_Int[0]=1loop
exitwhen udg_Board_Int[0]>22
call MultiboardSetItemWidthBJ(udg_Board,1,udg_Board_Int[0],1.2)call MultiboardSetItemWidthBJ(udg_Board,2,udg_Board_Int[0],7.5)call MultiboardSetItemWidthBJ(udg_Board,3,udg_Board_Int[0],2.5)call MultiboardSetItemWidthBJ(udg_Board,4,udg_Board_Int[0],2.5)call MultiboardSetItemWidthBJ(udg_Board,5,udg_Board_Int[0],2.5)call MultiboardSetItemWidthBJ(udg_Board,6,udg_Board_Int[0],3.)set udg_Board_Int[1]=1loop
exitwhen udg_Board_Int[1]>6call MultiboardSetItemStyleBJ(udg_Board,udg_Board_Int[1],udg_Board_Int[0],true,false)set udg_Board_Int[1]=udg_Board_Int[1]+1endloopset udg_Board_Int[0]=udg_Board_Int[0]+1endloopset udg_Board_Int[0]=0set udg_Board_Int[1]=0call TriggerSleepAction(.01)
call MultiboardSetItemStyleBJ(udg_Board,6,1,false,true)call MultiboardSetItemWidthBJ(udg_Board,1,2,4.)call MultiboardSetItemWidthBJ(udg_Board,1,$A,4.)
call MultiboardSetItemWidthBJ(udg_Board,1,18,15.)call MultiboardSetItemWidthBJ(udg_Board,1,19,15.)call MultiboardSetItemWidthBJ(udg_Board,1,20,15.)call MultiboardSetItemWidthBJ(udg_Board,1,21,15.)call MultiboardSetItemWidthBJ(udg_Board,1,22,15.)call MultiboardSetItemValueBJ(udg_Board,1,2,"Team 1")call MultiboardSetItemValueBJ(udg_Board,1,$A,"Team 2")
call MultiboardSetItemValueBJ(udg_Board,1,18,("Win = "+("|c0000FFFF"+(I2S(udg_Game_Score)+("|r Team Score")))))call MultiboardSetItemValueBJ(udg_Board,1,19,("Team 1 Score = "+("|c00DD0000"+(I2S(udg_Score_Team1)+"|r"))))
call MultiboardSetItemValueBJ(udg_Board,1,20,("Team 2 Score = "+("|c0000FF00"+(I2S(udg_Score_Team2)+"|r"))))
call MultiboardSetItemValueBJ(udg_Board,1,21,"Game Mode = |c0097FFFFNormal Mode|r")
call MultiboardSetItemValueBJ(udg_Board,1,22,"Game Time  = 0:0:0")
call TriggerSleepAction(.1)set udg_Board_Int[0]=0loop
exitwhen udg_Board_Int[0]>5set udg_Board_Int[1]=(3+udg_Board_Int[0])if(GetPlayerSlotState(Player(udg_Board_Int[0]))==PLAYER_SLOT_STATE_PLAYING)thencall MultiboardSetItemIconBJ(udg_Board,1,udg_Board_Int[1],"ReplaceableTextures\\CommandButtons\\BTNSelectHeroOff.blp")call MultiboardSetItemStyleBJ(udg_Board,1,udg_Board_Int[1],false,true)call MultiboardSetItemValueBJ(udg_Board,2,udg_Board_Int[1],(udg_Player_Color[(udg_Board_Int[0])]+(GetPlayerName(Player(udg_Board_Int[0]))+"|r")))call MultiboardSetItemValueBJ(udg_Board,3,udg_Board_Int[1],"0")call MultiboardSetItemValueBJ(udg_Board,4,udg_Board_Int[1],"0")call MultiboardSetItemValueBJ(udg_Board,5,udg_Board_Int[1],"1")else
set udg_Board_Int[2]=1loop
exitwhen udg_Board_Int[2]>7call MultiboardSetItemStyleBJ(udg_Board,udg_Board_Int[2],udg_Board_Int[1],false,false)set udg_Board_Int[2]=udg_Board_Int[2]+1endloopendifset udg_Board_Int[0]=udg_Board_Int[0]+1endloopset udg_Board_Int[0]=6loop
exitwhen udg_Board_Int[0]>$B
set udg_Board_Int[1]=(5+udg_Board_Int[0])if(GetPlayerSlotState(Player(udg_Board_Int[0]))==PLAYER_SLOT_STATE_PLAYING)thencall MultiboardSetItemIconBJ(udg_Board,1,udg_Board_Int[1],"ReplaceableTextures\\CommandButtons\\BTNSelectHeroOff.blp")call MultiboardSetItemValueBJ(udg_Board,2,udg_Board_Int[1],(udg_Player_Color[(udg_Board_Int[0])]+(GetPlayerName(Player(udg_Board_Int[0]))+"|r")))call MultiboardSetItemStyleBJ(udg_Board,1,udg_Board_Int[1],false,true)call MultiboardSetItemValueBJ(udg_Board,3,udg_Board_Int[1],"0")call MultiboardSetItemValueBJ(udg_Board,4,udg_Board_Int[1],"0")call MultiboardSetItemValueBJ(udg_Board,5,udg_Board_Int[1],"1")else
set udg_Board_Int[2]=1loop
exitwhen udg_Board_Int[2]>7call MultiboardSetItemStyleBJ(udg_Board,udg_Board_Int[2],udg_Board_Int[1],false,false)set udg_Board_Int[2]=udg_Board_Int[2]+1endloopendifset udg_Board_Int[0]=udg_Board_Int[0]+1endloopset udg_Board_Int[0]=0set udg_Board_Int[1]=0set udg_Board_Int[2]=0call TriggerSleepAction(.1)call StartTimerBJ(udg_Game_Timer,true,1.)call EnableTrigger(gg_trg_Board_Update)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Board takes nothing returns nothingset gg_trg_Board=CreateTrigger()
call TriggerAddAction(gg_trg_Board,function Trig_Board_Actions)endfunctionfunction Trig_Board_Update_Func002Func006Func001Func003C takes nothing returns booleanreturn(GetItemTypeId(GetEnumItem())=='I05R')or(GetItemTypeId(GetEnumItem())=='I05S')or(GetItemTypeId(GetEnumItem())=='I05T')or(GetItemTypeId(GetEnumItem())=='I05U')
endfunctionfunction Trig_Board_Update_Func002Func006Func001C takes nothing returns booleanreturn(Trig_Board_Update_Func002Func006Func001Func003C())endfunctionfunction Trig_Board_Update_Func002Func006A takes nothing returns nothing
if(Trig_Board_Update_Func002Func006Func001C())thencall RemoveItem(GetEnumItem())endifendfunctionfunction Trig_Board_Update_Func002Func013Func001Func001C takes nothing returns booleanreturn(udg_Rune_Rand==3)
endfunctionfunction Trig_Board_Update_Func002Func013Func001C takes nothing returns booleanreturn(udg_Rune_Rand==2)
endfunctionfunction Trig_Board_Update_Func002Func013C takes nothing returns boolean
return(udg_Rune_Rand==1)
endfunctionfunction Trig_Board_Update_Func002C takes nothing returns booleanreturn(udg_Board_Time[0]==60)endfunctionfunction Trig_Board_Update_Func003C takes nothing returns booleanreturn(udg_Board_Time[1]==60)endfunctionfunction Trig_Board_Update_Actions takes nothing returns nothing
set udg_Board_Time[0]=(udg_Board_Time[0]+1)if(Trig_Board_Update_Func002C())then
set udg_Board_Time[0]=0set udg_Board_Time[1]=(udg_Board_Time[1]+1)set udg_Rune_Rand=GetRandomInt(1,6)set udg_Rune_Rect=Rect(-160.,2816.,96.,3072.)call EnumItemsInRectBJ(udg_Rune_Rect,function Trig_Board_Update_Func002Func006A)
set udg_Rune_Loc=GetRectCenter(udg_Rune_Rect)call RemoveRect(udg_Rune_Rect)set udg_Rune_Rect=nullcall CreateNUnitsAtLoc(1,'h02A',Player($C),udg_Rune_Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.5,'BTLF',bj_lastCreatedUnit)
call SetUnitScalePercent(bj_lastCreatedUnit,200.,200.,200.)if(Trig_Board_Update_Func002Func013C())thencall CreateItemLoc('I05R',udg_Rune_Loc)else
if(Trig_Board_Update_Func002Func013Func001C())thencall CreateItemLoc('I05S',udg_Rune_Loc)else
if(Trig_Board_Update_Func002Func013Func001Func001C())thencall CreateItemLoc('I05T',udg_Rune_Loc)else
call CreateItemLoc('I05U',udg_Rune_Loc)endifendifendifcall RemoveLocation(udg_Rune_Loc)set udg_Rune_Loc=nullendifif(Trig_Board_Update_Func003C())then
set udg_Board_Time[1]=0set udg_Board_Time[2]=(udg_Board_Time[2]+1)endifcall MultiboardSetItemValueBJ(udg_Board,1,22,("Game Time = "+(I2S(udg_Board_Time[2])+(":"+(I2S(udg_Board_Time[1])+(":"+I2S(udg_Board_Time[0])))))))call AddGold()call MultiboardSetItemValueBJ(udg_Board,6,3,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(0),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,4,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(1),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,5,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(2),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,6,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(3),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,7,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(4),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,8,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(5),PLAYER_STATE_RESOURCE_GOLD))+"|r")))
call MultiboardSetItemValueBJ(udg_Board,6,$B,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(6),PLAYER_STATE_RESOURCE_GOLD))+"|r")))call MultiboardSetItemValueBJ(udg_Board,6,$C,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(7),PLAYER_STATE_RESOURCE_GOLD))+"|r")))call MultiboardSetItemValueBJ(udg_Board,6,$D,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(8),PLAYER_STATE_RESOURCE_GOLD))+"|r")))call MultiboardSetItemValueBJ(udg_Board,6,$E,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player(9),PLAYER_STATE_RESOURCE_GOLD))+"|r")))call MultiboardSetItemValueBJ(udg_Board,6,$F,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player($A),PLAYER_STATE_RESOURCE_GOLD))+"|r")))call MultiboardSetItemValueBJ(udg_Board,6,16,(udg_Player_Color[$C]+(I2S(GetPlayerState(Player($B),PLAYER_STATE_RESOURCE_GOLD))+"|r")))endfunctionfunction InitTrig_Board_Update takes nothing returns nothing
set gg_trg_Board_Update=CreateTrigger()call DisableTrigger(gg_trg_Board_Update)
call TriggerRegisterTimerExpireEvent(gg_trg_Board_Update,udg_Game_Timer)
call TriggerAddAction(gg_trg_Board_Update,function Trig_Board_Update_Actions)endfunctionfunction Trig_Mode_On_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call Dynamic_Sound("Sound\\Interface\\SecretFound.wav")call TriggerSleepAction(.01)
call TriggerExecute(gg_trg_Mode_Checker)
endfunctionfunction InitTrig_Mode_On takes nothing returns nothinglocal player p=Player(0)
set gg_trg_Mode_On=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ar",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ar",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ne",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ne",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-bh",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"bh",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-fh",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"fh",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-sc",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"sc",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ds",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ds",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-max",true)call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"max",false)call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-e1",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"e1",false)
call TriggerAddAction(gg_trg_Mode_On,function Trig_Mode_On_Actions)set p=nullendfunctionfunction Trig_GameModeSys_Actions takes nothing returns nothinglocal boolean array GameMode
local string array GameModeStringlocal string array GameModeSubString
local integer Loops=0local string DummyGameMode=""local string DummySubMode=""
local integer MaxModeset udg_Game_Mode=trueset MaxMode=7set GameModeString[0]="|c0097FFFFAll Random|r"set GameModeString[1]="|c0097FFFFNo Event|r"
set GameModeString[2]="|c0097FFFFBounty Hunter|r"set GameModeString[3]="|c0097FFFFFast Hunt|r"set GameModeString[4]="|c0097FFFFSuper Creep|r"set GameModeString[5]="|c0097FFFFDouble Score|r"
set GameModeString[6]="|c0097FFFFMaximum Score|r"set GameModeString[7]="|c0097FFFFEvent 1v1|r"set GameModeSubString[0]="|c0097FFFFar|r"set GameModeSubString[1]="|c0097FFFFne|r"set GameModeSubString[2]="|c0097FFFFbh|r"set GameModeSubString[3]="|c0097FFFFfh|r"set GameModeSubString[4]="|c0097FFFFsc|r"set GameModeSubString[5]="|c0097FFFFds|r"set GameModeSubString[6]="|c0097FFFFmax|r"set GameModeSubString[7]="|c0097FFFFe1|r"set GameMode[0]=udg_GameModeArset GameMode[1]=udg_GameModeNeset GameMode[2]=udg_GameModeBhset GameMode[3]=udg_GameModeFhset GameMode[4]=udg_GameModeScset GameMode[5]=udg_GameModeDsset GameMode[6]=udg_GameModeMaxset GameMode[7]=udg_GameModeE1loop
exitwhen Loops>MaxModeif(GameMode[Loops])thenset DummyGameMode=(DummyGameMode+"/ "+GameModeString[Loops])
set DummySubMode=(DummySubMode+GameModeSubString[Loops])
endifset Loops=Loops+1endloopset Loops=0loop
exitwhen Loops>MaxModeset GameModeString[Loops]=nullset GameModeSubString[Loops]=nullset GameMode[Loops]=falseset Loops=Loops+1endloopset Loops=0set DummyGameMode=SubStringBJ(DummyGameMode,3,StringLength(DummyGameMode))call Force_Display(udg_Display_Time,("|c00FF0000"+(GetPlayerName(Player(0))+("|r"+" has selected "+DummyGameMode))))
call MultiboardSetItemValueBJ(udg_Board,1,21,"Game Mode = -"+DummySubMode)set DummyGameMode=nullset DummySubMode=nullcall DisableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Mode_Checker takes nothing returns nothing
set gg_trg_Mode_Checker=CreateTrigger()call TriggerAddAction(gg_trg_Mode_Checker,function Trig_GameModeSys_Actions)
endfunctionfunction Trig_All_Random_Cond takes nothing returns booleanreturn(udg_Game_Mode==false)
endfunctionfunction Trig_All_Random_Actions takes nothing returns nothinglocal integer Loop=0
call DisableTrigger(GetTriggeringTrigger())set udg_GameModeAr=trueloop
call Player_HideUnit(udg_Player_DummyType[Loop])
set Loop=Loop+1exitwhen Loop>udg_Player_MaxHeroesendloopset Loop=0endfunctionfunction InitTrig_All_Random takes nothing returns nothingset gg_trg_All_Random=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_All_Random,Player(0),"-ar",true)call TriggerRegisterPlayerChatEvent(gg_trg_All_Random,Player(0),"ar",false)call TriggerAddCondition(gg_trg_All_Random,Condition(function Trig_All_Random_Cond))
call TriggerAddAction(gg_trg_All_Random,function Trig_All_Random_Actions)endfunctionfunction Trig_No_Event_Conditions takes nothing returns booleanreturn(udg_Game_Mode==false)
endfunctionfunction Trig_No_Event_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())set udg_GameModeNe=trueendfunctionfunction InitTrig_No_Event takes nothing returns nothing
set gg_trg_No_Event=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_No_Event,Player(0),"-ne",true)call TriggerRegisterPlayerChatEvent(gg_trg_No_Event,Player(0),"ne",false)call TriggerAddCondition(gg_trg_No_Event,Condition(function Trig_No_Event_Conditions))call TriggerAddAction(gg_trg_No_Event,function Trig_No_Event_Actions)endfunctionfunction Trig_BountyHunter_Conditions takes nothing returns booleanreturn(udg_Game_Mode==false)
endfunctionfunction Trig_BountyHunter_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())set udg_GameModeBh=truecall EnableTrigger(gg_trg_BountyHunterSet)endfunctionfunction InitTrig_BountyHunter takes nothing returns nothing
set gg_trg_BountyHunter=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunter,Player(0),"-bh",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunter,Player(0),"bh",false)call TriggerAddCondition(gg_trg_BountyHunter,Condition(function Trig_BountyHunter_Conditions))call TriggerAddAction(gg_trg_BountyHunter,function Trig_BountyHunter_Actions)endfunctionfunction Trig_BountyHunterSet_Conditions takes nothing returns booleanreturn((IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetKillingUnit(),UNIT_TYPE_HERO))and(GetPlayerSlotState(GetOwningPlayer(GetKillingUnit()))==PLAYER_SLOT_STATE_PLAYING))!=nullendfunctionfunction Trig_BountyHunterSet_Actions takes nothing returns nothingset udg_Bounty_Hero=GetKillingUnit()
set udg_Bounty_Color=udg_Player_Color[((1+GetPlayerId(GetOwningPlayer(udg_Bounty_Hero)))-1)]
set udg_Bounty_Eff=AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",udg_Bounty_Hero,"overhead")
set udg_Bounty_Bonus=($C8+(50*GetHeroLevel(udg_Bounty_Hero)))set udg_Bounty_Medal=1set udg_GameModeBh=false
call Force_Display(udg_Display_Time,("The Wanted Hero "+udg_Bounty_Color+GetUnitName(udg_Bounty_Hero)+"|r bounty is |c00FFD700"+I2S(udg_Bounty_Bonus)+"|r gold and |c0000FFFF"+I2S(udg_Bounty_Medal)+"|r medal"))call EnableTrigger(gg_trg_BountyHunterRun)call EnableTrigger(gg_trg_BountyHunterCheck)
call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_BountyHunterSet takes nothing returns nothingset gg_trg_BountyHunterSet=CreateTrigger()call DisableTrigger(gg_trg_BountyHunterSet)call TriggerRegisterAnyUnitEventBJ(gg_trg_BountyHunterSet,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_BountyHunterSet,Condition(function Trig_BountyHunterSet_Conditions))
call TriggerAddAction(gg_trg_BountyHunterSet,function Trig_BountyHunterSet_Actions)endfunctionfunction Trig_BountyHunterRun_Conditions takes nothing returns booleanreturn((IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO))and(IsUnitType(GetKillingUnit(),UNIT_TYPE_HERO)))!=nullendfunctionfunction Trig_BountyHunterRun_Func003Func003C takes nothing returns booleanreturn(GetDyingUnit()==udg_Bounty_Hero)endfunctionfunction Trig_BountyHunterRun_Func003C takes nothing returns boolean
return(GetKillingUnit()==udg_Bounty_Hero)endfunctionfunction Trig_BountyHunterRun_Actions takes nothing returns nothingif(Trig_BountyHunterRun_Func003C())thenset udg_Bounty_Bonus=(udg_Bounty_Bonus+$FA)set udg_Bounty_Medal=(udg_Bounty_Medal+1)else
if(Trig_BountyHunterRun_Func003Func003C())thencall DestroyEffect(udg_Bounty_Eff)set udg_Bounty_Eff=nullset udg_Bounty_Hero=null
set udg_Bounty_Hero=GetKillingUnit()
set udg_Bounty_Eff=AddSpecialEffectTarget("Abilities\\Spells\\Human\\InnerFire\\InnerFireTarget.mdl",udg_Bounty_Hero,"overhead")
set udg_Bounty_Bonus=($C8+(50*GetHeroLevel(udg_Bounty_Hero)))set udg_Bounty_Medal=1set udg_Bounty_Color=udg_Player_Color[((1+GetPlayerId(GetOwningPlayer(udg_Bounty_Hero)))-1)]
call Force_Display(udg_Display_Time,("The Wanted Hero "+udg_Bounty_Color+GetUnitName(udg_Bounty_Hero)+"|r bounty is |c00FFD700"+I2S(udg_Bounty_Bonus)+"|r gold and |c0000FFFF"+I2S(udg_Bounty_Medal)+"|r medal"))endifendifendfunctionfunction InitTrig_BountyHunterRun takes nothing returns nothingset gg_trg_BountyHunterRun=CreateTrigger()call DisableTrigger(gg_trg_BountyHunterRun)call TriggerRegisterAnyUnitEventBJ(gg_trg_BountyHunterRun,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_BountyHunterRun,Condition(function Trig_BountyHunterRun_Conditions))
call TriggerAddAction(gg_trg_BountyHunterRun,function Trig_BountyHunterRun_Actions)endfunctionfunction Trig_BountyHunterCheck_Actions takes nothing returns nothingcall Force_Display(udg_Display_Time,("The Wanted Hero "+udg_Bounty_Color+GetUnitName(udg_Bounty_Hero)+"|r bounty is |c00FFD700"+I2S(udg_Bounty_Bonus)+"|r gold and |c0000FFFF"+I2S(udg_Bounty_Medal)+"|r medal"))endfunctionfunction InitTrig_BountyHunterCheck takes nothing returns nothingset gg_trg_BountyHunterCheck=CreateTrigger()
call DisableTrigger(gg_trg_BountyHunterCheck)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(0),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(1),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(2),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(3),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(4),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(5),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(6),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(7),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(8),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(9),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player($A),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player($B),"-b",true)call TriggerAddAction(gg_trg_BountyHunterCheck,function Trig_BountyHunterCheck_Actions)endfunctionfunction Trig_Fast_Hunt_Conditions takes nothing returns boolean
return(udg_Game_Mode==false)
endfunctionfunction Trig_Fast_Hunt_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_GameModeFh=trueset udg_Creep_SpawnDelay=25.
endfunctionfunction InitTrig_Fast_Hunt takes nothing returns nothingset gg_trg_Fast_Hunt=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Fast_Hunt,Player(0),"-fh",true)call TriggerRegisterPlayerChatEvent(gg_trg_Fast_Hunt,Player(0),"fh",false)call TriggerAddCondition(gg_trg_Fast_Hunt,Condition(function Trig_Fast_Hunt_Conditions))
call TriggerAddAction(gg_trg_Fast_Hunt,function Trig_Fast_Hunt_Actions)endfunctionfunction Trig_SuperCreep_Conditions takes nothing returns booleanreturn(udg_Game_Mode==false)
endfunctionfunction Trig_SuperCreep_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_GameModeSc=trueendfunctionfunction InitTrig_SuperCreep takes nothing returns nothingset gg_trg_SuperCreep=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_SuperCreep,Player(0),"-sc",true)call TriggerRegisterPlayerChatEvent(gg_trg_SuperCreep,Player(0),"sc",false)call TriggerAddCondition(gg_trg_SuperCreep,Condition(function Trig_SuperCreep_Conditions))call TriggerAddAction(gg_trg_SuperCreep,function Trig_SuperCreep_Actions)endfunctionfunction FocSc_Cond takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunctionfunction Trig_ScSpawn_Actions takes nothing returns nothinglocal integer Rand=GetRandomInt(0,4)
local force Foc=GetPlayersMatching(Condition(function FocSc_Cond))local rect Rec=Rect(-$9E0,-$6A0,$920,832)local location Random_Rect=GetRandomLocInRect(Rec)call RemoveRect(Rec)
set Rec=null
call CreateNUnitsAtLoc(1,'h004',Player($C),Random_Rect,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)if(Rand==0)thencall CreateNUnitsAtLoc(1,'n00U',Player($C),Random_Rect,bj_UNIT_FACING)elseif(Rand==1)thencall CreateNUnitsAtLoc(1,'n017',Player($C),Random_Rect,bj_UNIT_FACING)elseif(Rand==2)thencall CreateNUnitsAtLoc(1,'n018',Player($C),Random_Rect,bj_UNIT_FACING)elseif(Rand==3)thencall CreateNUnitsAtLoc(1,'n019',Player($C),Random_Rect,bj_UNIT_FACING)else
call CreateNUnitsAtLoc(1,'n01A',Player($C),Random_Rect,bj_UNIT_FACING)endifcall Dynamic_Sound("Sound\\Interface\\MapPing")call PingMinimapLocForForceEx(Foc,Random_Rect,3.,1,'d','d','d')call RemoveLocation(Random_Rect)
set Random_Rect=null
call DestroyForce(Foc)set Foc=null
set Rand=0endfunctionfunction InitTrig_ScSpawn takes nothing returns nothingset gg_trg_ScSpawn=CreateTrigger()call DisableTrigger(gg_trg_ScSpawn)call TriggerRegisterTimerExpireEvent(gg_trg_ScSpawn,udg_Timer_SuperCreeps)call TriggerAddAction(gg_trg_ScSpawn,function Trig_ScSpawn_Actions)endfunctionfunction FocSc2_Cond takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunctionfunction ScDie_Act takes nothing returns nothing
local force Foc=GetPlayersMatching(Condition(function FocSc2_Cond))local integer StartLoops
local integer EndLoopscall StartTimerBJ(udg_Timer_SuperCreeps,false,300.)call Dynamic_Sound("Sound\\Interface\\QuestLog.wav")
if(GetPlayerRace(GetOwningPlayer(GetKillingUnit()))==RACE_HUMAN)then
call DisplayTimedTextToForce(Foc,10.,"|c00B22222"+(GetUnitName(GetDyingUnit())+"|r (level 30)  has been slain by |c00EE0000Team 1|r (+1000 gold each Player) !"))set StartLoops=0
set EndLoops=5else
call DisplayTimedTextToForce(Foc,10.,"|c00B22222"+(GetUnitName(GetDyingUnit())+"|r (level 30)  has been slain by |c001E90FFTeam 2|r (+1000 gold each Player) !"))set StartLoops=6
set EndLoops=$Bendifcall DestroyForce(Foc)set Foc=null
loop
exitwhen StartLoops>EndLoops
call AdjustPlayerStateBJ($3E8,Player(StartLoops),PLAYER_STATE_RESOURCE_GOLD)
set StartLoops=StartLoops+1endloopset StartLoops=0
set EndLoops=0endfunctionfunction ScDie_Cond takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('A04U',GetDyingUnit())==1)
endfunctionfunction InitTrig_ScDie takes nothing returns nothingset gg_trg_ScDie=CreateTrigger()
call DisableTrigger(gg_trg_ScDie)call TriggerRegisterAnyUnitEventBJ(gg_trg_ScDie,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_ScDie,Condition(function ScDie_Cond))call TriggerAddAction(gg_trg_ScDie,function ScDie_Act)endfunctionfunction Trig_DoubleScore_Conditions takes nothing returns booleanreturn(udg_Game_Mode==false)
endfunctionfunction Trig_DoubleScore_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_GameModeDs=trueset udg_Game_Score=(udg_Game_Score*2)call MultiboardSetItemValueBJ(udg_Board,1,18,("Win = "+("|c0000FFFF"+(I2S(udg_Game_Score)+("|r Team Score")))))endfunctionfunction InitTrig_DoubleScore takes nothing returns nothingset gg_trg_DoubleScore=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_DoubleScore,Player(0),"-ds",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DoubleScore,Player(0),"ds",false)
call TriggerAddCondition(gg_trg_DoubleScore,Condition(function Trig_DoubleScore_Conditions))
call TriggerAddAction(gg_trg_DoubleScore,function Trig_DoubleScore_Actions)endfunctionfunction Trig_Maximum_Score_Conditions takes nothing returns boolean
return(udg_Game_Mode==false)
endfunctionfunction Trig_Maximum_Score_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_GameModeMax=true
call TriggerSleepAction(.1)set udg_Game_Score=999call MultiboardSetItemValueBJ(udg_Board,1,18,("Win = "+("|c0000FFFF"+(I2S(udg_Game_Score)+("|r Team Score")))))endfunctionfunction InitTrig_Maximum_Score takes nothing returns nothingset gg_trg_Maximum_Score=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Maximum_Score,Player(0),"-max",true)call TriggerRegisterPlayerChatEvent(gg_trg_Maximum_Score,Player(0),"max",false)call TriggerAddCondition(gg_trg_Maximum_Score,Condition(function Trig_Maximum_Score_Conditions))
call TriggerAddAction(gg_trg_Maximum_Score,function Trig_Maximum_Score_Actions)endfunctionfunction Trig_Event_1v1_Conditions takes nothing returns boolean
return(udg_Game_Mode==false)
endfunctionfunction Trig_Event_1v1_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_GameModeE1=trueendfunctionfunction InitTrig_Event_1v1 takes nothing returns nothingset gg_trg_Event_1v1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Event_1v1,Player(0),"-e1",true)call TriggerRegisterPlayerChatEvent(gg_trg_Event_1v1,Player(0),"e1",false)call TriggerAddCondition(gg_trg_Event_1v1,Condition(function Trig_Event_1v1_Conditions))
call TriggerAddAction(gg_trg_Event_1v1,function Trig_Event_1v1_Actions)endfunctionfunction Ability_AddEvent takes unit u,integer i returns nothing
if(i==0)then
set Ichigo_Hash=InitHashtable()call TriggerRegisterPlayerUnitEvent(gg_trg_Getsuga_Tenshou,GetOwningPlayer(u),EVENT_PLAYER_UNIT_SPELL_EFFECT,null)call TriggerRegisterPlayerUnitEvent(gg_trg_White_Getsuga_Tenshou,GetOwningPlayer(u),EVENT_PLAYER_UNIT_SPELL_EFFECT,null)
call TriggerRegisterUnitEvent(gg_trg_Ichigo_Getsuga,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hollow_Power,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Fgt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Black_Moon_Slash,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Gran_Getsuga_Cero,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==1)then
call TriggerRegisterUnitEvent(gg_trg_Gat,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Gomu_Rocket,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Gomu_Bazooka,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Gear4_Init,u,EVENT_UNIT_HERO_SKILL)
call TriggerRegisterUnitEvent(gg_trg_Gear4,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Rdw,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kkg,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==2)then
set Naruto_RikenHash=InitHashtable()
call TriggerRegisterUnitEvent(gg_trg_Lrs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Jiton_Rasengan,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Jiton_RasenganC,u,EVENT_UNIT_SPELL_CHANNEL)
call TriggerRegisterUnitEvent(gg_trg_Kage_Bushin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Biju_Rasenshuriken,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Cbr,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==3)then
set Rukia_BankaiHash=InitHashtable()
call TriggerRegisterUnitEvent(gg_trg_Trs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Smt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hkr,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_WhiteSword,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_HakkanoTogame,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==4)then
call TriggerRegisterUnitEvent(gg_trg_Ssn,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ykd,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sph,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Csp,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tmk,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sds,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==5)then
call UnitMakeAbilityPermanent(u,true,Sasuke_skUpgrade)call SetPlayerAbilityAvailable(GetOwningPlayer(u),Sasuke_skUpgrade,false)call UnitMakeAbilityPermanent(u,true,'A0IY')
call UnitMakeAbilityPermanent(u,true,'A0IZ')
call UnitMakeAbilityPermanent(u,true,'A0IX')
call UnitMakeAbilityPermanent(u,true,'A0J0')
call UnitMakeAbilityPermanent(u,true,Sasuke_skBookId)call UnitMakeAbilityPermanent(u,true,Sasuke_skUpgrade)call UnitMakeAbilityPermanent(u,true,Sasuke_skSwitch)call UnitMakeAbilityPermanent(u,true,Sasuke_skBonusAgi)call UnitMakeAbilityPermanent(u,true,Sasuke_skDefBonus)call UnitMakeAbilityPermanent(u,true,Sasuke_skRinneEff)call TriggerRegisterUnitEvent(gg_trg_Amenotejikara,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sasuke_Genjutsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Gkn,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Dot,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sasuke_Susanoo,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Sasuke_SusanooD,u,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Sasuke_EyesTrg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kirin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sck,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sasuke_Amaterasu,u,EVENT_UNIT_SPELL_EFFECT)
call UnitAddAbility(u,'A0IW')call UnitAddAbility(u,'A05V')elseif(i==6)then
call TriggerRegisterUnitEvent(gg_trg_Osg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Dsf_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_BrazoDiablo,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ets,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tdh,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==7)then
call TriggerRegisterUnitEvent(gg_trg_Mto,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lrt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tbt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Scs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tlt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_TltR,u,EVENT_UNIT_SPELL_EFFECT)
elseif(i==8)then
call TriggerRegisterUnitEvent(gg_trg_Rkb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lib,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kml,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lie,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kakashi_KamuiStrike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tls,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==9)then
call TriggerRegisterUnitEvent(gg_trg_Mts,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lrg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sda,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sgr,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Qff,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==$A)thencall TriggerRegisterUnitEvent(gg_trg_Dial,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Tjr,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Stf_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_StfU,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Seg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Abe,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ipf,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==$B)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A07M',false)call TriggerRegisterUnitEvent(gg_trg_Gef,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Eth,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Rti,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Bkg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_BkgC,u,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(gg_trg_Hns,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Etp,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==$C)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0EF',false)call TriggerRegisterUnitEvent(gg_trg_Tcb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Srl,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Senbonzakura_Kageyoshi,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Byakuya_Gokei,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Anl,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wes,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==$D)thencall TriggerRegisterUnitEvent(gg_trg_Endurance,u,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(gg_trg_Nrt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Grc_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Kin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Isk,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_IskD,u,EVENT_UNIT_DEATH)elseif(i==$E)thenset Madara_KatonHash=InitHashtable()
call UnitRemoveAbility(u,'A0J6')
call TriggerRegisterUnitEvent(gg_trg_Madara_SixPath,u,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(gg_trg_Inton_Raiha,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Shadow_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Goka_Mekkyaku,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Madara_Goka_Mekkyaku_Cast,u,EVENT_UNIT_SPELL_CAST)
call TriggerRegisterUnitEvent(gg_trg_Rinbo,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Mti,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==$F)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0K8',false)call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0KB',false)call UnitRemoveAbility(u,'A0K4')
call TriggerRegisterUnitEvent(gg_trg_Kanzen_Saimin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hypnosis_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hogyoku_Power,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Aizen_Hogyoku_Learn,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Kyokya_Suigetsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Mirage_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Khg,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==16)thencall TriggerRegisterUnitEvent(gg_trg_Fire_Skin,u,EVENT_UNIT_ATTACKED)call TriggerRegisterUnitEvent(gg_trg_Hik,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Fire_Shield,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hibashira,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hdb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Eti,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==17)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A09P',false)call UnitMakeAbilityPermanent(u,true,'A09P')
call UnitMakeAbilityPermanent(u,true,'A0J9')
call TriggerRegisterUnitEvent(gg_trg_Izanami,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ffb_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Ffb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Bunshin_Daibakuha,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Iss_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Iss,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Iss_Anim,u,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(gg_trg_Hii,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tsukuyomi,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==18)thencall TriggerRegisterUnitEvent(gg_trg_Hnm,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Inv,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Inv2,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Daiguren_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Daiguren,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Dhf,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hho,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==19)thencall TriggerRegisterUnitEvent(gg_trg_Sand_Skin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Dsd,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Csd,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Crocodile_Init,u,EVENT_UNIT_HERO_SKILL)
call TriggerRegisterUnitEvent(gg_trg_Gse,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sad,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Coe,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==20)thencall TriggerRegisterUnitEvent(gg_trg_Samsara,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Amp,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Uvp,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Rkj,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Pdn,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sdt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Sdt_Die,u,EVENT_UNIT_DEATH)
elseif(i==21)thencall TriggerRegisterUnitEvent(gg_trg_Thrilling_Spiritual,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Czj,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Release_Eye,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kds,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==22)thencall TriggerRegisterUnitEvent(gg_trg_Jog,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tmt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Vri_Cast,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Vri,u,EVENT_UNIT_SPELL_FINISH)call TriggerRegisterUnitEvent(gg_trg_Vri,u,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(gg_trg_Mmg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(udg_Mmg_TrigDie,u,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(gg_trg_Rgo,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==23)thencall TriggerRegisterUnitEvent(gg_trg_C1,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_C1_Bomb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_C12,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_C3,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_C4,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_C0,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==24)thencall TriggerRegisterUnitEvent(gg_trg_Fsw,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lot_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Lot,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Cin,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kjd,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==25)thencall TriggerRegisterUnitEvent(gg_trg_Ovp,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Bst,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hws,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wof,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Bwt,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==26)thencall TriggerRegisterUnitEvent(gg_trg_Scythe_Slash,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Wielding_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterAnyUnitEventBJ(gg_trg_Blood_Die,EVENT_PLAYER_UNIT_DEATH)
call TriggerRegisterUnitEvent(udg_Hidan_BloodTrig,u,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(gg_trg_Czs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Czs_End,u,EVENT_UNIT_SPELL_ENDCAST)
call TriggerRegisterUnitEvent(gg_trg_Curse_Dmg,u,EVENT_UNIT_DAMAGED)
call TriggerRegisterUnitEvent(gg_trg_Curse_Jutsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Spear_Self_Pain,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==27)thencall TriggerRegisterUnitEvent(gg_trg_White_Getsuga,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Getsuga_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Btz_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Btz,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hsm,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Evil_Moon_Slash,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==28)thencall TriggerRegisterUnitEvent(gg_trg_Ptk_Cast,u,EVENT_UNIT_SPELL_CAST)call TriggerRegisterUnitEvent(gg_trg_Ptk,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Veal_Shot,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Diable_Jambe,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Csh,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lsh,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==29)thencall TriggerRegisterUnitEvent(gg_trg_Water_Prison,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Wdg,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Flying_Turn_Slash,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Hidden_Mist_Jutsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Skl,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Demon_Power,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Gvj,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==30)thencall TriggerRegisterUnitEvent(gg_trg_Flb,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Flw,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Flash_Strike,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Shunko_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Shunko,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Flo,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==31)thencall TriggerRegisterUnitEvent(gg_trg_Tpk,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Shigan,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tki_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Tki,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Baf_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Baf,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Rog,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==32)thencall TriggerRegisterUnitEvent(gg_trg_TimeSpace,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kot,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kamui_Strike_Learn,u,EVENT_UNIT_HERO_SKILL)
call TriggerRegisterUnitEvent(gg_trg_Kmo,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Switch_Body_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Switch_Body,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Izanagi_Init,u,EVENT_UNIT_HERO_SKILL)elseif(i==33)thencall TriggerRegisterUnitEvent(gg_trg_Cero,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Rapid_Shot_Learn,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Shs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Iah,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(udg_Wlv_Trigger[0],u,EVENT_UNIT_SPELL_EFFECT)elseif(i==34)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0DZ',false)call TriggerRegisterUnitEvent(gg_trg_Mgh,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ing,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Magma_Frenzy,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(Akainu_MagmaFrenzyDmg,u,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(gg_trg_Ryu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Mgo,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==35)thencall TriggerRegisterUnitEvent(gg_trg_Universe,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Wgf,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wood_Destruction,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Five_Rashomon,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wdm,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wmk,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==36)thencall TriggerRegisterUnitEvent(gg_trg_Memory_Erasing,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Cero,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Hoq,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Urs_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Urs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Lance_of_Lightning,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==37)thencall TriggerRegisterUnitEvent(gg_trg_Lsc,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Light_Regeneration,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Eight_Span_Mirror,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ama_no_Murakumo,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Kizaru_Ama_no_MurakumoD,u,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(gg_trg_Cje,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==38)thencall TriggerRegisterUnitEvent(gg_trg_Wvf,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Giant_Water,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Wdj,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Www,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Water_Wave,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Infinite_Darkness,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==39)thencall TriggerRegisterUnitEvent(gg_trg_Cpt,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Cero,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_BerserkerBlood_Learn,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Grimmjow_Res_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Grimmjow_Res,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Pkc,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==40)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0FQ',false)call TriggerRegisterUnitEvent(gg_trg_GravityBlade_Init,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Gravity_Slam,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Gvs,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Meteor_Storm,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Fgr,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==41)thenset udg_Tnh_Hash=InitHashtable()
set udg_Tnh_Max=18set udg_Tnh_Per=.08call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0FZ',false)call TriggerRegisterUnitEvent(gg_trg_Ush,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tbi,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Dark_Roots,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tnh,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Aoi_Learn,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Aoi,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tso,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==42)thenset udg_Ikkaku_UpgradeSk='A0HA'set udg_CounterSpin_Ability[0]='A0H5'set udg_CounterSpin_Ability[1]='A0H7'set udg_CounterSpin_Ability[2]='A0H2'set udg_CounterSpin_Delay=.5
set udg_CounterSpin_Hash=InitHashtable()
call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0HA',false)call EnableTrigger(gg_trg_Counter_Spin)call TriggerRegisterUnitEvent(gg_trg_Great_Cleave,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Ikkaku_Bankai,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ikkaku_Bankai_Init,u,EVENT_UNIT_HERO_SKILL)
call TriggerRegisterUnitEvent(gg_trg_Dragon_Charge,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Fnm,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==43)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0HT',false)call TriggerRegisterUnitEvent(gg_trg_FrostCounter,u,EVENT_UNIT_SPELL_EFFECT)
call DisableTrigger(Aokiji_FrostCounterDmg)call TriggerRegisterUnitEvent(Aokiji_FrostCounterDmg,u,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(gg_trg_Pheasant_Beak,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ice_Saber,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Ice_Time,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Partisan,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_IceAge,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==44)thencall TriggerRegisterUnitEvent(gg_trg_Flying_Thunder_God,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Minato_FlyingThunderGodB,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Flying_Raijin_Slash,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Minato_FlyingRaijinSlashB,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_NineTails_Mode,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Rinbuko_Sanshiki,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Flying_Raijin_Rasengan,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==45)thencall UnitMakeAbilityPermanent(u,true,'A0I2')
set Soifon_AtkedHash=InitHashtable()
call TriggerRegisterUnitEvent(Soifon_SuzumebachiLearn,u,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gg_trg_Wind_Blast,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Nigeki_Kessatsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Soifon_Shunkou,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Soifon_ShunkouD,u,EVENT_UNIT_DEATH)
call TriggerRegisterUnitEvent(gg_trg_Jakuho_Raikoben,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==46)thenset Joker_TamaitoHash=InitHashtable()set Joker_SoraHash=InitHashtable()set Joker_SoraCDHash=InitHashtable()
call TriggerRegisterUnitEvent(gg_trg_Goshikito,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Tamaito,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Black_Knight,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(gg_trg_Sora_no_Michi,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_God_Thread,u,EVENT_UNIT_SPELL_EFFECT)elseif(i==47)thencall SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0JN',false)call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0JW',false)call TriggerRegisterUnitEvent(gg_trg_Bushogoma,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Katen_Kyokotsu,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kageoni,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Kageoni_Strike,u,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Karamatsu_Shinju,u,EVENT_UNIT_SPELL_EFFECT)
call TriggerRegisterUnitEvent(Shunsui_Itokiribasami,u,EVENT_UNIT_SPELL_EFFECT)endifset u=nullset i=0endfunctionfunction PlayerRaceCheck takes race Player_Race returns booleanreturn(Player_Race==RACE_HUMAN)endfunctionfunction Trig_Pick_Actions takes nothing returns nothing
local unit Pick_Unit=GetEnteringUnit()local player Player_Unit=GetOwningPlayer(Pick_Unit)local integer Player_Number=((1+GetPlayerId(Player_Unit))-1)
local integer Player_Type=GetUnitTypeId(Pick_Unit)local race Player_Race=GetPlayerRace(Player_Unit)local rect Player_Rectlocal location Player_Loclocal integer Player_Loop=0if(udg_Player_Random[Player_Number])then
loop
exitwhen Player_Loop>$Bcall SetPlayerUnitAvailableBJ(Player_Type,false,Player(Player_Loop))
set Player_Loop=Player_Loop+1endloopset Player_Loop=0endifloop
exitwhen Player_Loop>udg_Player_MaxHeroescall SetPlayerUnitAvailableBJ(udg_Player_HeroType[Player_Loop],false,Player_Unit)if(udg_Player_DummyType[Player_Loop]==Player_Type)thenset udg_Player_HeroType[Player_Loop]=0if(PlayerRaceCheck(Player_Race))then
call MultiboardSetItemIconBJ(udg_Board,1,(Player_Number+3),udg_Player_Icon[Player_Loop])
else
call MultiboardSetItemIconBJ(udg_Board,1,(Player_Number+5),udg_Player_Icon[Player_Loop])
endifcall Ability_AddEvent(Pick_Unit,Player_Loop)
endifset Player_Loop=Player_Loop+1endloopif(PlayerRaceCheck(Player_Race))then
set Player_Rect=Rect(-6272,-768,-5568,-$A0)else
set Player_Rect=Rect(5472,-800,6176,-$C0)endifif(Pick_Unit!=null)thenset Player_Loc=GetRandomLocInRect(Player_Rect)call SetUnitPositionLoc(Pick_Unit,Player_Loc)call PanCameraToTimedLocForPlayer(Player_Unit,Player_Loc,0)call SelectUnitForPlayerSingle(Pick_Unit,Player_Unit)call RemoveLocation(Player_Loc)set Player_Loc=nullendifcall RemoveRect(Player_Rect)
set Player_Rect=null
if(udg_Player_Random[Player_Number]==false)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Player_Number]+(GetPlayerName(Player_Unit)+("|r has randomed "+GetUnitName(Pick_Unit)))))elseif(udg_Player_Repick[Player_Number]==false and udg_Player_Selected[Player_Number])thencall Force_Display(udg_Display_Time,(udg_Player_Color[Player_Number]+(GetPlayerName(Player_Unit)+("|r has repicked "+GetUnitName(Pick_Unit)))))else
call Force_Display(udg_Display_Time,(udg_Player_Color[Player_Number]+(GetPlayerName(Player_Unit)+("|r has selected "+GetUnitName(Pick_Unit)))))set udg_Player_Repick[Player_Number]=trueset udg_Player_Random[Player_Number]=falseendifif(GetPlayerController(Player(Player_Number))==MAP_CONTROL_COMPUTER)then
if(Player_Number<6)thencall GroupAddUnit(udg_AI_Team1,Pick_Unit)else
call GroupAddUnit(udg_AI_Team2,Pick_Unit)endifendifset udg_AI_Name[Player_Number]=GetUnitName(Pick_Unit)set udg_Player_UnitHero[Player_Number]=Pick_Unit
set udg_Player_Selected[Player_Number]=truecall TriggerRegisterUnitEvent(gg_trg_Revive,Pick_Unit,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(gg_trg_Skill_Point_Manage,Pick_Unit,EVENT_UNIT_HERO_LEVEL)
call TriggerRegisterUnitEvent(gg_trg_Blink1,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Blink2,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_DagonActive,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_HexActive,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_DiffusalActive,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Spiritual,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_Blade_Mail,Pick_Unit,EVENT_UNIT_SPELL_EFFECT)set Pick_Unit=nullset Player_Unit=null
set Player_Race=null
set Player_Type=0set Player_Number=0set Player_Loop=0endfunctionfunction InitTrig_Pick takes nothing returns nothing
set gg_trg_Pick=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_Pick,gg_rct_HeroSelection)call TriggerAddAction(gg_trg_Pick,function Trig_Pick_Actions)endfunctionfunction Random_Cond takes nothing returns booleanreturn(udg_Player_Random[((1+GetPlayerId(GetTriggerPlayer()))-1)])endfunctionfunction Random_Run takes nothing returns nothinglocal integer Player_Slot=(1+GetPlayerId(GetTriggerPlayer()))-1call Random_Act(Player_Slot)
set Player_Slot=0endfunctionfunction InitTrig_Random takes nothing returns nothingset gg_trg_Random=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(0),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(1),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(2),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(3),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(4),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(5),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(6),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(7),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(8),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(9),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player($A),"-random",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player($B),"-random",true)
call DisableTrigger(gg_trg_Random)call TriggerAddCondition(gg_trg_Random,Condition(function Random_Cond))call TriggerAddAction(gg_trg_Random,function Random_Run)
endfunctionfunction Repick_Cond takes nothing returns booleanreturn(udg_Player_Repick[((1+GetPlayerId(GetTriggerPlayer()))-1)])endfunctionfunction Repick_Run takes nothing returns nothinglocal integer Player_Slot=(1+GetPlayerId(GetTriggerPlayer()))-1local location Loccall RemoveUnit(udg_Player_UnitHero[Player_Slot])set udg_Player_UnitHero[Player_Slot]=nullset udg_Player_Random[Player_Slot]=trueset udg_Player_Repick[Player_Slot]=false
call Player_ShowUnit(Player(Player_Slot))set Loc=GetRectCenter(gg_rct_HeroSelection)call PanCameraToTimedLocForPlayer(Player(Player_Slot),Loc,0)
call RemoveLocation(Loc)
set Loc=null
if(Player_Slot<6)thencall MultiboardSetItemIconBJ(udg_Board,1,(Player_Slot+3),"ReplaceableTextures\\CommandButtons\\BTNPatrol.blp")else
call MultiboardSetItemIconBJ(udg_Board,1,(Player_Slot+5),"ReplaceableTextures\\CommandButtons\\BTNPatrol.blp")endifset Player_Slot=0endfunctionfunction InitTrig_Repick takes nothing returns nothingset gg_trg_Repick=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(0),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(1),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(2),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(3),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(4),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(5),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(6),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(7),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(8),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(9),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player($A),"-repick",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player($B),"-repick",true)
call TriggerAddCondition(gg_trg_Repick,Condition(function Repick_Cond))call TriggerAddAction(gg_trg_Repick,function Repick_Run)
endfunctionfunction Trig_AI_Blink_Actions takes nothing returns nothing
set udg_AI_MaxBlink=8set udg_AI_BlinkAbility[0]='A04E'set udg_AI_BlinkAbility[1]='A04H'set udg_AI_BlinkAbility[2]='A04V'set udg_AI_BlinkAbility[3]='A08W'set udg_AI_BlinkAbility[4]='A0AH'set udg_AI_BlinkAbility[5]='A0C6'set udg_AI_BlinkAbility[6]='A0EV'set udg_AI_BlinkAbility[7]='A0GG'set udg_AI_BlinkAbility[8]='A0EZ'call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Blink takes nothing returns nothing
set gg_trg_AI_Blink=CreateTrigger()call TriggerAddAction(gg_trg_AI_Blink,function Trig_AI_Blink_Actions)endfunctionfunction AI_SlotCheck takes integer i returns booleanreturn(GetPlayerController(Player(i))==MAP_CONTROL_COMPUTER)
endfunctionfunction AI_Unselected takes integer i returns booleanreturn(udg_Player_UnitHero[i]==null)
endfunctionfunction Trig_AI_Run_Actions takes nothing returns nothinglocal integer Loop=0
local boolean AI_Play=falselocal boolean array PlaySlot
loop
if(AI_SlotCheck(Loop))thenset AI_Play=true
set PlaySlot[Loop]=trueif(GetAIDifficulty(Player(Loop))==AI_DIFFICULTY_INSANE)thencall AdjustPlayerStateBJ($3E8,Player(Loop),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(25,Player(Loop),PLAYER_STATE_RESOURCE_LUMBER)elseif(GetAIDifficulty(Player(Loop))==AI_DIFFICULTY_NORMAL)thencall AdjustPlayerStateBJ(500,Player(Loop),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ($F,Player(Loop),PLAYER_STATE_RESOURCE_LUMBER)endifendifset Loop=Loop+1exitwhen Loop>$B
endloopif(AI_Play)thenset udg_AI_Run=trueset udg_AI_Delay=2.5
call TriggerSleepAction(20.)
set Loop=0loop
if(PlaySlot[Loop]and AI_Unselected(Loop))thencall Random_Act(Loop)endifset Loop=Loop+1exitwhen Loop>$B
endloopcall TriggerSleepAction(5.)call TriggerExecute(gg_trg_AI_Start)
call TriggerExecute(gg_trg_AI_Blink)
call TriggerSleepAction(5.)call StartTimerBJ(udg_AI_Timer,true,udg_AI_Delay)else
call RemoveRect(gg_rct_Center)set gg_rct_Center=nullcall RemoveRect(gg_rct_Side_Team_1)set gg_rct_Side_Team_1=nullcall RemoveRect(gg_rct_Side_Team_2)set gg_rct_Side_Team_2=nullcall DestroyTrigger(gg_trg_AI_Blink)
set gg_trg_AI_Blink=null
call DestroyTrigger(gg_trg_AI_Start)
set gg_trg_AI_Start=null
call DestroyTrigger(gg_trg_AI_Action)set gg_trg_AI_Start=null
call DestroyTrigger(gg_trg_AI_Duel)set gg_trg_AI_Duel=nullcall RemoveRect(gg_rct_Side_Team_1)set gg_rct_Side_Team_1=nullcall RemoveRect(gg_rct_Side_Team_2)set gg_rct_Side_Team_2=nullcall DestroyTrigger(gg_trg_AI_Return_1)set gg_trg_AI_Return_1=nullcall DestroyTrigger(gg_trg_AI_Return_2)set gg_trg_AI_Return_2=nullcall DestroyTrigger(gg_trg_AI_Item)set gg_trg_AI_Item=nullendifcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Run takes nothing returns nothingset gg_trg_AI_Run=CreateTrigger()call TriggerAddAction(gg_trg_AI_Run,function Trig_AI_Run_Actions)endfunctionfunction Trig_AI_Start_Func003A takes nothing returns nothinglocal unit U=GetEnumUnit()local location Loc=GetRandomLocInRect(gg_rct_Center)
if(IsUnitAliveBJ(U))then
call IssuePointOrderByIdLoc(U,$D000F,Loc)endifcall RemoveLocation(Loc)
set Loc=null
set U=nullendfunctionfunction Trig_AI_Start_Actions takes nothing returns nothing
local group G=CreateGroup()call GroupAddGroup(udg_AI_Team1,G)call GroupAddGroup(udg_AI_Team2,G)call ForGroupBJ(G,function Trig_AI_Start_Func003A)call DestroyGroup(G)
set G=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Start takes nothing returns nothing
set gg_trg_AI_Start=CreateTrigger()call TriggerAddAction(gg_trg_AI_Start,function Trig_AI_Start_Actions)endfunctionfunction Trig_AI_Action_Conditions takes nothing returns boolean
return(udg_AI_Run)endfunctionfunction AI_CheckNotHome takes unit u returns booleanreturn(RectContainsUnit(gg_rct_Home_1,u)==false)and(RectContainsUnit(gg_rct_Home_2,u)==false)endfunctionfunction AI_BlinkCheck takes unit u returns booleanlocal integer i=0loop
if(GetUnitAbilityLevel(u,udg_AI_BlinkAbility[i])==1)then
return trueendifset i=i+1exitwhen i>udg_AI_MaxBlinkendloopreturn false
endfunctionfunction AI_GroupKill_Cond2 takes unit dummy,unit u returns booleanif(GetUnitLifePercent(dummy)>23)then
return false
elseif(IsUnitEnemy(dummy,GetOwningPlayer(u))==false)then
return false
elseif(GetWidgetLife(dummy)<1)thenreturn false
elseif(GetUnitAbilityLevel(dummy,udg_GlobalSkill[0])!=0)then
return false
elseif(IsUnitIllusion(dummy))thenreturn false
endifreturn trueendfunctionfunction AI_GroupKill_Cond1 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunctionfunction AI_CheckEnemy takes unit u returns integerlocal unit dummy
local player p=GetOwningPlayer(u)local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0local group g=CreateGroup()call GroupEnumUnitsInRange(g,x,y,2000.,null)
loop
set dummy=FirstOfGroup(g)exitwhen dummy==null
call GroupRemoveUnit(g,dummy)if((GetWidgetLife(dummy)>0)and IsUnitEnemy(dummy,p))then
set i=i+1endifset dummy=nullendloopcall DestroyGroup(g)
set g=nullset u=nullset p=nullreturn i
endfunctionfunction AI_Teleport1 takes nothing returns unit
local integer i=GetRandomInt(0,6)if(i==0)then
return gg_unit_n004_0026
elseif(i==1)then
return gg_unit_n004_0028
elseif(i==2)then
return gg_unit_n004_0029
elseif(i==3)then
return gg_unit_n004_0027
else
return gg_unit_n004_0024
endifendfunctionfunction AI_Teleport2 takes nothing returns unit
local integer i=GetRandomInt(0,6)if(i==0)then
return gg_unit_n004_0032
elseif(i==1)then
return gg_unit_n004_0033
elseif(i==2)then
return gg_unit_n004_0030
elseif(i==3)then
return gg_unit_n004_0031
else
return gg_unit_n004_0034
endifendfunctionfunction Trig_AI_Action_Actions takes nothing returns nothinglocal unit u
local unit pickedlocal unit dummy
local integer slotlocal integer randlocal real array xylocal real facinglocal boolean kill_check
local group g2local group g=CreateGroup()call GroupAddGroup(udg_AI_Team1,g)call GroupAddGroup(udg_AI_Team2,g)loop
set u=FirstOfGroup(g)exitwhen u==null
set slot=GetPlayerId(GetOwningPlayer(u))
if(GetWidgetLife(u)>0)thenif(GetUnitLifePercent(u)<36.)thenif(AI_CheckNotHome(u))thenif(slot<6)thenset xy[0]=GetRectCenterX(gg_rct_Home_1)set xy[1]=GetRectCenterY(gg_rct_Home_1)else
set xy[0]=GetRectCenterX(gg_rct_Home_2)set xy[1]=GetRectCenterY(gg_rct_Home_2)endifif(AI_BlinkCheck(u))then
call IssuePointOrderById(u,$D022D,xy[0],xy[1])call PolledWait(.26)
elseif(GetUnitAbilityLevel(u,'A0EZ')==1)then
call IssuePointOrderById(u,$D00FA,xy[0],xy[1])call PolledWait(.26)
endifcall IssuePointOrderById(u,$D0012,xy[0],xy[1])endifelse
set kill_check=false
set xy[0]=GetUnitX(u)set xy[1]=GetUnitY(u)set g2=CreateGroup()
call GroupEnumUnitsInRange(g2,xy[0],xy[1],800,Condition(function AI_GroupKill_Cond1))loop
set picked=FirstOfGroup(g2)exitwhen((picked==null)or kill_check)if(AI_GroupKill_Cond2(picked,u))then
set kill_check=truecall IssueTargetOrderById(u,$D007F,picked)call IssueTargetOrderById(u,$D0065,picked)call IssueTargetOrderById(u,$D00CB,picked)call IssueTargetOrderById(u,$D0097,picked)call IssueTargetOrderById(u,$D022F,picked)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)if(AI_BlinkCheck(u))then
set facing=GetUnitFacing(picked)
set xy[2]=PolarX(xy[0],160.,facing)set xy[3]=PolarY(xy[1],160.,facing)call IssuePointOrderById(u,$D022D,xy[2],xy[3])endifcall IssuePointOrderById(u,$D00FA,xy[0],xy[1])call IssuePointOrderById(u,$D009D,xy[0],xy[1])call IssuePointOrderById(u,$D0264,xy[0],xy[1])call IssuePointOrderById(u,$D0208,xy[0],xy[1])call IssuePointOrderById(u,$D0270,xy[0],xy[1])call PolledWait(.4)call IssuePointOrderById(u,$D000F,xy[0],xy[1])endifcall GroupRemoveUnit(g2,picked)set picked=nullendloopcall DestroyGroup(g2)set g2=nullif(kill_check==false)thenif(AI_CheckNotHome(u))thenset xy[0]=RandomXInRect(gg_rct_Center)set xy[1]=RandomYInRect(gg_rct_Center)else
set rand=GetRandomInt(0,3)if(rand==0)thenset xy[0]=RandomXInRect(gg_rct_Center)set xy[1]=RandomYInRect(gg_rct_Center)else
if(slot<6)thenset dummy=AI_Teleport1()
else
set dummy=AI_Teleport2()
endifset xy[0]=GetUnitX(dummy)set xy[1]=GetUnitY(dummy)set dummy=nullendifendifif(AI_BlinkCheck(u)and AI_CheckEnemy(u)==0)thencall IssuePointOrderById(u,$D022D,xy[0],xy[1])call PolledWait(.26)
endifcall IssuePointOrderById(u,$D000F,xy[0],xy[1])endifendifendifcall GroupRemoveUnit(g,u)set u=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_AI_Action takes nothing returns nothingset gg_trg_AI_Action=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_AI_Action,udg_AI_Timer)call TriggerAddCondition(gg_trg_AI_Action,Condition(function Trig_AI_Action_Conditions))
call TriggerAddAction(gg_trg_AI_Action,function Trig_AI_Action_Actions)endfunctionfunction Trig_AI_Return_1_Conditions takes nothing returns booleanreturn(Player_Check(GetEnteringUnit(),6,$B))and(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetEnteringUnit())==0)
endfunctionfunction Trig_AI_Return_1_Actions takes nothing returns nothinglocal location Loc=GetRandomLocInRect(gg_rct_Center)
call IssuePointOrderByIdLoc(GetEnteringUnit(),$D0012,Loc)call RemoveLocation(Loc)
set Loc=null
endfunctionfunction InitTrig_AI_Return_1 takes nothing returns nothingset gg_trg_AI_Return_1=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Return_1,gg_rct_Side_Team_1)call TriggerAddCondition(gg_trg_AI_Return_1,Condition(function Trig_AI_Return_1_Conditions))
call TriggerAddAction(gg_trg_AI_Return_1,function Trig_AI_Return_1_Actions)endfunctionfunction Trig_AI_Return_2_Conditions takes nothing returns booleanreturn(Player_Check(GetEnteringUnit(),0,5))and(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetEnteringUnit())==0)endfunctionfunction Trig_AI_Return_2_Actions takes nothing returns nothinglocal location Loc=GetRandomLocInRect(gg_rct_Center)
call IssuePointOrderByIdLoc(GetEnteringUnit(),$D0012,Loc)call RemoveLocation(Loc)
set Loc=null
endfunctionfunction InitTrig_AI_Return_2 takes nothing returns nothingset gg_trg_AI_Return_2=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Return_2,gg_rct_Side_Team_2)call TriggerAddCondition(gg_trg_AI_Return_2,Condition(function Trig_AI_Return_2_Conditions))
call TriggerAddAction(gg_trg_AI_Return_2,function Trig_AI_Return_2_Actions)endfunctionfunction AI_Duel_Check takes unit Dummy,player P returns boolean
if(IsUnitEnemy(Dummy,P)==false)thenreturn false
elseif(IsUnitType(Dummy,UNIT_TYPE_HERO)==false)thenreturn false
elseif(GetWidgetLife(Dummy)<1)thenreturn false
elseif(GetOwningPlayer(Dummy)==Player($C))thenreturn false
else
return trueendifendfunctionfunction AI_Duel_GroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()local unit Dummy
local player Plocal location Loclocal location array Loc2local group Glocal real X
local real Y
if(GetWidgetLife(U)>0)thenset P=GetOwningPlayer(U)
set Loc=GetUnitLoc(U)set G=GetUnitsInRangeOfLocAll(2000.,Loc)
call RemoveLocation(Loc)
set Loc=null
loop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
if(AI_Duel_Check(Dummy,P))thencall IssueTargetOrderById(U,$D000F,Dummy)call IssueTargetOrderById(U,$D007F,Dummy)call IssueTargetOrderById(U,$D0065,Dummy)call IssueTargetOrderById(U,$D00CB,Dummy)call IssueTargetOrderById(U,$D0097,Dummy)call IssueTargetOrderById(U,$D022F,Dummy)if(GetUnitLifePercent(Dummy)<24 and AI_BlinkCheck(U))thenset Loc2[0]=GetUnitLoc(Dummy)set Loc2[1]=PolarProjectionBJ(Loc2[0],$A0,GetUnitFacing(Dummy))call RemoveLocation(Loc2[0])
set Loc2[0]=null
call IssuePointOrderByIdLoc(U,$D022D,Loc2[1])set X=GetLocationX(Loc2[1])set Y=GetLocationY(Loc2[1])call RemoveLocation(Loc2[1])
set Loc2[1]=null
call PolledWait(.2)set Loc2[2]=Location(X,Y)call IssuePointOrderByIdLoc(U,$D000F,Loc2[2])call RemoveLocation(Loc2[2])
set Loc2[2]=null
endifendifcall GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall DestroyGroup(G)
set G=nullset P=nullendifset U=nullendfunctionfunction Trig_AI_Duel_Actions takes nothing returns nothinglocal group G=CreateGroup()call GroupAddGroup(udg_AI_Team1,G)call GroupAddGroup(udg_AI_Team2,G)call ForGroupBJ(G,function AI_Duel_GroupAct)
call DestroyGroup(G)
set G=nullendfunctionfunction InitTrig_AI_Duel takes nothing returns nothingset gg_trg_AI_Duel=CreateTrigger()call DisableTrigger(gg_trg_AI_Duel)call TriggerRegisterTimerEventPeriodic(gg_trg_AI_Duel,1.)call TriggerAddAction(gg_trg_AI_Duel,function Trig_AI_Duel_Actions)endfunctionfunction Trig_AI_Item_Conditions takes nothing returns booleanif(GetPlayerController(GetOwningPlayer(GetEnteringUnit()))!=MAP_CONTROL_COMPUTER)thenreturn false
elseif(IsUnitAliveBJ(GetEnteringUnit())==false)thenreturn false
elseif(not(Hero_Check(GetEnteringUnit(),0,$B)))thenreturn false
else
return trueendifendfunctionfunction AI_FullInventory takes unit U returns booleanreturn(UnitInventoryCount(U)==6)
endfunctionfunction AI_BuyItem takes unit U,integer Gold,integer ItemId,integer ItemPrice,integer Mat1,integer Mat2,integer Mat3,integer Mat4 returns nothinglocal boolean Fusion=falseif(Gold>=ItemPrice)thencall SetPlayerStateBJ(GetOwningPlayer(U),PLAYER_STATE_RESOURCE_GOLD,(Gold-ItemPrice))if(Mat1!=0)thencall RemoveItem(GetItemOfTypeFromUnitBJ(U,Mat1))
set Fusion=trueendifif(Mat2!=0)thencall RemoveItem(GetItemOfTypeFromUnitBJ(U,Mat2))
set Fusion=trueendifif(Mat3!=0)thencall RemoveItem(GetItemOfTypeFromUnitBJ(U,Mat3))
set Fusion=trueendifif(Mat4!=0)thencall RemoveItem(GetItemOfTypeFromUnitBJ(U,Mat4))
set Fusion=trueendifcall UnitAddItemByIdSwapped(ItemId,U)if(Fusion)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",U,"origin"))endifendifset U=nullendfunctionfunction AI_HogyokuCheck takes unit U returns booleanif(UnitHasItemOfTypeBJ(U,'I05L'))thenset U=nullreturn trueelseif(UnitHasItemOfTypeBJ(U,'I05P'))thenset U=nullreturn trueelse
set U=nullreturn false
endifendfunctionfunction Trig_AI_Item_Actions takes nothing returns nothinglocal unit U=GetEnteringUnit()local integer Atb=AttributeCheck(U)local player P=GetOwningPlayer(U)local integer Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)local integer Lumber=GetPlayerState(P,PLAYER_STATE_RESOURCE_LUMBER)if(Lumber>0)then
call SetPlayerStateBJ(P,PLAYER_STATE_RESOURCE_LUMBER,0)if(Atb==2)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIim\\AIimTarget.mdl",U,"origin"))call ModifyHeroStat(2,U,0,Lumber)elseif(Atb==1)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",U,"origin"))call ModifyHeroStat(1,U,0,Lumber)else
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIsm\\AIsmTarget.mdl",U,"origin"))call ModifyHeroStat(0,U,0,Lumber)endifset Lumber=0
endifif(UnitInventoryCount(U)>4)thenif((UnitHasItemOfTypeBJ(U,'I03S'))and(UnitHasItemOfTypeBJ(U,'I053')==false))then
call AI_BuyItem(U,Gold,'I053',$4236,'I03S',0,0,0)endifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if((UnitHasItemOfTypeBJ(U,'I03S')==false)and(UnitHasItemOfTypeBJ(U,'I053')==false))thenif(UnitHasItemOfTypeBJ(U,'I005'))thencall AI_BuyItem(U,Gold,'I03S',$7B7,'I005',0,0,0)
else
if(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I005',$FA,0,0,0,0)endifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I04G')==false)then
if(UnitHasItemOfTypeBJ(U,'I03R'))thencall AI_BuyItem(U,Gold,'I04G',9400,'I03R',0,0,0)
else
if(UnitHasItemOfTypeBJ(U,'I00M'))thencall AI_BuyItem(U,Gold,'I03R',950,'I00M',0,0,0)elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I00M',900,0,0,0,0)endifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I05C')==false)then
if(UnitHasItemOfTypeBJ(U,'I02U'))thencall AI_BuyItem(U,Gold,'I05C',$9C4,'I02U',0,0,0)
else
if(UnitHasItemOfTypeBJ(U,'I00Q'))thencall AI_BuyItem(U,Gold,'I02U',950,'I00Q',0,0,0)elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I00Q',500,0,0,0,0)endifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I04S')==false)then
if(UnitHasItemOfTypeBJ(U,'I041'))thencall AI_BuyItem(U,Gold,'I04S',$BBB2,'I041',0,0,0)else
if(UnitHasItemOfTypeBJ(U,'I03I'))thencall AI_BuyItem(U,Gold,'I041',6400,'I03I',0,0,0)
elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I03I',$866,0,0,0,0)endifendifendifif(Atb==0)thenset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I05E') and UnitHasItemOfTypeBJ(U,'I04V')==false)thenif(UnitHasItemOfTypeBJ(U,'I00V'))thencall AI_BuyItem(U,Gold,'I04V',$ED8,'I00V',0,0,0)
else
if(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I00V',$FA0,0,0,0,0)endifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I05E')==false)then
if(UnitHasItemOfTypeBJ(U,'I04N'))thencall AI_BuyItem(U,Gold,'I05E',$ED8,'I04N',0,0,0)
else
if(UnitHasItemOfTypeBJ(U,'I003'))thencall AI_BuyItem(U,Gold,'I04N',$B86,'I003',0,0,0)
elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I003',$640,0,0,0,0)endifendifendifelseif(Atb==1)thenset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I04M') and UnitHasItemOfTypeBJ(U,'I05I')==false)thenif(UnitHasItemOfTypeBJ(U,'I051'))thencall AI_BuyItem(U,Gold,'I05I',$9E98,'I051',0,0,0)else
if(UnitHasItemOfTypeBJ(U,'I03Y'))thencall AI_BuyItem(U,Gold,'I051',$34BC,'I03Y',0,0,0)else
if(UnitHasItemOfTypeBJ(U,'I03X'))thencall AI_BuyItem(U,Gold,'I03Y',$A8C,'I03X',0,0,0)
elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I03X',$FA0,0,0,0,0)endifendifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I04M')==false)then
if(UnitHasItemOfTypeBJ(U,'I032'))thencall AI_BuyItem(U,Gold,'I04M',$8CA,'I032',0,0,0)
else
if(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I032',$8CA,0,0,0,0)endifendifendifelse
set Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(not(AI_HogyokuCheck(U)))thenif((UnitHasItemOfTypeBJ(U,'I05A'))and(UnitHasItemOfTypeBJ(U,'I05F')))thenif(IsUnitType(U,UNIT_TYPE_RANGED_ATTACKER))thencall AI_BuyItem(U,Gold,'I05P',$76C0,'I05A','I05F',0,0)else
call AI_BuyItem(U,Gold,'I05L',$76C0,'I05A','I05F',0,0)endifelse
set Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if((UnitHasItemOfTypeBJ(U,'I05F'))and(UnitHasItemOfTypeBJ(U,'I05A')==false))then
if(UnitHasItemOfTypeBJ(U,'I010'))thencall AI_BuyItem(U,Gold,'I05A',$2CD3,'I010',0,0,0)elseif(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I010',5000,0,0,0,0)endifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(UnitHasItemOfTypeBJ(U,'I05F')==false)then
if(UnitHasItemOfTypeBJ(U,'I010'))thencall AI_BuyItem(U,Gold,'I05F',$CE4,'I010',0,0,0)
else
if(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I010',5000,0,0,0,0)endifendifendifendifendifset Gold=GetPlayerState(P,PLAYER_STATE_RESOURCE_GOLD)if(AI_HogyokuCheck(U)or((UnitHasItemOfTypeBJ(U,'I05A'))and(UnitHasItemOfTypeBJ(U,'I05F'))and(UnitHasItemOfTypeBJ(U,'I055')==false)))then
if(UnitHasItemOfTypeBJ(U,'I008'))thencall AI_BuyItem(U,Gold,'I055',$2B5C,'I008',0,0,0)else
if(not(AI_FullInventory(U)))then
call AI_BuyItem(U,Gold,'I008',$960,0,0,0,0)endifendifendifendifset U=nullset P=nullset Atb=0set Gold=0endfunctionfunction InitTrig_AI_Item takes nothing returns nothingset gg_trg_AI_Item=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Item,gg_rct_Home_1)call TriggerRegisterEnterRectSimple(gg_trg_AI_Item,gg_rct_Home_2)call TriggerAddCondition(gg_trg_AI_Item,Condition(function Trig_AI_Item_Conditions))
call TriggerAddAction(gg_trg_AI_Item,function Trig_AI_Item_Actions)endfunctionfunction Teleport takes unit u,integer i returns nothing
local player p=GetOwningPlayer(u)local real x=GetUnitX(u)
local real y=GetUnitX(u)
local real x_centerlocal real y_centerlocal rect r
local integer slotlocal integer countset bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call IssueImmediateOrderById(u,$D0004)if(i==0)then
set r=Rect(-704,-928,576,64)
set x_center=GetRectCenterX(r)set y_center=GetRectCenterY(r)set count=0loop
set x=RandomXInRect(r)set y=RandomYInRect(r)set count=count+1exitwhen DistanceBetweenXY(x,y,x_center,y_center)>$C8 or count>4
endloopcall RemoveRect(r)set r=nullif(GetLocalPlayer()==p)thencall PanCameraToTimed(x,y,0)
endifcall SetUnitX(u,x)call SetUnitY(u,y)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",u,"origin"))set p=nullreturnelseif(i==1)then
set slot=0elseif(i==2)then
set slot=1elseif(i==3)then
set slot=2elseif(i==4)then
set slot=3endifif(GetLocalPlayer()==p)thencall PanCameraToTimed(udg_Teleport_UnitX[slot],udg_Teleport_UnitY[slot],0)endifcall SetUnitX(u,udg_Teleport_UnitX[slot])call SetUnitY(u,udg_Teleport_UnitY[slot])call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportCaster.mdl",u,"origin"))set p=nullendfunctionfunction Teleport_RunTopLeft takes nothing returns nothingcall Teleport(GetEnumUnit(),1)endfunctionfunction Teleport_RunBotLeft takes nothing returns nothingcall Teleport(GetEnumUnit(),2)endfunctionfunction Teleport_RunTopRight takes nothing returns nothingcall Teleport(GetEnumUnit(),3)endfunctionfunction Teleport_RunBotRight takes nothing returns nothingcall Teleport(GetEnumUnit(),4)endfunctionfunction Teleport_RunCenter takes nothing returns nothingcall Teleport(GetEnumUnit(),0)endfunctionfunction Teleport_RunCond takes nothing returns booleanlocal unit u=GetFilterUnit()
if(GetWidgetLife(u)<1)thenset u=nullreturn false
elseif(IsUnitPaused(u))thenset u=nullreturn false
elseif(IsUnitType(u,UNIT_TYPE_MECHANICAL))thenset u=nullreturn false
else
set u=nullreturn trueendifendfunctionfunction Trig_Teleport_Run_Actions takes nothing returns nothing
local unit array Tele_Ulocal integer Loops=0local group G1local group G2local location Loc1local location Loc2local rect R
set Tele_U[0]=gg_unit_n004_0024set Tele_U[1]=gg_unit_n004_0026set Tele_U[2]=gg_unit_n004_0027set Tele_U[3]=gg_unit_n004_0028set Tele_U[4]=gg_unit_n004_0029set Tele_U[5]=gg_unit_n004_0032set Tele_U[6]=gg_unit_n004_0033set Tele_U[7]=gg_unit_n004_0034set Tele_U[8]=gg_unit_n004_0030set Tele_U[9]=gg_unit_n004_0031loop
exitwhen Loops>9
call SetUnitAnimation(Tele_U[Loops],"birth")
call SetUnitVertexColor(Tele_U[Loops],$FF,$FF,$AF,$FF)set Tele_U[Loops]=nullset Loops=Loops+1endloopset Loops=0set Loc1=Location(-6468,-$53D)set Loc2=Location(5369,-$53D)call CreateTextTagLocBJ("Top-Left",Loc1,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)call CreateTextTagLocBJ("Top-Left",Loc2,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)set G1=GetUnitsInRangeOfLocMatching(120.,Loc1,Condition(function Teleport_RunCond))set G2=GetUnitsInRangeOfLocMatching(120.,Loc2,Condition(function Teleport_RunCond))call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall GroupAddGroup(G2,G1)call ForGroupBJ(G1,function Teleport_RunTopLeft)
call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullset Loc1=Location(-6210,-$53D)set Loc2=Location(5625,-$53D)call CreateTextTagLocBJ("Bottom-Left",Loc1,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)call CreateTextTagLocBJ("Bottom-Left",Loc2,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)set G1=GetUnitsInRangeOfLocMatching(120.,Loc1,Condition(function Teleport_RunCond))set G2=GetUnitsInRangeOfLocMatching(120.,Loc2,Condition(function Teleport_RunCond))call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall GroupAddGroup(G2,G1)call ForGroupBJ(G1,function Teleport_RunBotLeft)
call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullset Loc1=Location(-5439,-$53D)set Loc2=Location(6398,-$53D)call CreateTextTagLocBJ("Top-Right",Loc1,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)call CreateTextTagLocBJ("Top-Right",Loc2,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)set G1=GetUnitsInRangeOfLocMatching(120.,Loc1,Condition(function Teleport_RunCond))set G2=GetUnitsInRangeOfLocMatching(120.,Loc2,Condition(function Teleport_RunCond))call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall GroupAddGroup(G2,G1)call ForGroupBJ(G1,function Teleport_RunTopRight)call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullset Loc1=Location(-5697,-$53D)set Loc2=Location(6142,-$53D)call CreateTextTagLocBJ("Bottom-Right",Loc1,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)call CreateTextTagLocBJ("Bottom-Right",Loc2,0,8.,100.,100.,100.,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)set G1=GetUnitsInRangeOfLocMatching(120.,Loc1,Condition(function Teleport_RunCond))set G2=GetUnitsInRangeOfLocMatching(120.,Loc2,Condition(function Teleport_RunCond))call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall GroupAddGroup(G2,G1)call ForGroupBJ(G1,function Teleport_RunBotRight)call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullset Loc1=Location(-5951,-$53D)set Loc2=Location(5884,-$53D)call CreateTextTagLocBJ("Middle",Loc1,0,8.,100.,100.,100.,0)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)call CreateTextTagLocBJ("Middle",Loc2,0,8.,100.,100.,100.,0)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag,true)set G1=GetUnitsInRangeOfLocMatching(120.,Loc1,Condition(function Teleport_RunCond))set G2=GetUnitsInRangeOfLocMatching(120.,Loc2,Condition(function Teleport_RunCond))call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall GroupAddGroup(G2,G1)call ForGroupBJ(G1,function Teleport_RunCenter)call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullset udg_Teleport_On=true
call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Teleport_Run takes nothing returns nothing
set gg_trg_Teleport_Run=CreateTrigger()call TriggerAddAction(gg_trg_Teleport_Run,function Trig_Teleport_Run_Actions)endfunctionfunction Teleport_Cond takes nothing returns boolean
local unit u=GetTriggerUnit()if(udg_Teleport_On==false)thenset u=nullreturn false
elseif(GetWidgetLife(u)<1)thenset u=nullreturn false
elseif(IsUnitPaused(u))thenset u=nullreturn false
elseif(IsUnitType(u,UNIT_TYPE_MECHANICAL))thenset u=nullreturn false
else
set u=nullreturn trueendifendfunctionfunction Teleport_TL_Act takes nothing returns nothingcall Teleport(GetTriggerUnit(),1)endfunctionfunction Teleport_BL_Act takes nothing returns nothingcall Teleport(GetTriggerUnit(),2)endfunctionfunction Teleport_TR_Act takes nothing returns nothingcall Teleport(GetTriggerUnit(),3)endfunctionfunction Teleport_BR_Act takes nothing returns nothingcall Teleport(GetTriggerUnit(),4)endfunctionfunction Teleport_C_Act takes nothing returns nothingcall Teleport(GetTriggerUnit(),0)endfunctionfunction InitTrig_All_Teleport takes nothing returns nothing
local trigger Teleport_TL=CreateTrigger()local trigger Teleport_BL=CreateTrigger()local trigger Teleport_TR=CreateTrigger()local trigger Teleport_BR=CreateTrigger()local trigger Teleport_C=CreateTrigger()
local real MyArea=40.call TriggerRegisterUnitInRangeSimple(Teleport_TL,MyArea,gg_unit_n004_0024)call TriggerRegisterUnitInRangeSimple(Teleport_TL,MyArea,gg_unit_n004_0032)call TriggerAddCondition(Teleport_TL,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_TL,function Teleport_TL_Act)call TriggerRegisterUnitInRangeSimple(Teleport_BL,MyArea,gg_unit_n004_0026)call TriggerRegisterUnitInRangeSimple(Teleport_BL,MyArea,gg_unit_n004_0033)call TriggerAddCondition(Teleport_BL,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_BL,function Teleport_BL_Act)call TriggerRegisterUnitInRangeSimple(Teleport_TR,MyArea,gg_unit_n004_0029)call TriggerRegisterUnitInRangeSimple(Teleport_TR,MyArea,gg_unit_n004_0031)call TriggerAddCondition(Teleport_TR,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_TR,function Teleport_TR_Act)call TriggerRegisterUnitInRangeSimple(Teleport_BR,MyArea,gg_unit_n004_0028)call TriggerRegisterUnitInRangeSimple(Teleport_BR,MyArea,gg_unit_n004_0030)call TriggerAddCondition(Teleport_BR,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_BR,function Teleport_BR_Act)call TriggerRegisterUnitInRangeSimple(Teleport_C,MyArea,gg_unit_n004_0027)call TriggerRegisterUnitInRangeSimple(Teleport_C,MyArea,gg_unit_n004_0034)call TriggerAddCondition(Teleport_C,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_C,function Teleport_C_Act)endfunctionfunction Trig_Duel_Warning_Actions takes nothing returns nothing
local integer i=0loop
call TimerDialogSetTimeColorBJ(udg_Game_TimerWindow,.0,.0,.0,0)call TriggerSleepAction(.4)call TimerDialogSetTimeColorBJ(udg_Game_TimerWindow,100.,.0,.0,0)call TriggerSleepAction(.4)set i=i+1exitwhen i>8
endloopset i=0endfunctionfunction InitTrig_Duel_Warning takes nothing returns nothing
set gg_trg_Duel_Warning=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Duel_Warning,udg_Timer_DuelWarning)call TriggerAddAction(gg_trg_Duel_Warning,function Trig_Duel_Warning_Actions)endfunctionfunction Trig_Duel_Cond takes nothing returns booleanreturn(udg_Duel_On==false)endfunctionfunction Duel_MoveCheck takes unit u returns boolean
return(GetUnitState(u,UNIT_STATE_LIFE)>0)endfunctionfunction GroupReady_Act takes nothing returns nothinglocal unit U=GetEnumUnit()local player P=GetOwningPlayer(U)local group G=GetUnitsOfPlayerAll(P)
local unit Dummy
loop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
if(IsUnitType(Dummy,UNIT_TYPE_MECHANICAL)==false)thencall SetUnitAnimation(Dummy,"stand ready")endifcall GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall DestroyGroup(G)
set G=nullset U=nullset P=nullendfunctionfunction Trig_Duel_Actions takes nothing returns nothing
local integer Count=Duel_Count()
local force Foclocal rect Field
local location Loclocal location Loc2local integer Looplocal rect array Rec1local rect array Rec2local integer array RecSlotlocal group DummyGroupMovelocal unit DummyMove
local group DummyGroupReadycall DestroyTimerDialog(udg_Game_TimerWindow)if(Count==0)then
returnelseif(Count==6)then
call Dynamic_Sound("Sound\\Interface\\GameFound.wav")else
call Dynamic_Sound("Sound\\Interface\\NewTournament.wav")endifcall EnableTrigger(gg_trg_Duel_Invul)call DisableTrigger(gg_trg_AI_Action)set Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(true,Foc)if(udg_GameModeE1)thencall DisplayTextToForce(Foc,"|c00fffc01Event: 1 v 1|r")else
call DisplayTextToForce(Foc,"|c00fffc01Event: "+I2S(Count)+" v "+I2S(Count)+"|r")endifcall DestroyForce(Foc)set Foc=null
call TriggerSleepAction(5.5)
call DisableTrigger(gg_trg_Duel_Invul)set Count=Duel_Count()if(Count==0)then
call Duel_CancelCheck1()
returnendifif(udg_GameModeE1)thenset Count=1endifif(Count<3)thenset Field=Rect(-6656,4832,-4224,6432)else
set Field=Rect(-4768,-7328,-$660,-5216)endifset Loc=GetRectCenter(Field)
set Loop=0loop
call PanCameraToTimedLocForPlayer(Player(Loop),Loc,0)set Loop=Loop+1exitwhen Loop>$B
endloopcall RemoveLocation(Loc)
set Loc=null
call TriggerSleepAction(.01)
set Rec1[0]=Rect(-$E60,-5952,-$DE0,-5824)set Rec1[1]=Rect(-$E60,-6114,-$DE0,-6016)set Rec1[2]=Rect(-$E60,-6336,-$DE0,-6208)set Rec1[3]=Rect(-$E60,-6528,-$DE0,-6400)set Rec1[4]=Rect(-$E60,-6720,-$DE0,-6592)set Rec1[5]=Rect(-$F40,-5952,-$EC0,-5824)set Rec1[6]=Rect(-$F40,-6144,-$EC0,-6016)set Rec1[7]=Rect(-$F40,-6336,-$EC0,-6208)set Rec1[8]=Rect(-$F40,-6528,-$EC0,-6400)set Rec1[9]=Rect(-$F40,-6720,-$EC0,-6592)set Rec1[$A]=Rect(-6080,5760,-5952,5888)
set Rec1[$B]=Rect(-6080,5568,-5952,5696)
set Rec1[$C]=Rect(-6080,5376,-5952,5504)
set Rec2[0]=Rect(-$B20,-5952,-$AA0,-5824)set Rec2[1]=Rect(-$B20,-6114,-$AA0,-6016)set Rec2[2]=Rect(-$B20,-6336,-$AA0,-6208)set Rec2[3]=Rect(-$B20,-6528,-$AA0,-6400)set Rec2[4]=Rect(-$B20,-6720,-$AA0,-6592)set Rec2[5]=Rect(-$A40,-5952,-$9C0,-5824)set Rec2[6]=Rect(-$A40,-6144,-$9C0,-6016)set Rec2[7]=Rect(-$A40,-6336,-$9C0,-6208)set Rec2[8]=Rect(-$A40,-6528,-$9C0,-6400)set Rec2[9]=Rect(-$A40,-6720,-$9C0,-6592)set Rec2[$A]=Rect(-4928,5760,-4800,5888)
set Rec2[$B]=Rect(-4928,5568,-4800,5696)
set Rec2[$C]=Rect(-4928,5376,-4800,5504)
if(Count==6)then
set RecSlot[0]=0
set RecSlot[1]=2
set RecSlot[2]=4
set RecSlot[3]=5
set RecSlot[4]=7
set RecSlot[5]=9
elseif(Count==5)then
set RecSlot[0]=0
set RecSlot[1]=2
set RecSlot[2]=4
set RecSlot[3]=6
set RecSlot[4]=8
elseif(Count==4)then
set RecSlot[0]=0
set RecSlot[1]=2
set RecSlot[2]=4
set RecSlot[3]=7
elseif(Count==3)then
set RecSlot[0]=0
set RecSlot[1]=2
set RecSlot[2]=4
elseif(Count==2)then
set RecSlot[0]=$Aset RecSlot[1]=$Celseif(Count==1)then
set RecSlot[0]=$Belse
set Loop=0loop
call RemoveRect(Rec1[Loop])set Rec1[Loop]=nullcall RemoveRect(Rec2[Loop])set Rec2[Loop]=nullset Loop=Loop+1exitwhen Loop>$C
endloopcall Duel_CancelCheck1()
returnendifset Loop=0loop
set DummyGroupMove=CreateGroup()
call GroupAddGroup(udg_Duel_Team1,DummyGroupMove)set DummyMove=GroupPickRandomUnit(DummyGroupMove)call DestroyGroup(DummyGroupMove)set DummyGroupMove=nullloop
exitwhen(DummyMove==null or Duel_MoveCheck(DummyMove))call TriggerSleepAction(.1)endloopif((DummyMove!=null)and(IsUnitInGroup(DummyMove,udg_Leave_Group)==false)and(Duel_MoveCheck(DummyMove)))thencall GroupRemoveUnit(udg_Duel_Team1,DummyMove)call UnitReturnDivine(DummyMove)
set Loc=GetRectCenter(Rec1[(RecSlot[Loop])])
call SetUnitPositionLocFacingBJ(DummyMove,Loc,360.)call SetUnitAnimation(DummyMove,"stand")
call SetUnitFlyHeight(DummyMove,0,0)
call CreateNUnitsAtLoc(1,'h004',GetOwningPlayer(DummyMove),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call Duel_SummonWarp(DummyMove,360.)
call GroupAddUnit(udg_Duel_DummyTeam1,DummyMove)
call SetUnitLifePercentBJ(DummyMove,'d')
call SetUnitManaPercentBJ(DummyMove,'d')
call UnitRemoveBuffsBJ(1,DummyMove)endifset DummyMove=nullset Loop=Loop+1exitwhen Loop>=Count
endloopcall TriggerSleepAction(.8)set Loop=0loop
set DummyGroupMove=CreateGroup()
call GroupAddGroup(udg_Duel_Team2,DummyGroupMove)set DummyMove=GroupPickRandomUnit(DummyGroupMove)call DestroyGroup(DummyGroupMove)set DummyGroupMove=nullloop
exitwhen(DummyMove==null or Duel_MoveCheck(DummyMove))call TriggerSleepAction(.1)endloopif((DummyMove!=null)and(IsUnitInGroup(DummyMove,udg_Leave_Group)==false)and(Duel_MoveCheck(DummyMove)))thencall GroupRemoveUnit(udg_Duel_Team2,DummyMove)call UnitReturnDivine(DummyMove)
set Loc=GetRectCenter(Rec2[(RecSlot[Loop])])
call SetUnitPositionLocFacingBJ(DummyMove,Loc,180.)call SetUnitAnimation(DummyMove,"stand")
call SetUnitFlyHeight(DummyMove,0,0)
call CreateNUnitsAtLoc(1,'h004',GetOwningPlayer(DummyMove),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call Duel_SummonWarp(DummyMove,180.)
call GroupAddUnit(udg_Duel_DummyTeam2,DummyMove)
call SetUnitLifePercentBJ(DummyMove,'d')
call SetUnitManaPercentBJ(DummyMove,'d')
call UnitRemoveBuffsBJ(1,DummyMove)endifset DummyMove=nullset Loop=Loop+1exitwhen Loop>=Count
endloopcall TriggerSleepAction(3.5)
set Loop=3loop
call Dynamic_Sound("Sound\\Interface\\BattleNetTick.wav")set Loc=GetRectCenter(Field)
call CreateTextTagLocBJ(I2S(Loop),Loc,0,20.,'d','d','d',0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,.9)call RemoveLocation(Loc)
set Loc=null
if(Loop==2)thenset DummyGroupReady=CreateGroup()call GroupAddGroup(udg_Duel_DummyTeam1,DummyGroupReady)call GroupAddGroup(udg_Duel_DummyTeam2,DummyGroupReady)call ForGroupBJ(DummyGroupReady,function GroupReady_Act)
call DestroyGroup(DummyGroupReady)set DummyGroupReady=null
endifcall TriggerSleepAction(.8)set Loop=Loop-1exitwhen Loop<1endloopcall GroupClear(udg_Duel_Team1)call GroupClear(udg_Duel_Team2)call Dynamic_Sound("Sound\\Interface\\ArrangedTeamInvitation.wav")set Loc=GetRectCenter(Field)
call RemoveRect(Field)set Field=nullset Loc2=PolarProjectionBJ(Loc,50.,180.)
call RemoveLocation(Loc)
set Loc=null
call CreateTextTagLocBJ("Duel",Loc2,0,20.,'d',.0,.0,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,.9)call RemoveLocation(Loc2)set Loc2=nullset Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(false,Foc)call DestroyForce(Foc)set Foc=null
set Count=0set Loop=0loop
call RemoveRect(Rec1[Loop])set Rec1[Loop]=nullcall RemoveRect(Rec2[Loop])set Rec2[Loop]=nullset Loop=Loop+1exitwhen Loop>$C
endloopset Loop=0loop
set RecSlot[Loop]=0set Loop=Loop+1exitwhen Loop>5endloopset Loop=0call TriggerExecute(gg_trg_Duel_Vul)
call StartTimerBJ(udg_Timer_DuelReal,false,40.)call CreateTimerDialogBJ(udg_Timer_DuelReal,"Duel Time")
set udg_Game_TimerWindow=bj_lastCreatedTimerDialogif(Duel_CancelCheck2())thenreturnendifset udg_Duel_On=true
if(udg_AI_Run)thencall EnableTrigger(gg_trg_AI_Duel)endifcall EnableTrigger(gg_trg_Duel_Kill)
call EnableTrigger(gg_trg_Duel_OverTime)
endfunctionfunction InitTrig_Duel takes nothing returns nothing
set gg_trg_Duel=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Duel,udg_Timer_Duel)
call TriggerAddCondition(gg_trg_Duel,Condition(function Trig_Duel_Cond))
call TriggerAddAction(gg_trg_Duel,function Trig_Duel_Actions)endfunctionfunction Duel_Invul_Cond takes unit U returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],U)==0)endfunctionfunction Duel_Invul_GroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()if(Duel_Invul_Cond(U))thencall SetUnitInvulnerable(U,true)
call PauseUnit(U,true)endifset U=nullendfunctionfunction Trig_Duel_Invul_Actions takes nothing returns nothinglocal group array Glocal integer Loop=0
loop
set G[Loop]=GetUnitsOfPlayerAll(Player(Loop))call ForGroupBJ(G[Loop],function Duel_Invul_GroupAct)call DestroyGroup(G[Loop])set G[Loop]=null
set Loop=Loop+1exitwhen Loop>$B
endloopendfunctionfunction InitTrig_Duel_Invul takes nothing returns nothingset gg_trg_Duel_Invul=CreateTrigger()call DisableTrigger(gg_trg_Duel_Invul)call TriggerRegisterTimerEventPeriodic(gg_trg_Duel_Invul,.4)
call TriggerAddAction(gg_trg_Duel_Invul,function Trig_Duel_Invul_Actions)endfunctionfunction Duel_Vul_GroupAct takes nothing returns nothing
local unit U=GetEnumUnit()local group G=GetUnitsOfPlayerAll(GetOwningPlayer(U))local unit Dummy
loop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
call SetUnitInvulnerable(Dummy,false)call PauseUnit(Dummy,false)call GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall DestroyGroup(G)
set G=nullset U=nullendfunctionfunction Trig_Duel_Vul_Actions takes nothing returns nothing
local group G=CreateGroup()call GroupAddGroup(udg_Duel_DummyTeam1,G)call GroupAddGroup(udg_Duel_DummyTeam2,G)call ForGroupBJ(G,function Duel_Vul_GroupAct)call DestroyGroup(G)
set G=nullendfunctionfunction InitTrig_Duel_Vul takes nothing returns nothing
set gg_trg_Duel_Vul=CreateTrigger()call TriggerAddAction(gg_trg_Duel_Vul,function Trig_Duel_Vul_Actions)endfunctionfunction Trig_Duel_Kill_Func001C takes nothing returns booleanreturn(GetDyingUnit()==udg_Player_UnitHero[0])or(GetDyingUnit()==udg_Player_UnitHero[1])or(GetDyingUnit()==udg_Player_UnitHero[2])or(GetDyingUnit()==udg_Player_UnitHero[3])or(GetDyingUnit()==udg_Player_UnitHero[4])or(GetDyingUnit()==udg_Player_UnitHero[5])or(GetDyingUnit()==udg_Player_UnitHero[6])or(GetDyingUnit()==udg_Player_UnitHero[7])or(GetDyingUnit()==udg_Player_UnitHero[8])or(GetDyingUnit()==udg_Player_UnitHero[9])or(GetDyingUnit()==udg_Player_UnitHero[$A])or(GetDyingUnit()==udg_Player_UnitHero[$B])endfunctionfunction Trig_Duel_Kill_Conditions takes nothing returns boolean
return(Trig_Duel_Kill_Func001C())endfunctionfunction Trig_Duel_Kill_Actions takes nothing returns nothinglocal unit U=GetDyingUnit()call Map_Kill_Summon(U)call GroupRemoveUnit(udg_Duel_DummyTeam1,U)call GroupRemoveUnit(udg_Duel_DummyTeam2,U)set U=nullcall Duel_CancelCheck2()
endfunctionfunction InitTrig_Duel_Kill takes nothing returns nothingset gg_trg_Duel_Kill=CreateTrigger()
call DisableTrigger(gg_trg_Duel_Kill)call TriggerRegisterAnyUnitEventBJ(gg_trg_Duel_Kill,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Duel_Kill,Condition(function Trig_Duel_Kill_Conditions))
call TriggerAddAction(gg_trg_Duel_Kill,function Trig_Duel_Kill_Actions)endfunctionfunction Trig_Duel_OverTime_Actions takes nothing returns nothingset udg_Duel_OverTime=truecall Duel_CancelCheck2()
endfunctionfunction InitTrig_Duel_OverTime takes nothing returns nothingset gg_trg_Duel_OverTime=CreateTrigger()
call DisableTrigger(gg_trg_Duel_OverTime)call TriggerRegisterTimerExpireEvent(gg_trg_Duel_OverTime,udg_Timer_DuelReal)call TriggerAddAction(gg_trg_Duel_OverTime,function Trig_Duel_OverTime_Actions)endfunctionfunction Item_Move_GroupAct takes nothing returns nothinglocal rect rec=Rect(-288,-$440,$A0,-672)
local location loc=GetRandomLocInRect(rec)call RemoveRect(rec)
set rec=null
call SetItemPosition(GetEnumItem(),GetLocationX(loc),GetLocationY(loc))call RemoveLocation(loc)
set loc=null
endfunctionfunction Duel_Move_CheckPan takes integer i returns booleanif(GetPlayerSlotState(Player(i))!=PLAYER_SLOT_STATE_PLAYING)then
return false
elseif(GetPlayerController(Player(i))!=MAP_CONTROL_USER)then
return false
endifreturn trueendfunctionfunction Duel_Move_Actions takes nothing returns nothing
local group G1local group G2local rect R1local rect R2local unit Dummy
local location Loclocal player Plocal force Foclocal integer ilocal rect array rec
call EnableTrigger(gg_trg_Duel_Invul)call TriggerSleepAction(3.)call DisableTrigger(gg_trg_Duel_Invul)if(udg_Eng_Game)then
returnendifset Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CinematicModeBJ(false,Foc)call DestroyForce(Foc)set Foc=null
call Map_Vul()set G1=CreateGroup()
set G2=CreateGroup()
set R1=Rect(-6272,-768,-5568,-$A0)set R2=Rect(5472,-800,6176,-$C0)
call GroupAddGroup(udg_Duel_DummyTeam1,G1)call GroupAddGroup(udg_Duel_DummyTeam2,G2)loop
set Dummy=FirstOfGroup(G1)exitwhen Dummy==null
set P=GetOwningPlayer(Dummy)
set Loc=GetRandomLocInRect(R1)call SetUnitPositionLocFacingBJ(Dummy,Loc,270.)call CreateNUnitsAtLoc(1,'h004',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call SetUnitLifePercentBJ(Dummy,'d')
call SetUnitManaPercentBJ(Dummy,'d')
call UnitRemoveBuffsBJ(1,Dummy)call GroupRemoveUnit(G1,Dummy)call Duel_SummonWarp(Dummy,270.)
set Dummy=nullset P=nullendlooploop
set Dummy=FirstOfGroup(G2)exitwhen Dummy==null
set P=GetOwningPlayer(Dummy)
set Loc=GetRandomLocInRect(R2)call SetUnitPositionLocFacingBJ(Dummy,Loc,270.)call CreateNUnitsAtLoc(1,'h004',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call SetUnitLifePercentBJ(Dummy,'d')
call SetUnitManaPercentBJ(Dummy,'d')
call UnitRemoveBuffsBJ(1,Dummy)call GroupRemoveUnit(G2,Dummy)call Duel_SummonWarp(Dummy,270.)
set Dummy=nullset P=nullendloopcall DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullcall RemoveRect(R1)set R1=nullcall RemoveRect(R2)set R2=nullset i=0loop
if(Duel_Move_CheckPan(i))thenset Loc=GetUnitLoc(udg_Player_UnitHero[i])call PanCameraToTimedLocForPlayer(Player(i),Loc,0)call RemoveLocation(Loc)
set Loc=null
endifset i=i+1exitwhen i>$Bendloopcall EnableTrigger(gg_trg_AI_Action)
call GroupClear(udg_Duel_Team1)call GroupClear(udg_Duel_Team2)call GroupClear(udg_Duel_DummyTeam1)
call GroupClear(udg_Duel_DummyTeam2)
call Duel_Destroy()set rec[0]=Rect(-7040,4544,-$EC0,6816)set rec[1]=Rect(-5120,-7680,-$4E0,-4832)
call EnumItemsInRect(rec[0],null,function Item_Move_GroupAct)call EnumItemsInRect(rec[1],null,function Item_Move_GroupAct)call RemoveRect(rec[0])set rec[0]=nullcall RemoveRect(rec[1])set rec[1]=nullendfunctionfunction InitTrig_Duel_Move takes nothing returns nothingset gg_trg_Duel_Move=CreateTrigger()
call TriggerAddAction(gg_trg_Duel_Move,function Duel_Move_Actions)endfunctionfunction Atk_Disable_Check takes unit Attacker,unit Attacked returns boolean
return(IsUnitAlly(Attacked,GetOwningPlayer(Attacker)))and(GetUnitLifePercent(Attacked)>9.)endfunctionfunction Atk_Hero_Check takes unit Attacker returns booleanreturn(IsUnitType(Attacker,UNIT_TYPE_HERO))endfunctionfunction Trig_Atk_Disable_Actions takes nothing returns nothinglocal unit Attacker=GetAttacker()local unit Attacked=GetTriggerUnit()
if(Atk_Disable_Check(Attacker,Attacked))then
call IssueImmediateOrderById(Attacker,$D0004)elseif(Atk_Hero_Check(Attacker))then
call SetUnitManaBJ(Attacker,(GetUnitStateSwap(UNIT_STATE_MANA,Attacker)+udg_Player_ManaATK))
endifset Attacker=nullset Attacked=nullendfunctionfunction InitTrig_Atk_Disable takes nothing returns nothingset gg_trg_Atk_Disable=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Atk_Disable,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddAction(gg_trg_Atk_Disable,function Trig_Atk_Disable_Actions)endfunctionfunction Trig_Kill_Conditions takes nothing returns booleanif(IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==false)then
return false
elseif(GetPlayerSlotState(GetOwningPlayer(GetDyingUnit()))!=PLAYER_SLOT_STATE_PLAYING)thenreturn false
elseif(GetOwningPlayer(GetDyingUnit())==Player($C))thenreturn false
elseif(IsUnitIllusion(GetDyingUnit()))thenreturn false
else
return trueendifendfunctionfunction Trig_Kill_Actions takes nothing returns nothing
local unit Killer=GetKillingUnit()local unit Dyer=GetDyingUnit()local integer Killer_Slot=(1+GetPlayerId(GetOwningPlayer(Killer)))-1
local integer Dyer_Slot=(1+GetPlayerId(GetOwningPlayer(Dyer)))-1
local integer Lv_Killer=GetHeroLevel(Killer)
local integer Lv_Dyer=GetHeroLevel(Dyer)
local integer Gold=(udg_Kill_Gold*Lv_Dyer)local integer Medal=udg_Kill_Medallocal integer Explocal string Killer_Name
local string Dyer_Namelocal texttag txtlocal force Focif(IsUnitEnemy(Killer,GetOwningPlayer(Dyer)))thenif(GetPlayerSlotState(GetOwningPlayer(Killer))==PLAYER_SLOT_STATE_PLAYING)and(GetOwningPlayer(Killer)!=Player($C))thenset udg_Player_Death[Dyer_Slot]=udg_Player_Death[Dyer_Slot]+1if(Dyer_Slot<6)thencall MultiboardSetItemValueBJ(udg_Board,4,(Dyer_Slot+3),I2S(udg_Player_Death[Dyer_Slot]))else
call MultiboardSetItemValueBJ(udg_Board,4,(Dyer_Slot+5),I2S(udg_Player_Death[Dyer_Slot]))endifif(IsUnitType(Killer,UNIT_TYPE_HERO))thenif(Lv_Killer<Lv_Dyer)thenset Exp=udg_Kill_HeroExpMaxelse
set Exp=udg_Kill_HeroExpMinendifcall AddHeroXP(Killer,Exp,true)endifif(GetPlayerController(Player(Killer_Slot))==MAP_CONTROL_USER)thenset Killer_Name=GetPlayerName(Player(Killer_Slot))else
set Killer_Name=udg_AI_Name[Killer_Slot]
endifif(GetPlayerController(Player(Dyer_Slot))==MAP_CONTROL_USER)then
set Dyer_Name=GetPlayerName(Player(Dyer_Slot))else
set Dyer_Name=udg_AI_Name[Dyer_Slot]
endifcall Force_Display(udg_Display_Time,udg_Player_Color[Killer_Slot]+Killer_Name+"|r Defeat "+udg_Player_Color[Dyer_Slot]+Dyer_Name+"|r")set udg_Player_Kill[Killer_Slot]=udg_Player_Kill[Killer_Slot]+1if(Killer_Slot<6)thenset udg_Score_Team1=udg_Score_Team1+1call MultiboardSetItemValueBJ(udg_Board,3,(Killer_Slot+3),I2S(udg_Player_Kill[Killer_Slot]))
call MultiboardSetItemValueBJ(udg_Board,1,19,("Team 1 Score = "+("|c00DD0000"+(I2S(udg_Score_Team1)+"|r"))))
else
set udg_Score_Team2=udg_Score_Team2+1call MultiboardSetItemValueBJ(udg_Board,3,(Killer_Slot+5),I2S(udg_Player_Kill[Killer_Slot]))
call MultiboardSetItemValueBJ(udg_Board,1,20,("Team 2 Score = "+("|c0000FF00"+(I2S(udg_Score_Team2)+"|r"))))
endifif(Killer_Slot==0)thencall StartTimerBJ(udg_Kill_Timer1,false,3.)elseif(Killer_Slot==1)thencall StartTimerBJ(udg_Kill_Timer2,false,3.)elseif(Killer_Slot==2)thencall StartTimerBJ(udg_Kill_Timer3,false,3.)elseif(Killer_Slot==3)thencall StartTimerBJ(udg_Kill_Timer4,false,3.)elseif(Killer_Slot==4)thencall StartTimerBJ(udg_Kill_Timer5,false,3.)elseif(Killer_Slot==5)thencall StartTimerBJ(udg_Kill_Timer6,false,3.)elseif(Killer_Slot==6)thencall StartTimerBJ(udg_Kill_Timer7,false,3.)elseif(Killer_Slot==7)thencall StartTimerBJ(udg_Kill_Timer8,false,3.)elseif(Killer_Slot==8)thencall StartTimerBJ(udg_Kill_Timer9,false,3.)elseif(Killer_Slot==9)thencall StartTimerBJ(udg_Kill_Timer10,false,3.)
elseif(Killer_Slot==$A)thencall StartTimerBJ(udg_Kill_Timer11,false,3.)
else
call StartTimerBJ(udg_Kill_Timer12,false,3.)
endifset udg_Kill_Stack[Killer_Slot]=udg_Kill_Stack[Killer_Slot]+1if(udg_Kill_Stack[Killer_Slot]==2)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Killer_Slot]+Killer_Name+"|r just got a |c000042ffDouble Kill|r!"))call Dynamic_Sound(udg_Player_Anc_2[Killer_Slot])elseif(udg_Kill_Stack[Killer_Slot]==3)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Killer_Slot]+Killer_Name+"|r just got a |c0020c000Triple Kill|r!!!"))call Dynamic_Sound(udg_Player_Anc_3[Killer_Slot])elseif(udg_Kill_Stack[Killer_Slot]==4)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Killer_Slot]+Killer_Name+"|r just got an |c0000FFFFUltra Kill|r!!!"))call Dynamic_Sound(udg_Player_Anc_4[Killer_Slot])elseif(udg_Kill_Stack[Killer_Slot]==5)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Killer_Slot]+Killer_Name+"|r is on a |c0000A8FCRampage|r!!!"))
call Dynamic_Sound(udg_Player_Anc_5[Killer_Slot])elseif(udg_Kill_Stack[Killer_Slot]>5)thencall Force_Display(udg_Display_Time,(udg_Player_Color[Killer_Slot]+Killer_Name+"|r just did a complete |c000070A6Humiliation|r!!!!"))call Dynamic_Sound(udg_Player_Anc_6[Killer_Slot])endifcall AdjustPlayerStateBJ(Gold,Player(Killer_Slot),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(Medal,Player(Killer_Slot),PLAYER_STATE_RESOURCE_LUMBER)
set txt=CreateTextTagUnitBJ("+"+I2S(Gold),Dyer,0,12.,'d',58.,.0,0)call SetTextTagVelocityBJ(txt,64,90)
call SetTextTagPermanentBJ(txt,false)call SetTextTagLifespanBJ(txt,2.)set Foc=GetPlayersByMapControl(MAP_CONTROL_USER)
call ShowTextTagForceBJ(false,txt,Foc)call DestroyForce(Foc)set Foc=null
set Foc=GetForceOfPlayer(Player(Killer_Slot))call ShowTextTagForceBJ(true,txt,Foc)call DestroyForce(Foc)set Foc=null
set Killer=nullset Dyer=nullcall End_Game()call TriggerSleepAction(2.)call DestroyTextTag(txt)
set txt=null
else
set Killer=nullset Dyer=nullendifelse
set txt=CreateTextTagUnitBJ("|c00FF0000Denied !|r",Dyer,0,$D,'d','d','d',0)call SetTextTagVelocityBJ(txt,64,90)
call SetTextTagPermanentBJ(txt,false)call SetTextTagLifespanBJ(txt,2.)set Foc=GetPlayersByMapControl(MAP_CONTROL_USER)
call ShowTextTagForceBJ(false,txt,Foc)call DestroyForce(Foc)set Foc=null
set Foc=GetForceOfPlayer(Player(Killer_Slot))call ShowTextTagForceBJ(true,txt,Foc)call DestroyForce(Foc)set Foc=null
set Killer=nullset Dyer=nullcall TriggerSleepAction(2.)call DestroyTextTag(txt)
set txt=null
endifendfunctionfunction InitTrig_Kill takes nothing returns nothing
set gg_trg_Kill=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Kill,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Kill,Condition(function Trig_Kill_Conditions))call TriggerAddAction(gg_trg_Kill,function Trig_Kill_Actions)endfunctionfunction Trig_First_Blood_Conditions takes nothing returns booleanif(IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==false)then
return false
elseif(GetUnitAbilityLevelSwapped('Aloc',GetDyingUnit())==1)then
return false
elseif(GetPlayerController(GetOwningPlayer(GetKillingUnit()))==MAP_CONTROL_CREEP)thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetDyingUnit()))==MAP_CONTROL_CREEP)thenreturn false
elseif(IsUnitEnemy(GetKillingUnit(),GetOwningPlayer(GetDyingUnit()))==false)then
return false
elseif(GetPlayerSlotState(GetOwningPlayer(GetKillingUnit()))!=PLAYER_SLOT_STATE_PLAYING)then
return false
else
return trueendifendfunctionfunction Trig_First_Blood_Actions takes nothing returns nothinglocal unit Killer=GetKillingUnit()local unit Dyer=GetDyingUnit()local player P=GetOwningPlayer(Killer)local string Killer_Name
local integer Killer_Slot=(1+GetPlayerId(P))-1local integer Dyer_Slot=(1+GetPlayerId(GetOwningPlayer(Dyer)))-1
local location Loc=GetUnitLoc(Dyer)call CreateNUnitsAtLoc(1,'h00Q',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Loc)
set Loc=null
if(GetPlayerController(Player(Killer_Slot))==MAP_CONTROL_USER)thenset Killer_Name=GetPlayerName(Player(Killer_Slot))else
set Killer_Name=udg_AI_Name[Killer_Slot]
endifcall AdjustPlayerStateBJ(2,P,PLAYER_STATE_RESOURCE_LUMBER)call Force_Display(udg_Display_Time,udg_Player_Color[Killer_Slot]+Killer_Name+"|r just drew |c00ff0000first blood!|r (+2 medal)")call Dynamic_Sound(udg_Player_Anc_1[Killer_Slot])set Killer=nullset Dyer=nullset P=nullset Killer_Name=null
set Killer_Slot=0set Dyer_Slot=0call DisableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_First_Blood takes nothing returns nothingset gg_trg_First_Blood=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_First_Blood,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_First_Blood,Condition(function Trig_First_Blood_Conditions))
call TriggerAddAction(gg_trg_First_Blood,function Trig_First_Blood_Actions)endfunctionfunction Trig_Lvup_Conditions takes nothing returns booleanreturn(GetPlayerSlotState(GetOwningPlayer(GetTriggerUnit()))==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_CREEP)endfunctionfunction Trig_Lvup_Actions takes nothing returns nothing
local unit U=GetTriggerUnit()local integer Slot=(1+GetPlayerId(GetOwningPlayer(U)))-1
if(Slot<6)thencall MultiboardSetItemValueBJ(udg_Board,5,(3+Slot),I2S(GetHeroLevel(U)))
else
call MultiboardSetItemValueBJ(udg_Board,5,(5+Slot),I2S(GetHeroLevel(U)))
endifset U=nullendfunctionfunction InitTrig_Lvup takes nothing returns nothing
set gg_trg_Lvup=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lvup,EVENT_PLAYER_HERO_LEVEL)call TriggerAddCondition(gg_trg_Lvup,Condition(function Trig_Lvup_Conditions))call TriggerAddAction(gg_trg_Lvup,function Trig_Lvup_Actions)endfunctionfunction Kill_Trig12 takes nothing returns nothingset udg_Kill_Stack[$B]=0
endfunctionfunction Kill_Trig11 takes nothing returns nothingset udg_Kill_Stack[$A]=0
endfunctionfunction Kill_Trig10 takes nothing returns nothingset udg_Kill_Stack[9]=0endfunctionfunction Kill_Trig9 takes nothing returns nothingset udg_Kill_Stack[8]=0endfunctionfunction Kill_Trig8 takes nothing returns nothingset udg_Kill_Stack[7]=0endfunctionfunction Kill_Trig7 takes nothing returns nothingset udg_Kill_Stack[6]=0endfunctionfunction Kill_Trig6 takes nothing returns nothingset udg_Kill_Stack[5]=0endfunctionfunction Kill_Trig5 takes nothing returns nothingset udg_Kill_Stack[4]=0endfunctionfunction Kill_Trig4 takes nothing returns nothingset udg_Kill_Stack[3]=0endfunctionfunction Kill_Trig3 takes nothing returns nothingset udg_Kill_Stack[2]=0endfunctionfunction Kill_Trig2 takes nothing returns nothingset udg_Kill_Stack[1]=0endfunctionfunction Kill_Trig1 takes nothing returns nothingset udg_Kill_Stack[0]=0endfunctionfunction InitTrig_Kill_Countdown takes nothing returns nothinglocal trigger array Kill_Countdownset Kill_Countdown[0]=CreateTrigger()set Kill_Countdown[1]=CreateTrigger()set Kill_Countdown[2]=CreateTrigger()set Kill_Countdown[3]=CreateTrigger()set Kill_Countdown[4]=CreateTrigger()set Kill_Countdown[5]=CreateTrigger()set Kill_Countdown[6]=CreateTrigger()set Kill_Countdown[7]=CreateTrigger()set Kill_Countdown[8]=CreateTrigger()set Kill_Countdown[9]=CreateTrigger()set Kill_Countdown[$A]=CreateTrigger()set Kill_Countdown[$B]=CreateTrigger()call TriggerRegisterTimerExpireEvent(Kill_Countdown[0],udg_Kill_Timer1)call TriggerRegisterTimerExpireEvent(Kill_Countdown[1],udg_Kill_Timer2)call TriggerRegisterTimerExpireEvent(Kill_Countdown[2],udg_Kill_Timer3)call TriggerRegisterTimerExpireEvent(Kill_Countdown[3],udg_Kill_Timer4)call TriggerRegisterTimerExpireEvent(Kill_Countdown[4],udg_Kill_Timer5)call TriggerRegisterTimerExpireEvent(Kill_Countdown[5],udg_Kill_Timer6)call TriggerRegisterTimerExpireEvent(Kill_Countdown[6],udg_Kill_Timer7)call TriggerRegisterTimerExpireEvent(Kill_Countdown[7],udg_Kill_Timer8)call TriggerRegisterTimerExpireEvent(Kill_Countdown[8],udg_Kill_Timer9)call TriggerRegisterTimerExpireEvent(Kill_Countdown[9],udg_Kill_Timer10)
call TriggerRegisterTimerExpireEvent(Kill_Countdown[$A],udg_Kill_Timer11)call TriggerRegisterTimerExpireEvent(Kill_Countdown[$B],udg_Kill_Timer12)call TriggerAddAction(Kill_Countdown[0],function Kill_Trig1)
call TriggerAddAction(Kill_Countdown[1],function Kill_Trig2)
call TriggerAddAction(Kill_Countdown[2],function Kill_Trig3)
call TriggerAddAction(Kill_Countdown[3],function Kill_Trig4)
call TriggerAddAction(Kill_Countdown[4],function Kill_Trig5)
call TriggerAddAction(Kill_Countdown[5],function Kill_Trig6)
call TriggerAddAction(Kill_Countdown[6],function Kill_Trig7)
call TriggerAddAction(Kill_Countdown[7],function Kill_Trig8)
call TriggerAddAction(Kill_Countdown[8],function Kill_Trig9)
call TriggerAddAction(Kill_Countdown[9],function Kill_Trig10)call TriggerAddAction(Kill_Countdown[$A],function Kill_Trig11)call TriggerAddAction(Kill_Countdown[$B],function Kill_Trig12)endfunctionfunction Revive_Cond takes nothing returns booleanif(GetDyingUnit()==udg_Player_UnitHero[0])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[1])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[2])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[3])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[4])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[5])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[6])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[7])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[8])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[9])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[$A])thenreturn trueelseif(GetDyingUnit()==udg_Player_UnitHero[$B])thenreturn trueendifreturn false
endfunctionfunction ReviveCheckRace takes unit U returns booleanreturn(GetPlayerRace(GetOwningPlayer(U))==RACE_HUMAN)endfunctionfunction Trig_Revive_Actions takes nothing returns nothinglocal unit U=GetDyingUnit()local rect R
local location Loclocal location Loc2local real x
local real y
call TriggerSleepAction(udg_Revive_Time)
loop
exitwhen(udg_Duel_On==false)
call TriggerSleepAction(.1)endloopif(ReviveCheckRace(U))thenset R=Rect(-6272,-768,-5568,-$A0)else
set R=Rect(5472,-800,6176,-$C0)endifset Loc=GetRandomLocInRect(R)call RemoveRect(R)set R=nullcall PanCameraToTimedLocForPlayer(GetOwningPlayer(U),Loc,0)set x=GetLocationX(Loc)set y=GetLocationY(Loc)call RemoveLocation(Loc)
set Loc=null
call TriggerSleepAction(.5)set Loc2=Location(x,y)call ReviveHeroLoc(U,Loc2,true)call RemoveLocation(Loc2)set Loc2=nullcall SelectUnitForPlayerSingle(U,GetOwningPlayer(U))
call SetUnitManaPercentBJ(U,'d')
call SetUnitFlyHeight(U,0,0)
call BonusAbilityCheck(U)set U=nullset x=.0
set y=.0
endfunctionfunction InitTrig_Revive takes nothing returns nothingset gg_trg_Revive=CreateTrigger()call TriggerAddAction(gg_trg_Revive,function Trig_Revive_Actions)endfunctionfunction Trig_Home_Set_Actions takes nothing returns nothing
local location Loc1=GetRectCenter(gg_rct_Home_1)
local location Loc2=GetRectCenter(gg_rct_Home_2)
call CreateNUnitsAtLoc(1,'u008',Player(0),Loc1,bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'u008',Player(6),Loc2,bj_UNIT_FACING)call RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullcall StartTimerBJ(udg_Home_RegenTimer,true,udg_Home_RegenDelay)endfunctionfunction InitTrig_Home_Set takes nothing returns nothing
set gg_trg_Home_Set=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Home_Set,1.)
call TriggerAddAction(gg_trg_Home_Set,function Trig_Home_Set_Actions)endfunctionfunction Home_Regen_GroupCond takes nothing returns booleanreturn(UnitHasBuffBJ(GetFilterUnit(),udg_Home_RegenBuff))endfunctionfunction Home_Regen_GroupAct takes nothing returns nothinglocal unit U=GetEnumUnit()call SetWidgetLife(U,(GetUnitStateSwap(UNIT_STATE_LIFE,U)+(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,U)*udg_Home_RegenRate)))
call SetUnitManaBJ(U,(GetUnitStateSwap(UNIT_STATE_MANA,U)+(GetUnitStateSwap(UNIT_STATE_MAX_MANA,U)*udg_Home_RegenRate)))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",U,"origin"))
set U=nullendfunctionfunction Trig_Home_Regen_Actions takes nothing returns nothinglocal group G1=GetUnitsInRectMatching(gg_rct_Home_1,Condition(function Home_Regen_GroupCond))local group G2=GetUnitsInRectMatching(gg_rct_Home_2,Condition(function Home_Regen_GroupCond))call GroupAddGroup(G2,G1)call ForGroup(G1,function Home_Regen_GroupAct)call DestroyGroup(G1)set G1=nullcall DestroyGroup(G2)set G2=nullendfunctionfunction InitTrig_Home_Regen takes nothing returns nothingset gg_trg_Home_Regen=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Home_Regen,udg_Home_RegenTimer)call TriggerAddAction(gg_trg_Home_Regen,function Trig_Home_Regen_Actions)endfunctionfunction Trig_Remove_Regen_Conditions takes nothing returns booleanreturn(UnitHasBuffBJ(GetLeavingUnit(),udg_Home_RegenBuff))endfunctionfunction Trig_Remove_Regen_Actions takes nothing returns nothing
call UnitRemoveAbility(GetLeavingUnit(),udg_Home_RegenBuff)endfunctionfunction InitTrig_Remove_Regen takes nothing returns nothing
set gg_trg_Remove_Regen=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Remove_Regen,gg_rct_Home_1)call TriggerRegisterLeaveRectSimple(gg_trg_Remove_Regen,gg_rct_Home_2)call TriggerAddCondition(gg_trg_Remove_Regen,Condition(function Trig_Remove_Regen_Conditions))call TriggerAddAction(gg_trg_Remove_Regen,function Trig_Remove_Regen_Actions)endfunctionfunction Trig_Home1_Kill_Conditions takes nothing returns booleanif((1+GetPlayerId(GetOwningPlayer(GetEnteringUnit())))<7)thenreturn false
elseif((1+GetPlayerId(GetOwningPlayer(GetEnteringUnit())))>$C)thenreturn false
elseif(IsUnitType(GetEnteringUnit(),UNIT_TYPE_MECHANICAL))thenreturn false
else
return trueendifendfunctionfunction Trig_Home1_Kill_Actions takes nothing returns nothinglocal unit U=GetEnteringUnit()local unit Dummy
local location Loc=GetUnitLoc(U)
call CreateNUnitsAtLoc(1,'u003',Player($C),Loc,bj_UNIT_FACING)set Dummy=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1,'h00F',Player($C),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Loc)
set Loc=null
call SetUnitManaBJ(U,1.)
call SetWidgetLife(U,1.)
call UnitDamageTargetBJ(Dummy,U,100.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)call UnitApplyTimedLifeBJ(.2,'BTLF',Dummy)set U=nullset Dummy=nullendfunctionfunction InitTrig_Home1_Kill takes nothing returns nothingset gg_trg_Home1_Kill=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_Home1_Kill,gg_rct_Home_1)
call TriggerAddCondition(gg_trg_Home1_Kill,Condition(function Trig_Home1_Kill_Conditions))call TriggerAddAction(gg_trg_Home1_Kill,function Trig_Home1_Kill_Actions)endfunctionfunction Trig_Home2_Kill_Conditions takes nothing returns booleanif((1+GetPlayerId(GetOwningPlayer(GetEnteringUnit())))>6)thenreturn false
elseif(IsUnitType(GetEnteringUnit(),UNIT_TYPE_MECHANICAL))thenreturn false
else
return trueendifendfunctionfunction Trig_Home2_Kill_Actions takes nothing returns nothinglocal unit U=GetEnteringUnit()local unit Dummy
local location Loc=GetUnitLoc(U)
call CreateNUnitsAtLoc(1,'u003',Player($C),Loc,bj_UNIT_FACING)set Dummy=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1,'h00F',Player($C),Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Loc)
set Loc=null
call SetUnitManaBJ(U,1.)
call SetWidgetLife(U,1.)
call UnitDamageTargetBJ(Dummy,U,100.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)call UnitApplyTimedLifeBJ(.2,'BTLF',Dummy)set U=nullset Dummy=nullendfunctionfunction InitTrig_Home2_Kil takes nothing returns nothingset gg_trg_Home2_Kil=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Home2_Kil,gg_rct_Home_2)call TriggerAddCondition(gg_trg_Home2_Kil,Condition(function Trig_Home2_Kill_Conditions))call TriggerAddAction(gg_trg_Home2_Kil,function Trig_Home2_Kill_Actions)
endfunctionfunction Leave_DestroySummon takes unit U returns nothinglocal player P=GetOwningPlayer(U)local group G=GetUnitsOfPlayerAll(P)
local unit Dummy
call GroupRemoveUnit(G,U)loop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
if(IsUnitType(Dummy,UNIT_TYPE_MECHANICAL)==false)thencall KillUnit(Dummy)
endifcall GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall DestroyGroup(G)
set G=nullset U=nullset P=nullendfunctionfunction Trig_Leavegame_Actions takes nothing returns nothinglocal integer i=(1+GetPlayerId(GetTriggerPlayer()))-1local location Loclocal location Loc2local player Pif(udg_Player_UnitHero[i]==null)then
returnendifcall Dynamic_Sound("Sound\\Interface\\ItemReceived.wav")
call Force_Display(udg_Display_Time,(udg_Player_Color[i]+GetPlayerName(Player(i))+"|r |c00ff0303Has left the game +++++ |r"))if(i<6)thencall MultiboardSetItemValueBJ(udg_Board,2,(3+i),("|c00959697"+(GetPlayerName(Player(i))+"|r")))else
call MultiboardSetItemValueBJ(udg_Board,2,(5+i),("|c00959697"+(GetPlayerName(Player(i))+"|r")))endifcall GroupAddUnit(udg_Leave_Group,udg_Player_UnitHero[i])if(IsUnitInGroup(udg_Player_UnitHero[i],udg_Duel_Team1))then
call GroupRemoveUnit(udg_Duel_Team1,udg_Player_UnitHero[i])elseif(IsUnitInGroup(udg_Player_UnitHero[i],udg_Duel_Team2))then
call GroupRemoveUnit(udg_Duel_Team2,udg_Player_UnitHero[i])endifif(IsUnitInGroup(udg_Player_UnitHero[i],udg_Duel_DummyTeam1))thencall GroupRemoveUnit(udg_Duel_DummyTeam1,udg_Player_UnitHero[i])
elseif(IsUnitInGroup(udg_Player_UnitHero[i],udg_Duel_DummyTeam2))thencall GroupRemoveUnit(udg_Duel_DummyTeam2,udg_Player_UnitHero[i])
endifloop
exitwhen(udg_Player_UnitHero[i]==null)or(IsUnitAliveBJ(udg_Player_UnitHero[i]))call TriggerSleepAction(.1)endloopcall Map_Kill_Summon(udg_Player_UnitHero[i])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",udg_Player_UnitHero[i],"origin"))call SetUnitLifePercentBJ(udg_Player_UnitHero[i],'d')call SetUnitManaPercentBJ(udg_Player_UnitHero[i],'d')call UnitAddAbility(udg_Player_UnitHero[i],'A07R')call UnitAddAbility(udg_Player_UnitHero[i],'A07S')call SetUnitMoveSpeed(udg_Player_UnitHero[i],.0)
call SetUnitVertexColorBJ(udg_Player_UnitHero[i],'d','d','d',50.)if(udg_Duel_On)thencall Duel_CancelCheck2()
call TriggerSleepAction(3.)loop
exitwhen(udg_Player_UnitHero[i]==null)or(IsUnitAliveBJ(udg_Player_UnitHero[i]))call TriggerSleepAction(.1)endloopendifcall PauseUnit(udg_Player_UnitHero[i],true)call SetUnitInvulnerable(udg_Player_UnitHero[i],true)set P=GetOwningPlayer(udg_Player_UnitHero[i])if(P==Player(0))then
set Loc=GetUnitLoc(gg_unit_n000_0074)elseif(P==Player(1))then
set Loc=GetUnitLoc(gg_unit_n000_0073)elseif(P==Player(2))then
set Loc=GetUnitLoc(gg_unit_n000_0049)elseif(P==Player(3))then
set Loc=GetUnitLoc(gg_unit_n000_0051)elseif(P==Player(4))then
set Loc=GetUnitLoc(gg_unit_n000_0052)elseif(P==Player(5))then
set Loc=GetUnitLoc(gg_unit_n000_0050)elseif(P==Player(6))then
set Loc=GetUnitLoc(gg_unit_n000_0058)elseif(P==Player(7))then
set Loc=GetUnitLoc(gg_unit_n000_0056)elseif(P==Player(8))then
set Loc=GetUnitLoc(gg_unit_n000_0055)elseif(P==Player(9))then
set Loc=GetUnitLoc(gg_unit_n000_0059)elseif(P==Player($A))thenset Loc=GetUnitLoc(gg_unit_n000_0061)elseif(P==Player($B))thenset Loc=GetUnitLoc(gg_unit_n000_0057)else
call RemoveUnit(udg_Player_UnitHero[i])set udg_Player_UnitHero[i]=nullset P=nullreturnendifset P=nullset Loc2=GetUnitLoc(udg_Player_UnitHero[i])call SetUnitPositionLocFacingBJ(udg_Player_UnitHero[i],Loc,270.)
call CreateNUnitsAtLoc(1,'h004',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h004',P,Loc2,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
call RemoveLocation(Loc2)set Loc2=nullcall UnitDropItems(udg_Player_UnitHero[i])set udg_Player_UnitHero[i]=nullset i=0endfunctionfunction InitTrig_Leavegame takes nothing returns nothingset gg_trg_Leavegame=CreateTrigger()
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(0))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(1))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(2))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(3))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(4))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(5))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(6))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(7))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(8))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(9))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player($A))call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player($B))call TriggerAddAction(gg_trg_Leavegame,function Trig_Leavegame_Actions)endfunctionfunction SpawnCreep___GetCreepId takes integer minLv,integer maxLv returns integerlocal integer randLv=GetRandomInt(minLv,maxLv)if(randLv==1)thenreturn udg_Creep_Lv1[GetRandomInt(0,udg_Creep_MaxLv1)]elseif(randLv==2)thenreturn udg_Creep_Lv2[GetRandomInt(0,udg_Creep_MaxLv2)]elseif(randLv==3)thenreturn udg_Creep_Lv3[GetRandomInt(0,udg_Creep_MaxLv3)]elseif(randLv==4)thenreturn udg_Creep_Lv4[GetRandomInt(0,udg_Creep_MaxLv4)]elseif(randLv==5)thenreturn udg_Creep_Lv5[GetRandomInt(0,udg_Creep_MaxLv5)]elseif(randLv==6)thenreturn udg_Creep_Lv6[GetRandomInt(0,udg_Creep_MaxLv6)]else
return udg_Creep_LvX[GetRandomInt(0,udg_Creep_MaxLvX)]endifendfunctionfunction SpawnFilter takes nothing returns booleanreturn(GetPlayerController(GetOwningPlayer(GetFilterUnit()))==MAP_CONTROL_CREEP)and(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)>0)
endfunctionfunction SpawnCreep___SpawnAct takes real dist,real facing,integer spawnAmount,integer creepId returns nothinglocal real x=PolarX(SpawnCreep___centerX,dist,facing)local real y=PolarY(SpawnCreep___centerY,dist,facing)local group g=CreateGroup()call GroupEnumUnitsInRange(g,x,y,SpawnCreep___countArea,Condition(function SpawnFilter))
if(GroupCountUnits(g)<SpawnCreep___maxSpawn)then
call CreateNUnitsXY(spawnAmount,creepId,SpawnCreep___p,x,y,AngleBetweenXY(x,y,SpawnCreep___centerX,SpawnCreep___centerY))endifcall DestroyGroup(g)
set g=nullendfunctionfunction SpawnCreep___SpawnAct2 takes real x,real y,integer spawnAmount,integer creepId returns nothinglocal group g=CreateGroup()call GroupEnumUnitsInRange(g,x,y,SpawnCreep___countArea,Condition(function SpawnFilter))
if(GroupCountUnits(g)<SpawnCreep___maxSpawn)then
call CreateNUnitsXY(spawnAmount,creepId,SpawnCreep___p,x,y,AngleBetweenXY(x,y,SpawnCreep___centerX,SpawnCreep___centerY))endifcall DestroyGroup(g)
set g=nullendfunctionfunction SpawnCreep___Act takes nothing returns nothinglocal real r=600.local integer i=8call SpawnCreep___SpawnAct(r,0,i,SpawnCreep___GetCreepId(1,3))call SpawnCreep___SpawnAct(r,90,i,SpawnCreep___GetCreepId(1,3))call SpawnCreep___SpawnAct(r,$B4,i,SpawnCreep___GetCreepId(1,3))
call SpawnCreep___SpawnAct(r,270,i,SpawnCreep___GetCreepId(1,3))
set r=1000.set i=6call SpawnCreep___SpawnAct(r,$E1,i,SpawnCreep___GetCreepId(1,4))
call SpawnCreep___SpawnAct(r,315,i,SpawnCreep___GetCreepId(1,4))
set r=1500.set i=4call SpawnCreep___SpawnAct(r,0,i,SpawnCreep___GetCreepId(4,6))call SpawnCreep___SpawnAct(r,90,i,SpawnCreep___GetCreepId(4,6))call SpawnCreep___SpawnAct(r,$B4,i,SpawnCreep___GetCreepId(4,6))
call SpawnCreep___SpawnAct(r,270,i,SpawnCreep___GetCreepId(4,6))
set r=1400.set i=6call SpawnCreep___SpawnAct(r,45,i,SpawnCreep___GetCreepId(1,4))call SpawnCreep___SpawnAct(r,$87,i,SpawnCreep___GetCreepId(1,4))
set i=6call SpawnCreep___SpawnAct2(-$9D8,675,i,SpawnCreep___GetCreepId(2,4))call SpawnCreep___SpawnAct2(-$9D8,-$672,i,SpawnCreep___GetCreepId(2,4))call SpawnCreep___SpawnAct2($992,-$672,i,SpawnCreep___GetCreepId(2,4))call SpawnCreep___SpawnAct2($992,675,i,SpawnCreep___GetCreepId(2,4))
if(udg_Creep_Rounds>3)thenset udg_Creep_Rounds=0set i=4call SpawnCreep___SpawnAct2(SpawnCreep___centerX,$6E4,i,SpawnCreep___GetCreepId(9,$A))call SpawnCreep___SpawnAct2(SpawnCreep___centerX,-$AF0,i,SpawnCreep___GetCreepId(9,$A))else
set udg_Creep_Rounds=udg_Creep_Rounds+1endifendfunctionfunction SpawnCreep___Init takes nothing returns nothing
set gg_trg_Spawn_Creep=CreateTrigger()call TriggerAddAction(gg_trg_Spawn_Creep,function SpawnCreep___Act)endfunctionfunction Trig_RemoveUnit_Conditions takes nothing returns booleanreturn((GetUnitAbilityLevelSwapped('Avul',GetDyingUnit())>0)or(GetUnitAbilityLevelSwapped('A005',GetDyingUnit())==1))endfunctionfunction Trig_RemoveUnit_Actions takes nothing returns nothingif(GetUnitAbilityLevelSwapped(udg_GlobalSkill[6],GetDyingUnit())==0)then
call TriggerSleepAction(3.)endifcall RemoveUnit(GetDyingUnit())endfunctionfunction InitTrig_Remove_Unit takes nothing returns nothingset gg_trg_Remove_Unit=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Unit,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Remove_Unit,Condition(function Trig_RemoveUnit_Conditions))call TriggerAddAction(gg_trg_Remove_Unit,function Trig_RemoveUnit_Actions)endfunctionfunction Trig_Golem_Spawn_Actions takes nothing returns nothinglocal player P=Player($C)local integer i=0local force Foclocal real x
local real y
loop
exitwhen i>=udg_Golem_Stackset x=RandomXInRect(gg_rct_Golem)set y=RandomYInRect(gg_rct_Golem)call CreateUnit(P,udg_Golem_Type,x,y,GetRandomReal(0,360))set i=i+1endloopset udg_Golem_Stack=0if(udg_Golem_SpawnAollow)thenset udg_Golem_Count=udg_Golem_Count+1if(udg_Golem_Count==4)thenset udg_Golem_Count=0set udg_Golem_SpawnAollow=falsecall Dynamic_Sound("Sound\\Interface\\MapPing")set x=GetRectCenterX(gg_rct_Golem)set y=GetRectCenterY(gg_rct_Golem)set Foc=GetPlayersMatching(Condition(function All_PlayerCond))call PingMinimapForForceEx(Foc,x,y,3.,1,'d',0,0)
call DestroyForce(Foc)set Foc=null
set bj_lastCreatedUnit=CreateUnit(P,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateUnit(P,udg_Golem_BossType[udg_Golem_Lv],x,y,270.)
if(udg_Golem_Lv>9)thencall DestroyTrigger(gg_trg_Golem_Spawn)set gg_trg_Golem_Spawn=nullcall DestroyTrigger(gg_trg_Golem_Die)set gg_trg_Golem_Die=nullcall DestroyTrigger(gg_trg_Golem_Leave)set gg_trg_Golem_Leave=nullcall DestroyTimer(udg_Golem_Timer)set udg_Golem_Timer=null
call RemoveRect(gg_rct_Golem)set gg_rct_Golem=nullcall EnableTrigger(gg_trg_Golem_Final)endifendifendifset P=nullendfunctionfunction InitTrig_Golem_Spawn takes nothing returns nothingset gg_trg_Golem_Spawn=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Golem_Spawn,udg_Golem_Timer)
call TriggerAddAction(gg_trg_Golem_Spawn,function Trig_Golem_Spawn_Actions)endfunctionfunction Trig_Golem_Leave_Conditions takes nothing returns booleanreturn Golem_Check(GetLeavingUnit())
endfunctionfunction Trig_Golem_Leave_Actions takes nothing returns nothinglocal unit u=GetLeavingUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
set bj_lastCreatedUnit=CreateUnit(Player($C),'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set x=GetRectCenterX(gg_rct_Golem)set y=GetRectCenterY(gg_rct_Golem)set bj_lastCreatedUnit=CreateUnit(Player($C),'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call IssueImmediateOrderById(u,$D0004)call SetUnitX(u,x)call SetUnitY(u,y)call SetUnitFacing(u,270.)set u=nullendfunctionfunction InitTrig_Golem_Leave takes nothing returns nothingset gg_trg_Golem_Leave=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Golem_Leave,gg_rct_Golem)
call TriggerAddCondition(gg_trg_Golem_Leave,Condition(function Trig_Golem_Leave_Conditions))
call TriggerAddAction(gg_trg_Golem_Leave,function Trig_Golem_Leave_Actions)endfunctionfunction Golem_Die_Cond takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('A03T',GetDyingUnit())==1)
endfunctionfunction Trig_Golem_Die_Actions takes nothing returns nothinglocal unit u=GetDyingUnit()local real x
local real y
local integer itemId
local integer iif(Golem_Check(u))thenset udg_Golem_SpawnAollow=trueset udg_Golem_Lv=(udg_Golem_Lv+1)set x=GetUnitX(u)set y=GetUnitY(u)set itemId='I06O'set i=0loop
set i=i+1call CreateItem(itemId,x,y)exitwhen(i>9)endloopelse
set udg_Golem_Stack=(udg_Golem_Stack+1)endifset u=nullendfunctionfunction InitTrig_Golem_Die takes nothing returns nothingset gg_trg_Golem_Die=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Golem_Die,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Golem_Die,Condition(function Golem_Die_Cond))call TriggerAddAction(gg_trg_Golem_Die,function Trig_Golem_Die_Actions)endfunctionfunction Trig_Golem_Final_Conditions takes nothing returns booleanreturn(GetUnitTypeId(GetDyingUnit())==udg_Golem_BossType[$A])endfunctionfunction Trig_Golem_Final_Actions takes nothing returns nothinglocal unit u=GetDyingUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
local force Foc=GetPlayersMatching(Condition(function All_PlayerCond))call CreateItem('I05W',x,y)call CreateItem('I05V',x,y)call PingMinimapForForceEx(Foc,x,y,3.,1,'d',0,0)
call DestroyForce(Foc)set Foc=null
set udg_Golem_Final=true
call FinalBossCheck()call TriggerExecute(gg_trg_Shop5_Upgrade)call DestroyTrigger(gg_trg_Golem_Final)set gg_trg_Golem_Final=nullendfunctionfunction InitTrig_Golem_Final takes nothing returns nothingset gg_trg_Golem_Final=CreateTrigger()call DisableTrigger(gg_trg_Golem_Final)call TriggerRegisterAnyUnitEventBJ(gg_trg_Golem_Final,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Golem_Final,Condition(function Trig_Golem_Final_Conditions))
call TriggerAddAction(gg_trg_Golem_Final,function Trig_Golem_Final_Actions)endfunctionfunction Trig_BossSetup_Actions takes nothing returns nothinglocal integer Boss_Rand=GetRandomInt(0,9)local rect Boss_Rect1=Rect(-$E80,$CA0,-$E00,$D20)local rect Boss_Rect2=Rect($D80,$CA0,$E00,$D20)local location Boss_Point1=GetRectCenter(Boss_Rect1)
local location Boss_Point2=GetRectCenter(Boss_Rect2)
call RemoveRect(Boss_Rect1)set Boss_Rect1=nullcall RemoveRect(Boss_Rect2)set Boss_Rect2=nullcall DestroyTimer(udg_BossTimer)
set udg_BossTimer=nullset udg_Boss_SpawnDelay=60.set udg_Boss_Lv[0]=$Aset udg_Boss_Lv[1]=$Aset udg_Boss_MaxRand=9set udg_Boss_Type[0]='H00Y'set udg_Boss_Type[1]='H00T'set udg_Boss_Type[2]='H00X'set udg_Boss_Type[3]='H010'set udg_Boss_Type[4]='H00W'set udg_Boss_Type[5]='H00U'set udg_Boss_Type[6]='H00Z'set udg_Boss_Type[7]='H00S'set udg_Boss_Type[8]='H00V'set udg_Boss_Type[9]='H011'call CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point1,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call CreateNUnitsAtLoc(1,udg_Boss_Type[Boss_Rand],Player($C),Boss_Point1,270.)call SetHeroLevelBJ(bj_lastCreatedUnit,udg_Boss_Lv[0],false)
set Boss_Rand=GetRandomInt(0,9)call CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point2,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call CreateNUnitsAtLoc(1,udg_Boss_Type[Boss_Rand],Player($C),Boss_Point2,270.)call SetHeroLevelBJ(bj_lastCreatedUnit,udg_Boss_Lv[1],false)
call RemoveLocation(Boss_Point1)
set Boss_Point1=null
call RemoveLocation(Boss_Point2)
set Boss_Point2=null
set Boss_Rand=0call EnableTrigger(gg_trg_Boss_Spawn)call EnableTrigger(gg_trg_Boss_BackL)call EnableTrigger(gg_trg_Boss_BackR)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Boss_Setup takes nothing returns nothingset gg_trg_Boss_Setup=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Boss_Setup,udg_BossTimer)call TriggerAddAction(gg_trg_Boss_Setup,function Trig_BossSetup_Actions)
endfunctionfunction Trig_BossSpawn_Conditions takes nothing returns boolean
return(GetUnitAbilityLevel(GetDyingUnit(),'A03U')>0)
endfunctionfunction Trig_BossSpawn_Actions takes nothing returns nothinglocal unit u=GetDyingUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player plocal rect Boss_Rect
local integer iif(GetRandomInt(0,2)==0)then
call CreateItem('I05O',x,y)else
call CreateItem('I05N',x,y)call CreateItem('I05N',x,y)call CreateItem('I05N',x,y)call CreateItem('I05N',x,y)call CreateItem('I05N',x,y)endifif(udg_Boss_Check[0] and udg_Boss_Check[1])thenset u=nullcall DestroyTrigger(gg_trg_Boss_BackL)call DestroyTrigger(gg_trg_Boss_BackR)call FinalBossCheck()call DestroyTrigger(GetTriggeringTrigger())returnendifset i=GetRandomInt(0,udg_Boss_MaxRand)set p=Player($C)
if(RectContainsUnit(gg_rct_BossLeft,u)and udg_Boss_Check[0]==false)thencall TriggerSleepAction(udg_Boss_SpawnDelay)
set udg_Boss_Lv[0]=(udg_Boss_Lv[0]+$A)set Boss_Rect=Rect(-$E80,$CA0,-$E00,$D20)set x=GetRectCenterX(Boss_Rect)set y=GetRectCenterY(Boss_Rect)call RemoveRect(Boss_Rect)set Boss_Rect=nullset bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,udg_Boss_Type[i],x,y,270.)call SetHeroLevel(bj_lastCreatedUnit,udg_Boss_Lv[0],false)if(udg_Boss_Lv[0]>99)thenset udg_Boss_Check[0]=trueendifelse
if(RectContainsUnit(gg_rct_BossRight,u)and udg_Boss_Check[1]==false)then
call TriggerSleepAction(udg_Boss_SpawnDelay)
set udg_Boss_Lv[1]=(udg_Boss_Lv[1]+$A)set Boss_Rect=Rect($D80,$CA0,$E00,$D20)set x=GetRectCenterX(Boss_Rect)set y=GetRectCenterY(Boss_Rect)call RemoveRect(Boss_Rect)set Boss_Rect=nullset bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,udg_Boss_Type[i],x,y,270.)call SetHeroLevel(bj_lastCreatedUnit,udg_Boss_Lv[1],false)if(udg_Boss_Lv[1]>99)thenset udg_Boss_Check[1]=trueendifendifendifset u=nullset p=nullendfunctionfunction InitTrig_Boss_Spawn takes nothing returns nothingset gg_trg_Boss_Spawn=CreateTrigger()call DisableTrigger(gg_trg_Boss_Spawn)call TriggerRegisterAnyUnitEventBJ(gg_trg_Boss_Spawn,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Boss_Spawn,Condition(function Trig_BossSpawn_Conditions))call TriggerAddAction(gg_trg_Boss_Spawn,function Trig_BossSpawn_Actions)
endfunctionfunction Trig_BossBackL_Conditions takes nothing returns boolean
return(GetUnitAbilityLevelSwapped('A03U',GetTriggerUnit())==1)endfunctionfunction Trig_BossBackL_Actions takes nothing returns nothinglocal unit Boss_Unit=GetTriggerUnit()local rect Boss_Rect=Rect(-$E80,$CA0,-$E00,$D20)
local location Boss_Point1=GetUnitLoc(Boss_Unit)
local location Boss_Point2=GetRectCenter(Boss_Rect)call RemoveRect(Boss_Rect)set Boss_Rect=nullcall CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point1,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call RemoveLocation(Boss_Point1)
set Boss_Point1=null
call CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point2,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call SetUnitPositionLocFacingBJ(Boss_Unit,Boss_Point2,270.)call RemoveLocation(Boss_Point2)
set Boss_Point2=null
set Boss_Unit=nullendfunctionfunction InitTrig_Boss_BackL takes nothing returns nothingset gg_trg_Boss_BackL=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Boss_BackL,gg_rct_BossLeft)call TriggerAddCondition(gg_trg_Boss_BackL,Condition(function Trig_BossBackL_Conditions))call TriggerAddAction(gg_trg_Boss_BackL,function Trig_BossBackL_Actions)
endfunctionfunction Trig_BossBackR_Conditions takes nothing returns boolean
return(GetUnitAbilityLevelSwapped('A03U',GetTriggerUnit())==1)endfunctionfunction Trig_BossBackR_Actions takes nothing returns nothinglocal unit Boss_Unit=GetTriggerUnit()local rect Boss_Rect=Rect($D80,$CA0,$E00,$D20)local location Boss_Point1=GetUnitLoc(Boss_Unit)
local location Boss_Point2=GetRectCenter(Boss_Rect)call RemoveRect(Boss_Rect)set Boss_Rect=nullcall CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point1,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call RemoveLocation(Boss_Point1)
set Boss_Point1=null
call CreateNUnitsAtLoc(1,'h004',Player($C),Boss_Point2,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d','d','d',0)call SetUnitPositionLocFacingBJ(Boss_Unit,Boss_Point2,270.)call RemoveLocation(Boss_Point2)
set Boss_Point2=null
set Boss_Unit=nullendfunctionfunction InitTrig_Boss_BackR takes nothing returns nothingset gg_trg_Boss_BackR=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Boss_BackR,gg_rct_BossRight)call TriggerAddCondition(gg_trg_Boss_BackR,Condition(function Trig_BossBackR_Conditions))call TriggerAddAction(gg_trg_Boss_BackR,function Trig_BossBackR_Actions)
endfunctionfunction Trig_FinalBoss_Ability1_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0GU')endfunctionfunction Trig_FinalBoss_Ability1_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local real array xylocal real array rlocal real dmg=40000.local real area=800.
local integer i=1local integer jlocal group glocal unit pickedset xy[0]=GetUnitX(u)set xy[1]=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h01H',xy[0],xy[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,10.,10.,10.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h01A',xy[0],xy[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)loop
set r[0]=(I2R(i)*200.)set j=0loop
set r[1]=(I2R(j)*30.)set xy[2]=PolarX(xy[0],r[0],r[1])set xy[3]=PolarY(xy[1],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(p,'h0CT',xy[2],xy[3],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set j=j+1exitwhen j>$Bendloopset i=i+1exitwhen i>4
endloopcall DestroyTreeXY(xy[0],xy[1],area)
set g=CreateGroupXY(xy[0],xy[1],area,p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",picked,"origin"))call UnitDamageTarget(u,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset u=nullset p=nullendfunctionfunction InitTrig_FinalBoss_Ability1 takes nothing returns nothingset gg_trg_FinalBoss_Ability1=CreateTrigger()call TriggerAddCondition(gg_trg_FinalBoss_Ability1,Condition(function Trig_FinalBoss_Ability1_Conditions))call TriggerAddAction(gg_trg_FinalBoss_Ability1,function Trig_FinalBoss_Ability1_Actions)endfunctionfunction Trig_FinalBoss_Ability2_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0GV')endfunctionfunction Trig_FinalBoss_Ability2_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player p=GetOwningPlayer(u)local rect reclocal real array xylocal real dmg=99999.local integer iset xy[0]=GetUnitX(u2)set xy[1]=GetUnitY(u2)set rec=CreateRectXY(xy[0],xy[1],3500.,3500.)set bj_lastCreatedUnit=CreateUnit(p,'h00E',xy[0],xy[1],GetRandomReal(-55,75))call SetUnitScale(bj_lastCreatedUnit,6.,6.,6.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h0DJ',xy[0],xy[1],GetRandomReal(-55,75))call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',10.)set i=0loop
set xy[2]=RandomXInRect(rec)
set xy[3]=RandomYInRect(rec)
set bj_lastCreatedUnit=CreateUnit(p,'h0DK',xy[2],xy[3],GetRandomReal(-55,75))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',10.)set i=i+1exitwhen i>22endloopcall DisplayText(I2S(R2I(dmg))+"!",u2,.027,true,$FF,0,0,$FF)
call UnitDamageTarget(u,u2,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call RemoveRect(rec)
set rec=null
set u=nullset p=nullendfunctionfunction InitTrig_FinalBoss_Ability2 takes nothing returns nothingset gg_trg_FinalBoss_Ability2=CreateTrigger()call TriggerAddCondition(gg_trg_FinalBoss_Ability2,Condition(function Trig_FinalBoss_Ability2_Conditions))call TriggerAddAction(gg_trg_FinalBoss_Ability2,function Trig_FinalBoss_Ability2_Actions)endfunctionfunction Trig_FinalBoss_Die takes nothing returns nothinglocal unit u=GetDyingUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
call CreateItem('I05V',x,y)call CreateItem('I06K',x,y)set u=nullcall TriggerSleepAction(6.)call DestroyTrigger(udg_FinalBoss_Trigger[0])call DestroyTrigger(udg_FinalBoss_Trigger[1])set udg_FinalBoss_Trigger[0]=nullset udg_FinalBoss_Trigger[1]=nullendfunctionfunction Trig_FinalBoss_Skill takes nothing returns nothinglocal unit akted=GetTriggerUnit()local unit atker=GetAttacker()call IssueTargetOrderById(akted,$D007F,atker)call IssueImmediateOrderById(akted,$D009F)set akted=nullset atker=nullcall DisableTrigger(udg_FinalBoss_Trigger[0])call TriggerSleepAction(5.)call EnableTrigger(udg_FinalBoss_Trigger[0])
endfunctionfunction Trig_FinalBoss_Actions takes nothing returns nothinglocal real shakePow=25.local real shakeTime=1.5
local integer ilocal integer jlocal real x=GetRectCenterX(gg_rct_Center)local real y=GetRectCenterY(gg_rct_Center)local real x2local real y2local real array rlocal real dmg=99999.local force flocal group glocal unit pickedlocal player p=Player($C)local unit final_boss=CreateUnit(p,'H0AA',x,y,GetRandomReal(0,360))call UnitAddType(final_boss,UNIT_TYPE_ANCIENT)call UnitAddAbility(final_boss,'A0GT')set x=GetUnitX(final_boss)set y=GetUnitY(final_boss)call Dynamic_Sound("Sound\\Interface\\MapPing")set f=GetPlayersMatching(Condition(function All_PlayerCond))
call PingMinimapForForceEx(f,x,y,3.,1,'d',0,0)call DestroyForce(f)
set f=nullcall SetHeroLevel(final_boss,'d',false)call ModifyHeroStat(0,final_boss,2,8585)
call ModifyHeroStat(1,final_boss,2,9267)
call ModifyHeroStat(2,final_boss,2,6755)
call UnitAddItemByIdSwapped('I05Z',final_boss)call UnitAddItemByIdSwapped('I05I',final_boss)set bj_lastCreatedUnit=CreateUnit(p,'h01H',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,10.,10.,10.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h01A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call Dynamic_Sound("Sounds\\Explosion.mp3")set i=1loop
set r[0]=(I2R(i)*200.)set j=0loop
set r[1]=(I2R(j)*30.)set x2=PolarX(x,r[0],r[1])set y2=PolarY(y,r[0],r[1])set bj_lastCreatedUnit=CreateUnit(p,'h0CT',x2,y2,bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set j=j+1exitwhen j>$Bendloopset i=i+1exitwhen i>4
endloopset g=CreateGroup()call GroupEnumUnitsInRange(g,x,y,800.,null)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(GetOwningPlayer(picked)==Player($C))thenif(GetWidgetLife(picked)>0 and GetWidgetLife(picked)<$7D0)thencall UnitDamageTarget(final_boss,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endifelse
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",picked,"origin"))if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(dmg))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(final_boss,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset i=0loop
call CameraSetEQNoiseForPlayer(Player(i),shakePow)set i=i+1exitwhen i>$Bendloopcall StartTimerBJ(udg_ShakeTimer1,false,shakeTime)call StartTimerBJ(udg_ShakeTimer2,false,shakeTime)call StartTimerBJ(udg_ShakeTimer3,false,shakeTime)call StartTimerBJ(udg_ShakeTimer4,false,shakeTime)call StartTimerBJ(udg_ShakeTimer5,false,shakeTime)call StartTimerBJ(udg_ShakeTimer6,false,shakeTime)call StartTimerBJ(udg_ShakeTimer7,false,shakeTime)call StartTimerBJ(udg_ShakeTimer8,false,shakeTime)call StartTimerBJ(udg_ShakeTimer9,false,shakeTime)call StartTimerBJ(udg_ShakeTimer10,false,shakeTime)call StartTimerBJ(udg_ShakeTimer11,false,shakeTime)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30.,(GetHeroProperName(final_boss)+" has entered the Arena!!"))call TriggerRegisterUnitEvent(gg_trg_FinalBoss_Ability1,final_boss,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gg_trg_FinalBoss_Ability2,final_boss,EVENT_UNIT_SPELL_EFFECT)set udg_FinalBoss_Trigger[0]=CreateTrigger()
call TriggerRegisterUnitEvent(udg_FinalBoss_Trigger[0],final_boss,EVENT_UNIT_ATTACKED)call TriggerAddAction(udg_FinalBoss_Trigger[0],function Trig_FinalBoss_Skill)set udg_FinalBoss_Trigger[1]=CreateTrigger()
call TriggerRegisterUnitEvent(udg_FinalBoss_Trigger[1],final_boss,EVENT_UNIT_DEATH)call TriggerAddAction(udg_FinalBoss_Trigger[1],function Trig_FinalBoss_Die)set p=nullcall TriggerSleepAction(20.)
if(GetWidgetLife(final_boss)>0)thencall UnitAddAbility(final_boss,'A0GU')call UnitAddAbility(final_boss,'A0GV')endifset final_boss=nullendfunctionfunction InitTrig_FinalBoss takes nothing returns nothingset gg_trg_FinalBoss=CreateTrigger()
call TriggerAddAction(gg_trg_FinalBoss,function Trig_FinalBoss_Actions)endfunctionfunction Trig_GateBoss_Team1 takes nothing returns booleanreturn(GetPlayerRace(GetEnumPlayer())==RACE_HUMAN)endfunctionfunction Trig_GateBoss_Team2 takes nothing returns booleanreturn(GetPlayerRace(GetEnumPlayer())==RACE_NIGHTELF)endfunctionfunction Trig_GateBoss_DieBonus takes nothing returns nothingcall AdjustPlayerStateBJ(9999,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction Trig_GateBoss_Die takes nothing returns nothing
local unit u=GetDyingUnit()local unit killer=GetKillingUnit()local integer slot=GetPlayerId(GetOwningPlayer(killer))local force f=GetPlayersMatching(Condition(function All_PlayerCond))
local force f2set udg_GateBoss_Integer=udg_GateBoss_Integer+1call FinalBossCheck()call Dynamic_Sound("Sound\\Interface\\MapPing")call PingMinimapForForceEx(f,GetUnitX(u),GetUnitY(u),3.,1,'d',0,0)if(slot<6)thenset f2=GetPlayersMatching(Condition(function Trig_GateBoss_Team1))call DisplayTimedTextToForce(f,15.,(GetHeroProperName(u)+" (level "+I2S(GetHeroLevel(u))+") has been slain by Team 1 (+9999 gold each Player) !"))call ForForce(f2,function Trig_GateBoss_DieBonus)call DestroyForce(f2)set f2=nullelseif(slot<$C)thenset f2=GetPlayersMatching(Condition(function Trig_GateBoss_Team2))call DisplayTimedTextToForce(f,15.,(GetHeroProperName(u)+" (level "+I2S(GetHeroLevel(u))+") has been slain by Team 2 (+9999 gold each Player) !"))call ForForce(f2,function Trig_GateBoss_DieBonus)call DestroyForce(f2)set f2=nullendifcall DestroyForce(f)
set f=nullset killer=nullcall TriggerSleepAction(3.)call RemoveUnit(u)set u=nullendfunctionfunction Trig_Gate_Boss_Conditions takes nothing returns boolean
local unit u=GetTriggerUnit()if(IsUnitType(u,UNIT_TYPE_HERO)==false)thenreturn false
elseif(GetOwningPlayer(u)==Player($C))thenreturn false
elseif(GetUnitAbilityLevel(u,udg_GlobalSkill[0])>0)thenreturn false
else
return trueendifendfunctionfunction Trig_Gate_Boss_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit gate_boss
local player p=GetOwningPlayer(u)local real x=GetUnitX(gg_unit_n01Y_0097)
local real y=GetUnitY(gg_unit_n01Y_0097)
local rect recset bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(GetHeroLevel(u)<30)thencall Alert(p,"|c00ff0303You must level 30 or higher.|r")
set rec=Rect(-$DA0,-$9A0,-$C80,-$880)set x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
else
if(udg_GateBoss_Integer==0)thenset udg_GateBoss_Integer=1set gate_boss=CreateUnit(Player($C),udg_Player_HeroType[GetRandomInt(0,udg_Player_MaxHeroes)],3153.,6330.5,270.)
call SetHeroLevel(gate_boss,'d',false)call UnitAddType(gate_boss,UNIT_TYPE_ANCIENT)call ModifyHeroStat(0,gate_boss,2,5000)call ModifyHeroStat(1,gate_boss,2,5000)call ModifyHeroStat(2,gate_boss,2,5000)call UnitAddItemByIdSwapped('I05V',gate_boss)call UnitAddItemByIdSwapped('I051',gate_boss)set udg_GateBoss_Trigger[0]=CreateTrigger()call TriggerRegisterUnitEvent(udg_GateBoss_Trigger[0],gate_boss,EVENT_UNIT_DEATH)call TriggerAddAction(udg_GateBoss_Trigger[0],function Trig_GateBoss_Die)set gate_boss=nullelseif(udg_GateBoss_Integer==2)thenset udg_GateBoss_Integer=3set gate_boss=CreateUnit(Player($C),udg_Player_HeroType[GetRandomInt(0,udg_Player_MaxHeroes)],3153.,6330.5,270.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",gate_boss,"origin"))call SetHeroLevel(gate_boss,'d',false)call ModifyHeroStat(0,gate_boss,2,6500)call ModifyHeroStat(1,gate_boss,2,6500)call ModifyHeroStat(2,gate_boss,2,6500)call UnitAddItemByIdSwapped('I06A',gate_boss)call UnitAddItemByIdSwapped('I051',gate_boss)call UnitAddItemByIdSwapped('I06F',gate_boss)set udg_GateBoss_Trigger[1]=CreateTrigger()call TriggerRegisterUnitEvent(udg_GateBoss_Trigger[1],gate_boss,EVENT_UNIT_DEATH)call TriggerAddAction(udg_GateBoss_Trigger[1],function Trig_GateBoss_Die)set gate_boss=nullendifset x=3135.set y=5152.endifcall SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))set u=nullset p=nullendfunctionfunction InitTrig_Gate_Boss takes nothing returns nothingset gg_trg_Gate_Boss=CreateTrigger()
call TriggerRegisterUnitInRangeSimple(gg_trg_Gate_Boss,70.,gg_unit_n01Y_0097)call TriggerAddCondition(gg_trg_Gate_Boss,Condition(function Trig_Gate_Boss_Conditions))
call TriggerAddAction(gg_trg_Gate_Boss,function Trig_Gate_Boss_Actions)endfunctionfunction Trig_Gate_Boss_Back_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local rect reclocal real x=GetUnitX(gg_unit_n00Q_0020)
local real y=GetUnitY(gg_unit_n00Q_0020)
set bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set rec=Rect(-$DA0,-$9A0,-$C80,-$880)set x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
call SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))set u=nullset p=nullendfunctionfunction InitTrig_Gate_Boss_Back takes nothing returns nothingset gg_trg_Gate_Boss_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Gate_Boss_Back,70.,gg_unit_n00Q_0020)call TriggerAddCondition(gg_trg_Gate_Boss_Back,Condition(function GateTeleportCond))
call TriggerAddAction(gg_trg_Gate_Boss_Back,function Trig_Gate_Boss_Back_Actions)endfunctionfunction Trig_Forgot_Init_Actions takes nothing returns nothinglocal unit forg=CreateUnit(Player($C),'n020',5760,-$D40,270.)call TriggerRegisterUnitEvent(gg_trg_Forgot_Die,forg,EVENT_UNIT_DEATH)set forg=nullcall DestroyTrigger(gg_trg_Forgot_Init)endfunctionfunction InitTrig_Forgot_Init takes nothing returns nothingset gg_trg_Forgot_Init=CreateTrigger()call TriggerAddAction(gg_trg_Forgot_Init,function Trig_Forgot_Init_Actions)endfunctionfunction Trig_Forgot_Boss_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local real x=GetUnitX(gg_unit_n01Y_0099)
local real y=GetUnitY(gg_unit_n01Y_0099)
local rect recset bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(GetHeroLevel(u)<30)thencall Alert(p,"|c00ff0303You must level 30 or higher.|r")
set rec=Rect($BC0,-$9A0,$CE0,-$880)else
set rec=Rect(5728,-$FC0,6016,-$EA0)endifset x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
call SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))set u=nullset p=nullendfunctionfunction InitTrig_Forgot_Boss takes nothing returns nothingset gg_trg_Forgot_Boss=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Forgot_Boss,70.,gg_unit_n01Y_0099)call TriggerAddCondition(gg_trg_Forgot_Boss,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Forgot_Boss,function Trig_Forgot_Boss_Actions)endfunctionfunction Trig_Forgot_Back_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local rect reclocal real x=GetUnitX(gg_unit_n00Q_0100)
local real y=GetUnitY(gg_unit_n00Q_0100)
set bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set rec=Rect($BC0,-$9A0,$CE0,-$880)set x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
call SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))set u=nullset p=nullendfunctionfunction InitTrig_Forgot_Back takes nothing returns nothingset gg_trg_Forgot_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Forgot_Back,70.,gg_unit_n00Q_0100)call TriggerAddCondition(gg_trg_Forgot_Back,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Forgot_Back,function Trig_Forgot_Back_Actions)endfunctionfunction Trig_Forgot_Die_Actions takes nothing returns nothinglocal unit u=GetDyingUnit()local unit killer=GetKillingUnit()local force f=GetPlayersMatching(Condition(function All_PlayerCond))
local real x=GetUnitX(u)
local real y=GetUnitY(u)
local integer i=0call CreateItem('I06E',x,y)loop
set i=i+1call CreateItem('I05N',x,y)exitwhen i>9
endloopset udg_Forgot_Bool=true
call FinalBossCheck()call Dynamic_Sound("Sound\\Interface\\MapPing")call PingMinimapForForceEx(f,GetUnitX(u),GetUnitY(u),3.,1,'d',0,0)call DisplayTimedTextToForce(f,15.,(GetUnitName(u)+" has been slain by "+GetHeroProperName(killer)+" !"))call DestroyForce(f)
set f=nullset killer=nullcall TriggerSleepAction(3.)call RemoveUnit(u)set u=nullcall DestroyTrigger(gg_trg_Forgot_Die)endfunctionfunction InitTrig_Forgot_Die takes nothing returns nothingset gg_trg_Forgot_Die=CreateTrigger()call TriggerAddAction(gg_trg_Forgot_Die,function Trig_Forgot_Die_Actions)endfunctionfunction Trig_Divine_Init_GroupAct takes nothing returns nothing
local unit picked=GetEnumUnit()local integer id=GetHandleId(picked)
call GroupAddUnit(udg_Divine_Group,picked)call SetUnitTimeScale(picked,.0)
call SetUnitInvulnerable(picked,true)call PauseUnit(picked,true)set picked=nullendfunctionfunction Trig_Divine_Init_Actions takes nothing returns nothinglocal group g=GetUnitsInRectAll(gg_rct_Divine_Area)call ForGroupBJ(g,function Trig_Divine_Init_GroupAct)call DestroyGroup(g)
set g=nullcall DestroyTrigger(gg_trg_Divine_Init)endfunctionfunction InitTrig_Divine_Init takes nothing returns nothingset gg_trg_Divine_Init=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Divine_Init,10.)
call TriggerAddAction(gg_trg_Divine_Init,function Trig_Divine_Init_Actions)endfunctionfunction Trig_DivineWarp_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local rect reclocal real x=GetUnitX(u)
local real y=GetUnitY(u)
set bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(GetHeroLevel(u)<20)thencall Alert(p,"|c00ff0303You must level 20 or higher.|r")
set rec=Rect(-256,-$D60,$A0,-$BE0)else
call SetUnitState(u,UNIT_STATE_MANA,.0)set rec=Rect(-6624,-7072,-6208,-6784)if(IsTriggerEnabled(gg_trg_Divine_Death)==false)then
call EnableTrigger(gg_trg_Divine_Death)endifendifset x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
set bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)set u=nullset p=nullendfunctionfunction InitTrig_Divine_Warp takes nothing returns nothingset gg_trg_Divine_Warp=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Divine_Warp,100.,gg_unit_n01C_0098)
call TriggerAddCondition(gg_trg_Divine_Warp,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Divine_Warp,function Trig_DivineWarp_Actions)endfunctionfunction Trig_DivineSword_Conditions takes nothing returns booleanreturn(GetManipulatedItem()==gg_item_I077_0102)endfunctionfunction Trig_DivineSword_Actions takes nothing returns nothinglocal unit u=GetManipulatingUnit()local force f=GetPlayersMatching(Condition(function All_PlayerCond))
local unit pickedlocal group gcall SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)*.5))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\HowlOfTerror\\HowlCaster.mdx",u,"origin"))set udg_Divine_Bool=true
call FinalBossCheck()call Dynamic_Sound("Sound\\Interface\\MapPing")call PingMinimapForForceEx(f,GetUnitX(u),GetUnitY(u),3.,1,'d',0,0)call DestroyForce(f)
set f=nullset g=CreateGroup()call GroupAddGroup(udg_Divine_Group,g)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call SetUnitTimeScale(picked,1.)
call SetUnitInvulnerable(picked,false)call PauseUnit(picked,false)
call SetUnitVertexColor(picked,$FF,$FF,$FF,$FF)call IssueTargetOrderById(picked,$D000F,u)set picked=nullendloopcall DestroyGroup(g)
set g=nullset u=nullcall GroupClear(udg_Divine_Group)call DestroyTrigger(gg_trg_DivineSword)endfunctionfunction InitTrig_DivineSword takes nothing returns nothingset gg_trg_DivineSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_DivineSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_DivineSword,Condition(function Trig_DivineSword_Conditions))
call TriggerAddAction(gg_trg_DivineSword,function Trig_DivineSword_Actions)endfunctionfunction Trig_Divine_Back_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local rect reclocal real x=GetUnitX(gg_unit_n00Q_0019)
local real y=GetUnitY(gg_unit_n00Q_0019)
set bj_lastCreatedUnit=CreateUnit(p,'h004',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set rec=Rect(-256,-$D60,$A0,-$BE0)set x=RandomXInRect(rec)
set y=RandomYInRect(rec)
call RemoveRect(rec)
set rec=null
call SetUnitPosition(u,x,y)call PanCameraToTimedXYForPlayer(p,x,y,0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u,"origin"))if(UnitReplaceItemId(u,DivineItemId,'I05V'))then
call DisableTrigger(gg_trg_Divine_Death)
endifset u=nullset p=nullendfunctionfunction InitTrig_Divine_Back takes nothing returns nothingset gg_trg_Divine_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Divine_Back,70.,gg_unit_n00Q_0019)call TriggerAddCondition(gg_trg_Divine_Back,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Divine_Back,function Trig_Divine_Back_Actions)endfunctionfunction Trig_Divine_Death_Group takes nothing returns nothinglocal item tempItem=GetEnumItem()if(GetItemTypeId(tempItem)==DivineItemId)thencall RemoveItem(tempItem)call CreateDivine()endifset tempItem=nullendfunctionfunction Trig_Divine_Death_Conditions takes nothing returns booleanlocal unit u=GetDyingUnit()if(IsUnitType(u,UNIT_TYPE_HERO))and(RectContainsUnit(gg_rct_Divine_Area,u))thencall EnumItemsInRect(gg_rct_Divine_Area,null,function Trig_Divine_Death_Group)endifset u=nullreturn false
endfunctionfunction InitTrig_Divine_Death takes nothing returns nothing
set gg_trg_Divine_Death=CreateTrigger()call DisableTrigger(gg_trg_Divine_Death)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Divine_Death,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Divine_Death,Condition(function Trig_Divine_Death_Conditions))endfunctionfunction BG_ForceCond takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)
endfunctionfunction BG_ForceAct takes nothing returns nothingcall AdjustPlayerStateBJ($BB8,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction Trig_Bonus_Gold_Actions takes nothing returns nothinglocal force BG_Force=GetPlayersMatching(Condition(function BG_ForceCond))call DisplayTextToForce(BG_Force,"|CFFFFFC00Bonus reward giving away 3000 golds for every player.|r")call ForForce(BG_Force,function BG_ForceAct)
call DestroyForce(BG_Force)set BG_Force=nullcall Dynamic_Sound("Sound\\Interface\\SecretFound.wav")endfunctionfunction InitTrig_Bonus_Gold takes nothing returns nothingset gg_trg_Bonus_Gold=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Bonus_Gold,660.)
call TriggerAddAction(gg_trg_Bonus_Gold,function Trig_Bonus_Gold_Actions)endfunctionfunction Item_Stacking_Cond takes nothing returns booleanreturn GetItemCharges(GetManipulatedItem())>0endfunctionfunction Item_Stacking_Actions takes nothing returns nothing
local item it=GetManipulatedItem()local unit u=GetManipulatingUnit()local integer ittype=GetItemTypeId(it)local item itemslotlocal integer itclocal integer itc2local integer totallocal integer reverselocal integer i=0loop
set itemslot=UnitItemInSlot(u,i)
if(GetItemTypeId(itemslot)==ittype)thenset itc=GetItemCharges(itemslot)
set itc2=GetItemCharges(it)if(itc<3 and it!=itemslot)thenset total=itc+itc2if(total>3)thenset reverse=3-itccall SetItemCharges(itemslot,(itc+reverse))call SetItemCharges(it,(itc2-reverse))else
call RemoveItem(it)call SetItemCharges(itemslot,(itc+itc2))
endifendifendifset i=i+1exitwhen i>5
endloopset it=nullset itemslot=nullset u=nullset ittype=0
set itc=0set i=0endfunctionfunction InitTrig_Item_Stacking takes nothing returns nothingset gg_trg_Item_Stacking=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Item_Stacking,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Item_Stacking,Condition(function Item_Stacking_Cond))call TriggerAddAction(gg_trg_Item_Stacking,function Item_Stacking_Actions)endfunctionfunction Trig_Remove_Item_Conditions takes nothing returns booleanreturn((GetItemType(GetManipulatedItem())==ITEM_TYPE_UNKNOWN)or(GetItemType(GetManipulatedItem())==ITEM_TYPE_POWERUP))endfunctionfunction Trig_Remove_Item_Actions takes nothing returns nothingcall RemoveItem(GetManipulatedItem())endfunctionfunction InitTrig_Remove_Item takes nothing returns nothingset gg_trg_Remove_Item=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Item,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Remove_Item,Condition(function Trig_Remove_Item_Conditions))
call TriggerAddAction(gg_trg_Remove_Item,function Trig_Remove_Item_Actions)endfunctionfunction RefreshRing___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==RefreshRing___skId)endfunctionfunction RefreshRing___Act takes nothing returns nothing
local unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)call TriggerSleepAction(.0)if(RectContainsUnit(gg_rct_Divine_Area,u))thencall Alert(p,"|c00ff0303You cannot use this item in this area.|r")else
set bj_lastCreatedUnit=CreateUnit(p,'u003',GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A015')call IssueImmediateOrderById(bj_lastCreatedUnit,$D0135)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset u=nullendfunctionfunction RefreshRing___Init takes nothing returns nothingset gg_trg_Refresh_Ring=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Refresh_Ring,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Refresh_Ring,Condition(function RefreshRing___Cond))
call TriggerAddAction(gg_trg_Refresh_Ring,function RefreshRing___Act)endfunctionfunction Trig_Permanent_Bonus_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06B' and IsUnitType(GetManipulatingUnit(),UNIT_TYPE_HERO))!=nullendfunctionfunction Trig_Permanent_Bonus_Actions takes nothing returns nothinglocal unit u=GetManipulatingUnit()local player p=GetOwningPlayer(u)local force f=GetForceOfPlayer(p)local integer slot=((1+GetPlayerId(GetOwningPlayer(u)))-1)if(udg_Player_PermanentBonus[slot]!=0)thencall DisplayTimedTextToForce(f,4.,"|cffffcc00This item works only once|r")call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER)+30)elseif(GetHeroLevel(u)<50)thencall DisplayTimedTextToForce(f,4.,"|cffffcc00Your level is too low|r")call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER)+30)elseif(GetHeroSkillPoints(u)>0)thencall DisplayTimedTextToForce(f,4.,"|cffffcc00You still have unlearned ability|r")call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER)+30)else
if(AttributeCheck(u)==0)then
call UnitAddAbility(u,udg_PermanentBonus_STR)call UnitMakeAbilityPermanent(u,true,udg_PermanentBonus_STR)
set udg_Player_PermanentBonus[slot]=1elseif(AttributeCheck(u)==1)then
call UnitAddAbility(u,udg_PermanentBonus_AGI)call UnitMakeAbilityPermanent(u,true,udg_PermanentBonus_AGI)
set udg_Player_PermanentBonus[slot]=2else
call UnitAddAbility(u,udg_PermanentBonus_INT)call UnitMakeAbilityPermanent(u,true,udg_PermanentBonus_INT)
set udg_Player_PermanentBonus[slot]=3endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",u,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Taunt\\TauntCaster.mdl",u,"origin"))
endifcall DestroyForce(f)
set f=nullset u=nullset p=nullset slot=0endfunctionfunction InitTrig_Permanent_Bonus takes nothing returns nothingset gg_trg_Permanent_Bonus=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Permanent_Bonus,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Permanent_Bonus,Condition(function Trig_Permanent_Bonus_Conditions))
call TriggerAddAction(gg_trg_Permanent_Bonus,function Trig_Permanent_Bonus_Actions)endfunctionfunction Trig_RegenRune_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I05T')endfunctionfunction Trig_RegenRune_Actions takes nothing returns nothinglocal unit Units=GetTriggerUnit()local real MaxHp=(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,Units)*.02)local real MaxMp=(GetUnitStateSwap(UNIT_STATE_MAX_MANA,Units)*.02)local integer Loops=0call TriggerSleepAction(.02)
loop
exitwhen Loops>25if(UnitHasBuffBJ(Units,'B00U'))thencall SetWidgetLife(Units,(GetUnitStateSwap(UNIT_STATE_LIFE,Units)+MaxHp))call SetUnitManaBJ(Units,(GetUnitStateSwap(UNIT_STATE_MANA,Units)+MaxMp))set Loops=Loops+1if(Loops==26)thencall UnitRemoveAbility(Units,'B00U')
endifcall TriggerSleepAction(.01)
else
set Loops=26
endifendloopset Units=nullset MaxHp=.0
set MaxMp=.0
set Loops=0endfunctionfunction InitTrig_RegenRune takes nothing returns nothingset gg_trg_RegenRune=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_RegenRune,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RegenRune,Condition(function Trig_RegenRune_Conditions))
call TriggerAddAction(gg_trg_RegenRune,function Trig_RegenRune_Actions)endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03Z'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())
endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I011'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I012'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I005'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I006'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00M'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I006'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00S'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I007'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03M'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I001'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03H'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00M'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03F'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00M'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03C'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03A'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00J'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I035'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00H'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00D'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I033'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02I'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I011'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I004'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00N'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I004'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00E'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00D'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00B'))endfunctionfunction Trig_Fuison_Func001Func002Func002Func002C takes nothing returns boolean
return(Trig_Fuison_Func001Func002Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00A'))endfunctionfunction Trig_Fuison_Func001Func002Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func002Func003C())endfunctionfunction Trig_Fuison_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I009'))endfunctionfunction Trig_Fuison_Func001Func002C takes nothing returns booleanreturn(Trig_Fuison_Func001Func002Func003C())
endfunctionfunction Trig_Fuison_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Z'))endfunctionfunction Trig_Fuison_Func001C takes nothing returns booleanreturn(Trig_Fuison_Func001Func003C())endfunctionfunction Trig_Fuison_Actions takes nothing returns nothingif(Trig_Fuison_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call UnitAddItemByIdSwapped('I02L',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I009'))call UnitAddItemByIdSwapped('I02O',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00A'))call UnitAddItemByIdSwapped('I02M',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00B'))call UnitAddItemByIdSwapped('I02P',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00N'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I004'))call UnitAddItemByIdSwapped('I02Y',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I011'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I004'))call UnitAddItemByIdSwapped('I031',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02I'))call UnitAddItemByIdSwapped('I032',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00H'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I033'))call UnitAddItemByIdSwapped('I034',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00J'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I035'))call UnitAddItemByIdSwapped('I036',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03A'))call UnitAddItemByIdSwapped('I03B',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03C'))call UnitAddItemByIdSwapped('I03D',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03F'))call UnitAddItemByIdSwapped('I03G',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I001'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03H'))call UnitAddItemByIdSwapped('I03I',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I007'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03M'))call UnitAddItemByIdSwapped('I03L',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I006'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00S'))call UnitAddItemByIdSwapped('I03P',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I006'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call UnitAddItemByIdSwapped('I03R',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I005'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call UnitAddItemByIdSwapped('I03S',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I011'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I012'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call UnitAddItemByIdSwapped('I03U',GetTriggerUnit())
else
if(Trig_Fuison_Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03Z'))call UnitAddItemByIdSwapped('I040',GetTriggerUnit())
endifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendfunctionfunction InitTrig_Fuison takes nothing returns nothingset gg_trg_Fuison=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fuison,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(gg_trg_Fuison,function Trig_Fuison_Actions)endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func001Func008C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05M'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func001C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func001Func008C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func008C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05M'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func008C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func007C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I051'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04W'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05H'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func007C())
endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006C takes nothing returns booleanreturn(IsUnitType(GetTriggerUnit(),UNIT_TYPE_MELEE_ATTACKER))!=nullendfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func007C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05Q'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func007C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I010'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03U'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04N'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04A'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04M'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I036'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I010'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Z'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I059'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I008'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I054'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I008'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I052'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I050'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03P'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04Y'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04X'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04U'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I041'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04C'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04R'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func003C())
endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I003'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I001'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I034'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I032'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00P'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I002'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00J'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02P'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04J'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func003C())
endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04H'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func001C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func003C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03R'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04F'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func001C takes nothing returns boolean
return(Trig_Fusion2_Func002Func002Func002Func002Func001Func002C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04D'))endfunctionfunction Trig_Fusion2_Func002Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func002Func002C())endfunctionfunction Trig_Fusion2_Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04B'))endfunctionfunction Trig_Fusion2_Func002Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func002Func003C())
endfunctionfunction Trig_Fusion2_Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I003'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I044'))endfunctionfunction Trig_Fusion2_Func002Func002C takes nothing returns booleanreturn(Trig_Fusion2_Func002Func002Func003C())endfunctionfunction Trig_Fusion2_Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I043'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I042'))endfunctionfunction Trig_Fusion2_Func002C takes nothing returns boolean
return(Trig_Fusion2_Func002Func003C())endfunctionfunction Trig_Fusion2_Actions takes nothing returns nothingif(Trig_Fusion2_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I043'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I042'))call UnitAddItemByIdSwapped('I041',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I003'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I044'))call UnitAddItemByIdSwapped('I045',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04B'))call UnitAddItemByIdSwapped('I04C',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04D'))call UnitAddItemByIdSwapped('I04E',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03R'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04F'))call UnitAddItemByIdSwapped('I04G',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04H'))call UnitAddItemByIdSwapped('I04I',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00J'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02P'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04J'))call UnitAddItemByIdSwapped('I04K',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00P'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I002'))call UnitAddItemByIdSwapped('I03Y',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I034'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I032'))call UnitAddItemByIdSwapped('I04M',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I003'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I001'))call UnitAddItemByIdSwapped('I04N',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I041'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04C'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04R'))call UnitAddItemByIdSwapped('I04S',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04U'))call UnitAddItemByIdSwapped('I04V',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04X'))call UnitAddItemByIdSwapped('I04W',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03P'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04Y'))call UnitAddItemByIdSwapped('I04Z',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I050'))call UnitAddItemByIdSwapped('I051',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I008'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I052'))call UnitAddItemByIdSwapped('I053',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I008'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I054'))call UnitAddItemByIdSwapped('I055',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I010'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I059'))call UnitAddItemByIdSwapped('I05A',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04M'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I036'))call UnitAddItemByIdSwapped('I05D',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04N'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04A'))call UnitAddItemByIdSwapped('I05E',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I010'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03U'))call UnitAddItemByIdSwapped('I05F',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05Q'))if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006C())thencall UnitAddItemByIdSwapped('I04L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05G',GetTriggerUnit())
endifelse
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I051'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04W'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05H'))call UnitAddItemByIdSwapped('I05I',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05M'))call UnitAddItemByIdSwapped('I05L',GetTriggerUnit())
else
if(Trig_Fusion2_Func002Func002Func002Func002Func001Func001Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func002Func006Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05M'))call UnitAddItemByIdSwapped('I05P',GetTriggerUnit())
endifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendifendfunctionfunction InitTrig_Fusion2 takes nothing returns nothingset gg_trg_Fusion2=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fusion2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_Fusion2,function Trig_Fusion2_Actions)endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001Func001Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I074'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I073'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I072'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I071'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06W'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05B'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001C takes nothing returns boolean
return(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func003C())endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04Z'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06Q'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06I'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I053'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06G'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05G'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I068'))endfunctionfunction Trig_Fusion3_Func002Func007Func004Func004C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I06E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I068'))endfunctionfunction Trig_Fusion3_Func002Func007Func004C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I067'))endfunctionfunction Trig_Fusion3_Func002Func007C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I065'))endfunctionfunction Trig_Fusion3_Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04N'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I060'))endfunctionfunction Trig_Fusion3_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()if(Trig_Fusion3_Func002C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04N'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I060'))call UnitAddItemByIdSwapped('I05Z',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I065'))call UnitAddItemByIdSwapped('I061',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I067'))call UnitAddItemByIdSwapped('I063',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004C())then
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I068'))call UnitAddItemByIdSwapped('I062',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I068'))call UnitAddItemByIdSwapped('I062',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I053'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06G'))call UnitAddItemByIdSwapped('I06F',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004C())thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06I'))call UnitAddItemByIdSwapped('I06J',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001C())then
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04G'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04Z'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06Q'))call UnitAddItemByIdSwapped('I06P',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05B'))call UnitAddItemByIdSwapped('I05C',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I06W'))call UnitAddItemByIdSwapped('I06S',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I071'))call UnitAddItemByIdSwapped('I06T',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I072'))call UnitAddItemByIdSwapped('I06U',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I073'))call UnitAddItemByIdSwapped('I06V',GetTriggerUnit())
else
if(Trig_Fusion3_Func002Func007Func004Func004Func001Func001Func004Func001Func001Func001Func001Func001Func001Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I074'))call UnitAddItemByIdSwapped('I075',GetTriggerUnit())
endifendifendifendifendifendifendifendifendifendifendifendifendifendifset u=nullendfunctionfunction InitTrig_Fusion3 takes nothing returns nothingset gg_trg_Fusion3=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fusion3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_Fusion3,function Trig_Fusion3_Actions)endfunctionfunction BladeMail___DmgAction takes nothing returns nothing
local unit atked=GetTriggerUnit()local unit atker
local real dmgif(GetUnitAbilityLevel(atked,BladeMail___buffid)>0)thenset atker=GetEventDamageSource()
set dmg=(GetEventDamage()*.8)call DestroyEffect(AddSpecialEffectTarget(BladeMail___effStr,atker,"chest"))
call UnitPureDamageTarget(atked,atker,dmg)set atker=nullendifset atked=nullendfunctionfunction BladeMail___Conditions takes nothing returns booleanreturn(GetSpellAbilityId()==BladeMail___itemSkid)endfunctionfunction BladeMail___Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.1local trigger trglocal triggeraction trgActset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'u003',GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,BladeMail___skid)
call IssueTargetOrderById(bj_lastCreatedUnit,$D0065,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set trg=CreateTrigger()set trgAct=TriggerAddAction(trg,function BladeMail___DmgAction)call TriggerRegisterUnitEvent(trg,u,EVENT_UNIT_DAMAGED)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,BladeMail___buffid)<1)endloopcall TriggerRemoveAction(trg,trgAct)
call DestroyTrigger(trg)
set trgAct=nullset trg=null
set u=nullendfunctionfunction BladeMail___init takes nothing returns nothingset gg_trg_Blade_Mail=CreateTrigger()call TriggerAddCondition(gg_trg_Blade_Mail,Condition(function BladeMail___Conditions))call TriggerAddAction(gg_trg_Blade_Mail,function BladeMail___Actions)endfunctionfunction Trig_DagonActive_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A02E')endfunctionfunction Trig_DagonActive_Actions takes nothing returns nothinglocal unit Dagon_Unit=GetTriggerUnit()local unit Dagon_Target=GetSpellTargetUnit()
local real Dagon_Dmg=10.*I2R(GetHeroStatBJ(2,Dagon_Unit,true))local location Dagon_Point=GetUnitLoc(Dagon_Target)call CreateTextTagUnitBJ((I2S(R2I(Dagon_Dmg))+"!"),Dagon_Target,0,12.,'d',.0,.0,0)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,100.,90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,2.)call UnitDamageTargetBJ(Dagon_Unit,Dagon_Target,Dagon_Dmg,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)call CreateNUnitsAtLoc(1,'h00P',GetOwningPlayer(Dagon_Unit),Dagon_Point,GetRandomReal(0,360))call UnitApplyTimedLifeBJ(4.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h00P',GetOwningPlayer(Dagon_Unit),Dagon_Point,GetRandomReal(0,360))call UnitApplyTimedLifeBJ(4.5,'BTLF',bj_lastCreatedUnit)
if(IsUnitDeadBJ(Dagon_Target))thencall CreateNUnitsAtLoc(1,'h00Q',GetOwningPlayer(Dagon_Unit),Dagon_Point,GetRandomReal(0,360))call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00Q',GetOwningPlayer(Dagon_Unit),Dagon_Point,GetRandomReal(0,360))call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)endifcall RemoveLocation(Dagon_Point)
set Dagon_Point=null
set Dagon_Unit=nullset Dagon_Target=nullset Dagon_Dmg=.0
endfunctionfunction InitTrig_DagonActive takes nothing returns nothingset gg_trg_DagonActive=CreateTrigger()call TriggerAddCondition(gg_trg_DagonActive,Condition(function Trig_DagonActive_Conditions))
call TriggerAddAction(gg_trg_DagonActive,function Trig_DagonActive_Actions)endfunctionfunction MantaStyle___Cond takes nothing returns boolean
return(GetSpellAbilityId()==MantaStyle___skId)endfunctionfunction MantaStyle___Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local real x=GetUnitX(u)
local real y=GetUnitY(u)
local real dist='d'local real facing=GetRandomReal(0,360)set bj_lastCreatedUnit=CreateUnit(p,'h04O',x,y,GetUnitFacing(u))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdx",bj_lastCreatedUnit,"origin"))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitInvulnerable(u,true)
call TriggerSleepAction(.0)call IssueImmediateOrderById(u,$D0004)call ShowUnit(u,false)call UnitMoveXY2(u,x,y)call TriggerSleepAction(.19)
call ShowUnit(u,true)call SetUnitInvulnerable(u,false)call SelectUnitAddForPlayer(u,p)
set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0JA')call IssueTargetOrderById(bj_lastCreatedUnit,$D0132,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0JA')call IssueTargetOrderById(bj_lastCreatedUnit,$D0132,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitMoveXY2(u,PolarX(x,dist,facing),PolarY(y,dist,facing))set dist=50set x=GetUnitX(u)set y=GetUnitY(u)call UnitMoveXY2(u,PolarX(x,dist,facing),PolarY(y,dist,facing))set u=nullset p=nullendfunctionfunction MantaStyle___Init takes nothing returns nothing
set gg_trg_Manta_Style=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Manta_Style,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Manta_Style,Condition(function MantaStyle___Cond))call TriggerAddAction(gg_trg_Manta_Style,function MantaStyle___Act)endfunctionfunction Trig_HexActive_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A03D')endfunctionfunction Trig_HexActive_Actions takes nothing returns nothinglocal unit Hex_Unit=GetTriggerUnit()
local unit Hex_Target=GetSpellTargetUnit()local unit Hex_Dummy
local location Hex_Point=GetUnitLoc(Hex_Target)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(Hex_Unit),Hex_Point,bj_UNIT_FACING)set Hex_Dummy=bj_lastCreatedUnit
call RemoveLocation(Hex_Point)set Hex_Point=nullcall UnitAddAbility(Hex_Dummy,'A03E')call IssueTargetOrderById(Hex_Dummy,$D0216,Hex_Target)call UnitApplyTimedLifeBJ(1.,'BTLF',Hex_Dummy)set Hex_Unit=nullset Hex_Target=nullset Hex_Dummy=nullendfunctionfunction InitTrig_HexActive takes nothing returns nothingset gg_trg_HexActive=CreateTrigger()
call TriggerAddCondition(gg_trg_HexActive,Condition(function Trig_HexActive_Conditions))
call TriggerAddAction(gg_trg_HexActive,function Trig_HexActive_Actions)endfunctionfunction Trig_DiffusalActive_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A01E')endfunctionfunction Trig_DiffusalActive_Actions takes nothing returns nothinglocal unit Diffusal_Unit=GetTriggerUnit()local unit Diffusal_Target=GetSpellTargetUnit()local unit Diffusal_Dummylocal location Diffusal_Point=GetUnitLoc(Diffusal_Target)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(Diffusal_Unit),Diffusal_Point,bj_UNIT_FACING)set Diffusal_Dummy=bj_lastCreatedUnitcall RemoveLocation(Diffusal_Point)set Diffusal_Point=nullcall UnitAddAbility(Diffusal_Dummy,'A0D5')call IssueTargetOrderById(Diffusal_Dummy,$D006B,Diffusal_Target)
call UnitApplyTimedLifeBJ(1.,'BTLF',Diffusal_Dummy)set Diffusal_Unit=nullset Diffusal_Target=null
set Diffusal_Dummy=nullendfunctionfunction InitTrig_DiffusalActive takes nothing returns nothingset gg_trg_DiffusalActive=CreateTrigger()call TriggerAddCondition(gg_trg_DiffusalActive,Condition(function Trig_DiffusalActive_Conditions))call TriggerAddAction(gg_trg_DiffusalActive,function Trig_DiffusalActive_Actions)endfunctionfunction Trig_DoomSearing_Func024C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetAttacker(),'I05D'))and(IsUnitInGroup(GetAttacker(),udg_Searing_Group)==false)and(UnitHasBuffBJ(GetTriggerUnit(),'B00G'))endfunctionfunction Trig_DoomSearing_Conditions takes nothing returns booleanreturn(Trig_DoomSearing_Func024C())endfunctionfunction Trig_DoomSearing_Actions takes nothing returns nothinglocal unit Doom_Unit=GetAttacker()local unit Doom_Target=GetTriggerUnit()local unit Doom_Dummy1local unit Doom_Dummy2local location Doom_Point=GetUnitLoc(Doom_Target)call AddSpecialEffectTargetUnitBJ("origin",Doom_Unit,"Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl")call DestroyEffect(bj_lastCreatedEffect)
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(Doom_Unit),Doom_Point,bj_UNIT_FACING)set Doom_Dummy1=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(Doom_Unit),Doom_Point,bj_UNIT_FACING)set Doom_Dummy2=bj_lastCreatedUnitcall UnitAddAbility(Doom_Dummy1,'A03L')call UnitAddAbility(Doom_Dummy2,'A03M')call IssueTargetOrderById(Doom_Dummy1,$D006B,Doom_Target)call IssuePointOrderByIdLoc(Doom_Dummy2,$D0270,Doom_Point)call RemoveLocation(Doom_Point)set Doom_Point=nullcall UnitApplyTimedLifeBJ(1.,'BTLF',Doom_Dummy1)
call UnitApplyTimedLifeBJ(1.,'BTLF',Doom_Dummy2)
call GroupAddUnit(udg_Searing_Group,Doom_Unit)call UnitRemoveAbility(Doom_Target,'B00G')set Doom_Target=null
set Doom_Dummy1=null
set Doom_Dummy2=null
call PolledWait(25)call GroupRemoveUnit(udg_Searing_Group,Doom_Unit)set Doom_Unit=nullendfunctionfunction InitTrig_DoomSearing takes nothing returns nothingset gg_trg_DoomSearing=CreateTrigger()endfunctionfunction Trig_Spiritual_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A043')endfunctionfunction Trig_Spiritual_Func003002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Spiritual_Func003002003002002001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false)!=null
endfunctionfunction Trig_Spiritual_Func003002003002002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)!=nullendfunctionfunction Trig_Spiritual_Func003002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Spiritual_Func003002003002002001(),Trig_Spiritual_Func003002003002002002())endfunctionfunction Trig_Spiritual_Func003002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Spiritual_Func003002003002001(),Trig_Spiritual_Func003002003002002())endfunctionfunction Trig_Spiritual_Func003002003 takes nothing returns booleanreturn(Trig_Spiritual_Func003002003002())endfunctionfunction G_RemoveShake takes nothing returns nothing
call CameraClearNoiseForPlayer(GetOwningPlayer(GetEnumUnit()))endfunctionfunction Trig_Spiritual_Func004A takes nothing returns nothinglocal unit H_Target=GetEnumUnit()local unit H_Dummylocal location H_Pointif(IsUnitAlly(H_Target,GetOwningPlayer(udg_Hogyoku)))thencall CameraShake(udg_CameraShakeTime,3.5,H_Target)else
set H_Point=GetUnitLoc(H_Target)
call CreateNUnitsAtLoc(1,'h013',Player($C),H_Point,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h014',Player($C),H_Point,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,50.)
if(IsUnitType(H_Target,UNIT_TYPE_HERO))thencall CameraShake(udg_CameraShakeTime,udg_CameraShakePow,H_Target)else
call UnitDamageTargetBJ(udg_Hogyoku,H_Target,1000.,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
endifcall CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Hogyoku),H_Point,bj_UNIT_FACING)
set H_Dummy=bj_lastCreatedUnitcall RemoveLocation(H_Point)
set H_Point=null
call UnitAddAbility(H_Dummy,'A044')call UnitApplyTimedLifeBJ(1.5,'BTLF',H_Dummy)call IssueTargetOrderById(H_Dummy,$D007F,H_Target)endifset H_Target=nullset H_Dummy=null
endfunctionfunction Trig_Spiritual_Actions takes nothing returns nothinglocal unit H_Unit=GetTriggerUnit()local location H_Point1local location H_Point2local location H_Point3local integer H_Int1=1local integer H_Int2=1local integer H_Int3=(1+GetPlayerId(GetOwningPlayer(H_Unit)))local group H_Grouplocal group H_GroupClear
loop
exitwhen H_Int1>4set H_Int2=1
loop
exitwhen H_Int2>8set H_Point1=GetUnitLoc(H_Unit)set H_Point2=PolarProjectionBJ(H_Point1,(I2R(H_Int1)*250.),(I2R(H_Int2)*45.))call RemoveLocation(H_Point1)set H_Point1=nullcall CreateNUnitsAtLoc(1,'h012',Player($C),H_Point2,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(H_Point2)set H_Point2=nullset H_Int2=H_Int2+1endloopset H_Int1=H_Int1+1endloopset H_Point3=GetUnitLoc(H_Unit)set H_GroupClear=CreateGroup()set udg_Hogyoku=H_Unitset H_Group=GetUnitsInRangeOfLocMatching(2000.,H_Point3,Condition(function Trig_Spiritual_Func003002003))call ForGroupBJ(H_Group,function Trig_Spiritual_Func004A)set udg_Hogyoku=null
call RemoveLocation(H_Point3)set H_Point3=nullcall GroupAddGroup(H_Group,H_GroupClear)
call DestroyGroup(H_Group)set H_Group=null
set H_Unit=nullset H_Int1=0
set H_Int2=0
set H_Int3=0
call PolledWait(3.)call ForGroupBJ(H_GroupClear,function G_RemoveShake)
call DestroyGroup(H_GroupClear)set H_GroupClear=nullendfunctionfunction InitTrig_Spiritual takes nothing returns nothingset gg_trg_Spiritual=CreateTrigger()
call TriggerAddCondition(gg_trg_Spiritual,Condition(function Trig_Spiritual_Conditions))
call TriggerAddAction(gg_trg_Spiritual,function Trig_Spiritual_Actions)endfunctionfunction Trig_Frostmourne_Stack_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I062')endfunctionfunction Trig_Frostmourne_Stack_Func001C takes nothing returns booleanreturn(udg_Frostmourne_Stack==0)
endfunctionfunction Trig_Frostmourne_Stack_Actions takes nothing returns nothingif(Trig_Frostmourne_Stack_Func001C())thencall EnableTrigger(gg_trg_Frostmourne_Attack)endifset udg_Frostmourne_Stack=(udg_Frostmourne_Stack+1)endfunctionfunction InitTrig_Frostmourne_Stack takes nothing returns nothingset gg_trg_Frostmourne_Stack=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Stack,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Frostmourne_Stack,Condition(function Trig_Frostmourne_Stack_Conditions))
call TriggerAddAction(gg_trg_Frostmourne_Stack,function Trig_Frostmourne_Stack_Actions)endfunctionfunction Trig_Frostmourne_Remove_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I062')endfunctionfunction Trig_Frostmourne_Remove_Func002C takes nothing returns booleanreturn(udg_Frostmourne_Stack==0)
endfunctionfunction Trig_Frostmourne_Remove_Actions takes nothing returns nothingset udg_Frostmourne_Stack=(udg_Frostmourne_Stack-1)if(Trig_Frostmourne_Remove_Func002C())thencall DisableTrigger(gg_trg_Frostmourne_Attack)endifendfunctionfunction InitTrig_Frostmourne_Remove takes nothing returns nothingset gg_trg_Frostmourne_Remove=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Remove,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Frostmourne_Remove,Condition(function Trig_Frostmourne_Remove_Conditions))call TriggerAddAction(gg_trg_Frostmourne_Remove,function Trig_Frostmourne_Remove_Actions)endfunctionfunction Trig_Frostmourne_Attack_Conditions takes nothing returns booleanif(UnitHasItemOfTypeBJ(GetAttacker(),'I062')==false)then
return false
elseif(IsUnitIllusion(GetAttacker()))thenreturn false
elseif(GetRandomInt(1,'d')>25)thenreturn false
endifreturn trueendfunctionfunction Trig_Frostmourne_Attack_Actions takes nothing returns nothinglocal unit u=GetAttacker()local unit u2=GetTriggerUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[5])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[5],5)call IssueTargetOrderById(bj_lastCreatedUnit,$D0102,u2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set u=nullset u2=nullendfunctionfunction InitTrig_Frostmourne_Attack takes nothing returns nothingset gg_trg_Frostmourne_Attack=CreateTrigger()call DisableTrigger(gg_trg_Frostmourne_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Frostmourne_Attack,Condition(function Trig_Frostmourne_Attack_Conditions))call TriggerAddAction(gg_trg_Frostmourne_Attack,function Trig_Frostmourne_Attack_Actions)endfunctionfunction Trig_Orb_of_Frost_Stack_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06E')endfunctionfunction Trig_Orb_of_Frost_Stack_Func001C takes nothing returns booleanreturn(udg_OrbFrost_Stack==0)endfunctionfunction Trig_Orb_of_Frost_Stack_Actions takes nothing returns nothingif(Trig_Orb_of_Frost_Stack_Func001C())thencall EnableTrigger(gg_trg_Orb_of_Frost_Attack)endifset udg_OrbFrost_Stack=(udg_OrbFrost_Stack+1)endfunctionfunction InitTrig_Orb_of_Frost_Stack takes nothing returns nothingset gg_trg_Orb_of_Frost_Stack=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Stack,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Orb_of_Frost_Stack,Condition(function Trig_Orb_of_Frost_Stack_Conditions))call TriggerAddAction(gg_trg_Orb_of_Frost_Stack,function Trig_Orb_of_Frost_Stack_Actions)endfunctionfunction Trig_Orb_of_Frost_Remove_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06E')endfunctionfunction Trig_Orb_of_Frost_Remove_Func002C takes nothing returns boolean
return(udg_OrbFrost_Stack==0)endfunctionfunction Trig_Orb_of_Frost_Remove_Actions takes nothing returns nothingset udg_OrbFrost_Stack=(udg_OrbFrost_Stack-1)if(Trig_Orb_of_Frost_Remove_Func002C())thencall DisableTrigger(gg_trg_Orb_of_Frost_Attack)endifendfunctionfunction InitTrig_Orb_of_Frost_Remove takes nothing returns nothingset gg_trg_Orb_of_Frost_Remove=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Remove,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Orb_of_Frost_Remove,Condition(function Trig_Orb_of_Frost_Remove_Conditions))
call TriggerAddAction(gg_trg_Orb_of_Frost_Remove,function Trig_Orb_of_Frost_Remove_Actions)endfunctionfunction Trig_OrbOfFrost_Attack_Conditions takes nothing returns boolean
if(UnitHasItemOfTypeBJ(GetAttacker(),'I06E')==false)then
return false
elseif(IsUnitIllusion(GetAttacker()))thenreturn false
elseif(GetRandomInt(1,'d')>25)thenreturn false
endifreturn trueendfunctionfunction Trig_OrbOfFrost_Attack_Actions takes nothing returns nothinglocal unit u=GetAttacker()local unit u2=GetTriggerUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[5])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[5],5)call IssueTargetOrderById(bj_lastCreatedUnit,$D0102,u2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set u=nullset u2=nullendfunctionfunction InitTrig_Orb_of_Frost_Attack takes nothing returns nothingset gg_trg_Orb_of_Frost_Attack=CreateTrigger()call DisableTrigger(gg_trg_Orb_of_Frost_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Attack,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Orb_of_Frost_Attack,Condition(function Trig_OrbOfFrost_Attack_Conditions))call TriggerAddAction(gg_trg_Orb_of_Frost_Attack,function Trig_OrbOfFrost_Attack_Actions)endfunctionfunction Trig_Shop5_Upgrade_Actions takes nothing returns nothinglocal unit array myShoplocal real array xlocal real array ylocal real array rlocal player pset myShop[0]=gg_unit_h0BK_0093set myShop[1]=gg_unit_h0BK_0096if(myShop[0]!=null and myShop[1]!=null)thenset p=Player($F)
set x[0]=GetUnitX(myShop[0])
set x[1]=GetUnitX(myShop[1])
set y[0]=GetUnitY(myShop[0])
set y[1]=GetUnitY(myShop[1])
set r[0]=GetUnitFacing(myShop[0])set r[1]=GetUnitFacing(myShop[1])call RemoveUnit(myShop[0])call RemoveUnit(myShop[1])call CreateUnit(p,'h0DI',x[0],y[0],r[0])
call CreateUnit(p,'h0DI',x[1],y[1],r[1])
set myShop[0]=nullset myShop[1]=nullset p=nullendifendfunctionfunction InitTrig_Shop5_Upgrade takes nothing returns nothingset gg_trg_Shop5_Upgrade=CreateTrigger()
call TriggerAddAction(gg_trg_Shop5_Upgrade,function Trig_Shop5_Upgrade_Actions)endfunctionfunction Trig_Space_Boots_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I076')endfunctionfunction Trig_Space_Boots_Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Space_Boots_Actions takes nothing returns nothingif(Trig_Space_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I075',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I074',GetTriggerUnit())
endifendfunctionfunction InitTrig_Space_Boots takes nothing returns nothingset gg_trg_Space_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Space_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Space_Boots,Condition(function Trig_Space_Boots_Conditions))
call TriggerAddAction(gg_trg_Space_Boots,function Trig_Space_Boots_Actions)endfunctionfunction Trig_Natural_Boots_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I070')endfunctionfunction Trig_Natural_Boots_Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Natural_Boots_Actions takes nothing returns nothingif(Trig_Natural_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I06V',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I073',GetTriggerUnit())
endifendfunctionfunction InitTrig_Natural_Boots takes nothing returns nothingset gg_trg_Natural_Boots=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Natural_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Natural_Boots,Condition(function Trig_Natural_Boots_Conditions))
call TriggerAddAction(gg_trg_Natural_Boots,function Trig_Natural_Boots_Actions)endfunctionfunction Trig_Heavy_Boots_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06Z')endfunctionfunction Trig_Heavy_Boots_Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Heavy_Boots_Actions takes nothing returns nothingif(Trig_Heavy_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I06U',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I072',GetTriggerUnit())
endifendfunctionfunction InitTrig_Heavy_Boots takes nothing returns nothingset gg_trg_Heavy_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Heavy_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Heavy_Boots,Condition(function Trig_Heavy_Boots_Conditions))
call TriggerAddAction(gg_trg_Heavy_Boots,function Trig_Heavy_Boots_Actions)endfunctionfunction Trig_Fire_Boots_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06Y')endfunctionfunction Trig_Fire_Boots_Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Fire_Boots_Actions takes nothing returns nothingif(Trig_Fire_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I06T',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I071',GetTriggerUnit())
endifendfunctionfunction InitTrig_Fire_Boots takes nothing returns nothingset gg_trg_Fire_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fire_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Fire_Boots,Condition(function Trig_Fire_Boots_Conditions))call TriggerAddAction(gg_trg_Fire_Boots,function Trig_Fire_Boots_Actions)endfunctionfunction Trig_Adventure_Boots_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06X')endfunctionfunction Trig_Adventure_Boots_Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Adventure_Boots_Actions takes nothing returns nothingif(Trig_Adventure_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I06S',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I06W',GetTriggerUnit())
endifendfunctionfunction InitTrig_Adventure_Boots takes nothing returns nothingset gg_trg_Adventure_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Adventure_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Adventure_Boots,Condition(function Trig_Adventure_Boots_Conditions))
call TriggerAddAction(gg_trg_Adventure_Boots,function Trig_Adventure_Boots_Actions)endfunctionfunction Trig_Red_Boots_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I02H')endfunctionfunction Trig_Red_Boots_Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02U'))
endfunctionfunction Trig_Red_Boots_Actions takes nothing returns nothingif(Trig_Red_Boots_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02U'))call UnitAddItemByIdSwapped('I05C',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05B',GetTriggerUnit())
endifendfunctionfunction InitTrig_Red_Boots takes nothing returns nothingset gg_trg_Red_Boots=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Red_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Red_Boots,Condition(function Trig_Red_Boots_Conditions))
call TriggerAddAction(gg_trg_Red_Boots,function Trig_Red_Boots_Actions)endfunctionfunction Helm_Battle_Thirst_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I06R')endfunctionfunction Helm_Battle_Thirst_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_succ='I06P'local integer item_fail='I06Q'set item_req[0]='I04G'set item_req[1]='I04Z'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call UnitAddItemByIdSwapped(item_succ,u)
else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullendfunctionfunction InitTrig_Helm_Battle_Thirst takes nothing returns nothingset gg_trg_Helm_Battle_Thirst=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Helm_Battle_Thirst,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Helm_Battle_Thirst,Condition(function Helm_Battle_Thirst_Conditions))call TriggerAddAction(gg_trg_Helm_Battle_Thirst,function Helm_Battle_Thirst_Actions)
endfunctionfunction Trig_God_Sphere_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06L')endfunctionfunction Trig_God_Sphere_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_succ='I06J'local integer item_fail='I06I'set item_req[0]='I06A'set item_req[1]='I04I'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call UnitAddItemByIdSwapped(item_succ,u)
else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullendfunctionfunction InitTrig_God_Sphere takes nothing returns nothingset gg_trg_God_Sphere=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_God_Sphere,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_God_Sphere,Condition(function Trig_God_Sphere_Conditions))call TriggerAddAction(gg_trg_God_Sphere,function Trig_God_Sphere_Actions)endfunctionfunction Trig_Arcanite_Shield_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I06H')endfunctionfunction Trig_Arcanite_Shield_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_fus='I06F'local integer item_fail='I06G'set item_req[0]='I04V'set item_req[1]='I053'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl",u,"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call UnitAddItemByIdSwapped(item_fus,u)else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullendfunctionfunction InitTrig_Arcanite_Shield takes nothing returns nothingset gg_trg_Arcanite_Shield=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Arcanite_Shield,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Arcanite_Shield,Condition(function Trig_Arcanite_Shield_Conditions))
call TriggerAddAction(gg_trg_Arcanite_Shield,function Trig_Arcanite_Shield_Actions)endfunctionfunction Trig_Frostmourne_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I069')endfunctionfunction Trig_Frostmourne_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_fus='I062'local integer item_fail='I068'local string s_eff="Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl"set item_req[0]='I06E'set item_req[1]='I05V'set item_req[2]='I04L'set item_req[3]='I05G'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[2])>0)then
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget(s_eff,u,"origin"))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[2]))call UnitAddItemByIdSwapped(item_fus,u)elseif(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[3])>0)then
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget(s_eff,u,"origin"))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[3]))call UnitAddItemByIdSwapped(item_fus,u)else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullset s_eff=nullendfunctionfunction InitTrig_Frostmourne takes nothing returns nothingset gg_trg_Frostmourne=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Frostmourne,Condition(function Trig_Frostmourne_Conditions))
call TriggerAddAction(gg_trg_Frostmourne,function Trig_Frostmourne_Actions)endfunctionfunction Trig_Blood_Sword_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I066')endfunctionfunction Trig_Blood_Sword_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_fus='I063'local integer item_fail='I067'local string s_eff="Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl"set item_req[0]='I05V'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget(s_eff,u,"origin"))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call UnitAddItemByIdSwapped(item_fus,u)else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullset s_eff=nullendfunctionfunction InitTrig_Blood_Sword takes nothing returns nothingset gg_trg_Blood_Sword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Blood_Sword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Blood_Sword,Condition(function Trig_Blood_Sword_Conditions))
call TriggerAddAction(gg_trg_Blood_Sword,function Trig_Blood_Sword_Actions)endfunctionfunction Trig_Corrupted_Desolator_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I064')endfunctionfunction Trig_Corrupted_Desolator_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_fus='I061'local integer item_fail='I065'local string s_eff="Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl"set item_req[0]='I05V'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget(s_eff,u,"origin"))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call UnitAddItemByIdSwapped(item_fus,u)else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullset s_eff=nullendfunctionfunction InitTrig_Corrupted_Desolator takes nothing returns nothingset gg_trg_Corrupted_Desolator=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Corrupted_Desolator,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Corrupted_Desolator,Condition(function Trig_Corrupted_Desolator_Conditions))
call TriggerAddAction(gg_trg_Corrupted_Desolator,function Trig_Corrupted_Desolator_Actions)endfunctionfunction Trig_Zanbato_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I05Y')endfunctionfunction Trig_Zanbato_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer array item_req
local integer item_fus='I05Z'local integer item_fail='I060'local string s_eff="Abilities\\Spells\\Human\\ReviveHuman\\ReviveHuman.mdl"set item_req[0]='I05V'set item_req[1]='I04N'if(GetInventoryIndexOfItemTypeBJ(u,item_req[0])>0 and GetInventoryIndexOfItemTypeBJ(u,item_req[1])>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h00E',GetUnitX(u),GetUnitY(u),GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget(s_eff,u,"origin"))
call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[0]))call RemoveItem(GetItemOfTypeFromUnitBJ(u,item_req[1]))call UnitAddItemByIdSwapped(item_fus,u)else
call UnitAddItemByIdSwapped(item_fail,u)
endifset u=nullset s_eff=nullendfunctionfunction InitTrig_Zanbato takes nothing returns nothingset gg_trg_Zanbato=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Zanbato,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Zanbato,Condition(function Trig_Zanbato_Conditions))
call TriggerAddAction(gg_trg_Zanbato,function Trig_Zanbato_Actions)endfunctionfunction Trig_EyeSkadi_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01U')endfunctionfunction Trig_EyeSkadi_Func001Func006C takes nothing returns boolean
return(IsUnitType(GetTriggerUnit(),UNIT_TYPE_MELEE_ATTACKER))!=nullendfunctionfunction Trig_EyeSkadi_Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))endfunctionfunction Trig_EyeSkadi_Actions takes nothing returns nothing
if(Trig_EyeSkadi_Func001C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))if(Trig_EyeSkadi_Func001Func006C())thencall UnitAddItemByIdSwapped('I04L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05G',GetTriggerUnit())
endifelse
call UnitAddItemByIdSwapped('I05Q',GetTriggerUnit())
endifendfunctionfunction InitTrig_EyeSkadi takes nothing returns nothing
set gg_trg_EyeSkadi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_EyeSkadi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_EyeSkadi,Condition(function Trig_EyeSkadi_Conditions))call TriggerAddAction(gg_trg_EyeSkadi,function Trig_EyeSkadi_Actions)endfunctionfunction Trig_TheHeaven_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I05J')endfunctionfunction Trig_TheHeaven_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I051'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04W'))endfunctionfunction Trig_TheHeaven_Func001C takes nothing returns booleanreturn(Trig_TheHeaven_Func001Func002C())
endfunctionfunction Trig_TheHeaven_Actions takes nothing returns nothingif(Trig_TheHeaven_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I051'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04W'))call UnitAddItemByIdSwapped('I05I',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05H',GetTriggerUnit())
endifendfunctionfunction InitTrig_TheHeaven takes nothing returns nothingset gg_trg_TheHeaven=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_TheHeaven,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_TheHeaven,Condition(function Trig_TheHeaven_Conditions))
call TriggerAddAction(gg_trg_TheHeaven,function Trig_TheHeaven_Actions)endfunctionfunction Trig_Hogyoku_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I05K')endfunctionfunction Trig_Hogyoku_Func001Func002Func007C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05G'))endfunctionfunction Trig_Hogyoku_Func001Func002C takes nothing returns booleanreturn(Trig_Hogyoku_Func001Func002Func007C())endfunctionfunction Trig_Hogyoku_Func001Func007C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05A'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04L'))endfunctionfunction Trig_Hogyoku_Func001C takes nothing returns boolean
return(Trig_Hogyoku_Func001Func007C())endfunctionfunction Trig_Hogyoku_Actions takes nothing returns nothingif(Trig_Hogyoku_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04L'))call UnitAddItemByIdSwapped('I05L',GetTriggerUnit())
else
if(Trig_Hogyoku_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05A'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05G'))call UnitAddItemByIdSwapped('I05P',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05M',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_Hogyoku takes nothing returns nothingset gg_trg_Hogyoku=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Hogyoku,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Hogyoku,Condition(function Trig_Hogyoku_Conditions))
call TriggerAddAction(gg_trg_Hogyoku,function Trig_Hogyoku_Actions)endfunctionfunction Trig_Hex_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I026')endfunctionfunction Trig_Hex_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I010'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Z'))endfunctionfunction Trig_Hex_Func001C takes nothing returns boolean
return(Trig_Hex_Func001Func002C())endfunctionfunction Trig_Hex_Actions takes nothing returns nothingif(Trig_Hex_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I010'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call UnitAddItemByIdSwapped('I05A',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I059',GetTriggerUnit())
endifendfunctionfunction InitTrig_Hex takes nothing returns nothingset gg_trg_Hex=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Hex,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Hex,Condition(function Trig_Hex_Conditions))
call TriggerAddAction(gg_trg_Hex,function Trig_Hex_Actions)endfunctionfunction Trig_Monkey_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02G')endfunctionfunction Trig_Monkey_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))endfunctionfunction Trig_Monkey_Func001C takes nothing returns booleanreturn(Trig_Monkey_Func001Func002C())endfunctionfunction Trig_Monkey_Actions takes nothing returns nothingif(Trig_Monkey_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call UnitAddItemByIdSwapped('I04W',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04X',GetTriggerUnit())
endifendfunctionfunction InitTrig_Monkey takes nothing returns nothingset gg_trg_Monkey=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Monkey,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Monkey,Condition(function Trig_Monkey_Conditions))call TriggerAddAction(gg_trg_Monkey,function Trig_Monkey_Actions)endfunctionfunction Trig_HellCrusher_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02F')endfunctionfunction Trig_HellCrusher_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))endfunctionfunction Trig_HellCrusher_Func001C takes nothing returns boolean
return(Trig_HellCrusher_Func001Func002C())endfunctionfunction Trig_HellCrusher_Actions takes nothing returns nothingif(Trig_HellCrusher_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call UnitAddItemByIdSwapped('I04V',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04U',GetTriggerUnit())
endifendfunctionfunction InitTrig_HellCrusher takes nothing returns nothingset gg_trg_HellCrusher=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HellCrusher,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_HellCrusher,Condition(function Trig_HellCrusher_Conditions))
call TriggerAddAction(gg_trg_HellCrusher,function Trig_HellCrusher_Actions)endfunctionfunction Trig_UltimaSword_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02E')endfunctionfunction Trig_UltimaSword_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I041'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04C'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))endfunctionfunction Trig_UltimaSword_Func001C takes nothing returns boolean
return(Trig_UltimaSword_Func001Func002C())endfunctionfunction Trig_UltimaSword_Actions takes nothing returns nothingif(Trig_UltimaSword_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I041'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04C'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call UnitAddItemByIdSwapped('I04S',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04R',GetTriggerUnit())
endifendfunctionfunction InitTrig_UltimaSword takes nothing returns nothingset gg_trg_UltimaSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_UltimaSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_UltimaSword,Condition(function Trig_UltimaSword_Conditions))
call TriggerAddAction(gg_trg_UltimaSword,function Trig_UltimaSword_Actions)endfunctionfunction Trig_MysticStaff_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I058')endfunctionfunction Trig_MysticStaff_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03U'))
endfunctionfunction Trig_MysticStaff_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Z'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I059'))endfunctionfunction Trig_MysticStaff_Func001C takes nothing returns boolean
return(Trig_MysticStaff_Func001Func003C())endfunctionfunction Trig_MysticStaff_Actions takes nothing returns nothingif(Trig_MysticStaff_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I059'))call UnitAddItemByIdSwapped('I05A',GetTriggerUnit())
else
if(Trig_MysticStaff_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03U'))call UnitAddItemByIdSwapped('I05F',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I010',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_MysticStaff takes nothing returns nothingset gg_trg_MysticStaff=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_MysticStaff,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_MysticStaff,Condition(function Trig_MysticStaff_Conditions))
call TriggerAddAction(gg_trg_MysticStaff,function Trig_MysticStaff_Actions)endfunctionfunction Trig_Assault_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I021')endfunctionfunction Trig_Assault_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I008'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))endfunctionfunction Trig_Assault_Func001C takes nothing returns boolean
return(Trig_Assault_Func001Func003C())endfunctionfunction Trig_Assault_Actions takes nothing returns nothingif(Trig_Assault_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I008'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call UnitAddItemByIdSwapped('I055',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I054',GetTriggerUnit())
endifendfunctionfunction InitTrig_Assault takes nothing returns nothingset gg_trg_Assault=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Assault,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Assault,Condition(function Trig_Assault_Conditions))
call TriggerAddAction(gg_trg_Assault,function Trig_Assault_Actions)endfunctionfunction Trig_HyperStone_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I057')endfunctionfunction Trig_HyperStone_Func001Func002Func002Func006C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04X'))endfunctionfunction Trig_HyperStone_Func001Func002Func002C takes nothing returns booleanreturn(Trig_HyperStone_Func001Func002Func002Func006C())endfunctionfunction Trig_HyperStone_Func001Func002Func006C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I050'))endfunctionfunction Trig_HyperStone_Func001Func002C takes nothing returns booleanreturn(Trig_HyperStone_Func001Func002Func006C())
endfunctionfunction Trig_HyperStone_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I008'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I054'))endfunctionfunction Trig_HyperStone_Func001C takes nothing returns booleanreturn(Trig_HyperStone_Func001Func003C())endfunctionfunction Trig_HyperStone_Actions takes nothing returns nothingif(Trig_HyperStone_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I008'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I054'))call UnitAddItemByIdSwapped('I055',GetTriggerUnit())
else
if(Trig_HyperStone_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I050'))call UnitAddItemByIdSwapped('I051',GetTriggerUnit())
else
if(Trig_HyperStone_Func001Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04X'))call UnitAddItemByIdSwapped('I04W',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00X',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_HyperStone takes nothing returns nothingset gg_trg_HyperStone=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HyperStone,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_HyperStone,Condition(function Trig_HyperStone_Conditions))call TriggerAddAction(gg_trg_HyperStone,function Trig_HyperStone_Actions)endfunctionfunction Trig_AncientFigurine_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I056')endfunctionfunction Trig_AncientFigurine_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I054'))endfunctionfunction Trig_AncientFigurine_Func001Func002C takes nothing returns booleanreturn(Trig_AncientFigurine_Func001Func002Func003C())endfunctionfunction Trig_AncientFigurine_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I052'))endfunctionfunction Trig_AncientFigurine_Func001C takes nothing returns boolean
return(Trig_AncientFigurine_Func001Func003C())endfunctionfunction Trig_AncientFigurine_Actions takes nothing returns nothingif(Trig_AncientFigurine_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I052'))call UnitAddItemByIdSwapped('I053',GetTriggerUnit())
else
if(Trig_AncientFigurine_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I054'))call UnitAddItemByIdSwapped('I055',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I008',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_AncientFigurine takes nothing returns nothingset gg_trg_AncientFigurine=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_AncientFigurine,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_AncientFigurine,Condition(function Trig_AncientFigurine_Conditions))
call TriggerAddAction(gg_trg_AncientFigurine,function Trig_AncientFigurine_Actions)endfunctionfunction Trig_Maximillian_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I029')endfunctionfunction Trig_Maximillian_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I008'))endfunctionfunction Trig_Maximillian_Func001C takes nothing returns boolean
return(Trig_Maximillian_Func001Func003C())endfunctionfunction Trig_Maximillian_Actions takes nothing returns nothingif(Trig_Maximillian_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I008'))call UnitAddItemByIdSwapped('I053',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I052',GetTriggerUnit())
endifendfunctionfunction InitTrig_Maximillian takes nothing returns nothingset gg_trg_Maximillian=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Maximillian,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Maximillian,Condition(function Trig_Maximillian_Conditions))
call TriggerAddAction(gg_trg_Maximillian,function Trig_Maximillian_Actions)endfunctionfunction Trig_TheRedButterfly_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02A')endfunctionfunction Trig_TheRedButterfly_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))endfunctionfunction Trig_TheRedButterfly_Func001C takes nothing returns boolean
return(Trig_TheRedButterfly_Func001Func003C())endfunctionfunction Trig_TheRedButterfly_Actions takes nothing returns nothingif(Trig_TheRedButterfly_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call UnitAddItemByIdSwapped('I051',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I050',GetTriggerUnit())
endifendfunctionfunction InitTrig_TheRedButterfly takes nothing returns nothingset gg_trg_TheRedButterfly=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_TheRedButterfly,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_TheRedButterfly,Condition(function Trig_TheRedButterfly_Conditions))
call TriggerAddAction(gg_trg_TheRedButterfly,function Trig_TheRedButterfly_Actions)endfunctionfunction Trig_SilverHelm_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02C')endfunctionfunction Trig_SilverHelm_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03P'))endfunctionfunction Trig_SilverHelm_Func001C takes nothing returns booleanreturn(Trig_SilverHelm_Func001Func003C())endfunctionfunction Trig_SilverHelm_Actions takes nothing returns nothingif(Trig_SilverHelm_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03P'))call UnitAddItemByIdSwapped('I04Z',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04Y',GetTriggerUnit())
endifendfunctionfunction InitTrig_SilverHelm takes nothing returns nothingset gg_trg_SilverHelm=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SilverHelm,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_SilverHelm,Condition(function Trig_SilverHelm_Conditions))call TriggerAddAction(gg_trg_SilverHelm,function Trig_SilverHelm_Actions)endfunctionfunction Trig_Excalibur_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I04T')endfunctionfunction Trig_Excalibur_Func003Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04X'))endfunctionfunction Trig_Excalibur_Func003Func002Func002C takes nothing returns boolean
return(Trig_Excalibur_Func003Func002Func002Func002C())endfunctionfunction Trig_Excalibur_Func003Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04U'))endfunctionfunction Trig_Excalibur_Func003Func002C takes nothing returns booleanreturn(Trig_Excalibur_Func003Func002Func003C())endfunctionfunction Trig_Excalibur_Func003Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I041'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04C'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04R'))endfunctionfunction Trig_Excalibur_Func003C takes nothing returns booleanreturn(Trig_Excalibur_Func003Func003C())
endfunctionfunction Trig_Excalibur_Actions takes nothing returns nothingif(Trig_Excalibur_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I041'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04C'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04R'))call UnitAddItemByIdSwapped('I04S',GetTriggerUnit())
else
if(Trig_Excalibur_Func003Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04U'))call UnitAddItemByIdSwapped('I04V',GetTriggerUnit())
else
if(Trig_Excalibur_Func003Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04X'))call UnitAddItemByIdSwapped('I04W',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I014',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_Excalibur takes nothing returns nothingset gg_trg_Excalibur=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Excalibur,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Excalibur,Condition(function Trig_Excalibur_Conditions))
call TriggerAddAction(gg_trg_Excalibur,function Trig_Excalibur_Actions)endfunctionfunction Trig_Evasion_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I04P')endfunctionfunction Trig_Evasion_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I002'))endfunctionfunction Trig_Evasion_Func001C takes nothing returns boolean
return(Trig_Evasion_Func001Func003C())endfunctionfunction Trig_Evasion_Actions takes nothing returns nothingif(Trig_Evasion_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I002'))call UnitAddItemByIdSwapped('I03Y',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00P',GetTriggerUnit())
endifendfunctionfunction InitTrig_Evasion takes nothing returns nothingset gg_trg_Evasion=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Evasion,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Evasion,Condition(function Trig_Evasion_Conditions))
call TriggerAddAction(gg_trg_Evasion,function Trig_Evasion_Actions)endfunctionfunction Trig_Quarterstaff_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I04Q')endfunctionfunction Trig_Quarterstaff_Func001Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03X'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00P'))endfunctionfunction Trig_Quarterstaff_Func001C takes nothing returns booleanreturn(Trig_Quarterstaff_Func001Func003C())endfunctionfunction Trig_Quarterstaff_Actions takes nothing returns nothing
if(Trig_Quarterstaff_Func001C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03X'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00P'))call UnitAddItemByIdSwapped('I03Y',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I002',GetTriggerUnit())
endifendfunctionfunction InitTrig_Quarterstaff takes nothing returns nothing
set gg_trg_Quarterstaff=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Quarterstaff,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Quarterstaff,Condition(function Trig_Quarterstaff_Conditions))call TriggerAddAction(gg_trg_Quarterstaff,function Trig_Quarterstaff_Actions)endfunctionfunction Trig_Dagon_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I027')endfunctionfunction Trig_Dagon_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00J'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02P'))endfunctionfunction Trig_Dagon_Func001C takes nothing returns booleanreturn(Trig_Dagon_Func001Func003C())
endfunctionfunction Trig_Dagon_Actions takes nothing returns nothingif(Trig_Dagon_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00J'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02P'))call UnitAddItemByIdSwapped('I04K',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04J',GetTriggerUnit())
endifendfunctionfunction InitTrig_Dagon takes nothing returns nothingset gg_trg_Dagon=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Dagon,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Dagon,Condition(function Trig_Dagon_Conditions))
call TriggerAddAction(gg_trg_Dagon,function Trig_Dagon_Actions)endfunctionfunction Trig_UltimateOrb_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I04O')endfunctionfunction Trig_UltimateOrb_Func001Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I010'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Z'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I059'))endfunctionfunction Trig_UltimateOrb_Func001Func002Func002C takes nothing returns booleanreturn(Trig_UltimateOrb_Func001Func002Func002Func003C())
endfunctionfunction Trig_UltimateOrb_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I05Q'))endfunctionfunction Trig_UltimateOrb_Func001Func002Func006C takes nothing returns booleanreturn(IsUnitType(GetTriggerUnit(),UNIT_TYPE_MELEE_ATTACKER))!=nullendfunctionfunction Trig_UltimateOrb_Func001Func002C takes nothing returns booleanreturn(Trig_UltimateOrb_Func001Func002Func003C())endfunctionfunction Trig_UltimateOrb_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04H'))endfunctionfunction Trig_UltimateOrb_Func001C takes nothing returns boolean
return(Trig_UltimateOrb_Func001Func003C())endfunctionfunction Trig_UltimateOrb_Actions takes nothing returns nothingif(Trig_UltimateOrb_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04H'))call UnitAddItemByIdSwapped('I04I',GetTriggerUnit())
else
if(Trig_UltimateOrb_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I05Q'))if(Trig_UltimateOrb_Func001Func002Func006C())thencall UnitAddItemByIdSwapped('I04L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I05G',GetTriggerUnit())
endifelse
if(Trig_UltimateOrb_Func001Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I010'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I059'))call UnitAddItemByIdSwapped('I05A',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00K',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_UltimateOrb takes nothing returns nothingset gg_trg_UltimateOrb=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_UltimateOrb,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_UltimateOrb,Condition(function Trig_UltimateOrb_Conditions))
call TriggerAddAction(gg_trg_UltimateOrb,function Trig_UltimateOrb_Actions)endfunctionfunction Trig_Linken_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01X')endfunctionfunction Trig_Linken_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))endfunctionfunction Trig_Linken_Func001C takes nothing returns booleanreturn(Trig_Linken_Func001Func003C())endfunctionfunction Trig_Linken_Actions takes nothing returns nothingif(Trig_Linken_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call UnitAddItemByIdSwapped('I04I',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04H',GetTriggerUnit())
endifendfunctionfunction InitTrig_Linken takes nothing returns nothingset gg_trg_Linken=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Linken,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Linken,Condition(function Trig_Linken_Conditions))call TriggerAddAction(gg_trg_Linken,function Trig_Linken_Actions)endfunctionfunction Trig_Satanic_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01S')endfunctionfunction Trig_Satanic_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03R'))endfunctionfunction Trig_Satanic_Func001C takes nothing returns boolean
return(Trig_Satanic_Func001Func003C())endfunctionfunction Trig_Satanic_Actions takes nothing returns nothingif(Trig_Satanic_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03R'))call UnitAddItemByIdSwapped('I04G',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04F',GetTriggerUnit())
endifendfunctionfunction InitTrig_Satanic takes nothing returns nothingset gg_trg_Satanic=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Satanic,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Satanic,Condition(function Trig_Satanic_Conditions))
call TriggerAddAction(gg_trg_Satanic,function Trig_Satanic_Actions)endfunctionfunction Trig_Heart_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I022')endfunctionfunction Trig_Heart_Func001Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))endfunctionfunction Trig_Heart_Func001C takes nothing returns booleanreturn(Trig_Heart_Func001Func002C())
endfunctionfunction Trig_Heart_Actions takes nothing returns nothingif(Trig_Heart_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call UnitAddItemByIdSwapped('I04E',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04D',GetTriggerUnit())
endifendfunctionfunction InitTrig_Heart takes nothing returns nothingset gg_trg_Heart=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Heart,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Heart,Condition(function Trig_Heart_Conditions))
call TriggerAddAction(gg_trg_Heart,function Trig_Heart_Actions)endfunctionfunction Trig_Messerschmid_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I049')endfunctionfunction Trig_Messerschmid_Func001Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03R'))endfunctionfunction Trig_Messerschmid_Func001Func002Func002C takes nothing returns booleanreturn(Trig_Messerschmid_Func001Func002Func002Func002C())endfunctionfunction Trig_Messerschmid_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04U'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I014'))endfunctionfunction Trig_Messerschmid_Func001Func002C takes nothing returns boolean
return(Trig_Messerschmid_Func001Func002Func003C())endfunctionfunction Trig_Messerschmid_Func001Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04D'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))endfunctionfunction Trig_Messerschmid_Func001C takes nothing returns booleanreturn(Trig_Messerschmid_Func001Func003C())endfunctionfunction Trig_Messerschmid_Actions takes nothing returns nothing
if(Trig_Messerschmid_Func001C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04D'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call UnitAddItemByIdSwapped('I04E',GetTriggerUnit())
else
if(Trig_Messerschmid_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04U'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I014'))call UnitAddItemByIdSwapped('I04V',GetTriggerUnit())
else
if(Trig_Messerschmid_Func001Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03R'))call UnitAddItemByIdSwapped('I04G',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00V',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_Messerschmid takes nothing returns nothing
set gg_trg_Messerschmid=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Messerschmid,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Messerschmid,Condition(function Trig_Messerschmid_Conditions))call TriggerAddAction(gg_trg_Messerschmid,function Trig_Messerschmid_Actions)endfunctionfunction Trig_Radiance_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01Y')endfunctionfunction Trig_Radiance_Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04A'))
endfunctionfunction Trig_Radiance_Actions takes nothing returns nothing
if(Trig_Radiance_Func001C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04A'))call UnitAddItemByIdSwapped('I04C',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04B',GetTriggerUnit())
endifendfunctionfunction InitTrig_Radiance takes nothing returns nothing
set gg_trg_Radiance=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Radiance,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Radiance,Condition(function Trig_Radiance_Conditions))call TriggerAddAction(gg_trg_Radiance,function Trig_Radiance_Actions)endfunctionfunction Trig_SacredRelic_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I00W')endfunctionfunction Trig_SacredRelic_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04N'))
endfunctionfunction Trig_SacredRelic_Func001Func002C takes nothing returns booleanreturn(Trig_SacredRelic_Func001Func002Func003C())endfunctionfunction Trig_SacredRelic_Func001C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04B'))
endfunctionfunction Trig_SacredRelic_Actions takes nothing returns nothingif(Trig_SacredRelic_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04B'))call UnitAddItemByIdSwapped('I04C',GetTriggerUnit())
else
if(Trig_SacredRelic_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04N'))call UnitAddItemByIdSwapped('I05E',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I04A',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_SacredRelic takes nothing returns nothingset gg_trg_SacredRelic=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SacredRelic,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_SacredRelic,Condition(function Trig_SacredRelic_Conditions))
call TriggerAddAction(gg_trg_SacredRelic,function Trig_SacredRelic_Actions)endfunctionfunction Trig_BoosSpeed_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I048')endfunctionfunction Trig_BoosSpeed_Func001Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))endfunctionfunction Trig_BoosSpeed_Func001Func002Func002C takes nothing returns boolean
return(Trig_BoosSpeed_Func001Func002Func002Func002C())endfunctionfunction Trig_BoosSpeed_Func001Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00E'))endfunctionfunction Trig_BoosSpeed_Func001Func002C takes nothing returns booleanreturn(Trig_BoosSpeed_Func001Func002Func003C())endfunctionfunction Trig_BoosSpeed_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00D'))endfunctionfunction Trig_BoosSpeed_Func001C takes nothing returns booleanreturn(Trig_BoosSpeed_Func001Func003C())
endfunctionfunction Trig_BoosSpeed_Actions takes nothing returns nothingif(Trig_BoosSpeed_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_BoosSpeed_Func001Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_BoosSpeed_Func001Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00Q',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_BoosSpeed takes nothing returns nothingset gg_trg_BoosSpeed=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BoosSpeed,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BoosSpeed,Condition(function Trig_BoosSpeed_Conditions))
call TriggerAddAction(gg_trg_BoosSpeed,function Trig_BoosSpeed_Actions)endfunctionfunction Trig_GloveHaste_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I047')endfunctionfunction Trig_GloveHaste_Func003Func002Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I003'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I044'))endfunctionfunction Trig_GloveHaste_Func003Func002Func002Func002C takes nothing returns boolean
return(Trig_GloveHaste_Func003Func002Func002Func002Func002C())endfunctionfunction Trig_GloveHaste_Func003Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))endfunctionfunction Trig_GloveHaste_Func003Func002Func002C takes nothing returns booleanreturn(Trig_GloveHaste_Func003Func002Func002Func003C())endfunctionfunction Trig_GloveHaste_Func003Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00E'))endfunctionfunction Trig_GloveHaste_Func003Func002C takes nothing returns booleanreturn(Trig_GloveHaste_Func003Func002Func003C())
endfunctionfunction Trig_GloveHaste_Func003Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00D'))endfunctionfunction Trig_GloveHaste_Func003C takes nothing returns booleanreturn(Trig_GloveHaste_Func003Func003C())endfunctionfunction Trig_GloveHaste_Actions takes nothing returns nothingif(Trig_GloveHaste_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_GloveHaste_Func003Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_GloveHaste_Func003Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_GloveHaste_Func003Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I003'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I044'))call UnitAddItemByIdSwapped('I045',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00L',GetTriggerUnit())
endifendifendifendifendfunctionfunction InitTrig_GloveHaste takes nothing returns nothingset gg_trg_GloveHaste=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_GloveHaste,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_GloveHaste,Condition(function Trig_GloveHaste_Conditions))call TriggerAddAction(gg_trg_GloveHaste,function Trig_GloveHaste_Actions)endfunctionfunction Trig_MithrilHammer_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I046')endfunctionfunction Trig_MithrilHammer_Func003Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I001'))endfunctionfunction Trig_MithrilHammer_Func003Func002C takes nothing returns booleanreturn(Trig_MithrilHammer_Func003Func002Func003C())endfunctionfunction Trig_MithrilHammer_Func003Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I044'))endfunctionfunction Trig_MithrilHammer_Func003C takes nothing returns booleanreturn(Trig_MithrilHammer_Func003Func003C())
endfunctionfunction Trig_MithrilHammer_Actions takes nothing returns nothingif(Trig_MithrilHammer_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I044'))call UnitAddItemByIdSwapped('I045',GetTriggerUnit())
else
if(Trig_MithrilHammer_Func003Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I001'))call UnitAddItemByIdSwapped('I04N',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I003',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_MithrilHammer takes nothing returns nothingset gg_trg_MithrilHammer=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MithrilHammer,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_MithrilHammer,Condition(function Trig_MithrilHammer_Conditions))
call TriggerAddAction(gg_trg_MithrilHammer,function Trig_MithrilHammer_Actions)endfunctionfunction Trig_MaelStrom_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I01T')endfunctionfunction Trig_MaelStrom_Func003Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I003'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00L'))endfunctionfunction Trig_MaelStrom_Func003C takes nothing returns booleanreturn(Trig_MaelStrom_Func003Func002C())
endfunctionfunction Trig_MaelStrom_Actions takes nothing returns nothingif(Trig_MaelStrom_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I003'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call UnitAddItemByIdSwapped('I045',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I044',GetTriggerUnit())
endifendfunctionfunction InitTrig_MaelStrom takes nothing returns nothingset gg_trg_MaelStrom=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MaelStrom,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_MaelStrom,Condition(function Trig_MaelStrom_Conditions))
call TriggerAddAction(gg_trg_MaelStrom,function Trig_MaelStrom_Actions)endfunctionfunction Trig_DemonEdge_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I00T')endfunctionfunction Trig_DemonEdge_Func003Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I042'))endfunctionfunction Trig_DemonEdge_Func003C takes nothing returns booleanreturn(Trig_DemonEdge_Func003Func002C())
endfunctionfunction Trig_DemonEdge_Actions takes nothing returns nothingif(Trig_DemonEdge_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I042'))call UnitAddItemByIdSwapped('I041',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I043',GetTriggerUnit())
endifendfunctionfunction InitTrig_DemonEdge takes nothing returns nothingset gg_trg_DemonEdge=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_DemonEdge,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_DemonEdge,Condition(function Trig_DemonEdge_Conditions))
call TriggerAddAction(gg_trg_DemonEdge,function Trig_DemonEdge_Actions)endfunctionfunction Trig_Buriza_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I025')endfunctionfunction Trig_Buriza_Func003Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I043'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03I'))endfunctionfunction Trig_Buriza_Func003C takes nothing returns booleanreturn(Trig_Buriza_Func003Func002C())endfunctionfunction Trig_Buriza_Actions takes nothing returns nothingif(Trig_Buriza_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I043'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03I'))call UnitAddItemByIdSwapped('I041',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I042',GetTriggerUnit())
endifendfunctionfunction InitTrig_Buriza takes nothing returns nothingset gg_trg_Buriza=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Buriza,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Buriza,Condition(function Trig_Buriza_Conditions))call TriggerAddAction(gg_trg_Buriza,function Trig_Buriza_Actions)endfunctionfunction Trig_Lothar_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01W')endfunctionfunction Trig_Lothar_Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03X'))
endfunctionfunction Trig_Lothar_Actions takes nothing returns nothingif(Trig_Lothar_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03X'))call UnitAddItemByIdSwapped('I040',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03Z',GetTriggerUnit())
endifendfunctionfunction InitTrig_Lothar takes nothing returns nothingset gg_trg_Lothar=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lothar,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Lothar,Condition(function Trig_Lothar_Conditions))call TriggerAddAction(gg_trg_Lothar,function Trig_Lothar_Actions)endfunctionfunction Trig_Eaglehorn_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I00U')endfunctionfunction Trig_Eaglehorn_Func003Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00P'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I002'))endfunctionfunction Trig_Eaglehorn_Func003Func002C takes nothing returns booleanreturn(Trig_Eaglehorn_Func003Func002Func003C())endfunctionfunction Trig_Eaglehorn_Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03Z'))
endfunctionfunction Trig_Eaglehorn_Actions takes nothing returns nothingif(Trig_Eaglehorn_Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03Z'))call UnitAddItemByIdSwapped('I040',GetTriggerUnit())
else
if(Trig_Eaglehorn_Func003Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00P'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I002'))call UnitAddItemByIdSwapped('I03Y',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03X',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_Eaglehorn takes nothing returns nothingset gg_trg_Eaglehorn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Eaglehorn,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Eaglehorn,Condition(function Trig_Eaglehorn_Conditions))
call TriggerAddAction(gg_trg_Eaglehorn,function Trig_Eaglehorn_Actions)endfunctionfunction Trig_PointBooster_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03W')endfunctionfunction Trig_PointBooster_Func003Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I011'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))endfunctionfunction Trig_PointBooster_Func003C takes nothing returns booleanreturn(Trig_PointBooster_Func003Func003C())endfunctionfunction Trig_PointBooster_Actions takes nothing returns nothing
if(Trig_PointBooster_Func003C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I011'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call UnitAddItemByIdSwapped('I03U',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I012',GetTriggerUnit())
endifendfunctionfunction InitTrig_PointBooster takes nothing returns nothing
set gg_trg_PointBooster=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_PointBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_PointBooster,Condition(function Trig_PointBooster_Conditions))call TriggerAddAction(gg_trg_PointBooster,function Trig_PointBooster_Actions)endfunctionfunction Trig_VitBooster_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03V')endfunctionfunction Trig_VitBooster_Func001Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00V'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04D'))endfunctionfunction Trig_VitBooster_Func001Func002Func002C takes nothing returns booleanreturn(Trig_VitBooster_Func001Func002Func002Func003C())endfunctionfunction Trig_VitBooster_Func001Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I011'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I012'))endfunctionfunction Trig_VitBooster_Func001Func002C takes nothing returns booleanreturn(Trig_VitBooster_Func001Func002Func003C())
endfunctionfunction Trig_VitBooster_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I005'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))endfunctionfunction Trig_VitBooster_Func001C takes nothing returns booleanreturn(Trig_VitBooster_Func001Func003C())endfunctionfunction Trig_VitBooster_Actions takes nothing returns nothingif(Trig_VitBooster_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I005'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call UnitAddItemByIdSwapped('I03S',GetTriggerUnit())
else
if(Trig_VitBooster_Func001Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I011'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I012'))call UnitAddItemByIdSwapped('I03U',GetTriggerUnit())
else
if(Trig_VitBooster_Func001Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00V'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04D'))call UnitAddItemByIdSwapped('I04E',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I013',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_VitBooster takes nothing returns nothingset gg_trg_VitBooster=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_VitBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_VitBooster,Condition(function Trig_VitBooster_Conditions))call TriggerAddAction(gg_trg_VitBooster,function Trig_VitBooster_Actions)endfunctionfunction Trig_Shield_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03T')endfunctionfunction Trig_Shield_Func001Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))endfunctionfunction Trig_Shield_Func001C takes nothing returns booleanreturn(Trig_Shield_Func001Func003C())endfunctionfunction Trig_Shield_Actions takes nothing returns nothingif(Trig_Shield_Func001C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call UnitAddItemByIdSwapped('I03S',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I005',GetTriggerUnit())
endifendfunctionfunction InitTrig_Shield takes nothing returns nothingset gg_trg_Shield=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Shield,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Shield,Condition(function Trig_Shield_Conditions))call TriggerAddAction(gg_trg_Shield,function Trig_Shield_Actions)endfunctionfunction Trig_Planeswalker_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03Q')endfunctionfunction Trig_Planeswalker_Func002Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I006'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))endfunctionfunction Trig_Planeswalker_Func002C takes nothing returns booleanreturn(Trig_Planeswalker_Func002Func002C())endfunctionfunction Trig_Planeswalker_Actions takes nothing returns nothing
if(Trig_Planeswalker_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I006'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call UnitAddItemByIdSwapped('I03P',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00S',GetTriggerUnit())
endifendfunctionfunction InitTrig_Planeswalker takes nothing returns nothing
set gg_trg_Planeswalker=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Planeswalker,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Planeswalker,Condition(function Trig_Planeswalker_Conditions))call TriggerAddAction(gg_trg_Planeswalker,function Trig_Planeswalker_Actions)endfunctionfunction Trig_HelmIronWill_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03O')endfunctionfunction Trig_HelmIronWill_Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00M'))
endfunctionfunction Trig_HelmIronWill_Func002Func002C takes nothing returns boolean
return(Trig_HelmIronWill_Func002Func002Func003C())endfunctionfunction Trig_HelmIronWill_Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00Y'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00S'))endfunctionfunction Trig_HelmIronWill_Func002C takes nothing returns booleanreturn(Trig_HelmIronWill_Func002Func003C())endfunctionfunction Trig_HelmIronWill_Actions takes nothing returns nothing
if(Trig_HelmIronWill_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00S'))call UnitAddItemByIdSwapped('I03P',GetTriggerUnit())
else
if(Trig_HelmIronWill_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call UnitAddItemByIdSwapped('I03R',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I006',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_HelmIronWill takes nothing returns nothing
set gg_trg_HelmIronWill=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HelmIronWill,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_HelmIronWill,Condition(function Trig_HelmIronWill_Conditions))call TriggerAddAction(gg_trg_HelmIronWill,function Trig_HelmIronWill_Actions)endfunctionfunction Trig_ChainMail_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I03N')endfunctionfunction Trig_ChainMail_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03M'))endfunctionfunction Trig_ChainMail_Func002C takes nothing returns booleanreturn(Trig_ChainMail_Func002Func002C())
endfunctionfunction Trig_ChainMail_Actions takes nothing returns nothingif(Trig_ChainMail_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03M'))call UnitAddItemByIdSwapped('I03L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I007',GetTriggerUnit())
endifendfunctionfunction InitTrig_ChainMail takes nothing returns nothingset gg_trg_ChainMail=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ChainMail,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_ChainMail,Condition(function Trig_ChainMail_Conditions))
call TriggerAddAction(gg_trg_ChainMail,function Trig_ChainMail_Actions)endfunctionfunction Trig_BladeMail_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I02B')endfunctionfunction Trig_BladeMail_Func002Func001C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I007'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))endfunctionfunction Trig_BladeMail_Func002C takes nothing returns booleanreturn(Trig_BladeMail_Func002Func001C())
endfunctionfunction Trig_BladeMail_Actions takes nothing returns nothingif(Trig_BladeMail_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I007'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call UnitAddItemByIdSwapped('I03L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03M',GetTriggerUnit())
endifendfunctionfunction InitTrig_BladeMail takes nothing returns nothingset gg_trg_BladeMail=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeMail,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeMail,Condition(function Trig_BladeMail_Conditions))
call TriggerAddAction(gg_trg_BladeMail,function Trig_BladeMail_Actions)endfunctionfunction Trig_BroadSword_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03K')endfunctionfunction Trig_BroadSword_Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02L'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I003'))endfunctionfunction Trig_BroadSword_Func002Func002C takes nothing returns booleanreturn(Trig_BroadSword_Func002Func002Func003C())
endfunctionfunction Trig_BroadSword_Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03H'))endfunctionfunction Trig_BroadSword_Func002C takes nothing returns booleanreturn(Trig_BroadSword_Func002Func003C())endfunctionfunction Trig_BroadSword_Actions takes nothing returns nothingif(Trig_BroadSword_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03H'))call UnitAddItemByIdSwapped('I03I',GetTriggerUnit())
else
if(Trig_BroadSword_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02L'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I003'))call UnitAddItemByIdSwapped('I04N',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I001',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_BroadSword takes nothing returns nothingset gg_trg_BroadSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BroadSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BroadSword,Condition(function Trig_BroadSword_Conditions))call TriggerAddAction(gg_trg_BroadSword,function Trig_BroadSword_Actions)endfunctionfunction Trig_BladeAtk_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03J')endfunctionfunction Trig_BladeAtk_Func002Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I007'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03M'))endfunctionfunction Trig_BladeAtk_Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I001'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03H'))endfunctionfunction Trig_BladeAtk_Func002C takes nothing returns booleanreturn(Trig_BladeAtk_Func002Func003C())endfunctionfunction Trig_BladeAtk_Actions takes nothing returns nothing
if(Trig_BladeAtk_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I001'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03H'))call UnitAddItemByIdSwapped('I03I',GetTriggerUnit())
else
if(Trig_BladeAtk_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I007'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03M'))call UnitAddItemByIdSwapped('I03L',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I000',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_BladeAtk takes nothing returns nothing
set gg_trg_BladeAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeAtk,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeAtk,Condition(function Trig_BladeAtk_Conditions))call TriggerAddAction(gg_trg_BladeAtk,function Trig_BladeAtk_Actions)endfunctionfunction Trig_Crystalys_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I01V')endfunctionfunction Trig_Crystalys_Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I001'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I000'))endfunctionfunction Trig_Crystalys_Func002C takes nothing returns booleanreturn(Trig_Crystalys_Func002Func003C())
endfunctionfunction Trig_Crystalys_Actions takes nothing returns nothingif(Trig_Crystalys_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I001'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I000'))call UnitAddItemByIdSwapped('I03I',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03H',GetTriggerUnit())
endifendfunctionfunction InitTrig_Crystalys takes nothing returns nothingset gg_trg_Crystalys=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Crystalys,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Crystalys,Condition(function Trig_Crystalys_Conditions))
call TriggerAddAction(gg_trg_Crystalys,function Trig_Crystalys_Actions)endfunctionfunction Trig_Berserk_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01O')endfunctionfunction Trig_Berserk_Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00M'))endfunctionfunction Trig_Berserk_Actions takes nothing returns nothingif(Trig_Berserk_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call UnitAddItemByIdSwapped('I03G',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03F',GetTriggerUnit())
endifendfunctionfunction InitTrig_Berserk takes nothing returns nothingset gg_trg_Berserk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Berserk,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Berserk,Condition(function Trig_Berserk_Conditions))
call TriggerAddAction(gg_trg_Berserk,function Trig_Berserk_Actions)endfunctionfunction Trig_MaskofDeath_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I03E')endfunctionfunction Trig_MaskofDeath_Func002Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I006'))
endfunctionfunction Trig_MaskofDeath_Func002Func002Func002C takes nothing returns booleanreturn(Trig_MaskofDeath_Func002Func002Func002Func003C())
endfunctionfunction Trig_MaskofDeath_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03F'))
endfunctionfunction Trig_MaskofDeath_Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I02Y'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I03C'))endfunctionfunction Trig_MaskofDeath_Func002C takes nothing returns boolean
return(Trig_MaskofDeath_Func002Func003C())endfunctionfunction Trig_MaskofDeath_Actions takes nothing returns nothingif(Trig_MaskofDeath_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03C'))call UnitAddItemByIdSwapped('I03D',GetTriggerUnit())
else
if(Trig_MaskofDeath_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03F'))call UnitAddItemByIdSwapped('I03G',GetTriggerUnit())
else
if(Trig_MaskofDeath_Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I006'))call UnitAddItemByIdSwapped('I03R',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00M',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_MaskofDeath takes nothing returns nothingset gg_trg_MaskofDeath=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_MaskofDeath,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_MaskofDeath,Condition(function Trig_MaskofDeath_Conditions))
call TriggerAddAction(gg_trg_MaskofDeath,function Trig_MaskofDeath_Actions)endfunctionfunction Trig_Vladmi_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01N')endfunctionfunction Trig_Vladmi_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I02Y'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00M'))endfunctionfunction Trig_Vladmi_Func002C takes nothing returns booleanreturn(Trig_Vladmi_Func002Func002C())endfunctionfunction Trig_Vladmi_Actions takes nothing returns nothingif(Trig_Vladmi_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02Y'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00M'))call UnitAddItemByIdSwapped('I03D',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03C',GetTriggerUnit())
endifendfunctionfunction InitTrig_Vladmi takes nothing returns nothingset gg_trg_Vladmi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Vladmi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Vladmi,Condition(function Trig_Vladmi_Conditions))call TriggerAddAction(gg_trg_Vladmi,function Trig_Vladmi_Actions)endfunctionfunction Trig_Diffusal_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I020')endfunctionfunction Trig_Diffusal_Func002Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00F'))endfunctionfunction Trig_Diffusal_Func002C takes nothing returns booleanreturn(Trig_Diffusal_Func002Func002C())endfunctionfunction Trig_Diffusal_Actions takes nothing returns nothing
if(Trig_Diffusal_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call UnitAddItemByIdSwapped('I03B',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I03A',GetTriggerUnit())
endifendfunctionfunction InitTrig_Diffusal takes nothing returns nothing
set gg_trg_Diffusal=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Diffusal,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Diffusal,Condition(function Trig_Diffusal_Conditions))call TriggerAddAction(gg_trg_Diffusal,function Trig_Diffusal_Actions)endfunctionfunction Trig_StaffWizard_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I039')endfunctionfunction Trig_StaffWizard_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I035'))endfunctionfunction Trig_StaffWizard_Func002Func003Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02P'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I04J'))endfunctionfunction Trig_StaffWizard_Func002Func003C takes nothing returns booleanreturn(Trig_StaffWizard_Func002Func003Func003C())endfunctionfunction Trig_StaffWizard_Func002C takes nothing returns boolean
return(Trig_StaffWizard_Func002Func002C())endfunctionfunction Trig_StaffWizard_Actions takes nothing returns nothingif(Trig_StaffWizard_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I035'))call UnitAddItemByIdSwapped('I036',GetTriggerUnit())
else
if(Trig_StaffWizard_Func002Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02P'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I04J'))call UnitAddItemByIdSwapped('I04K',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00J',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_StaffWizard takes nothing returns nothingset gg_trg_StaffWizard=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_StaffWizard,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_StaffWizard,Condition(function Trig_StaffWizard_Conditions))
call TriggerAddAction(gg_trg_StaffWizard,function Trig_StaffWizard_Actions)endfunctionfunction Trig_BladeAgi_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I038')endfunctionfunction Trig_BladeAgi_Func002Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00E'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I02I'))endfunctionfunction Trig_BladeAgi_Func002Func003Func006C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03A'))endfunctionfunction Trig_BladeAgi_Func002Func003C takes nothing returns boolean
return(Trig_BladeAgi_Func002Func003Func006C())endfunctionfunction Trig_BladeAgi_Func002C takes nothing returns booleanreturn(Trig_BladeAgi_Func002Func002C())endfunctionfunction Trig_BladeAgi_Actions takes nothing returns nothing
if(Trig_BladeAgi_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02I'))call UnitAddItemByIdSwapped('I032',GetTriggerUnit())
else
if(Trig_BladeAgi_Func002Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03A'))call UnitAddItemByIdSwapped('I03B',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00I',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_BladeAgi takes nothing returns nothing
set gg_trg_BladeAgi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeAgi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeAgi,Condition(function Trig_BladeAgi_Conditions))call TriggerAddAction(gg_trg_BladeAgi,function Trig_BladeAgi_Actions)endfunctionfunction Trig_OrgeAxe_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I037')endfunctionfunction Trig_OrgeAxe_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00D'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I033'))endfunctionfunction Trig_OrgeAxe_Func002C takes nothing returns boolean
return(Trig_OrgeAxe_Func002Func002C())endfunctionfunction Trig_OrgeAxe_Actions takes nothing returns nothingif(Trig_OrgeAxe_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I033'))call UnitAddItemByIdSwapped('I034',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00H',GetTriggerUnit())
endifendfunctionfunction InitTrig_OrgeAxe takes nothing returns nothingset gg_trg_OrgeAxe=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_OrgeAxe,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_OrgeAxe,Condition(function Trig_OrgeAxe_Conditions))
call TriggerAddAction(gg_trg_OrgeAxe,function Trig_OrgeAxe_Actions)endfunctionfunction Trig_Searing_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I01K')endfunctionfunction Trig_Searing_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00J'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00F'))endfunctionfunction Trig_Searing_Func002C takes nothing returns boolean
return(Trig_Searing_Func002Func002C())endfunctionfunction Trig_Searing_Actions takes nothing returns nothingif(Trig_Searing_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00J'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00F'))call UnitAddItemByIdSwapped('I036',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I035',GetTriggerUnit())
endifendfunctionfunction InitTrig_Searing takes nothing returns nothingset gg_trg_Searing=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Searing,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Searing,Condition(function Trig_Searing_Conditions))
call TriggerAddAction(gg_trg_Searing,function Trig_Searing_Actions)endfunctionfunction Trig_Sange_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I01I')endfunctionfunction Trig_Sange_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00H'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00D'))endfunctionfunction Trig_Sange_Func002C takes nothing returns booleanreturn(Trig_Sange_Func002Func002C())
endfunctionfunction Trig_Sange_Actions takes nothing returns nothingif(Trig_Sange_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00H'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00D'))call UnitAddItemByIdSwapped('I034',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I033',GetTriggerUnit())
endifendfunctionfunction InitTrig_Sange takes nothing returns nothingset gg_trg_Sange=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Sange,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Sange,Condition(function Trig_Sange_Conditions))
call TriggerAddAction(gg_trg_Sange,function Trig_Sange_Actions)endfunctionfunction Trig_Yasha_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I01J')endfunctionfunction Trig_Yasha_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00E'))endfunctionfunction Trig_Yasha_Func002C takes nothing returns booleanreturn(Trig_Yasha_Func002Func002C())
endfunctionfunction Trig_Yasha_Actions takes nothing returns nothingif(Trig_Yasha_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00E'))call UnitAddItemByIdSwapped('I032',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I02I',GetTriggerUnit())
endifendfunctionfunction InitTrig_Yasha takes nothing returns nothingset gg_trg_Yasha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Yasha,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Yasha,Condition(function Trig_Yasha_Conditions))
call TriggerAddAction(gg_trg_Yasha,function Trig_Yasha_Actions)endfunctionfunction Trig_EnergyBooster_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I030')endfunctionfunction Trig_EnergyBooster_Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I012'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))endfunctionfunction Trig_EnergyBooster_Func002Func002C takes nothing returns booleanreturn(Trig_EnergyBooster_Func002Func002Func003C())endfunctionfunction Trig_EnergyBooster_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I004'))endfunctionfunction Trig_EnergyBooster_Actions takes nothing returns nothingif(Trig_EnergyBooster_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I004'))call UnitAddItemByIdSwapped('I031',GetTriggerUnit())
else
if(Trig_EnergyBooster_Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I012'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call UnitAddItemByIdSwapped('I03U',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I011',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_EnergyBooster takes nothing returns nothingset gg_trg_EnergyBooster=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_EnergyBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_EnergyBooster,Condition(function Trig_EnergyBooster_Conditions))
call TriggerAddAction(gg_trg_EnergyBooster,function Trig_EnergyBooster_Actions)endfunctionfunction Trig_SobiMask_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02Z')endfunctionfunction Trig_SobiMask_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I004'))endfunctionfunction Trig_SobiMask_Actions takes nothing returns nothing
if(Trig_SobiMask_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I004'))call UnitAddItemByIdSwapped('I02Y',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00N',GetTriggerUnit())
endifendfunctionfunction InitTrig_SobiMask takes nothing returns nothing
set gg_trg_SobiMask=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SobiMask,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_SobiMask,Condition(function Trig_SobiMask_Conditions))call TriggerAddAction(gg_trg_SobiMask,function Trig_SobiMask_Actions)endfunctionfunction Trig_RingProtect_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02X')endfunctionfunction Trig_RingProtect_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I011'))endfunctionfunction Trig_RingProtect_Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00N'))endfunctionfunction Trig_RingProtect_Actions takes nothing returns nothingif(Trig_RingProtect_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00N'))call UnitAddItemByIdSwapped('I02Y',GetTriggerUnit())
else
if(Trig_RingProtect_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I011'))call UnitAddItemByIdSwapped('I031',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I004',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_RingProtect takes nothing returns nothingset gg_trg_RingProtect=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RingProtect,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_RingProtect,Condition(function Trig_RingProtect_Conditions))
call TriggerAddAction(gg_trg_RingProtect,function Trig_RingProtect_Actions)endfunctionfunction Trig_RobeMagi_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02W')endfunctionfunction Trig_RobeMagi_Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00J'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I035'))endfunctionfunction Trig_RobeMagi_Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I03A'))endfunctionfunction Trig_RobeMagi_Func002Func002C takes nothing returns boolean
return(Trig_RobeMagi_Func002Func002Func002C())endfunctionfunction Trig_RobeMagi_Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00L'))endfunctionfunction Trig_RobeMagi_Func002C takes nothing returns booleanreturn(Trig_RobeMagi_Func002Func003C())endfunctionfunction Trig_RobeMagi_Actions takes nothing returns nothing
if(Trig_RobeMagi_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_RobeMagi_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00J'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I035'))call UnitAddItemByIdSwapped('I036',GetTriggerUnit())
else
if(Trig_RobeMagi_Func002Func002Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I03A'))call UnitAddItemByIdSwapped('I03B',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00F',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_RobeMagi takes nothing returns nothing
set gg_trg_RobeMagi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RobeMagi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RobeMagi,Condition(function Trig_RobeMagi_Conditions))call TriggerAddAction(gg_trg_RobeMagi,function Trig_RobeMagi_Actions)endfunctionfunction Trig_BootsAgi_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02V')endfunctionfunction Trig_BootsAgi_Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00I'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I02I'))endfunctionfunction Trig_BootsAgi_Func002Func002C takes nothing returns boolean
return(Trig_BootsAgi_Func002Func002Func002C())endfunctionfunction Trig_BootsAgi_Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00L'))endfunctionfunction Trig_BootsAgi_Func002C takes nothing returns booleanreturn(Trig_BootsAgi_Func002Func003C())endfunctionfunction Trig_BootsAgi_Actions takes nothing returns nothing
if(Trig_BootsAgi_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_BootsAgi_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00I'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I02I'))call UnitAddItemByIdSwapped('I032',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00E',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_BootsAgi takes nothing returns nothing
set gg_trg_BootsAgi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BootsAgi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BootsAgi,Condition(function Trig_BootsAgi_Conditions))call TriggerAddAction(gg_trg_BootsAgi,function Trig_BootsAgi_Actions)endfunctionfunction Trig_BeltStr_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02T')endfunctionfunction Trig_BeltStr_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00Q'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00L'))endfunctionfunction Trig_BeltStr_Func002Func003Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00H'))and(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I033'))endfunctionfunction Trig_BeltStr_Func002Func003C takes nothing returns booleanreturn(Trig_BeltStr_Func002Func003Func002C())endfunctionfunction Trig_BeltStr_Func002C takes nothing returns boolean
return(Trig_BeltStr_Func002Func002C())endfunctionfunction Trig_BeltStr_Actions takes nothing returns nothingif(Trig_BeltStr_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Q'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00L'))call UnitAddItemByIdSwapped('I02U',GetTriggerUnit())
else
if(Trig_BeltStr_Func002Func003C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00H'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I033'))call UnitAddItemByIdSwapped('I034',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00D',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_BeltStr takes nothing returns nothingset gg_trg_BeltStr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BeltStr,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_BeltStr,Condition(function Trig_BeltStr_Conditions))
call TriggerAddAction(gg_trg_BeltStr,function Trig_BeltStr_Actions)endfunctionfunction Trig_GiantStr_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02Q')endfunctionfunction Trig_GiantStr_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00G'))endfunctionfunction Trig_GiantStr_Actions takes nothing returns nothing
if(Trig_GiantStr_Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call UnitAddItemByIdSwapped('I02O',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I009',GetTriggerUnit())
endifendfunctionfunction InitTrig_GiantStr takes nothing returns nothing
set gg_trg_GiantStr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_GiantStr,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_GiantStr,Condition(function Trig_GiantStr_Conditions))call TriggerAddAction(gg_trg_GiantStr,function Trig_GiantStr_Actions)endfunctionfunction Trig_Slipper_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02R')endfunctionfunction Trig_Slipper_Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00G'))endfunctionfunction Trig_Slipper_Actions takes nothing returns nothingif(Trig_Slipper_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call UnitAddItemByIdSwapped('I02M',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00A',GetTriggerUnit())
endifendfunctionfunction InitTrig_Slipper takes nothing returns nothingset gg_trg_Slipper=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Slipper,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Slipper,Condition(function Trig_Slipper_Conditions))
call TriggerAddAction(gg_trg_Slipper,function Trig_Slipper_Actions)endfunctionfunction Trig_Mantle_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02S')endfunctionfunction Trig_Mantle_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00G'))endfunctionfunction Trig_Mantle_Actions takes nothing returns nothingif(Trig_Mantle_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00G'))call UnitAddItemByIdSwapped('I02P',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00B',GetTriggerUnit())
endifendfunctionfunction InitTrig_Mantle takes nothing returns nothingset gg_trg_Mantle=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Mantle,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Mantle,Condition(function Trig_Mantle_Conditions))call TriggerAddAction(gg_trg_Mantle,function Trig_Mantle_Actions)endfunctionfunction Trig_Circlet_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02N')endfunctionfunction Trig_Circlet_Func002Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00B'))endfunctionfunction Trig_Circlet_Func002Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00A'))endfunctionfunction Trig_Circlet_Func002C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I009'))endfunctionfunction Trig_Circlet_Actions takes nothing returns nothingif(Trig_Circlet_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I009'))call UnitAddItemByIdSwapped('I02O',GetTriggerUnit())
else
if(Trig_Circlet_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00A'))call UnitAddItemByIdSwapped('I02M',GetTriggerUnit())
else
if(Trig_Circlet_Func002Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00B'))call UnitAddItemByIdSwapped('I02P',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00G',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_Circlet takes nothing returns nothingset gg_trg_Circlet=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Circlet,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Circlet,Condition(function Trig_Circlet_Conditions))
call TriggerAddAction(gg_trg_Circlet,function Trig_Circlet_Actions)endfunctionfunction Trig_VoidStone_Conditions takes nothing returns boolean
return(GetItemTypeId(GetManipulatedItem())=='I02J')endfunctionfunction Trig_VoidStone_Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I010'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00K'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I059'))endfunctionfunction Trig_VoidStone_Func002Func002C takes nothing returns booleanreturn(Trig_VoidStone_Func002Func002Func003C())endfunctionfunction Trig_VoidStone_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00Y'))endfunctionfunction Trig_VoidStone_Actions takes nothing returns nothingif(Trig_VoidStone_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Y'))call UnitAddItemByIdSwapped('I02L',GetTriggerUnit())
else
if(Trig_VoidStone_Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I010'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00K'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I059'))call UnitAddItemByIdSwapped('I05A',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00Z',GetTriggerUnit())
endifendifendfunctionfunction InitTrig_VoidStone takes nothing returns nothingset gg_trg_VoidStone=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_VoidStone,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_VoidStone,Condition(function Trig_VoidStone_Conditions))
call TriggerAddAction(gg_trg_VoidStone,function Trig_VoidStone_Actions)endfunctionfunction Trig_RingHealth_Conditions takes nothing returns booleanreturn(GetItemTypeId(GetManipulatedItem())=='I02K')endfunctionfunction Trig_RingHealth_Func002Func002Func002Func003C takes nothing returns boolean
return(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I013'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I005'))endfunctionfunction Trig_RingHealth_Func002Func002Func002C takes nothing returns booleanreturn(Trig_RingHealth_Func002Func002Func002Func003C())endfunctionfunction Trig_RingHealth_Func002Func002Func003C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I006'))and(UnitHasItemOfTypeBJ(GetTriggerUnit(),'I00S'))endfunctionfunction Trig_RingHealth_Func002Func002C takes nothing returns booleanreturn(Trig_RingHealth_Func002Func002Func003C())
endfunctionfunction Trig_RingHealth_Func002C takes nothing returns booleanreturn(UnitHasItemOfTypeBJ(GetManipulatingUnit(),'I00Z'))endfunctionfunction Trig_RingHealth_Actions takes nothing returns nothingif(Trig_RingHealth_Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00Z'))call UnitAddItemByIdSwapped('I02L',GetTriggerUnit())
else
if(Trig_RingHealth_Func002Func002C())thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I006'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I00S'))call UnitAddItemByIdSwapped('I03P',GetTriggerUnit())
else
if(Trig_RingHealth_Func002Func002Func002C())then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I013'))call RemoveItem(GetItemOfTypeFromUnitBJ(GetTriggerUnit(),'I005'))call UnitAddItemByIdSwapped('I03S',GetTriggerUnit())
else
call UnitAddItemByIdSwapped('I00Y',GetTriggerUnit())
endifendifendifendfunctionfunction InitTrig_RingHealth takes nothing returns nothingset gg_trg_RingHealth=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RingHealth,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RingHealth,Condition(function Trig_RingHealth_Conditions))call TriggerAddAction(gg_trg_RingHealth,function Trig_RingHealth_Actions)endfunctionfunction Ultimate_Upgrade_Act takes nothing returns nothinglocal unit U=GetManipulatingUnit()local integer Typeif(Scept_AlreadyCheck(U))thenset Type=GetUnitTypeId(U)if(Type==udg_Upgrade_Type[0])thenset udg_Upgrade_Effect[0]=AddSpecialEffectTarget("Abilities\\Weapons\\FaerieDragonMissile\\FaerieDragonMissile.mdl",U,"weapon")call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',false)call UnitAddAbility(U,'A00D')elseif(Type==udg_Upgrade_Type[1])thencall SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',false)call UnitAddAbility(U,'A00D')elseif(Type==udg_Upgrade_Type[2])thencall UnitAddAbility(U,'A0AM')call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',false)call UnitAddAbility(U,'A00D')elseif(Type==udg_Upgrade_Type[3])thencall SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',false)call UnitAddAbility(U,'A00D')elseif(Type==udg_Upgrade_Type[4])thenset udg_Upgrade_Effect[4]=AddSpecialEffectTarget("Infinite.mdl",U,"origin")call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A0GE',false)call UnitAddAbility(U,'A0GE')endifset Type=0endifset U=nullendfunctionfunction InitTrig_Ultimate_Upgrade takes nothing returns nothing
set gg_trg_Ultimate_Upgrade=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Ultimate_Upgrade,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Ultimate_Upgrade,Condition(function Scept_UpgradeCheck))
call TriggerAddAction(gg_trg_Ultimate_Upgrade,function Ultimate_Upgrade_Act)
endfunctionfunction Upgrade_RemainCheck takes unit U returns booleanlocal integer i=1local boolean check=falseloop
if(GetItemTypeId(UnitItemInSlotBJ(U,i))=='I05F')then
set i=6set check=trueelseif(GetItemTypeId(UnitItemInSlotBJ(U,i))=='I05L')then
set i=6set check=trueelseif(GetItemTypeId(UnitItemInSlotBJ(U,i))=='I05P')then
set i=6set check=trueendifset i=i+1exitwhen i>6
endloopreturn check
endfunctionfunction Remove_Upgrade_Act takes nothing returns nothinglocal unit U=GetManipulatingUnit()local integer Typecall TriggerSleepAction(.01)
if(not(Upgrade_RemainCheck(U)))thenset Type=GetUnitTypeId(U)if(Type==udg_Upgrade_Type[0])thencall DestroyEffect(udg_Upgrade_Effect[0])set udg_Upgrade_Effect[0]=nullcall UnitRemoveAbility(U,'A00D')
call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',true)elseif(Type==udg_Upgrade_Type[1])thencall UnitRemoveAbility(U,'A00D')
call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',true)elseif(Type==udg_Upgrade_Type[2])thencall UnitRemoveAbility(U,'A0AM')
call UnitRemoveAbility(U,'A00D')
call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',true)elseif(Type==udg_Upgrade_Type[3])thencall UnitRemoveAbility(U,'A00D')
call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A00D',true)elseif(Type==udg_Upgrade_Type[4])thencall DestroyEffect(udg_Upgrade_Effect[4])set udg_Upgrade_Effect[4]=nullcall UnitRemoveAbility(U,'A0GE')
call SetPlayerAbilityAvailable(GetOwningPlayer(U),'A0GE',true)endifset Type=0endifset U=nullendfunctionfunction InitTrig_Remove_Upgrade takes nothing returns nothingset gg_trg_Remove_Upgrade=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Upgrade,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Remove_Upgrade,Condition(function Scept_UpgradeCheck))call TriggerAddAction(gg_trg_Remove_Upgrade,function Remove_Upgrade_Act)
endfunctionfunction MsFocCond takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunctionfunction MsFocAct takes nothing returns nothinglocal force Foc=GetForceOfPlayer(GetTriggerPlayer())
call DisplayTextToForce(Foc,(GetUnitName(GetEnumUnit())+(" movespeed is "+I2S(R2I(GetUnitMoveSpeed(GetEnumUnit()))))))call DestroyForce(Foc)set Foc=null
endfunctionfunction Trig_Ms_Show_Actions takes nothing returns nothinglocal group Gro=GetUnitsOfPlayerMatching(GetTriggerPlayer(),Condition(function MsFocCond))call ForGroupBJ(Gro,function MsFocAct)call DestroyGroup(Gro)set Gro=null
endfunctionfunction InitTrig_Ms_Show takes nothing returns nothingset gg_trg_Ms_Show=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(0),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(1),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(2),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(3),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(4),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(5),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(6),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(7),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(8),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(9),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player($A),"-ms",true)call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player($B),"-ms",true)call TriggerAddAction(gg_trg_Ms_Show,function Trig_Ms_Show_Actions)endfunctionfunction Trig_CameraNormal_Actions takes nothing returns nothing
call ResetToGameCameraForPlayer(GetTriggerPlayer(),0)endfunctionfunction InitTrig_CameraNormal takes nothing returns nothing
set gg_trg_CameraNormal=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(0),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(1),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(2),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(3),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(4),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(5),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(6),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(7),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(8),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(9),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player($A),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player($B),"-cn",true)call TriggerAddAction(gg_trg_CameraNormal,function Trig_CameraNormal_Actions)endfunctionfunction Trig_CameraHigh_Actions takes nothing returns nothingcall SetCameraFieldForPlayer(GetTriggerPlayer(),CAMERA_FIELD_TARGET_DISTANCE,2000.,.01)endfunctionfunction InitTrig_CameraHigh takes nothing returns nothingset gg_trg_CameraHigh=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(0),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(1),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(2),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(3),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(4),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(5),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(6),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(7),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(8),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(9),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player($A),"-ch",true)
call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player($B),"-ch",true)
call TriggerAddAction(gg_trg_CameraHigh,function Trig_CameraHigh_Actions)endfunctionfunction Trig_CameraLow_Actions takes nothing returns nothingcall SetCameraFieldForPlayer(GetTriggerPlayer(),CAMERA_FIELD_TARGET_DISTANCE,1200.,.01)endfunctionfunction InitTrig_CameraLow takes nothing returns nothingset gg_trg_CameraLow=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(0),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(1),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(2),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(3),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(4),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(5),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(6),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(7),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(8),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(9),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player($A),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player($B),"-cl",true)call TriggerAddAction(gg_trg_CameraLow,function Trig_CameraLow_Actions)endfunctionfunction Trig_Clear_Actions takes nothing returns nothingif(GetLocalPlayer()==GetTriggerPlayer())then
call ClearTextMessages()
endifendfunctionfunction InitTrig_Clear takes nothing returns nothingset gg_trg_Clear=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(0),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(1),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(2),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(3),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(4),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(5),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(6),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(7),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(8),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(9),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player($A),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player($B),"-clear",true)call TriggerAddAction(gg_trg_Clear,function Trig_Clear_Actions)endfunctionfunction Trig_Music_Command_Actions takes nothing returns nothinglocal string s=GetEventPlayerChatString()local integer i=GetRandomInt(0,2)local string s_rand1
local string s_rand2
local player p=GetTriggerPlayer()set s_rand1=udg_SoundPatch_List_Wc3[GetRandomInt(0,udg_SoundPatch_MaxList_Wc3)]if(i==0)then
set s_rand2=udg_SoundPatch_List_Bleach[GetRandomInt(0,udg_SoundPatch_MaxList_Bleach)]elseif(i==1)then
set s_rand2=udg_SoundPatch_List_OnePiece[GetRandomInt(0,udg_SoundPatch_MaxList_OnePiece)]else
set s_rand2=udg_SoundPatch_List_Naruto[GetRandomInt(0,udg_SoundPatch_MaxList_Naruto)]endifif(GetLocalPlayer()==p)thenif(s=="-music off")thencall StopMusic(false)elseif(s=="-music random1")thencall SoundPatch_Music(s_rand1)elseif(s=="-music random2")thencall SoundPatch_Music(s_rand2)elseif(s=="-music arthas")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[0])elseif(s=="-music doom")then
call SoundPatch_Music(udg_SoundPatch_List_Wc3[1])elseif(s=="-music heroic")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[2])elseif(s=="-music human1")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[3])elseif(s=="-music human2")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[4])elseif(s=="-music illidans")then
call SoundPatch_Music(udg_SoundPatch_List_Wc3[5])elseif(s=="-music lich")then
call SoundPatch_Music(udg_SoundPatch_List_Wc3[6])elseif(s=="-music orc1")then
call SoundPatch_Music(udg_SoundPatch_List_Wc3[7])elseif(s=="-music pursuit")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[8])elseif(s=="-music special")thencall SoundPatch_Music(udg_SoundPatch_List_Wc3[9])elseif(s=="-music bleach1")thencall SoundPatch_Music(udg_SoundPatch_List_Bleach[0])
elseif(s=="-music bleach2")thencall SoundPatch_Music(udg_SoundPatch_List_Bleach[1])
elseif(s=="-music bleach3")thencall SoundPatch_Music(udg_SoundPatch_List_Bleach[2])
elseif(s=="-music bleach4")thencall SoundPatch_Music(udg_SoundPatch_List_Bleach[3])
elseif(s=="-music onepiece1")thencall SoundPatch_Music(udg_SoundPatch_List_OnePiece[0])elseif(s=="-music onepiece2")thencall SoundPatch_Music(udg_SoundPatch_List_OnePiece[1])elseif(s=="-music onepiece3")thencall SoundPatch_Music(udg_SoundPatch_List_OnePiece[2])elseif(s=="-music onepiece4")thencall SoundPatch_Music(udg_SoundPatch_List_OnePiece[3])elseif(s=="-music naruto1")thencall SoundPatch_Music(udg_SoundPatch_List_Naruto[0])
elseif(s=="-music naruto2")thencall SoundPatch_Music(udg_SoundPatch_List_Naruto[1])
elseif(s=="-music naruto3")thencall SoundPatch_Music(udg_SoundPatch_List_Naruto[2])
elseif(s=="-music naruto4")thencall SoundPatch_Music(udg_SoundPatch_List_Naruto[3])
else
call DisplayTimedTextToPlayer(p,0,0,$A,"Typing -music ???. ??? is your music, for example -music human1")call DisplayTimedTextToPlayer(p,0,0,$A,"
-------------------- |c000cf8f1Music List|r --------------------")call DisplayTimedTextToPlayer(p,0,0,$A,"random1, arthas, doom, heroic, human1, human2, illidans, lich, orc1, pursuit, special")call DisplayTimedTextToPlayer(p,0,0,$A,"
---------------- (|c00f50e0efor sound patch only|r) ---------------")call DisplayTimedTextToPlayer(p,0,0,$A,"random2, bleach1, bleach2, bleach3, bleach4, onepiece1, onepiece2, onepiece3, onepiece4, naruto1, naruto2, naruto3, naruto4")endifendifset s=nullset s_rand1=null
set s_rand2=null
set p=nullendfunctionfunction InitTrig_Music_Command takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0loop
call TriggerRegisterPlayerChatEvent(t,Player(i),"-music",false)set i=i+1exitwhen i==$Cendloopcall TriggerAddAction(t,function Trig_Music_Command_Actions)
endfunctionfunction Trig_SoundPatch_Enable_Conditions takes nothing returns boolean
return IsPlayerInForce(GetTriggerPlayer(),udg_SoundPatch_EnableGroup)==false
endfunctionfunction Trig_SoundPatch_Enable_Actions takes nothing returns nothinglocal player p=GetTriggerPlayer()call ForceAddPlayer(udg_SoundPatch_EnableGroup,p)call DisplayTimedTextToPlayer(p,0,0,.01,"Enable Spells Sound Patch !")set p=nullendfunctionfunction InitTrig_SoundPatch_Enable takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0loop
call TriggerRegisterPlayerChatEvent(t,Player(i),"-enable sound",true)set i=i+1exitwhen i==$Cendloopcall TriggerAddCondition(t,Condition(function Trig_SoundPatch_Enable_Conditions))call TriggerAddAction(t,function Trig_SoundPatch_Enable_Actions)
endfunctionfunction Trig_SoundPatch_Disable_Conditions takes nothing returns booleanreturn IsPlayerInForce(GetTriggerPlayer(),udg_SoundPatch_EnableGroup)endfunctionfunction Trig_SoundPatch_Disable_Actions takes nothing returns nothinglocal player p=GetTriggerPlayer()call ForceRemovePlayer(udg_SoundPatch_EnableGroup,p)
call DisplayTimedTextToPlayer(p,0,0,.01,"Disable Spells Sound Patch !")set p=nullendfunctionfunction InitTrig_SoundPatch_Disable takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0loop
call TriggerRegisterPlayerChatEvent(t,Player(i),"-disable sound",true)set i=i+1exitwhen i==$Cendloopcall TriggerAddCondition(t,Condition(function Trig_SoundPatch_Disable_Conditions))call TriggerAddAction(t,function Trig_SoundPatch_Disable_Actions)endfunctionfunction Trig_End_Skill_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A007')endfunctionfunction Trig_End_Skill_Func027A takes nothing returns nothingset udg_End_Unit[3]=GetEnumUnit()call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdl",udg_End_Unit[3],"origin"))set udg_End_Loc[0]=GetUnitLoc(udg_End_Unit[3])call CreateNUnitsAtLoc(1,'h04R',udg_End_Own,udg_End_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_End_Loc[0])set udg_End_Loc[0]=nullcall KillUnit(udg_End_Unit[3])set udg_End_Unit[3]=null
endfunctionfunction Trig_End_Skill_Actions takes nothing returns nothinglocal integer Loop=0
set udg_End_Unit[0]=GetTriggerUnit()
set udg_End_Own=GetOwningPlayer(udg_End_Unit[0])
set udg_End_Loc[0]=GetUnitLoc(udg_End_Unit[0])call CreateNUnitsAtLoc(1,'h03C',udg_End_Own,udg_End_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03C',udg_End_Own,udg_End_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h009',udg_End_Own,udg_End_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h009',udg_End_Own,udg_End_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)set udg_End_Loc[1]=PolarProjectionBJ(udg_End_Loc[0],25.,(GetUnitFacing(udg_End_Unit[0])+90.))call RemoveLocation(udg_End_Loc[0])set udg_End_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h00A',udg_End_Own,udg_End_Loc[1],bj_UNIT_FACING)set udg_End_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h00A',udg_End_Own,udg_End_Loc[1],bj_UNIT_FACING)set udg_End_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_End_Loc[1])set udg_End_Loc[1]=nullcall CinematicFadeBJ(2,3.,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0,0,0,0)call Dynamic_Sound("Sounds\\Haki.mp3")set udg_End_GroupDummy=CreateGroup()
call GroupAddGroup(udg_End_Group,udg_End_GroupDummy)
call GroupClear(udg_End_Group)call ForGroupBJ(udg_End_GroupDummy,function Trig_End_Skill_Func027A)
call DestroyGroup(udg_End_GroupDummy)set udg_End_GroupDummy=nullloop
if(udg_Player_UnitHero[Loop]!=null)thencall CameraShake(udg_CameraShakeTime,17,udg_Player_UnitHero[Loop])endifset Loop=Loop+1exitwhen Loop>$B
endloopset udg_End_Unit[0]=null
set udg_End_Own=null
call TriggerSleepAction(2.5)
call SetUnitAnimation(udg_End_Unit[1],"death")call SetUnitAnimation(udg_End_Unit[2],"death")call UnitApplyTimedLifeBJ(1.,'BTLF',udg_End_Unit[1])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_End_Unit[2])
set udg_End_Unit[1]=null
set udg_End_Unit[2]=null
endfunctionfunction InitTrig_End_Skill takes nothing returns nothingset gg_trg_End_Skill=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_End_Skill,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_End_Skill,Condition(function Trig_End_Skill_Conditions))
call TriggerAddAction(gg_trg_End_Skill,function Trig_End_Skill_Actions)endfunctionfunction Trig_End_Dialog_Actions takes nothing returns nothingcall CustomVictoryBJ(GetTriggerPlayer(),false,true)endfunctionfunction InitTrig_End_Dialog takes nothing returns nothingset gg_trg_End_Dialog=CreateTrigger()call TriggerRegisterDialogEvent(gg_trg_End_Dialog,udg_End_DialogWin)
call TriggerRegisterDialogEvent(gg_trg_End_Dialog,udg_End_DialogLose)call TriggerAddAction(gg_trg_End_Dialog,function Trig_End_Dialog_Actions)endfunctionfunction Trig_StopShake1 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(0))endfunctionfunction Trig_StopShake2 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(1))endfunctionfunction Trig_StopShake3 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(2))endfunctionfunction Trig_StopShake4 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(3))endfunctionfunction Trig_StopShake5 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(4))endfunctionfunction Trig_StopShake6 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(5))endfunctionfunction Trig_StopShake7 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(6))endfunctionfunction Trig_StopShake8 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(7))endfunctionfunction Trig_StopShake9 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(8))endfunctionfunction Trig_StopShake10 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player(9))endfunctionfunction Trig_StopShake11 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player($A))endfunctionfunction Trig_StopShake12 takes nothing returns nothingcall CameraClearNoiseForPlayer(Player($B))endfunctionfunction InitTrig_Stop_Shake takes nothing returns nothinglocal trigger array StopShakeset StopShake[0]=CreateTrigger()
set StopShake[1]=CreateTrigger()
set StopShake[2]=CreateTrigger()
set StopShake[3]=CreateTrigger()
set StopShake[4]=CreateTrigger()
set StopShake[5]=CreateTrigger()
set StopShake[6]=CreateTrigger()
set StopShake[7]=CreateTrigger()
set StopShake[8]=CreateTrigger()
set StopShake[9]=CreateTrigger()
set StopShake[$A]=CreateTrigger()set StopShake[$B]=CreateTrigger()call TriggerRegisterTimerExpireEvent(StopShake[0],udg_ShakeTimer1)call TriggerRegisterTimerExpireEvent(StopShake[1],udg_ShakeTimer2)call TriggerRegisterTimerExpireEvent(StopShake[2],udg_ShakeTimer3)call TriggerRegisterTimerExpireEvent(StopShake[3],udg_ShakeTimer4)call TriggerRegisterTimerExpireEvent(StopShake[4],udg_ShakeTimer5)call TriggerRegisterTimerExpireEvent(StopShake[5],udg_ShakeTimer6)call TriggerRegisterTimerExpireEvent(StopShake[6],udg_ShakeTimer7)call TriggerRegisterTimerExpireEvent(StopShake[7],udg_ShakeTimer8)call TriggerRegisterTimerExpireEvent(StopShake[8],udg_ShakeTimer9)call TriggerRegisterTimerExpireEvent(StopShake[9],udg_ShakeTimer10)call TriggerRegisterTimerExpireEvent(StopShake[$A],udg_ShakeTimer11)
call TriggerRegisterTimerExpireEvent(StopShake[$B],udg_ShakeTimer12)
call TriggerAddAction(StopShake[0],function Trig_StopShake1)
call TriggerAddAction(StopShake[1],function Trig_StopShake2)
call TriggerAddAction(StopShake[2],function Trig_StopShake3)
call TriggerAddAction(StopShake[3],function Trig_StopShake4)
call TriggerAddAction(StopShake[4],function Trig_StopShake5)
call TriggerAddAction(StopShake[5],function Trig_StopShake6)
call TriggerAddAction(StopShake[6],function Trig_StopShake7)
call TriggerAddAction(StopShake[7],function Trig_StopShake8)
call TriggerAddAction(StopShake[8],function Trig_StopShake9)
call TriggerAddAction(StopShake[9],function Trig_StopShake10)call TriggerAddAction(StopShake[$A],function Trig_StopShake11)call TriggerAddAction(StopShake[$B],function Trig_StopShake12)endfunctionfunction Return_DeathAct takes nothing returns nothinglocal unit U=GetDyingUnit()local integer Slot=((1+GetPlayerId(GetOwningPlayer(U)))-1)set udg_Bug_ReturnAlive[Slot]=falsecall UnitRemoveAbility(U,'A08X')
call PauseSystem(U,false)set U=nullset Slot=0endfunctionfunction Trig_Return_Actions takes nothing returns nothinglocal location Loclocal rect R
local trigger Tlocal triggeraction trgActlocal integer Slot=((1+GetPlayerId(GetTriggerPlayer()))-1)local unit U=udg_Player_UnitHero[Slot]local force F=GetForceOfPlayer(Player(Slot))
if((udg_Duel_On)or(U==null)or(udg_Bug_Return[Slot])or(IsUnitAliveBJ(U)==false))thencall DisplayTimedTextToForce(F,5.,"You can't use this command yet.")
call DestroyForce(F)
set F=nullset U=nullset Slot=0else
set udg_Bug_Return[Slot]=trueset udg_Bug_ReturnAlive[Slot]=truecall DisplayTimedTextToForce(F,10.,"|cffff0000WARNING|r: Your hero will be paused for 15 seconds when triggering this command.")
call DestroyForce(F)
set F=nullcall UnitAddAbility(U,'A08X')call PauseUnit(U,true)set T=CreateTrigger()call TriggerRegisterUnitEvent(T,U,EVENT_UNIT_DEATH)set trgAct=TriggerAddAction(T,function Return_DeathAct)call TriggerSleepAction(15.)
set udg_Bug_Return[Slot]=falseif(udg_Bug_ReturnAlive[Slot])thenset udg_Bug_ReturnAlive[Slot]=falsecall UnitRemoveAbility(U,'A08X')
call UnitRemoveAbility(U,'Avul')
call PauseSystem(U,false)if(udg_Duel_On==false)thencall UnitRemoveBuffsBJ(1,U)set Loc=GetUnitLoc(U)call CreateNUnitsAtLoc(1,'h004',Player(Slot),Loc,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(Loc)
set Loc=null
if(Slot<6)thenset R=Rect(-6272,-768,-5568,-$A0)else
set R=Rect(5472,-800,6176,-$C0)endifset Loc=GetRandomLocInRect(R)call RemoveRect(R)set R=nullcall SetUnitPositionLocFacingBJ(U,Loc,270.)call CreateNUnitsAtLoc(1,'h004',Player(Slot),Loc,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call PanCameraToTimedLocForPlayer(Player(Slot),Loc,0)call RemoveLocation(Loc)
set Loc=null
endifendifcall TriggerRemoveAction(T,trgAct)call DestroyTrigger(T)set trgAct=nullset T=nullset U=nullset Slot=0endifendfunctionfunction InitTrig_Return takes nothing returns nothinglocal trigger Bug_Return_Trig=CreateTrigger()local integer i=0loop
call TriggerRegisterPlayerChatEvent(Bug_Return_Trig,Player(i),"-return",true)set i=i+1exitwhen i>$Bendloopcall TriggerAddAction(Bug_Return_Trig,function Trig_Return_Actions)endfunctionfunction Skill_Point_Add takes integer lv returns booleanif(lv==7)thenreturn trueelseif(lv==$B)thenreturn trueelseif(lv==16)thenreturn trueendifreturn false
endfunctionfunction Skill_Point_Remove takes integer lv returns boolean
if(lv==2)thenreturn trueelseif(lv==5)thenreturn trueelseif(lv==8)thenreturn trueelseif(lv==9)thenreturn trueelseif(lv==$E)thenreturn trueelseif(lv==18)thenreturn trueelseif(lv==23)thenreturn trueelseif(lv==24)thenreturn trueelseif(lv==28)thenreturn trueelseif(lv==29)thenreturn trueelseif(lv==31)thenreturn trueelseif(lv==33)thenreturn trueelseif(lv==34)thenreturn trueelseif(lv==36)thenreturn trueelseif(lv==37)thenreturn trueelseif(lv==38)thenreturn trueelseif(lv==39)thenreturn trueendifreturn false
endfunctionfunction Trig_Skill_Point_Manage_Actions takes nothing returns nothinglocal unit u=GetLevelingUnit()local integer lv=GetHeroLevel(u)
if(Skill_Point_Add(lv))thencall ModifyHeroSkillPoints(u,0,1)elseif(Skill_Point_Remove(lv))thencall ModifyHeroSkillPoints(u,1,1)endifset u=nullset lv=0
endfunctionfunction InitTrig_Skill_Point_Manage takes nothing returns nothingset gg_trg_Skill_Point_Manage=CreateTrigger()call TriggerAddAction(gg_trg_Skill_Point_Manage,function Trig_Skill_Point_Manage_Actions)endfunctionfunction Trig_Destroy_Function_Actions takes nothing returns nothing
local integer ilocal integer jlocal boolean array AI_Openset i=0loop
set AI_Open[i]=false
set i=i+1exitwhen i>udg_Player_MaxHeroesendloopset i=0call TriggerSleepAction(.1)loop
if(GetPlayerController(Player(i))==MAP_CONTROL_COMPUTER and udg_Player_UnitHero[i]!=null)thenset j=0loop
if(GetUnitTypeId(udg_Player_UnitHero[i])==udg_Player_DummyType[j])thenset AI_Open[j]=trueset j=udg_Player_MaxHeroesendifset j=j+1exitwhen j>udg_Player_MaxHeroesendloopcall TriggerSleepAction(.01)
endifset i=i+1exitwhen i>$Bendloopcall TriggerSleepAction(.1)set i=0loop
if(AI_Open[i])thenset AI_Open[i]=false
set j=0loop
call TriggerRegisterPlayerUnitEvent(udg_AI_Trig[i],Player(j),EVENT_PLAYER_UNIT_ATTACKED,null)set j=j+1exitwhen(j==16)endloopendifset i=i+1exitwhen i>udg_Player_MaxHeroesendloopcall TriggerSleepAction(.01)
call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Destroy_AI takes nothing returns nothingset gg_trg_Destroy_AI=CreateTrigger()call TriggerAddAction(gg_trg_Destroy_AI,function Trig_Destroy_Function_Actions)endfunctionfunction Trig_Blink1_Conditions takes nothing returns booleanlocal integer skill=GetSpellAbilityId()if(skill=='A04E')thenreturn trueelseif(skill=='A04H')thenreturn trueelseif(skill=='A08W')thenreturn trueelseif(skill=='A0C6')thenreturn trueendifreturn false
endfunctionfunction Trig_Blink1 takes nothing returns nothinglocal unit Units=GetTriggerUnit()local integer skill=GetSpellAbilityId()local unit array LastUlocal location Locs=GetUnitLoc(Units)if((skill=='A04E')or(skill=='A08W'))then
call DisplayText("Shunpo",Units,.023,true,$FF,$FF,$FF,$FF)elseif(skill=='A04H')thencall DisplayText("Soru",Units,.023,true,$FF,$FF,$FF,$FF)
else
call DisplayText("Sonido",Units,.023,true,$FF,$FF,$FF,$FF)endifcall CreateNUnitsAtLoc(1,'h01S',GetOwningPlayer(Units),Locs,GetUnitFacing(Units))set LastU[0]=bj_lastCreatedUnitcall RemoveLocation(Locs)set Locs=nullcall TriggerSleepAction(.01)
set Locs=GetUnitLoc(LastU[0])call UnitApplyTimedLife(LastU[0],'BTLF',1.9)
call CreateNUnitsAtLoc(1,GetUnitTypeId(Units),GetOwningPlayer(Units),Locs,GetUnitFacing(Units))set LastU[1]=bj_lastCreatedUnitcall RemoveLocation(Locs)set Locs=nullcall RemoveItem(UnitItemInSlot(LastU[1],0))call RemoveItem(UnitItemInSlot(LastU[1],1))call RemoveItem(UnitItemInSlot(LastU[1],2))call RemoveItem(UnitItemInSlot(LastU[1],3))call RemoveItem(UnitItemInSlot(LastU[1],4))call RemoveItem(UnitItemInSlot(LastU[1],5))call SetUnitPathing(LastU[1],false)call UnitAddAbility(LastU[1],udg_GlobalSkill[6])
call SetUnitInvulnerable(LastU[1],true)call SetUnitVertexColor(LastU[1],$FF,$FF,$FF,$B2)call SetUnitAnimation(LastU[1],"stand")call SetUnitTimeScale(LastU[1],10.)call SetUnitOwner(LastU[1],Player($F),true)call UnitApplyTimedLife(LastU[1],'BTLF',.06)
set Units=nullset LastU[0]=nullset LastU[1]=nullendfunctionfunction InitTrig_Blink1 takes nothing returns nothingset gg_trg_Blink1=CreateTrigger()call TriggerAddCondition(gg_trg_Blink1,Condition(function Trig_Blink1_Conditions))call TriggerAddAction(gg_trg_Blink1,function Trig_Blink1)endfunctionfunction Blink_Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A04V')endfunctionfunction Blink_Act takes nothing returns nothing
call DisplayText("Hiraishin no Jutsu",GetTriggerUnit(),.023,true,$FF,$FF,$FF,$FF)endfunctionfunction InitTrig_Blink2 takes nothing returns nothingset gg_trg_Blink2=CreateTrigger()call TriggerAddCondition(gg_trg_Blink2,Condition(function Blink_Cond))call TriggerAddAction(gg_trg_Blink2,function Blink_Act)endfunctionfunction Trig_Cero_Conditions takes nothing returns booleanlocal integer skid=GetSpellAbilityId()if(skid=='A0DN')then
return trueelseif(skid=='A0EI')then
return trueelseif(skid=='A0EJ')then
return trueelseif(skid=='A0FB')then
return trueelseif(skid=='A0FK')then
return trueendifreturn false
endfunctionfunction Trig_Cero_Actions takes nothing returns nothing
local integer skid=GetSpellAbilityId()local unit u=GetTriggerUnit()local unit pickedlocal real array xylocal real r
local real facinglocal real dmglocal real arealocal player plocal integer ilocal integer impale_idlocal integer array colorlocal attacktype atk_typelocal damagetype dmg_typelocal string sknamelocal group g1local group g2set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(u)set xy[3]=GetUnitY(u)set facing=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])set p=GetOwningPlayer(u)
if(skid=='A0DN')then
set impale_id='h0B0'
set skname="Cero"set color[0]=$Aset color[1]=50set color[2]=$FF
set dmg=(175.+(I2R(GetUnitAbilityLevel(u,'A0DN'))*65.))+(I2R(GetHeroAgi(u,true))*2.)
set atk_type=ATTACK_TYPE_NORMALset dmg_type=DAMAGE_TYPE_MAGICelseif(skid=='A0EI')then
set impale_id='h0C7'
set skname="Cero"set color[0]=0set color[1]=$96
set color[2]=$Aset dmg=(250.+((2.+I2R(GetUnitAbilityLevel(u,'A0EI')))*I2R(GetHeroAgi(u,true))))
set atk_type=ATTACK_TYPE_HEROset dmg_type=DAMAGE_TYPE_NORMALelseif(skid=='A0EJ')then
set impale_id='h0C7'
set skname="Cero Oscuras"set color[0]=0set color[1]=$96
set color[2]=$Aset dmg=(350.+((3.+I2R(GetUnitAbilityLevel(u,'A0EJ')))*I2R(GetHeroAgi(u,true))))
set atk_type=ATTACK_TYPE_HEROset dmg_type=DAMAGE_TYPE_NORMALcall SoundPatch_Spell(udg_soundPatch_Bleach+"\\Ulquiorra\\CeroOscuras.wav",xy[2],xy[3])set i=1loop
set r=(I2R(i)*300.)set xy[4]=PolarX(xy[2],r,facing)
set xy[5]=PolarY(xy[3],r,facing)
set bj_lastCreatedUnit=CreateUnit(p,'h0C8',xy[4],xy[5],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set i=i+1exitwhen i>4
endloopelseif(skid=='A0FB')then
set impale_id='h0CU'
set skname="Cero"set color[0]='d'
set color[1]=5set color[2]=$Aset dmg=(250.+((2.+I2R(GetUnitAbilityLevel(u,'A0FB')))*I2R(GetHeroAgi(u,true))))
set atk_type=ATTACK_TYPE_HEROset dmg_type=DAMAGE_TYPE_NORMALelseif(skid=='A0FK')then
set impale_id='u003'
set skname="Gran Rey Cero"set color[0]=$Aset color[1]=30set color[2]=$96
set dmg=(300.+((3.+I2R(GetUnitAbilityLevel(u,'A0FK')))*I2R(GetHeroAgi(u,true))))
set atk_type=ATTACK_TYPE_HEROset dmg_type=DAMAGE_TYPE_NORMALcall SoundPatch_Spell(udg_soundPatch_Bleach+"\\Grimmjow\\GranReyCero.wav",xy[2],xy[3])set r=-220.set xy[4]=PolarX(xy[2],r,facing)
set xy[5]=PolarY(xy[3],r,facing)
set bj_lastCreatedUnit=CreateUnit(p,'h0CX',xy[4],xy[5],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h0CX',xy[4],xy[5],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)endifset xy[4]=PolarX(xy[2],110.,facing)set xy[5]=PolarY(xy[3],110.,facing)set xy[6]=PolarX(xy[2],65.,facing)set xy[7]=PolarY(xy[3],65.,facing)set bj_lastCreatedUnit=CreateUnit(p,'h0AZ',xy[2],xy[3],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)if(skid!='A0FK')then
set bj_lastCreatedUnit=CreateUnit(p,'h0B1',xy[2],xy[3],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)endifset bj_lastCreatedUnit=CreateUnit(p,'h0B2',xy[4],xy[5],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,impale_id,xy[6],xy[7],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.8)set i=0loop
set bj_lastCreatedUnit=CreateUnit(p,'h0B3',xy[2],xy[3],facing)call SetUnitVertexColor(bj_lastCreatedUnit,color[0],color[1],color[2],$FF)call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.1)set i=i+1exitwhen i>2
endloopset area=250.set g2=CreateGroup()
set i=1loop
set r=(I2R(i)*200.)set xy[4]=PolarX(xy[2],r,facing)
set xy[5]=PolarY(xy[3],r,facing)
call DestroyTreeXY(xy[4],xy[5],area)
set g1=CreateGroupXY2(xy[4],xy[5],area,p,g2)
loop
set picked=FirstOfGroup(g1)exitwhen picked==nullcall GroupRemoveUnit(g1,picked)call GroupAddUnit(g2,picked)
call UnitDamageTarget(u,picked,dmg,true,false,atk_type,dmg_type,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g1)set g1=nullset i=i+1exitwhen i>6
endloopcall DestroyGroup(g2)set g2=nullcall DisplayText(skname,u,.023,true,$FF,$FF,$FF,$FF)
set u=nullset p=nullset atk_type=nullset dmg_type=nullset skname=nullendfunctionfunction InitTrig_Cero takes nothing returns nothing
set gg_trg_Cero=CreateTrigger()call TriggerAddCondition(gg_trg_Cero,Condition(function Trig_Cero_Conditions))call TriggerAddAction(gg_trg_Cero,function Trig_Cero_Actions)endfunctionfunction AIIchigo__isAtked takes nothing returns boolean
return((GetUnitTypeId(GetTriggerUnit())==AIIchigo__AIType1 or GetUnitTypeId(GetTriggerUnit())==AIIchigo__AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIIchigo__isAtker takes nothing returns boolean
return((GetUnitTypeId(GetAttacker())==AIIchigo__AIType1 or GetUnitTypeId(GetAttacker())==AIIchigo__AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIIchigo__Cond takes nothing returns booleanif(not(AIIchigo__isAtked()or AIIchigo__isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIIchigo__Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIIchigo__AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AIIchigo__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A04C')call SelectHeroSkill(mySelf,'A04A')call SelectHeroSkill(mySelf,'A048')call SelectHeroSkill(mySelf,'A046')call SelectHeroSkill(mySelf,'A045')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifif(isHeroTarget)then
call IssueTargetOrderById(mySelf,$D0065,myTarget)call IssueTargetOrderById(mySelf,$D007F,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)endifendifcall IssueTargetOrderById(mySelf,$D00FA,myTarget)endifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIIchigo__AINo])endfunctionfunction AIIchigo__Init takes nothing returns nothingset udg_AI_Trig[AIIchigo__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIIchigo__AINo],Condition(function AIIchigo__Cond))
call TriggerAddAction(udg_AI_Trig[AIIchigo__AINo],function AIIchigo__Act)endfunctionfunction GetsugaTenshou__ActL takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local integer i=LoadInteger(Ichigo_Hash,tId,1)local unit array ulocal unit pickedlocal player plocal group glocal real facinglocal real dmglocal real x
local real y
set u[0]=LoadUnitHandle(Ichigo_Hash,tId,2)set u[1]=LoadUnitHandle(Ichigo_Hash,tId,3)set u[2]=LoadUnitHandle(Ichigo_Hash,tId,4)set p=LoadPlayerHandle(Ichigo_Hash,tId,5)set facing=LoadReal(Ichigo_Hash,tId,6)set dmg=LoadReal(Ichigo_Hash,tId,7)if(i>0)thencall SaveInteger(Ichigo_Hash,tId,1,(i-1))set x=PolarX(GetUnitX(u[1]),GetsugaTenshou__speed,facing)set y=PolarY(GetUnitY(u[1]),GetsugaTenshou__speed,facing)call SetUnitX(u[1],x)call SetUnitY(u[1],y)call SetUnitX(u[2],x)call SetUnitY(u[2],y)call DestroyTreeXY(x,y,GetsugaTenshou__garea)set g=CreateGroupXY(x,y,GetsugaTenshou__garea,p)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(LoadBoolean(Ichigo_Hash,tId,GetHandleId(picked))!=true)thencall SaveBoolean(Ichigo_Hash,tId,GetHandleId(picked),true)call UnitDamageTarget(u[0],picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(t)call DestroyTimer(t)
call FlushChildHashtable(Ichigo_Hash,tId)call UnitApplyTimedLife(u[1],'BTLF',1.)call SetUnitAnimation(u[1],"death")call RemoveUnit(u[2])endifset t=nullset u[0]=nullset u[1]=nullset u[2]=nullset p=nullendfunctionfunction GetsugaTenshou__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==GetsugaTenshou__skId)endfunctionfunction GetsugaTenshou__Act takes nothing returns nothinglocal unit selflocal player plocal real array xlocal real array ylocal real facinglocal real dmglocal real r
local integer ilocal integer jlocal timer tset self=GetTriggerUnit()set x[0]=GetUnitX(self)set y[0]=GetUnitY(self)set facing=AngleBetweenXY(x[0],y[0],GetSpellTargetX(),GetSpellTargetY())
set r=120.set x[1]=PolarX(x[0],r,facing)set y[1]=PolarY(y[0],r,facing)set r=100.set x[2]=PolarX(x[1],r,facing)set y[2]=PolarY(y[1],r,facing)set p=GetOwningPlayer(self)if(GetUnitAbilityLevel(self,'Agho')>0)thenset dmg=(175.+(GetUnitAbilityLevel(self,GetsugaTenshou__skId)*125.))
elseif(GetUnitAbilityLevel(self,'Apiv')>0)thenset dmg=(250.+(GetUnitAbilityLevel(self,GetsugaTenshou__skId)*50.))else
set dmg=(110.+(GetUnitAbilityLevel(self,GetsugaTenshou__skId)*115.))
endifset t=CreateTimer()set i=GetHandleId(t)
call SaveInteger(Ichigo_Hash,i,1,R2I(800./ GetsugaTenshou__speed))set j=GetHandleId(self)call SaveUnitHandle(Ichigo_Hash,i,2,LoadUnitHandle(Ichigo_Hash,j,0))
call FlushChildHashtable(Ichigo_Hash,j)call SaveUnitHandle(Ichigo_Hash,i,3,(CreateUnit(p,'h015',x[1],y[1],facing)))
call SaveUnitHandle(Ichigo_Hash,i,4,(CreateUnit(p,'h016',x[1],y[1],facing)))
call SavePlayerHandle(Ichigo_Hash,i,5,p)
call SaveReal(Ichigo_Hash,i,6,facing)call SaveReal(Ichigo_Hash,i,7,dmg)call TimerStart(t,.04,true,function GetsugaTenshou__ActL)set self=nullset p=nullset t=nullendfunctionfunction GetsugaTenshou__Init takes nothing returns nothingset gg_trg_Getsuga_Tenshou=CreateTrigger()call TriggerAddCondition(gg_trg_Getsuga_Tenshou,Condition(function GetsugaTenshou__Cond))call TriggerAddAction(gg_trg_Getsuga_Tenshou,function GetsugaTenshou__Act)endfunctionfunction WhiteGetsugaTenshou__ActL takes nothing returns nothing
local timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local integer i=LoadInteger(Ichigo_Hash,tId,1)local unit array ulocal unit pickedlocal player plocal group glocal real facinglocal real dmglocal real x
local real y
set u[0]=LoadUnitHandle(Ichigo_Hash,tId,2)set u[1]=LoadUnitHandle(Ichigo_Hash,tId,3)set p=LoadPlayerHandle(Ichigo_Hash,tId,5)set facing=LoadReal(Ichigo_Hash,tId,6)set dmg=LoadReal(Ichigo_Hash,tId,7)if(i>0)thencall SaveInteger(Ichigo_Hash,tId,1,(i-1))set x=PolarX(GetUnitX(u[1]),WhiteGetsugaTenshou__speed,facing)set y=PolarY(GetUnitY(u[1]),WhiteGetsugaTenshou__speed,facing)call SetUnitX(u[1],x)call SetUnitY(u[1],y)set x=PolarX(x,WhiteGetsugaTenshou__polar,facing)set y=PolarY(y,WhiteGetsugaTenshou__polar,facing)call DestroyTreeXY(x,y,WhiteGetsugaTenshou__garea)set g=CreateGroupXY(x,y,WhiteGetsugaTenshou__garea,p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(LoadBoolean(Ichigo_Hash,tId,GetHandleId(picked))!=true)thencall SaveBoolean(Ichigo_Hash,tId,GetHandleId(picked),true)call UnitDamageTarget(u[0],picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(t)call DestroyTimer(t)
call FlushChildHashtable(Ichigo_Hash,tId)call UnitApplyTimedLife(u[1],'BTLF',1.)call SetUnitAnimation(u[1],"death")endifset t=nullset u[0]=nullset u[1]=nullset p=nullendfunctionfunction WhiteGetsugaTenshou__Cond takes nothing returns boolean
return(GetSpellAbilityId()==WhiteGetsugaTenshou__skId)endfunctionfunction WhiteGetsugaTenshou__Act takes nothing returns nothinglocal unit selflocal player plocal real array xlocal real array ylocal real facinglocal real dmglocal real r
local integer ilocal integer jlocal timer tset self=GetTriggerUnit()set x[0]=GetUnitX(self)set y[0]=GetUnitY(self)set facing=AngleBetweenXY(x[0],y[0],GetSpellTargetX(),GetSpellTargetY())
set r=120.set x[1]=PolarX(x[0],r,facing)set y[1]=PolarY(y[0],r,facing)set p=GetOwningPlayer(self)if(GetUnitAbilityLevel(self,'Agho')>0)thenset dmg=(175.+(GetUnitAbilityLevel(self,WhiteGetsugaTenshou__skId)*125.))elseif(GetUnitAbilityLevel(self,'Apiv')>0)thenset dmg=(250.+(GetUnitAbilityLevel(self,WhiteGetsugaTenshou__skId)*50.))
else
set dmg=(110.+(GetUnitAbilityLevel(self,WhiteGetsugaTenshou__skId)*115.))endifset t=CreateTimer()set i=GetHandleId(t)
call SaveInteger(Ichigo_Hash,i,1,R2I(900./ WhiteGetsugaTenshou__speed))set j=GetHandleId(self)call SaveUnitHandle(Ichigo_Hash,i,2,LoadUnitHandle(Ichigo_Hash,j,0))
call FlushChildHashtable(Ichigo_Hash,j)call SaveUnitHandle(Ichigo_Hash,i,3,(CreateUnit(p,'h01E',x[1],y[1],facing)))
call SavePlayerHandle(Ichigo_Hash,i,5,p)
call SaveReal(Ichigo_Hash,i,6,facing)call SaveReal(Ichigo_Hash,i,7,dmg)call TimerStart(t,.04,true,function WhiteGetsugaTenshou__ActL)set self=nullset p=nullset t=nullendfunctionfunction WhiteGetsugaTenshou__Init takes nothing returns nothing
set gg_trg_White_Getsuga_Tenshou=CreateTrigger()
call TriggerAddCondition(gg_trg_White_Getsuga_Tenshou,Condition(function WhiteGetsugaTenshou__Cond))
call TriggerAddAction(gg_trg_White_Getsuga_Tenshou,function WhiteGetsugaTenshou__Act)endfunctionfunction IchigoGetsuga__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==IchigoGetsuga__skId)
endfunctionfunction IchigoGetsuga__Act takes nothing returns nothinglocal unit array ulocal player plocal real facinglocal real array xlocal real array ylocal integer hollowSkLv
set u[0]=GetTriggerUnit()set x[0]=GetSpellTargetX()set y[0]=GetSpellTargetY()set x[1]=GetUnitX(u[0])set y[1]=GetUnitY(u[0])set facing=AngleBetweenXY(x[1],y[1],x[0],y[0])set p=GetOwningPlayer(u[0])call DisplayText("Getsuga Tenshou",u[0],.023,true,$FF,$FF,$FF,$FF)set u[1]=CreateUnit(p,'u003',x[1],y[1],facing)if(GetUnitTypeId(u[0])=='H018')thenset bj_lastCreatedUnit=CreateUnit(p,'h01C',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitAddAbility(u[1],'Agho')
endifcall SaveUnitHandle(Ichigo_Hash,GetHandleId(u[1]),0,u[0])call UnitAddAbility(u[1],IchigoGetsuga__dummySkId1)call SetUnitAbilityLevel(u[1],IchigoGetsuga__dummySkId1,GetUnitAbilityLevel(u[0],IchigoGetsuga__skId))call IssuePointOrderById(u[1],$D009D,x[0],y[0])call UnitApplyTimedLife(u[1],'BTLF',1.)set hollowSkLv=GetUnitAbilityLevel(u[0],'A046')if(hollowSkLv>0 and($A+(hollowSkLv*$A))>GetRandomInt(1,'d'))then
call TriggerSleepAction(.2)set u[1]=CreateUnit(p,'u003',x[1],y[1],facing)call SaveUnitHandle(Ichigo_Hash,GetHandleId(u[1]),0,u[0])call UnitAddAbility(u[1],IchigoGetsuga__dummySkId2)call SetUnitAbilityLevel(u[1],IchigoGetsuga__dummySkId2,GetUnitAbilityLevel(u[0],IchigoGetsuga__skId))call IssuePointOrderById(u[1],$D009D,x[0],y[0])call UnitApplyTimedLife(u[1],'BTLF',1.)endifset u[0]=nullset u[1]=nullset p=nullendfunctionfunction IchigoGetsuga__Init takes nothing returns nothingset gg_trg_Ichigo_Getsuga=CreateTrigger()call TriggerAddCondition(gg_trg_Ichigo_Getsuga,Condition(function IchigoGetsuga__Cond))call TriggerAddAction(gg_trg_Ichigo_Getsuga,function IchigoGetsuga__Act)
endfunctionfunction HollowPower__Cond takes nothing returns boolean
return(GetLearnedSkill()==HollowPower__skId)
endfunctionfunction HollowPower__Act takes nothing returns nothinglocal unit u=GetLearningUnit()local integer i=GetUnitAbilityLevel(u,HollowPower__skId)+1call SetUnitAbilityLevel(u,HollowPower__dmgSkId,i)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdx",u,"chest"))if(i>5)thencall DestroyTrigger(gg_trg_Hollow_Power)
set gg_trg_Hollow_Power=null
endifset u=nullendfunctionfunction HollowPower__Init takes nothing returns nothing
set gg_trg_Hollow_Power=CreateTrigger()call TriggerAddCondition(gg_trg_Hollow_Power,Condition(function HollowPower__Cond))call TriggerAddAction(gg_trg_Hollow_Power,function HollowPower__Act)
endfunctionfunction Trig_Fgt_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A048')endfunctionfunction Trig_Fgt_Init_Actions takes nothing returns nothing
call TriggerRegisterUnitEvent(gg_trg_FgtDeath,GetLearningUnit(),EVENT_UNIT_DEATH)call DestroyTrigger(gg_trg_Fgt_Init)
endfunctionfunction InitTrig_Fgt_Init takes nothing returns nothing
set gg_trg_Fgt_Init=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fgt_Init,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(gg_trg_Fgt_Init,Condition(function Trig_Fgt_Init_Conditions))call TriggerAddAction(gg_trg_Fgt_Init,function Trig_Fgt_Init_Actions)endfunctionfunction Trig_Fgt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A048')endfunctionfunction Trig_Fgt_Actions takes nothing returns nothinglocal player plocal real x
local real y
set udg_Fgt_Unit=GetTriggerUnit()if(GetUnitTypeId(udg_Fgt_Unit)!='H018')thenset udg_Fgt_Bool=trueset udg_Fgt_Real=(.9-(.1*I2R(GetUnitAbilityLevel(udg_Fgt_Unit,'A048'))))
call EnableTrigger(gg_trg_FgtAtk)call EnableTrigger(gg_trg_FgtDeath)set p=GetOwningPlayer(udg_Fgt_Unit)call DisplayText("Saigo no Getsuga Tensho",udg_Fgt_Unit,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(udg_Fgt_Unit)
set y=GetUnitY(udg_Fgt_Unit)
set bj_lastCreatedUnit=CreateUnit(p,'h019',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h019',x,y,GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h019',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h019',x,y,GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01B',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call TransfromAction(udg_Fgt_Unit,x,y)set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Fgt_Unit)
else
set udg_Fgt_Bool=falseif(IsTriggerEnabled(gg_trg_FgtAtk))thencall DisableTrigger(gg_trg_FgtAtk)endifcall DisableTrigger(gg_trg_FgtDeath)
set udg_Fgt_Real=.0call TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Fgt_Unit)
set udg_Fgt_Unit=nullendifendfunctionfunction InitTrig_Fgt takes nothing returns nothingset gg_trg_Fgt=CreateTrigger()call TriggerAddCondition(gg_trg_Fgt,Condition(function Trig_Fgt_Conditions))
call TriggerAddAction(gg_trg_Fgt,function Trig_Fgt_Actions)endfunctionfunction Trig_FgtAtk_Conditions takes nothing returns booleanreturn(GetAttacker()==udg_Fgt_Unit)endfunctionfunction Trig_FgtAtk_Actions takes nothing returns nothinglocal unit atker=GetAttacker()local unit atked=GetTriggerUnit()local real array rlocal real array xyset r[0]=100.set r[1]=GetRandomReal(0,360)set xy[0]=GetUnitX(atked)set xy[1]=GetUnitY(atked)set xy[2]=GetUnitX(atker)set xy[3]=GetUnitY(atker)set xy[4]=PolarX(xy[0],r[0],r[1])set xy[5]=PolarY(xy[1],r[0],r[1])call DisableTrigger(gg_trg_FgtAtk)if(IsTerrainPathable(xy[4],xy[5],PATHING_TYPE_WALKABILITY)==false)thencall DestroyTreeXY(xy[4],xy[5],150.)
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(atker),'h03G',xy[4],xy[5],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitX(atker,xy[4])call SetUnitY(atker,xy[5])call SetUnitFacing(atker,AngleBetweenXY(xy[4],xy[5],xy[0],xy[1]))else
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(atker),'h03G',xy[2],xy[3],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset atked=nullset atker=nullcall TriggerSleepAction(udg_Fgt_Real)if(udg_Fgt_Bool)then
call EnableTrigger(gg_trg_FgtAtk)endifendfunctionfunction InitTrig_FgtAtk takes nothing returns nothingset gg_trg_FgtAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_FgtAtk,EVENT_PLAYER_UNIT_ATTACKED)
call DisableTrigger(gg_trg_FgtAtk)call TriggerAddCondition(gg_trg_FgtAtk,Condition(function Trig_FgtAtk_Conditions))call TriggerAddAction(gg_trg_FgtAtk,function Trig_FgtAtk_Actions)endfunctionfunction Trig_FgtDeath_Conditions takes nothing returns booleanreturn(GetDyingUnit()==udg_Fgt_Unit)and(GetUnitAbilityLevelSwapped('Avul',GetDyingUnit())==0)endfunctionfunction Trig_FgtDeath_Func002C takes nothing returns booleanreturn(IsTriggerEnabled(gg_trg_FgtAtk))endfunctionfunction Trig_FgtDeath_Actions takes nothing returns nothing
set udg_Fgt_Bool=falseif(Trig_FgtDeath_Func002C())then
call DisableTrigger(gg_trg_FgtAtk)endifcall DisableTrigger(gg_trg_FgtDeath)
set udg_Fgt_Real=.0set udg_Fgt_Unit=nullendfunctionfunction InitTrig_FgtDeath takes nothing returns nothing
set gg_trg_FgtDeath=CreateTrigger()call DisableTrigger(gg_trg_FgtDeath)
call TriggerAddCondition(gg_trg_FgtDeath,Condition(function Trig_FgtDeath_Conditions))call TriggerAddAction(gg_trg_FgtDeath,function Trig_FgtDeath_Actions)endfunctionfunction BlackMoonSlash__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==BlackMoonSlash__skId)endfunctionfunction BlackMoonSlash__Act2 takes unit self,unit target,real dmg,integer skLv,integer skPointer returns nothinglocal real array xlocal real array ylocal real dist=120.
local real r=GetRandomReal(0,360)local player p=GetOwningPlayer(self)
local unit dummy
local real facingset x[0]=GetUnitX(target)set y[0]=GetUnitY(target)set x[1]=PolarX(x[0],dist,r)
set y[1]=PolarY(y[0],dist,r)
set bj_lastCreatedUnit=CreateUnit(p,'h03G',GetUnitX(self),GetUnitY(self),GetUnitFacing(self))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyTreeXY(x[1],y[1],150.)call UnitMoveXY2(self,x[1],y[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdx",target,"chest"))call DestroyEffect(AddSpecialEffectTarget("units\\nightelf\\SpiritOfVengeance\\SpiritOfVengeance.mdx",target,"origin"))call UnitDamageTarget(self,target,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set x[1]=GetUnitX(self)set y[1]=GetUnitY(self)set facing=AngleBetweenXY(x[1],y[1],x[0],y[0])set dummy=CreateUnit(p,'u003',x[1],y[1],facing)call UnitAddAbility(dummy,'Apiv')call SaveUnitHandle(Ichigo_Hash,GetHandleId(dummy),0,self)call UnitAddAbility(dummy,skPointer)
call SetUnitAbilityLevel(dummy,skPointer,skLv)call IssuePointOrderById(dummy,$D009D,x[0],y[0])
call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=nullif(GetUnitState(target,UNIT_STATE_LIFE)>0)thencall IssueTargetOrderById(self,$D000F,target)else
call SetUnitAnimation(self,"attack")
call SetUnitFacing(self,facing)endifset self=nullset target=nullset p=nullendfunctionfunction BlackMoonSlash__Act takes nothing returns nothinglocal unit array ulocal player plocal group glocal real delay
local real dmglocal real garea
local integer skLvlocal integer timeslocal boolean bset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])set delay=.25set garea=700.set dmg=GetHeroStr(u[0],true)*3.
set skLv=GetUnitAbilityLevel(u[0],BlackMoonSlash__skId)set times=R2I(1.5+(skLv*.5))
set b=(GetRandomInt(0,1)==1)
call SetUnitVertexColor(u[0],$FF,$FF,$FF,$7F)call UnitAddType(u[0],UNIT_TYPE_MAGIC_IMMUNE)call Dynamic_Sound("Sounds\\GetsugaIchigo.mp3")call TriggerSleepAction(.01)
if(b)thenset b=falsecall BlackMoonSlash__Act2(u[0],u[1],dmg,skLv,BlackMoonSlash__getsugaSkId1)else
set b=truecall BlackMoonSlash__Act2(u[0],u[1],dmg,skLv,BlackMoonSlash__getsugaSkId2)endifloop
call TriggerSleepAction(delay)exitwhen(times<1)or(GetUnitState(u[0],UNIT_STATE_LIFE)<1)set times=times-1set g=CreateGroupXYnWW(GetUnitX(u[0]),GetUnitY(u[0]),garea,p)set u[1]=GroupRandomUnit(g)call DestroyGroup(g)
set g=nullif(u[1]!=null)thenif(b)thenset b=falsecall BlackMoonSlash__Act2(u[0],u[1],dmg,skLv,BlackMoonSlash__getsugaSkId1)else
set b=truecall BlackMoonSlash__Act2(u[0],u[1],dmg,skLv,BlackMoonSlash__getsugaSkId2)endifendifendloopcall SetUnitVertexColor(u[0],$FF,$FF,$FF,$FF)call UnitRemoveType(u[0],UNIT_TYPE_MAGIC_IMMUNE)
set u[0]=nullset u[1]=nullset p=nullendfunctionfunction BlackMoonSlash__Init takes nothing returns nothingset gg_trg_Black_Moon_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Black_Moon_Slash,Condition(function BlackMoonSlash__Cond))call TriggerAddAction(gg_trg_Black_Moon_Slash,function BlackMoonSlash__Act)endfunctionfunction GranGetsugaCero__Cond takes nothing returns boolean
return(GetSpellAbilityId()==GranGetsugaCero__skId)endfunctionfunction GranGetsugaCero__ActL3 takes nothing returns nothinglocal unit pickedlocal real x
local real y
local group gif(GranGetsugaCero__i>0)then
set GranGetsugaCero__i=GranGetsugaCero__i-1set x=GetUnitX(GranGetsugaCero__u[2])set y=GetUnitY(GranGetsugaCero__u[2])set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h0EB',x,y,GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h0EC',x,y,GranGetsugaCero__facing)
call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set x=PolarX(x,GranGetsugaCero__speed,GranGetsugaCero__facing)set y=PolarY(y,GranGetsugaCero__speed,GranGetsugaCero__facing)if(GranGetsugaCero__b)thenset GranGetsugaCero__b=false
call Dynamic_GroupShake(x,y,1.,9.,udg_CameraArea,null)set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h0BX',x,y,GranGetsugaCero__facing)
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,30,30,$FF)call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
set GranGetsugaCero__b=trueendifcall DestroyTreeXY(x,y,GranGetsugaCero__garea)call SetUnitX(GranGetsugaCero__u[2],x)call SetUnitY(GranGetsugaCero__u[2],y)set g=CreateGroupXY2(x,y,GranGetsugaCero__garea,GranGetsugaCero__p,GranGetsugaCero__gcheck)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call GroupAddUnit(GranGetsugaCero__gcheck,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(GranGetsugaCero__dmg))+"!",picked,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(GranGetsugaCero__u[0],picked,GranGetsugaCero__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(GranGetsugaCero__t)call DestroyTimer(GranGetsugaCero__t)set GranGetsugaCero__t=nullcall DestroyGroup(GranGetsugaCero__gcheck)set GranGetsugaCero__gcheck=null
call UnitApplyTimedLife(GranGetsugaCero__u[2],'BTLF',1.)
call SetUnitAnimation(GranGetsugaCero__u[2],"death")
set GranGetsugaCero__u[0]=nullset GranGetsugaCero__u[2]=nullset GranGetsugaCero__p=nullendifendfunctionfunction GranGetsugaCero__ActL2 takes nothing returns nothinglocal real array xlocal real array ycall PauseTimer(GranGetsugaCero__t)call DestroyTimer(GranGetsugaCero__t)call SetUnitTimeScale(GranGetsugaCero__u[0],1.)set x[0]=GetUnitX(GranGetsugaCero__u[0])
set y[0]=GetUnitY(GranGetsugaCero__u[0])
set x[1]=GetUnitX(GranGetsugaCero__u[1])
set y[1]=GetUnitY(GranGetsugaCero__u[1])
set GranGetsugaCero__facing=AngleBetweenXY(x[0],y[0],x[1],y[1])call SetUnitInvulnerable(GranGetsugaCero__u[0],false)call SetUnitInvulnerable(GranGetsugaCero__u[1],false)call PauseSystem(GranGetsugaCero__u[0],false)call PauseSystem(GranGetsugaCero__u[1],false)call RemoveUnit(GranGetsugaCero__u[2])call RemoveUnit(GranGetsugaCero__u[3])call RemoveUnit(GranGetsugaCero__u[4])call RemoveUnit(GranGetsugaCero__u[5])set GranGetsugaCero__u[1]=nullset GranGetsugaCero__u[3]=nullset GranGetsugaCero__u[4]=nullset GranGetsugaCero__u[5]=nullcall DisplayText("Gran Getsuga Cero !",GranGetsugaCero__u[0],.023,true,$DC,5,5,$FF)set GranGetsugaCero__u[2]=CreateUnit(GranGetsugaCero__p,'h0E9',x[1],y[1],GranGetsugaCero__facing)set GranGetsugaCero__gcheck=CreateGroup()set GranGetsugaCero__i=R2I(2000./ GranGetsugaCero__speed)set GranGetsugaCero__b=trueset GranGetsugaCero__t=CreateTimer()
call TimerStart(GranGetsugaCero__t,.04,true,function GranGetsugaCero__ActL3)
endfunctionfunction GranGetsugaCero__ActL1 takes nothing returns nothinglocal real array xlocal real array ylocal real r
local integer jset x[0]=GetUnitX(GranGetsugaCero__u[0])
set y[0]=GetUnitY(GranGetsugaCero__u[0])
if(GranGetsugaCero__i<16)thenif(GranGetsugaCero__b)thenset GranGetsugaCero__b=false
call SetUnitTimeScale(GranGetsugaCero__u[2],.4+(I2R(GranGetsugaCero__i)*.11))call Dynamic_GroupShake(x[0],y[0],1.,1.,udg_CameraArea,null)
else
set GranGetsugaCero__b=trueendifset bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h0EA',x[0],y[0],GetRandomReal(0,360))call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h0D5',x[0],y[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h04R',x[0],y[0],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,0,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set GranGetsugaCero__i=GranGetsugaCero__i+1if(GranGetsugaCero__i==16)thencall SetUnitTimeScale(GranGetsugaCero__u[0],1.5)
call SetUnitAnimationByIndex(GranGetsugaCero__u[0],1)endifelse
call PauseTimer(GranGetsugaCero__t)call DestroyTimer(GranGetsugaCero__t)set r=-120.set x[1]=GetUnitX(GranGetsugaCero__u[1])
set y[1]=GetUnitY(GranGetsugaCero__u[1])
set GranGetsugaCero__facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set x[2]=PolarX(x[1],r,GranGetsugaCero__facing)set y[2]=PolarY(y[1],r,GranGetsugaCero__facing)set j=6set r=(DistanceBetweenXY(x[0],y[0],x[2],y[2])/ I2R(j))loop
exitwhen(j<1)set x[0]=PolarX(x[0],r,GranGetsugaCero__facing)set y[0]=PolarY(y[0],r,GranGetsugaCero__facing)set bj_lastCreatedUnit=CreateUnit(GranGetsugaCero__p,'h013',x[0],y[0],GranGetsugaCero__facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set j=j-1endloopcall UnitMoveXY2(GranGetsugaCero__u[0],x[2],y[2])set GranGetsugaCero__t=CreateTimer()
call TimerStart(GranGetsugaCero__t,.08,false,function GranGetsugaCero__ActL2)endifendfunctionfunction GranGetsugaCero__Act takes nothing returns nothinglocal real array xlocal real array ylocal real r
set GranGetsugaCero__u[0]=GetTriggerUnit()set GranGetsugaCero__u[1]=GetSpellTargetUnit()set GranGetsugaCero__p=GetOwningPlayer(GranGetsugaCero__u[0])set GranGetsugaCero__dmg=(1500.+((5.+(5*GetUnitAbilityLevel(GranGetsugaCero__u[0],GranGetsugaCero__skId)))*GetHeroStr(GranGetsugaCero__u[0],true)))call SetUnitInvulnerable(GranGetsugaCero__u[0],true)
call SetUnitInvulnerable(GranGetsugaCero__u[1],true)
call PauseSystem(GranGetsugaCero__u[0],true)
call PauseSystem(GranGetsugaCero__u[1],true)
call TriggerSleepAction(.0)call SetUnitAnimation(GranGetsugaCero__u[0],"spell")
set x[0]=GetUnitX(GranGetsugaCero__u[0])
set y[0]=GetUnitY(GranGetsugaCero__u[0])
set x[1]=GetUnitX(GranGetsugaCero__u[1])
set y[1]=GetUnitY(GranGetsugaCero__u[1])
set GranGetsugaCero__facing=AngleBetweenXY(x[0],y[0],x[1],y[1])call SetUnitFacing(GranGetsugaCero__u[0],GranGetsugaCero__facing)set r=100.set x[2]=PolarX(x[0],r,GranGetsugaCero__facing)set y[2]=PolarY(y[0],r,GranGetsugaCero__facing)set GranGetsugaCero__u[2]=CreateUnit(GranGetsugaCero__p,'h01F',x[2],y[2],GranGetsugaCero__facing)call SetUnitTimeScale(GranGetsugaCero__u[2],.4)set GranGetsugaCero__u[3]=CreateUnit(GranGetsugaCero__p,'h01I',x[2],y[2],GranGetsugaCero__facing)set GranGetsugaCero__u[4]=CreateUnit(GranGetsugaCero__p,'h01I',x[2],y[2],GetRandomReal(0,360))set GranGetsugaCero__u[5]=CreateUnit(GranGetsugaCero__p,'h01I',x[2],y[2],GetRandomReal(0,360))set GranGetsugaCero__b=trueset GranGetsugaCero__i=1
set GranGetsugaCero__t=CreateTimer()
call TimerStart(GranGetsugaCero__t,.2,true,function GranGetsugaCero__ActL1)endfunctionfunction GranGetsugaCero__Init takes nothing returns nothing
set gg_trg_Gran_Getsuga_Cero=CreateTrigger()
call TriggerAddCondition(gg_trg_Gran_Getsuga_Cero,Condition(function GranGetsugaCero__Cond))
call TriggerAddAction(gg_trg_Gran_Getsuga_Cero,function GranGetsugaCero__Act)endfunctionfunction AILuffy__isAtked takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==AILuffy__AIType1 or GetUnitTypeId(GetTriggerUnit())==AILuffy__AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AILuffy__isAtker takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==AILuffy__AIType1 or GetUnitTypeId(GetAttacker())==AILuffy__AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AILuffy__Cond takes nothing returns boolean
if(not(AILuffy__isAtked()or AILuffy__isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AILuffy__Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AILuffy__AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AILuffy__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A04M')call SelectHeroSkill(mySelf,'A04L')call SelectHeroSkill(mySelf,'A0IQ')call SelectHeroSkill(mySelf,'A04J')call SelectHeroSkill(mySelf,'A04D')call SelectHeroSkill(mySelf,'A0B7')call SelectHeroSkill(mySelf,'A077')call SelectHeroSkill(mySelf,'A04F')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueTargetOrderById(mySelf,$D0270,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D0065,myTarget)call IssueTargetOrderById(mySelf,$D007F,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)call IssueImmediateOrderById(mySelf,$D0278)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AILuffy__AINo])endfunctionfunction AILuffy__Init takes nothing returns nothing
set udg_AI_Trig[AILuffy__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AILuffy__AINo],Condition(function AILuffy__Cond))call TriggerAddAction(udg_AI_Trig[AILuffy__AINo],function AILuffy__Act)endfunctionfunction GomuRocket__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==GomuRocket__skId1)or(GetSpellAbilityId()==GomuRocket__skId2)
endfunctionfunction GomuRocket__ActL takes nothing returns nothinglocal unit pickedlocal real array xlocal real array ylocal real facinglocal real dmgif(GomuRocket__i==$F)thencall SetUnitAnimation(GomuRocket__u,"spell three")call SetUnitTimeScale(GomuRocket__u,1.6)
endifset x[0]=GetUnitX(GomuRocket__u)
set y[0]=GetUnitY(GomuRocket__u)
set facing=AngleBetweenXY(x[0],y[0],GomuRocket__spellX,GomuRocket__spellY)set x[1]=PolarX(x[0],GomuRocket__speed,facing)set y[1]=PolarY(y[0],GomuRocket__speed,facing)if(GomuRocket__i>0)and(GetUnitState(GomuRocket__u,UNIT_STATE_LIFE)>0)and(DistanceBetweenXY(x[0],y[0],GomuRocket__spellX,GomuRocket__spellY)>GomuRocket__speed)thenset GomuRocket__i=GomuRocket__i-1call DestroyTreeXY(x[1],y[1],120.)call UnitMoveXY2(GomuRocket__u,x[1],y[1])else
call PauseTimer(GomuRocket__t)call DestroyTimer(GomuRocket__t)
set GomuRocket__t=nullcall DestroyEffect(GomuRocket__eff)set GomuRocket__eff=null
if(DistanceBetweenXY(x[0],y[0],GomuRocket__spellX,GomuRocket__spellY)<=GomuRocket__speed)thencall DestroyTreeXY(GomuRocket__spellX,GomuRocket__spellY,GomuRocket__garea)set bj_lastCreatedUnit=CreateUnit(GomuRocket__p,'h01M',GomuRocket__spellX,GomuRocket__spellY,facing)
call UnitAddAbility(bj_lastCreatedUnit,GomuRocket__skStunId)
call SetUnitAbilityLevel(bj_lastCreatedUnit,GomuRocket__skStunId,GetUnitAbilityLevel(GomuRocket__u,GomuRocket__skDummy))
call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(GomuRocket__p,'h01N',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)if(GetUnitTypeId(GomuRocket__u)=='N011')then
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,0,$FF)set dmg=160.+(GetUnitAbilityLevel(GomuRocket__u,GomuRocket__skDummy)*40.)set GomuRocket__g=CreateGroupXY(GomuRocket__spellX,GomuRocket__spellY,GomuRocket__garea,GomuRocket__p)loop
set picked=FirstOfGroup(GomuRocket__g)exitwhen(picked==null)call GroupRemoveUnit(GomuRocket__g,picked)call UnitDamageTarget(GomuRocket__u,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(GomuRocket__g)
set GomuRocket__g=nullset bj_lastCreatedUnit=CreateUnit(GomuRocket__p,'h03K',x[1],y[1],facing)
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call SetUnitFlyHeight(bj_lastCreatedUnit,130.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendifcall SetUnitTimeScale(GomuRocket__u,1.)call QueueUnitAnimation(GomuRocket__u,"stand")set GomuRocket__u=nullset GomuRocket__p=nullendifendfunctionfunction GomuRocket__Act takes nothing returns nothinglocal real array xlocal real array ylocal real facinglocal real r
set GomuRocket__u=GetTriggerUnit()set GomuRocket__spellX=GetSpellTargetX()
set GomuRocket__spellY=GetSpellTargetY()
set GomuRocket__skDummy=GetSpellAbilityId()set GomuRocket__p=GetOwningPlayer(GomuRocket__u)
set GomuRocket__eff=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdx",GomuRocket__u,"chest")set x[0]=GetUnitX(GomuRocket__u)
set y[0]=GetUnitY(GomuRocket__u)
set facing=AngleBetweenXY(x[0],y[0],GomuRocket__spellX,GomuRocket__spellY)set r=-10.set x[1]=PolarX(x[0],r,facing)set y[1]=PolarY(y[0],r,facing)set bj_lastCreatedUnit=CreateUnit(GomuRocket__p,'h01J',x[0],y[0],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)if(GomuRocket__skDummy==GomuRocket__skId2)thencall DisplayText("Gomu Gomu no Kong Gun",GomuRocket__u,.023,true,$FF,$FF,$FF,$FF)else
call DisplayText("Gomu Gomu no Rocket",GomuRocket__u,.023,true,$FF,$FF,$FF,$FF)endifset GomuRocket__i=$F
set GomuRocket__t=CreateTimer()call TimerStart(GomuRocket__t,.04,true,function GomuRocket__ActL)endfunctionfunction GomuRocket__Init takes nothing returns nothingset gg_trg_Gomu_Rocket=CreateTrigger()call TriggerAddCondition(gg_trg_Gomu_Rocket,Condition(function GomuRocket__Cond))call TriggerAddAction(gg_trg_Gomu_Rocket,function GomuRocket__Act)endfunctionfunction GomuBazooka__Cond takes nothing returns boolean
return(GetSpellAbilityId()==GomuBazooka__skId1)or(GetSpellAbilityId()==GomuBazooka__skId2)endfunctionfunction GomuBazooka__Act takes nothing returns nothinglocal unit array ulocal player plocal real array xlocal real array ylocal real dmglocal real facinglocal real r
local integer skDummyset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set skDummy=GetSpellAbilityId()set p=GetOwningPlayer(u[0])if(skDummy==GomuBazooka__skId2)thencall DisplayText("Gomu Gomu no Leo Bazooka",u[0],.023,false,$FF,$FF,$FF,$FF)
set dmg=(50.*GetUnitAbilityLevel(u[0],skDummy))+(6*GetHeroAgi(u[0],true))else
call DisplayText("Gomu Gomu no Bazooka",u[0],.023,false,$FF,$FF,$FF,$FF)
set dmg=(50.*GetUnitAbilityLevel(u[0],skDummy))+(5*GetHeroAgi(u[0],true))endifset x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set r=50.set x[1]=PolarX(x[0],r,facing)set y[1]=PolarY(y[0],r,facing)set bj_lastCreatedUnit=CreateUnit(p,'h03K',x[1],y[1],facing)
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitAddAbility(bj_lastCreatedUnit,'A0IP')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssuePointOrderById(bj_lastCreatedUnit,$D009D,x[1],y[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h01M',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call TriggerSleepAction(.0)set r=300.set x[1]=PolarX(x[1],r,facing)set y[1]=PolarY(y[1],r,facing)call SetUnitPosition(u[1],x[1],y[1])
set bj_lastCreatedUnit=CreateUnit(p,'h01L',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h0BX',x[1],y[1],facing)
call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h0BX',x[1],y[1],facing)
call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h08Q',x[1],y[1],facing)
call SetUnitScale(bj_lastCreatedUnit,1.2,1.2,1.2)call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h08Q',x[1],y[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.2,1.2,1.2)call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h01R',x[1],y[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01R',x[1],y[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u[0]=nullset u[1]=nullset p=nullendfunctionfunction GomuBazooka__Init takes nothing returns nothing
set gg_trg_Gomu_Bazooka=CreateTrigger()call TriggerAddCondition(gg_trg_Gomu_Bazooka,Condition(function GomuBazooka__Cond))call TriggerAddAction(gg_trg_Gomu_Bazooka,function GomuBazooka__Act)
endfunctionfunction Trig_Gat_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0IQ')endfunctionfunction Trig_Gat_Actions takes nothing returns nothingset udg_Gat_Unit[0]=GetTriggerUnit()
set udg_Gat_Bool=truecall EnableTrigger(gg_trg_GatC)call DisplayText("Gomu Gomu no Gatling",udg_Gat_Unit[0],.023,false,$FF,$FF,$FF,$FF)call TriggerSleepAction(.05)
set udg_Gat_Real[0]=GetUnitFacing(udg_Gat_Unit[0])set udg_Gat_Real[1]=((.5+(.1*I2R(GetUnitAbilityLevel(udg_Gat_Unit[0],'A04F'))))*I2R(GetHeroAgi(udg_Gat_Unit[0],true)))set udg_Gat_Real[1]=(udg_Gat_Real[1]/ 1.4)set udg_Gat_Point[0]=GetUnitLoc(udg_Gat_Unit[0])
set udg_Gat_Point[1]=PolarProjectionBJ(udg_Gat_Point[0],340.,udg_Gat_Real[0])set udg_Gat_Real[2]=AngleBetweenPoints(udg_Gat_Point[1],udg_Gat_Point[0])set udg_Gat_Rect=RectFromCenterSizeBJ(udg_Gat_Point[1],400.,400.)call RemoveLocation(udg_Gat_Point[0])set udg_Gat_Point[0]=nullcall RemoveLocation(udg_Gat_Point[1])set udg_Gat_Point[1]=nullcall SetUnitTimeScalePercent(udg_Gat_Unit[0],200.)call EnableTrigger(gg_trg_GatL)endfunctionfunction InitTrig_Gat takes nothing returns nothingset gg_trg_Gat=CreateTrigger()call TriggerAddCondition(gg_trg_Gat,Condition(function Trig_Gat_Conditions))
call TriggerAddAction(gg_trg_Gat,function Trig_Gat_Actions)endfunctionfunction Trig_GatL_Func002Func001C takes nothing returns boolean
return(udg_Gat_Count==0)
endfunctionfunction Trig_GatL_Func002Func008002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Gat_Unit[0]))==false)endfunctionfunction Trig_GatL_Func002Func008002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_GatL_Func002Func008002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_GatL_Func002Func008002003001(),Trig_GatL_Func002Func008002003002())endfunctionfunction Trig_GatL_Func002Func009A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Gat_Unit[0],GetEnumUnit(),udg_Gat_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_GatL_Func002Func016001 takes nothing returns booleanreturn(IsTriggerEnabled(gg_trg_GatC))endfunctionfunction Trig_GatL_Func002C takes nothing returns booleanreturn(udg_Gat_Bool)
endfunctionfunction Trig_GatL_Actions takes nothing returns nothing
if(Trig_GatL_Func002C())then
if(Trig_GatL_Func002Func001C())thenset udg_Gat_Count=5set udg_Gat_Point[0]=GetRectCenter(udg_Gat_Rect)
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Gat_Unit[0]),udg_Gat_Point[0],bj_UNIT_FACING)call RemoveLocation(udg_Gat_Point[0])set udg_Gat_Point[0]=nullcall UnitAddAbility(bj_lastCreatedUnit,'A0IR')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)else
set udg_Gat_Count=(udg_Gat_Count-1)endifset udg_Gat_Point[0]=GetRandomLocInRect(udg_Gat_Rect)call CreateNUnitsAtLoc(1,'h01L',GetOwningPlayer(udg_Gat_Unit[0]),udg_Gat_Point[0],udg_Gat_Real[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h01N',GetOwningPlayer(udg_Gat_Unit[0]),udg_Gat_Point[0],udg_Gat_Real[0])call UnitApplyTimedLifeBJ(.3,'BTLF',bj_lastCreatedUnit)set udg_Gat_Group=GetUnitsInRangeOfLocMatching(300.,udg_Gat_Point[0],Condition(function Trig_GatL_Func002Func008002003))
call ForGroupBJ(udg_Gat_Group,function Trig_GatL_Func002Func009A)call EnumDestructablesInCircleBJ(200.,udg_Gat_Point[0],function TreeKiller)call RemoveLocation(udg_Gat_Point[0])set udg_Gat_Point[0]=nullcall DestroyGroup(udg_Gat_Group)
set udg_Gat_Group=nullelse
call DisableTrigger(GetTriggeringTrigger())if(Trig_GatL_Func002Func016001())thencall DisableTrigger(gg_trg_GatC)
endifcall RemoveRect(udg_Gat_Rect)set udg_Gat_Rect=nullcall GroupClear(udg_Gat_Group2)call SetUnitTimeScalePercent(udg_Gat_Unit[0],100.)set udg_Gat_Unit[0]=null
set udg_Gat_Real[0]=.0set udg_Gat_Real[1]=.0set udg_Gat_Real[2]=.0set udg_Gat_Bool=falseendifendfunctionfunction InitTrig_GatL takes nothing returns nothing
set gg_trg_GatL=CreateTrigger()call DisableTrigger(gg_trg_GatL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GatL,.08)call TriggerAddAction(gg_trg_GatL,function Trig_GatL_Actions)endfunctionfunction Trig_GatC_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0IQ')endfunctionfunction Trig_GatC_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())set udg_Gat_Bool=falseendfunctionfunction InitTrig_GatC takes nothing returns nothing
set gg_trg_GatC=CreateTrigger()call DisableTrigger(gg_trg_GatC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_GatC,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call TriggerRegisterAnyUnitEventBJ(gg_trg_GatC,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(gg_trg_GatC,Condition(function Trig_GatC_Conditions))call TriggerAddAction(gg_trg_GatC,function Trig_GatC_Actions)endfunctionfunction Trig_Gear4Init_DieAct takes nothing returns nothing
call UnitRemoveAbility(GetDyingUnit(),'A0B6')endfunctionfunction Trig_Gear4Init_DieCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetDyingUnit(),'A0B6')>0)
endfunctionfunction Trig_Gear4Init_Conditions takes nothing returns boolean
return(GetLearnedSkill()=='A04J')endfunctionfunction Trig_Gear4Init_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()local trigger t=CreateTrigger()call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0B6',false)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Trig_Gear4Init_DieCond))call TriggerAddAction(t,function Trig_Gear4Init_DieAct)set u=nullcall DestroyTrigger(gg_trg_Gear4_Init)endfunctionfunction InitTrig_Gear4_Init takes nothing returns nothingset gg_trg_Gear4_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Gear4_Init,Condition(function Trig_Gear4Init_Conditions))call TriggerAddAction(gg_trg_Gear4_Init,function Trig_Gear4Init_Actions)
endfunctionfunction Trig_Gear4_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A04J')endfunctionfunction Trig_Gear4_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='N011')then
set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)call DisplayText("Gia Fosu Baundoman",u,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Luffy\\Gear4.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h01O',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.7,1.7,1.7)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01O',x,y,GetRandomReal(0,360))
call SetUnitScale(bj_lastCreatedUnit,1.7,1.7,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01P',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.7)set bj_lastCreatedUnit=CreateUnit(p,'h01Q',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call TransfromAction(u,x,y)set p=nullelse
call UnitRemoveAbility(u,'A0B6')
endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Gear4 takes nothing returns nothingset gg_trg_Gear4=CreateTrigger()
call TriggerAddCondition(gg_trg_Gear4,Condition(function Trig_Gear4_Conditions))
call TriggerAddAction(gg_trg_Gear4,function Trig_Gear4_Actions)endfunctionfunction Trig_Rdw_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A04L')endfunctionfunction Trig_Rdw_Actions takes nothing returns nothingset udg_Rdw_Unit[0]=GetTriggerUnit()
set udg_Rdw_Unit[9]=GetSpellTargetUnit()
set udg_Rdw_Point[0]=GetUnitLoc(udg_Rdw_Unit[9])
set udg_Rdw_Point[1]=GetUnitLoc(udg_Rdw_Unit[0])
set udg_Rdw_Real[0]=AngleBetweenPoints(udg_Rdw_Point[1],udg_Rdw_Point[0])set udg_Rdw_Point[2]=PolarProjectionBJ(udg_Rdw_Point[0],-85.,udg_Rdw_Real[0])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Rdw_Unit[0]),udg_Rdw_Point[2],bj_UNIT_FACING)set udg_Rdw_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Rdw_Point[0])set udg_Rdw_Point[0]=nullcall RemoveLocation(udg_Rdw_Point[1])set udg_Rdw_Point[1]=nullcall RemoveLocation(udg_Rdw_Point[2])set udg_Rdw_Point[2]=nullset udg_Rdw_Real[1]=1.call SetUnitInvulnerable(udg_Rdw_Unit[0],true)call SetUnitInvulnerable(udg_Rdw_Unit[9],true)call PauseSystem(udg_Rdw_Unit[0],true)call PauseSystem(udg_Rdw_Unit[9],true)call SetUnitAnimation(udg_Rdw_Unit[0],"stand ready")
call EnableTrigger(gg_trg_RdwV)endfunctionfunction InitTrig_Rdw takes nothing returns nothingset gg_trg_Rdw=CreateTrigger()call TriggerAddCondition(gg_trg_Rdw,Condition(function Trig_Rdw_Conditions))
call TriggerAddAction(gg_trg_Rdw,function Trig_Rdw_Actions)endfunctionfunction Trig_Rdw2_Func004Func010C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Rdw_Point[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_Rdw2_Func004Func014C takes nothing returns boolean
return(udg_Rdw_Int==16)endfunctionfunction Trig_Rdw2_Func004Func019C takes nothing returns boolean
return(udg_Rdw_Int>0)and(IsUnitAliveBJ(udg_Rdw_Unit[0]))and(IsUnitAliveBJ(udg_Rdw_Unit[1]))endfunctionfunction Trig_Rdw2_Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Rdw_Point[0],udg_Rdw_Point[1])>89.)and(IsUnitAliveBJ(udg_Rdw_Unit[0]))and(udg_Rdw_Int>0)and(IsUnitAliveBJ(udg_Rdw_Unit[1]))
endfunctionfunction Trig_Rdw2_Actions takes nothing returns nothing
set udg_Rdw_Point[0]=GetUnitLoc(udg_Rdw_Unit[0])
set udg_Rdw_Point[1]=GetUnitLoc(udg_Rdw_Unit[1])
if(Trig_Rdw2_Func004C())then
set udg_Rdw_Point[2]=PolarProjectionBJ(udg_Rdw_Point[0],85.,udg_Rdw_Real[0])
call RemoveLocation(udg_Rdw_Point[0])set udg_Rdw_Point[0]=nullcall RemoveLocation(udg_Rdw_Point[1])set udg_Rdw_Point[1]=nullif(Trig_Rdw2_Func004Func010C())thencall SetUnitPositionLoc(udg_Rdw_Unit[0],udg_Rdw_Point[2])endifcall RemoveLocation(udg_Rdw_Point[2])set udg_Rdw_Point[2]=nullset udg_Rdw_Int=(udg_Rdw_Int-1)if(Trig_Rdw2_Func004Func014C())thencall DisplayText("Gomu Gomu no Red Hawk",udg_Rdw_Unit[0],.023,false,$DC,5,5,$FF)
endifelse
call DisableTrigger(GetTriggeringTrigger())call SetUnitInvulnerable(udg_Rdw_Unit[9],false)call PauseSystem(udg_Rdw_Unit[9],false)set udg_Rdw_Group2[1]=CreateGroup()if(Trig_Rdw2_Func004Func019C())thencall CreateNUnitsAtLoc(1,'h01T',GetOwningPlayer(udg_Rdw_Unit[0]),udg_Rdw_Point[1],udg_Rdw_Real[0])call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h01U',GetOwningPlayer(udg_Rdw_Unit[0]),udg_Rdw_Point[1],udg_Rdw_Real[0])call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h01R',GetOwningPlayer(udg_Rdw_Unit[0]),udg_Rdw_Point[1],udg_Rdw_Real[0])call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,50.)
call Dynamic_GroupShake(GetLocationX(udg_Rdw_Point[1]),GetLocationY(udg_Rdw_Point[1]),1.,9.,1200.,null)call DisplayText(I2S(R2I(udg_Rdw_Real[1]))+"!",udg_Rdw_Unit[9],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Rdw_Unit[0],udg_Rdw_Unit[9],udg_Rdw_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call EnumDestructablesInCircleBJ(400.,udg_Rdw_Point[1],function TreeKiller)endifcall RemoveLocation(udg_Rdw_Point[0])set udg_Rdw_Point[0]=nullcall RemoveLocation(udg_Rdw_Point[1])set udg_Rdw_Point[1]=nullcall SetUnitPathing(udg_Rdw_Unit[0],true)call RemoveUnit(udg_Rdw_Unit[1])
call SetUnitInvulnerable(udg_Rdw_Unit[0],false)call PauseSystem(udg_Rdw_Unit[0],false)call TriggerSleepAction(.01)
call SetUnitAnimation(udg_Rdw_Unit[0],"stand")set udg_Rdw_Unit[0]=null
set udg_Rdw_Unit[1]=null
set udg_Rdw_Real[0]=.0set udg_Rdw_Real[1]=.0set udg_Rdw_Int=0endifendfunctionfunction InitTrig_Rdw2 takes nothing returns nothing
set gg_trg_Rdw2=CreateTrigger()call DisableTrigger(gg_trg_Rdw2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Rdw2,.04)call TriggerAddAction(gg_trg_Rdw2,function Trig_Rdw2_Actions)endfunctionfunction Trig_RdwV_Func001C takes nothing returns booleanreturn(udg_Rdw_Real[1]<11.)endfunctionfunction Trig_RdwV_Actions takes nothing returns nothing
if(Trig_RdwV_Func001C())then
call SetUnitVertexColorBJ(udg_Rdw_Unit[0],'d','d','d',(10.*udg_Rdw_Real[1]))
set udg_Rdw_Real[1]=(udg_Rdw_Real[1]+1)else
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.01)
call SetUnitVertexColorBJ(udg_Rdw_Unit[0],'d','d','d',.0)call SetUnitPathing(udg_Rdw_Unit[0],false)set udg_Rdw_Point[0]=GetUnitLoc(udg_Rdw_Unit[0])
set udg_Rdw_Point[1]=PolarProjectionBJ(udg_Rdw_Point[0],-450.,udg_Rdw_Real[0])if(IsTerrainPathable(GetLocationX(udg_Rdw_Point[1]),GetLocationY(udg_Rdw_Point[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitPositionLocFacingBJ(udg_Rdw_Unit[0],udg_Rdw_Point[1],udg_Rdw_Real[0])endifcall CreateNUnitsAtLoc(1,'h01J',GetOwningPlayer(udg_Rdw_Unit[0]),udg_Rdw_Point[1],udg_Rdw_Real[0])call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,120.)call RemoveLocation(udg_Rdw_Point[0])set udg_Rdw_Point[0]=nullcall RemoveLocation(udg_Rdw_Point[1])set udg_Rdw_Point[1]=nullcall SetUnitAnimation(udg_Rdw_Unit[0],"spell two")call AddSpecialEffectTargetUnitBJ("hand right",udg_Rdw_Unit[0],"LuffyFireLarge.mdx")
call DestroyEffect(bj_lastCreatedEffect)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Luffy\\RedHawk.wav",GetUnitX(udg_Rdw_Unit[0]),GetUnitY(udg_Rdw_Unit[0]))set udg_Rdw_Real[1]=(1500.+(($A*GetUnitAbilityLevel(udg_Rdw_Unit[0],'A04L'))*GetHeroAgi(udg_Rdw_Unit[0],false)))
set udg_Rdw_Int=20call TriggerSleepAction(.01)
call SetUnitAnimation(udg_Rdw_Unit[0],"spell three")
call EnableTrigger(gg_trg_Rdw2)endifendfunctionfunction InitTrig_RdwV takes nothing returns nothing
set gg_trg_RdwV=CreateTrigger()call DisableTrigger(gg_trg_RdwV)
call TriggerRegisterTimerEventPeriodic(gg_trg_RdwV,.05)call TriggerAddAction(gg_trg_RdwV,function Trig_RdwV_Actions)endfunctionfunction Trig_Kkg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A04M')and(GetUnitTypeId(GetTriggerUnit())=='N011')endfunctionfunction Trig_Kkg_Func030C takes nothing returns boolean
return(udg_Kkg_Real[0]>400.)
endfunctionfunction Trig_Kkg_Actions takes nothing returns nothingset udg_Kkg_Unit[0]=GetTriggerUnit()
set udg_Kkg_Unit[1]=GetSpellTargetUnit()
set udg_Kkg_Own=GetOwningPlayer(udg_Kkg_Unit[0])
call SetUnitInvulnerable(udg_Kkg_Unit[0],true)call SetUnitInvulnerable(udg_Kkg_Unit[1],true)call PauseSystem(udg_Kkg_Unit[0],true)call PauseSystem(udg_Kkg_Unit[1],true)call TriggerSleepAction(.01)
call SetUnitPathing(udg_Kkg_Unit[0],false)call ShowUnitHide(udg_Kkg_Unit[0])set udg_Kkg_Point[0]=GetUnitLoc(udg_Kkg_Unit[0])
set udg_Kkg_Point[1]=GetUnitLoc(udg_Kkg_Unit[1])
set udg_Kkg_Point[2]=PolarProjectionBJ(udg_Kkg_Point[1],320.,90.)set udg_Kkg_Real[0]=DistanceBetweenPoints(udg_Kkg_Point[0],udg_Kkg_Point[1])
set udg_Kkg_Real[1]=AngleBetweenPoints(udg_Kkg_Point[0],udg_Kkg_Point[1])call PanCameraToTimedLocForPlayer(udg_Kkg_Own,udg_Kkg_Point[2],.5)call CreateNUnitsAtLoc(1,'h0AU',udg_Kkg_Own,udg_Kkg_Point[0],GetUnitFacing(udg_Kkg_Unit[0]))
set udg_Kkg_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01V',udg_Kkg_Own,udg_Kkg_Point[0],udg_Kkg_Real[1])call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Kkg_Point[0])set udg_Kkg_Point[0]=nullcall RemoveLocation(udg_Kkg_Point[1])set udg_Kkg_Point[1]=nullcall RemoveLocation(udg_Kkg_Point[2])set udg_Kkg_Point[2]=nullif(Trig_Kkg_Func030C())thenset udg_Kkg_Fly=1100.else
set udg_Kkg_Fly=1400.endifcall SetUnitFlyHeight(udg_Kkg_Unit[2],600.,udg_Kkg_Fly)call SetUnitAnimation(udg_Kkg_Unit[2],"spell five")call SetUnitTimeScalePercent(udg_Kkg_Unit[2],50.)set udg_Kkg_Real[0]=(udg_Kkg_Real[0]/ 15.)set udg_Kkg_Real[2]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A04M',udg_Kkg_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Kkg_Unit[0],false))))set udg_Kkg_Int=$Fcall Dynamic_Sound("Sounds\\KingKong.mp3")call EnableTrigger(gg_trg_KkgL)endfunctionfunction InitTrig_Kkg takes nothing returns nothingset gg_trg_Kkg=CreateTrigger()call TriggerAddCondition(gg_trg_Kkg,Condition(function Trig_Kkg_Conditions))
call TriggerAddAction(gg_trg_Kkg,function Trig_Kkg_Actions)endfunctionfunction Trig_KkgL_Func001Func013C takes nothing returns boolean
return(IsUnitDeadBJ(udg_Kkg_Unit[1])==false)and(IsUnitDeadBJ(udg_Kkg_Unit[2])==false)endfunctionfunction Trig_KkgL_Func001C takes nothing returns booleanreturn(udg_Kkg_Int>0)and(IsUnitDeadBJ(udg_Kkg_Unit[2])==false)endfunctionfunction Trig_KkgL_Actions takes nothing returns nothing
if(Trig_KkgL_Func001C())then
set udg_Kkg_Point[0]=GetUnitLoc(udg_Kkg_Unit[2])
set udg_Kkg_Point[1]=PolarProjectionBJ(udg_Kkg_Point[0],udg_Kkg_Real[0],udg_Kkg_Real[1])
call RemoveLocation(udg_Kkg_Point[0])set udg_Kkg_Point[0]=nullcall SetUnitPositionLocFacingBJ(udg_Kkg_Unit[2],udg_Kkg_Point[1],udg_Kkg_Real[1])call SetUnitPositionLoc(udg_Kkg_Unit[0],udg_Kkg_Point[1])call RemoveLocation(udg_Kkg_Point[1])set udg_Kkg_Point[1]=nullset udg_Kkg_Int=(udg_Kkg_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_KkgL_Func001Func013C())thencall CreateTextTagUnitBJ("King Kong Gun",udg_Kkg_Unit[2],0,$A,86.,2.,2.,0)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,50.,100.)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,2.)set udg_Kkg_Real[1]=81.set udg_Kkg_Int=4call EnableTrigger(gg_trg_KkgS)call SetUnitTimeScalePercent(udg_Kkg_Unit[2],20.)call TriggerSleepAction(1.9)
call SetUnitTimeScalePercent(udg_Kkg_Unit[2],130.)call SetUnitFlyHeight(udg_Kkg_Unit[2],600.,2100.)call TriggerSleepAction(.1)call Dynamic_Sound("Sounds\\Explosion.mp3")set udg_Kkg_Point[0]=GetUnitLoc(udg_Kkg_Unit[1])
call CreateNUnitsAtLoc(1,'h01O',udg_Kkg_Own,udg_Kkg_Point[0],GetRandomReal(0,360))set udg_Kkg_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01O',udg_Kkg_Own,udg_Kkg_Point[0],GetRandomReal(0,360))set udg_Kkg_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01Z',udg_Kkg_Own,udg_Kkg_Point[0],bj_UNIT_FACING)
set udg_Kkg_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',udg_Kkg_Own,udg_Kkg_Point[0],GetRandomReal(0,360))set udg_Kkg_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',udg_Kkg_Own,udg_Kkg_Point[0],GetRandomReal(0,360))set udg_Kkg_Unit[7]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01Y',udg_Kkg_Own,udg_Kkg_Point[0],bj_UNIT_FACING)
set udg_Kkg_Unit[8]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01X',udg_Kkg_Own,udg_Kkg_Point[0],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h01X',GetOwningPlayer(udg_Kkg_Unit[0]),udg_Kkg_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call EnumDestructablesInCircleBJ(500.,udg_Kkg_Point[0],function TreeKiller)call CameraShake(udg_CameraShakeTime,udg_CameraShakePow,udg_Kkg_Unit[0])
call Dynamic_GroupShake(GetLocationX(udg_Kkg_Point[0]),GetLocationY(udg_Kkg_Point[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Kkg_Point[0])set udg_Kkg_Point[0]=nullcall UnitApplyTimedLifeBJ(3.,'BTLF',udg_Kkg_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Kkg_Unit[4])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Kkg_Unit[5])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Kkg_Unit[6])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Kkg_Unit[7])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Kkg_Unit[8])
call SetUnitScalePercent(udg_Kkg_Unit[3],450.,450.,450.)
call SetUnitScalePercent(udg_Kkg_Unit[4],450.,450.,450.)
call SetUnitTimeScalePercent(udg_Kkg_Unit[5],30.)call SetUnitTimeScalePercent(udg_Kkg_Unit[6],30.)call SetUnitTimeScalePercent(udg_Kkg_Unit[7],30.)call SetUnitTimeScalePercent(udg_Kkg_Unit[8],250.)call SetUnitVertexColorBJ(udg_Kkg_Unit[3],20.,4.,4.,0)call SetUnitVertexColorBJ(udg_Kkg_Unit[4],20.,4.,4.,0)set udg_Kkg_Unit[3]=null
set udg_Kkg_Unit[4]=null
set udg_Kkg_Unit[5]=null
set udg_Kkg_Unit[6]=null
set udg_Kkg_Unit[7]=null
set udg_Kkg_Unit[8]=null
call SetUnitInvulnerable(udg_Kkg_Unit[1],false)call PauseSystem(udg_Kkg_Unit[1],false)call DisplayText(I2S(R2I(udg_Kkg_Real[2]))+"!",udg_Kkg_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Kkg_Unit[0],udg_Kkg_Unit[1],udg_Kkg_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call TriggerSleepAction(.35)
call EnableTrigger(gg_trg_KkgS2)
call SetUnitFly(udg_Kkg_Unit[0])
call SetUnitFlyHeight(udg_Kkg_Unit[0],600.,.0)call SetUnitFlyHeight(udg_Kkg_Unit[2],.0,2100.)call SetUnitFlyHeight(udg_Kkg_Unit[0],.0,2100.)call TriggerSleepAction(.15)
call RemoveUnit(udg_Kkg_Unit[2])
call ShowUnitShow(udg_Kkg_Unit[0])call SelectUnitAddForPlayer(udg_Kkg_Unit[0],udg_Kkg_Own)
call SetUnitInvulnerable(udg_Kkg_Unit[0],false)call PauseSystem(udg_Kkg_Unit[0],false)call SetUnitPathing(udg_Kkg_Unit[0],true)call SetUnitAnimation(udg_Kkg_Unit[0],"stand")else
call RemoveUnit(udg_Kkg_Unit[2])
call ShowUnitShow(udg_Kkg_Unit[0])call SelectUnitAddForPlayer(udg_Kkg_Unit[0],udg_Kkg_Own)
call SetUnitFlyHeight(udg_Kkg_Unit[0],.0,.0)
call SetUnitInvulnerable(udg_Kkg_Unit[0],false)call SetUnitInvulnerable(udg_Kkg_Unit[1],false)call PauseSystem(udg_Kkg_Unit[0],false)call PauseSystem(udg_Kkg_Unit[1],false)call SetUnitPathing(udg_Kkg_Unit[0],true)call SetUnitTimeScalePercent(udg_Kkg_Unit[0],100.)call TriggerSleepAction(1.)set udg_Kkg_Own=null
set udg_Kkg_Unit[0]=null
set udg_Kkg_Unit[1]=null
set udg_Kkg_Unit[2]=null
set udg_Kkg_Real[0]=.0set udg_Kkg_Real[1]=.0set udg_Kkg_Real[2]=.0set udg_Kkg_Int=0endifendifendfunctionfunction InitTrig_KkgL takes nothing returns nothing
set gg_trg_KkgL=CreateTrigger()call DisableTrigger(gg_trg_KkgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KkgL,.03)call TriggerAddAction(gg_trg_KkgL,function Trig_KkgL_Actions)endfunctionfunction Trig_KkgS_Func001Func004C takes nothing returns boolean
return(udg_Kkg_Int>3)endfunctionfunction Trig_KkgS_Func001C takes nothing returns booleanreturn(udg_Kkg_Real[1]<121.)and(IsUnitDeadBJ(udg_Kkg_Unit[2])==false)endfunctionfunction Trig_KkgS_Actions takes nothing returns nothing
if(Trig_KkgS_Func001C())then
call SetUnitScalePercent(udg_Kkg_Unit[2],udg_Kkg_Real[1],udg_Kkg_Real[1],udg_Kkg_Real[1])set udg_Kkg_Real[1]=(udg_Kkg_Real[1]+1)if(Trig_KkgS_Func001Func004C())thenset udg_Kkg_Point[0]=GetUnitLoc(udg_Kkg_Unit[2])
call CreateNUnitsAtLoc(1,'h01W',udg_Kkg_Own,udg_Kkg_Point[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitFlyHeight(bj_lastCreatedUnit,750.,.0)call RemoveLocation(udg_Kkg_Point[0])set udg_Kkg_Point[0]=nullset udg_Kkg_Int=0else
set udg_Kkg_Int=(udg_Kkg_Int+1)endifelse
call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction InitTrig_KkgS takes nothing returns nothing
set gg_trg_KkgS=CreateTrigger()call DisableTrigger(gg_trg_KkgS)
call TriggerRegisterTimerEventPeriodic(gg_trg_KkgS,.05)call TriggerAddAction(gg_trg_KkgS,function Trig_KkgS_Actions)endfunctionfunction Trig_KkgS2_Func001C takes nothing returns booleanreturn(udg_Kkg_Real[1]>80.)and(IsUnitDeadBJ(udg_Kkg_Unit[2])==false)
endfunctionfunction Trig_KkgS2_Actions takes nothing returns nothingif(Trig_KkgS2_Func001C())thenset udg_Kkg_Real[1]=(udg_Kkg_Real[1]-4.)
call SetUnitScalePercent(udg_Kkg_Unit[2],udg_Kkg_Real[1],udg_Kkg_Real[1],udg_Kkg_Real[1])else
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(1.)set udg_Kkg_Own=null
set udg_Kkg_Unit[0]=null
set udg_Kkg_Unit[1]=null
set udg_Kkg_Unit[2]=null
set udg_Kkg_Real[0]=.0set udg_Kkg_Real[1]=.0set udg_Kkg_Real[2]=.0set udg_Kkg_Int=0endifendfunctionfunction InitTrig_KkgS2 takes nothing returns nothingset gg_trg_KkgS2=CreateTrigger()
call DisableTrigger(gg_trg_KkgS2)call TriggerRegisterTimerEventPeriodic(gg_trg_KkgS2,.04)
call TriggerAddAction(gg_trg_KkgS2,function Trig_KkgS2_Actions)endfunctionfunction AINaruto__isAtked takes nothing returns boolean
return((GetUnitTypeId(GetTriggerUnit())==AINaruto__AIType1 or GetUnitTypeId(GetTriggerUnit())==AINaruto__AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AINaruto__isAtker takes nothing returns boolean
return((GetUnitTypeId(GetAttacker())==AINaruto__AIType1 or GetUnitTypeId(GetAttacker())==AINaruto__AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AINaruto__Cond takes nothing returns booleanif(not(AINaruto__isAtked()or AINaruto__isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AINaruto__Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AINaruto__AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AINaruto__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A04S')call SelectHeroSkill(mySelf,'A04R')call SelectHeroSkill(mySelf,'A04Q')call SelectHeroSkill(mySelf,'A04O')call SelectHeroSkill(mySelf,'A04N')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueTargetOrderById(mySelf,$D0270,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D0065,myTarget)call IssueTargetOrderById(mySelf,$D022F,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D009B)call IssueImmediateOrderById(mySelf,$D0277)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AINaruto__AINo])endfunctionfunction AINaruto__Init takes nothing returns nothingset udg_AI_Trig[AINaruto__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AINaruto__AINo],Condition(function AINaruto__Cond))
call TriggerAddAction(udg_AI_Trig[AINaruto__AINo],function AINaruto__Act)endfunctionfunction Trig_Lrs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A04N')endfunctionfunction Trig_Lrs_Actions takes nothing returns nothingset udg_Lrs_Unit[0]=GetTriggerUnit()
set udg_Lrs_Point[0]=GetSpellTargetLoc()
set udg_Lrs_Point[1]=GetUnitLoc(udg_Lrs_Unit[0])
set udg_Lrs_Real[0]=AngleBetweenPoints(udg_Lrs_Point[1],udg_Lrs_Point[0])set udg_Lrs_Point[2]=PolarProjectionBJ(udg_Lrs_Point[0],100.,udg_Lrs_Real[0])set udg_Lrs_Point[3]=PolarProjectionBJ(udg_Lrs_Point[1],120.,(udg_Lrs_Real[0]-90.))set udg_Lrs_Real[0]=AngleBetweenPoints(udg_Lrs_Point[3],udg_Lrs_Point[0])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[2],bj_UNIT_FACING)set udg_Lrs_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrs_Point[0])set udg_Lrs_Point[0]=nullcall RemoveLocation(udg_Lrs_Point[1])set udg_Lrs_Point[1]=nullcall RemoveLocation(udg_Lrs_Point[2])set udg_Lrs_Point[2]=nullcall CreateNUnitsAtLoc(1,'h021',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[3],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,70.)
call CreateNUnitsAtLoc(1,'h020',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[3],bj_UNIT_FACING)set udg_Lrs_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h022',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[3],bj_UNIT_FACING)set udg_Lrs_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrs_Point[3])set udg_Lrs_Point[3]=nullcall DisplayText("Senpo: Yoton Rasenshuriken",udg_Lrs_Unit[0],.023,true,$FF,$FF,$FF,$FF)
call SetUnitTimeScalePercent(udg_Lrs_Unit[2],175.)set udg_Lrs_Real[1]=BasicDmg_Q(udg_Lrs_Unit[0],'A04N',0)
set udg_Lrs_Int=24call EnableTrigger(gg_trg_LrsL)endfunctionfunction InitTrig_Lrs takes nothing returns nothingset gg_trg_Lrs=CreateTrigger()call TriggerAddCondition(gg_trg_Lrs,Condition(function Trig_Lrs_Conditions))
call TriggerAddAction(gg_trg_Lrs,function Trig_Lrs_Actions)endfunctionfunction Trig_LrsL_Func004Func024002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lrs_Unit[0]))==false)endfunctionfunction Trig_LrsL_Func004Func024002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LrsL_Func004Func024002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_LrsL_Func004Func024002003001(),Trig_LrsL_Func004Func024002003002())endfunctionfunction Trig_LrsL_Func004Func029A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Lrs_Unit[0],GetEnumUnit(),udg_Lrs_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction Trig_LrsL_Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Lrs_Point[0],udg_Lrs_Point[1])>100.)and(udg_Lrs_Int>0)endfunctionfunction Trig_LrsL_Actions takes nothing returns nothing
set udg_Lrs_Point[0]=GetUnitLoc(udg_Lrs_Unit[1])
set udg_Lrs_Point[1]=GetUnitLoc(udg_Lrs_Unit[2])
if(Trig_LrsL_Func004C())then
set udg_Lrs_Point[2]=PolarProjectionBJ(udg_Lrs_Point[1],62.,udg_Lrs_Real[0])
call SetUnitPositionLoc(udg_Lrs_Unit[2],udg_Lrs_Point[2])call SetUnitPositionLoc(udg_Lrs_Unit[3],udg_Lrs_Point[2])call RemoveLocation(udg_Lrs_Point[0])set udg_Lrs_Point[0]=nullcall RemoveLocation(udg_Lrs_Point[1])set udg_Lrs_Point[1]=nullcall RemoveLocation(udg_Lrs_Point[2])set udg_Lrs_Point[2]=nullset udg_Lrs_Int=(udg_Lrs_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call CreateNUnitsAtLoc(1,'h024',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h024',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h025',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h023',GetOwningPlayer(udg_Lrs_Unit[0]),udg_Lrs_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,200.)call EnumDestructablesInCircleBJ(400.,udg_Lrs_Point[1],function TreeKiller)set udg_Lrs_Group=GetUnitsInRangeOfLocMatching(400.,udg_Lrs_Point[1],Condition(function Trig_LrsL_Func004Func024002003))
call RemoveLocation(udg_Lrs_Point[0])set udg_Lrs_Point[0]=nullcall RemoveLocation(udg_Lrs_Point[1])set udg_Lrs_Point[1]=nullcall ForGroupBJ(udg_Lrs_Group,function Trig_LrsL_Func004Func029A)call DestroyGroup(udg_Lrs_Group)
set udg_Lrs_Group=nullcall RemoveUnit(udg_Lrs_Unit[1])
call RemoveUnit(udg_Lrs_Unit[2])
call RemoveUnit(udg_Lrs_Unit[3])
set udg_Lrs_Unit[0]=null
set udg_Lrs_Unit[1]=null
set udg_Lrs_Unit[2]=null
set udg_Lrs_Unit[3]=null
set udg_Lrs_Real[0]=.0set udg_Lrs_Real[1]=.0set udg_Lrs_Int=0endifendfunctionfunction InitTrig_LrsL takes nothing returns nothing
set gg_trg_LrsL=CreateTrigger()call DisableTrigger(gg_trg_LrsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrsL,.04)call TriggerAddAction(gg_trg_LrsL,function Trig_LrsL_Actions)endfunctionfunction JitonRasengan__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==JitonRasengan__skId)
endfunctionfunction JitonRasengan__Act takes nothing returns nothinglocal unit array ulocal unit array pickedlocal player plocal real array xlocal real array ylocal real dmglocal real facinglocal real r
local real distlocal group glocal integer iset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])call DisplayText("Senpo Jiton Rasengan",u[0],.023,false,$FF,$FF,$FF,$FF)
set dmg=(100.+(100.*GetUnitAbilityLevel(u[0],JitonRasengan__skId)))set dist=1000.set x[0]=GetUnitX(u[1])set y[0]=GetUnitY(u[1])set r=-120.set i=-1
set g=CreateGroupUnitType('U000',p)call GroupAddUnit(g,u[0])loop
set u[2]=FirstOfGroup(g)
exitwhen(u[2]==null)
call GroupRemoveUnit(g,u[2])
if(u[2]==u[0])or((GetUnitAbilityLevel(u[2],'B00L')>0)and(DistanceBetweenXY(x[0],y[0],GetUnitX(u[2]),GetUnitY(u[2]))<dist))thenset i=i+1set picked[i]=u[2]call IssueImmediateOrderById(picked[i],$D0004)call PauseSystem(picked[i],true)
set x[1]=GetUnitX(picked[i])
set y[1]=GetUnitY(picked[i])
set bj_lastCreatedUnit=CreateUnit(p,'h027',x[1],y[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set facing=AngleBetweenXY(x[1],y[1],x[0],y[0])call SetUnitFacing(picked[i],facing)
set x[1]=PolarX(x[0],r,facing)set y[1]=PolarY(y[0],r,facing)call DestroyTreeXY(x[1],y[1],200.)set bj_lastCreatedUnit=CreateUnit(p,'h027',x[1],y[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitMoveXY2(picked[i],x[1],y[1])call SetUnitAnimation(picked[i],"spell two")
call SetUnitTimeScalePercent(picked[i],150.)
endifendloopcall DestroyGroup(g)
set g=nullcall SoundPatch_Spell(udg_soundPatch_Naruto+"\\Naruto\\Rasengan.wav",x[0],y[0])call TriggerSleepAction(.1)set bj_lastCreatedUnit=CreateUnit(p,'h029',x[0],y[0],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.4)set bj_lastCreatedUnit=CreateUnit(p,'h028',x[0],y[0],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)if(GetUnitState(u[1],UNIT_STATE_LIFE)>0)then
call UnitAddAbility(bj_lastCreatedUnit,'A04P')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A04P',GetUnitAbilityLevel(u[0],JitonRasengan__skId))call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u[1])endifloop
exitwhen(i<0)call PauseSystem(picked[i],false)call SetUnitTimeScalePercent(picked[i],100.)
call IssueTargetOrderById(picked[i],$D000F,u[1])
set picked[i]=nullset i=i-1endloopset u[0]=nullset u[1]=nullset p=nullendfunctionfunction JitonRasengan__Init takes nothing returns nothingset gg_trg_Jiton_Rasengan=CreateTrigger()call TriggerAddCondition(gg_trg_Jiton_Rasengan,Condition(function JitonRasengan__Cond))call TriggerAddAction(gg_trg_Jiton_Rasengan,function JitonRasengan__Act)
endfunctionfunction Trig_MrsC_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A04O')endfunctionfunction Trig_MrsC_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local unit target=GetSpellTargetUnit()local unit pickedlocal player p=GetOwningPlayer(u)local effect array efflocal real x=GetUnitX(target)local real y=GetUnitY(target)local real dist=1000.local integer i=0local group gset eff[i]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdx",u,"hand right")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdx",u,"hand right"))set g=CreateGroupUnitType('U000',p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(GetUnitAbilityLevel(picked,'B00L')>0)and(DistanceBetweenXY(x,y,GetUnitX(picked),GetUnitY(picked))<dist)thenset i=i+1set eff[i]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdx",picked,"hand right")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdx",picked,"hand right"))call IssueImmediateOrderById(picked,$D0004)call SetUnitAnimation(picked,"stand ready")endifendloopcall DestroyGroup(g)
set g=nullset u=nullset target=nullcall SetPlayerAbilityAvailable(p,'A04O',false)call TriggerSleepAction(.1)call SetPlayerAbilityAvailable(p,'A04O',true)set p=nullloop
exitwhen(i<0)call DestroyEffect(eff[i])set eff[i]=nullset i=i-1endloopendfunctionfunction InitTrig_Jiton_RasenganC takes nothing returns nothingset gg_trg_Jiton_RasenganC=CreateTrigger()call TriggerAddCondition(gg_trg_Jiton_RasenganC,Condition(function Trig_MrsC_Conditions))call TriggerAddAction(gg_trg_Jiton_RasenganC,function Trig_MrsC_Actions)
endfunctionfunction KageBushin__summonCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetSummonedUnit(),KageBushin__cloneBuffId)>0)
endfunctionfunction KageBushin__summonAct takes nothing returns nothing
local unit sumUnit=GetSummonedUnit()
local player p=GetOwningPlayer(sumUnit)local real x
local real y
set KageBushin__i=KageBushin__i+1if(KageBushin__i==3)then
call DisableTrigger(KageBushin__summonTrg)set x=GetUnitX(KageBushin__u)set y=GetUnitY(KageBushin__u)call SoundPatch_Spell("Sounds\\ShadowClone.wav",x,y)
call TriggerSleepAction(.0)call SetUnitAnimation(KageBushin__u,"spell three")set x=GetUnitX(KageBushin__u)set y=GetUnitY(KageBushin__u)set bj_lastCreatedUnit=CreateUnit(p,'h02C',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set bj_lastCreatedUnit=CreateUnit(p,'h0AO',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set KageBushin__u=nullelse
call TriggerSleepAction(.0)endifcall SetUnitAnimation(sumUnit,"spell three")
call SelectUnitAddForPlayer(sumUnit,p)set x=GetUnitX(sumUnit)set y=GetUnitY(sumUnit)set bj_lastCreatedUnit=CreateUnit(p,'h02C',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set bj_lastCreatedUnit=CreateUnit(p,'h0AO',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set sumUnit=null
set p=nullendfunctionfunction KageBushin__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==KageBushin__skId)endfunctionfunction KageBushin__Act takes nothing returns nothingset KageBushin__u=GetTriggerUnit()set KageBushin__i=0call DisplayText("Kage Bunshin no Jutsu",KageBushin__u,.023,true,$FF,$FF,$FF,$FF)call EnableTrigger(KageBushin__summonTrg)call TriggerSleepAction(1.)if(IsTriggerEnabled(KageBushin__summonTrg))thencall DisableTrigger(KageBushin__summonTrg)set KageBushin__u=nullendifendfunctionfunction KageBushin__Init takes nothing returns nothingset gg_trg_Kage_Bushin=CreateTrigger()call TriggerAddCondition(gg_trg_Kage_Bushin,Condition(function KageBushin__Cond))call TriggerAddAction(gg_trg_Kage_Bushin,function KageBushin__Act)set KageBushin__summonTrg=CreateTrigger()call DisableTrigger(KageBushin__summonTrg)call TriggerRegisterAnyUnitEventBJ(KageBushin__summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(KageBushin__summonTrg,Condition(function KageBushin__summonCond))call TriggerAddAction(KageBushin__summonTrg,function KageBushin__summonAct)endfunctionfunction BijudamaRasenshuriken__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==BijudamaRasenshuriken__skId)
endfunctionfunction BijudamaRasenshuriken__ActL2 takes nothing returns nothinglocal unit targetlocal unit pickedlocal real array xlocal real array ylocal real facinglocal integer jlocal integer klocal integer id
local group gset j=BijudamaRasenshuriken__countif(BijudamaRasenshuriken__i>0)thenset BijudamaRasenshuriken__i=BijudamaRasenshuriken__i-1set k=0loop
exitwhen(j<1)if(BijudamaRasenshuriken__u[j]!=null)thenset id=GetHandleId(BijudamaRasenshuriken__u[j])set target=LoadUnitHandle(Naruto_RikenHash,id,0)
set x[0]=GetUnitX(BijudamaRasenshuriken__u[j])set y[0]=GetUnitY(BijudamaRasenshuriken__u[j])set x[1]=GetUnitX(target)set y[1]=GetUnitY(target)if(DistanceBetweenXY(x[0],y[0],x[1],y[1])<=BijudamaRasenshuriken__speed)then
call DestroyTreeXY(x[1],y[1],BijudamaRasenshuriken__garea)set g=CreateGroupXY2(x[1],y[1],BijudamaRasenshuriken__garea,BijudamaRasenshuriken__p,BijudamaRasenshuriken__gcheck)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call GroupAddUnit(BijudamaRasenshuriken__gcheck,picked)call UnitDamageTarget(BijudamaRasenshuriken__u[0],picked,BijudamaRasenshuriken__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endloopcall DestroyGroup(g)
set g=nullset bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h053',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h053',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h0CC',x[1],y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.2,1.2,1.2)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,50,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h02L',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)if(GetUnitState(target,UNIT_STATE_LIFE)>0)thencall UnitAddAbility(bj_lastCreatedUnit,'A0FN')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,target)endifcall FlushChildHashtable(Naruto_RikenHash,id)call RemoveUnit(BijudamaRasenshuriken__u[j])
set BijudamaRasenshuriken__u[j]=null
set k=k+1else
set facing=GetUnitFacing(BijudamaRasenshuriken__u[j])call SetUnitX(BijudamaRasenshuriken__u[j],PolarX(x[0],BijudamaRasenshuriken__speed,facing))call SetUnitY(BijudamaRasenshuriken__u[j],PolarY(y[0],BijudamaRasenshuriken__speed,facing))call SetUnitFacing(BijudamaRasenshuriken__u[j],AngleBetweenXY(x[0],y[0],x[1],y[1]))endifset target=nullelse
set k=k+1endifset j=j-1endloopif(k==BijudamaRasenshuriken__count)thenset BijudamaRasenshuriken__i=0endifelse
call PauseTimer(BijudamaRasenshuriken__t)call DestroyTimer(BijudamaRasenshuriken__t)set BijudamaRasenshuriken__t=nullcall DestroyGroup(BijudamaRasenshuriken__gcheck)
set BijudamaRasenshuriken__gcheck=nullloop
exitwhen(j<1)if(BijudamaRasenshuriken__u[j]!=null)thenset id=GetHandleId(BijudamaRasenshuriken__u[j])call FlushChildHashtable(Naruto_RikenHash,id)call RemoveUnit(BijudamaRasenshuriken__u[j])
set BijudamaRasenshuriken__u[j]=null
endifset j=j-1endloopset BijudamaRasenshuriken__u[0]=null
set BijudamaRasenshuriken__p=nullendifendfunctionfunction BijudamaRasenshuriken__ActL1 takes nothing returns nothinglocal real x
local real y
local real r
local integer jlocal integer id
if(BijudamaRasenshuriken__i<21)thenset BijudamaRasenshuriken__i=BijudamaRasenshuriken__i+1set r=(.5+(I2R(BijudamaRasenshuriken__i)*.075))set j=BijudamaRasenshuriken__countloop
exitwhen(j<1)call SetUnitScale(BijudamaRasenshuriken__u[j],r,r,r)
set j=j-1endloopelse
call PauseTimer(BijudamaRasenshuriken__t)call DestroyTimer(BijudamaRasenshuriken__t)set BijudamaRasenshuriken__t=nullset j=BijudamaRasenshuriken__countloop
exitwhen(j<1)set bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h01J',GetUnitX(BijudamaRasenshuriken__u[j]),GetUnitY(BijudamaRasenshuriken__u[j]),GetUnitFacing(BijudamaRasenshuriken__u[j]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitScale(bj_lastCreatedUnit,.5,.5,.5)call SetUnitFlyHeight(bj_lastCreatedUnit,270.,.0)set j=j-1endloopset BijudamaRasenshuriken__gcheck=CreateGroup()set BijudamaRasenshuriken__i=80set BijudamaRasenshuriken__t=CreateTimer()call TimerStart(BijudamaRasenshuriken__t,.04,true,function BijudamaRasenshuriken__ActL2)
endifendfunctionfunction BijudamaRasenshuriken__Act takes nothing returns nothinglocal unit pickedlocal real array xlocal real array ylocal real array rlocal group gset BijudamaRasenshuriken__u[0]=GetTriggerUnit()
set BijudamaRasenshuriken__p=GetOwningPlayer(BijudamaRasenshuriken__u[0])set BijudamaRasenshuriken__dmg=(500.+((3.+GetUnitAbilityLevel(BijudamaRasenshuriken__u[0],BijudamaRasenshuriken__skId))*GetHeroStr(BijudamaRasenshuriken__u[0],true)))call DisplayText("Bijudama Rasenshuriken",BijudamaRasenshuriken__u[0],.023,false,$FF,$FF,$FF,$FF)set x[0]=GetUnitX(BijudamaRasenshuriken__u[0])set y[0]=GetUnitY(BijudamaRasenshuriken__u[0])set BijudamaRasenshuriken__count=0set g=CreateGroupXYHero(x[0],y[0],2000.,BijudamaRasenshuriken__p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set BijudamaRasenshuriken__count=BijudamaRasenshuriken__count+1set r[0]=GetRandomReal(-500,500)
set r[1]=GetRandomReal(0,360)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set BijudamaRasenshuriken__u[BijudamaRasenshuriken__count]=CreateUnit(BijudamaRasenshuriken__p,'h02D',x[1],y[1],r[1])call SetUnitScale(BijudamaRasenshuriken__u[BijudamaRasenshuriken__count],.4,.4,.4)set bj_lastCreatedUnit=CreateUnit(BijudamaRasenshuriken__p,'h01L',x[1],y[1],r[1])call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call SetUnitFlyHeight(bj_lastCreatedUnit,300.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SaveUnitHandle(Naruto_RikenHash,(GetHandleId(BijudamaRasenshuriken__u[BijudamaRasenshuriken__count])),0,picked)
endloopcall DestroyGroup(g)
set g=nullif(BijudamaRasenshuriken__count>0)thenset BijudamaRasenshuriken__i=0set BijudamaRasenshuriken__t=CreateTimer()call TimerStart(BijudamaRasenshuriken__t,.06,true,function BijudamaRasenshuriken__ActL1)
else
set BijudamaRasenshuriken__u[0]=null
set BijudamaRasenshuriken__p=nullendifendfunctionfunction BijudamaRasenshuriken__Init takes nothing returns nothingset gg_trg_Biju_Rasenshuriken=CreateTrigger()call TriggerAddCondition(gg_trg_Biju_Rasenshuriken,Condition(function BijudamaRasenshuriken__Cond))call TriggerAddAction(gg_trg_Biju_Rasenshuriken,function BijudamaRasenshuriken__Act)
endfunctionfunction Trig_Cbr_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A04S')endfunctionfunction Trig_Cbr_Actions takes nothing returns nothinglocal integer ReLoc=2set udg_Cbr_Unit[0]=GetTriggerUnit()
set udg_Cbr_Unit[1]=GetSpellTargetUnit()
call Dynamic_Sound("Sounds\\ChouBijuu.mp3")call SetUnitInvulnerable(udg_Cbr_Unit[0],true)call SetUnitInvulnerable(udg_Cbr_Unit[1],true)call PauseSystem(udg_Cbr_Unit[0],true)call PauseSystem(udg_Cbr_Unit[1],true)call SetUnitAnimation(udg_Cbr_Unit[0],"spell four")call DisplayText("Senpo Cho Biju Rasenshuriken",udg_Cbr_Unit[0],.023,false,$DC,5,5,$FF)set udg_Cbr_Point[0]=GetUnitLoc(udg_Cbr_Unit[0])
set udg_Cbr_Point[1]=GetUnitLoc(udg_Cbr_Unit[1])
set udg_Cbr_Real[0]=AngleBetweenPoints(udg_Cbr_Point[0],udg_Cbr_Point[1])set udg_Cbr_Point[2]=PolarProjectionBJ(udg_Cbr_Point[0],110.,udg_Cbr_Real[0])set udg_Cbr_Point[3]=PolarProjectionBJ(udg_Cbr_Point[0],-110.,udg_Cbr_Real[0])set udg_Cbr_Point[4]=PolarProjectionBJ(udg_Cbr_Point[0],-50.,udg_Cbr_Real[0])set udg_Cbr_Point[5]=PolarProjectionBJ(udg_Cbr_Point[0],-220.,udg_Cbr_Real[0])set udg_Cbr_Point[6]=PolarProjectionBJ(udg_Cbr_Point[2],170.,(udg_Cbr_Real[0]+90.))set udg_Cbr_Point[7]=PolarProjectionBJ(udg_Cbr_Point[2],170.,(udg_Cbr_Real[0]-90.))set udg_Cbr_Point[8]=PolarProjectionBJ(udg_Cbr_Point[3],140.,(udg_Cbr_Real[0]+90.))set udg_Cbr_Point[9]=PolarProjectionBJ(udg_Cbr_Point[3],140.,(udg_Cbr_Real[0]-90.))set udg_Cbr_Point[$A]=PolarProjectionBJ(udg_Cbr_Point[4],330.,(udg_Cbr_Real[0]+90.))
set udg_Cbr_Point[$B]=PolarProjectionBJ(udg_Cbr_Point[4],330.,(udg_Cbr_Real[0]-90.))
set udg_Cbr_Point[$C]=PolarProjectionBJ(udg_Cbr_Point[5],260.,(udg_Cbr_Real[0]+90.))
set udg_Cbr_Point[$D]=PolarProjectionBJ(udg_Cbr_Point[5],260.,(udg_Cbr_Real[0]-90.))
call CreateNUnitsAtLocFacingLocBJ(1,'h02G',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[0],udg_Cbr_Point[1])loop
exitwhen ReLoc>$Dif(ReLoc>5)thencall CreateNUnitsAtLocFacingLocBJ(1,'h02F',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[ReLoc],udg_Cbr_Point[1])call SetUnitAnimation(bj_lastCreatedUnit,"spell four")call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,'A04T')call CreateNUnitsAtLoc(1,'h02C',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[ReLoc],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h02G',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[ReLoc],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)if(ReLoc==6)then
call SetUnitVertexColorBJ(bj_lastCreatedUnit,30,60,'d',0)elseif(ReLoc==7)then
call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',40,60,0)elseif(ReLoc==8)then
call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',60,60,0)elseif(ReLoc==9)then
call SetUnitVertexColorBJ(bj_lastCreatedUnit,19,'d',19,0)elseif(ReLoc==$A)thencall SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',19,'d',0)elseif(ReLoc==$B)thencall SetUnitVertexColorBJ(bj_lastCreatedUnit,19,19,78,0)
elseif(ReLoc==$C)thencall SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',7,7,0)elseif(ReLoc==$D)thencall SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',30,3,0)
endifendifcall RemoveLocation(udg_Cbr_Point[ReLoc])set udg_Cbr_Point[ReLoc]=nullset ReLoc=ReLoc+1endloopcall Dynamic_GroupShake(GetLocationX(udg_Cbr_Point[0]),GetLocationY(udg_Cbr_Point[0]),udg_CameraShakeTime,6,udg_CameraArea,null)
call RemoveLocation(udg_Cbr_Point[0])set udg_Cbr_Point[0]=nullcall RemoveLocation(udg_Cbr_Point[1])set udg_Cbr_Point[1]=nullset ReLoc=0set udg_Cbr_Real[0]=20.set udg_Cbr_Real[1]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A04S',udg_Cbr_Unit[0])))*I2R(GetHeroStatBJ(0,udg_Cbr_Unit[0],false))))call EnableTrigger(gg_trg_CbrS)endfunctionfunction InitTrig_Cbr takes nothing returns nothingset gg_trg_Cbr=CreateTrigger()call TriggerAddCondition(gg_trg_Cbr,Condition(function Trig_Cbr_Conditions))
call TriggerAddAction(gg_trg_Cbr,function Trig_Cbr_Actions)endfunctionfunction Trig_CbrS_Func001Func006A takes nothing returns nothing
set udg_Cbr_Unit[2]=GetEnumUnit()call SetUnitAnimation(udg_Cbr_Unit[2],"spell one")call SetUnitTimeScalePercent(udg_Cbr_Unit[2],150.)set udg_Cbr_Unit[2]=null
endfunctionfunction Trig_CbrS_Func001Func014A takes nothing returns nothing
set udg_Cbr_Unit[2]=GetEnumUnit()set udg_Cbr_Point[3]=GetUnitLoc(udg_Cbr_Unit[2])
call CreateNUnitsAtLoc(1,'h02C',GetOwningPlayer(udg_Cbr_Unit[2]),udg_Cbr_Point[3],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Cbr_Point[3])set udg_Cbr_Point[3]=nullcall RemoveUnit(udg_Cbr_Unit[2])
set udg_Cbr_Unit[2]=null
endfunctionfunction Trig_CbrS_Func001Func018A takes nothing returns nothing
call SetUnitScalePercent(GetEnumUnit(),udg_Cbr_Real[0],udg_Cbr_Real[0],udg_Cbr_Real[0])endfunctionfunction Trig_CbrS_Func001C takes nothing returns booleanreturn(udg_Cbr_Real[0]<180.)
endfunctionfunction Trig_CbrS_Actions takes nothing returns nothing
if(Trig_CbrS_Func001C())then
set udg_Cbr_Group[0]=GetUnitsOfTypeIdAll('h02G')
call ForGroupBJ(udg_Cbr_Group[0],function Trig_CbrS_Func001Func018A)
call DestroyGroup(udg_Cbr_Group[0])set udg_Cbr_Group[0]=nullset udg_Cbr_Real[0]=(udg_Cbr_Real[0]+2.5)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitAnimation(udg_Cbr_Unit[0],"spell one")call SetUnitTimeScalePercent(udg_Cbr_Unit[0],150.)set udg_Cbr_Group[0]=GetUnitsOfTypeIdAll('h02F')
call ForGroupBJ(udg_Cbr_Group[0],function Trig_CbrS_Func001Func006A)
call DestroyGroup(udg_Cbr_Group[0])set udg_Cbr_Group[0]=nullcall TriggerSleepAction(.05)
set udg_Cbr_Real[0]=9.call EnableTrigger(gg_trg_CbrL)call TriggerSleepAction(.5)set udg_Cbr_Group[0]=GetUnitsOfTypeIdAll('h02F')
call ForGroupBJ(udg_Cbr_Group[0],function Trig_CbrS_Func001Func014A)
call DestroyGroup(udg_Cbr_Group[0])set udg_Cbr_Group[0]=nullendifendfunctionfunction InitTrig_CbrS takes nothing returns nothing
set gg_trg_CbrS=CreateTrigger()call DisableTrigger(gg_trg_CbrS)
call TriggerRegisterTimerEventPeriodic(gg_trg_CbrS,.04)call TriggerAddAction(gg_trg_CbrS,function Trig_CbrS_Actions)endfunctionfunction Trig_CbrL_Func002Func003A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_CbrL_Func002Func037Func005C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Cbr_Point[0],udg_Cbr_Point[1])<72.)
endfunctionfunction Trig_CbrL_Func002Func037A takes nothing returns nothing
set udg_Cbr_Unit[2]=GetEnumUnit()set udg_Cbr_Point[0]=GetUnitLoc(udg_Cbr_Unit[2])
set udg_Cbr_Point[1]=GetUnitLoc(udg_Cbr_Unit[1])
set udg_Cbr_Point[2]=PolarProjectionBJ(udg_Cbr_Point[0],70.,AngleBetweenPoints(udg_Cbr_Point[0],udg_Cbr_Point[1]))if(Trig_CbrL_Func002Func037Func005C())thenset udg_Cbr_Real[0]=(udg_Cbr_Real[0]-1.)
else
call SetUnitPositionLoc(udg_Cbr_Unit[2],udg_Cbr_Point[2])endifcall RemoveLocation(udg_Cbr_Point[0])set udg_Cbr_Point[0]=nullcall RemoveLocation(udg_Cbr_Point[1])set udg_Cbr_Point[1]=nullcall RemoveLocation(udg_Cbr_Point[2])set udg_Cbr_Point[2]=nullset udg_Cbr_Unit[2]=null
endfunctionfunction Trig_CbrL_Func002C takes nothing returns booleanreturn(udg_Cbr_Real[0]>7.)endfunctionfunction Trig_CbrL_Actions takes nothing returns nothing
local integer ReLocif(Trig_CbrL_Func002C())then
set udg_Cbr_Group[1]=GetUnitsOfTypeIdAll('h02G')
call ForGroupBJ(udg_Cbr_Group[1],function Trig_CbrL_Func002Func037A)
call DestroyGroup(udg_Cbr_Group[1])set udg_Cbr_Group[1]=nullelse
call DisableTrigger(GetTriggeringTrigger())set udg_Cbr_Group[0]=GetUnitsOfTypeIdAll('h02G')
call ForGroupBJ(udg_Cbr_Group[0],function Trig_CbrL_Func002Func003A)
call DestroyGroup(udg_Cbr_Group[0])set udg_Cbr_Group[0]=nullcall Dynamic_Sound("Sounds\\Explosion.mp3")set ReLoc=0set udg_Cbr_Point[0]=GetUnitLoc(udg_Cbr_Unit[1])
call Dynamic_GroupShake(GetLocationX(udg_Cbr_Point[0]),GetLocationY(udg_Cbr_Point[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)loop
exitwhen ReLoc>2
call CreateNUnitsAtLoc(1,'h02B',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[0],bj_UNIT_FACING)set udg_Cbr_Unit[2]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(3.,'BTLF',udg_Cbr_Unit[2])
call SetUnitScalePercent(udg_Cbr_Unit[2],450.,450.,450.)
if(ReLoc==0)then
call SetUnitVertexColorBJ(udg_Cbr_Unit[2],'d',19,'d',0)else
call SetUnitVertexColorBJ(udg_Cbr_Unit[2],0,'d','d',0)endifset udg_Cbr_Unit[2]=null
set ReLoc=ReLoc+1endloopcall CreateNUnitsAtLoc(1,'h01W',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,30.)
call CreateNUnitsAtLoc(1,'h01X',GetOwningPlayer(udg_Cbr_Unit[0]),udg_Cbr_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call EnumDestructablesInCircleBJ(600.,udg_Cbr_Point[0],function TreeKiller)call RemoveLocation(udg_Cbr_Point[0])set udg_Cbr_Point[0]=nullcall SetUnitTimeScalePercent(udg_Cbr_Unit[0],100.)call PauseSystem(udg_Cbr_Unit[0],false)call PauseSystem(udg_Cbr_Unit[1],false)call SetUnitInvulnerable(udg_Cbr_Unit[0],false)call SetUnitInvulnerable(udg_Cbr_Unit[1],false)call SetUnitAnimation(udg_Cbr_Unit[0],"stand")call DisplayText(I2S(R2I(udg_Cbr_Real[1]))+"!",udg_Cbr_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Cbr_Unit[0],udg_Cbr_Unit[1],udg_Cbr_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Cbr_Unit[0]=null
set udg_Cbr_Unit[1]=null
set udg_Cbr_Real[0]=.0set udg_Cbr_Real[1]=.0endifendfunctionfunction InitTrig_CbrL takes nothing returns nothing
set gg_trg_CbrL=CreateTrigger()call DisableTrigger(gg_trg_CbrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CbrL,.04)call TriggerAddAction(gg_trg_CbrL,function Trig_CbrL_Actions)endfunctionfunction AIRukia__isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIRukia__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIRukia__isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIRukia__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIRukia__Cond takes nothing returns boolean
if(not(AIRukia__isAtked()or AIRukia__isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIRukia__Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIRukia__AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIRukia__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A05B')call SelectHeroSkill(mySelf,'A059')call SelectHeroSkill(mySelf,'A057')call SelectHeroSkill(mySelf,'A055')call SelectHeroSkill(mySelf,'A054')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueTargetOrderById(mySelf,$D0270,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D00FA,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D0080)call IssueImmediateOrderById(mySelf,$D00D7)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIRukia__AINo])endfunctionfunction AIRukia__Init takes nothing returns nothing
set udg_AI_Trig[AIRukia__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIRukia__AINo],Condition(function AIRukia__Cond))call TriggerAddAction(udg_AI_Trig[AIRukia__AINo],function AIRukia__Act)endfunctionfunction Trig_Trs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A054')endfunctionfunction Trig_Trs_Actions takes nothing returns nothingset udg_Trs_Unit[0]=GetTriggerUnit()
set udg_Trs_Point[0]=GetSpellTargetLoc()
set udg_Trs_Point[1]=GetUnitLoc(udg_Trs_Unit[0])
set udg_Trs_Real[0]=AngleBetweenPoints(udg_Trs_Point[1],udg_Trs_Point[0])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[0],bj_UNIT_FACING)set udg_Trs_Unit[1]=bj_lastCreatedUnitset udg_Trs_Point[2]=PolarProjectionBJ(udg_Trs_Point[1],60.,udg_Trs_Real[0])
call CreateNUnitsAtLoc(1,'h02I',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[2],bj_UNIT_FACING)set udg_Trs_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02I',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[2],bj_UNIT_FACING)set udg_Trs_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Trs_Point[0])set udg_Trs_Point[0]=nullcall RemoveLocation(udg_Trs_Point[1])set udg_Trs_Point[1]=nullcall RemoveLocation(udg_Trs_Point[2])set udg_Trs_Point[2]=nullcall DisplayText("Hado #63. Raikoho",udg_Trs_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Trs_Real[1]=BasicDmg_Q(udg_Trs_Unit[0],'A054',1)
set udg_Trs_Int=$Fcall EnableTrigger(gg_trg_TrsL)endfunctionfunction InitTrig_Trs takes nothing returns nothingset gg_trg_Trs=CreateTrigger()call TriggerAddCondition(gg_trg_Trs,Condition(function Trig_Trs_Conditions))
call TriggerAddAction(gg_trg_Trs,function Trig_Trs_Actions)endfunctionfunction Trig_TrsL_Func004Func025002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Trs_Unit[0]))==false)endfunctionfunction Trig_TrsL_Func004Func025002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_TrsL_Func004Func025002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_TrsL_Func004Func025002003001(),Trig_TrsL_Func004Func025002003002())endfunctionfunction Trig_TrsL_Func004Func030A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Trs_Unit[0],GetEnumUnit(),udg_Trs_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction Trig_TrsL_Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Trs_Point[0],udg_Trs_Point[1])>82.)and(udg_Trs_Int>0)endfunctionfunction Trig_TrsL_Actions takes nothing returns nothing
set udg_Trs_Point[0]=GetUnitLoc(udg_Trs_Unit[1])
set udg_Trs_Point[1]=GetUnitLoc(udg_Trs_Unit[2])
if(Trig_TrsL_Func004C())then
call RemoveLocation(udg_Trs_Point[0])set udg_Trs_Point[0]=nullset udg_Trs_Point[2]=PolarProjectionBJ(udg_Trs_Point[1],82.,udg_Trs_Real[0])
call SetUnitPositionLoc(udg_Trs_Unit[2],udg_Trs_Point[2])call SetUnitPositionLoc(udg_Trs_Unit[3],udg_Trs_Point[2])call CreateNUnitsAtLoc(1,'h02J',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[2],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(.2,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h02J',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[2],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(.2,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h02J',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[2],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(.2,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Trs_Point[1])set udg_Trs_Point[1]=nullcall RemoveLocation(udg_Trs_Point[2])set udg_Trs_Point[2]=nullset udg_Trs_Int=(udg_Trs_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call CreateNUnitsAtLoc(1,'h02K',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h02L',GetOwningPlayer(udg_Trs_Unit[0]),udg_Trs_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call EnumDestructablesInCircleBJ(400.,udg_Trs_Point[0],function TreeKiller)set udg_Trs_Group=GetUnitsInRangeOfLocMatching(400.,udg_Trs_Point[0],Condition(function Trig_TrsL_Func004Func025002003))
call RemoveLocation(udg_Trs_Point[0])set udg_Trs_Point[0]=nullcall RemoveLocation(udg_Trs_Point[1])set udg_Trs_Point[1]=nullcall ForGroupBJ(udg_Trs_Group,function Trig_TrsL_Func004Func030A)call DestroyGroup(udg_Trs_Group)
set udg_Trs_Group=nullcall RemoveUnit(udg_Trs_Unit[1])
call RemoveUnit(udg_Trs_Unit[2])
call RemoveUnit(udg_Trs_Unit[3])
set udg_Trs_Unit[0]=null
set udg_Trs_Unit[1]=null
set udg_Trs_Unit[2]=null
set udg_Trs_Unit[3]=null
set udg_Trs_Real[0]=.0set udg_Trs_Real[1]=.0set udg_Trs_Int=0endifendfunctionfunction InitTrig_TrsL takes nothing returns nothing
set gg_trg_TrsL=CreateTrigger()call DisableTrigger(gg_trg_TrsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TrsL,.04)call TriggerAddAction(gg_trg_TrsL,function Trig_TrsL_Actions)endfunctionfunction Trig_Smt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A055')endfunctionfunction Trig_Smt_Func011002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Smt_Unit[0]))==false)endfunctionfunction Trig_Smt_Func011002003002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('Avul',GetFilterUnit())==0)endfunctionfunction Trig_Smt_Func011002003002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Smt_Func011002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Smt_Func011002003002001(),Trig_Smt_Func011002003002002())endfunctionfunction Trig_Smt_Func011002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Smt_Func011002003001(),Trig_Smt_Func011002003002())endfunctionfunction Trig_Smt_Func014Func003Func001C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Smt_Unit[1]))or(UnitHasBuffBJ(udg_Smt_Unit[1],'B006'))endfunctionfunction Trig_Smt_Func014Func003C takes nothing returns booleanreturn(Trig_Smt_Func014Func003Func001C())endfunctionfunction Trig_Smt_Func014A takes nothing returns nothing
set udg_Smt_Unit[1]=GetEnumUnit()call UnitDamageTargetBJ(udg_Smt_Unit[0],udg_Smt_Unit[1],udg_Smt_Real,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_Smt_Func014Func003C())thenelse
set udg_Smt_Point=GetUnitLoc(udg_Smt_Unit[1])call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Smt_Unit[0]),udg_Smt_Point,bj_UNIT_FACING)set udg_Smt_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Smt_Point)set udg_Smt_Point=nullcall UnitAddAbility(udg_Smt_Unit[2],'A056')call IssueTargetOrderById(udg_Smt_Unit[2],$D007F,udg_Smt_Unit[1])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Smt_Unit[2])
set udg_Smt_Unit[2]=null
endifset udg_Smt_Unit[1]=null
endfunctionfunction Trig_Smt_Actions takes nothing returns nothingset udg_Smt_Unit[0]=GetTriggerUnit()
set udg_Smt_Real=(300.+(100.*I2R(GetUnitAbilityLevelSwapped('A055',udg_Smt_Unit[0]))))set udg_Smt_Point=GetUnitLoc(udg_Smt_Unit[0])call AddSpecialEffectLocBJ(udg_Smt_Point,"IceNova2.mdx")
call DestroyEffect(bj_lastCreatedEffect)
call CreateNUnitsAtLoc(1,'h02M',GetOwningPlayer(udg_Smt_Unit[0]),udg_Smt_Point,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(7.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h02N',GetOwningPlayer(udg_Smt_Unit[0]),udg_Smt_Point,GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call EnumDestructablesInCircleBJ(350.,udg_Smt_Point,function TreeKiller)
set udg_Smt_Group=GetUnitsInRangeOfLocMatching(350.,udg_Smt_Point,Condition(function Trig_Smt_Func011002003))call RemoveLocation(udg_Smt_Point)set udg_Smt_Point=nullcall ForGroupBJ(udg_Smt_Group,function Trig_Smt_Func014A)call DestroyGroup(udg_Smt_Group)
set udg_Smt_Group=nullcall DisplayText("Some no mai, Tsukishiro",udg_Smt_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Rukia\\TsukiShiro.wav",GetUnitX(udg_Smt_Unit[0]),GetUnitY(udg_Smt_Unit[0]))set udg_Smt_Unit[0]=null
set udg_Smt_Real=.0endfunctionfunction InitTrig_Smt takes nothing returns nothingset gg_trg_Smt=CreateTrigger()call TriggerAddCondition(gg_trg_Smt,Condition(function Trig_Smt_Conditions))
call TriggerAddAction(gg_trg_Smt,function Trig_Smt_Actions)endfunctionfunction Trig_Hkr_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A057')endfunctionfunction Trig_Hkr_Actions takes nothing returns nothingset udg_Hkr_Unit[0]=GetTriggerUnit()
call SetUnitTimeScalePercent(udg_Hkr_Unit[0],.0)
set udg_Hkr_Point[0]=GetSpellTargetLoc()
set udg_Hkr_Point[1]=GetUnitLoc(udg_Hkr_Unit[0])
call TriggerSleepAction(.01)
set udg_Hkr_Real[0]=AngleBetweenPoints(udg_Hkr_Point[1],udg_Hkr_Point[0])set udg_Hkr_Point[2]=PolarProjectionBJ(udg_Hkr_Point[1],60.,-180.)call CreateTextTagLocBJ("||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||",udg_Hkr_Point[2],270.,6.,100.,'d','d',0)set udg_Hkr_Text[0]=bj_lastCreatedTextTagcall CreateTextTagLocBJ("(null)",udg_Hkr_Point[2],270.,6.,.0,100.,.0,0)set udg_Hkr_Text[1]=bj_lastCreatedTextTagcall CreateNUnitsAtLoc(1,'h02R',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],bj_UNIT_FACING)set udg_Hkr_Unit[1]=bj_lastCreatedUnitcall SelectUnitForPlayerSingle(udg_Hkr_Unit[1],GetOwningPlayer(udg_Hkr_Unit[0]))
call UnitAddAbility(udg_Hkr_Unit[1],'A058')call CreateNUnitsAtLoc(1,'h02O',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],bj_UNIT_FACING)set udg_Hkr_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02P',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],GetRandomReal(0,360))set udg_Hkr_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02P',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],GetRandomReal(0,360))set udg_Hkr_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Hkr_Point[0])set udg_Hkr_Point[0]=nullcall RemoveLocation(udg_Hkr_Point[1])set udg_Hkr_Point[1]=nullcall RemoveLocation(udg_Hkr_Point[2])set udg_Hkr_Point[2]=nullcall SetUnitTimeScalePercent(udg_Hkr_Unit[2],50.)call PauseSystem(udg_Hkr_Unit[0],true)call DisplayText("Tsugi no mai",udg_Hkr_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Hkr_Int=1set udg_Hkr_Real[1]=(300.+(200.*I2R(GetUnitAbilityLevelSwapped('A057',udg_Hkr_Unit[0]))))call EnableTrigger(gg_trg_HkrC)call EnableTrigger(gg_trg_HkrCancel)
endfunctionfunction InitTrig_Hkr takes nothing returns nothingset gg_trg_Hkr=CreateTrigger()call TriggerAddCondition(gg_trg_Hkr,Condition(function Trig_Hkr_Conditions))
call TriggerAddAction(gg_trg_Hkr,function Trig_Hkr_Actions)endfunctionfunction Trig_HkrC_Func001Func011C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Hkr_Unit[0]))and(udg_Hkr_Bool==false)endfunctionfunction Trig_HkrC_Func001C takes nothing returns booleanreturn(udg_Hkr_Bool==false)and(udg_Hkr_Int<70)and(IsUnitAliveBJ(udg_Hkr_Unit[0]))endfunctionfunction Trig_HkrC_Actions takes nothing returns nothing
if(Trig_HkrC_Func001C())then
set udg_Hkr_String=(udg_Hkr_String+"||")
call SetTextTagTextBJ(udg_Hkr_Text[1],udg_Hkr_String,6.)
set udg_Hkr_Int=(udg_Hkr_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_HkrCancel)call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Hkr_Unit[2])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Hkr_Unit[3])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Hkr_Unit[4])
call SetUnitAnimation(udg_Hkr_Unit[3],"death")call SetUnitAnimation(udg_Hkr_Unit[4],"death")call SetUnitTimeScalePercent(udg_Hkr_Unit[0],100.)set udg_Hkr_Int=0if(Trig_HkrC_Func001Func011C())thencall DisplayText("Hakuren",udg_Hkr_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Rukia\\Hakuren.wav",GetUnitX(udg_Hkr_Unit[0]),GetUnitY(udg_Hkr_Unit[0]))call UnitRemoveAbility(udg_Hkr_Unit[1],'A058')call SelectUnitForPlayerSingle(udg_Hkr_Unit[0],GetOwningPlayer(udg_Hkr_Unit[0]))
set udg_Hkr_String=(udg_Hkr_String+"|")call SetTextTagTextBJ(udg_Hkr_Text[1],udg_Hkr_String,6.)
call TriggerSleepAction(.01)
set udg_Hkr_Unit[2]=null
set udg_Hkr_Unit[3]=null
set udg_Hkr_Unit[4]=null
call PauseSystem(udg_Hkr_Unit[0],false)call EnableTrigger(gg_trg_HkrL)else
call SetUnitTimeScalePercent(udg_Hkr_Unit[2],300.)call PauseSystem(udg_Hkr_Unit[0],false)call SelectUnitForPlayerSingle(udg_Hkr_Unit[0],GetOwningPlayer(udg_Hkr_Unit[0]))
call RemoveUnit(udg_Hkr_Unit[1])
set udg_Hkr_Unit[0]=null
set udg_Hkr_Unit[1]=null
set udg_Hkr_Unit[2]=null
set udg_Hkr_Unit[3]=null
set udg_Hkr_Unit[4]=null
set udg_Hkr_Real[0]=.0set udg_Hkr_Real[1]=.0set udg_Hkr_Bool=falseendifcall SetTextTagPermanentBJ(udg_Hkr_Text[0],false)call SetTextTagLifespanBJ(udg_Hkr_Text[0],.02)call SetTextTagPermanentBJ(udg_Hkr_Text[1],false)call SetTextTagLifespanBJ(udg_Hkr_Text[1],.02)call DestroyTextTag(udg_Hkr_Text[0])
set udg_Hkr_Text[0]=null
call DestroyTextTag(udg_Hkr_Text[1])
set udg_Hkr_Text[1]=null
set udg_Hkr_String=""endifendfunctionfunction InitTrig_HkrC takes nothing returns nothing
set gg_trg_HkrC=CreateTrigger()call DisableTrigger(gg_trg_HkrC)
call TriggerRegisterTimerEventPeriodic(gg_trg_HkrC,.04)call TriggerAddAction(gg_trg_HkrC,function Trig_HkrC_Actions)endfunctionfunction Trig_HkrL_Func001Func018002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Hkr_Unit[0]))==false)endfunctionfunction Trig_HkrL_Func001Func018002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HkrL_Func001Func018002003002002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Hkr_Group2)==false)
endfunctionfunction Trig_HkrL_Func001Func018002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('Avul',GetFilterUnit())==0)endfunctionfunction Trig_HkrL_Func001Func018002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func018002003002002001(),Trig_HkrL_Func001Func018002003002002002())endfunctionfunction Trig_HkrL_Func001Func018002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HkrL_Func001Func018002003002001(),Trig_HkrL_Func001Func018002003002002())endfunctionfunction Trig_HkrL_Func001Func018002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func018002003001(),Trig_HkrL_Func001Func018002003002())endfunctionfunction Trig_HkrL_Func001Func019Func003Func001C takes nothing returns booleanreturn(UnitHasBuffBJ(udg_Hkr_Unit[2],'B006'))endfunctionfunction Trig_HkrL_Func001Func019Func003C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Hkr_Unit[2]))endfunctionfunction Trig_HkrL_Func001Func019A takes nothing returns nothing
set udg_Hkr_Unit[2]=GetEnumUnit()call UnitDamageTargetBJ(udg_Hkr_Unit[0],udg_Hkr_Unit[2],udg_Hkr_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_HkrL_Func001Func019Func003C())thenelse
if(Trig_HkrL_Func001Func019Func003Func001C())thencall UnitRemoveAbility(udg_Hkr_Unit[2],'B006')endifcall GroupAddUnit(udg_Hkr_Group2,udg_Hkr_Unit[2])set udg_Hkr_Point[4]=GetUnitLoc(udg_Hkr_Unit[2])
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[4],bj_UNIT_FACING)set udg_Hkr_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Hkr_Point[4])set udg_Hkr_Point[4]=nullcall UnitAddAbility(udg_Hkr_Unit[3],'A056')call SetUnitAbilityLevelSwapped('A056',udg_Hkr_Unit[3],2)call IssueTargetOrderById(udg_Hkr_Unit[3],$D007F,udg_Hkr_Unit[2])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Hkr_Unit[3])
set udg_Hkr_Unit[3]=null
endifset udg_Hkr_Unit[2]=null
endfunctionfunction Trig_HkrL_Func001Func022002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Hkr_Unit[0]))==false)endfunctionfunction Trig_HkrL_Func001Func022002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HkrL_Func001Func022002003002002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Hkr_Group2)==false)
endfunctionfunction Trig_HkrL_Func001Func022002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('Avul',GetFilterUnit())==0)endfunctionfunction Trig_HkrL_Func001Func022002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func022002003002002001(),Trig_HkrL_Func001Func022002003002002002())endfunctionfunction Trig_HkrL_Func001Func022002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HkrL_Func001Func022002003002001(),Trig_HkrL_Func001Func022002003002002())endfunctionfunction Trig_HkrL_Func001Func022002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func022002003001(),Trig_HkrL_Func001Func022002003002())endfunctionfunction Trig_HkrL_Func001Func023Func003Func001C takes nothing returns booleanreturn(UnitHasBuffBJ(udg_Hkr_Unit[2],'B006'))endfunctionfunction Trig_HkrL_Func001Func023Func003C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Hkr_Unit[2]))endfunctionfunction Trig_HkrL_Func001Func023A takes nothing returns nothing
set udg_Hkr_Unit[2]=GetEnumUnit()call UnitDamageTargetBJ(udg_Hkr_Unit[0],udg_Hkr_Unit[2],udg_Hkr_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_HkrL_Func001Func023Func003C())thenelse
if(Trig_HkrL_Func001Func023Func003Func001C())thencall UnitRemoveAbility(udg_Hkr_Unit[2],'B006')endifcall GroupAddUnit(udg_Hkr_Group2,udg_Hkr_Unit[2])set udg_Hkr_Point[4]=GetUnitLoc(udg_Hkr_Unit[2])
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[4],bj_UNIT_FACING)set udg_Hkr_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Hkr_Point[4])set udg_Hkr_Point[4]=nullcall UnitAddAbility(udg_Hkr_Unit[3],'A056')call SetUnitAbilityLevelSwapped('A056',udg_Hkr_Unit[3],2)call IssueTargetOrderById(udg_Hkr_Unit[3],$D007F,udg_Hkr_Unit[2])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Hkr_Unit[3])
set udg_Hkr_Unit[3]=null
endifset udg_Hkr_Unit[2]=null
endfunctionfunction Trig_HkrL_Func001Func026002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Hkr_Unit[0]))==false)endfunctionfunction Trig_HkrL_Func001Func026002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HkrL_Func001Func026002003002002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Hkr_Group2)==false)
endfunctionfunction Trig_HkrL_Func001Func026002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('Avul',GetFilterUnit())==0)endfunctionfunction Trig_HkrL_Func001Func026002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func026002003002002001(),Trig_HkrL_Func001Func026002003002002002())endfunctionfunction Trig_HkrL_Func001Func026002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HkrL_Func001Func026002003002001(),Trig_HkrL_Func001Func026002003002002())endfunctionfunction Trig_HkrL_Func001Func026002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HkrL_Func001Func026002003001(),Trig_HkrL_Func001Func026002003002())endfunctionfunction Trig_HkrL_Func001Func027Func003Func001C takes nothing returns booleanreturn(UnitHasBuffBJ(udg_Hkr_Unit[2],'B006'))endfunctionfunction Trig_HkrL_Func001Func027Func003C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Hkr_Unit[2]))endfunctionfunction Trig_HkrL_Func001Func027A takes nothing returns nothing
set udg_Hkr_Unit[2]=GetEnumUnit()call UnitDamageTargetBJ(udg_Hkr_Unit[0],udg_Hkr_Unit[2],udg_Hkr_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_HkrL_Func001Func027Func003C())thenelse
if(Trig_HkrL_Func001Func027Func003Func001C())thencall UnitRemoveAbility(udg_Hkr_Unit[2],'B006')endifcall GroupAddUnit(udg_Hkr_Group2,udg_Hkr_Unit[2])set udg_Hkr_Point[4]=GetUnitLoc(udg_Hkr_Unit[2])
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[4],bj_UNIT_FACING)set udg_Hkr_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Hkr_Point[4])set udg_Hkr_Point[4]=nullcall UnitAddAbility(udg_Hkr_Unit[3],'A056')call SetUnitAbilityLevelSwapped('A056',udg_Hkr_Unit[3],2)call IssueTargetOrderById(udg_Hkr_Unit[3],$D007F,udg_Hkr_Unit[2])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Hkr_Unit[3])
set udg_Hkr_Unit[3]=null
endifset udg_Hkr_Unit[2]=null
endfunctionfunction Trig_HkrL_Func001C takes nothing returns booleanreturn(udg_Hkr_Int<6)and(IsUnitAliveBJ(udg_Hkr_Unit[1]))
endfunctionfunction Trig_HkrL_Actions takes nothing returns nothing
if(Trig_HkrL_Func001C())then
set udg_Hkr_Int=(udg_Hkr_Int+1)set udg_Hkr_Point[0]=GetUnitLoc(udg_Hkr_Unit[1])
set udg_Hkr_Point[1]=PolarProjectionBJ(udg_Hkr_Point[0],(250.*I2R(udg_Hkr_Int)),udg_Hkr_Real[0])
set udg_Hkr_Point[2]=PolarProjectionBJ(udg_Hkr_Point[0],(250.*I2R(udg_Hkr_Int)),(udg_Hkr_Real[0]-20.))set udg_Hkr_Point[3]=PolarProjectionBJ(udg_Hkr_Point[0],(250.*I2R(udg_Hkr_Int)),(udg_Hkr_Real[0]+21.))call CreateNUnitsAtLoc(1,'h02M',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(7.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,300.)call CreateNUnitsAtLoc(1,'h02Q',GetOwningPlayer(udg_Hkr_Unit[0]),udg_Hkr_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetTerrainTypeBJ(udg_Hkr_Point[1],'Isnw',-1,4,0)call SetTerrainTypeBJ(udg_Hkr_Point[2],'Isnw',-1,4,0)call SetTerrainTypeBJ(udg_Hkr_Point[3],'Isnw',-1,4,0)call EnumDestructablesInCircleBJ(350.,udg_Hkr_Point[1],function TreeKiller)call EnumDestructablesInCircleBJ(350.,udg_Hkr_Point[2],function TreeKiller)call EnumDestructablesInCircleBJ(350.,udg_Hkr_Point[3],function TreeKiller)set udg_Hkr_Group=GetUnitsInRangeOfLocMatching(350.,udg_Hkr_Point[1],Condition(function Trig_HkrL_Func001Func018002003))
call ForGroupBJ(udg_Hkr_Group,function Trig_HkrL_Func001Func019A)call DestroyGroup(udg_Hkr_Group)
set udg_Hkr_Group=nullset udg_Hkr_Group=GetUnitsInRangeOfLocMatching(350.,udg_Hkr_Point[2],Condition(function Trig_HkrL_Func001Func022002003))
call ForGroupBJ(udg_Hkr_Group,function Trig_HkrL_Func001Func023A)call DestroyGroup(udg_Hkr_Group)
set udg_Hkr_Group=nullset udg_Hkr_Group=GetUnitsInRangeOfLocMatching(350.,udg_Hkr_Point[3],Condition(function Trig_HkrL_Func001Func026002003))
call ForGroupBJ(udg_Hkr_Group,function Trig_HkrL_Func001Func027A)call DestroyGroup(udg_Hkr_Group)
set udg_Hkr_Group=nullcall RemoveLocation(udg_Hkr_Point[0])set udg_Hkr_Point[0]=nullcall RemoveLocation(udg_Hkr_Point[1])set udg_Hkr_Point[1]=nullcall RemoveLocation(udg_Hkr_Point[2])set udg_Hkr_Point[2]=nullcall RemoveLocation(udg_Hkr_Point[3])set udg_Hkr_Point[3]=nullelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Hkr_Group2)call RemoveUnit(udg_Hkr_Unit[1])
set udg_Hkr_Unit[0]=null
set udg_Hkr_Unit[1]=null
set udg_Hkr_Real[0]=.0set udg_Hkr_Real[1]=.0set udg_Hkr_Int=0endifendfunctionfunction InitTrig_HkrL takes nothing returns nothing
set gg_trg_HkrL=CreateTrigger()call DisableTrigger(gg_trg_HkrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HkrL,.1)call TriggerAddAction(gg_trg_HkrL,function Trig_HkrL_Actions)endfunctionfunction Trig_HkrCancel_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A058')endfunctionfunction Trig_HkrCancel_Actions takes nothing returns nothingset udg_Hkr_Bool=trueendfunctionfunction InitTrig_HkrCancel takes nothing returns nothingset gg_trg_HkrCancel=CreateTrigger()
call DisableTrigger(gg_trg_HkrCancel)call TriggerRegisterAnyUnitEventBJ(gg_trg_HkrCancel,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_HkrCancel,Condition(function Trig_HkrCancel_Conditions))
call TriggerAddAction(gg_trg_HkrCancel,function Trig_HkrCancel_Actions)endfunctionfunction Trig_WhiteSword_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A059')endfunctionfunction Trig_WhiteSword_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h0A0',p,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h0A3',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h07U',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(loc)
set loc=null
call DisplayText("San no mai, Shirafune",u,.023,false,$FF,$FF,$FF,$FF)set p=nullset u=nullendfunctionfunction InitTrig_WhiteSword takes nothing returns nothingset gg_trg_WhiteSword=CreateTrigger()call TriggerAddCondition(gg_trg_WhiteSword,Condition(function Trig_WhiteSword_Conditions))call TriggerAddAction(gg_trg_WhiteSword,function Trig_WhiteSword_Actions)endfunctionfunction HakkanoTogame__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==HakkanoTogame__skId)
endfunctionfunction HakkanoTogame__Act takes nothing returns nothinglocal unit pickedlocal group glocal real array xlocal real array ylocal real array rlocal real garea
local integer ilocal integer jset HakkanoTogame__u=GetTriggerUnit()set x[0]=GetUnitX(HakkanoTogame__u)set y[0]=GetUnitY(HakkanoTogame__u)set HakkanoTogame__p=GetOwningPlayer(HakkanoTogame__u)set HakkanoTogame__dmg=800.set garea=1000.call DisplayText("Bankai: Hakka no Togame",HakkanoTogame__u,.023,true,$DC,5,5,$FF)set i=1loop
exitwhen(i>3)set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02T',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02M',x[0],y[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitFlyHeight(bj_lastCreatedUnit,(I2R(i)*100.),.0)set i=i+1endloopset i=1loop
exitwhen(i>3)set r[0]=(I2R(i)*200.)set j=1loop
exitwhen(j>9)set r[1]=(I2R(j)*40.)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02U',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02W',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)set j=j+1endloopset i=i+1endloopset bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02X',x[0],y[0],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set g=CreateGroupXY(x[0],y[0],garea,HakkanoTogame__p)call DestroyTreeXY(x[0],y[0],garea)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set x[1]=GetUnitX(picked)set y[1]=GetUnitY(picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thenset bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02M',x[1],y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)else
set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02X',x[1],y[1],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)endifcall UnitDamageTarget(HakkanoTogame__u,picked,HakkanoTogame__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(g)
set g=nullset bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02V',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02V',x[0],y[0],GetRandomReal(0,360))call UnitAddAbility(bj_lastCreatedUnit,'A05S')call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,HakkanoTogame__u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set r[0]=I2R(GetUnitAbilityLevel(HakkanoTogame__u,HakkanoTogame__skId))set HakkanoTogame__dmg=((75.+(25.*r[0]))+((1.+(1.*r[0]))*GetHeroAgi(HakkanoTogame__u,false)))set HakkanoTogame__count=0if(IsTriggerEnabled(HakkanoTogame__atkTrg)==false)thencall EnableTrigger(HakkanoTogame__atkTrg)set r[0]=.2loop
call TriggerSleepAction(r[0])exitwhen(GetUnitAbilityLevel(HakkanoTogame__u,HakkanoTogame__buffId)<1)endloopcall DisableTrigger(HakkanoTogame__atkTrg)set HakkanoTogame__u=nullset HakkanoTogame__p=nullendifendfunctionfunction HakkanoTogame__AtkCond takes nothing returns booleanreturn(GetAttacker()==HakkanoTogame__u)and(GetUnitAbilityLevel(HakkanoTogame__u,HakkanoTogame__buffId)>0)endfunctionfunction HakkanoTogame__AtkL takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local integer i=(LoadInteger(Rukia_BankaiHash,tId,0)-1)local integer jlocal unit array dummyset dummy[0]=LoadUnitHandle(Rukia_BankaiHash,tId,1)set dummy[1]=LoadUnitHandle(Rukia_BankaiHash,tId,2)if(i>0)thencall SaveInteger(Rukia_BankaiHash,tId,0,i)set j=R2I(i*6.37)call SetUnitVertexColor(dummy[0],$FF,$FF,$FF,j)call SetUnitVertexColor(dummy[1],38,89,$E5,j)else
call PauseTimer(t)call DestroyTimer(t)
call FlushChildHashtable(Rukia_BankaiHash,tId)call RemoveUnit(dummy[0])call RemoveUnit(dummy[1])endifset t=nullset dummy[0]=nullset dummy[1]=nullendfunctionfunction HakkanoTogame__AtkAct takes nothing returns nothing
local unit atked=GetTriggerUnit()local unit dummy
local real x=GetUnitX(atked)
local real y=GetUnitY(atked)
local timer tlocal integer tIdset HakkanoTogame__count=HakkanoTogame__count+1if(HakkanoTogame__count>HakkanoTogame__maxCount)then
call UnitRemoveAbility(HakkanoTogame__u,HakkanoTogame__buffId)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdx",atked,"origin"))set bj_lastCreatedUnit=CreateUnit(HakkanoTogame__p,'h02X',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call UnitDamageTarget(HakkanoTogame__u,atked,HakkanoTogame__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetUnitState(atked,UNIT_STATE_LIFE)<1)thenif(IsUnitType(atked,UNIT_TYPE_HERO)==false)thencall SetUnitVertexColor(atked,0,0,0,0)endifset t=CreateTimer()set tId=GetHandleId(t)call SaveInteger(Rukia_BankaiHash,tId,0,40)set dummy=CreateUnit(HakkanoTogame__p,'h02Y',x,y,GetRandomReal(0,360))call UnitApplyTimedLife(dummy,'BTLF',12.)call SaveUnitHandle(Rukia_BankaiHash,tId,1,dummy)set dummy=CreateUnit(Player($F),GetUnitTypeId(atked),x,y,GetUnitFacing(atked))call UnitAddAbility(dummy,'Aloc')call SetUnitInvulnerable(dummy,true)
call SetUnitTimeScale(dummy,.0)call SetUnitVertexColor(dummy,38,89,$E5,$FF)
call UnitApplyTimedLife(dummy,'BTLF',12.)call SaveUnitHandle(Rukia_BankaiHash,tId,2,dummy)call TimerStart(t,.05,true,function HakkanoTogame__AtkL)
set dummy=nullset t=nullendifset atked=nullendfunctionfunction HakkanoTogame__Init takes nothing returns nothingset gg_trg_HakkanoTogame=CreateTrigger()
call TriggerAddCondition(gg_trg_HakkanoTogame,Condition(function HakkanoTogame__Cond))call TriggerAddAction(gg_trg_HakkanoTogame,function HakkanoTogame__Act)set HakkanoTogame__atkTrg=CreateTrigger()call DisableTrigger(HakkanoTogame__atkTrg)call TriggerRegisterAnyUnitEventBJ(HakkanoTogame__atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(HakkanoTogame__atkTrg,Condition(function HakkanoTogame__AtkCond))call TriggerAddAction(HakkanoTogame__atkTrg,function HakkanoTogame__AtkAct)endfunctionfunction AI_Zoro_Cond5 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='N005')endfunctionfunction AI_Zoro_Cond3 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Zoro_Cond5())thenreturn false
endifreturn trueendfunctionfunction AI_Zoro_Cond4 takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='N005')
endfunctionfunction AI_Zoro_Cond2 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Zoro_Cond4())thenreturn false
endifreturn trueendfunctionfunction AI_Zoro_Cond1 takes nothing returns boolean
if(AI_Zoro_Cond3())thenreturn trueelseif(AI_Zoro_Cond2())thenreturn trueendifreturn false
endfunctionfunction AI_Zoro_Cond takes nothing returns booleanif(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Zoro_Cond1())thenreturn false
endifreturn trueendfunctionfunction AI_Zoro_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local real ResultHPlocal boolean AI_C=false
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(GetUnitTypeId(GetTriggerUnit())=='N005')thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A05H')call SelectHeroSkill(AI_1,'A05G')call SelectHeroSkill(AI_1,'A05F')call SelectHeroSkill(AI_1,'A05D')call SelectHeroSkill(AI_1,'A05C')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssueTargetOrderById(AI_1,$D007F,AI_2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)set AI_Point2=GetUnitLoc(AI_2)else
call RemoveLocation(AI_Point1)set AI_Point1=nullendifcall IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssueImmediateOrderById(AI_1,$D0080)call IssueImmediateOrderById(AI_1,$D009F)set AI_C=falseendifcall IssueTargetOrderById(AI_1,$D0065,AI_2)call IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point2)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Zoro takes nothing returns nothingset udg_AI_Trig[4]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[4],Condition(function AI_Zoro_Cond))call TriggerAddAction(udg_AI_Trig[4],function AI_Zoro_Act)endfunctionfunction Trig_Ssn_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05K')endfunctionfunction Trig_Ssn_Actions takes nothing returns nothingset udg_Ssn_Unit[0]=GetTriggerUnit()
set udg_Ssn_Unit[1]=GetSpellTargetUnit()
call DisplayText("Shishi Sonson",udg_Ssn_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SetUnitVertexColorBJ(udg_Ssn_Unit[0],'d','d','d',50.)call UnitAddAbility(udg_Ssn_Unit[0],'A05L')call TriggerSleepAction(.01)
set udg_Ssn_Loc[0]=GetUnitLoc(udg_Ssn_Unit[0])set udg_Ssn_Loc[1]=GetUnitLoc(udg_Ssn_Unit[1])set udg_Ssn_Real=AngleBetweenPoints(udg_Ssn_Loc[0],udg_Ssn_Loc[1])set udg_Ssn_Loc[2]=PolarProjectionBJ(udg_Ssn_Loc[1],150.,udg_Ssn_Real)call SetUnitPositionLocFacingBJ(udg_Ssn_Unit[0],udg_Ssn_Loc[2],udg_Ssn_Real)
call AddSpecialEffectLocBJ(udg_Ssn_Loc[1],"Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl")call DestroyEffect(bj_lastCreatedEffect)
call CreateNUnitsAtLoc(1,'h03F',GetOwningPlayer(udg_Ssn_Unit[0]),udg_Ssn_Loc[1],GetRandomReal(0,360))set udg_Ssn_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Ssn_Loc[0])set udg_Ssn_Loc[0]=nullcall RemoveLocation(udg_Ssn_Loc[1])set udg_Ssn_Loc[1]=nullcall RemoveLocation(udg_Ssn_Loc[2])set udg_Ssn_Loc[2]=nullcall SetUnitScalePercent(udg_Ssn_Unit[2],100.,'d','d')call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Ssn_Unit[2])call SetUnitFlyHeight(udg_Ssn_Unit[2],70.,.0)call SetUnitVertexColorBJ(udg_Ssn_Unit[0],'d','d','d',.0)call IssueTargetOrderById(udg_Ssn_Unit[0],$D000F,udg_Ssn_Unit[1])call UnitDamageTargetBJ(udg_Ssn_Unit[0],udg_Ssn_Unit[1],(I2R(GetHeroStatBJ(0,udg_Ssn_Unit[0],true))*4.),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Ssn_Unit[1]=null
set udg_Ssn_Unit[2]=null
set udg_Ssn_Real=.0call TriggerSleepAction(.1)call UnitRemoveAbility(udg_Ssn_Unit[0],'A05L')set udg_Ssn_Unit[0]=null
endfunctionfunction InitTrig_Ssn takes nothing returns nothingset gg_trg_Ssn=CreateTrigger()call TriggerAddCondition(gg_trg_Ssn,Condition(function Trig_Ssn_Conditions))
call TriggerAddAction(gg_trg_Ssn,function Trig_Ssn_Actions)endfunctionfunction Trig_Ykd_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05C')endfunctionfunction Trig_Ykd_Actions takes nothing returns nothingset udg_Ykd_Unit[0]=GetTriggerUnit()
set udg_Ykd_Loc[0]=GetSpellTargetLoc()set udg_Ykd_Loc[1]=GetUnitLoc(udg_Ykd_Unit[0])set udg_Ykd_Real[0]=AngleBetweenPoints(udg_Ykd_Loc[1],udg_Ykd_Loc[0])call CreateNUnitsAtLoc(1,'h030',GetOwningPlayer(udg_Ykd_Unit[0]),udg_Ykd_Loc[1],udg_Ykd_Real[0])
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h02Z',GetOwningPlayer(udg_Ykd_Unit[0]),udg_Ykd_Loc[1],udg_Ykd_Real[0])
set udg_Ykd_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02Z',GetOwningPlayer(udg_Ykd_Unit[0]),udg_Ykd_Loc[1],udg_Ykd_Real[0])
set udg_Ykd_Unit[2]=bj_lastCreatedUnitset udg_Ykd_Loc[2]=PolarProjectionBJ(udg_Ykd_Loc[1],100.,udg_Ykd_Real[0])call CreateNUnitsAtLoc(1,'h031',GetOwningPlayer(udg_Ykd_Unit[0]),udg_Ykd_Loc[2],udg_Ykd_Real[0])
set udg_Ykd_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Ykd_Loc[0])set udg_Ykd_Loc[0]=nullcall RemoveLocation(udg_Ykd_Loc[1])set udg_Ykd_Loc[1]=nullcall RemoveLocation(udg_Ykd_Loc[2])set udg_Ykd_Loc[2]=nullcall SetUnitVertexColorBJ(udg_Ykd_Unit[1],'d','d','d',100.)call SetUnitVertexColorBJ(udg_Ykd_Unit[2],'d','d','d',100.)set udg_Ykd_Real[1]=BasicDmg_Q(udg_Ykd_Unit[0],'A05C',0)
set udg_Ykd_Int=21set udg_Ykd_Bool=truecall DisplayText("Yakkodori",udg_Ykd_Unit[0],.023,true,$FF,$FF,$FF,$FF)call EnableTrigger(gg_trg_YkdL)call TriggerSleepAction(.05)
call UnitApplyTimedLifeBJ(1.6,'BTLF',udg_Ykd_Unit[1])call UnitApplyTimedLifeBJ(1.6,'BTLF',udg_Ykd_Unit[2])call SetUnitAnimation(udg_Ykd_Unit[1],"death")call SetUnitAnimation(udg_Ykd_Unit[2],"death")endfunctionfunction InitTrig_Ykd takes nothing returns nothingset gg_trg_Ykd=CreateTrigger()call TriggerAddCondition(gg_trg_Ykd,Condition(function Trig_Ykd_Conditions))
call TriggerAddAction(gg_trg_Ykd,function Trig_Ykd_Actions)endfunctionfunction Trig_YkdL_Func001Func004C takes nothing returns boolean
return(udg_Ykd_Bool)
endfunctionfunction Trig_YkdL_Func001Func006002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Ykd_Unit[0]))==false)endfunctionfunction Trig_YkdL_Func001Func006002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_YkdL_Func001Func006002003002002 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Ykd_Group2)==false)
endfunctionfunction Trig_YkdL_Func001Func006002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_YkdL_Func001Func006002003002001(),Trig_YkdL_Func001Func006002003002002())endfunctionfunction Trig_YkdL_Func001Func006002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_YkdL_Func001Func006002003001(),Trig_YkdL_Func001Func006002003002())endfunctionfunction Trig_YkdL_Func001Func011A takes nothing returns nothing
set udg_Ykd_Unit[4]=GetEnumUnit()call GroupAddUnit(udg_Ykd_Group2,udg_Ykd_Unit[4])call UnitDamageTargetBJ(udg_Ykd_Unit[0],udg_Ykd_Unit[4],udg_Ykd_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Ykd_Unit[4]=null
endfunctionfunction Trig_YkdL_Func001C takes nothing returns booleanreturn(udg_Ykd_Int>0)and(IsUnitAliveBJ(udg_Ykd_Unit[3]))
endfunctionfunction Trig_YkdL_Actions takes nothing returns nothing
if(Trig_YkdL_Func001C())then
set udg_Ykd_Loc[0]=GetUnitLoc(udg_Ykd_Unit[3])set udg_Ykd_Loc[1]=PolarProjectionBJ(udg_Ykd_Loc[0],62.,udg_Ykd_Real[0])
call SetUnitPositionLoc(udg_Ykd_Unit[3],udg_Ykd_Loc[1])if(Trig_YkdL_Func001Func004C())thenset udg_Ykd_Bool=falsecall CreateNUnitsAtLoc(1,'h00E',GetOwningPlayer(udg_Ykd_Unit[0]),udg_Ykd_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(.25,'BTLF',bj_lastCreatedUnit)
call SetUnitVertexColorBJ(bj_lastCreatedUnit,5.,'d',10.,0)else
set udg_Ykd_Bool=trueendifcall EnumDestructablesInCircleBJ(250.,udg_Ykd_Loc[1],function TreeKiller)set udg_Ykd_Group=GetUnitsInRangeOfLocMatching(250.,udg_Ykd_Loc[1],Condition(function Trig_YkdL_Func001Func006002003))call RemoveLocation(udg_Ykd_Loc[0])set udg_Ykd_Loc[0]=nullcall RemoveLocation(udg_Ykd_Loc[1])set udg_Ykd_Loc[1]=nullcall ForGroupBJ(udg_Ykd_Group,function Trig_YkdL_Func001Func011A)call DestroyGroup(udg_Ykd_Group)
set udg_Ykd_Group=nullset udg_Ykd_Int=(udg_Ykd_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Ykd_Group2)call RemoveUnit(udg_Ykd_Unit[3])
set udg_Ykd_Unit[0]=null
set udg_Ykd_Unit[1]=null
set udg_Ykd_Unit[2]=null
set udg_Ykd_Unit[3]=null
set udg_Ykd_Real[0]=.0set udg_Ykd_Real[1]=.0set udg_Ykd_Int=0endifendfunctionfunction InitTrig_YkdL takes nothing returns nothing
set gg_trg_YkdL=CreateTrigger()call DisableTrigger(gg_trg_YkdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_YkdL,.04)call TriggerAddAction(gg_trg_YkdL,function Trig_YkdL_Actions)endfunctionfunction Trig_Sph_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05D')endfunctionfunction Trig_Sph_Actions takes nothing returns nothingset udg_Sph_Unit[0]=GetTriggerUnit()
call DisplayText("Senhachiju Pound Ho",udg_Sph_Unit[0],.023,false,$FF,$FF,$FF,$FF)set udg_Sph_Loc[0]=GetUnitLoc(udg_Sph_Unit[0])call CreateNUnitsAtLoc(1,'h034',GetOwningPlayer(udg_Sph_Unit[0]),udg_Sph_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h034',GetOwningPlayer(udg_Sph_Unit[0]),udg_Sph_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.5,'BTLF',bj_lastCreatedUnit)
set udg_Sph_Int=1loop
exitwhen udg_Sph_Int>8set udg_Sph_Loc[1]=PolarProjectionBJ(udg_Sph_Loc[0],250.,(I2R(udg_Sph_Int)*45.))
call CreateNUnitsAtLoc(1,'h032',GetOwningPlayer(udg_Sph_Unit[0]),udg_Sph_Loc[1],(I2R(udg_Sph_Int)*45.))call UnitApplyTimedLifeBJ(10.,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h033',GetOwningPlayer(udg_Sph_Unit[0]),udg_Sph_Loc[1],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(.75,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Sph_Loc[1])set udg_Sph_Loc[1]=nullset udg_Sph_Int=udg_Sph_Int+1endloopcall RemoveLocation(udg_Sph_Loc[0])set udg_Sph_Loc[0]=nullset udg_Sph_Real=(250.+((2.+I2R(GetUnitAbilityLevelSwapped('A05D',udg_Sph_Unit[0])))*I2R(GetHeroStatBJ(0,udg_Sph_Unit[0],true))))set udg_Sph_Int=28call EnableTrigger(gg_trg_SphL)endfunctionfunction InitTrig_Sph takes nothing returns nothingset gg_trg_Sph=CreateTrigger()call TriggerAddCondition(gg_trg_Sph,Condition(function Trig_Sph_Conditions))
call TriggerAddAction(gg_trg_Sph,function Trig_Sph_Actions)endfunctionfunction Trig_SphL_Func001Func002Func006002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Sph_Unit[0]))==false)endfunctionfunction Trig_SphL_Func001Func002Func006002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_SphL_Func001Func002Func006002003002002 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Sph_Group2)==false)
endfunctionfunction Trig_SphL_Func001Func002Func006002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_SphL_Func001Func002Func006002003002001(),Trig_SphL_Func001Func002Func006002003002002())endfunctionfunction Trig_SphL_Func001Func002Func006002003 takes nothing returns boolean
return GetBooleanAnd(Trig_SphL_Func001Func002Func006002003001(),Trig_SphL_Func001Func002Func006002003002())endfunctionfunction Trig_SphL_Func001Func002Func011A takes nothing returns nothingset udg_Sph_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Sph_Group2,udg_Sph_Unit[2])call UnitDamageTargetBJ(udg_Sph_Unit[0],udg_Sph_Unit[2],udg_Sph_Real,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)set udg_Sph_Unit[2]=null
endfunctionfunction Trig_SphL_Func001Func002A takes nothing returns nothing
set udg_Sph_Unit[1]=GetEnumUnit()set udg_Sph_Loc[0]=GetUnitLoc(udg_Sph_Unit[1])set udg_Sph_Loc[1]=PolarProjectionBJ(udg_Sph_Loc[0],65.,GetUnitFacing(udg_Sph_Unit[1]))call SetUnitPositionLoc(udg_Sph_Unit[1],udg_Sph_Loc[1])call EnumDestructablesInCircleBJ(250.,udg_Sph_Loc[1],function TreeKiller)set udg_Sph_Group[1]=GetUnitsInRangeOfLocMatching(250.,udg_Sph_Loc[1],Condition(function Trig_SphL_Func001Func002Func006002003))
call RemoveLocation(udg_Sph_Loc[0])set udg_Sph_Loc[0]=nullcall RemoveLocation(udg_Sph_Loc[1])set udg_Sph_Loc[1]=nullcall ForGroupBJ(udg_Sph_Group[1],function Trig_SphL_Func001Func002Func011A)call DestroyGroup(udg_Sph_Group[1])set udg_Sph_Group[1]=nullset udg_Sph_Unit[1]=null
endfunctionfunction Trig_SphL_Func001Func009A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_SphL_Func001C takes nothing returns booleanreturn(udg_Sph_Int>0)endfunctionfunction Trig_SphL_Actions takes nothing returns nothing
if(Trig_SphL_Func001C())then
set udg_Sph_Group[0]=GetUnitsOfTypeIdAll('h032')
call ForGroupBJ(udg_Sph_Group[0],function Trig_SphL_Func001Func002A)
call DestroyGroup(udg_Sph_Group[0])set udg_Sph_Group[0]=nullset udg_Sph_Int=(udg_Sph_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Sph_Group[0]=GetUnitsOfTypeIdAll('h032')
call ForGroupBJ(udg_Sph_Group[0],function Trig_SphL_Func001Func009A)
call DestroyGroup(udg_Sph_Group[0])set udg_Sph_Group[0]=nullcall GroupClear(udg_Sph_Group2)set udg_Sph_Unit[0]=null
set udg_Sph_Int=0endifendfunctionfunction InitTrig_SphL takes nothing returns nothing
set gg_trg_SphL=CreateTrigger()call DisableTrigger(gg_trg_SphL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SphL,.06)call TriggerAddAction(gg_trg_SphL,function Trig_SphL_Actions)endfunctionfunction Trig_Csp_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05F')endfunctionfunction Trig_Csp_Actions takes nothing returns nothingset udg_Csp_Unit[0]=GetTriggerUnit()
set udg_Csp_Loc[0]=GetSpellTargetLoc()set udg_Csp_Loc[1]=GetUnitLoc(udg_Csp_Unit[0])set udg_Csp_Real[0]=AngleBetweenPoints(udg_Csp_Loc[1],udg_Csp_Loc[0])call RemoveLocation(udg_Csp_Loc[1])set udg_Csp_Loc[1]=nullset udg_Csp_Int=1loop
exitwhen udg_Csp_Int>6set udg_Csp_Loc[1]=PolarProjectionBJ(udg_Csp_Loc[0],(-350.+(I2R(udg_Csp_Int)*100.)),(udg_Csp_Real[0]+90.))call CreateNUnitsAtLoc(1,'h035',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[1],bj_UNIT_FACING)call SetUnitTimeScalePercent(bj_lastCreatedUnit,15.)
call RemoveLocation(udg_Csp_Loc[1])set udg_Csp_Loc[1]=nullset udg_Csp_Int=udg_Csp_Int+1endloopcall CreateNUnitsAtLoc(1,'h00D',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)set udg_Csp_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Csp_Loc[0])set udg_Csp_Loc[0]=nullcall SetUnitTimeScalePercent(udg_Csp_Unit[1],20.)call PauseSystem(udg_Csp_Unit[0],true)call SetUnitAnimation(udg_Csp_Unit[0],"spell one")call SetUnitTimeScalePercent(udg_Csp_Unit[0],17.)call DisplayText("Santoryu Ogi",udg_Csp_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Zoro\\RokudoTsuji.wav",GetUnitX(udg_Csp_Unit[0]),GetUnitY(udg_Csp_Unit[0]))
set udg_Csp_Int=1set udg_Csp_Real[1]=(600.+(100.*I2R(GetUnitAbilityLevelSwapped('A05F',udg_Csp_Unit[0]))))call EnableTrigger(gg_trg_CspL)endfunctionfunction InitTrig_Csp takes nothing returns nothingset gg_trg_Csp=CreateTrigger()call TriggerAddCondition(gg_trg_Csp,Condition(function Trig_Csp_Conditions))
call TriggerAddAction(gg_trg_Csp,function Trig_Csp_Actions)endfunctionfunction Trig_CspL_Func001Func005Func002A takes nothing returns nothingcall UnitApplyTimedLifeBJ(1.,'BTLF',GetEnumUnit())endfunctionfunction Trig_CspL_Func001Func005Func009A takes nothing returns nothingset udg_Csp_Unit[2]=GetEnumUnit()set udg_Csp_Loc[0]=GetUnitLoc(udg_Csp_Unit[2])call CreateNUnitsAtLoc(1,'h036',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(.9,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,200.)call CreateNUnitsAtLoc(1,'h00E',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',.0,.0,0)call RemoveLocation(udg_Csp_Loc[0])set udg_Csp_Loc[0]=nullset udg_Csp_Unit[2]=null
endfunctionfunction Trig_CspL_Func001Func005Func020002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Csp_Unit[0]))==false)endfunctionfunction Trig_CspL_Func001Func005Func020002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_CspL_Func001Func005Func020002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped('Avul',GetFilterUnit())==0)endfunctionfunction Trig_CspL_Func001Func005Func020002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_CspL_Func001Func005Func020002003002001(),Trig_CspL_Func001Func005Func020002003002002())endfunctionfunction Trig_CspL_Func001Func005Func020002003 takes nothing returns boolean
return GetBooleanAnd(Trig_CspL_Func001Func005Func020002003001(),Trig_CspL_Func001Func005Func020002003002())endfunctionfunction Trig_CspL_Func001Func005Func037A takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction Trig_CspL_Func001Func005Func043A takes nothing returns nothingset udg_Csp_Unit[2]=GetEnumUnit()set udg_Csp_Loc[0]=GetUnitLoc(udg_Csp_Unit[2])call CreateNUnitsAtLoc(1,'h00E',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,'d',10.,10.,0)call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call CreateNUnitsAtLoc(1,'h00P',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[0],bj_UNIT_FACING)set udg_Csp_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Csp_Loc[0])set udg_Csp_Loc[0]=nullcall UnitAddAbility(udg_Csp_Unit[3],'A04I')call SetUnitAbilityLevelSwapped('A04I',udg_Csp_Unit[3],4)call IssueTargetOrderById(udg_Csp_Unit[3],$D007F,udg_Csp_Unit[2])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Csp_Unit[3])
call UnitPureDamageTarget(udg_Csp_Unit[0],udg_Csp_Unit[2],udg_Csp_Real[1])set udg_Csp_Unit[2]=null
set udg_Csp_Unit[3]=null
endfunctionfunction Trig_CspL_Func001Func005C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Csp_Unit[0])==false)endfunctionfunction Trig_CspL_Func001C takes nothing returns booleanreturn(udg_Csp_Int<30)and(IsUnitAliveBJ(udg_Csp_Unit[0]))endfunctionfunction Trig_CspL_Actions takes nothing returns nothing
if(Trig_CspL_Func001C())then
call SetUnitVertexColorBJ(udg_Csp_Unit[0],'d','d','d',(I2R(udg_Csp_Int)*3.))
set udg_Csp_Int=(udg_Csp_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitTimeScalePercent(udg_Csp_Unit[1],100.)call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Csp_Unit[1])
if(Trig_CspL_Func001Func005C())thenset udg_Csp_Group[0]=GetUnitsOfTypeIdAll('h035')
call ForGroupBJ(udg_Csp_Group[0],function Trig_CspL_Func001Func005Func002A)call DestroyGroup(udg_Csp_Group[0])set udg_Csp_Group[0]=nullcall PauseSystem(udg_Csp_Unit[0],false)else
call SetUnitTimeScalePercent(udg_Csp_Unit[0],.0)
set udg_Csp_Group[0]=GetUnitsOfTypeIdAll('h035')
call ForGroupBJ(udg_Csp_Group[0],function Trig_CspL_Func001Func005Func009A)call DestroyGroup(udg_Csp_Group[0])set udg_Csp_Group[0]=nullset udg_Csp_Loc[0]=GetUnitLoc(udg_Csp_Unit[1])set udg_Csp_Loc[1]=PolarProjectionBJ(udg_Csp_Loc[0],-250.,udg_Csp_Real[0])call EnumDestructablesInCircleBJ(350.,udg_Csp_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'h037',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[1],udg_Csp_Real[0])
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h038',GetOwningPlayer(udg_Csp_Unit[0]),udg_Csp_Loc[1],udg_Csp_Real[0])
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)set udg_Csp_Loc[2]=PolarProjectionBJ(udg_Csp_Loc[0],300.,udg_Csp_Real[0])set udg_Csp_Group[0]=GetUnitsInRangeOfLocMatching(350.,udg_Csp_Loc[0],Condition(function Trig_CspL_Func001Func005Func020002003))
call RemoveLocation(udg_Csp_Loc[0])set udg_Csp_Loc[0]=nullcall RemoveLocation(udg_Csp_Loc[1])set udg_Csp_Loc[1]=nullcall GroupAddGroup(udg_Csp_Group[0],udg_Csp_Group[1])call DestroyGroup(udg_Csp_Group[0])set udg_Csp_Group[0]=nullcall SetUnitPositionLocFacingBJ(udg_Csp_Unit[0],udg_Csp_Loc[2],udg_Csp_Real[0])call RemoveLocation(udg_Csp_Loc[2])set udg_Csp_Loc[2]=nullcall CreateTextTagUnitBJ("Rokudo no Tsuji",udg_Csp_Unit[0],0,$A,'d',100.,'d',0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,100.,90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,2.)call TriggerSleepAction(.02)
set udg_Csp_Group[0]=GetUnitsOfTypeIdAll('h035')
call ForGroupBJ(udg_Csp_Group[0],function Trig_CspL_Func001Func005Func037A)call DestroyGroup(udg_Csp_Group[0])set udg_Csp_Group[0]=nullset udg_Csp_Group[0]=CreateGroup()call GroupAddGroup(udg_Csp_Group[1],udg_Csp_Group[0])call GroupClear(udg_Csp_Group[1])call ForGroupBJ(udg_Csp_Group[0],function Trig_CspL_Func001Func005Func043A)call DestroyGroup(udg_Csp_Group[0])set udg_Csp_Group[0]=nullcall PauseSystem(udg_Csp_Unit[0],false)call SetUnitAnimation(udg_Csp_Unit[0],"stand")call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Zoro\\CrossingSixPatch.wav",GetUnitX(udg_Csp_Unit[0]),GetUnitY(udg_Csp_Unit[0]))endifcall SetUnitTimeScalePercent(udg_Csp_Unit[0],100.)call SetUnitVertexColorBJ(udg_Csp_Unit[0],'d','d','d',0)
set udg_Csp_Unit[0]=null
set udg_Csp_Unit[1]=null
set udg_Csp_Real[0]=.0set udg_Csp_Real[1]=.0set udg_Csp_Int=0endifendfunctionfunction InitTrig_CspL takes nothing returns nothing
set gg_trg_CspL=CreateTrigger()call DisableTrigger(gg_trg_CspL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CspL,.05)call TriggerAddAction(gg_trg_CspL,function Trig_CspL_Actions)endfunctionfunction Trig_Tmk_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05G')endfunctionfunction Trig_Tmk_Func019002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Tmk_Unit[0]))==false)endfunctionfunction Trig_Tmk_Func019002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Tmk_Func019002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Tmk_Func019002003001(),Trig_Tmk_Func019002003002())endfunctionfunction Trig_Tmk_Func022Func006C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Tmk_Loc[0],udg_Tmk_Loc[1])<301.)endfunctionfunction Trig_Tmk_Func022Func012C takes nothing returns booleanreturn((IsUnitType(udg_Tmk_Unit[6],UNIT_TYPE_HERO)==false)and(IsUnitType(udg_Tmk_Unit[6],UNIT_TYPE_FLYING)==false)and(IsUnitDeadBJ(udg_Tmk_Unit[6])))!=nullendfunctionfunction Trig_Tmk_Func022A takes nothing returns nothing
set udg_Tmk_Unit[6]=GetEnumUnit()call AddSpecialEffectTargetUnitBJ("chest",udg_Tmk_Unit[6],"Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl")call DestroyEffect(bj_lastCreatedEffect)
set udg_Tmk_Loc[0]=GetUnitLoc(udg_Tmk_Unit[0])set udg_Tmk_Loc[1]=GetUnitLoc(udg_Tmk_Unit[6])if(Trig_Tmk_Func022Func006C())thencall UnitDamageTargetBJ(udg_Tmk_Unit[0],udg_Tmk_Unit[6],(I2R(GetHeroStatBJ(0,udg_Tmk_Unit[0],true))*9.),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endifcall RemoveLocation(udg_Tmk_Loc[0])set udg_Tmk_Loc[0]=nullcall RemoveLocation(udg_Tmk_Loc[1])set udg_Tmk_Loc[1]=nullcall UnitDamageTargetBJ(udg_Tmk_Unit[0],udg_Tmk_Unit[6],udg_Tmk_Real,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_Tmk_Func022Func012C())thencall GroupAddUnit(udg_Tmk_Group2,udg_Tmk_Unit[6])call UnitAddAbility(udg_Tmk_Unit[6],'Amrf')call UnitRemoveAbility(udg_Tmk_Unit[6],'Amrf')call SetUnitPathing(udg_Tmk_Unit[6],false)call PauseUnit(udg_Tmk_Unit[6],true)
call SetUnitFlyHeight(udg_Tmk_Unit[6],1200.,1300.)endifset udg_Tmk_Unit[6]=null
endfunctionfunction Trig_Tmk_Func043A takes nothing returns nothing
call SetUnitFlyHeight(GetEnumUnit(),.0,1100.)endfunctionfunction Trig_Tmk_Actions takes nothing returns nothingset udg_Tmk_Unit[0]=GetTriggerUnit()
set udg_Tmk_Real=(300.+(200.*I2R(GetUnitAbilityLevelSwapped('A05G',udg_Tmk_Unit[0]))))set udg_Tmk_Loc[0]=GetUnitLoc(udg_Tmk_Unit[0])call CreateNUnitsAtLoc(1,'h03C',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03A',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03A',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],bj_UNIT_FACING)set udg_Tmk_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h034',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],bj_UNIT_FACING)set udg_Tmk_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h034',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],bj_UNIT_FACING)set udg_Tmk_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03B',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],GetRandomReal(0,360))set udg_Tmk_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03B',GetOwningPlayer(udg_Tmk_Unit[0]),udg_Tmk_Loc[0],GetRandomReal(0,360))set udg_Tmk_Unit[5]=bj_lastCreatedUnitcall EnumDestructablesInCircleBJ(600.,udg_Tmk_Loc[0],function TreeKiller)set udg_Tmk_Group=GetUnitsInRangeOfLocMatching(600.,udg_Tmk_Loc[0],Condition(function Trig_Tmk_Func019002003))call RemoveLocation(udg_Tmk_Loc[0])set udg_Tmk_Loc[0]=nullcall ForGroupBJ(udg_Tmk_Group,function Trig_Tmk_Func022A)call DestroyGroup(udg_Tmk_Group)
set udg_Tmk_Group=nullcall SetUnitScalePercent(udg_Tmk_Unit[1],1000.,1000.,1000.)call SetUnitScalePercent(udg_Tmk_Unit[2],700.,700.,700.)
call SetUnitScalePercent(udg_Tmk_Unit[3],700.,700.,700.)
call SetUnitVertexColorBJ(udg_Tmk_Unit[1],30.,75.,90.,80.)call SetUnitVertexColorBJ(udg_Tmk_Unit[2],.0,75.,'d',.0)
call SetUnitVertexColorBJ(udg_Tmk_Unit[3],.0,75.,'d',.0)
call SetUnitTimeScalePercent(udg_Tmk_Unit[4],30.)call SetUnitTimeScalePercent(udg_Tmk_Unit[5],30.)call DisplayText("Tatsumaki",udg_Tmk_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Zoro\\OTatsumaki.wav",GetUnitX(udg_Tmk_Unit[0]),GetUnitY(udg_Tmk_Unit[0]))set udg_Tmk_Unit[0]=null
set udg_Tmk_Int=1loop
exitwhen udg_Tmk_Int>5call UnitApplyTimedLifeBJ(6.,'BTLF',udg_Tmk_Unit[udg_Tmk_Int])set udg_Tmk_Unit[udg_Tmk_Int]=nullset udg_Tmk_Int=udg_Tmk_Int+1endloopset udg_Tmk_Real=.0set udg_Tmk_Int=0call TriggerSleepAction(1.)set udg_Tmk_Group=CreateGroup()call GroupAddGroup(udg_Tmk_Group2,udg_Tmk_Group)
call GroupClear(udg_Tmk_Group2)call ForGroupBJ(udg_Tmk_Group,function Trig_Tmk_Func043A)call DestroyGroup(udg_Tmk_Group)
set udg_Tmk_Group=nullcall EnableTrigger(gg_trg_TmkR)endfunctionfunction InitTrig_Tmk takes nothing returns nothingset gg_trg_Tmk=CreateTrigger()call TriggerAddCondition(gg_trg_Tmk,Condition(function Trig_Tmk_Conditions))
call TriggerAddAction(gg_trg_Tmk,function Trig_Tmk_Actions)endfunctionfunction Trig_TmkR_Func002Func003A takes nothing returns nothing
set udg_Tmk_Unit[6]=GetEnumUnit()call SetUnitVertexColorBJ(udg_Tmk_Unit[6],30.,75.,90.,(5.*I2R(udg_Tmk_Int)))
set udg_Tmk_Unit[6]=null
endfunctionfunction Trig_TmkR_Func002Func008A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_TmkR_Func002C takes nothing returns booleanreturn(udg_Tmk_Int<20)endfunctionfunction Trig_TmkR_Actions takes nothing returns nothing
set udg_Tmk_Int=(udg_Tmk_Int+1)if(Trig_TmkR_Func002C())then
set udg_Tmk_Group=GetUnitsOfTypeIdAll('h03A')call ForGroupBJ(udg_Tmk_Group,function Trig_TmkR_Func002Func003A)call DestroyGroup(udg_Tmk_Group)
set udg_Tmk_Group=nullelse
call DisableTrigger(GetTriggeringTrigger())set udg_Tmk_Group=GetUnitsOfTypeIdAll('h03A')call ForGroupBJ(udg_Tmk_Group,function Trig_TmkR_Func002Func008A)call DestroyGroup(udg_Tmk_Group)
set udg_Tmk_Group=nullset udg_Tmk_Int=0endifendfunctionfunction InitTrig_TmkR takes nothing returns nothing
set gg_trg_TmkR=CreateTrigger()call DisableTrigger(gg_trg_TmkR)
call TriggerRegisterTimerEventPeriodic(gg_trg_TmkR,.05)call TriggerAddAction(gg_trg_TmkR,function Trig_TmkR_Actions)endfunctionfunction Trig_Sds_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05H')endfunctionfunction Trig_Sds_Actions takes nothing returns nothingset udg_Sds_Unit[0]=GetTriggerUnit()
set udg_Sds_Unit[1]=GetSpellTargetUnit()
call Dynamic_Sound("Sounds\\IchidaiSanzen.mp3")call SetUnitInvulnerable(udg_Sds_Unit[0],true)call SetUnitInvulnerable(udg_Sds_Unit[1],true)call PauseSystem(udg_Sds_Unit[0],true)call PauseSystem(udg_Sds_Unit[1],true)call SetUnitPathing(udg_Sds_Unit[0],false)set udg_Sds_Loc[0]=GetUnitLoc(udg_Sds_Unit[0])set udg_Sds_Loc[1]=GetUnitLoc(udg_Sds_Unit[1])set udg_Sds_Real[0]=AngleBetweenPoints(udg_Sds_Loc[0],udg_Sds_Loc[1])set udg_Sds_Loc[2]=PolarProjectionBJ(udg_Sds_Loc[1],-1200.,udg_Sds_Real[0])call SetUnitPositionLocFacingLocBJ(udg_Sds_Unit[0],udg_Sds_Loc[2],udg_Sds_Loc[1])call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[2],0)
call RemoveLocation(udg_Sds_Loc[0])set udg_Sds_Loc[0]=nullcall RemoveLocation(udg_Sds_Loc[1])set udg_Sds_Loc[1]=nullset udg_Sds_Loc[3]=PolarProjectionBJ(udg_Sds_Loc[2],150.,udg_Sds_Real[0])call RemoveLocation(udg_Sds_Loc[2])set udg_Sds_Loc[2]=nullcall CreateNUnitsAtLoc(1,'h03D',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[3],udg_Sds_Real[0])
set udg_Sds_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03D',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[3],udg_Sds_Real[0])
set udg_Sds_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Sds_Loc[3])set udg_Sds_Loc[3]=nullcall SetUnitAnimation(udg_Sds_Unit[0],"spell four")call SetUnitScalePercent(udg_Sds_Unit[2],160.,160.,160.)
call SetUnitVertexColorBJ(udg_Sds_Unit[2],'d',5.,'d',0)call SetUnitTimeScalePercent(udg_Sds_Unit[0],180.)call SetUnitTimeScalePercent(udg_Sds_Unit[2],250.)call SetUnitTimeScalePercent(udg_Sds_Unit[3],400.)set udg_Sds_Eff[0]=AddSpecialEffectTarget("ZoroBuff.mdl",udg_Sds_Unit[0],"weapon first")
set udg_Sds_Eff[1]=AddSpecialEffectTarget("ZoroBuff.mdl",udg_Sds_Unit[0],"weapon left")set udg_Sds_Eff[2]=AddSpecialEffectTarget("ZoroBuff.mdl",udg_Sds_Unit[0],"weapon right")
call DisplayText("Ichidai Sanzen",udg_Sds_Unit[0],.023,true,$DC,5,5,$FF)
set udg_Sds_Int[0]=1
call EnableTrigger(gg_trg_SdsV)call SetUnitTimeScalePercent(udg_Sds_Unit[0],440.)call TriggerSleepAction(.26)
set udg_Sds_Int[1]=50set udg_Sds_Int[2]=2
set udg_Sds_Real[1]=12.set udg_Sds_Real[2]=(2000.+(I2R(GetHeroStatBJ(0,udg_Sds_Unit[0],false))*(10.*I2R(GetUnitAbilityLevelSwapped('A05H',udg_Sds_Unit[0])))))call EnableTrigger(gg_trg_SdsL)endfunctionfunction InitTrig_Sds takes nothing returns nothingset gg_trg_Sds=CreateTrigger()call TriggerAddCondition(gg_trg_Sds,Condition(function Trig_Sds_Conditions))
call TriggerAddAction(gg_trg_Sds,function Trig_Sds_Actions)endfunctionfunction Trig_SdsL_Func003C takes nothing returns booleanreturn(udg_Sds_Int[1]<7)
endfunctionfunction Trig_SdsL_Func004Func034C takes nothing returns boolean
return(udg_Sds_Int[2]>1)
endfunctionfunction Trig_SdsL_Func004Func039C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Sds_Loc[2],PATHING_TYPE_WALKABILITY))
endfunctionfunction Trig_SdsL_Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Sds_Loc[0],udg_Sds_Loc[1])>=250.)and(IsUnitAliveBJ(udg_Sds_Unit[0]))and(IsUnitAliveBJ(udg_Sds_Unit[1]))and(udg_Sds_Int[1]>0)endfunctionfunction Trig_SdsL_Actions takes nothing returns nothing
set udg_Sds_Loc[0]=GetUnitLoc(udg_Sds_Unit[0])set udg_Sds_Loc[1]=GetUnitLoc(udg_Sds_Unit[1])if(Trig_SdsL_Func003C())then
set udg_Sds_Real[1]=85.endifif(Trig_SdsL_Func004C())then
set udg_Sds_Real[0]=AngleBetweenPoints(udg_Sds_Loc[0],udg_Sds_Loc[1])set udg_Sds_Loc[2]=PolarProjectionBJ(udg_Sds_Loc[0],udg_Sds_Real[1],udg_Sds_Real[0])
call EnumDestructablesInCircleBJ(200.,udg_Sds_Loc[2],function TreeKiller)call SetUnitPositionLocFacingBJ(udg_Sds_Unit[0],udg_Sds_Loc[2],udg_Sds_Real[0])call RemoveLocation(udg_Sds_Loc[0])set udg_Sds_Loc[0]=nullcall RemoveLocation(udg_Sds_Loc[1])set udg_Sds_Loc[1]=nullcall PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[2],0)
set udg_Sds_Loc[3]=PolarProjectionBJ(udg_Sds_Loc[2],150.,udg_Sds_Real[0])call RemoveLocation(udg_Sds_Loc[2])set udg_Sds_Loc[2]=nullcall SetUnitPositionLocFacingBJ(udg_Sds_Unit[2],udg_Sds_Loc[3],udg_Sds_Real[0])call SetUnitPositionLocFacingBJ(udg_Sds_Unit[3],udg_Sds_Loc[3],udg_Sds_Real[0])set udg_Sds_Loc[4]=PolarProjectionBJ(udg_Sds_Loc[3],-80.,udg_Sds_Real[0])call RemoveLocation(udg_Sds_Loc[3])set udg_Sds_Loc[3]=nullif(Trig_SdsL_Func004Func034C())thencall CreateNUnitsAtLoc(1,'h01M',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[4],udg_Sds_Real[0])
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,40.,60.,'d',0)call SetUnitScalePercent(bj_lastCreatedUnit,150.,150.,150.)set udg_Sds_Int[2]=0
else
set udg_Sds_Int[2]=(udg_Sds_Int[2]+1)endifcall RemoveLocation(udg_Sds_Loc[4])set udg_Sds_Loc[4]=nullset udg_Sds_Int[1]=(udg_Sds_Int[1]-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitTimeScalePercent(udg_Sds_Unit[0],.0)
call DestroyEffect(udg_Sds_Eff[0])call DestroyEffect(udg_Sds_Eff[1])call DestroyEffect(udg_Sds_Eff[2])set udg_Sds_Eff[0]=nullset udg_Sds_Eff[1]=nullset udg_Sds_Eff[2]=nullcall SetUnitPathing(udg_Sds_Unit[0],true)call CreateNUnitsAtLoc(1,'h038',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[1],udg_Sds_Real[0])
set udg_Sds_Unit[4]=bj_lastCreatedUnitset udg_Sds_Loc[2]=PolarProjectionBJ(udg_Sds_Loc[1],300.,udg_Sds_Real[0])call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[2],0)
if(Trig_SdsL_Func004Func039C())thencall SetUnitPositionLocFacingBJ(udg_Sds_Unit[0],udg_Sds_Loc[1],udg_Sds_Real[0])else
call SetUnitPositionLocFacingBJ(udg_Sds_Unit[0],udg_Sds_Loc[2],udg_Sds_Real[0])endifcall RemoveLocation(udg_Sds_Loc[0])set udg_Sds_Loc[0]=nullcall RemoveLocation(udg_Sds_Loc[1])set udg_Sds_Loc[1]=nullcall RemoveLocation(udg_Sds_Loc[2])set udg_Sds_Loc[2]=nullcall SetUnitVertexColorBJ(udg_Sds_Unit[0],'d','d','d',.0)call SetUnitVertexColorBJ(udg_Sds_Unit[4],'d','d','d',0)
call SetUnitScalePercent(udg_Sds_Unit[4],300.,300.,300.)
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Sds_Unit[4])
call RemoveUnit(udg_Sds_Unit[2])
call RemoveUnit(udg_Sds_Unit[3])
set udg_Sds_Unit[2]=null
set udg_Sds_Unit[3]=null
set udg_Sds_Unit[4]=null
call DisplayText("!",udg_Sds_Unit[1],.027,false,$FF,0,0,$FF)
call CreateTextTagUnitBJ("!",udg_Sds_Unit[1],0,12.,'d',.0,.0,0)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,2.)call TriggerSleepAction(1.26)call DisplayText("Daisen Sekai",udg_Sds_Unit[0],.023,true,$DC,5,5,$FF)call TriggerSleepAction(1.24)call Dynamic_Sound("Sounds\\Explosion.mp3")set udg_Sds_Loc[0]=GetUnitLoc(udg_Sds_Unit[1])call EnumDestructablesInCircleBJ(500.,udg_Sds_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'h03E',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)call SetUnitVertexColorBJ(bj_lastCreatedUnit,8.,58.,39.,0)call CreateNUnitsAtLoc(1,'h01X',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h01Z',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],bj_UNIT_FACING)set udg_Sds_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],GetRandomReal(0,360))set udg_Sds_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],GetRandomReal(0,360))set udg_Sds_Unit[4]=bj_lastCreatedUnitcall Dynamic_3D("Sounds\\SwordSlash.wav",GetLocationX(udg_Sds_Loc[0]),GetLocationY(udg_Sds_Loc[0]))set udg_Sds_Int[1]=1
loop
exitwhen udg_Sds_Int[1]>2call CreateNUnitsAtLoc(1,'h03F',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',GetOwningPlayer(udg_Sds_Unit[0]),udg_Sds_Loc[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call SetUnitScalePercent(bj_lastCreatedUnit,600.,600.,600.)set udg_Sds_Int[1]=udg_Sds_Int[1]+1endloopcall Dynamic_GroupShake(GetLocationX(udg_Sds_Loc[0]),GetLocationY(udg_Sds_Loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Sds_Loc[0])set udg_Sds_Loc[0]=nullcall UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sds_Unit[2])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sds_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sds_Unit[4])
call SetUnitTimeScalePercent(udg_Sds_Unit[0],100.)call SetUnitTimeScalePercent(udg_Sds_Unit[2],30.)call SetUnitTimeScalePercent(udg_Sds_Unit[3],30.)call SetUnitTimeScalePercent(udg_Sds_Unit[4],30.)call SetUnitAnimation(udg_Sds_Unit[0],"stand")call SetUnitInvulnerable(udg_Sds_Unit[0],false)call SetUnitInvulnerable(udg_Sds_Unit[1],false)call PauseSystem(udg_Sds_Unit[0],false)call PauseSystem(udg_Sds_Unit[1],false)call DisplayText(I2S(R2I(udg_Sds_Real[2]))+"!",udg_Sds_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Sds_Unit[0],udg_Sds_Unit[1],udg_Sds_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Sds_Unit[0]=null
set udg_Sds_Unit[1]=null
set udg_Sds_Unit[2]=null
set udg_Sds_Unit[3]=null
set udg_Sds_Unit[4]=null
set udg_Sds_Real[0]=.0set udg_Sds_Real[1]=.0set udg_Sds_Real[2]=.0set udg_Sds_Int[1]=0
set udg_Sds_Int[2]=0
set udg_Sds_Bool=falseendifendfunctionfunction InitTrig_SdsL takes nothing returns nothing
set gg_trg_SdsL=CreateTrigger()call DisableTrigger(gg_trg_SdsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdsL,.04)call TriggerAddAction(gg_trg_SdsL,function Trig_SdsL_Actions)endfunctionfunction Trig_SdsV_Func001C takes nothing returns booleanreturn(udg_Sds_Int[0]<45)endfunctionfunction Trig_SdsV_Actions takes nothing returns nothing
if(Trig_SdsV_Func001C())then
call SetUnitVertexColorBJ(udg_Sds_Unit[0],'d','d','d',(1.8*I2R(udg_Sds_Int[0])))
set udg_Sds_Int[0]=(udg_Sds_Int[0]+1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Sds_Int[0]=0
endifendfunctionfunction InitTrig_SdsV takes nothing returns nothing
set gg_trg_SdsV=CreateTrigger()call DisableTrigger(gg_trg_SdsV)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdsV,.05)call TriggerAddAction(gg_trg_SdsV,function Trig_SdsV_Actions)endfunctionfunction AISasuke__isAtked takes nothing returns boolean
return((GetUnitTypeId(GetTriggerUnit())==AISasuke__AIType1 or GetUnitTypeId(GetTriggerUnit())==AISasuke__AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AISasuke__isAtker takes nothing returns boolean
return((GetUnitTypeId(GetAttacker())==AISasuke__AIType1 or GetUnitTypeId(GetAttacker())==AISasuke__AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AISasuke__Cond takes nothing returns booleanif(not(AISasuke__isAtked()or AISasuke__isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AISasuke__Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AISasuke__AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AISasuke__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A05T')call SelectHeroSkill(mySelf,'A05U')call SelectHeroSkill(mySelf,'A05R')call SelectHeroSkill(mySelf,'A05P')call SelectHeroSkill(mySelf,'A05N')call SelectHeroSkill(mySelf,'A05M')endifcall IssueTargetOrderById(mySelf,$D009D,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D022F,myTarget)call IssueTargetOrderById(mySelf,$D0065,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)call IssueImmediateOrderById(mySelf,$D0080)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AISasuke__AINo])endfunctionfunction AISasuke__Init takes nothing returns nothingset udg_AI_Trig[AISasuke__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AISasuke__AINo],Condition(function AISasuke__Cond))
call TriggerAddAction(udg_AI_Trig[AISasuke__AINo],function AISasuke__Act)endfunctionfunction Amenotejikara_Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0J0')endfunctionfunction Amenotejikara_Act takes nothing returns nothing
local unit array ulocal real array xlocal real array ylocal real array rlocal player pset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])call DisplayText("Amenotejikara",u[0],.023,true,$FF,$FF,$FF,$FF)
set x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set r[0]=AngleBetweenXY(x[0],y[0],x[1],y[1])
if(IsUnitEnemy(u[1],p))thenset r[1]=120.set x[2]=PolarX(x[0],r[1],r[0])set y[2]=PolarY(y[0],r[1],r[0])call UnitMoveXY2(u[1],x[2],y[2])
call IssueTargetOrderById(u[0],$D000F,u[1])set u[2]=CreateUnit(p,'u003',x[1],y[1],bj_UNIT_FACING)set u[3]=CreateUnit(p,'u005',x[2],y[2],bj_UNIT_FACING)call UnitAddAbility(u[3],'A06F')
call UnitRemoveAbility(u[3],'Amov')call IssueTargetOrderById(u[3],$D00F1,u[0])else
set u[2]=CreateUnit(p,'u005',x[0],y[0],bj_UNIT_FACING)set bj_lastCreatedUnit=CreateUnit(p,'u003',x[1],y[1],(r[0]-$B4))
call UnitAddAbility(bj_lastCreatedUnit,'A060')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitApplyTimedLife(u[2],'BTLF',1.)set u[2]=CreateUnit(p,'u003',x[0],y[0],r[0])
set u[3]=CreateUnit(p,'u005',x[1],y[1],bj_UNIT_FACING)call UnitMoveXY2(u[0],x[1],y[1])
call UnitMoveXY2(u[1],x[0],y[0])
endifcall UnitAddAbility(u[2],'A060')
call IssueTargetOrderById(u[2],$D007F,u[3])call UnitApplyTimedLife(u[2],'BTLF',1.)call UnitApplyTimedLife(u[3],'BTLF',1.)set u[0]=nullset u[1]=nullset u[2]=nullset u[3]=nullset p=nullendfunctionfunction InitTrig_Amenotejikara takes nothing returns nothingset gg_trg_Amenotejikara=CreateTrigger()
call TriggerAddCondition(gg_trg_Amenotejikara,Condition(function Amenotejikara_Cond))call TriggerAddAction(gg_trg_Amenotejikara,function Amenotejikara_Act)endfunctionfunction Sasuke_Genjutsu_Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0IX')endfunctionfunction Sasuke_Genjutsu_Act takes nothing returns nothinglocal unit array uset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()call DisplayText("Genjutsu",u[0],.023,false,$FF,$FF,$FF,$FF)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Sleep\\SleepSpecialArt.mdx",u[1],"origin"))set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u[0]),'u003',GetUnitX(u[1]),GetUnitY(u[1]),bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A0J1')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set u[0]=nullset u[1]=nullendfunctionfunction InitTrig_Sasuke_Genjutsu takes nothing returns nothingset gg_trg_Sasuke_Genjutsu=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Genjutsu,Condition(function Sasuke_Genjutsu_Cond))call TriggerAddAction(gg_trg_Sasuke_Genjutsu,function Sasuke_Genjutsu_Act)endfunctionfunction Trig_Gkn_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05M')endfunctionfunction Trig_Gkn_Func020C takes nothing returns boolean
return(GetUnitTypeId(udg_Gkn_Unit[0])=='O003')endfunctionfunction Trig_Gkn_Actions takes nothing returns nothingset udg_Gkn_Unit[0]=GetTriggerUnit()
set udg_Gkn_Loc[0]=GetSpellTargetLoc()set udg_Gkn_Loc[1]=GetUnitLoc(udg_Gkn_Unit[0])set udg_Gkn_Real[0]=AngleBetweenPoints(udg_Gkn_Loc[1],udg_Gkn_Loc[0])set udg_Gkn_Loc[2]=PolarProjectionBJ(udg_Gkn_Loc[1],150.,udg_Gkn_Real[0])call RemoveLocation(udg_Gkn_Loc[0])set udg_Gkn_Loc[0]=nullcall RemoveLocation(udg_Gkn_Loc[1])set udg_Gkn_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h03H',GetOwningPlayer(udg_Gkn_Unit[0]),udg_Gkn_Loc[2],bj_UNIT_FACING)set udg_Gkn_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Gkn_Loc[2])set udg_Gkn_Loc[2]=nullset udg_Gkn_Real[1]=(110.+(115.*I2R(GetUnitAbilityLevelSwapped('A05M',udg_Gkn_Unit[0]))))set udg_Gkn_Real[2]=((.14+(.02*I2R(GetUnitAbilityLevelSwapped('A05M',udg_Gkn_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Gkn_Unit[0],true)))
set udg_Gkn_Real[3]=275.
set udg_Gkn_Int[0]=27set udg_Gkn_Int[1]=2
call DisplayText("Enton Gokakyu no Jutsu",udg_Gkn_Unit[0],.023,true,$FF,$FF,$FF,$FF)
if(Trig_Gkn_Func020C())thencall SetUnitAnimation(udg_Gkn_Unit[0],"attack alternate")endifcall EnableTrigger(gg_trg_GknL)endfunctionfunction InitTrig_Gkn takes nothing returns nothingset gg_trg_Gkn=CreateTrigger()call TriggerAddCondition(gg_trg_Gkn,Condition(function Trig_Gkn_Conditions))
call TriggerAddAction(gg_trg_Gkn,function Trig_Gkn_Actions)endfunctionfunction Trig_GknL_Func001Func004C takes nothing returns boolean
return(udg_Gkn_Int[1]==2)endfunctionfunction Trig_GknL_Func001Func006002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Gkn_Unit[0]))==false)endfunctionfunction Trig_GknL_Func001Func006002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_GknL_Func001Func006002003002002 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Gkn_Group2)==false)
endfunctionfunction Trig_GknL_Func001Func006002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_GknL_Func001Func006002003002001(),Trig_GknL_Func001Func006002003002002())endfunctionfunction Trig_GknL_Func001Func006002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_GknL_Func001Func006002003001(),Trig_GknL_Func001Func006002003002())endfunctionfunction Trig_GknL_Func001Func011A takes nothing returns nothing
set udg_Gkn_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Gkn_Group2,udg_Gkn_Unit[2])call UnitDamageTargetBJ(udg_Gkn_Unit[0],udg_Gkn_Unit[2],udg_Gkn_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Gkn_Unit[2]=null
endfunctionfunction Trig_GknL_Func001Func025A takes nothing returns nothing
call SetUnitAnimation(GetEnumUnit(),"death")
endfunctionfunction Trig_GknL_Func001C takes nothing returns booleanreturn(udg_Gkn_Int[0]>1)
endfunctionfunction Trig_GknL_Actions takes nothing returns nothing
if(Trig_GknL_Func001C())then
set udg_Gkn_Loc[0]=GetUnitLoc(udg_Gkn_Unit[1])set udg_Gkn_Loc[1]=PolarProjectionBJ(udg_Gkn_Loc[0],40.,udg_Gkn_Real[0])
call SetUnitPositionLoc(udg_Gkn_Unit[1],udg_Gkn_Loc[1])if(Trig_GknL_Func001Func004C())thenset udg_Gkn_Int[1]=0
call CreateNUnitsAtLoc(1,'h03I',GetOwningPlayer(udg_Gkn_Unit[0]),udg_Gkn_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h03J',GetOwningPlayer(udg_Gkn_Unit[0]),udg_Gkn_Loc[1],bj_UNIT_FACING)set udg_Gkn_Unit[2]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(10.,'BTLF',udg_Gkn_Unit[2])call GroupAddUnit(udg_Gkn_Group[1],udg_Gkn_Unit[2])set udg_Gkn_Unit[2]=null
else
set udg_Gkn_Int[1]=(udg_Gkn_Int[1]+1)endifcall EnumDestructablesInCircleBJ(udg_Gkn_Real[3],udg_Gkn_Loc[1],function TreeKiller)
set udg_Gkn_Group[0]=GetUnitsInRangeOfLocMatching(udg_Gkn_Real[3],udg_Gkn_Loc[1],Condition(function Trig_GknL_Func001Func006002003))
call RemoveLocation(udg_Gkn_Loc[0])set udg_Gkn_Loc[0]=nullcall RemoveLocation(udg_Gkn_Loc[1])set udg_Gkn_Loc[1]=nullcall ForGroupBJ(udg_Gkn_Group[0],function Trig_GknL_Func001Func011A)
call DestroyGroup(udg_Gkn_Group[0])set udg_Gkn_Group[0]=nullelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Gkn_Group2)call RemoveUnit(udg_Gkn_Unit[1])
call EnableTrigger(gg_trg_GknD)set udg_Gkn_Unit[1]=null
set udg_Gkn_Real[0]=.0set udg_Gkn_Real[1]=.0call TriggerSleepAction(2.5)
set udg_Gkn_Group[0]=CreateGroup()call GroupAddGroup(udg_Gkn_Group[1],udg_Gkn_Group[0])call ForGroupBJ(udg_Gkn_Group[0],function Trig_GknL_Func001Func025A)
call DestroyGroup(udg_Gkn_Group[0])set udg_Gkn_Group[0]=nullset udg_Gkn_Int[1]=0
endifset udg_Gkn_Int[0]=(udg_Gkn_Int[0]-1)endfunctionfunction InitTrig_GknL takes nothing returns nothing
set gg_trg_GknL=CreateTrigger()call DisableTrigger(gg_trg_GknL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GknL,.04)call TriggerAddAction(gg_trg_GknL,function Trig_GknL_Actions)endfunctionfunction Trig_GknD_Func001Func003Func002002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Gkn_Unit[0]))==false)endfunctionfunction Trig_GknD_Func001Func003Func002002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_GknD_Func001Func003Func002002003002002 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Gkn_Group2)==false)
endfunctionfunction Trig_GknD_Func001Func003Func002002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_GknD_Func001Func003Func002002003002001(),Trig_GknD_Func001Func003Func002002003002002())endfunctionfunction Trig_GknD_Func001Func003Func002002003 takes nothing returns boolean
return GetBooleanAnd(Trig_GknD_Func001Func003Func002002003001(),Trig_GknD_Func001Func003Func002002003002())endfunctionfunction Trig_GknD_Func001Func003Func005A takes nothing returns nothingset udg_Gkn_Unit[1]=GetEnumUnit()call GroupAddUnit(udg_Gkn_Group2,udg_Gkn_Unit[1])call UnitDamageTargetBJ(udg_Gkn_Unit[0],udg_Gkn_Unit[1],udg_Gkn_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Gkn_Unit[1]=null
endfunctionfunction Trig_GknD_Func001Func003A takes nothing returns nothing
set udg_Gkn_Loc[0]=GetUnitLoc(GetEnumUnit())
set udg_Gkn_Group[3]=GetUnitsInRangeOfLocMatching(udg_Gkn_Real[3],udg_Gkn_Loc[0],Condition(function Trig_GknD_Func001Func003Func002002003))call RemoveLocation(udg_Gkn_Loc[0])set udg_Gkn_Loc[0]=nullcall ForGroupBJ(udg_Gkn_Group[3],function Trig_GknD_Func001Func003Func005A)call DestroyGroup(udg_Gkn_Group[3])set udg_Gkn_Group[3]=nullendfunctionfunction Trig_GknD_Func001Func015A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_GknD_Func001C takes nothing returns booleanreturn(udg_Gkn_Int[1]>0)
endfunctionfunction Trig_GknD_Actions takes nothing returns nothing
if(Trig_GknD_Func001C())then
set udg_Gkn_Group[2]=CreateGroup()call GroupAddGroup(udg_Gkn_Group[1],udg_Gkn_Group[2])call ForGroupBJ(udg_Gkn_Group[2],function Trig_GknD_Func001Func003A)
call DestroyGroup(udg_Gkn_Group[2])set udg_Gkn_Group[2]=nullcall GroupClear(udg_Gkn_Group2)else
call DisableTrigger(GetTriggeringTrigger())set udg_Gkn_Unit[0]=null
set udg_Gkn_Real[2]=.0set udg_Gkn_Real[3]=.0call TriggerSleepAction(1.5)
set udg_Gkn_Group[0]=CreateGroup()call GroupAddGroup(udg_Gkn_Group[1],udg_Gkn_Group[0])call ForGroupBJ(udg_Gkn_Group[0],function Trig_GknD_Func001Func015A)
call DestroyGroup(udg_Gkn_Group[0])set udg_Gkn_Group[0]=nullcall GroupClear(udg_Gkn_Group[1])endifendfunctionfunction InitTrig_GknD takes nothing returns nothing
set gg_trg_GknD=CreateTrigger()call DisableTrigger(gg_trg_GknD)
call TriggerRegisterTimerEventPeriodic(gg_trg_GknD,.1)call TriggerAddAction(gg_trg_GknD,function Trig_GknD_Actions)endfunctionfunction Trig_Dot_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05N')endfunctionfunction Trig_Dot_Func008C takes nothing returns boolean
return(GetUnitTypeId(udg_Dot_Unit[0])=='O003')endfunctionfunction Trig_Dot_Func014Func001Func021C takes nothing returns booleanreturn(GetUnitTypeId(udg_Dot_Unit[0])=='O003')endfunctionfunction Trig_Dot_Func014Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Dot_Unit[0]))and(IsUnitAliveBJ(udg_Dot_Unit[1]))endfunctionfunction Trig_Dot_Func016A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_Dot_Func020Func005C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Dot_Unit[0]))endfunctionfunction Trig_Dot_Func020Func008C takes nothing returns booleanreturn(GetUnitTypeId(udg_Dot_Unit[0])=='O003')endfunctionfunction Trig_Dot_Func020C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Dot_Unit[0]))and(IsUnitAliveBJ(udg_Dot_Unit[1]))endfunctionfunction Trig_Dot_Actions takes nothing returns nothingset udg_Dot_Unit[0]=GetTriggerUnit()
set udg_Dot_Unit[1]=GetSpellTargetUnit()
call UnitAddAbility(udg_Dot_Unit[0],'A05O')call PauseSystem(udg_Dot_Unit[0],true)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Sasuke\\Chidori.wav",GetUnitX(udg_Dot_Unit[0]),GetUnitY(udg_Dot_Unit[0]))
set udg_Dot_Loc[0]=GetUnitLoc(udg_Dot_Unit[0])set udg_Dot_Loc[1]=GetUnitLoc(udg_Dot_Unit[1])if(Trig_Dot_Func008C())thencall DisplayText("Susanoo: Onyx Chidori",udg_Dot_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call SetUnitAnimation(udg_Dot_Unit[0],"stand alternate")
set udg_Dot_Real2[0]=200.set udg_Dot_Real2[1]=400.set udg_Dot_Real2[2]=-183.set udg_Dot_Real2[3]=147.set udg_Dot_Real2[4]=(370.-(DistanceBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])/ 5.))set udg_Dot_Real2[5]=550.set udg_Dot_Int=2else
call DisplayText("Onyx Chidori",udg_Dot_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SetUnitAnimation(udg_Dot_Unit[0],"spell two")set udg_Dot_Real2[0]=70.
set udg_Dot_Real2[1]=250.set udg_Dot_Real2[2]=20.
set udg_Dot_Real2[3]=.0set udg_Dot_Real2[4]=170.set udg_Dot_Real2[5]=300.set udg_Dot_Int=3endifset udg_Dot_Real[0]=AngleBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])call RemoveLocation(udg_Dot_Loc[0])set udg_Dot_Loc[0]=nullcall RemoveLocation(udg_Dot_Loc[1])set udg_Dot_Loc[1]=nullset udg_Dot_Int2=1loop
exitwhen udg_Dot_Int2>udg_Dot_Intif(Trig_Dot_Func014Func001C())thenset udg_Dot_Real[1]=GetRandomReal(udg_Dot_Real2[0],udg_Dot_Real2[1])
set udg_Dot_Loc[0]=GetUnitLoc(udg_Dot_Unit[0])set udg_Dot_Loc[1]=PolarProjectionBJ(udg_Dot_Loc[0],udg_Dot_Real2[2],udg_Dot_Real[0])set udg_Dot_Loc[2]=PolarProjectionBJ(udg_Dot_Loc[1],udg_Dot_Real2[3],(udg_Dot_Real[0]-45.))call CreateNUnitsAtLoc(1,'h03M',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[2],GetRandomReal(0,360))set udg_Dot_Unit[2]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Dot_Unit[2],udg_Dot_Real[1],udg_Dot_Real[1],udg_Dot_Real[1])set udg_Dot_Real[1]=GetRandomReal(udg_Dot_Real2[0],udg_Dot_Real2[1])
call CreateNUnitsAtLoc(1,'h03M',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[2],GetRandomReal(0,360))set udg_Dot_Unit[3]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Dot_Unit[3],udg_Dot_Real[1],udg_Dot_Real[1],udg_Dot_Real[1])call CreateNUnitsAtLoc(1,'h03N',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[2],bj_UNIT_FACING)set udg_Dot_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Dot_Loc[0])set udg_Dot_Loc[0]=nullcall RemoveLocation(udg_Dot_Loc[1])set udg_Dot_Loc[1]=nullcall RemoveLocation(udg_Dot_Loc[2])set udg_Dot_Loc[2]=nullcall UnitApplyTimedLifeBJ(.3,'BTLF',udg_Dot_Unit[4])
if(Trig_Dot_Func014Func001Func021C())thencall SetUnitFlyHeight(udg_Dot_Unit[2],230.,.0)call SetUnitFlyHeight(udg_Dot_Unit[3],230.,.0)call SetUnitFlyHeight(udg_Dot_Unit[4],230.,.0)endifcall AddSpecialEffectTargetUnitBJ("hand right",udg_Dot_Unit[0],"Abilities\\Weapons\\Bolt\\BoltImpact.mdl")call DestroyEffect(bj_lastCreatedEffect)
set udg_Dot_Unit[2]=null
set udg_Dot_Unit[3]=null
set udg_Dot_Unit[4]=null
set udg_Dot_Real[1]=.0call TriggerSleepAction(.03)
endifset udg_Dot_Int2=udg_Dot_Int2+1endloopset udg_Dot_Group=GetUnitsOfTypeIdAll('h03M')call ForGroupBJ(udg_Dot_Group,function Trig_Dot_Func016A)call DestroyGroup(udg_Dot_Group)
set udg_Dot_Group=nullset udg_Dot_Int=0loop
exitwhen udg_Dot_Int>3set udg_Dot_Real2[udg_Dot_Int]=.0set udg_Dot_Int=udg_Dot_Int+1endloopif(Trig_Dot_Func020C())thencall PauseSystem(udg_Dot_Unit[0],false)set udg_Dot_Real[0]=(350.+((2.+(1*I2R(GetUnitAbilityLevelSwapped('A05N',udg_Dot_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Dot_Unit[0],true))))
set udg_Dot_Int=16if(Trig_Dot_Func020Func008C())thencall SetUnitAnimation(udg_Dot_Unit[0],"attack alternate")call SetUnitTimeScalePercent(udg_Dot_Unit[0],udg_Dot_Real2[4])else
call SetUnitAnimation(udg_Dot_Unit[0],"spell three")
call SetUnitTimeScalePercent(udg_Dot_Unit[0],.0)
endifcall SetUnitPathing(udg_Dot_Unit[0],false)call EnableTrigger(gg_trg_DotL)else
call UnitRemoveAbility(udg_Dot_Unit[0],'A05O')call SetUnitTimeScalePercent(udg_Dot_Unit[0],100.)call PauseSystem(udg_Dot_Unit[0],false)if(Trig_Dot_Func020Func005C())thencall SetUnitAnimation(udg_Dot_Unit[0],"stand")endifset udg_Dot_Unit[0]=null
set udg_Dot_Unit[1]=null
set udg_Dot_Real[0]=.0set udg_Dot_Int=0endifset udg_Dot_Real[4]=.0endfunctionfunction InitTrig_Dot takes nothing returns nothingset gg_trg_Dot=CreateTrigger()call TriggerAddCondition(gg_trg_Dot,Condition(function Trig_Dot_Conditions))
call TriggerAddAction(gg_trg_Dot,function Trig_Dot_Actions)endfunctionfunction Trig_DotL_Func003Func001Func004C takes nothing returns booleanreturn(GetUnitTypeId(udg_Dot_Unit[0])=='O003')endfunctionfunction Trig_DotL_Func003Func001C takes nothing returns boolean
return(udg_Dot_Bool==false)and(DistanceBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])<250.)endfunctionfunction Trig_DotL_Func003Func010C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Dot_Loc[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_DotL_Func003Func029Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Dot_Unit[0]))endfunctionfunction Trig_DotL_Func003Func029C takes nothing returns boolean
return(DistanceBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])<180.)and(IsUnitAliveBJ(udg_Dot_Unit[0]))and(IsUnitAliveBJ(udg_Dot_Unit[1]))and(udg_Dot_Int>0)endfunctionfunction Trig_DotL_Func003Func036C takes nothing returns boolean
return(udg_Dot_Bool)
endfunctionfunction Trig_DotL_Func003C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])>=120.)and(IsUnitAliveBJ(udg_Dot_Unit[0]))and(IsUnitAliveBJ(udg_Dot_Unit[1]))and(udg_Dot_Int>0)endfunctionfunction Trig_DotL_Actions takes nothing returns nothing
set udg_Dot_Loc[0]=GetUnitLoc(udg_Dot_Unit[0])set udg_Dot_Loc[1]=GetUnitLoc(udg_Dot_Unit[1])if(Trig_DotL_Func003C())then
if(Trig_DotL_Func003Func001C())thenset udg_Dot_Bool=trueif(Trig_DotL_Func003Func001Func004C())thenelse
call SetUnitAnimation(udg_Dot_Unit[0],"spell three")
call SetUnitTimeScalePercent(udg_Dot_Unit[0],udg_Dot_Real2[4])endifendifset udg_Dot_Real[1]=AngleBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1])set udg_Dot_Loc[2]=PolarProjectionBJ(udg_Dot_Loc[0],80.,udg_Dot_Real[1])
call RemoveLocation(udg_Dot_Loc[0])set udg_Dot_Loc[0]=nullcall RemoveLocation(udg_Dot_Loc[1])set udg_Dot_Loc[1]=nullcall EnumDestructablesInCircleBJ(120.,udg_Dot_Loc[2],function TreeKiller)if(Trig_DotL_Func003Func010C())thencall SetUnitPositionLocFacingBJ(udg_Dot_Unit[0],udg_Dot_Loc[2],udg_Dot_Real[1])endifset udg_Dot_Loc[3]=PolarProjectionBJ(udg_Dot_Loc[2],100.,(udg_Dot_Real[1]-45.))call RemoveLocation(udg_Dot_Loc[2])set udg_Dot_Loc[2]=nullcall CreateNUnitsAtLoc(1,'h03L',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[3],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(.15,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Dot_Loc[3])set udg_Dot_Loc[3]=nullset udg_Dot_Int=(udg_Dot_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveLocation(udg_Dot_Loc[0])set udg_Dot_Loc[0]=nullcall RemoveLocation(udg_Dot_Loc[1])set udg_Dot_Loc[1]=nullcall SetUnitPathing(udg_Dot_Unit[0],true)call SetUnitTimeScalePercent(udg_Dot_Unit[0],100.)call UnitRemoveAbility(udg_Dot_Unit[0],'A05O')if(Trig_DotL_Func003Func029C())thenset udg_Dot_Loc[0]=GetUnitLoc(udg_Dot_Unit[0])set udg_Dot_Loc[1]=GetUnitLoc(udg_Dot_Unit[1])call CreateNUnitsAtLoc(1,'h03K',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[0],AngleBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1]))set udg_Dot_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03K',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[0],AngleBetweenPoints(udg_Dot_Loc[0],udg_Dot_Loc[1]))set udg_Dot_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03O',GetOwningPlayer(udg_Dot_Unit[0]),udg_Dot_Loc[1],bj_UNIT_FACING)set udg_Dot_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Dot_Loc[0])set udg_Dot_Loc[0]=nullcall RemoveLocation(udg_Dot_Loc[1])set udg_Dot_Loc[1]=nullcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Dot_Unit[2])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Dot_Unit[3])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Dot_Unit[4])
call SetUnitScalePercent(udg_Dot_Unit[2],udg_Dot_Real2[5],udg_Dot_Real2[5],udg_Dot_Real2[5])
call SetUnitScalePercent(udg_Dot_Unit[3],udg_Dot_Real2[5],udg_Dot_Real2[5],udg_Dot_Real2[5])
call SetUnitAnimation(udg_Dot_Unit[4],"death")set udg_Dot_Unit[2]=null
set udg_Dot_Unit[3]=null
set udg_Dot_Unit[4]=null
call UnitDamageTargetBJ(udg_Dot_Unit[0],udg_Dot_Unit[1],udg_Dot_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
if(Trig_DotL_Func003Func029Func001C())thencall SetUnitAnimation(udg_Dot_Unit[0],"stand ready")
endifendifset udg_Dot_Unit[0]=null
set udg_Dot_Unit[1]=null
set udg_Dot_Real[0]=.0set udg_Dot_Real[1]=.0set udg_Dot_Real[5]=.0set udg_Dot_Int=0if(Trig_DotL_Func003Func036C())thenset udg_Dot_Bool=falseendifendifendfunctionfunction InitTrig_DotL takes nothing returns nothing
set gg_trg_DotL=CreateTrigger()call DisableTrigger(gg_trg_DotL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DotL,.04)call TriggerAddAction(gg_trg_DotL,function Trig_DotL_Actions)endfunctionfunction SasukeSusanoo__EyesCond takes nothing returns booleanreturn(GetSpellAbilityId()==Sasuke_skSwitch)
endfunctionfunction SasukeSusanoo__SetSharingan takes unit u,boolean add returns nothingif(add)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'u003',GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0IU')call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitRemoveAbility(u,Sasuke_skBonusAgi)call UnitAddAbility(u,Sasuke_skBonusAgi)
call UnitRemoveAbility(u,Sasuke_skRinneEff)else
call UnitRemoveAbility(u,Sasuke_skSpeedBuff)
call UnitRemoveAbility(u,Sasuke_skBonusAgi)endifendfunctionfunction SasukeSusanoo__SetRinnegan takes unit u,boolean add returns nothing
if(add)thencall UnitAddAbility(u,Sasuke_skDefBonus)
call UnitAddAbility(u,Sasuke_skRinneEff)
else
call UnitRemoveAbility(u,Sasuke_skDefBonus)endifendfunctionfunction SasukeSusanoo__CheckEyesTech takes unit u returns nothingif(SasukeSusanoo__isSharingan)thencall UnitRemoveAbility(u,Sasuke_skUpgrade)call SasukeSusanoo__SetRinnegan(u,false)
call SasukeSusanoo__SetSharingan(u,true)
else
call SasukeSusanoo__SetSharingan(u,false)call SasukeSusanoo__SetRinnegan(u,true)call UnitAddAbility(u,Sasuke_skUpgrade)endifendfunctionfunction SasukeSusanoo__EyesAct takes nothing returns nothinglocal unit u=GetTriggerUnit()if(GetUnitAbilityLevel(u,Sasuke_skUpgrade)>0)thenset SasukeSusanoo__isSharingan=trueelse
set SasukeSusanoo__isSharingan=false
endifcall SasukeSusanoo__CheckEyesTech(u)
set u=nullendfunctionfunction SasukeSusanoo__SusanooCond takes nothing returns booleanreturn(GetSpellAbilityId()==SasukeSusanoo__skId)
endfunctionfunction SasukeSusanoo__SusanooAct takes nothing returns nothing
local unit u=GetTriggerUnit()local player plocal integer ilocal integer skArmorlocal real delay
local real x
local real y
call UnitMakeAbilityPermanent(u,true,'A05T')
call UnitMakeAbilityPermanent(u,true,'A05U')
if(GetUnitTypeId(u)!=SasukeSusanoo__morpId)thenset p=GetOwningPlayer(u)
call DisplayText("Susanoo !",u,.023,true,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h03Q',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,.3,.3,.3)call SetUnitVertexColor(bj_lastCreatedUnit,'d',55,'d',$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set p=nullcall TransfromAction(u,x,y)call TriggerSleepAction(udg_PermanentBonus_Delay)if(SasukeSusanoo__isSharingan)thencall UnitRemoveAbility(u,Sasuke_skUpgrade)call SasukeSusanoo__SetRinnegan(u,false)
call SasukeSusanoo__SetSharingan(u,true)
else
call SasukeSusanoo__SetSharingan(u,false)call SasukeSusanoo__SetRinnegan(u,true)call UnitAddAbility(u,Sasuke_skUpgrade)endifset skArmor='A05Q'set delay=(2.+(.2*I2R(GetUnitAbilityLevel(u,skArmor))))set i=0loop
call TriggerSleepAction(delay)set i=i+1if(GetUnitState(u,UNIT_STATE_LIFE)>0)and(GetUnitAbilityLevel(u,skArmor)>0)thencall SetUnitAbilityLevel(u,skArmor,i)else
set i=$B
endifexitwhen(i>$A)endloopelse
call TriggerSleepAction(udg_PermanentBonus_Delay)call SasukeSusanoo__CheckEyesTech(u)
endifset u=nullendfunctionfunction SusanooDAct takes nothing returns nothinglocal unit u=GetDyingUnit()local player p=GetOwningPlayer(u)call SetPlayerAbilityAvailable(p,Sasuke_skBookId,false)call TriggerSleepAction((udg_Revive_Time+1.))call SetPlayerAbilityAvailable(p,Sasuke_skBookId,true)call SasukeSusanoo__CheckEyesTech(u)
set u=nullset p=nullendfunctionfunction SasukeSusanoo__Init takes nothing returns nothingcall TriggerAddCondition(Sasuke_EyesTrg,Condition(function SasukeSusanoo__EyesCond))
call TriggerAddAction(Sasuke_EyesTrg,function SasukeSusanoo__EyesAct)set gg_trg_Sasuke_Susanoo=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Susanoo,Condition(function SasukeSusanoo__SusanooCond))call TriggerAddAction(gg_trg_Sasuke_Susanoo,function SasukeSusanoo__SusanooAct)call TriggerAddAction(Sasuke_SusanooD,function SusanooDAct)endfunctionfunction Kirin__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Kirin__skId)
endfunctionfunction Kirin__Act takes nothing returns nothinglocal unit u
local unit pickedlocal player plocal real array xlocal real array ylocal real array rlocal integer ilocal integer jset u=GetTriggerUnit()set x[0]=GetUnitX(u)
set y[0]=GetUnitY(u)
set p=GetOwningPlayer(u)
call DisplayText("Kirin",u,.023,false,$FF,$FF,$FF,$FF)set bj_lastCreatedUnit=CreateUnit(p,'h03R',x[0],y[0],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set i=1loop
exitwhen(i>6)set r[0]=(I2R(i)*105.)set j=1loop
exitwhen(j>$A)set r[1]=(I2R(j)*36.)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(p,'h04S',x[1],y[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h04X',x[1],y[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(p,'h04G',x[1],y[1],bj_UNIT_FACING)
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set j=j+1endloopset i=i+1endloopset u=nullset p=nullendfunctionfunction Kirin__Init takes nothing returns nothingset gg_trg_Kirin=CreateTrigger()
call TriggerAddCondition(gg_trg_Kirin,Condition(function Kirin__Cond))call TriggerAddAction(gg_trg_Kirin,function Kirin__Act)endfunctionfunction Trig_Sck_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05U')endfunctionfunction Trig_Sck_Func010C takes nothing returns boolean
return(GetUnitTypeId(udg_Sck_Unit[0])=='O003')endfunctionfunction Trig_Sck_Actions takes nothing returns nothingset udg_Sck_Unit[0]=GetTriggerUnit()
set udg_Sck_Unit[1]=GetSpellTargetUnit()
call DisplayText("Rikudo: Chibaku Tensei",udg_Sck_Unit[0],.023,false,$DC,5,5,$FF)call UnitAddAbility(udg_Sck_Unit[0],'A05V')call Dynamic_Sound("Sounds\\Sharingan.mp3")call SetUnitInvulnerable(udg_Sck_Unit[0],true)call SetUnitInvulnerable(udg_Sck_Unit[1],true)call PauseSystem(udg_Sck_Unit[0],true)call PauseSystem(udg_Sck_Unit[1],true)if(Trig_Sck_Func010C())thencall SetUnitAnimation(udg_Sck_Unit[0],"stand alternate")
else
call SetUnitAnimation(udg_Sck_Unit[0],"spell channel")endifcall SetUnitFly(udg_Sck_Unit[1])
call SetUnitFlyHeight(udg_Sck_Unit[1],1.,.0)
call SetUnitFly(udg_Sck_Unit[1])
call SetUnitFlyHeight(udg_Sck_Unit[1],660.,.0)set udg_Sck_Loc[0]=GetUnitLoc(udg_Sck_Unit[1])call SetUnitPositionLoc(udg_Sck_Unit[1],udg_Sck_Loc[0])call CreateNUnitsAtLoc(1,'h013',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03Z',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h013',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03T',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)call GroupAddUnit(udg_Sck_Group[0],bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03U',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],GetRandomReal(0,360))call GroupAddUnit(udg_Sck_Group[0],bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03U',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],GetRandomReal(0,360))call GroupAddUnit(udg_Sck_Group[0],bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03X',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Sck_Loc[0])set udg_Sck_Loc[0]=nullcall SetUnitTimeScalePercent(udg_Sck_Unit[2],50.)call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Sck_Unit[2])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Sck_Unit[3])
call SetUnitFlyHeight(udg_Sck_Unit[3],udg_Sck_Real,.0)call GroupAddUnit(udg_Sck_Group[0],udg_Sck_Unit[4])call SetUnitTimeScalePercent(udg_Sck_Unit[4],20.)set udg_Sck_Unit[2]=null
set udg_Sck_Unit[3]=null
set udg_Sck_Unit[4]=null
set udg_Sck_Int[0]=30set udg_Sck_Int[1]=0
call EnableTrigger(gg_trg_SckL)endfunctionfunction InitTrig_Sck takes nothing returns nothingset gg_trg_Sck=CreateTrigger()call TriggerAddCondition(gg_trg_Sck,Condition(function Trig_Sck_Conditions))
call TriggerAddAction(gg_trg_Sck,function Trig_Sck_Actions)endfunctionfunction Trig_SckL_Func001Func001C takes nothing returns boolean
return(udg_Sck_Int[0]==$F)endfunctionfunction Trig_SckL_Func001Func005C takes nothing returns boolean
return(udg_Sck_Int[1]==4)endfunctionfunction Trig_SckL_Func001Func015A takes nothing returns nothing
set udg_Sck_Unit[2]=GetEnumUnit()call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Sck_Unit[2])call SetUnitAnimation(udg_Sck_Unit[2],"death")set udg_Sck_Unit[2]=null
endfunctionfunction Trig_SckL_Func001Func018Func032C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Sck_Unit[1]))endfunctionfunction Trig_SckL_Func001Func018C takes nothing returns boolean
return(udg_Sck_Int[0]!=0)endfunctionfunction Trig_SckL_Func001C takes nothing returns booleanreturn(udg_Sck_Int[0]>0)and(IsUnitAliveBJ(udg_Sck_Unit[1]))endfunctionfunction Trig_SckL_Actions takes nothing returns nothing
if(Trig_SckL_Func001C())then
if(Trig_SckL_Func001Func001C())thencall SetUnitInvulnerable(udg_Sck_Unit[0],false)call PauseSystem(udg_Sck_Unit[0],false)endifset udg_Sck_Loc[0]=GetUnitLoc(udg_Sck_Unit[1])call CreateNUnitsAtLoc(1,'h03V',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],GetRandomReal(0,360))set udg_Sck_Unit[3]=bj_lastCreatedUnitif(Trig_SckL_Func001Func005C())thenset udg_Sck_Loc[1]=PolarProjectionBJ(udg_Sck_Loc[0],GetRandomReal(0,150.),GetRandomReal(0,360))call CreateNUnitsAtLoc(1,'h03Y',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[1],bj_UNIT_FACING)set udg_Sck_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Sck_Loc[1])set udg_Sck_Loc[1]=nullcall UnitApplyTimedLifeBJ(1.2,'BTLF',udg_Sck_Unit[4])call SetUnitAnimation(udg_Sck_Unit[4],"death")set udg_Sck_Unit[4]=null
set udg_Sck_Int[1]=0
else
set udg_Sck_Int[1]=(udg_Sck_Int[1]+1)endifcall RemoveLocation(udg_Sck_Loc[0])set udg_Sck_Loc[0]=nullcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Sck_Unit[3])
call SetUnitFlyHeight(udg_Sck_Unit[3],GetRandomReal(20.,150.),.0)set udg_Sck_Unit[3]=null
set udg_Sck_Int[0]=(udg_Sck_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Sck_Group[1]=CreateGroup()call GroupAddGroup(udg_Sck_Group[0],udg_Sck_Group[1])call GroupClear(udg_Sck_Group[0])call ForGroupBJ(udg_Sck_Group[1],function Trig_SckL_Func001Func015A)
call DestroyGroup(udg_Sck_Group[1])set udg_Sck_Group[1]=nullif(Trig_SckL_Func001Func018C())thencall UnitRemoveAbility(udg_Sck_Unit[0],'A05V')call SetUnitInvulnerable(udg_Sck_Unit[0],false)call SetUnitInvulnerable(udg_Sck_Unit[1],false)call PauseSystem(udg_Sck_Unit[0],false)call PauseSystem(udg_Sck_Unit[1],false)call SetUnitFlyHeight(udg_Sck_Unit[1],.0,.0)
set udg_Sck_Unit[0]=null
set udg_Sck_Unit[1]=null
set udg_Sck_Real=.0set udg_Sck_Int[0]=0
set udg_Sck_Int[1]=0
else
call CinematicFadeBJ(2,1.25,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0,0,0,0)call TriggerSleepAction(.5)set udg_Sck_Loc[0]=GetUnitLoc(udg_Sck_Unit[1])call CreateNUnitsAtLoc(1,'h03W',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Sck_Loc[0])set udg_Sck_Loc[0]=nullcall TriggerSleepAction(1.)set udg_Sck_Real=4000.call SetUnitFlyHeight(udg_Sck_Unit[1],.0,udg_Sck_Real)call SetUnitFlyHeight(udg_Sck_Unit[2],.0,udg_Sck_Real)call TriggerSleepAction(.1)set udg_Sck_Loc[0]=GetUnitLoc(udg_Sck_Unit[1])call SetUnitFlyHeight(udg_Sck_Unit[1],.0,.0)
call SetUnitPositionLoc(udg_Sck_Unit[1],udg_Sck_Loc[0])call RemoveLocation(udg_Sck_Loc[0])set udg_Sck_Loc[0]=nullcall RemoveUnit(udg_Sck_Unit[2])
call SetUnitInvulnerable(udg_Sck_Unit[1],false)call PauseSystem(udg_Sck_Unit[1],false)if(Trig_SckL_Func001Func018Func032C())thencall Dynamic_Sound("Sounds\\Explosion.mp3")set udg_Sck_Loc[0]=GetUnitLoc(udg_Sck_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Sck_Loc[0]),GetLocationY(udg_Sck_Loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call CreateNUnitsAtLoc(1,'h01O',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01O',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],GetRandomReal(0,360))set udg_Sck_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h023',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)set udg_Sck_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01X',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h01X',GetOwningPlayer(udg_Sck_Unit[0]),udg_Sck_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Sck_Loc[0])set udg_Sck_Loc[0]=nullcall UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sck_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sck_Unit[4])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Sck_Unit[5])
call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Sck_Unit[6])
call SetUnitScalePercent(udg_Sck_Unit[3],450.,450.,450.)
call SetUnitScalePercent(udg_Sck_Unit[4],450.,450.,450.)
call SetUnitScalePercent(udg_Sck_Unit[5],300.,300.,300.)
call SetUnitScalePercent(udg_Sck_Unit[6],600.,600.,600.)
call SetUnitTimeScalePercent(udg_Sck_Unit[5],30.)call SetUnitTimeScalePercent(udg_Sds_Unit[2],30.)set udg_Sck_Real=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A05U',udg_Sck_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Sck_Unit[0],false))))
call DisplayText(I2S(R2I(udg_Sck_Real))+"!",udg_Sck_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Sck_Unit[0],udg_Sck_Unit[1],udg_Sck_Real,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)call UnitRemoveAbility(udg_Sck_Unit[0],'A05V')set udg_Sck_Unit[0]=null
set udg_Sck_Unit[1]=null
set udg_Sck_Unit[2]=null
set udg_Sck_Unit[3]=null
set udg_Sck_Unit[4]=null
set udg_Sck_Unit[5]=null
set udg_Sck_Unit[6]=null
set udg_Sck_Real=.0set udg_Sck_Int[1]=0
else
call UnitRemoveAbility(udg_Sck_Unit[0],'A05V')set udg_Sck_Unit[0]=null
set udg_Sck_Unit[1]=null
set udg_Sck_Unit[2]=null
set udg_Sck_Real=.0set udg_Sck_Int[1]=0
endifendifendifendfunctionfunction InitTrig_SckL takes nothing returns nothing
set gg_trg_SckL=CreateTrigger()call DisableTrigger(gg_trg_SckL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SckL,.08)call TriggerAddAction(gg_trg_SckL,function Trig_SckL_Actions)endfunctionfunction SasukeAmaterasu__Cond takes nothing returns boolean
return(GetSpellAbilityId()==SasukeAmaterasu__skId)endfunctionfunction SasukeAmaterasu__Act takes nothing returns nothinglocal effect eff
local real garea
local unit array ulocal player plocal group glocal group gdummylocal real array xlocal real array ylocal real array rlocal real array dmg
local integer ilocal integer jset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set eff=AddSpecialEffectTarget("Amaterasu2.mdx",u[1],"origin")set p=GetOwningPlayer(u[0])set garea=600.set dmg[0]=50.+I2R(GetUnitAbilityLevel(u[0],SasukeAmaterasu__skId)*50)set dmg[1]=GetHeroAgi(u[0],true)
call Dynamic_Sound("Sounds\\Amaterasu2.mp3")
call DisplayText("Amaterasu !",u[0],.023,false,$DC,5,5,$FF)set x[0]=GetUnitX(u[1])set y[0]=GetUnitY(u[1])set gdummy=CreateGroup()
call GroupAddUnit(gdummy,CreateUnit(p,'h03S',x[0],y[0],bj_UNIT_FACING))set i=0loop
exitwhen(i>5)set r[0]=I2R(i*'n')set j=0loop
exitwhen(j>8)set r[1]=I2R(j*45)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(p,'h03Z',x[1],y[1],bj_UNIT_FACING)
call GroupAddUnit(gdummy,bj_lastCreatedUnit)
call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call SetUnitTimeScale(bj_lastCreatedUnit,.7)
call GroupAddUnit(gdummy,CreateUnit(p,'h08C',x[1],y[1],bj_UNIT_FACING))set j=j+1endloopset i=i+1endloopset i=$A
loop
exitwhen(i<1)call TriggerSleepAction(.5)set g=CreateGroupXY(x[0],y[0],garea,p)loop
set u[2]=FirstOfGroup(g)
exitwhen(u[2]==null)
call GroupRemoveUnit(g,u[2])
call UnitPureDamageTarget(u[0],u[2],dmg[0])endloopcall DestroyGroup(g)
set g=nullif(eff!=null)and(GetUnitState(u[1],UNIT_STATE_LIFE)>0)thencall UnitPureDamageTarget(u[0],u[1],dmg[1])else
call DestroyEffect(eff)set eff=null
endifset i=i-1endlooploop
set u[2]=FirstOfGroup(gdummy)exitwhen(u[2]==null)
call GroupRemoveUnit(gdummy,u[2])call UnitApplyTimedLife(u[2],'BTLF',1.)endloopcall DestroyGroup(gdummy)set gdummy=nullif(eff!=null)thencall DestroyEffect(eff)set eff=null
endifset u[0]=nullset u[1]=nullset p=nullendfunctionfunction SasukeAmaterasu__Init takes nothing returns nothing
set gg_trg_Sasuke_Amaterasu=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Amaterasu,Condition(function SasukeAmaterasu__Cond))call TriggerAddAction(gg_trg_Sasuke_Amaterasu,function SasukeAmaterasu__Act)
endfunctionfunction AI_Sado_Cond5 takes nothing returns boolean
if((GetUnitTypeId(GetTriggerUnit())=='H003'))thenreturn trueelseif((GetUnitTypeId(GetTriggerUnit())=='H044'))thenreturn trueendifreturn false
endfunctionfunction AI_Sado_Cond3 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Sado_Cond5())thenreturn false
endifreturn trueendfunctionfunction AI_Sado_Cond4 takes nothing returns boolean
if((GetUnitTypeId(GetAttacker())=='H003'))thenreturn trueelseif((GetUnitTypeId(GetAttacker())=='H044'))thenreturn trueendifreturn false
endfunctionfunction AI_Sado_Cond2 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Sado_Cond4())thenreturn false
endifreturn trueendfunctionfunction AI_Sado_Cond1 takes nothing returns boolean
if(AI_Sado_Cond3())thenreturn trueelseif(AI_Sado_Cond2())thenreturn trueendifreturn false
endfunctionfunction AI_Sado_Cond takes nothing returns booleanif(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Sado_Cond1())thenreturn false
endifreturn trueendfunctionfunction AI_Sado_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(GetUnitTypeId(GetTriggerUnit())=='H003' or GetUnitTypeId(GetTriggerUnit())=='H044')thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A062')call SelectHeroSkill(AI_1,'A061')call SelectHeroSkill(AI_1,'A05Y')call SelectHeroSkill(AI_1,'A05X')call SelectHeroSkill(AI_1,'A05W')endifset AI_Point1=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0264,AI_Point1)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D007F,AI_2)call IssueImmediateOrderById(AI_1,$D009F)call IssueImmediateOrderById(AI_1,$D02B7)endifcall RemoveLocation(AI_Point1)set AI_Point1=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Sado takes nothing returns nothingset udg_AI_Trig[6]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[6],Condition(function AI_Sado_Cond))call TriggerAddAction(udg_AI_Trig[6],function AI_Sado_Act)endfunctionfunction Trig_Osg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05W')endfunctionfunction Trig_Osg_Actions takes nothing returns nothingset udg_Osg_Unit[0]=GetTriggerUnit()
set udg_Osg_Loc[0]=GetSpellTargetLoc()set udg_Osg_Loc[1]=GetUnitLoc(udg_Osg_Unit[0])set udg_Osg_Real[0]=AngleBetweenPoints(udg_Osg_Loc[1],udg_Osg_Loc[0])call CreateNUnitsAtLoc(1,'h041',GetOwningPlayer(udg_Osg_Unit[0]),udg_Osg_Loc[1],udg_Osg_Real[0])
set udg_Osg_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Osg_Loc[0])set udg_Osg_Loc[0]=nullcall RemoveLocation(udg_Osg_Loc[1])set udg_Osg_Loc[1]=nullcall SetUnitAnimation(udg_Osg_Unit[1],"birth")call SetUnitTimeScalePercent(udg_Osg_Unit[1],20.)set udg_Osg_Int=20set udg_Osg_Real[1]=40.set udg_Osg_Real[2]=220.
set udg_Osg_Real[3]=300.
set udg_Osg_Real[4]=500.
set udg_Osg_Real[5]=BasicDmg_Q(udg_Osg_Unit[0],'A05W',0)
call AddSpecialEffectTargetUnitBJ("origin",udg_Osg_Unit[0],"Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl")call DestroyEffect(bj_lastCreatedEffect)
call DisplayText("El Directo",udg_Osg_Unit[0],.023,true,$FF,$FF,$FF,$FF)
call EnableTrigger(gg_trg_OsgL)endfunctionfunction InitTrig_Osg takes nothing returns nothingset gg_trg_Osg=CreateTrigger()call TriggerAddCondition(gg_trg_Osg,Condition(function Trig_Osg_Conditions))
call TriggerAddAction(gg_trg_Osg,function Trig_Osg_Actions)endfunctionfunction Trig_OsgL_Func001Func003A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupRemoveUnit(udg_Osg_Group7,udg_Osg_Unit[2])
set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func008A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupAddUnit(udg_Osg_Group7,udg_Osg_Unit[2])call GroupRemoveUnit(udg_Osg_Group6,udg_Osg_Unit[2])
set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func013A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupAddUnit(udg_Osg_Group6,udg_Osg_Unit[2])call GroupRemoveUnit(udg_Osg_Group5,udg_Osg_Unit[2])
set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func018A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupAddUnit(udg_Osg_Group5,udg_Osg_Unit[2])call GroupRemoveUnit(udg_Osg_Group4,udg_Osg_Unit[2])
set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func023A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupAddUnit(udg_Osg_Group4,udg_Osg_Unit[2])call GroupRemoveUnit(udg_Osg_Group3,udg_Osg_Unit[2])
set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func031002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Osg_Unit[0]))==false)endfunctionfunction Trig_OsgL_Func001Func031002003002001 takes nothing returns booleanreturn(IsUnitPaused(GetFilterUnit())==false)
endfunctionfunction Trig_OsgL_Func001Func031002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_OsgL_Func001Func031002003002002002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Osg_Group2)==false)
endfunctionfunction Trig_OsgL_Func001Func031002003002002002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_OsgL_Func001Func031002003002002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_OsgL_Func001Func031002003002002002001(),Trig_OsgL_Func001Func031002003002002002002())endfunctionfunction Trig_OsgL_Func001Func031002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_OsgL_Func001Func031002003002002001(),Trig_OsgL_Func001Func031002003002002002())endfunctionfunction Trig_OsgL_Func001Func031002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_OsgL_Func001Func031002003002001(),Trig_OsgL_Func001Func031002003002002())endfunctionfunction Trig_OsgL_Func001Func031002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_OsgL_Func001Func031002003001(),Trig_OsgL_Func001Func031002003002())endfunctionfunction Trig_OsgL_Func001Func038A takes nothing returns nothing
set udg_Osg_Unit[2]=GetEnumUnit()set udg_Osg_Loc[3]=GetUnitLoc(udg_Osg_Unit[2])call AddSpecialEffectTargetUnitBJ("origin",udg_Osg_Unit[2],"Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl")call DestroyEffect(bj_lastCreatedEffect)
set udg_Osg_Loc[4]=PolarProjectionBJ(udg_Osg_Loc[3],25.,udg_Osg_Real[0])
call RemoveLocation(udg_Osg_Loc[3])set udg_Osg_Loc[3]=nullset udg_Osg_X=GetLocationX(udg_Osg_Loc[4])set udg_Osg_Y=GetLocationY(udg_Osg_Loc[4])call RemoveLocation(udg_Osg_Loc[4])set udg_Osg_Loc[4]=nullif(IsTerrainPathable(udg_Osg_X,udg_Osg_Y,PATHING_TYPE_WALKABILITY)==false)thencall SetUnitX(udg_Osg_Unit[2],udg_Osg_X)
call SetUnitY(udg_Osg_Unit[2],udg_Osg_Y)
endifcall GroupAddUnit(udg_Osg_Group2,udg_Osg_Unit[2])call GroupAddUnit(udg_Osg_Group3,udg_Osg_Unit[2])call UnitDamageTargetBJ(udg_Osg_Unit[0],udg_Osg_Unit[2],udg_Osg_Real[5],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Osg_Unit[2]=null
endfunctionfunction Trig_OsgL_Func001Func042C takes nothing returns boolean
return(udg_Osg_Int==5)endfunctionfunction Trig_OsgL_Func001C takes nothing returns booleanreturn(udg_Osg_Int>0)and(IsUnitAliveBJ(udg_Osg_Unit[1]))
endfunctionfunction Trig_OsgL_Actions takes nothing returns nothing
if(Trig_OsgL_Func001C())then
set udg_Osg_Group=CreateGroup()call GroupAddGroup(udg_Osg_Group7,udg_Osg_Group)
call ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func003A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Group=CreateGroup()call GroupAddGroup(udg_Osg_Group6,udg_Osg_Group)
call ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func008A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Group=CreateGroup()call GroupAddGroup(udg_Osg_Group5,udg_Osg_Group)
call ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func013A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Group=CreateGroup()call GroupAddGroup(udg_Osg_Group4,udg_Osg_Group)
call ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func018A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Group=CreateGroup()call GroupAddGroup(udg_Osg_Group3,udg_Osg_Group)
call ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func023A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Loc[0]=GetUnitLoc(udg_Osg_Unit[1])set udg_Osg_Loc[1]=PolarProjectionBJ(udg_Osg_Loc[0],udg_Osg_Real[1],udg_Osg_Real[0])
set udg_Osg_Loc[2]=PolarProjectionBJ(udg_Osg_Loc[1],udg_Osg_Real[2],udg_Osg_Real[0])
call SetUnitPositionLoc(udg_Osg_Unit[1],udg_Osg_Loc[1])call EnumDestructablesInCircleBJ(udg_Osg_Real[3],udg_Osg_Loc[2],function TreeKiller)
set udg_Osg_Group=GetUnitsInRangeOfLocMatching(udg_Osg_Real[3],udg_Osg_Loc[2],Condition(function Trig_OsgL_Func001Func031002003))call RemoveLocation(udg_Osg_Loc[0])set udg_Osg_Loc[0]=nullcall RemoveLocation(udg_Osg_Loc[1])set udg_Osg_Loc[1]=nullcall RemoveLocation(udg_Osg_Loc[2])set udg_Osg_Loc[2]=nullcall ForGroupBJ(udg_Osg_Group,function Trig_OsgL_Func001Func038A)call DestroyGroup(udg_Osg_Group)
set udg_Osg_Group=nullset udg_Osg_Int=(udg_Osg_Int-1)if(Trig_OsgL_Func001Func042C())thencall SetUnitTimeScalePercent(udg_Osg_Unit[1],50.)call SetUnitAnimation(udg_Osg_Unit[1],"death")endifelse
call DisableTrigger(GetTriggeringTrigger())call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Osg_Unit[1])
call GroupClear(udg_Osg_Group2)call GroupClear(udg_Osg_Group3)call GroupClear(udg_Osg_Group4)call GroupClear(udg_Osg_Group5)set udg_Osg_Unit[0]=null
set udg_Osg_Unit[1]=null
set udg_Osg_Real[0]=.0set udg_Osg_Real[1]=.0set udg_Osg_Real[2]=.0set udg_Osg_Real[3]=.0set udg_Osg_Real[4]=.0set udg_Osg_Real[5]=.0set udg_Osg_Int=0endifendfunctionfunction InitTrig_OsgL takes nothing returns nothing
set gg_trg_OsgL=CreateTrigger()call DisableTrigger(gg_trg_OsgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_OsgL,.04)call TriggerAddAction(gg_trg_OsgL,function Trig_OsgL_Actions)endfunctionfunction Trig_Dsf_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A05X')endfunctionfunction Trig_Dsf_Init_Actions takes nothing returns nothing
set udg_Dsf_Int=17set udg_Dsf_Real=.8call TriggerRegisterUnitEvent(gg_trg_Dsf,GetLearningUnit(),EVENT_UNIT_DAMAGED)call EnableTrigger(gg_trg_Dsf)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Dsf_Init takes nothing returns nothing
set gg_trg_Dsf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Dsf_Init,Condition(function Trig_Dsf_Init_Conditions))call TriggerAddAction(gg_trg_Dsf_Init,function Trig_Dsf_Init_Actions)endfunctionfunction Dsf_Cond takes nothing returns booleanreturn(GetRandomInt(1,'d')<udg_Dsf_Int)endfunctionfunction Dsf_DMGCheck takes real dmg returns boolean
return(dmg<1.)endfunctionfunction Trig_Dsf_Actions takes nothing returns nothinglocal unit Dsf_U=GetTriggerUnit()local real array Dsf_Dmg
local location array Dsf_Lif(GetUnitLifePercent(Dsf_U)<'d')thencall DisableTrigger(gg_trg_Dsf)set Dsf_Dmg[0]=GetEventDamage()set Dsf_Dmg[1]=(Dsf_Dmg[0]-((1.6+(.2*I2R(GetUnitAbilityLevelSwapped('A05X',Dsf_U))))*I2R(GetHeroStatBJ(0,Dsf_U,true))))set Dsf_L[0]=GetUnitLoc(Dsf_U)set Dsf_L[1]=GetUnitLoc(GetEventDamageSource())call CreateNUnitsAtLoc(1,'h042',GetOwningPlayer(Dsf_U),Dsf_L[0],AngleBetweenPoints(Dsf_L[0],Dsf_L[1]))call UnitApplyTimedLifeBJ(.7,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Dsf_L[0])set Dsf_L[0]=nullcall RemoveLocation(Dsf_L[1])set Dsf_L[1]=nullif(Dsf_DMGCheck(Dsf_Dmg[1]))then
call SetWidgetLife(Dsf_U,(GetUnitStateSwap(UNIT_STATE_LIFE,Dsf_U)+Dsf_Dmg[0]))else
call SetWidgetLife(Dsf_U,(GetUnitStateSwap(UNIT_STATE_LIFE,Dsf_U)+Dsf_Dmg[1]))endifset Dsf_Dmg[0]=.0set Dsf_Dmg[1]=.0call TriggerSleepAction(udg_Dsf_Real)call EnableTrigger(gg_trg_Dsf)endifset Dsf_U=nullendfunctionfunction InitTrig_Dsf takes nothing returns nothingset gg_trg_Dsf=CreateTrigger()call DisableTrigger(gg_trg_Dsf)call TriggerAddCondition(gg_trg_Dsf,Condition(function Dsf_Cond))call TriggerAddAction(gg_trg_Dsf,function Trig_Dsf_Actions)endfunctionfunction Trig_BrazoDiablo_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05Y')endfunctionfunction Trig_BrazoDiablo_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='H044')then
set p=GetOwningPlayer(u)
call DisplayText("Brazo Izquierda del Diablo",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h043',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h045',x,y,GetRandomReal(0,360))
call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$C,$C,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call TransfromAction(u,x,y)set p=nullendifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_BrazoDiablo takes nothing returns nothingset gg_trg_BrazoDiablo=CreateTrigger()call TriggerAddCondition(gg_trg_BrazoDiablo,Condition(function Trig_BrazoDiablo_Conditions))
call TriggerAddAction(gg_trg_BrazoDiablo,function Trig_BrazoDiablo_Actions)endfunctionfunction Trig_Ets_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A061')endfunctionfunction Trig_Ets_Func015002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Ets_Unit[0]))==false)endfunctionfunction Trig_Ets_Func015002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Ets_Func015002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Ets_Func015002003001(),Trig_Ets_Func015002003002())endfunctionfunction Trig_Ets_Func018Func003C takes nothing returns booleanreturn(R2I(GetUnitStateSwap(UNIT_STATE_LIFE,udg_Ets_Unit[2]))>R2I(udg_Ets_Real[6]))endfunctionfunction Trig_Ets_Func018A takes nothing returns nothing
set udg_Ets_Unit[2]=GetEnumUnit()set udg_Ets_Real[6]=(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,udg_Ets_Unit[2])*.1)if(Trig_Ets_Func018Func003C())thencall SetWidgetLife(udg_Ets_Unit[2],(GetUnitStateSwap(UNIT_STATE_LIFE,udg_Ets_Unit[2])-udg_Ets_Real[6]))else
call SetWidgetLife(udg_Ets_Unit[2],1.)call UnitDamageTargetBJ(udg_Ets_Unit[0],udg_Ets_Unit[2],udg_Ets_Real[6],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endifset udg_Ets_Real[6]=.0set udg_Ets_Unit[2]=null
endfunctionfunction Trig_Ets_Func032002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Ets_Unit[0]))==false)endfunctionfunction Trig_Ets_Func032002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Ets_Func032002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Ets_Func032002003001(),Trig_Ets_Func032002003002())endfunctionfunction Trig_Ets_Func035A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Ets_Unit[0],GetEnumUnit(),udg_Ets_Real[5],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_Ets_Actions takes nothing returns nothingset udg_Ets_Unit[0]=GetTriggerUnit()
set udg_Ets_Dummy[0]='h00E'set udg_Ets_Dummy[1]='h047'set udg_Ets_Dummy[2]='h048'set udg_Ets_Real[0]=150.
set udg_Ets_Real[1]=45.set udg_Ets_Real[2]=1.set udg_Ets_Real[3]=4.set udg_Ets_Real[4]=1.75
set udg_Ets_Real[5]=(200.+((5.+(1*I2R(GetUnitAbilityLevelSwapped('A061',udg_Ets_Unit[0]))))*I2R(GetHeroStatBJ(0,udg_Ets_Unit[0],true))))
set udg_Ets_Loc[0]=GetUnitLoc(udg_Ets_Unit[0])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[0],bj_UNIT_FACING)set udg_Ets_Unit[1]=bj_lastCreatedUnitset udg_Ets_Int[0]=1
loop
exitwhen udg_Ets_Int[0]>4set udg_Ets_Int[1]=1
loop
exitwhen udg_Ets_Int[1]>8set udg_Ets_Loc[1]=PolarProjectionBJ(udg_Ets_Loc[0],(I2R(udg_Ets_Int[0])*udg_Ets_Real[0]),(I2R(udg_Ets_Int[1])*udg_Ets_Real[1]))
call CreateNUnitsAtLoc(1,udg_Ets_Dummy[0],GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Ets_Real[2],'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Ets_Loc[1])set udg_Ets_Loc[1]=nullset udg_Ets_Int[1]=udg_Ets_Int[1]+1endloopset udg_Ets_Int[0]=udg_Ets_Int[0]+1endloopset udg_Ets_Group=GetUnitsInRangeOfLocMatching(800.,udg_Ets_Loc[0],Condition(function Trig_Ets_Func015002003))call RemoveLocation(udg_Ets_Loc[0])set udg_Ets_Loc[0]=nullcall ForGroupBJ(udg_Ets_Group,function Trig_Ets_Func018A)call DestroyGroup(udg_Ets_Group)
set udg_Ets_Group=nullcall TriggerSleepAction(.5)set udg_Ets_Loc[0]=GetUnitLoc(udg_Ets_Unit[1])call EnumDestructablesInCircleBJ(800.,udg_Ets_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,udg_Ets_Dummy[1],GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Ets_Real[3],'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,udg_Ets_Dummy[1],GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Ets_Real[3],'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,udg_Ets_Dummy[1],GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Ets_Real[3],'BTLF',bj_lastCreatedUnit)
set udg_Ets_Int[0]=1
loop
exitwhen udg_Ets_Int[0]>4set udg_Ets_Int[1]=1
loop
exitwhen udg_Ets_Int[1]>8set udg_Ets_Loc[1]=PolarProjectionBJ(udg_Ets_Loc[0],(I2R(udg_Ets_Int[0])*udg_Ets_Real[0]),(I2R(udg_Ets_Int[1])*udg_Ets_Real[1]))
call CreateNUnitsAtLoc(1,udg_Ets_Dummy[2],GetOwningPlayer(udg_Ets_Unit[0]),udg_Ets_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Ets_Real[4],'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Ets_Loc[1])set udg_Ets_Loc[1]=nullset udg_Ets_Int[1]=udg_Ets_Int[1]+1endloopset udg_Ets_Int[0]=udg_Ets_Int[0]+1endloopcall TerrainDeformationRippleBJ(2.,true,udg_Ets_Loc[0],800.,800.,60.,.5,600.)set udg_Ets_Group=GetUnitsInRangeOfLocMatching(800.,udg_Ets_Loc[0],Condition(function Trig_Ets_Func032002003))call RemoveLocation(udg_Ets_Loc[0])set udg_Ets_Loc[0]=nullcall ForGroupBJ(udg_Ets_Group,function Trig_Ets_Func035A)call DestroyGroup(udg_Ets_Group)
set udg_Ets_Group=nullcall RemoveUnit(udg_Ets_Unit[1])
set udg_Ets_Unit[0]=null
set udg_Ets_Unit[1]=null
set udg_Ets_Dummy[0]=0set udg_Ets_Dummy[1]=0set udg_Ets_Dummy[2]=0set udg_Ets_Real[0]=.0set udg_Ets_Real[1]=.0set udg_Ets_Real[2]=.0set udg_Ets_Real[3]=.0set udg_Ets_Real[4]=.0set udg_Ets_Real[5]=.0set udg_Ets_Int[0]=0
set udg_Ets_Int[1]=0
endfunctionfunction InitTrig_Ets takes nothing returns nothingset gg_trg_Ets=CreateTrigger()call TriggerAddCondition(gg_trg_Ets,Condition(function Trig_Ets_Conditions))
call TriggerAddAction(gg_trg_Ets,function Trig_Ets_Actions)endfunctionfunction Trig_Tdh_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A062')endfunctionfunction Trig_Tdh_Actions takes nothing returns nothingset udg_Tdh_Unit[0]=GetTriggerUnit()
set udg_Tdh_Unit[1]=GetSpellTargetUnit()
set udg_Tdh_Real[0]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A062',udg_Tdh_Unit[0])))*I2R(GetHeroStatBJ(0,udg_Tdh_Unit[0],false))))set udg_Tdh_Real[1]=70.call SetUnitInvulnerable(udg_Tdh_Unit[0],true)call SetUnitInvulnerable(udg_Tdh_Unit[1],true)call PauseSystem(udg_Tdh_Unit[0],true)call PauseSystem(udg_Tdh_Unit[1],true)call UnitAddAbility(udg_Tdh_Unit[0],'A063')set udg_Tdh_Loc[0]=GetUnitLoc(udg_Tdh_Unit[0])call CreateNUnitsAtLoc(1,'h049',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[0],bj_UNIT_FACING)set udg_Tdh_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h048',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[0],bj_UNIT_FACING)set udg_Tdh_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h047',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h047',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Tdh_Loc[0])set udg_Tdh_Loc[0]=nullcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Tdh_Unit[2])
call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Tdh_Unit[3])call SetUnitTimeScalePercent(udg_Tdh_Unit[2],70.)call SetUnitTimeScalePercent(udg_Tdh_Unit[3],50.)call SetUnitScalePercent(udg_Tdh_Unit[3],400.,400.,400.)
call SetUnitVertexColorBJ(udg_Tdh_Unit[3],'d',1.,1.,0)set udg_Tdh_Unit[2]=null
set udg_Tdh_Unit[3]=null
call SetUnitAnimation(udg_Tdh_Unit[0],"stand ready")
call TriggerSleepAction(1.5)
set udg_Tdh_Loc[0]=GetUnitLoc(udg_Tdh_Unit[0])call CreateNUnitsAtLoc(1,'h04A',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Tdh_Loc[0])set udg_Tdh_Loc[0]=nullcall SetUnitAnimation(udg_Tdh_Unit[0],"attack")call SetUnitTimeScalePercent(udg_Tdh_Unit[0],40.)call TriggerSleepAction(.3)set udg_Tdh_Int=20call SetUnitPathing(udg_Tdh_Unit[0],false)call EnableTrigger(gg_trg_TdhL)endfunctionfunction InitTrig_Tdh takes nothing returns nothingset gg_trg_Tdh=CreateTrigger()call TriggerAddCondition(gg_trg_Tdh,Condition(function Trig_Tdh_Conditions))
call TriggerAddAction(gg_trg_Tdh,function Trig_Tdh_Actions)endfunctionfunction Trig_TdhL_Func003Func004C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Tdh_Loc[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_TdhL_Func003Func010Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Tdh_Unit[0]))and(IsTerrainPathableBJ(udg_Tdh_Loc[0],PATHING_TYPE_WALKABILITY))endfunctionfunction Trig_TdhL_Func003Func010C takes nothing returns boolean
return(udg_Tdh_Int>0)and(IsUnitAliveBJ(udg_Tdh_Unit[0]))and(IsUnitAliveBJ(udg_Tdh_Unit[1]))endfunctionfunction Trig_TdhL_Func003C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Tdh_Loc[0],udg_Tdh_Loc[1])>159.)and(udg_Tdh_Int>0)and(IsUnitAliveBJ(udg_Tdh_Unit[0]))and(IsUnitAliveBJ(udg_Tdh_Unit[1]))endfunctionfunction Trig_TdhL_Actions takes nothing returns nothing
set udg_Tdh_Loc[0]=GetUnitLoc(udg_Tdh_Unit[0])set udg_Tdh_Loc[1]=GetUnitLoc(udg_Tdh_Unit[1])if(Trig_TdhL_Func003C())then
set udg_Tdh_Real[2]=AngleBetweenPoints(udg_Tdh_Loc[0],udg_Tdh_Loc[1])set udg_Tdh_Loc[2]=PolarProjectionBJ(udg_Tdh_Loc[0],udg_Tdh_Real[1],udg_Tdh_Real[2])
call EnumDestructablesInCircleBJ(150.,udg_Tdh_Loc[2],function TreeKiller)if(Trig_TdhL_Func003Func004C())thencall SetUnitPositionLocFacingBJ(udg_Tdh_Unit[0],udg_Tdh_Loc[2],udg_Tdh_Real[2])endifcall RemoveLocation(udg_Tdh_Loc[0])set udg_Tdh_Loc[0]=nullcall RemoveLocation(udg_Tdh_Loc[1])set udg_Tdh_Loc[1]=nullcall RemoveLocation(udg_Tdh_Loc[2])set udg_Tdh_Loc[2]=nullset udg_Tdh_Int=(udg_Tdh_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_TdhL_Func003Func010C())thencall RemoveLocation(udg_Tdh_Loc[0])set udg_Tdh_Loc[0]=nullcall RemoveLocation(udg_Tdh_Loc[1])set udg_Tdh_Loc[1]=nullcall SetUnitTimeScalePercent(udg_Tdh_Unit[0],150.)call DisplayText("La Murete",udg_Tdh_Unit[0],.023,false,$DC,5,5,$FF)
call TriggerSleepAction(.06)
call SetUnitPathing(udg_Tdh_Unit[0],true)call SetUnitInvulnerable(udg_Tdh_Unit[0],false)call SetUnitInvulnerable(udg_Tdh_Unit[1],false)call PauseSystem(udg_Tdh_Unit[0],false)call PauseSystem(udg_Tdh_Unit[1],false)call UnitRemoveAbility(udg_Tdh_Unit[0],'A063')set udg_Tdh_Loc[1]=GetUnitLoc(udg_Tdh_Unit[1])call CreateNUnitsAtLoc(1,'h04B',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04C',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h043',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],bj_UNIT_FACING)set udg_Tdh_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h043',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],bj_UNIT_FACING)set udg_Tdh_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04D',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04D',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04D',GetOwningPlayer(udg_Tdh_Unit[0]),udg_Tdh_Loc[1],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Tdh_Unit[2])
call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Tdh_Unit[3])
call SetUnitScalePercent(udg_Tdh_Unit[2],300.,300.,300.)
call SetUnitScalePercent(udg_Tdh_Unit[3],300.,300.,300.)
set udg_Tdh_Unit[2]=null
set udg_Tdh_Unit[3]=null
call Dynamic_GroupShake(GetLocationX(udg_Tdh_Loc[1]),GetLocationY(udg_Tdh_Loc[1]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Tdh_Loc[1])set udg_Tdh_Loc[1]=nullcall DisplayText(I2S(R2I(udg_Tdh_Real[0]))+"!",udg_Tdh_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Tdh_Unit[0],udg_Tdh_Unit[1],udg_Tdh_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
call Dynamic_Sound("Sounds\\Asura.mp3")call TriggerSleepAction(.1)call SetUnitTimeScalePercent(udg_Tdh_Unit[0],100.)set udg_Tdh_Unit[0]=null
set udg_Tdh_Unit[1]=null
set udg_Tdh_Real[0]=.0set udg_Tdh_Real[1]=.0set udg_Tdh_Real[2]=.0set udg_Tdh_Int=0else
if(Trig_TdhL_Func003Func010Func001C())thencall SetUnitPositionLoc(udg_Tdh_Unit[0],udg_Tdh_Loc[1])endifcall RemoveLocation(udg_Tdh_Loc[0])set udg_Tdh_Loc[0]=nullcall RemoveLocation(udg_Tdh_Loc[1])set udg_Tdh_Loc[1]=nullcall SetUnitTimeScalePercent(udg_Tdh_Unit[0],100.)call SetUnitPathing(udg_Tdh_Unit[0],true)call SetUnitInvulnerable(udg_Tdh_Unit[0],false)call SetUnitInvulnerable(udg_Tdh_Unit[1],false)call PauseSystem(udg_Tdh_Unit[0],false)call PauseSystem(udg_Tdh_Unit[1],false)call UnitRemoveAbility(udg_Tdh_Unit[0],'A063')set udg_Tdh_Unit[0]=null
set udg_Tdh_Unit[1]=null
set udg_Tdh_Real[0]=.0set udg_Tdh_Real[1]=.0set udg_Tdh_Real[2]=.0set udg_Tdh_Int=0endifendifendfunctionfunction InitTrig_TdhL takes nothing returns nothing
set gg_trg_TdhL=CreateTrigger()call DisableTrigger(gg_trg_TdhL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TdhL,.04)call TriggerAddAction(gg_trg_TdhL,function Trig_TdhL_Actions)endfunctionfunction AI_Nami_Cond5 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='E000')endfunctionfunction AI_Nami_Cond3 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Nami_Cond5())thenreturn false
endifreturn trueendfunctionfunction AI_Nami_Cond4 takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='E000')
endfunctionfunction AI_Nami_Cond2 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Nami_Cond4())thenreturn false
endifreturn trueendfunctionfunction AI_Nami_Cond1 takes nothing returns boolean
if(AI_Nami_Cond3())thenreturn trueelseif(AI_Nami_Cond2())thenreturn trueendifreturn false
endfunctionfunction AI_Nami_Cond takes nothing returns booleanif(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Nami_Cond1())thenreturn false
endifreturn trueendfunctionfunction AI_Nami_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local boolean AI_C=false
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Nami_Cond5())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A06D')call SelectHeroSkill(AI_1,'A07U')call SelectHeroSkill(AI_1,'A06B')call SelectHeroSkill(AI_1,'A06A')call SelectHeroSkill(AI_1,'A068')call SelectHeroSkill(AI_1,'A067')endifset AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssueImmediateOrderById(AI_1,$D0084)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D0079,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point2)set AI_C=falseendifcall IssueImmediateOrderById(AI_1,$D0277)call IssueImmediateOrderById(AI_1,$D00A1)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Nami takes nothing returns nothingset udg_AI_Trig[7]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[7],Condition(function AI_Nami_Cond))call TriggerAddAction(udg_AI_Trig[7],function AI_Nami_Act)endfunctionfunction Trig_Lrt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A067')endfunctionfunction Trig_Lrt_Actions takes nothing returns nothingset udg_Lrt_Unit[0]=GetTriggerUnit()
set udg_Lrt_Point[0]=GetSpellTargetLoc()
call DisplayText("Hito Eggu",udg_Lrt_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Nami\\HeatEgg.wav",GetUnitX(udg_Lrt_Unit[0]),GetUnitY(udg_Lrt_Unit[0]))
set udg_Lrt_Point[1]=GetUnitLoc(udg_Lrt_Unit[0])
set udg_Lrt_Real[0]=AngleBetweenPoints(udg_Lrt_Point[1],udg_Lrt_Point[0])set udg_Lrt_Point[2]=PolarProjectionBJ(udg_Lrt_Point[1],100.,udg_Lrt_Real[0])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[0],bj_UNIT_FACING)set udg_Lrt_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04E',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[2],bj_UNIT_FACING)set udg_Lrt_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h021',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[2],bj_UNIT_FACING)set udg_Lrt_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrt_Point[0])set udg_Lrt_Point[0]=nullcall RemoveLocation(udg_Lrt_Point[1])set udg_Lrt_Point[1]=nullcall RemoveLocation(udg_Lrt_Point[2])set udg_Lrt_Point[2]=nullcall SetUnitAnimation(udg_Lrt_Unit[3],"death")call SetUnitFlyHeight(udg_Lrt_Unit[3],150.,.0)call SetUnitTimeScalePercent(udg_Lrt_Unit[3],70.)call SetUnitScalePercent(udg_Lrt_Unit[3],'d','d','d')call DisplayText("Hito Eggu",udg_Lrt_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Lrt_Real[1]=(110.+(115.*I2R(GetUnitAbilityLevel(udg_Lrt_Unit[0],'A067'))))set udg_Lrt_Int=24call EnableTrigger(gg_trg_LrtL)endfunctionfunction InitTrig_Lrt takes nothing returns nothingset gg_trg_Lrt=CreateTrigger()call TriggerAddCondition(gg_trg_Lrt,Condition(function Trig_Lrt_Conditions))
call TriggerAddAction(gg_trg_Lrt,function Trig_Lrt_Actions)endfunctionfunction Trig_LrtL_Func004Func021002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lrt_Unit[0]))==false)endfunctionfunction Trig_LrtL_Func004Func021002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LrtL_Func004Func021002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_LrtL_Func004Func021002003001(),Trig_LrtL_Func004Func021002003002())endfunctionfunction Trig_LrtL_Func004Func026Func003C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Lrt_Unit[4]))endfunctionfunction Trig_LrtL_Func004Func026A takes nothing returns nothing
set udg_Lrt_Unit[4]=GetEnumUnit()call UnitDamageTargetBJ(udg_Lrt_Unit[0],udg_Lrt_Unit[4],udg_Lrt_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_LrtL_Func004Func026Func003C())thenset udg_Lrt_Point[2]=GetUnitLoc(udg_Lrt_Unit[4])
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[2],bj_UNIT_FACING)set udg_Lrt_Unit[5]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrt_Point[2])set udg_Lrt_Point[2]=nullcall UnitAddAbility(udg_Lrt_Unit[5],'A04G')call SetUnitAbilityLevelSwapped('A04G',udg_Lrt_Unit[5],3)call IssueTargetOrderById(udg_Lrt_Unit[5],$D006B,udg_Lrt_Unit[4])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Lrt_Unit[5])
set udg_Lrt_Unit[5]=null
endifset udg_Lrt_Unit[4]=null
endfunctionfunction Trig_LrtL_Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Lrt_Point[0],udg_Lrt_Point[1])>100.)and(udg_Lrt_Int>0)endfunctionfunction Trig_LrtL_Actions takes nothing returns nothing
set udg_Lrt_Point[0]=GetUnitLoc(udg_Lrt_Unit[1])
set udg_Lrt_Point[1]=GetUnitLoc(udg_Lrt_Unit[2])
if(Trig_LrtL_Func004C())then
call RemoveLocation(udg_Lrt_Point[0])set udg_Lrt_Point[0]=nullset udg_Lrt_Point[2]=PolarProjectionBJ(udg_Lrt_Point[1],62.,udg_Lrt_Real[0])
call RemoveLocation(udg_Lrt_Point[1])set udg_Lrt_Point[1]=nullcall SetUnitPositionLoc(udg_Lrt_Unit[2],udg_Lrt_Point[2])call SetUnitPositionLoc(udg_Lrt_Unit[3],udg_Lrt_Point[2])call RemoveLocation(udg_Lrt_Point[2])set udg_Lrt_Point[2]=nullset udg_Lrt_Int=(udg_Lrt_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call CreateNUnitsAtLoc(1,'h00F',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h02K',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h02L',GetOwningPlayer(udg_Lrt_Unit[0]),udg_Lrt_Point[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(5.,'BTLF',bj_lastCreatedUnit)call EnumDestructablesInCircleBJ(400.,udg_Lrt_Point[1],function TreeKiller)set udg_Lrt_Group=GetUnitsInRangeOfLocMatching(400.,udg_Lrt_Point[1],Condition(function Trig_LrtL_Func004Func021002003))
call RemoveLocation(udg_Lrt_Point[0])set udg_Lrt_Point[0]=nullcall RemoveLocation(udg_Lrt_Point[1])set udg_Lrt_Point[1]=nullcall ForGroupBJ(udg_Lrt_Group,function Trig_LrtL_Func004Func026A)call DestroyGroup(udg_Lrt_Group)
set udg_Lrt_Group=nullcall RemoveUnit(udg_Lrt_Unit[1])
call RemoveUnit(udg_Lrt_Unit[2])
call RemoveUnit(udg_Lrt_Unit[3])
set udg_Lrt_Unit[0]=null
set udg_Lrt_Unit[1]=null
set udg_Lrt_Unit[2]=null
set udg_Lrt_Unit[3]=null
set udg_Lrt_Real[0]=.0set udg_Lrt_Real[1]=.0set udg_Lrt_Int=0endifendfunctionfunction InitTrig_LrtL takes nothing returns nothing
set gg_trg_LrtL=CreateTrigger()call DisableTrigger(gg_trg_LrtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrtL,.04)call TriggerAddAction(gg_trg_LrtL,function Trig_LrtL_Actions)endfunctionfunction Trig_Tbt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A068')endfunctionfunction Trig_Tbt_Func032A takes nothing returns nothing
set udg_Tbt_Unit[1]=GetEnumUnit()set udg_Tbt_Loc[0]=GetUnitLoc(udg_Tbt_Unit[1])call CreateNUnitsAtLoc(1,'h04G',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitFlyHeight(bj_lastCreatedUnit,600.,.0)call RemoveLocation(udg_Tbt_Loc[0])set udg_Tbt_Loc[0]=nullcall UnitApplyTimedLifeBJ(7.5,'BTLF',udg_Tbt_Unit[1])set udg_Tbt_Unit[1]=null
endfunctionfunction Trig_Tbt_Func035Func002Func003002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Tbt_Unit[0]))==false)endfunctionfunction Trig_Tbt_Func035Func002Func003002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Tbt_Func035Func002Func003002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Tbt_Func035Func002Func003002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Tbt_Func035Func002Func003002003002001(),Trig_Tbt_Func035Func002Func003002003002002())endfunctionfunction Trig_Tbt_Func035Func002Func003002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Tbt_Func035Func002Func003002003001(),Trig_Tbt_Func035Func002Func003002003002())endfunctionfunction Trig_Tbt_Func035Func002Func006Func003C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Tbt_Unit[1]))endfunctionfunction Trig_Tbt_Func035Func002Func006A takes nothing returns nothingset udg_Tbt_Unit[1]=GetEnumUnit()call UnitDamageTargetBJ(udg_Tbt_Unit[0],udg_Tbt_Unit[1],udg_Tbt_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(Trig_Tbt_Func035Func002Func006Func003C())then
set udg_Tbt_Loc[1]=GetUnitLoc(udg_Tbt_Unit[1])call CreateNUnitsAtLoc(1,'h04G',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)set udg_Tbt_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u005',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)set udg_Tbt_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Tbt_Loc[1])set udg_Tbt_Loc[1]=nullcall SetUnitFlyHeight(udg_Tbt_Unit[3],600.,.0)call UnitAddAbility(udg_Tbt_Unit[3],udg_Tbt_Skill)call IssueTargetOrderById(udg_Tbt_Unit[3],$D0097,udg_Tbt_Unit[4])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Tbt_Unit[3])
call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Tbt_Unit[4])set udg_Tbt_Unit[3]=null
set udg_Tbt_Unit[4]=null
else
set udg_Tbt_Loc[1]=GetUnitLoc(udg_Tbt_Unit[1])call CreateNUnitsAtLoc(1,'h04G',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)set udg_Tbt_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Tbt_Loc[1])set udg_Tbt_Loc[1]=nullcall SetUnitFlyHeight(udg_Tbt_Unit[3],600.,.0)call UnitAddAbility(udg_Tbt_Unit[3],udg_Tbt_Skill)call IssueTargetOrderById(udg_Tbt_Unit[3],$D0097,udg_Tbt_Unit[1])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Tbt_Unit[3])
set udg_Tbt_Unit[3]=null
endifset udg_Tbt_Unit[1]=null
endfunctionfunction Trig_Tbt_Func035Func002C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Tbt_Unit[0]))endfunctionfunction Trig_Tbt_Func044A takes nothing returns nothing
call SetUnitAnimation(GetEnumUnit(),"death")
endfunctionfunction Trig_Tbt_Actions takes nothing returns nothingset udg_Tbt_Unit[0]=GetTriggerUnit()
call DisplayText("Thunderbolt Tempo",udg_Tbt_Unit[0],.023,false,$FF,$FF,$FF,$FF)
set udg_Tbt_Loc[0]=GetSpellTargetLoc()set udg_Tbt_Loc[1]=GetUnitLoc(udg_Tbt_Unit[0])set udg_Tbt_Loc[2]=PolarProjectionBJ(udg_Tbt_Loc[1],.0,AngleBetweenPoints(udg_Tbt_Loc[1],udg_Tbt_Loc[0]))call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[2],bj_UNIT_FACING)set udg_Tbt_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u005',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[0],bj_UNIT_FACING)set udg_Tbt_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Tbt_Loc[0])set udg_Tbt_Loc[0]=nullcall RemoveLocation(udg_Tbt_Loc[1])set udg_Tbt_Loc[1]=nullcall RemoveLocation(udg_Tbt_Loc[2])set udg_Tbt_Loc[2]=nullset udg_Tbt_Int=GetUnitAbilityLevelSwapped('A068',udg_Tbt_Unit[0])set udg_Tbt_Real[0]=700.
set udg_Tbt_Real[1]=((50.+(I2R(udg_Tbt_Int)*50.))+((.5+(I2R(udg_Tbt_Int)*.5))*I2R(GetHeroStatBJ(2,udg_Tbt_Unit[0],true))))set udg_Tbt_Skill='A069'
call SetUnitScalePercent(udg_Tbt_Unit[1],300.,300.,300.)
call SetUnitFlyHeight(udg_Tbt_Unit[2],600.,.0)call UnitAddAbility(udg_Tbt_Unit[1],udg_Tbt_Skill)call IssueTargetOrderById(udg_Tbt_Unit[1],$D0097,udg_Tbt_Unit[2])call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Tbt_Unit[1])
set udg_Tbt_Loc[0]=GetUnitLoc(udg_Tbt_Unit[2])set udg_Tbt_Unit[1]=null
set udg_Tbt_Group=CreateGroup()set udg_Tbt_Int=1loop
exitwhen udg_Tbt_Int>4set udg_Tbt_Loc[1]=PolarProjectionBJ(udg_Tbt_Loc[0],200.,(I2R(udg_Tbt_Int)*90.))
call CreateNUnitsAtLoc(1,'h04F',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)call GroupAddUnit(udg_Tbt_Group,bj_lastCreatedUnit)call RemoveLocation(udg_Tbt_Loc[1])set udg_Tbt_Loc[1]=nullset udg_Tbt_Int=udg_Tbt_Int+1endloopset udg_Tbt_Int=1loop
exitwhen udg_Tbt_Int>5set udg_Tbt_Loc[1]=PolarProjectionBJ(udg_Tbt_Loc[0],500.,(I2R(udg_Tbt_Int)*72.))
call CreateNUnitsAtLoc(1,'h04F',GetOwningPlayer(udg_Tbt_Unit[0]),udg_Tbt_Loc[1],bj_UNIT_FACING)call GroupAddUnit(udg_Tbt_Group,bj_lastCreatedUnit)call RemoveLocation(udg_Tbt_Loc[1])set udg_Tbt_Loc[1]=nullset udg_Tbt_Int=udg_Tbt_Int+1endloopcall RemoveLocation(udg_Tbt_Loc[0])set udg_Tbt_Loc[0]=nullcall ForGroupBJ(udg_Tbt_Group,function Trig_Tbt_Func032A)call DestroyGroup(udg_Tbt_Group)
set udg_Tbt_Group=nullset udg_Tbt_Int=1loop
exitwhen udg_Tbt_Int>7call TriggerSleepAction(.9)if(Trig_Tbt_Func035Func002C())thenset udg_Tbt_Loc[0]=GetUnitLoc(udg_Tbt_Unit[2])set udg_Tbt_Group=GetUnitsInRangeOfLocMatching(udg_Tbt_Real[0],udg_Tbt_Loc[0],Condition(function Trig_Tbt_Func035Func002Func003002003))call RemoveLocation(udg_Tbt_Loc[0])set udg_Tbt_Loc[0]=nullcall ForGroupBJ(udg_Tbt_Group,function Trig_Tbt_Func035Func002Func006A)call DestroyGroup(udg_Tbt_Group)
set udg_Tbt_Group=nullelse
set udg_Tbt_Int=7endifset udg_Tbt_Int=udg_Tbt_Int+1endloopcall RemoveUnit(udg_Tbt_Unit[2])
set udg_Tbt_Unit[0]=null
set udg_Tbt_Unit[2]=null
set udg_Tbt_Real[0]=.0set udg_Tbt_Real[1]=.0set udg_Tbt_Int=0call TriggerSleepAction(.5)set udg_Tbt_Group=GetUnitsOfTypeIdAll('h04F')call ForGroupBJ(udg_Tbt_Group,function Trig_Tbt_Func044A)call DestroyGroup(udg_Tbt_Group)
set udg_Tbt_Group=nullendfunctionfunction InitTrig_Tbt takes nothing returns nothingset gg_trg_Tbt=CreateTrigger()call TriggerAddCondition(gg_trg_Tbt,Condition(function Trig_Tbt_Conditions))
call TriggerAddAction(gg_trg_Tbt,function Trig_Tbt_Actions)endfunctionfunction Trig_Mto_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06A')endfunctionfunction Trig_Mto_Actions takes nothing returns nothinglocal integer ilocal location locset udg_Mto_Unit=GetTriggerUnit()set udg_Mto_Type='E000'set udg_Mto_Own=GetOwningPlayer(udg_Mto_Unit)call EnableTrigger(gg_trg_MtoC)call DisplayText("Mirage Tempo",udg_Mto_Unit,.023,false,$FF,$FF,$FF,$FF)
set i=0set loc=GetUnitLoc(udg_Mto_Unit)
loop
exitwhen i>3
call CreateNUnitsAtLoc(1,'u003',udg_Mto_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A066')call IssueTargetOrderById(bj_lastCreatedUnit,$D0132,udg_Mto_Unit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=i+1endloopcall RemoveLocation(loc)
set loc=null
set udg_Mto_Unit=nullcall DisableTrigger(gg_trg_MtoC)
call TriggerSleepAction(1.)set udg_Mto_Own=null
set udg_Mto_Type=0endfunctionfunction InitTrig_Mto takes nothing returns nothingset gg_trg_Mto=CreateTrigger()call TriggerAddCondition(gg_trg_Mto,Condition(function Trig_Mto_Conditions))
call TriggerAddAction(gg_trg_Mto,function Trig_Mto_Actions)endfunctionfunction Trig_MtoC_Conditions takes nothing returns booleanreturn(GetUnitTypeId(GetSummonedUnit())==udg_Mto_Type)and(IsUnitIllusion(GetSummonedUnit()))
endfunctionfunction Trig_MtoC_Actions takes nothing returns nothing
local unit u=GetSummonedUnit()call SelectUnitAddForPlayer(u,udg_Mto_Own)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",u,"origin"))set u=nullendfunctionfunction InitTrig_MtoC takes nothing returns nothing
set gg_trg_MtoC=CreateTrigger()call DisableTrigger(gg_trg_MtoC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MtoC,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_MtoC,Condition(function Trig_MtoC_Conditions))call TriggerAddAction(gg_trg_MtoC,function Trig_MtoC_Actions)endfunctionfunction Trig_Scs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06B')endfunctionfunction Trig_Scs_Actions takes nothing returns nothingset udg_Scs_Unit[0]=GetTriggerUnit()
set udg_Scs_Loc[0]=GetSpellTargetLoc()call DisplayText("Yukigumo",udg_Scs_Unit[0],.023,false,$FF,$FF,$FF,$FF)call EnumDestructablesInCircleBJ(400.,udg_Scs_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'h04J',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[0],bj_UNIT_FACING)set udg_Scs_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04J',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[0],bj_UNIT_FACING)set udg_Scs_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04K',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[0],bj_UNIT_FACING)set udg_Scs_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04L',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[0],bj_UNIT_FACING)set udg_Scs_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Scs_Loc[0])set udg_Scs_Loc[0]=nullset udg_Scs_Int=40set udg_Scs_Real[0]=400.
set udg_Scs_Real[1]=22.set udg_Scs_Real[2]=150.
set udg_Scs_Real[3]=((1.+(.5*I2R(GetUnitAbilityLevelSwapped('A06B',udg_Scs_Unit[0]))))*I2R(GetHeroStatBJ(2,udg_Scs_Unit[0],true)))call EnableTrigger(gg_trg_ScsL)endfunctionfunction InitTrig_Scs takes nothing returns nothingset gg_trg_Scs=CreateTrigger()call TriggerAddCondition(gg_trg_Scs,Condition(function Trig_Scs_Conditions))
call TriggerAddAction(gg_trg_Scs,function Trig_Scs_Actions)endfunctionfunction Trig_ScsL_Func001Func017Func002002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Scs_Unit[0]))==false)endfunctionfunction Trig_ScsL_Func001Func017Func002002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_ScsL_Func001Func017Func002002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_ScsL_Func001Func017Func002002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_ScsL_Func001Func017Func002002003002001(),Trig_ScsL_Func001Func017Func002002003002002())endfunctionfunction Trig_ScsL_Func001Func017Func002002003 takes nothing returns boolean
return GetBooleanAnd(Trig_ScsL_Func001Func017Func002002003001(),Trig_ScsL_Func001Func017Func002002003002())endfunctionfunction Trig_ScsL_Func001Func017Func005Func004C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Scs_Loc[0],udg_Scs_Loc[1])>udg_Scs_Real[2])
endfunctionfunction Trig_ScsL_Func001Func017Func005A takes nothing returns nothingset udg_Scs_Unit[6]=GetEnumUnit()set udg_Scs_Loc[0]=GetUnitLoc(udg_Scs_Unit[1])set udg_Scs_Loc[1]=GetUnitLoc(udg_Scs_Unit[6])if(Trig_ScsL_Func001Func017Func005Func004C())thenset udg_Scs_Loc[2]=PolarProjectionBJ(udg_Scs_Loc[1],udg_Scs_Real[1],AngleBetweenPoints(udg_Scs_Loc[1],udg_Scs_Loc[0]))call SetUnitPositionLoc(udg_Scs_Unit[6],udg_Scs_Loc[2])call RemoveLocation(udg_Scs_Loc[2])set udg_Scs_Loc[2]=nullendifcall RemoveLocation(udg_Scs_Loc[0])set udg_Scs_Loc[0]=nullcall RemoveLocation(udg_Scs_Loc[1])set udg_Scs_Loc[1]=nullset udg_Scs_Unit[6]=null
endfunctionfunction Trig_ScsL_Func001Func017Func016002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Scs_Unit[0]))==false)endfunctionfunction Trig_ScsL_Func001Func017Func016002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_ScsL_Func001Func017Func016002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_ScsL_Func001Func017Func016002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_ScsL_Func001Func017Func016002003002001(),Trig_ScsL_Func001Func017Func016002003002002())endfunctionfunction Trig_ScsL_Func001Func017Func016002003 takes nothing returns boolean
return GetBooleanAnd(Trig_ScsL_Func001Func017Func016002003001(),Trig_ScsL_Func001Func017Func016002003002())endfunctionfunction Trig_ScsL_Func001Func017Func021A takes nothing returns nothingcall UnitDamageTargetBJ(udg_Scs_Unit[0],GetEnumUnit(),udg_Scs_Real[3],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction Trig_ScsL_Func001Func017C takes nothing returns boolean
return(ModuloInteger(udg_Scs_Int,$A)==0)
endfunctionfunction Trig_ScsL_Func001C takes nothing returns booleanreturn(udg_Scs_Int>0)and(IsUnitAliveBJ(udg_Scs_Unit[1]))
endfunctionfunction Trig_ScsL_Actions takes nothing returns nothing
if(Trig_ScsL_Func001C())then
if(Trig_ScsL_Func001Func017C())thenset udg_Scs_Loc[0]=GetUnitLoc(udg_Scs_Unit[1])set udg_Scs_Loc[1]=PolarProjectionBJ(udg_Scs_Loc[0],GetRandomReal(0,120.),GetRandomReal(0,360.))
call CreateNUnitsAtLoc(1,'h04O',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[0],bj_UNIT_FACING)set udg_Scs_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04N',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[1],GetRandomReal(0,360.))set udg_Scs_Unit[7]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02M',GetOwningPlayer(udg_Scs_Unit[0]),udg_Scs_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set udg_Scs_Group=GetUnitsInRangeOfLocMatching(udg_Scs_Real[0],udg_Scs_Loc[0],Condition(function Trig_ScsL_Func001Func017Func016002003))
call RemoveLocation(udg_Scs_Loc[0])set udg_Scs_Loc[0]=nullcall RemoveLocation(udg_Scs_Loc[1])set udg_Scs_Loc[1]=nullcall ForGroupBJ(udg_Scs_Group,function Trig_ScsL_Func001Func017Func021A)
call DestroyGroup(udg_Scs_Group)
set udg_Scs_Group=nullcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Scs_Unit[6])
call UnitApplyTimedLifeBJ(5.,'BTLF',udg_Scs_Unit[7])
call SetUnitScalePercent(udg_Scs_Unit[6],250.,250.,250.)
set udg_Scs_Real[4]=GetRandomReal(80.,150.)call SetUnitScalePercent(udg_Scs_Unit[7],udg_Scs_Real[4],udg_Scs_Real[4],udg_Scs_Real[4])call AddSpecialEffectTargetUnitBJ("origin",udg_Scs_Unit[6],"IceNova2.mdx")call DestroyEffect(bj_lastCreatedEffect)
set udg_Scs_Unit[6]=null
set udg_Scs_Unit[7]=null
else
set udg_Scs_Loc[0]=GetUnitLoc(udg_Scs_Unit[1])set udg_Scs_Group=GetUnitsInRangeOfLocMatching(udg_Scs_Real[0],udg_Scs_Loc[0],Condition(function Trig_ScsL_Func001Func017Func002002003))
call RemoveLocation(udg_Scs_Loc[0])set udg_Scs_Loc[0]=nullcall ForGroupBJ(udg_Scs_Group,function Trig_ScsL_Func001Func017Func005A)
call DestroyGroup(udg_Scs_Group)
set udg_Scs_Group=nullendifset udg_Scs_Int=(udg_Scs_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Scs_Unit[1])
call RemoveUnit(udg_Scs_Unit[2])
call RemoveUnit(udg_Scs_Unit[3])
call RemoveUnit(udg_Scs_Unit[4])
set udg_Scs_Unit[0]=null
set udg_Scs_Unit[1]=null
set udg_Scs_Unit[2]=null
set udg_Scs_Unit[3]=null
set udg_Scs_Unit[4]=null
set udg_Scs_Real[0]=.0set udg_Scs_Real[1]=.0set udg_Scs_Real[2]=.0set udg_Scs_Real[3]=.0set udg_Scs_Real[4]=.0set udg_Scs_Int=0endifendfunctionfunction InitTrig_ScsL takes nothing returns nothing
set gg_trg_ScsL=CreateTrigger()call DisableTrigger(gg_trg_ScsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_ScsL,.06)call TriggerAddAction(gg_trg_ScsL,function Trig_ScsL_Actions)endfunctionfunction Trig_Tlt_Func001C takes nothing returns boolean
return(GetSpellAbilityId()=='A06D')or(GetSpellAbilityId()=='A07U')endfunctionfunction Trig_Tlt_Conditions takes nothing returns booleanreturn(Trig_Tlt_Func001C())endfunctionfunction Trig_Tlt_Func006C takes nothing returns boolean
return(GetSpellAbilityId()=='A07U')endfunctionfunction Trig_Tlt_Func034C takes nothing returns boolean
return(IsTriggerEnabled(gg_trg_TltR)==false)
endfunctionfunction Trig_Tlt_Actions takes nothing returns nothinglocal integer loops=40local real LifeTime=loops*2.
set udg_Tlt_Unit[0]=GetTriggerUnit()
call SetUnitAnimation(udg_Tlt_Unit[0],"spell")if(Trig_Tlt_Func006C())thenset udg_Tlt_Real[0]=((8.+(8.*I2R(GetUnitAbilityLevelSwapped('A07U',udg_Tlt_Unit[0]))))*I2R(GetHeroStatBJ(2,udg_Tlt_Unit[0],true)))else
set udg_Tlt_Real[0]=((I2R(GetUnitAbilityLevelSwapped('A06D',udg_Tlt_Unit[0]))*8.)*I2R(GetHeroStatBJ(2,udg_Tlt_Unit[0],true)))endifset udg_Tlt_Type='h04M'set udg_Tlt_Loc[0]=GetUnitLoc(udg_Tlt_Unit[0])set udg_Tlt_Loc[1]=PolarProjectionBJ(udg_Tlt_Loc[0],175.,GetUnitFacing(udg_Tlt_Unit[0]))
call RemoveLocation(udg_Tlt_Loc[0])set udg_Tlt_Loc[0]=nullcall CreateNUnitsAtLoc(1,udg_Tlt_Type,GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],GetRandomReal(0,360))set udg_Tlt_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,udg_Tlt_Type,GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],bj_UNIT_FACING)set udg_Tlt_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,udg_Tlt_Type,GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],GetRandomReal(0,360))set udg_Tlt_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Tlt_Loc[1])set udg_Tlt_Loc[1]=nullcall IssueImmediateOrderById(udg_Tlt_Unit[1],$D00A1)
call IssueImmediateOrderById(udg_Tlt_Unit[2],$D00A1)
call IssueImmediateOrderById(udg_Tlt_Unit[3],$D00A1)
call UnitApplyTimedLifeBJ(LifeTime,'BTLF',udg_Tlt_Unit[1])call UnitApplyTimedLifeBJ(LifeTime,'BTLF',udg_Tlt_Unit[2])call UnitApplyTimedLifeBJ(LifeTime,'BTLF',udg_Tlt_Unit[3])set LifeTime=.0call EnableTrigger(gg_trg_TltR)set udg_Tlt_Eff=AddSpecialEffectTarget("Abilities\\Weapons\\FarseerMissile\\FarseerMissile.mdl",udg_Tlt_Unit[0],"weapon")call SetPlayerAbilityAvailableBJ(false,'A06D',GetOwningPlayer(udg_Tlt_Unit[0]))call SetPlayerAbilityAvailableBJ(false,'A07U',GetOwningPlayer(udg_Tlt_Unit[0]))call UnitAddAbility(udg_Tlt_Unit[0],'A06E')loop
call TriggerSleepAction(1.)if(Trig_Tlt_Func034C())thenset loops=-1
else
if(loops<6 and loops>0)thencall DisplayText(I2S(loops),udg_Tlt_Unit[0],.023,true,$FF,0,0,$FF)endifset loops=loops-1if(loops<0)thencall DisableTrigger(gg_trg_TltR)
call DestroyEffect(udg_Tlt_Eff)set udg_Tlt_Eff=null
call UnitRemoveAbility(udg_Tlt_Unit[0],'A06E')call SetPlayerAbilityAvailableBJ(true,'A06D',GetOwningPlayer(udg_Tlt_Unit[0]))call SetPlayerAbilityAvailableBJ(true,'A07U',GetOwningPlayer(udg_Tlt_Unit[0]))call TriggerSleepAction(.1)call RemoveUnit(udg_Tlt_Unit[1])
call RemoveUnit(udg_Tlt_Unit[2])
call RemoveUnit(udg_Tlt_Unit[3])
set udg_Tlt_Unit[0]=null
set udg_Tlt_Unit[1]=null
set udg_Tlt_Unit[2]=null
set udg_Tlt_Unit[3]=null
set udg_Tlt_Type=0set udg_Tlt_Real[0]=.0endifendifexitwhen loops<0
endloopendfunctionfunction InitTrig_Tlt takes nothing returns nothingset gg_trg_Tlt=CreateTrigger()call TriggerAddCondition(gg_trg_Tlt,Condition(function Trig_Tlt_Conditions))
call TriggerAddAction(gg_trg_Tlt,function Trig_Tlt_Actions)endfunctionfunction Trig_TltR_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06E')endfunctionfunction Trig_TltR_Func002Func032002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Tlt_Unit[0]))==false)endfunctionfunction Trig_TltR_Func002Func032002003002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Tlt_Group3)==false)
endfunctionfunction Trig_TltR_Func002Func032002003002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_TltR_Func002Func032002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_TltR_Func002Func032002003002001(),Trig_TltR_Func002Func032002003002002())endfunctionfunction Trig_TltR_Func002Func032002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_TltR_Func002Func032002003001(),Trig_TltR_Func002Func032002003002())endfunctionfunction Trig_TltR_Func002Func037Func003C takes nothing returns booleanreturn(IsUnitType(udg_Tlt_Unit[4],UNIT_TYPE_HERO))!=null
endfunctionfunction Trig_TltR_Func002Func037A takes nothing returns nothing
set udg_Tlt_Unit[4]=GetEnumUnit()call GroupAddUnit(udg_Tlt_Group3,udg_Tlt_Unit[4])if(Trig_TltR_Func002Func037Func003C())thencall DisplayText(I2S(R2I(udg_Tlt_Real[0]))+"!",udg_Tlt_Unit[4],.027,true,$FF,0,0,$FF)endifcall UnitDamageTargetBJ(udg_Tlt_Unit[0],udg_Tlt_Unit[4],udg_Tlt_Real[0],ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL)set udg_Tlt_Unit[4]=null
endfunctionfunction Trig_TltR_Func002Func071A takes nothing returns nothing
set udg_Tlt_Unit[4]=GetEnumUnit()call UnitApplyTimedLifeBJ(udg_Tlt_Real[0],'BTLF',udg_Tlt_Unit[4])call SetUnitAnimation(udg_Tlt_Unit[4],"death")set udg_Tlt_Unit[4]=null
endfunctionfunction Trig_TltR_Func002C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Tlt_Unit[1]))endfunctionfunction Trig_TltR_Actions takes nothing returns nothing
local integer i=1if(Trig_TltR_Func002C())then
call DisableTrigger(GetTriggeringTrigger())set udg_Tlt_Loc[0]=GetSpellTargetLoc()set udg_Tlt_Real[3]=2.5set udg_Tlt_Loc[1]=GetUnitLoc(udg_Tlt_Unit[1])call CreateNUnitsAtLoc(1,'h04P',GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Tlt_Real[3],'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h04P',GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(udg_Tlt_Real[3],'BTLF',bj_lastCreatedUnit)
set udg_Tlt_Real[1]=80.set udg_Tlt_Real[2]=AngleBetweenPoints(udg_Tlt_Loc[1],udg_Tlt_Loc[0])set udg_Tlt_Int=R2I((DistanceBetweenPoints(udg_Tlt_Loc[0],udg_Tlt_Loc[1])/ udg_Tlt_Real[1]))
call RemoveLocation(udg_Tlt_Loc[0])set udg_Tlt_Loc[0]=nullcall RemoveLocation(udg_Tlt_Loc[1])set udg_Tlt_Loc[1]=nullcall DisplayText("Thunderlance Tempo",udg_Tlt_Unit[0],.023,false,$DC,5,5,$FF)set udg_Tlt_Real[3]=4.set udg_Tlt_Real[4]=300.
loop
set udg_Tlt_Loc[0]=GetUnitLoc(udg_Tlt_Unit[1])set udg_Tlt_Loc[1]=PolarProjectionBJ(udg_Tlt_Loc[0],(I2R(i)*udg_Tlt_Real[1]),udg_Tlt_Real[2])call CreateNUnitsAtLoc(1,'h04Q',GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],GetRandomReal(0,360))call GroupAddUnit(udg_Tlt_Group2,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Tlt_Unit[0]),udg_Tlt_Loc[1],GetRandomReal(0,360))set udg_Tlt_Unit[4]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(udg_Tlt_Real[3],'BTLF',udg_Tlt_Unit[4])call SetUnitTimeScalePercent(udg_Tlt_Unit[4],65.)set udg_Tlt_Unit[4]=null
call EnumDestructablesInCircleBJ(udg_Tlt_Real[4],udg_Tlt_Loc[1],function TreeKiller)
set udg_Tlt_Group=GetUnitsInRangeOfLocMatching(udg_Tlt_Real[4],udg_Tlt_Loc[1],Condition(function Trig_TltR_Func002Func032002003))call RemoveLocation(udg_Tlt_Loc[0])set udg_Tlt_Loc[0]=nullcall RemoveLocation(udg_Tlt_Loc[1])set udg_Tlt_Loc[1]=nullcall ForGroupBJ(udg_Tlt_Group,function Trig_TltR_Func002Func037A)call DestroyGroup(udg_Tlt_Group)
set udg_Tlt_Group=nullset i=i+1exitwhen i>udg_Tlt_Intendloopcall Dynamic_Sound("Sounds\\ThunderLance.mp3")call DestroyEffect(udg_Tlt_Eff)set udg_Tlt_Eff=null
call UnitRemoveAbility(udg_Tlt_Unit[0],'A06E')call SetPlayerAbilityAvailableBJ(true,'A06D',GetOwningPlayer(udg_Tlt_Unit[0]))call SetPlayerAbilityAvailableBJ(true,'A07U',GetOwningPlayer(udg_Tlt_Unit[0]))set i=1loop
call RemoveUnit(udg_Tlt_Unit[i])
set udg_Tlt_Unit[i]=null
set i=i+1exitwhen i>3
endloopset i=0set udg_Tlt_Unit[0]=null
set udg_Tlt_Type=0set udg_Tlt_Real[0]=.0set udg_Tlt_Real[1]=.0set udg_Tlt_Real[2]=.0set udg_Tlt_Real[3]=.0set udg_Tlt_Real[4]=.0set udg_Tlt_Int=0call GroupClear(udg_Tlt_Group3)call TriggerSleepAction(1.5)
set udg_Tlt_Real[0]=1.set udg_Tlt_Group=CreateGroup()call GroupAddGroup(udg_Tlt_Group2,udg_Tlt_Group)
call GroupClear(udg_Tlt_Group2)call ForGroupBJ(udg_Tlt_Group,function Trig_TltR_Func002Func071A)call DestroyGroup(udg_Tlt_Group)
set udg_Tlt_Group=nullset udg_Tlt_Real[0]=.0endifendfunctionfunction InitTrig_TltR takes nothing returns nothing
set gg_trg_TltR=CreateTrigger()call DisableTrigger(gg_trg_TltR)
call TriggerAddCondition(gg_trg_TltR,Condition(function Trig_TltR_Conditions))call TriggerAddAction(gg_trg_TltR,function Trig_TltR_Actions)endfunctionfunction AIKakashi__isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIKakashi__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIKakashi__isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIKakashi__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIKakashi__Cond takes nothing returns booleanif(not(AIKakashi__isAtked()or AIKakashi__isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIKakashi__Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIKakashi__AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIKakashi__isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A06P')call SelectHeroSkill(mySelf,'A06O')call SelectHeroSkill(mySelf,'A06N')call SelectHeroSkill(mySelf,'A06L')call SelectHeroSkill(mySelf,'A06J')endifcall IssueTargetOrderById(mySelf,$D0270,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D007F,myTarget)call IssueTargetOrderById(mySelf,$D0106,myTarget)if(isAttacking)thencall IssueTargetOrderById(mySelf,$D0208,myTarget)call IssueImmediateOrderById(mySelf,$D0084)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIKakashi__AINo])
endfunctionfunction AIKakashi__Init takes nothing returns nothingset udg_AI_Trig[AIKakashi__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIKakashi__AINo],Condition(function AIKakashi__Cond))call TriggerAddAction(udg_AI_Trig[AIKakashi__AINo],function AIKakashi__Act)endfunctionfunction Trig_Rkb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06G')endfunctionfunction Trig_Rkb_Actions takes nothing returns nothingset udg_Rkb_Unit[0]=null
set udg_Rkb_Unit[0]=GetTriggerUnit()
set udg_Rkb_Loc[0]=GetUnitLoc(udg_Rkb_Unit[0])call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Rkb_Unit[0]),udg_Rkb_Loc[0],bj_UNIT_FACING)set udg_Rkb_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Rkb_Loc[0])set udg_Rkb_Loc[0]=nullcall SetUnitPathing(udg_Rkb_Unit[0],false)call UnitAddAbility(udg_Rkb_Unit[1],'A06H')set udg_Rkb_Int=(udg_Rkb_Int+1)call EnableTrigger(gg_trg_RkbC)call EnableTrigger(gg_trg_RkbD)call IssueTargetOrderById(udg_Rkb_Unit[1],$D0132,udg_Rkb_Unit[0])endfunctionfunction InitTrig_Rkb takes nothing returns nothingset gg_trg_Rkb=CreateTrigger()call TriggerAddCondition(gg_trg_Rkb,Condition(function Trig_Rkb_Conditions))
call TriggerAddAction(gg_trg_Rkb,function Trig_Rkb_Actions)endfunctionfunction Trig_RkbC_Conditions takes nothing returns booleanreturn(UnitHasBuffBJ(GetSummonedUnit(),'B015'))endfunctionfunction Trig_RkbC_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())set udg_Rkb_Unit[2]=GetSummonedUnit()call GroupAddUnit(udg_Rkb_Group,udg_Rkb_Unit[2])
set udg_Rkb_Loc[0]=GetUnitLoc(udg_Rkb_Unit[0])set udg_Rkb_Loc[1]=GetUnitLoc(udg_Rkb_Unit[2])call SetUnitPositionLoc(udg_Rkb_Unit[0],udg_Rkb_Loc[1])call SetUnitPositionLoc(udg_Rkb_Unit[2],udg_Rkb_Loc[0])call SetUnitPositionLoc(udg_Rkb_Unit[0],udg_Rkb_Loc[0])call RemoveLocation(udg_Rkb_Loc[0])set udg_Rkb_Loc[0]=nullcall RemoveLocation(udg_Rkb_Loc[1])set udg_Rkb_Loc[1]=nullcall SetUnitPathing(udg_Rkb_Unit[0],true)call SelectUnitAddForPlayer(udg_Rkb_Unit[2],GetOwningPlayer(udg_Rkb_Unit[0]))call RemoveUnit(udg_Rkb_Unit[1])
set udg_Rkb_Unit[1]=null
set udg_Rkb_Unit[2]=null
endfunctionfunction InitTrig_RkbC takes nothing returns nothing
set gg_trg_RkbC=CreateTrigger()call DisableTrigger(gg_trg_RkbC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_RkbC,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_RkbC,Condition(function Trig_RkbC_Conditions))call TriggerAddAction(gg_trg_RkbC,function Trig_RkbC_Actions)endfunctionfunction Trig_RkbD_Conditions takes nothing returns booleanreturn(IsUnitInGroup(GetDyingUnit(),udg_Rkb_Group))endfunctionfunction Rkd_Cond2001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Rkd_Cond2002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Rkd_Cond1 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Rkb_Unit[0]))==false)endfunctionfunction Rkd_Cond2 takes nothing returns boolean
return GetBooleanAnd(Rkd_Cond2001(),Rkd_Cond2002())endfunctionfunction Rkd_GroupCond takes nothing returns boolean
return GetBooleanAnd(Rkd_Cond1(),Rkd_Cond2())endfunctionfunction Rkb_GroupActCond takes unit Rkb_U returns booleanreturn(IsUnitAliveBJ(Rkb_U))
endfunctionfunction Rkb_GroupAct takes nothing returns nothinglocal unit Rkb_U=GetEnumUnit()local unit Rkb_Lulocal location Rkb_L=GetUnitLoc(Rkb_U)call CreateNUnitsAtLoc(1,'h04S',GetOwningPlayer(udg_Rkb_Unit[0]),Rkb_L,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04V',GetOwningPlayer(udg_Rkb_Unit[0]),Rkb_L,bj_UNIT_FACING)set Rkb_Lu=bj_lastCreatedUnitcall SetUnitAnimation(Rkb_Lu,"death")call UnitApplyTimedLifeBJ(1.,'BTLF',Rkb_Lu)set Rkb_Lu=nullcall UnitDamageTargetBJ(udg_Rkb_Unit[0],Rkb_U,(I2R(GetHeroStatBJ(1,udg_Rkb_Unit[0],true))*5.),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)if(Rkb_GroupActCond(Rkb_U))thencall CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Rkb_Unit[0]),Rkb_L,bj_UNIT_FACING)set Rkb_Lu=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(1.,'BTLF',Rkb_Lu)call UnitAddAbility(Rkb_Lu,'A06I')call IssueTargetOrderById(Rkb_Lu,$D006B,Rkb_U)set Rkb_Lu=nullendifcall RemoveLocation(Rkb_L)set Rkb_L=nullset Rkb_U=nullendfunctionfunction Trig_RkbD_Actions takes nothing returns nothing
local unit Rkb_U=GetDyingUnit()local unit Rkb_Lulocal location Rkb_L=GetUnitLoc(Rkb_U)local group Rkb_G=GetUnitsInRangeOfLocMatching(350.,Rkb_L,Condition(function Rkd_GroupCond))
set udg_Rkb_Int=udg_Rkb_Int-1if(udg_Rkb_Int==0)thencall DisableTrigger(GetTriggeringTrigger())endifcall GroupRemoveUnit(udg_Rkb_Group,Rkb_U)call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(Rkb_U),Rkb_L,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04T',GetOwningPlayer(Rkb_U),Rkb_L,bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04U',GetOwningPlayer(Rkb_U),Rkb_L,bj_UNIT_FACING)
set Rkb_Lu=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(1.5,'BTLF',Rkb_Lu)
call SetUnitScalePercent(Rkb_Lu,300.,300.,300.)call RemoveLocation(Rkb_L)set Rkb_L=nullcall ForGroupBJ(Rkb_G,function Rkb_GroupAct)
call DestroyGroup(Rkb_G)
set Rkb_G=nullset Rkb_U=nullset Rkb_Lu=nullendfunctionfunction InitTrig_RkbD takes nothing returns nothing
set gg_trg_RkbD=CreateTrigger()call DisableTrigger(gg_trg_RkbD)
call TriggerRegisterAnyUnitEventBJ(gg_trg_RkbD,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_RkbD,Condition(function Trig_RkbD_Conditions))call TriggerAddAction(gg_trg_RkbD,function Trig_RkbD_Actions)endfunctionfunction Trig_Lib_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06J')endfunctionfunction Trig_Lib_Actions takes nothing returns nothingset udg_Lib_Unit[0]=GetTriggerUnit()
set udg_Lib_Point[0]=GetSpellTargetLoc()
set udg_Lib_Point[1]=GetUnitLoc(udg_Lib_Unit[0])
call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Lib_Unit[0]),udg_Lib_Point[0],bj_UNIT_FACING)set udg_Lib_Unit[1]=bj_lastCreatedUnitset udg_Lib_Point[2]=PolarProjectionBJ(udg_Lib_Point[1],25.,AngleBetweenPoints(udg_Lib_Point[1],udg_Lib_Point[0]))call CreateNUnitsAtLocFacingLocBJ(1,'h04W',GetOwningPlayer(udg_Lib_Unit[1]),udg_Lib_Point[2],udg_Lib_Point[0])set udg_Lib_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Lib_Point[0])set udg_Lib_Point[0]=nullcall RemoveLocation(udg_Lib_Point[1])set udg_Lib_Point[1]=nullcall RemoveLocation(udg_Lib_Point[2])set udg_Lib_Point[2]=nullset udg_Lib_Real[0]=BasicDmg_Q(udg_Lib_Unit[0],'A06J',1)
set udg_Lib_Real[1]=60.set udg_Lib_Real[2]=400.
call PauseUnit(udg_Lib_Unit[2],true)
call SetUnitAnimation(udg_Lib_Unit[2],"attack slam")
call SetUnitTimeScalePercent(udg_Lib_Unit[2],70.)call DisplayText("Raiton: Raiju Tsuiga",udg_Lib_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Kakashi\\LightningWolf.wav",GetUnitX(udg_Lib_Unit[0]),GetUnitY(udg_Lib_Unit[0]))call EnableTrigger(gg_trg_LibL)endfunctionfunction InitTrig_Lib takes nothing returns nothingset gg_trg_Lib=CreateTrigger()call TriggerAddCondition(gg_trg_Lib,Condition(function Trig_Lib_Conditions))
call TriggerAddAction(gg_trg_Lib,function Trig_Lib_Actions)endfunctionfunction Trig_LibL_Func003Func026Func005002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lib_Unit[0]))==false)endfunctionfunction Trig_LibL_Func003Func026Func005002003002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LibL_Func003Func026Func005002003 takes nothing returns boolean
return GetBooleanAnd(Trig_LibL_Func003Func026Func005002003001(),Trig_LibL_Func003Func026Func005002003002())endfunctionfunction Trig_LibL_Func003Func026Func006A takes nothing returns nothingcall UnitDamageTargetBJ(udg_Lib_Unit[0],GetEnumUnit(),udg_Lib_Real[0],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction Trig_LibL_Func003Func026C takes nothing returns boolean
return(DistanceBetweenPoints(udg_Lib_Point[0],udg_Lib_Point[1])<=udg_Lib_Real[1])endfunctionfunction Trig_LibL_Func003C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Lib_Point[0],udg_Lib_Point[1])>udg_Lib_Real[1])and(IsUnitAliveBJ(udg_Lib_Unit[1]))and(IsUnitAliveBJ(udg_Lib_Unit[2]))endfunctionfunction Trig_LibL_Actions takes nothing returns nothing
set udg_Lib_Point[0]=GetUnitLoc(udg_Lib_Unit[1])
set udg_Lib_Point[1]=GetUnitLoc(udg_Lib_Unit[2])
if(Trig_LibL_Func003C())then
set udg_Lib_Point[2]=PolarProjectionBJ(udg_Lib_Point[1],udg_Lib_Real[1],AngleBetweenPoints(udg_Lib_Point[1],udg_Lib_Point[0]))call SetUnitPositionLoc(udg_Lib_Unit[2],udg_Lib_Point[2])call CreateNUnitsAtLoc(1,'h04U',GetOwningPlayer(udg_Lib_Unit[1]),udg_Lib_Point[2],bj_UNIT_FACING)set udg_Lib_Unit[3]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(.2,'BTLF',udg_Lib_Unit[3])
call SetUnitTimeScalePercent(udg_Lib_Unit[3],200.)call RemoveLocation(udg_Lib_Point[0])set udg_Lib_Point[0]=nullcall RemoveLocation(udg_Lib_Point[1])set udg_Lib_Point[1]=nullcall RemoveLocation(udg_Lib_Point[2])set udg_Lib_Point[2]=nullset udg_Lib_Unit[3]=null
else
call DisableTrigger(GetTriggeringTrigger())call CreateNUnitsAtLoc(1,'h04V',GetOwningPlayer(udg_Lib_Unit[1]),udg_Lib_Point[1],bj_UNIT_FACING)set udg_Lib_Unit[3]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(1.,'BTLF',udg_Lib_Unit[3])
call SetUnitScalePercent(udg_Lib_Unit[3],600.,600.,600.)
call SetUnitAnimation(udg_Lib_Unit[3],"death")set udg_Lib_Unit[3]=null
call RemoveUnit(udg_Lib_Unit[1])
call RemoveUnit(udg_Lib_Unit[2])
if(Trig_LibL_Func003Func026C())thencall CreateNUnitsAtLoc(1,'h04X',GetOwningPlayer(udg_Lib_Unit[1]),udg_Lib_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Lib_Unit[1]),udg_Lib_Point[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)set udg_Lib_Group=GetUnitsInRangeOfLocMatching(udg_Lib_Real[2],udg_Lib_Point[0],Condition(function Trig_LibL_Func003Func026Func005002003))call ForGroupBJ(udg_Lib_Group,function Trig_LibL_Func003Func026Func006A)
call DestroyGroup(udg_Lib_Group)
set udg_Lib_Group=nullcall EnumDestructablesInCircleBJ(udg_Lib_Real[2],udg_Lib_Point[0],function TreeKiller)endifcall RemoveLocation(udg_Lib_Point[0])set udg_Lib_Point[0]=nullcall RemoveLocation(udg_Lib_Point[1])set udg_Lib_Point[1]=nullset udg_Lib_Unit[0]=null
set udg_Lib_Unit[1]=null
set udg_Lib_Unit[2]=null
set udg_Lib_Real[0]=.0set udg_Lib_Real[1]=.0set udg_Lib_Real[2]=.0endifendfunctionfunction InitTrig_LibL takes nothing returns nothing
set gg_trg_LibL=CreateTrigger()call DisableTrigger(gg_trg_LibL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LibL,.04)call TriggerAddAction(gg_trg_LibL,function Trig_LibL_Actions)endfunctionfunction Trig_Kml_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06L')endfunctionfunction Kml_GroupRemoveDummy takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction Kml_AliveCheck takes nothing returns booleanreturn( not(GetWidgetLife(udg_Kml_Unit[0])<1))and( not(GetWidgetLife(udg_Kml_Unit[1])<1))endfunctionfunction Trig_Kml_Actions takes nothing returns nothingset udg_Kml_Unit[0]=GetTriggerUnit()
set udg_Kml_Unit[1]=GetSpellTargetUnit()
set udg_Kml_Loc[0]=GetUnitLoc(udg_Kml_Unit[1])set udg_Kml_Loc[1]=GetUnitLoc(udg_Kml_Unit[0])set udg_Kml_Real[0]=AngleBetweenPoints(udg_Kml_Loc[1],udg_Kml_Loc[0])call RemoveLocation(udg_Kml_Loc[0])set udg_Kml_Loc[0]=nullcall RemoveLocation(udg_Kml_Loc[1])set udg_Kml_Loc[1]=nullset udg_Kml_Real[1]=72.set udg_Kml_Real[2]=200.
set udg_Kml_Real[3]=(300.+((2.+(1*I2R(GetUnitAbilityLevelSwapped('A06L',udg_Kml_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Kml_Unit[0],true))))
set udg_Kml_Real[4]=udg_Kml_Real[3]*.7call PauseSystem(udg_Kml_Unit[0],true)call SetUnitAnimation(udg_Kml_Unit[0],"spell two")call UnitAddAbility(udg_Kml_Unit[0],'A06K')call UnitAddAbility(udg_Kml_Unit[0],'A06M')call SetUnitTimeScale(udg_Kml_Unit[0],1.5)call SetUnitFacing(udg_Kml_Unit[0],udg_Kml_Real[0])set udg_Kml_Own=GetOwningPlayer(udg_Kml_Unit[0])
set udg_Kml_Int=1loop
exitwhen udg_Kml_Int>2if(Kml_AliveCheck())then
set udg_Kml_Loc[0]=GetUnitLoc(udg_Kml_Unit[0])set udg_Kml_Loc[1]=PolarProjectionBJ(udg_Kml_Loc[0],30.,(udg_Kml_Real[0]-60.))call RemoveLocation(udg_Kml_Loc[0])set udg_Kml_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h04Y',udg_Kml_Own,udg_Kml_Loc[1],GetRandomReal(0,360))
call GroupAddUnit(udg_Kml_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call CreateNUnitsAtLoc(1,'h04Y',udg_Kml_Own,udg_Kml_Loc[1],GetRandomReal(0,360))
call GroupAddUnit(udg_Kml_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call CreateNUnitsAtLoc(1,'h04Y',udg_Kml_Own,udg_Kml_Loc[1],GetRandomReal(0,360))
call GroupAddUnit(udg_Kml_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call CreateNUnitsAtLoc(1,'h04Z',udg_Kml_Own,udg_Kml_Loc[1],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.3)call RemoveLocation(udg_Kml_Loc[1])set udg_Kml_Loc[1]=nullcall TriggerSleepAction(.01)
endifset udg_Kml_Int=udg_Kml_Int+1endloopset udg_Kml_Group=CreateGroup()call GroupAddGroup(udg_Kml_GroupDummy,udg_Kml_Group)
call GroupClear(udg_Kml_GroupDummy)call ForGroupBJ(udg_Kml_Group,function Kml_GroupRemoveDummy)
call DestroyGroup(udg_Kml_Group)
set udg_Kml_Group=nullcall UnitRemoveAbility(udg_Kml_Unit[0],'A06K')if(Kml_AliveCheck())then
call DisplayText("Kamui Raikiri",udg_Kml_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Kakashi\\Raikiri.wav",GetUnitX(udg_Kml_Unit[0]),GetUnitY(udg_Kml_Unit[0]))call SetUnitPathing(udg_Kml_Unit[0],false)call SetUnitAnimation(udg_Kml_Unit[0],"spell three")
call GroupAddUnit(udg_Kml_Group2,udg_Kml_Unit[1])endifset udg_Kml_Int=25call EnableTrigger(gg_trg_KmlL)endfunctionfunction InitTrig_Kml takes nothing returns nothingset gg_trg_Kml=CreateTrigger()call TriggerAddCondition(gg_trg_Kml,Condition(function Trig_Kml_Conditions))
call TriggerAddAction(gg_trg_Kml,function Trig_Kml_Actions)endfunctionfunction Trig_Kml_GroupAct takes nothing returns nothing
local unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h03F',udg_Kml_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(loc)
set loc=null
call GroupAddUnit(udg_Kml_Group2,u)call UnitDamageTarget(udg_Kml_Unit[0],u,udg_Kml_Real[4],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u=nullendfunctionfunction Trig_KmlL_Cond1 takes nothing returns booleanreturn( not(DistanceBetweenPoints(udg_Kml_Loc[0],udg_Kml_Loc[1])<120.))and( not(udg_Kml_Int<0))and( not(GetWidgetLife(udg_Kml_Unit[0])<1))and( not(GetWidgetLife(udg_Kml_Unit[1])<1))endfunctionfunction Trig_KmlL_Cond2 takes nothing returns booleanreturn( not(DistanceBetweenPoints(udg_Kml_Loc[0],udg_Kml_Loc[1])>119.99))and( not(GetWidgetLife(udg_Kml_Unit[0])<1))and( not(GetWidgetLife(udg_Kml_Unit[1])<1))endfunctionfunction Trig_KmlL_Actions takes nothing returns nothing
set udg_Kml_Loc[0]=GetUnitLoc(udg_Kml_Unit[0])set udg_Kml_Loc[1]=GetUnitLoc(udg_Kml_Unit[1])set udg_Kml_Real[0]=AngleBetweenPoints(udg_Kml_Loc[0],udg_Kml_Loc[1])if(Trig_KmlL_Cond1())thenset udg_Kml_Int=udg_Kml_Int-1set udg_Kml_Loc[2]=PolarProjectionBJ(udg_Kml_Loc[0],udg_Kml_Real[1],udg_Kml_Real[0])
if(IsTerrainPathable(GetLocationX(udg_Kml_Loc[2]),GetLocationY(udg_Kml_Loc[2]),PATHING_TYPE_WALKABILITY))thencall EnumDestructablesInCircleBJ(udg_Kml_Real[2],udg_Kml_Loc[1],function TreeKiller)
call SetUnitPositionLocFacingBJ(udg_Kml_Unit[0],udg_Kml_Loc[1],udg_Kml_Real[0])call CreateNUnitsAtLoc(1,'h04U',udg_Kml_Own,udg_Kml_Loc[1],bj_UNIT_FACING)set udg_Kml_Unit[2]=bj_lastCreatedUnitelse
call EnumDestructablesInCircleBJ(udg_Kml_Real[2],udg_Kml_Loc[2],function TreeKiller)
call SetUnitPositionLocFacingBJ(udg_Kml_Unit[0],udg_Kml_Loc[2],udg_Kml_Real[0])call CreateNUnitsAtLoc(1,'h04U',udg_Kml_Own,udg_Kml_Loc[2],bj_UNIT_FACING)set udg_Kml_Unit[2]=bj_lastCreatedUnitendifcall RemoveLocation(udg_Kml_Loc[0])set udg_Kml_Loc[0]=nullcall RemoveLocation(udg_Kml_Loc[1])set udg_Kml_Loc[1]=nullcall SetUnitTimeScale(udg_Kml_Unit[2],2.)call UnitApplyTimedLife(udg_Kml_Unit[2],'BTLF',.3)set udg_Kml_Unit[2]=null
set udg_Kml_Group=DynamicCreateGroup2(udg_Kml_Loc[2],udg_Kml_Real[2],udg_Kml_Own,udg_Kml_Group2)
call RemoveLocation(udg_Kml_Loc[2])set udg_Kml_Loc[2]=nullcall ForGroupBJ(udg_Kml_Group,function Trig_Kml_GroupAct)call DestroyGroup(udg_Kml_Group)
set udg_Kml_Group=nullelse
call DisableTrigger(GetTriggeringTrigger())if(Trig_KmlL_Cond2())thencall CreateNUnitsAtLoc(1,'h03K',udg_Kml_Own,udg_Kml_Loc[1],udg_Kml_Real[0])call SetUnitVertexColor(bj_lastCreatedUnit,50,$96,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h03K',udg_Kml_Own,udg_Kml_Loc[1],udg_Kml_Real[0])call SetUnitVertexColor(bj_lastCreatedUnit,50,$96,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h09X',udg_Kml_Own,udg_Kml_Loc[1],udg_Kml_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h07I',udg_Kml_Own,udg_Kml_Loc[1],udg_Kml_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)call UnitDamageTarget(udg_Kml_Unit[0],udg_Kml_Unit[1],udg_Kml_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifcall RemoveLocation(udg_Kml_Loc[0])set udg_Kml_Loc[0]=nullcall RemoveLocation(udg_Kml_Loc[1])set udg_Kml_Loc[1]=nullcall GroupClear(udg_Kml_Group2)call SetUnitPathing(udg_Kml_Unit[0],true)call UnitRemoveAbility(udg_Kml_Unit[0],'A06M')call PauseSystem(udg_Kml_Unit[0],false)call SetUnitTimeScalePercent(udg_Kml_Unit[0],100.)if(GetWidgetLife(udg_Kml_Unit[0])>0 and GetWidgetLife(udg_Kml_Unit[1])<1)thencall QueueUnitAnimation(udg_Kml_Unit[0],"stand ready")endifset udg_Kml_Unit[0]=null
set udg_Kml_Unit[1]=null
set udg_Kml_Own=null
set udg_Kml_Real[0]=.0set udg_Kml_Real[1]=.0set udg_Kml_Real[2]=.0set udg_Kml_Real[3]=.0set udg_Kml_Real[4]=.0set udg_Kml_Int=0endifendfunctionfunction InitTrig_KmlL takes nothing returns nothing
set gg_trg_KmlL=CreateTrigger()call DisableTrigger(gg_trg_KmlL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KmlL,.03)call TriggerAddAction(gg_trg_KmlL,function Trig_KmlL_Actions)endfunctionfunction Trig_Lie_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06N')endfunctionfunction Trig_Lie_Actions takes nothing returns nothingset udg_Lie_Unit[0]=GetTriggerUnit()
set udg_Lie_Point[0]=GetSpellTargetLoc()
call CreateNUnitsAtLoc(1,'h050',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],bj_UNIT_FACING)set udg_Lie_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h051',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],bj_UNIT_FACING)set udg_Lie_Unit[2]=bj_lastCreatedUnitset udg_Lie_Real[0]=450.
call EnumDestructablesInCircleBJ(udg_Lie_Real[0],udg_Lie_Point[0],function TreeKiller)call RemoveLocation(udg_Lie_Point[0])set udg_Lie_Point[0]=nullcall SetUnitAnimation(udg_Lie_Unit[2],"spell")call DisplayText("Kamui",udg_Lie_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call PauseSystem(udg_Lie_Unit[0],true)call SetUnitTimeScalePercent(udg_Lie_Unit[0],.0)
call SetUnitTimeScalePercent(udg_Lie_Unit[2],30.)set udg_Lie_Real[1]=(700.+(I2R(GetUnitAbilityLevelSwapped('A06N',udg_Lie_Unit[0]))*100.))set udg_Lie_Real[2]=50.set udg_Lie_Real[3]=42.call TriggerSleepAction(.01)
call DisplayText("Kamui",udg_Lie_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Kakashi\\Kamui.wav",GetUnitX(udg_Lie_Unit[0]),GetUnitY(udg_Lie_Unit[0]))call PauseSystem(udg_Lie_Unit[0],false)call QueueUnitAnimation(udg_Lie_Unit[0],"stand")
call SetUnitTimeScalePercent(udg_Lie_Unit[0],100.)call SetUnitTimeScalePercent(udg_Lie_Unit[2],100.)call SetUnitAnimation(udg_Lie_Unit[2],"stand")set udg_Lie_Int=29call EnableTrigger(gg_trg_LieL)endfunctionfunction InitTrig_Lie takes nothing returns nothingset gg_trg_Lie=CreateTrigger()call TriggerAddCondition(gg_trg_Lie,Condition(function Trig_Lie_Conditions))
call TriggerAddAction(gg_trg_Lie,function Trig_Lie_Actions)endfunctionfunction Trig_LieL_Func001Func008A takes nothing returns nothing
call SetUnitPathing(GetEnumUnit(),true)endfunctionfunction Trig_LieL_Func001Func011Func016002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lie_Unit[0]))==false)endfunctionfunction Trig_LieL_Func001Func011Func016002003002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LieL_Func001Func011Func016002003 takes nothing returns boolean
return GetBooleanAnd(Trig_LieL_Func001Func011Func016002003001(),Trig_LieL_Func001Func011Func016002003002())endfunctionfunction Trig_LieL_Func001Func011Func022A takes nothing returns nothingcall UnitDamageTargetBJ(udg_Lie_Unit[0],GetEnumUnit(),udg_Lie_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_LieL_Func001Func011C takes nothing returns boolean
return(udg_Lie_Int<1)and(IsUnitAliveBJ(udg_Lie_Unit[1])==false)endfunctionfunction Trig_LieL_Func001Func025002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lie_Unit[0]))==false)endfunctionfunction Trig_LieL_Func001Func025002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LieL_Func001Func025002003002002001 takes nothing returns booleanreturn(IsUnitPaused(GetFilterUnit())==false)
endfunctionfunction Trig_LieL_Func001Func025002003002002002 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_MECHANICAL)==false)!=nullendfunctionfunction Trig_LieL_Func001Func025002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_LieL_Func001Func025002003002002001(),Trig_LieL_Func001Func025002003002002002())endfunctionfunction Trig_LieL_Func001Func025002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_LieL_Func001Func025002003002001(),Trig_LieL_Func001Func025002003002002())endfunctionfunction Trig_LieL_Func001Func025002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_LieL_Func001Func025002003001(),Trig_LieL_Func001Func025002003002())endfunctionfunction Trig_LieL_Func001Func028Func002C takes nothing returns booleanreturn(IsUnitInGroup(udg_Lie_Unit[3],udg_Lie_Group2)==false)
endfunctionfunction Trig_LieL_Func001Func028Func005Func003C takes nothing returns booleanreturn(IsTerrainPathableBJ(udg_Lie_Point[3],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_LieL_Func001Func028Func005C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Lie_Point[1],udg_Lie_Point[2])<=udg_Lie_Real[2])endfunctionfunction Trig_LieL_Func001Func028A takes nothing returns nothing
set udg_Lie_Unit[3]=GetEnumUnit()if(Trig_LieL_Func001Func028Func002C())thencall GroupAddUnit(udg_Lie_Group2,udg_Lie_Unit[3])call SetUnitPathing(udg_Lie_Unit[3],false)endifset udg_Lie_Point[1]=GetUnitLoc(udg_Lie_Unit[1])
set udg_Lie_Point[2]=GetUnitLoc(udg_Lie_Unit[3])
if(Trig_LieL_Func001Func028Func005C())thenelse
set udg_Lie_Point[3]=PolarProjectionBJ(udg_Lie_Point[2],udg_Lie_Real[3],AngleBetweenPoints(udg_Lie_Point[2],udg_Lie_Point[1]))if(Trig_LieL_Func001Func028Func005Func003C())thencall SetUnitPositionLoc(udg_Lie_Unit[3],udg_Lie_Point[3])endifcall RemoveLocation(udg_Lie_Point[3])set udg_Lie_Point[3]=nullendifcall RemoveLocation(udg_Lie_Point[1])set udg_Lie_Point[1]=nullcall RemoveLocation(udg_Lie_Point[2])set udg_Lie_Point[2]=nullset udg_Lie_Unit[3]=null
endfunctionfunction Trig_LieL_Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Lie_Unit[0]))and(IsUnitAliveBJ(udg_Lie_Unit[1]))and(udg_Lie_Int>0)endfunctionfunction Trig_LieL_Actions takes nothing returns nothing
if(Trig_LieL_Func001C())then
set udg_Lie_Point[0]=GetUnitLoc(udg_Lie_Unit[1])
set udg_Lie_Group=GetUnitsInRangeOfLocMatching(udg_Lie_Real[0],udg_Lie_Point[0],Condition(function Trig_LieL_Func001Func025002003))call RemoveLocation(udg_Lie_Point[0])set udg_Lie_Point[0]=nullcall ForGroupBJ(udg_Lie_Group,function Trig_LieL_Func001Func028A)call DestroyGroup(udg_Lie_Group)
set udg_Lie_Group=nullset udg_Lie_Int=(udg_Lie_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Lie_Group=CreateGroup()call GroupAddGroup(udg_Lie_Group2,udg_Lie_Group)
call GroupClear(udg_Lie_Group2)call ForGroupBJ(udg_Lie_Group,function Trig_LieL_Func001Func008A)call DestroyGroup(udg_Lie_Group)
set udg_Lie_Group=nullif(Trig_LieL_Func001Func011C())thenelse
set udg_Lie_Point[0]=GetUnitLoc(udg_Lie_Unit[1])
call CreateNUnitsAtLoc(1,'h052',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],bj_UNIT_FACING)set udg_Lie_Unit[3]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Lie_Unit[3])
call SetUnitTimeScalePercent(udg_Lie_Unit[3],40.)set udg_Lie_Unit[3]=null
call CreateNUnitsAtLoc(1,'h01H',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],bj_UNIT_FACING)set udg_Lie_Unit[3]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(2.,'BTLF',udg_Lie_Unit[3])
call SetUnitScalePercent(udg_Lie_Unit[3],200.,200.,200.)
set udg_Lie_Unit[3]=null
call CreateNUnitsAtLoc(1,'h053',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h053',GetOwningPlayer(udg_Lie_Unit[0]),udg_Lie_Point[0],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)set udg_Lie_Group=GetUnitsInRangeOfLocMatching(udg_Lie_Real[0],udg_Lie_Point[0],Condition(function Trig_LieL_Func001Func011Func016002003))call RemoveLocation(udg_Lie_Point[0])set udg_Lie_Point[0]=nullcall ForGroupBJ(udg_Lie_Group,function Trig_LieL_Func001Func011Func022A)
call DestroyGroup(udg_Lie_Group)
set udg_Lie_Group=nullendifcall SetUnitAnimation(udg_Lie_Unit[1],"death")call SetUnitScalePercent(udg_Lie_Unit[1],170.,170.,170.)
call UnitApplyTimedLifeBJ(2.5,'BTLF',udg_Lie_Unit[1])call RemoveUnit(udg_Lie_Unit[2])
set udg_Lie_Unit[0]=null
set udg_Lie_Unit[1]=null
set udg_Lie_Unit[2]=null
set udg_Lie_Real[0]=.0set udg_Lie_Real[1]=.0set udg_Lie_Real[2]=.0set udg_Lie_Real[3]=.0set udg_Lie_Int=0endifendfunctionfunction InitTrig_LieL takes nothing returns nothing
set gg_trg_LieL=CreateTrigger()call DisableTrigger(gg_trg_LieL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LieL,.04)call TriggerAddAction(gg_trg_LieL,function Trig_LieL_Actions)endfunctionfunction KakashiKamuiStrike__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==KakashiKamuiStrike__skId)endfunctionfunction KakashiKamuiStrike__Act takes nothing returns nothinglocal unit array ulocal player plocal group glocal real garea
local real array xlocal real array ylocal real array rlocal real dmglocal integer iset u[0]=GetTriggerUnit()call UnitAddAbility(u[0],'A06M')
set p=GetOwningPlayer(u[0])set garea=600.set dmg=(GetHeroAgi(u[0],true)*4.)call Dynamic_Sound("Sounds\\Amaterasu2.mp3")
call DisplayText("Mangekyou Sharingan !",u[0],.023,true,$FF,$FF,$FF,$FF)
set x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set u[1]=CreateUnit(p,'h054',x[0],y[0],bj_UNIT_FACING)call UnitAddAbility(u[1],'A0J2')
call UnitRemoveAbility(u[1],'Amov')call IssuePointOrderById(u[1],$D0270,x[0],y[0])call UnitApplyTimedLife(u[1],'BTLF',30.)
call SetUnitInvulnerable(u[0],true)call SetUnitVertexColor(u[0],$FF,$FF,$FF,'}')set r[0]=.18
set i=(4+GetUnitAbilityLevel(u[0],KakashiKamuiStrike__skId))
loop
exitwhen(i<1)or(GetUnitState(u[0],UNIT_STATE_LIFE)<1)set i=i-1set g=CreateGroupXYnWW(x[0],y[0],garea,p)set u[2]=GroupRandomUnit(g)call DestroyGroup(g)
set g=nullif(u[2]!=null)thenset r[1]=120.set r[2]=GetRandomReal(0,360)set x[1]=PolarX(GetUnitX(u[2]),r[1],r[2])set y[1]=PolarY(GetUnitY(u[2]),r[1],r[2])set bj_lastCreatedUnit=CreateUnit(p,'h03G',GetUnitX(u[0]),GetUnitY(u[0]),GetUnitFacing(u[0]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyTreeXY(x[1],y[1],150.)call UnitMoveXY2(u[0],x[1],y[1])
set bj_lastCreatedUnit=CreateUnit(p,'h051',x[1],y[1],GetUnitFacing(u[0]))call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call SetUnitScale(bj_lastCreatedUnit,.4,.4,.4)call SetUnitFlyHeight(bj_lastCreatedUnit,20.,.0)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdx",u[2],"chest"))
call IssueTargetOrderById(u[0],$D000F,u[2])call UnitDamageTarget(u[0],u[2],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetUnitState(u[2],UNIT_STATE_LIFE)<0)then
call SetUnitAnimation(u[0],"attack")
call SetUnitFacing(u[0],AngleBetweenXY(x[1],y[1],GetUnitX(u[2]),GetUnitY(u[2])))
endifendifcall TriggerSleepAction(r[0])endloopcall RemoveUnit(u[1])call UnitRemoveAbility(u[0],'A06M')call UnitRemoveAbility(u[0],'B04L')call SetUnitInvulnerable(u[0],false)
call SetUnitVertexColor(u[0],$FF,$FF,$FF,$FF)set u[0]=nullset u[1]=nullset u[2]=nullset p=nullendfunctionfunction KakashiKamuiStrike__Init takes nothing returns nothingset gg_trg_Kakashi_KamuiStrike=CreateTrigger()call TriggerAddCondition(gg_trg_Kakashi_KamuiStrike,Condition(function KakashiKamuiStrike__Cond))call TriggerAddAction(gg_trg_Kakashi_KamuiStrike,function KakashiKamuiStrike__Act)endfunctionfunction Trig_Tls_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06P')endfunctionfunction Trig_Tls_Actions takes nothing returns nothingset udg_Tls_Unit[0]=GetTriggerUnit()
set udg_Tls_Unit[1]=GetSpellTargetUnit()
set udg_Tls_Real[0]=(800.+((10.*I2R(GetUnitAbilityLevelSwapped('A06P',udg_Tls_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Tls_Unit[0],false))))call SetUnitInvulnerable(udg_Tls_Unit[0],true)call SetUnitInvulnerable(udg_Tls_Unit[1],true)call PauseSystem(udg_Tls_Unit[0],true)call PauseSystem(udg_Tls_Unit[1],true)call SetUnitPathing(udg_Tls_Unit[0],false)call SetUnitPathing(udg_Tls_Unit[1],false)call SetUnitAnimation(udg_Tls_Unit[0],"spell three")
call UnitAddAbility(udg_Tls_Unit[0],'A06K')call UnitAddAbility(udg_Tls_Unit[0],'A06M')call TriggerSleepAction(.05)
call UnitRemoveAbility(udg_Tls_Unit[0],'A06K')call SetUnitTimeScalePercent(udg_Tls_Unit[0],.0)
set udg_Tls_Own=GetOwningPlayer(udg_Tls_Unit[0])
set udg_Tls_Loc[0]=GetUnitLoc(udg_Tls_Unit[0])set udg_Tls_Loc[1]=GetUnitLoc(udg_Tls_Unit[1])set udg_Tls_Real[1]=AngleBetweenPoints(udg_Tls_Loc[0],udg_Tls_Loc[1])call CreateNUnitsAtLoc(1,'h013',udg_Tls_Own,udg_Tls_Loc[0],udg_Tls_Real[1])call UnitApplyTimedLifeBJ(1.2,'BTLF',bj_lastCreatedUnit)
set udg_Tls_Loc[2]=PolarProjectionBJ(udg_Tls_Loc[1],-120.,udg_Tls_Real[1])call SetUnitPositionLocFacingBJ(udg_Tls_Unit[0],udg_Tls_Loc[2],udg_Tls_Real[1])call RemoveLocation(udg_Tls_Loc[0])set udg_Tls_Loc[0]=nullcall RemoveLocation(udg_Tls_Loc[1])set udg_Tls_Loc[1]=nullcall RemoveLocation(udg_Tls_Loc[2])set udg_Tls_Loc[2]=nullset udg_Tls_Int=20set udg_Tls_Real[2]=72.set udg_Tls_Real[3]=110.
set udg_Tls_Real[4]=170.
set udg_Tls_Bool=truecall EnableTrigger(gg_trg_TlsL)endfunctionfunction InitTrig_Tls takes nothing returns nothingset gg_trg_Tls=CreateTrigger()call TriggerAddCondition(gg_trg_Tls,Condition(function Trig_Tls_Conditions))
call TriggerAddAction(gg_trg_Tls,function Trig_Tls_Actions)endfunctionfunction Trig_TlsL_Func001Func003C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Tls_Unit[0]))and(IsUnitAliveBJ(udg_Tls_Unit[1]))endfunctionfunction Trig_TlsL_Func001Func022C takes nothing returns boolean
return(udg_Tls_Bool)
endfunctionfunction Trig_TlsL_Func001Func023C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Tls_Loc[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_TlsL_Func001C takes nothing returns booleanreturn(udg_Tls_Int>0)and(IsUnitAliveBJ(udg_Tls_Unit[0]))and(IsUnitAliveBJ(udg_Tls_Unit[1]))endfunctionfunction Trig_TlsL_Actions takes nothing returns nothing
if(Trig_TlsL_Func001C())then
set udg_Tls_Int=(udg_Tls_Int-1)set udg_Tls_Loc[0]=GetUnitLoc(udg_Tls_Unit[0])set udg_Tls_Loc[1]=PolarProjectionBJ(udg_Tls_Loc[0],udg_Tls_Real[2],udg_Tls_Real[1])
call RemoveLocation(udg_Tls_Loc[0])set udg_Tls_Loc[0]=nullset udg_Tls_Loc[2]=PolarProjectionBJ(udg_Tls_Loc[1],udg_Tls_Real[3],udg_Tls_Real[1])
if(Trig_TlsL_Func001Func022C())thenset udg_Tls_Bool=falsecall CreateNUnitsAtLoc(1,'h04U',udg_Tls_Own,udg_Tls_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(.4,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04V',udg_Tls_Own,udg_Tls_Loc[2],bj_UNIT_FACING)set udg_Tls_Unit[2]=bj_lastCreatedUnitcall UnitApplyTimedLifeBJ(.4,'BTLF',udg_Tls_Unit[2])
call SetUnitScalePercent(udg_Tls_Unit[2],400.,400.,400.)
call SetUnitAnimation(udg_Tls_Unit[2],"death")set udg_Tls_Unit[2]=null
else
set udg_Tls_Bool=trueendifif(Trig_TlsL_Func001Func023C())thencall EnumDestructablesInCircleBJ(udg_Tls_Real[4],udg_Tls_Loc[2],function TreeKiller)
call SetUnitPositionLocFacingBJ(udg_Tls_Unit[0],udg_Tls_Loc[1],udg_Tls_Real[1])call SetUnitPositionLocFacingBJ(udg_Tls_Unit[1],udg_Tls_Loc[2],udg_Tls_Real[1])call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_Tls_Unit[0]),udg_Tls_Loc[1],0)
call PanCameraToTimedLocForPlayer(GetOwningPlayer(udg_Tls_Unit[1]),udg_Tls_Loc[2],0)
endifcall RemoveLocation(udg_Tls_Loc[1])set udg_Tls_Loc[1]=nullcall RemoveLocation(udg_Tls_Loc[2])set udg_Tls_Loc[2]=nullelse
call DisableTrigger(GetTriggeringTrigger())call UnitRemoveAbility(udg_Tls_Unit[0],'A06M')if(Trig_TlsL_Func001Func003C())thencall DisplayText("Kamui Raikiri: Soraishin",udg_Tls_Unit[0],.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\ORaikiri.mp3")set udg_Tls_Loc[0]=GetUnitLoc(udg_Tls_Unit[0])set udg_Tls_Loc[1]=GetUnitLoc(udg_Tls_Unit[1])call CreateNUnitsAtLoc(1,'h013',udg_Tls_Own,udg_Tls_Loc[0],udg_Tls_Real[1])call UnitApplyTimedLifeBJ(1.2,'BTLF',bj_lastCreatedUnit)
call SetUnitVertexColorBJ(udg_Tls_Unit[0],'d','d','d',100.)call SetUnitPositionLoc(udg_Tls_Unit[0],udg_Tls_Loc[1])call CreateNUnitsAtLoc(1,'h05A',udg_Tls_Own,udg_Tls_Loc[1],udg_Tls_Real[1])set udg_Tls_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Tls_Loc[0])set udg_Tls_Loc[0]=nullcall RemoveLocation(udg_Tls_Loc[1])set udg_Tls_Loc[1]=nullcall SetUnitAnimation(udg_Tls_Unit[2],"spell three")
call SetUnitFlyHeight(udg_Tls_Unit[2],.0,3200.)call TriggerSleepAction(.22)
call RemoveUnit(udg_Tls_Unit[2])
set udg_Tls_Unit[2]=null
call SetUnitVertexColorBJ(udg_Tls_Unit[0],'d','d','d',.0)set udg_Tls_Loc[0]=GetUnitLoc(udg_Tls_Unit[1])call CreateNUnitsAtLoc(1,'h04S',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04S',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04S',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h03B',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h03B',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h03B',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h04T',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
set udg_Tls_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04T',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
set udg_Tls_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04T',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)set udg_Tls_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h056',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)set udg_Tls_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04V',udg_Tls_Own,udg_Tls_Loc[0],bj_UNIT_FACING)set udg_Tls_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h058',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
set udg_Tls_Unit[7]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h058',udg_Tls_Own,udg_Tls_Loc[0],GetRandomReal(0,360))
set udg_Tls_Unit[8]=bj_lastCreatedUnitcall EnumDestructablesInCircleBJ(500.,udg_Tls_Loc[0],function TreeKiller)call Dynamic_GroupShake(GetLocationX(udg_Tls_Loc[0]),GetLocationY(udg_Tls_Loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Tls_Loc[0])set udg_Tls_Loc[0]=nullcall SetUnitScalePercent(udg_Tls_Unit[2],400.,400.,400.)
call SetUnitScalePercent(udg_Tls_Unit[3],400.,400.,400.)
call SetUnitScalePercent(udg_Tls_Unit[4],1000.,1000.,1000.)call SetUnitScalePercent(udg_Tls_Unit[5],500.,500.,500.)
call SetUnitScalePercent(udg_Tls_Unit[6],500.,500.,500.)
call SetUnitScalePercent(udg_Tls_Unit[7],200.,200.,200.)
call SetUnitScalePercent(udg_Tls_Unit[8],200.,200.,200.)
call SetUnitAnimation(udg_Tls_Unit[6],"death")call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Tls_Unit[2])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Tls_Unit[3])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Tls_Unit[4])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Tls_Unit[5])
call UnitApplyTimedLifeBJ(.6,'BTLF',udg_Tls_Unit[6])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Tls_Unit[7])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Tls_Unit[8])
set udg_Tls_Unit[2]=null
set udg_Tls_Unit[3]=null
set udg_Tls_Unit[4]=null
set udg_Tls_Unit[5]=null
set udg_Tls_Unit[6]=null
set udg_Tls_Unit[7]=null
set udg_Tls_Unit[8]=null
call SetUnitInvulnerable(udg_Tls_Unit[0],false)call SetUnitInvulnerable(udg_Tls_Unit[1],false)call SetUnitPathing(udg_Tls_Unit[0],true)call SetUnitPathing(udg_Tls_Unit[1],true)call PauseSystem(udg_Tls_Unit[0],false)call PauseSystem(udg_Tls_Unit[1],false)call DisplayText(I2S(R2I(udg_Tls_Real[0]))+"!",udg_Tls_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Tls_Unit[0],udg_Tls_Unit[1],udg_Tls_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(GetWidgetLife(udg_Tls_Unit[1])>0)then
set udg_Tls_Loc[1]=GetUnitLoc(udg_Tls_Unit[1])call CreateNUnitsAtLoc(1,'u003',udg_Tls_Own,udg_Tls_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0ED')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Tls_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Tls_Loc[1])set udg_Tls_Loc[1]=nullendifelse
call SetUnitInvulnerable(udg_Tls_Unit[0],false)call SetUnitInvulnerable(udg_Tls_Unit[1],false)call SetUnitPathing(udg_Tls_Unit[0],true)call SetUnitPathing(udg_Tls_Unit[1],true)call PauseSystem(udg_Tls_Unit[0],false)call PauseSystem(udg_Tls_Unit[1],false)endifcall SetUnitTimeScalePercent(udg_Tls_Unit[0],100.)call QueueUnitAnimation(udg_Tls_Unit[0],"stand ready")set udg_Tls_Own=null
set udg_Tls_Unit[0]=null
set udg_Tls_Unit[1]=null
set udg_Tls_Real[0]=.0set udg_Tls_Real[1]=.0set udg_Tls_Real[2]=.0set udg_Tls_Real[3]=.0set udg_Tls_Real[4]=.0set udg_Tls_Int=0set udg_Tls_Bool=falseendifendfunctionfunction InitTrig_TlsL takes nothing returns nothing
set gg_trg_TlsL=CreateTrigger()call DisableTrigger(gg_trg_TlsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TlsL,.04)call TriggerAddAction(gg_trg_TlsL,function Trig_TlsL_Actions)endfunctionfunction AI_Ishida_Cond5 takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='E001')or(GetUnitTypeId(GetTriggerUnit())=='E002')endfunctionfunction AI_Ishida_Cond3 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Ishida_Cond5())thenreturn false
endifreturn trueendfunctionfunction AI_Ishida_Cond4 takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='E001')or(GetUnitTypeId(GetAttacker())=='E002')
endfunctionfunction AI_Ishida_Cond2 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Ishida_Cond4())thenreturn false
endifreturn trueendfunctionfunction AI_Ishida_Cond1 takes nothing returns booleanif(AI_Ishida_Cond3())thenreturn trueelseif(AI_Ishida_Cond2())thenreturn trueendifreturn false
endfunctionfunction AI_Ishida_Cond takes nothing returns booleanif(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Ishida_Cond1())thenreturn false
endifreturn trueendfunctionfunction AI_Ishida_Act takes nothing returns nothing
local unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_C=false
local real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Ishida_Cond5())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A070')call SelectHeroSkill(AI_1,'A06Y')call SelectHeroSkill(AI_1,'A06W')call SelectHeroSkill(AI_1,'A06U')call SelectHeroSkill(AI_1,'A06S')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifcall IssueImmediateOrderById(AI_1,$D0084)set AI_Point3=GetUnitLoc(AI_2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssueImmediateOrderById(AI_1,$D02B7)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point3)call IssuePointOrderByIdLoc(AI_1,$D0271,AI_Point3)call IssueTargetOrderById(AI_1,$D00FA,AI_2)set AI_C=falseendifendifcall RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Ishida takes nothing returns nothingset udg_AI_Trig[9]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[9],Condition(function AI_Ishida_Cond))call TriggerAddAction(udg_AI_Trig[9],function AI_Ishida_Act)
endfunctionfunction Trig_Mts_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06S')endfunctionfunction Trig_Mts_Func008001 takes nothing returns booleanreturn(UnitHasBuffBJ(udg_Mts_Unit,udg_Mts_Buff)==false)endfunctionfunction Trig_Mts_Actions takes nothing returns nothingset udg_Mts_Unit=GetTriggerUnit()set udg_Mts_Skill='A06R'
set udg_Mts_Buff='B017'call UnitAddAbility(udg_Mts_Unit,udg_Mts_Skill)call SetUnitAbilityLevelSwapped('A06Q',udg_Mts_Unit,GetUnitAbilityLevelSwapped('A06S',udg_Mts_Unit))
call SetPlayerAbilityAvailableBJ(false,udg_Mts_Skill,GetOwningPlayer(udg_Mts_Unit))call TriggerSleepAction(.1)loop
exitwhen(Trig_Mts_Func008001())call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL,.1))endloopcall UnitRemoveAbility(udg_Mts_Unit,udg_Mts_Skill)set udg_Mts_Unit=nullset udg_Mts_Skill=0set udg_Mts_Buff=0endfunctionfunction InitTrig_Mts takes nothing returns nothingset gg_trg_Mts=CreateTrigger()call TriggerAddCondition(gg_trg_Mts,Condition(function Trig_Mts_Conditions))
call TriggerAddAction(gg_trg_Mts,function Trig_Mts_Actions)endfunctionfunction Trig_Lrg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06U')endfunctionfunction Trig_Lrg_Func002C takes nothing returns boolean
return(GetUnitTypeId(GetSpellTargetUnit())==0)endfunctionfunction Trig_Lrg_Actions takes nothing returns nothingset udg_Lrg_Unit[0]=GetTriggerUnit()
if(Trig_Lrg_Func002C())thenset udg_Lrg_Loc[0]=GetSpellTargetLoc()call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[0],bj_UNIT_FACING)set udg_Lrg_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrg_Loc[0])set udg_Lrg_Loc[0]=nullset udg_Lrg_Bool=trueelse
set udg_Lrg_Unit[1]=GetSpellTargetUnit()
set udg_Lrg_Bool=falseendifset udg_Lrg_Real[0]=(25.+(.28*I2R(GetHeroAgi(udg_Lrg_Unit[0],true))))set udg_Lrg_Int[0]=(16+(GetUnitAbilityLevelSwapped('A06U',udg_Lrg_Unit[0])*2))set udg_Lrg_Real[1]=200.
set udg_Lrg_Real[2]=300.
set udg_Lrg_Loc[0]=GetUnitLoc(udg_Lrg_Unit[1])call CreateNUnitsAtLoc(1,'h000',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[0],bj_UNIT_FACING)set udg_Lrg_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrg_Loc[0])set udg_Lrg_Loc[0]=nullcall UnitApplyTimedLifeBJ(10.,'BTLF',udg_Lrg_Unit[2])set udg_Lrg_Loc[1]=GetUnitLoc(udg_Lrg_Unit[0])call CreateNUnitsAtLoc(1,'h05B',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[1],bj_UNIT_FACING)set udg_Lrg_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Lrg_Loc[1])set udg_Lrg_Loc[1]=nullcall SetUnitVertexColorBJ(udg_Lrg_Unit[3],'d','d','d',100.)call SetUnitFlyHeight(udg_Lrg_Unit[3],2000.,2000.)call DisplayText("Licht Regen",udg_Lrg_Unit[0],.023,true,$FF,$FF,$FF,$FF)call TriggerSleepAction(.01)
call SetUnitVertexColorBJ(udg_Lrg_Unit[3],'d','d','d',.0)call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Lrg_Unit[3])
set udg_Lrg_Unit[3]=null
call EnableTrigger(gg_trg_LrgM)call TriggerSleepAction(.5)call EnableTrigger(gg_trg_LrgL)endfunctionfunction InitTrig_Lrg takes nothing returns nothingset gg_trg_Lrg=CreateTrigger()call TriggerAddCondition(gg_trg_Lrg,Condition(function Trig_Lrg_Conditions))
call TriggerAddAction(gg_trg_Lrg,function Trig_Lrg_Actions)endfunctionfunction Trig_LrgM_Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Lrg_Unit[1]))and(IsUnitAliveBJ(udg_Lrg_Unit[2]))endfunctionfunction Trig_LrgM_Actions takes nothing returns nothing
local location Loc1local location Loc2local location Loc3if(Trig_LrgM_Func001C())then
set Loc1=GetUnitLoc(udg_Lrg_Unit[2])
set Loc2=GetUnitLoc(udg_Lrg_Unit[1])
if(DistanceBetweenPoints(Loc1,Loc2)>90.)then
set Loc3=PolarProjectionBJ(Loc2,-80.,AngleBetweenPoints(Loc1,Loc2))call SetUnitPositionLoc(udg_Lrg_Unit[2],Loc3)call RemoveLocation(Loc3)set Loc3=nullelse
call SetUnitPositionLoc(udg_Lrg_Unit[2],Loc2)endifcall RemoveLocation(Loc1)set Loc1=nullcall RemoveLocation(Loc2)set Loc2=nullendifendfunctionfunction InitTrig_LrgM takes nothing returns nothing
set gg_trg_LrgM=CreateTrigger()call DisableTrigger(gg_trg_LrgM)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrgM,.4)call TriggerAddAction(gg_trg_LrgM,function Trig_LrgM_Actions)endfunctionfunction Trig_LrgL_Func001Func012002003001 takes nothing returns boolean
return(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Lrg_Unit[0]))==false)endfunctionfunction Trig_LrgL_Func001Func012002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_LrgL_Func001Func012002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_LrgL_Func001Func012002003001(),Trig_LrgL_Func001Func012002003002())endfunctionfunction Trig_LrgL_Func001Func017A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Lrg_Unit[0],GetEnumUnit(),udg_Lrg_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_LrgL_Func001Func025C takes nothing returns boolean
return(ModuloInteger(udg_Lrg_Int[0],4)==0)endfunctionfunction Trig_LrgL_Func001Func032C takes nothing returns boolean
return(udg_Lrg_Bool)
endfunctionfunction Trig_LrgL_Func001C takes nothing returns booleanreturn(udg_Lrg_Int[0]>0)
endfunctionfunction Trig_LrgL_Actions takes nothing returns nothing
if(Trig_LrgL_Func001C())then
set udg_Lrg_Loc[0]=GetUnitLoc(udg_Lrg_Unit[2])set udg_Lrg_Loc[1]=PolarProjectionBJ(udg_Lrg_Loc[0],GetRandomReal(0,250.),GetRandomReal(0,360))call CreateNUnitsAtLoc(1,'h05C',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[1],GetRandomReal(0,360))set udg_Lrg_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[1],GetRandomReal(0,360))set udg_Lrg_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05D',GetOwningPlayer(udg_Lrg_Unit[0]),udg_Lrg_Loc[1],GetRandomReal(0,360))set udg_Lrg_Unit[5]=bj_lastCreatedUnitcall EnumDestructablesInCircleBJ(udg_Lrg_Real[2],udg_Lrg_Loc[0],function TreeKiller)
set udg_Lrg_Group=GetUnitsInRangeOfLocMatching(udg_Lrg_Real[2],udg_Lrg_Loc[0],Condition(function Trig_LrgL_Func001Func012002003))call RemoveLocation(udg_Lrg_Loc[0])set udg_Lrg_Loc[0]=nullcall RemoveLocation(udg_Lrg_Loc[1])set udg_Lrg_Loc[1]=nullcall ForGroupBJ(udg_Lrg_Group,function Trig_LrgL_Func001Func017A)call DestroyGroup(udg_Lrg_Group)
set udg_Lrg_Group=nullcall UnitApplyTimedLifeBJ(.6,'BTLF',udg_Lrg_Unit[3])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Lrg_Unit[4])
call UnitApplyTimedLifeBJ(1.2,'BTLF',udg_Lrg_Unit[5])call SetUnitTimeScalePercent(udg_Lrg_Unit[3],300.)call SetUnitAnimation(udg_Lrg_Unit[5],"death")if(Trig_LrgL_Func001Func025C())thencall UnitAddAbility(udg_Lrg_Unit[3],'A06V')call IssueImmediateOrderById(udg_Lrg_Unit[3],$D009F)
endifset udg_Lrg_Unit[3]=null
set udg_Lrg_Unit[4]=null
set udg_Lrg_Unit[5]=null
set udg_Lrg_Int[0]=(udg_Lrg_Int[0]-1)else
call DisableTrigger(gg_trg_LrgM)
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(2.)if(Trig_LrgL_Func001Func032C())thencall RemoveUnit(udg_Lrg_Unit[1])
endifcall RemoveUnit(udg_Lrg_Unit[2])
set udg_Lrg_Unit[0]=null
set udg_Lrg_Unit[1]=null
set udg_Lrg_Unit[2]=null
set udg_Lrg_Real[0]=.0set udg_Lrg_Real[1]=.0set udg_Lrg_Real[2]=.0set udg_Lrg_Int[0]=0
set udg_Lrg_Int[1]=0
set udg_Lrg_Bool=falseendifendfunctionfunction InitTrig_LrgL takes nothing returns nothing
set gg_trg_LrgL=CreateTrigger()call DisableTrigger(gg_trg_LrgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrgL,.08)call TriggerAddAction(gg_trg_LrgL,function Trig_LrgL_Actions)endfunctionfunction Trig_Sda_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06W')endfunctionfunction Trig_Sda_Func033C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Sda_Unit[0]))and(udg_Sda_Bool==false)endfunctionfunction Trig_Sda_Actions takes nothing returns nothingset udg_Sda_Unit[0]=GetTriggerUnit()
set udg_Sda_Loc[0]=GetSpellTargetLoc()set udg_Sda_Loc[1]=GetUnitLoc(udg_Sda_Unit[0])set udg_Sda_Real[0]=AngleBetweenPoints(udg_Sda_Loc[1],udg_Sda_Loc[0])set udg_Sda_Loc[2]=PolarProjectionBJ(udg_Sda_Loc[1],60.,udg_Sda_Real[0])
call RemoveLocation(udg_Sda_Loc[0])set udg_Sda_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h05F',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[1],bj_UNIT_FACING)set udg_Sda_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05E',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[2],bj_UNIT_FACING)set udg_Sda_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02R',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[1],bj_UNIT_FACING)set udg_Sda_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Sda_Loc[1])set udg_Sda_Loc[1]=nullcall RemoveLocation(udg_Sda_Loc[2])set udg_Sda_Loc[2]=nullcall PauseSystem(udg_Sda_Unit[0],true)call SetUnitAnimation(udg_Sda_Unit[0],"spell")call SetUnitTimeScalePercent(udg_Sda_Unit[0],160.)call SetUnitTimeScalePercent(udg_Sda_Unit[1],220.)call AddSpecialEffectTargetUnitBJ("hand right",udg_Sda_Unit[0],"Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl")
call DestroyEffect(bj_lastCreatedEffect)
call CreateTextTagUnitBJ("0%",udg_Sda_Unit[0],0,12.,'d',.0,.0,0)set udg_Sda_Text=bj_lastCreatedTextTagset udg_Sda_Real[1]=(500.+((10.+(2.*I2R(GetUnitAbilityLevelSwapped('A06W',udg_Sda_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Sda_Unit[0],true))))set udg_Sda_Int=4call UnitAddAbility(udg_Sda_Unit[3],'A06X')set udg_Sda_Bool=falsecall EnableTrigger(gg_trg_SdaR)call EnableTrigger(gg_trg_SdaC)call TriggerSleepAction(.3)if(Trig_Sda_Func033C())thencall SetUnitTimeScalePercent(udg_Sda_Unit[0],.0)
endifendfunctionfunction InitTrig_Sda takes nothing returns nothingset gg_trg_Sda=CreateTrigger()call TriggerAddCondition(gg_trg_Sda,Condition(function Trig_Sda_Conditions))
call TriggerAddAction(gg_trg_Sda,function Trig_Sda_Actions)endfunctionfunction Trig_SdaR_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06X')endfunctionfunction Trig_SdaR_Actions takes nothing returns nothing
set udg_Sda_Bool=trueendfunctionfunction InitTrig_SdaR takes nothing returns nothing
set gg_trg_SdaR=CreateTrigger()call DisableTrigger(gg_trg_SdaR)
call TriggerRegisterAnyUnitEventBJ(gg_trg_SdaR,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_SdaR,Condition(function Trig_SdaR_Conditions))call TriggerAddAction(gg_trg_SdaR,function Trig_SdaR_Actions)endfunctionfunction Trig_SdaC_Func001Func022C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Sda_Unit[0]))endfunctionfunction Trig_SdaC_Func001C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Sda_Unit[0]))and(udg_Sda_Int<'d')and(udg_Sda_Bool==false)endfunctionfunction Trig_SdaC_Actions takes nothing returns nothing
if(Trig_SdaC_Func001C())then
set udg_Sda_Int=(udg_Sda_Int+2)call SetTextTagTextBJ(udg_Sda_Text,(I2S(udg_Sda_Int)+"%"),12.)call SelectUnitForPlayerSingle(udg_Sda_Unit[3],GetOwningPlayer(udg_Sda_Unit[0]))
else
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_SdaR)
call SetTextTagPermanentBJ(udg_Sda_Text,false)call SetTextTagLifespanBJ(udg_Sda_Text,.02)call DestroyTextTag(udg_Sda_Text)set udg_Sda_Text=nullcall SelectUnitForPlayerSingle(udg_Sda_Unit[0],GetOwningPlayer(udg_Sda_Unit[0]))
call RemoveUnit(udg_Sda_Unit[2])
call RemoveUnit(udg_Sda_Unit[3])
call SetUnitAnimation(udg_Sda_Unit[1],"death")call UnitApplyTimedLifeBJ(.5,'BTLF',udg_Sda_Unit[1])
call SetUnitTimeScalePercent(udg_Sda_Unit[1],120.)set udg_Sda_Unit[1]=null
set udg_Sda_Unit[2]=null
set udg_Sda_Unit[3]=null
call TriggerSleepAction(.01)
call PauseSystem(udg_Sda_Unit[0],false)call SetUnitTimeScalePercent(udg_Sda_Unit[0],100.)if(Trig_SdaC_Func001Func022C())thencall DisplayText("Heilig Pfeil",udg_Sda_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Sda_Loc[0]=GetUnitLoc(udg_Sda_Unit[0])set udg_Sda_Loc[1]=PolarProjectionBJ(udg_Sda_Loc[0],100.,udg_Sda_Real[0])call CreateNUnitsAtLoc(1,'h05I',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[0],udg_Sda_Real[0])
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h05G',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[1],udg_Sda_Real[0])
set udg_Sda_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05H',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[0],udg_Sda_Real[0])
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h05J',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[0],udg_Sda_Real[0])
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Sda_Loc[0])set udg_Sda_Loc[0]=nullcall RemoveLocation(udg_Sda_Loc[1])set udg_Sda_Loc[1]=nullset udg_Sda_Real[1]=(udg_Sda_Real[1]*(I2R(udg_Sda_Int)/ 100.))set udg_Sda_Real[2]=96.set udg_Sda_Real[3]=230.
set udg_Sda_Map=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])call EnableTrigger(gg_trg_SdaL)else
set udg_Sda_Unit[0]=null
set udg_Sda_Real[0]=.0set udg_Sda_Real[1]=.0set udg_Sda_Int=0set udg_Sda_Bool=falseendifendifendfunctionfunction InitTrig_SdaC takes nothing returns nothing
set gg_trg_SdaC=CreateTrigger()call DisableTrigger(gg_trg_SdaC)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdaC,.04)call TriggerAddAction(gg_trg_SdaC,function Trig_SdaC_Actions)endfunctionfunction Trig_SdaL_Func001Func006C takes nothing returns boolean
return(RectContainsLoc(udg_Sda_Map,udg_Sda_Loc[1]))endfunctionfunction Trig_SdaL_Func001Func007002003001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_SdaL_Func001Func007002003002001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Sda_Group2)==false)
endfunctionfunction Trig_SdaL_Func001Func007002003002002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Sda_Unit[0])))endfunctionfunction Trig_SdaL_Func001Func007002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_SdaL_Func001Func007002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_SdaL_Func001Func007002003002002001(),Trig_SdaL_Func001Func007002003002002002())endfunctionfunction Trig_SdaL_Func001Func007002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_SdaL_Func001Func007002003002001(),Trig_SdaL_Func001Func007002003002002())endfunctionfunction Trig_SdaL_Func001Func007002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_SdaL_Func001Func007002003001(),Trig_SdaL_Func001Func007002003002())endfunctionfunction Trig_SdaL_Func001Func012A takes nothing returns nothing
set udg_Sda_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Sda_Group2,udg_Sda_Unit[2])set udg_Sda_Loc[2]=GetUnitLoc(udg_Sda_Unit[2])call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h05D',GetOwningPlayer(udg_Sda_Unit[0]),udg_Sda_Loc[2],bj_UNIT_FACING)set udg_Sda_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Sda_Loc[2])set udg_Sda_Loc[2]=nullcall SetUnitAnimation(udg_Sda_Unit[3],"death")call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Sda_Unit[3])
call SetUnitScalePercent(udg_Sda_Unit[3],400.,400.,400.)
set udg_Sda_Unit[3]=null
call UnitDamageTargetBJ(udg_Sda_Unit[0],udg_Sda_Unit[2],udg_Sda_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Sda_Unit[2]=null
endfunctionfunction Trig_SdaL_Func001C takes nothing returns booleanreturn(udg_Sda_Int>0)and(IsUnitAliveBJ(udg_Sda_Unit[1]))
endfunctionfunction Trig_SdaL_Actions takes nothing returns nothing
if(Trig_SdaL_Func001C())then
set udg_Sda_Loc[0]=GetUnitLoc(udg_Sda_Unit[1])set udg_Sda_Loc[1]=PolarProjectionBJ(udg_Sda_Loc[0],udg_Sda_Real[2],udg_Sda_Real[0])
call EnumDestructablesInCircleBJ(udg_Sda_Real[3],udg_Sda_Loc[1],function TreeKiller)
if(Trig_SdaL_Func001Func006C())thencall SetUnitPositionLoc(udg_Sda_Unit[1],udg_Sda_Loc[1])endifset udg_Sda_Group=GetUnitsInRangeOfLocMatching(udg_Sda_Real[3],udg_Sda_Loc[1],Condition(function Trig_SdaL_Func001Func007002003))call RemoveLocation(udg_Sda_Loc[0])set udg_Sda_Loc[0]=nullcall RemoveLocation(udg_Sda_Loc[1])set udg_Sda_Loc[1]=nullcall ForGroupBJ(udg_Sda_Group,function Trig_SdaL_Func001Func012A)call DestroyGroup(udg_Sda_Group)
set udg_Sda_Group=nullset udg_Sda_Int=(udg_Sda_Int-2)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Sda_Group2)call RemoveRect(udg_Sda_Map)
set udg_Sda_Map=null
call SetUnitAnimation(udg_Sda_Unit[1],"death")call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Sda_Unit[1])
set udg_Sda_Unit[0]=null
set udg_Sda_Unit[1]=null
set udg_Sda_Real[0]=.0set udg_Sda_Real[1]=.0set udg_Sda_Real[2]=.0set udg_Sda_Real[3]=.0set udg_Sda_Int=0set udg_Sda_Bool=falseendifendfunctionfunction InitTrig_SdaL takes nothing returns nothing
set gg_trg_SdaL=CreateTrigger()call DisableTrigger(gg_trg_SdaL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdaL,.04)call TriggerAddAction(gg_trg_SdaL,function Trig_SdaL_Actions)endfunctionfunction Trig_Sgr_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A06Y')endfunctionfunction Trig_Sgr_Func037Func019002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Sgr_Unit[0])))endfunctionfunction Trig_Sgr_Func037Func019002003002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Sgr_Func037Func019002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Sgr_Func037Func019002003001(),Trig_Sgr_Func037Func019002003002())endfunctionfunction Trig_Sgr_Func037Func023Func003C takes nothing returns booleanreturn(R2I(udg_Sgr_Real[3])>R2I(udg_Sgr_Real[0]))endfunctionfunction Trig_Sgr_Func037Func023A takes nothing returns nothingset udg_Sgr_Unit[6]=GetEnumUnit()set udg_Sgr_Real[3]=GetUnitStateSwap(UNIT_STATE_LIFE,udg_Sgr_Unit[6])if(Trig_Sgr_Func037Func023Func003C())thencall SetWidgetLife(udg_Sgr_Unit[6],(udg_Sgr_Real[3]-udg_Sgr_Real[0]))else
call SetWidgetLife(udg_Sgr_Unit[6],1.)call UnitDamageTargetBJ(udg_Sgr_Unit[0],udg_Sgr_Unit[6],udg_Sgr_Real[0],ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)endifset udg_Sgr_Unit[6]=null
endfunctionfunction Trig_Sgr_Func037C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Sgr_Unit[1]))endfunctionfunction Trig_Sgr_Func041A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_Sgr_Actions takes nothing returns nothingset udg_Sgr_Unit[0]=GetTriggerUnit()
set udg_Sgr_Loc[0]=GetSpellTargetLoc()call CreateNUnitsAtLoc(1,'u005',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05L',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05M',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05F',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Sgr_Loc[0])set udg_Sgr_Loc[0]=nullcall SetUnitScalePercent(udg_Sgr_Unit[2],500.,500.,500.)
call SetUnitTimeScalePercent(udg_Sgr_Unit[2],35.)call SetUnitScalePercent(udg_Sgr_Unit[4],850.,850.,850.)
call DisplayText("Sprenger",udg_Sgr_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Ishida\\Sprenger.wav",GetUnitX(udg_Sgr_Unit[0]),GetUnitY(udg_Sgr_Unit[0]))set udg_Sgr_Real[0]=(500.+(I2R(GetUnitAbilityLevelSwapped('A06Y',udg_Sgr_Unit[0]))*400.))set udg_Sgr_Real[1]=500.
set udg_Sgr_Real[2]=72.set udg_Sgr_Skill='A06Z'
set udg_Sgr_Int=1loop
exitwhen udg_Sgr_Int>5set udg_Sgr_Int2=(udg_Sgr_Int+6)
set udg_Sgr_Loc[0]=GetUnitLoc(udg_Sgr_Unit[1])set udg_Sgr_Loc[1]=PolarProjectionBJ(udg_Sgr_Loc[0],udg_Sgr_Real[1],udg_Sgr_Real[2])
call CreateNUnitsAtLoc(1,'h05L',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h05K',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[1],AngleBetweenPoints(udg_Sgr_Loc[1],udg_Sgr_Loc[0]))set udg_Sgr_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05N',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[1],bj_UNIT_FACING)set udg_Sgr_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u005',Player($C),udg_Sgr_Loc[1],bj_UNIT_FACING)set udg_Sgr_Unit[udg_Sgr_Int2]=bj_lastCreatedUnitcall RemoveLocation(udg_Sgr_Loc[0])set udg_Sgr_Loc[0]=nullcall RemoveLocation(udg_Sgr_Loc[1])set udg_Sgr_Loc[1]=nullcall UnitAddAbility(udg_Sgr_Unit[udg_Sgr_Int2],udg_Sgr_Skill)call IssueTargetOrderById(udg_Sgr_Unit[udg_Sgr_Int2],$D0207,udg_Sgr_Unit[1])
call GroupAddUnit(udg_Sgr_Group2,udg_Sgr_Unit[5])call GroupAddUnit(udg_Sgr_Group2,udg_Sgr_Unit[6])call GroupAddUnit(udg_Sgr_Group2,udg_Sgr_Unit[udg_Sgr_Int2])
call UnitApplyTimedLifeBJ(10.,'BTLF',udg_Sgr_Unit[5])call UnitApplyTimedLifeBJ(10.,'BTLF',udg_Sgr_Unit[6])set udg_Sgr_Unit[5]=null
set udg_Sgr_Unit[6]=null
set udg_Sgr_Real[2]=(udg_Sgr_Real[2]+72.)set udg_Sgr_Int=udg_Sgr_Int+1endloopcall TriggerSleepAction(1.5)
set udg_Sgr_Int=7loop
exitwhen udg_Sgr_Int>$Aset udg_Sgr_Loc[0]=GetUnitLoc(udg_Sgr_Unit[udg_Sgr_Int])
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[5]=bj_lastCreatedUnitcall RemoveLocation(udg_Sgr_Loc[0])set udg_Sgr_Loc[0]=nullcall UnitAddAbility(udg_Sgr_Unit[5],udg_Sgr_Skill)call IssueTargetOrderById(udg_Sgr_Unit[5],$D0207,udg_Sgr_Unit[(udg_Sgr_Int+1)])call GroupAddUnit(udg_Sgr_Group2,udg_Sgr_Unit[5])call UnitApplyTimedLifeBJ(10.,'BTLF',udg_Sgr_Unit[5])set udg_Sgr_Unit[5]=null
set udg_Sgr_Int=udg_Sgr_Int+1endloopset udg_Sgr_Loc[0]=GetUnitLoc(udg_Sgr_Unit[$B])call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)set udg_Sgr_Unit[5]=bj_lastCreatedUnitcall RemoveLocation(udg_Sgr_Loc[0])set udg_Sgr_Loc[0]=nullcall UnitAddAbility(udg_Sgr_Unit[5],udg_Sgr_Skill)call IssueTargetOrderById(udg_Sgr_Unit[5],$D0207,udg_Sgr_Unit[7])call GroupAddUnit(udg_Sgr_Group2,udg_Sgr_Unit[5])call UnitApplyTimedLifeBJ(10.,'BTLF',udg_Sgr_Unit[5])set udg_Sgr_Unit[5]=null
call TriggerSleepAction(2.5)
if(Trig_Sgr_Func037C())thenset udg_Sgr_Loc[0]=GetUnitLoc(udg_Sgr_Unit[1])call CreateNUnitsAtLoc(1,'h05O',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h05P',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],GetRandomReal(0,360))set udg_Sgr_Unit[5]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Sgr_Unit[5],600.,600.,600.)
call SetUnitTimeScalePercent(udg_Sgr_Unit[5],40.)call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Sgr_Unit[5])
set udg_Sgr_Unit[5]=null
call CreateNUnitsAtLoc(1,'h04R',GetOwningPlayer(udg_Sgr_Unit[0]),udg_Sgr_Loc[0],GetRandomReal(0,360))set udg_Sgr_Unit[5]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Sgr_Unit[5],600.,600.,600.)
call SetUnitTimeScalePercent(udg_Sgr_Unit[5],40.)call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Sgr_Unit[5])
set udg_Sgr_Unit[5]=null
call EnumDestructablesInCircleBJ(udg_Sgr_Real[1],udg_Sgr_Loc[0],function TreeKiller)
set udg_Sgr_Group=GetUnitsInRangeOfLocMatching(udg_Sgr_Real[1],udg_Sgr_Loc[0],Condition(function Trig_Sgr_Func037Func019002003))
call Dynamic_GroupShake(GetLocationX(udg_Sgr_Loc[0]),GetLocationY(udg_Sgr_Loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Sgr_Loc[0])set udg_Sgr_Loc[0]=nullcall ForGroupBJ(udg_Sgr_Group,function Trig_Sgr_Func037Func023A)
call DestroyGroup(udg_Sgr_Group)
set udg_Sgr_Group=nullendifset udg_Sgr_Group=CreateGroup()call GroupAddGroup(udg_Sgr_Group2,udg_Sgr_Group)
call GroupClear(udg_Sgr_Group2)call ForGroupBJ(udg_Sgr_Group,function Trig_Sgr_Func041A)call DestroyGroup(udg_Sgr_Group)
set udg_Sgr_Group=nullcall RemoveUnit(udg_Sgr_Unit[1])
call RemoveUnit(udg_Sgr_Unit[2])
call RemoveUnit(udg_Sgr_Unit[3])
call RemoveUnit(udg_Sgr_Unit[4])
set udg_Sgr_Unit[0]=null
set udg_Sgr_Unit[1]=null
set udg_Sgr_Unit[2]=null
set udg_Sgr_Unit[3]=null
set udg_Sgr_Unit[4]=null
set udg_Sgr_Unit[7]=null
set udg_Sgr_Unit[8]=null
set udg_Sgr_Unit[9]=null
set udg_Sgr_Unit[$A]=nullset udg_Sgr_Unit[$B]=nullset udg_Sgr_Real[0]=.0set udg_Sgr_Real[1]=.0set udg_Sgr_Real[2]=.0set udg_Sgr_Real[3]=.0set udg_Sgr_Int=0set udg_Sgr_Int2=0set udg_Sgr_Skill=0endfunctionfunction InitTrig_Sgr takes nothing returns nothingset gg_trg_Sgr=CreateTrigger()call TriggerAddCondition(gg_trg_Sgr,Condition(function Trig_Sgr_Conditions))
call TriggerAddAction(gg_trg_Sgr,function Trig_Sgr_Actions)endfunctionfunction Trig_Qff_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A070')endfunctionfunction Trig_Qff_Func002Func038002003001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),GetOwningPlayer(udg_Qff_Unit[0]))==false)endfunctionfunction Trig_Qff_Func002Func038002003002001 takes nothing returns booleanreturn(IsUnitPaused(GetFilterUnit())==false)
endfunctionfunction Trig_Qff_Func002Func038002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Qff_Func002Func038002003002002002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Qff_Func002Func038002003002002002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=nullendfunctionfunction Trig_Qff_Func002Func038002003002002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Qff_Func002Func038002003002002002001(),Trig_Qff_Func002Func038002003002002002002())endfunctionfunction Trig_Qff_Func002Func038002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Qff_Func002Func038002003002002001(),Trig_Qff_Func002Func038002003002002002())endfunctionfunction Trig_Qff_Func002Func038002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Qff_Func002Func038002003002001(),Trig_Qff_Func002Func038002003002002())endfunctionfunction Trig_Qff_Func002Func038002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Qff_Func002Func038002003001(),Trig_Qff_Func002Func038002003002())endfunctionfunction Trig_Qff_Func002Func039Func011C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Qff_Unit[5]))endfunctionfunction Trig_Qff_Func002Func039A takes nothing returns nothingset udg_Qff_Unit[5]=GetEnumUnit()set udg_Qff_Loc[1]=GetUnitLoc(udg_Qff_Unit[5])set udg_Qff_Loc[2]=PolarProjectionBJ(udg_Qff_Loc[1],udg_TransformBackstab,AngleBetweenPoints(udg_Qff_Loc[0],udg_Qff_Loc[1]))
call SetUnitPositionLoc(udg_Qff_Unit[5],udg_Qff_Loc[2])call CreateNUnitsAtLoc(1,'h017',GetOwningPlayer(udg_Qff_Unit[0]),udg_Qff_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Qff_Loc[1])set udg_Qff_Loc[1]=nullcall RemoveLocation(udg_Qff_Loc[2])set udg_Qff_Loc[2]=nullif(Trig_Qff_Func002Func039Func011C())thencall IssueImmediateOrderById(udg_Qff_Unit[5],$D0004)
endifset udg_Qff_Unit[5]=null
endfunctionfunction Trig_Qff_Func002C takes nothing returns boolean
return(GetUnitTypeId(udg_Qff_Unit[0])=='E001')endfunctionfunction Trig_Qff_Actions takes nothing returns nothingset udg_Qff_Unit[0]=GetTriggerUnit()
if(Trig_Qff_Func002C())thenset udg_Qff_Real[0]=750.
set udg_Qff_Real[1]=100.
set udg_Qff_Type='E002'call ModifyHeroStat(1,udg_Qff_Unit[0],0,60)call EnableTrigger(gg_trg_QffC)call EnableTrigger(gg_trg_QffL)call DisplayText("Quincy: Letzt Stil",udg_Qff_Unit[0],.023,false,$DC,5,5,$FF)set udg_Qff_Loc[0]=GetUnitLoc(udg_Qff_Unit[0])call EnumDestructablesInCircleBJ(udg_TransformArea,udg_Qff_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Qff_Unit[0]),udg_Qff_Loc[0],bj_UNIT_FACING)set udg_Qff_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05Q',GetOwningPlayer(udg_Qff_Unit[0]),udg_Qff_Loc[0],bj_UNIT_FACING)set udg_Qff_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05O',GetOwningPlayer(udg_Qff_Unit[0]),udg_Qff_Loc[0],bj_UNIT_FACING)set udg_Qff_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h058',GetOwningPlayer(udg_Qff_Unit[0]),udg_Qff_Loc[0],bj_UNIT_FACING)set udg_Qff_Unit[4]=bj_lastCreatedUnitcall UnitAddAbility(udg_Qff_Unit[1],udg_TransformSkill)call IssueImmediateOrderById(udg_Qff_Unit[1],$D0080)
set udg_Qff_Group=GetUnitsInRangeOfLocMatching(udg_TransformArea,udg_Qff_Loc[0],Condition(function Trig_Qff_Func002Func038002003))call ForGroupBJ(udg_Qff_Group,function Trig_Qff_Func002Func039A)
call RemoveLocation(udg_Qff_Loc[0])set udg_Qff_Loc[0]=nullcall DestroyGroup(udg_Qff_Group)
set udg_Qff_Group=nullcall SetUnitScalePercent(udg_Qff_Unit[3],600.,600.,600.)
call SetUnitVertexColorBJ(udg_Qff_Unit[3],19.,57.,100.,0)call SetUnitVertexColorBJ(udg_Qff_Unit[4],19.,57.,76.,0)
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Qff_Unit[1])
call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Qff_Unit[2])call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Qff_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Qff_Unit[4])
set udg_Qff_Unit[1]=null
set udg_Qff_Unit[2]=null
set udg_Qff_Unit[3]=null
set udg_Qff_Unit[4]=null
set udg_Qff_Skill=0call TriggerSleepAction(udg_PermanentBonus_Delay)set udg_Qff_Skill='A072'
call SetPlayerAbilityAvailableBJ(false,udg_Qff_Skill,GetOwningPlayer(udg_Qff_Unit[0]))call UnitAddAbility(udg_Qff_Unit[0],udg_Qff_Skill)call BonusAbilityCheck(udg_Qff_Unit[0])set udg_Qff_Unit[0]=null
else
call DisableTrigger(gg_trg_QffC)
call DisableTrigger(gg_trg_QffL)
call ModifyHeroStat(1,udg_Qff_Unit[0],1,60)set udg_Qff_Loc[3]=GetUnitLoc(udg_Qff_Unit[0])call CreateNUnitsAtLoc(1,'h05R',GetOwningPlayer(udg_Qff_Unit[6]),udg_Qff_Loc[3],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h05R',GetOwningPlayer(udg_Qff_Unit[6]),udg_Qff_Loc[3],GetRandomReal(0,360))call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Qff_Loc[3])set udg_Qff_Loc[3]=nullcall SetWidgetLife(udg_Qff_Unit[0],(GetUnitStateSwap(UNIT_STATE_LIFE,udg_Qff_Unit[0])*.2))set udg_Qff_Type=0set udg_Qff_Real[0]=.0set udg_Qff_Real[1]=.0call TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Qff_Unit[0])set udg_Qff_Unit[0]=null
endifendfunctionfunction InitTrig_Qff takes nothing returns nothingset gg_trg_Qff=CreateTrigger()call TriggerAddCondition(gg_trg_Qff,Condition(function Trig_Qff_Conditions))
call TriggerAddAction(gg_trg_Qff,function Trig_Qff_Actions)endfunctionfunction Trig_QffC_Conditions takes nothing returns booleanreturn(GetUnitTypeId(GetDyingUnit())==udg_Qff_Type)and(IsUnitIllusion(GetDyingUnit())==false)and(GetOwningPlayer(GetDyingUnit())!=Player($F))endfunctionfunction Trig_QffC_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_QffL)
call ModifyHeroStat(1,GetDyingUnit(),1,60)set udg_Qff_Type=0set udg_Qff_Real[0]=.0set udg_Qff_Real[1]=.0endfunctionfunction InitTrig_QffC takes nothing returns nothing
set gg_trg_QffC=CreateTrigger()call DisableTrigger(gg_trg_QffC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_QffC,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_QffC,Condition(function Trig_QffC_Conditions))call TriggerAddAction(gg_trg_QffC,function Trig_QffC_Actions)endfunctionfunction Trig_QffL_Func003Func003002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Qff_Unit[7])))endfunctionfunction Trig_QffL_Func003Func003002003002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_QffL_Func003Func003002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_QffL_Func003Func003002003001(),Trig_QffL_Func003Func003002003002())endfunctionfunction Trig_QffL_Func003Func006Func003C takes nothing returns booleanreturn(udg_Qff_Real[2]<2.)endfunctionfunction Trig_QffL_Func003Func006A takes nothing returns nothing
set udg_Qff_Unit[8]=GetEnumUnit()set udg_Qff_Real[2]=(GetUnitStateSwap(UNIT_STATE_MANA,udg_Qff_Unit[8])-udg_Qff_Real[1])if(Trig_QffL_Func003Func006Func003C())thencall SetUnitManaBJ(udg_Qff_Unit[8],1.)else
call SetUnitManaBJ(udg_Qff_Unit[8],udg_Qff_Real[2])endifset udg_Qff_Unit[8]=null
set udg_Qff_Real[2]=.0endfunctionfunction Trig_QffL_Func003A takes nothing returns nothingset udg_Qff_Unit[7]=GetEnumUnit()set udg_Qff_Loc[4]=GetUnitLoc(udg_Qff_Unit[7])set udg_Qff_Group2[1]=GetUnitsInRangeOfLocMatching(udg_Qff_Real[0],udg_Qff_Loc[4],Condition(function Trig_QffL_Func003Func003002003))call RemoveLocation(udg_Qff_Loc[4])set udg_Qff_Loc[4]=nullcall ForGroupBJ(udg_Qff_Group2[1],function Trig_QffL_Func003Func006A)call DestroyGroup(udg_Qff_Group2[1])
set udg_Qff_Group2[1]=nullset udg_Qff_Unit[7]=null
endfunctionfunction Trig_QffL_Actions takes nothing returns nothing
set udg_Qff_Group2[0]=GetUnitsOfTypeIdAll(udg_Qff_Type)call ForGroupBJ(udg_Qff_Group2[0],function Trig_QffL_Func003A)call DestroyGroup(udg_Qff_Group2[0])
set udg_Qff_Group2[0]=nullendfunctionfunction InitTrig_QffL takes nothing returns nothing
set gg_trg_QffL=CreateTrigger()call DisableTrigger(gg_trg_QffL)
call TriggerRegisterTimerEventPeriodic(gg_trg_QffL,1.)call TriggerAddAction(gg_trg_QffL,function Trig_QffL_Actions)endfunctionfunction AI_Usopp_Cond5 takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='N007')endfunctionfunction AI_Usopp_Cond3 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Usopp_Cond5())then
return false
endifreturn trueendfunctionfunction AI_Usopp_Cond4 takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='N007')
endfunctionfunction AI_Usopp_Cond2 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Usopp_Cond4())then
return false
endifreturn trueendfunctionfunction AI_Usopp_Cond1 takes nothing returns booleanif(AI_Usopp_Cond3())then
return trueelseif(AI_Usopp_Cond2())then
return trueendifreturn false
endfunctionfunction AI_Usopp_Cond takes nothing returns boolean
if(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Usopp_Cond1())then
return false
endifreturn trueendfunctionfunction AI_Usopp_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local boolean AI_C=false
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Usopp_Cond5())then
set AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A07G')call SelectHeroSkill(AI_1,'A07F')call SelectHeroSkill(AI_1,'A07E')call SelectHeroSkill(AI_1,'A078')call SelectHeroSkill(AI_1,'A075')endifcall IssueImmediateOrderById(AI_1,$D022E)set AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D0271,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point2)set AI_C=falseendifendifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Usopp takes nothing returns nothing
set udg_AI_Trig[$A]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$A],Condition(function AI_Usopp_Cond))call TriggerAddAction(udg_AI_Trig[$A],function AI_Usopp_Act)
endfunctionfunction Trig_Dial_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A073')endfunctionfunction Trig_Dial_Func019A takes nothing returns nothinglocal unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call SaveReal(udg_Dial_Hash,GetHandleId(u),0,AngleBetweenPoints(udg_Dial_Loc[0],loc))call RemoveLocation(loc)
set loc=null
call GroupAddUnit(udg_Dial_Group2,u)
call UnitDamageTarget(udg_Dial_Unit,u,udg_Dial_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_Dial_Actions takes nothing returns nothing
set udg_Dial_Unit=GetTriggerUnit()call SetUnitAnimation(udg_Dial_Unit,"spell")
set udg_Dial_Real[0]=GetUnitFacing(udg_Dial_Unit)set udg_Dial_Real[1]=240.set udg_Dial_Real[2]=(5.*I2R(GetHeroAgi(udg_Dial_Unit,true)))set udg_Dial_Real[3]=35.
set udg_Dial_Hash=InitHashtable()set udg_Dial_Own=GetOwningPlayer(udg_Dial_Unit)set udg_Dial_Loc[0]=GetUnitLoc(udg_Dial_Unit)call CreateNUnitsAtLoc(1,'h01M',udg_Dial_Own,udg_Dial_Loc[0],udg_Dial_Real[0])call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set udg_Dial_Loc[1]=PolarProjectionBJ(udg_Dial_Loc[0],50.,udg_Dial_Real[0])call CreateNUnitsAtLoc(1,'h05T',udg_Dial_Own,udg_Dial_Loc[1],udg_Dial_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call EnumDestructablesInCircleBJ(udg_Dial_Real[1],udg_Dial_Loc[1],function TreeKiller)set udg_Dial_Group=DynamicCreateGroup(udg_Dial_Loc[1],udg_Dial_Real[1],udg_Dial_Own)
call ForGroupBJ(udg_Dial_Group,function Trig_Dial_Func019A)call RemoveLocation(udg_Dial_Loc[0])
set udg_Dial_Loc[0]=null
call RemoveLocation(udg_Dial_Loc[1])
set udg_Dial_Loc[1]=null
call DestroyGroup(udg_Dial_Group)set udg_Dial_Group=nullset udg_Dial_Real[0]=(udg_Dial_Real[0]-180.)
set udg_Dial_Int=25call EnableTrigger(gg_trg_DialL)
endfunctionfunction InitTrig_Dial takes nothing returns nothing
set gg_trg_Dial=CreateTrigger()call TriggerAddCondition(gg_trg_Dial,Condition(function Trig_Dial_Conditions))call TriggerAddAction(gg_trg_Dial,function Trig_Dial_Actions)endfunctionfunction Trig_DialL_Func001Func004A takes nothing returns nothinglocal unit u=GetEnumUnit()local location array loc
local real facing=LoadReal(udg_Dial_Hash,GetHandleId(u),0)set loc[0]=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h017',udg_Dial_Own,loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set loc[1]=PolarProjectionBJ(loc[0],udg_Dial_Real[3],facing)
call RemoveLocation(loc[0])set loc[0]=nullcall EnumDestructablesInCircleBJ(100.,loc[1],function TreeKiller)call UnitMoveLoc(u,loc[1])call RemoveLocation(loc[1])set loc[1]=nullset u=nullendfunctionfunction Trig_DialL_Func001C takes nothing returns booleanreturn(udg_Dial_Int>0)endfunctionfunction Trig_DialL_Actions takes nothing returns nothingif(Trig_DialL_Func001C())thenset udg_Dial_Int=(udg_Dial_Int-1)set udg_Dial_Group=CreateGroup()
call GroupAddGroup(udg_Dial_Group2,udg_Dial_Group)call ForGroupBJ(udg_Dial_Group,function Trig_DialL_Func001Func004A)call DestroyGroup(udg_Dial_Group)set udg_Dial_Group=nullset udg_Dial_Loc[0]=GetUnitLoc(udg_Dial_Unit)call CreateNUnitsAtLoc(1,'h017',udg_Dial_Own,udg_Dial_Loc[0],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Dial_Loc[1]=PolarProjectionBJ(udg_Dial_Loc[0],udg_Dial_Real[3],udg_Dial_Real[0])
call RemoveLocation(udg_Dial_Loc[0])
set udg_Dial_Loc[0]=null
call EnumDestructablesInCircleBJ(100.,udg_Dial_Loc[1],function TreeKiller)call UnitMoveLoc(udg_Dial_Unit,udg_Dial_Loc[1])call RemoveLocation(udg_Dial_Loc[1])
set udg_Dial_Loc[1]=null
if(udg_Dial_Int>20)thenset udg_Dial_Real[3]=(udg_Dial_Real[3]-4.)else
set udg_Dial_Real[3]=(udg_Dial_Real[3]-.7)endifelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Dial_Group2)
call FlushParentHashtable(udg_Dial_Hash)
set udg_Dial_Hash=nullset udg_Dial_Unit=nullset udg_Dial_Own=nullset udg_Dial_Real[0]=.0set udg_Dial_Real[1]=.0set udg_Dial_Real[2]=.0endifendfunctionfunction InitTrig_DialL takes nothing returns nothingset gg_trg_DialL=CreateTrigger()
call DisableTrigger(gg_trg_DialL)call TriggerRegisterTimerEventPeriodic(gg_trg_DialL,.04)
call TriggerAddAction(gg_trg_DialL,function Trig_DialL_Actions)endfunctionfunction Trig_Tjr_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A075')endfunctionfunction Tjr_GroupCond takes nothing returns boolean
if(IsUnitAlly(GetFilterUnit(),udg_Tjr_Own))thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<0)then
return false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction Tjr_GroupAct takes nothing returns nothinglocal unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h05Y',udg_Tjr_Own,loc,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h05X',udg_Tjr_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call UnitDamageTarget(udg_Tjr_Unit,u,udg_Tjr_Dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u)>0)thencall CreateNUnitsAtLoc(1,'u003',udg_Tjr_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc)
set loc=null
call GroupAddUnit(udg_Tjr_Group,u)call SetUnitFly(u)call SetUnitFlyHeight(u,400.,650.)set u=nullendfunctionfunction Tjr_GroupAct2 takes nothing returns nothing
call SetUnitFlyHeight(GetEnumUnit(),.0,880.)
endfunctionfunction Trig_Tjr_Actions takes nothing returns nothinglocal unit array dummylocal real array rlocal location array loc
local location loc2local rect myrectlocal integer ilocal group gset loc[0]=GetSpellTargetLoc()set udg_Tjr_Unit=GetTriggerUnit()set r[0]=GetLocationX(loc[0])set r[1]=GetLocationY(loc[0])set udg_Tjr_Own=GetOwningPlayer(udg_Tjr_Unit)set dummy[0]=CreateUnit(udg_Tjr_Own,'u005',GetLocationX(loc[0]),GetLocationY(loc[0]),bj_UNIT_FACING)
call RemoveLocation(loc[0])set loc[0]=nullset loc[1]=GetUnitLoc(udg_Tjr_Unit)set dummy[1]=CreateUnit(udg_Tjr_Own,'u003',GetLocationX(loc[1]),GetLocationY(loc[1]),bj_UNIT_FACING)
call RemoveLocation(loc[1])set loc[1]=nullcall UnitAddAbility(dummy[1],'A076')
call IssueTargetOrderById(dummy[1],$D007F,dummy[0])call UnitApplyTimedLife(dummy[0],'BTLF',1.2)
call UnitApplyTimedLife(dummy[1],'BTLF',1.2)
set dummy[0]=nullset dummy[1]=nullset udg_Tjr_Dmg=BasicDmg_Q(udg_Tjr_Unit,'A075',1)call DisplayText("Midori Boshi: Take Jave-rin",udg_Tjr_Unit,.023,true,$FF,$FF,$FF,$FF)call TriggerSleepAction(.1)set loc[2]=Location(r[0],r[1])set myrect=RectFromCenterSizeBJ(loc[2],560.,560.)set g=GetUnitsInRangeOfLocMatching(450.,loc[2],Condition(function Tjr_GroupCond))call RemoveLocation(loc[2])set loc[2]=nullcall ForGroup(g,function Tjr_GroupAct)call DestroyGroup(g)
set g=nullset i=1loop
exitwhen i>$Cset loc2=GetRandomLocInRect(myrect)call CreateNUnitsAtLoc(1,'h05Y',udg_Tjr_Own,loc2,bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h05X',udg_Tjr_Own,loc2,bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call RemoveLocation(loc2)set loc2=nullset i=i+1endloopcall RemoveRect(myrect)set myrect=nullcall TriggerSleepAction(.45)
set g=CreateGroup()call GroupAddGroup(udg_Tjr_Group,g)call ForGroupBJ(g,function Tjr_GroupAct2)call DestroyGroup(g)
set g=nullcall GroupClear(udg_Tjr_Group)set udg_Tjr_Own=null
set udg_Tjr_Unit=nullset udg_Tjr_Dmg=.0set r[0]=.0set r[1]=.0endfunctionfunction InitTrig_Tjr takes nothing returns nothingset gg_trg_Tjr=CreateTrigger()call TriggerAddCondition(gg_trg_Tjr,Condition(function Trig_Tjr_Conditions))
call TriggerAddAction(gg_trg_Tjr,function Trig_Tjr_Actions)endfunctionfunction Trig_Stf_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A078')endfunctionfunction Trig_Stf_Init_Actions takes nothing returns nothing
call DestroyTrigger(GetTriggeringTrigger())set udg_Stf_Hero=GetLearningUnit()set udg_Stf_Cooldown=4.set udg_Stf_Skill[0]='A078'set udg_Stf_Skill[1]='A079'set udg_Stf_Skill[2]='A07B'set udg_Stf_Skill[3]='A07C'set udg_Stf_Skill[4]='A07A'call UnitAddAbility(udg_Stf_Hero,udg_Stf_Skill[1])call SetPlayerAbilityAvailableBJ(false,udg_Stf_Skill[1],GetOwningPlayer(udg_Stf_Hero))call EnableTrigger(gg_trg_StfU)call EnableTrigger(gg_trg_Stf)endfunctionfunction InitTrig_Stf_Init takes nothing returns nothing
set gg_trg_Stf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Stf_Init,Condition(function Trig_Stf_Init_Conditions))call TriggerAddAction(gg_trg_Stf_Init,function Trig_Stf_Init_Actions)endfunctionfunction Trig_StfU_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A078')endfunctionfunction Trig_StfU_Actions takes nothing returns nothing
local integer sklv=GetUnitAbilityLevelSwapped(udg_Stf_Skill[0],udg_Stf_Hero)
call SetUnitAbilityLevelSwapped(udg_Stf_Skill[4],udg_Stf_Hero,sklv)if(sklv>4)thencall DestroyTrigger(GetTriggeringTrigger())endifset sklv=0endfunctionfunction InitTrig_StfU takes nothing returns nothing
set gg_trg_StfU=CreateTrigger()call DisableTrigger(gg_trg_StfU)
call TriggerAddCondition(gg_trg_StfU,Condition(function Trig_StfU_Conditions))call TriggerAddAction(gg_trg_StfU,function Trig_StfU_Actions)endfunctionfunction Trig_Stf_Conditions takes nothing returns booleanif(GetAttacker()==udg_Stf_Hero)thenif(GetRandomInt(1,'d')<=(5+GetUnitAbilityLevelSwapped(udg_Stf_Skill[0],udg_Stf_Hero)))thenreturn trueelse
return false
endifendifreturn false
endfunctionfunction Trig_Stf_Actions takes nothing returns nothinglocal unit Stf_Dummy
local unit Stf_Dummy2local location Stf_Loclocal integer Stf_Lv=GetUnitAbilityLevelSwapped(udg_Stf_Skill[0],udg_Stf_Hero)call DisableTrigger(GetTriggeringTrigger())set Stf_Loc=GetUnitLoc(udg_Stf_Hero)
call CreateNUnitsAtLoc(1,'h05Z',Player($E),Stf_Loc,bj_UNIT_FACING)set Stf_Dummy=bj_lastCreatedUnit
call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Stf_Hero),Stf_Loc,bj_UNIT_FACING)set Stf_Dummy2=bj_lastCreatedUnitcall RemoveLocation(Stf_Loc)
set Stf_Loc=null
call SetPlayerAbilityAvailableBJ(false,udg_Stf_Skill[0],GetOwningPlayer(udg_Stf_Hero))call UnitAddAbility(udg_Stf_Hero,udg_Stf_Skill[2])call UnitAddAbility(Stf_Dummy2,udg_Stf_Skill[3])
call SetUnitAbilityLevelSwapped(udg_Stf_Skill[2],udg_Stf_Hero,Stf_Lv)call SetUnitAbilityLevelSwapped(udg_Stf_Skill[3],Stf_Dummy2,Stf_Lv)call SetPlayerAlliance(Player($E),GetOwningPlayer(udg_Stf_Hero),ALLIANCE_PASSIVE,true)call IssueTargetOrderById(Stf_Dummy,$D006B,udg_Stf_Hero)
call IssueTargetOrderById(Stf_Dummy2,$D00F1,udg_Stf_Hero)call SetPlayerAlliance(Player($E),GetOwningPlayer(udg_Stf_Hero),ALLIANCE_PASSIVE,false)call UnitApplyTimedLifeBJ(1.,'BTLF',Stf_Dummy)call UnitApplyTimedLifeBJ(1.,'BTLF',Stf_Dummy2)set Stf_Dummy=nullset Stf_Dummy2=nullcall TriggerSleepAction(udg_Stf_Cooldown)call UnitRemoveAbility(udg_Stf_Hero,udg_Stf_Skill[2])call SetPlayerAbilityAvailableBJ(true,udg_Stf_Skill[0],GetOwningPlayer(udg_Stf_Hero))set Stf_Lv=0
call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Stf takes nothing returns nothingset gg_trg_Stf=CreateTrigger()call DisableTrigger(gg_trg_Stf)call TriggerRegisterAnyUnitEventBJ(gg_trg_Stf,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Stf,Condition(function Trig_Stf_Conditions))
call TriggerAddAction(gg_trg_Stf,function Trig_Stf_Actions)endfunctionfunction Trig_Seg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07E')endfunctionfunction Trig_Seg_Func012C takes nothing returns boolean
return(DistanceBetweenPoints(udg_Seg_Loc[0],udg_Seg_Loc[1])>300.)endfunctionfunction Trig_Seg_Func030002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Seg_Own))
endfunctionfunction Trig_Seg_Func030002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Seg_Func030002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Seg_Func030002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Seg_Func030002003002001(),Trig_Seg_Func030002003002002())endfunctionfunction Trig_Seg_Func030002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Seg_Func030002003001(),Trig_Seg_Func030002003002())endfunctionfunction Trig_Seg_Func033A takes nothing returns nothing
local unit Seg_U=GetEnumUnit()local location Seg_L=GetUnitLoc(Seg_U)local unit Seg_LUcall CreateNUnitsAtLoc(1,'u003',udg_Seg_Own,Seg_L,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0D9')call IssueTargetOrderById(bj_lastCreatedUnit,$D0062,Seg_U)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h03O',udg_Seg_Own,Seg_L,bj_UNIT_FACING)set Seg_LU=bj_lastCreatedUnitcall RemoveLocation(Seg_L)set Seg_L=nullcall UnitApplyTimedLifeBJ(2.,'BTLF',Seg_LU)call SetUnitAnimation(Seg_LU,"death")call UnitDamageTargetBJ(udg_Seg_Unit[0],Seg_U,udg_Seg_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)set Seg_U=nullset Seg_LU=nullendfunctionfunction Trig_Seg_Actions takes nothing returns nothingset udg_Seg_Unit[0]=GetTriggerUnit()
set udg_Seg_Loc[0]=GetSpellTargetLoc()set udg_Seg_Own=GetOwningPlayer(udg_Seg_Unit[0])
set udg_Seg_Real[0]=(500.+(100.*I2R(GetUnitAbilityLevelSwapped('A07E',udg_Seg_Unit[0]))))set udg_Seg_Loc[1]=GetUnitLoc(udg_Seg_Unit[0])call CreateNUnitsAtLoc(1,'u005',udg_Seg_Own,udg_Seg_Loc[0],bj_UNIT_FACING)set udg_Seg_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u003',udg_Seg_Own,udg_Seg_Loc[1],bj_UNIT_FACING)set udg_Seg_Unit[2]=bj_lastCreatedUnitcall UnitAddAbility(udg_Seg_Unit[2],'A076')call IssueTargetOrderById(udg_Seg_Unit[2],$D007F,udg_Seg_Unit[1])if(Trig_Seg_Func012C())thenset udg_Seg_Real[1]=.1else
set udg_Seg_Real[1]=.04endifcall RemoveLocation(udg_Seg_Loc[0])set udg_Seg_Loc[0]=nullcall RemoveLocation(udg_Seg_Loc[1])set udg_Seg_Loc[1]=nullcall DisplayText("Midori Boshi: Dokuro Bakuhatsu So",udg_Seg_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Usopp\\SkullExplosion.wav",GetUnitX(udg_Seg_Unit[0]),GetUnitY(udg_Seg_Unit[0]))
call TriggerSleepAction(udg_Seg_Real[1])
set udg_Seg_Real[2]=600.
set udg_Seg_Loc[0]=GetUnitLoc(udg_Seg_Unit[1])call CreateNUnitsAtLoc(1,'h060',udg_Seg_Own,udg_Seg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(6.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h062',udg_Seg_Own,udg_Seg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h061',udg_Seg_Own,udg_Seg_Loc[0],bj_UNIT_FACING)set udg_Seg_Unit[3]=bj_lastCreatedUnitset udg_Seg_Int=1loop
exitwhen udg_Seg_Int>4set udg_Seg_Loc[1]=PolarProjectionBJ(udg_Seg_Loc[0],350.,(I2R(udg_Seg_Int)*90.))
call CreateNUnitsAtLoc(1,'h063',udg_Seg_Own,udg_Seg_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Seg_Loc[1])set udg_Seg_Loc[1]=nullset udg_Seg_Int=udg_Seg_Int+1endloopcall EnumDestructablesInCircleBJ(udg_Seg_Real[2],udg_Seg_Loc[0],function TreeKiller)
set udg_Seg_Group=GetUnitsInRangeOfLocMatching(udg_Seg_Real[2],udg_Seg_Loc[0],Condition(function Trig_Seg_Func030002003))call RemoveLocation(udg_Seg_Loc[0])set udg_Seg_Loc[0]=nullcall ForGroupBJ(udg_Seg_Group,function Trig_Seg_Func033A)call DestroyGroup(udg_Seg_Group)
set udg_Seg_Group=nullcall UnitRemoveAbility(udg_Seg_Unit[3],'Aloc')call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Seg_Unit[1])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Seg_Unit[2])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Seg_Unit[3])
set udg_Seg_Unit[0]=null
set udg_Seg_Unit[1]=null
set udg_Seg_Unit[2]=null
set udg_Seg_Unit[3]=null
set udg_Seg_Real[0]=.0set udg_Seg_Real[1]=.0set udg_Seg_Real[2]=.0set udg_Seg_Int=0set udg_Seg_Own=null
endfunctionfunction InitTrig_Seg takes nothing returns nothingset gg_trg_Seg=CreateTrigger()call TriggerAddCondition(gg_trg_Seg,Condition(function Trig_Seg_Conditions))
call TriggerAddAction(gg_trg_Seg,function Trig_Seg_Actions)endfunctionfunction Trig_Abe_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07F')endfunctionfunction Trig_Abe_Func011C takes nothing returns boolean
return(DistanceBetweenPoints(udg_Abe_Loc[0],udg_Abe_Loc[1])>300.)endfunctionfunction Trig_Abe_Func036Func001Func009002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Abe_Group2)==false)
endfunctionfunction Trig_Abe_Func036Func001Func009002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Abe_Own))
endfunctionfunction Trig_Abe_Func036Func001Func009002003002002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Abe_Func036Func001Func009002003002002002 takes nothing returns boolean
return(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Abe_Func036Func001Func009002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Abe_Func036Func001Func009002003002002001(),Trig_Abe_Func036Func001Func009002003002002002())endfunctionfunction Trig_Abe_Func036Func001Func009002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Abe_Func036Func001Func009002003002001(),Trig_Abe_Func036Func001Func009002003002002())endfunctionfunction Trig_Abe_Func036Func001Func009002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Abe_Func036Func001Func009002003001(),Trig_Abe_Func036Func001Func009002003002())endfunctionfunction Trig_Abe_Func036Func001Func012A takes nothing returns nothingset udg_Abe_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Abe_Group2,udg_Abe_Unit[2])call UnitDamageTargetBJ(udg_Abe_Unit[0],udg_Abe_Unit[2],udg_Abe_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Abe_Unit[2]=null
endfunctionfunction Trig_Abe_Actions takes nothing returns nothingset udg_Abe_Unit[0]=GetTriggerUnit()
set udg_Abe_Loc[0]=GetSpellTargetLoc()set udg_Abe_Loc[1]=GetUnitLoc(udg_Abe_Unit[0])set udg_Abe_Own=GetOwningPlayer(udg_Abe_Unit[0])
call CreateNUnitsAtLoc(1,'u005',udg_Abe_Own,udg_Abe_Loc[0],bj_UNIT_FACING)set udg_Abe_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'u003',udg_Abe_Own,udg_Abe_Loc[1],bj_UNIT_FACING)set udg_Abe_Unit[2]=bj_lastCreatedUnitcall UnitAddAbility(udg_Abe_Unit[2],'A076')call IssueTargetOrderById(udg_Abe_Unit[2],$D007F,udg_Abe_Unit[1])if(Trig_Abe_Func011C())thenset udg_Abe_Real[1]=.1else
set udg_Abe_Real[1]=.04endifcall RemoveLocation(udg_Abe_Loc[0])set udg_Abe_Loc[0]=nullcall RemoveLocation(udg_Abe_Loc[1])set udg_Abe_Loc[1]=nullset udg_Abe_Real[0]=(500.+((7.+I2R(GetUnitAbilityLevelSwapped('A07F',udg_Abe_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Abe_Unit[0],true))))
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Abe_Unit[2])
set udg_Abe_Unit[2]=null
call DisplayText("Hissatsu: Atlas Suisei",udg_Abe_Unit[0],.023,true,$FF,$FF,$FF,$FF)
call TriggerSleepAction(udg_Abe_Real[1])
set udg_Abe_Loc[0]=GetUnitLoc(udg_Abe_Unit[1])call CreateNUnitsAtLoc(1,'h065',udg_Abe_Own,udg_Abe_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h065',udg_Abe_Own,udg_Abe_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Abe_Loc[0])set udg_Abe_Loc[0]=nullset udg_Abe_Real[1]=.06set udg_Abe_Real[2]=190.
set udg_Abe_Real[3]=60.set udg_Abe_Real[4]=2.set udg_Abe_Real[5]=200.
set udg_Abe_Type='h064'set udg_Abe_Int[0]=1
loop
exitwhen udg_Abe_Int[0]>4set udg_Abe_Int[1]=1
loop
exitwhen udg_Abe_Int[1]>6set udg_Abe_Loc[0]=GetUnitLoc(udg_Abe_Unit[1])set udg_Abe_Loc[1]=PolarProjectionBJ(udg_Abe_Loc[0],(I2R(udg_Abe_Int[0])*udg_Abe_Real[2]),(I2R(udg_Abe_Int[1])*udg_Abe_Real[3]))
call RemoveLocation(udg_Abe_Loc[0])set udg_Abe_Loc[0]=nullcall DestroyEffect(AddSpecialEffectLocBJ(udg_Abe_Loc[1],"Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl"))
call CreateNUnitsAtLoc(1,udg_Abe_Type,udg_Abe_Own,udg_Abe_Loc[1],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(udg_Abe_Real[4],'BTLF',bj_lastCreatedUnit)
call EnumDestructablesInCircleBJ(udg_Abe_Real[5],udg_Abe_Loc[1],function TreeKiller)
set udg_Abe_Group=GetUnitsInRangeOfLocMatching(udg_Abe_Real[5],udg_Abe_Loc[1],Condition(function Trig_Abe_Func036Func001Func009002003))call RemoveLocation(udg_Abe_Loc[1])set udg_Abe_Loc[1]=nullcall ForGroupBJ(udg_Abe_Group,function Trig_Abe_Func036Func001Func012A)call DestroyGroup(udg_Abe_Group)
set udg_Abe_Group=nullset udg_Abe_Int[1]=udg_Abe_Int[1]+1endloopcall TriggerSleepAction(udg_Abe_Real[1])
set udg_Abe_Int[0]=udg_Abe_Int[0]+1endloopcall GroupClear(udg_Abe_Group2)call RemoveUnit(udg_Abe_Unit[1])
set udg_Abe_Unit[0]=null
set udg_Abe_Unit[1]=null
set udg_Abe_Type=0set udg_Abe_Own=null
set udg_Abe_Real[0]=.0set udg_Abe_Real[1]=.0set udg_Abe_Real[2]=.0set udg_Abe_Real[3]=.0set udg_Abe_Real[4]=.0set udg_Abe_Real[5]=.0endfunctionfunction InitTrig_Abe takes nothing returns nothingset gg_trg_Abe=CreateTrigger()call TriggerAddCondition(gg_trg_Abe,Condition(function Trig_Abe_Conditions))
call TriggerAddAction(gg_trg_Abe,function Trig_Abe_Actions)endfunctionfunction Trig_Ipf_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07G')endfunctionfunction Trig_Ipf_Actions takes nothing returns nothingset udg_Ipf_Unit[0]=GetTriggerUnit()
set udg_Ipf_Loc[0]=GetSpellTargetLoc()set udg_Ipf_Own=GetOwningPlayer(udg_Ipf_Unit[0])
set udg_Ipf_Loc[1]=GetUnitLoc(udg_Ipf_Unit[0])set udg_Ipf_Real[0]=AngleBetweenPoints(udg_Ipf_Loc[1],udg_Ipf_Loc[0])set udg_Ipf_Loc[2]=PolarProjectionBJ(udg_Ipf_Loc[1],100.,udg_Ipf_Real[0])call RemoveLocation(udg_Ipf_Loc[0])set udg_Ipf_Loc[0]=nullcall RemoveLocation(udg_Ipf_Loc[1])set udg_Ipf_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h066',udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])set udg_Ipf_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h068',udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h068',udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h06A',udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h06A',udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Ipf_Loc[2])set udg_Ipf_Loc[2]=nullcall DisplayText("Impact Wolf",udg_Ipf_Unit[0],.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\ImpatctWolf.mp3")set udg_Ipf_Real[1]=(1500.+((5.+(5.*I2R(GetUnitAbilityLevelSwapped('A07G',udg_Ipf_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Ipf_Unit[0],false))))set udg_Ipf_Real[2]=40.set udg_Ipf_Real[3]=(udg_Ipf_Real[0]+180.)set udg_Ipf_Int[0]=$Fset udg_Ipf_Type[0]='h017'call EnableTrigger(gg_trg_IpfB)set udg_Ipf_Hash=InitHashtable()
set udg_Ipf_Real[4]=60.set udg_Ipf_Real[5]=300.
set udg_Ipf_Int[1]=40set udg_Ipf_Int[2]=2
set udg_Ipf_Type[1]='h067'set udg_Ipf_Type[2]='h069'set udg_Ipf_Bool=trueset udg_Ipf_Key[0]="Ipf_L2"set udg_Ipf_Key[1]="Speed"set udg_Ipf_Map=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])call EnableTrigger(gg_trg_IpfL)call EnableTrigger(gg_trg_IpfL2)
endfunctionfunction InitTrig_Ipf takes nothing returns nothingset gg_trg_Ipf=CreateTrigger()call TriggerAddCondition(gg_trg_Ipf,Condition(function Trig_Ipf_Conditions))
call TriggerAddAction(gg_trg_Ipf,function Trig_Ipf_Actions)endfunctionfunction Trig_IpfB_Func001C takes nothing returns booleanreturn(udg_Ipf_Int[0]>0)
endfunctionfunction Trig_IpfB_Actions takes nothing returns nothing
if(Trig_IpfB_Func001C())then
set udg_Ipf_Loc[0]=GetUnitLoc(udg_Ipf_Unit[0])set udg_Ipf_Loc[1]=PolarProjectionBJ(udg_Ipf_Loc[0],udg_Ipf_Real[2],udg_Ipf_Real[3])
call UnitMoveXY(udg_Ipf_Unit[0],GetLocationX(udg_Ipf_Loc[1]),GetLocationY(udg_Ipf_Loc[1]))call CreateNUnitsAtLoc(1,udg_Ipf_Type[0],udg_Ipf_Own,udg_Ipf_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Ipf_Loc[0])set udg_Ipf_Loc[0]=nullcall RemoveLocation(udg_Ipf_Loc[1])set udg_Ipf_Loc[1]=nullset udg_Ipf_Real[2]=(udg_Ipf_Real[2]-1.)
set udg_Ipf_Int[0]=(udg_Ipf_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())endifendfunctionfunction InitTrig_IpfB takes nothing returns nothing
set gg_trg_IpfB=CreateTrigger()call DisableTrigger(gg_trg_IpfB)
call TriggerRegisterTimerEventPeriodic(gg_trg_IpfB,.04)call TriggerAddAction(gg_trg_IpfB,function Trig_IpfB_Actions)endfunctionfunction Trig_IpfL_Func001Func002C takes nothing returns boolean
return(udg_Ipf_Int[2]==2)endfunctionfunction Trig_IpfL_Func001Func006C takes nothing returns boolean
return(RectContainsLoc(udg_Ipf_Map,udg_Ipf_Loc[3]))endfunctionfunction Trig_IpfL_Func001Func008002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Ipf_Group2)==false)
endfunctionfunction Trig_IpfL_Func001Func008002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Ipf_Own))
endfunctionfunction Trig_IpfL_Func001Func008002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_IpfL_Func001Func008002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_IpfL_Func001Func008002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_IpfL_Func001Func008002003002002001(),Trig_IpfL_Func001Func008002003002002002())endfunctionfunction Trig_IpfL_Func001Func008002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_IpfL_Func001Func008002003002001(),Trig_IpfL_Func001Func008002003002002())endfunctionfunction Trig_IpfL_Func001Func008002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_IpfL_Func001Func008002003001(),Trig_IpfL_Func001Func008002003002())endfunctionfunction Trig_IpfL_Func001Func011Func008C takes nothing returns booleanreturn(IsUnitType(udg_Ipf_Unit[2],UNIT_TYPE_HERO))!=null
endfunctionfunction Trig_IpfL_Func001Func011A takes nothing returns nothing
set udg_Ipf_Unit[2]=GetEnumUnit()call SaveIntegerBJ(20,StringHashBJ(udg_Ipf_Key[0]),GetHandleIdBJ(udg_Ipf_Unit[2]),udg_Ipf_Hash)call SaveRealBJ(30.,StringHashBJ(udg_Ipf_Key[1]),GetHandleIdBJ(udg_Ipf_Unit[2]),udg_Ipf_Hash)call GroupAddUnit(udg_Ipf_Group2,udg_Ipf_Unit[2])if(IsUnitType(udg_Ipf_Unit[2],UNIT_TYPE_ANCIENT)==false)then
call GroupAddUnit(udg_Ipf_Group4,udg_Ipf_Unit[2])endifif(Trig_IpfL_Func001Func011Func008C())thencall DisplayText(I2S(R2I(udg_Ipf_Real[1]))+"!",udg_Ipf_Unit[2],.027,true,$FF,0,0,$FF)endifcall UnitDamageTargetBJ(udg_Ipf_Unit[0],udg_Ipf_Unit[2],udg_Ipf_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Ipf_Unit[2]=null
endfunctionfunction Trig_IpfL_Func001Func018001 takes nothing returns booleanreturn(IsTriggerEnabled(gg_trg_IpfB)==false)
endfunctionfunction Trig_IpfL_Func001Func022A takes nothing returns nothing
set udg_Ipf_Unit[2]=GetEnumUnit()call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Ipf_Unit[2])
call SetUnitAnimation(udg_Ipf_Unit[2],"death large")
set udg_Ipf_Unit[2]=null
endfunctionfunction Trig_IpfL_Func001C takes nothing returns booleanreturn(udg_Ipf_Int[1]>0)
endfunctionfunction Trig_IpfL_Actions takes nothing returns nothing
if(Trig_IpfL_Func001C())then
set udg_Ipf_Loc[2]=GetUnitLoc(udg_Ipf_Unit[1])if(Trig_IpfL_Func001Func002C())thencall CreateNUnitsAtLoc(1,udg_Ipf_Type[1],udg_Ipf_Own,udg_Ipf_Loc[2],GetRandomReal(0,360))set udg_Ipf_Unit[2]=bj_lastCreatedUnitcall SetUnitAnimation(udg_Ipf_Unit[2],"birth large")
call GroupAddUnit(udg_Ipf_Group3,udg_Ipf_Unit[2])set udg_Ipf_Unit[2]=null
call CreateNUnitsAtLoc(1,udg_Ipf_Type[2],udg_Ipf_Own,udg_Ipf_Loc[2],udg_Ipf_Real[0])
call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
set udg_Ipf_Int[2]=0
else
set udg_Ipf_Int[2]=(udg_Ipf_Int[2]+1)endifset udg_Ipf_Loc[3]=PolarProjectionBJ(udg_Ipf_Loc[2],udg_Ipf_Real[4],udg_Ipf_Real[0])
call RemoveLocation(udg_Ipf_Loc[2])set udg_Ipf_Loc[2]=nullif(Trig_IpfL_Func001Func006C())thencall SetUnitPositionLoc(udg_Ipf_Unit[1],udg_Ipf_Loc[3])call EnumDestructablesInCircleBJ(udg_Ipf_Real[5],udg_Ipf_Loc[3],function TreeKiller)
endifcall Dynamic_GroupShake(GetLocationX(udg_Ipf_Loc[3]),GetLocationY(udg_Ipf_Loc[3]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,udg_Ipf_GroupShake)set udg_Ipf_Group=GetUnitsInRangeOfLocMatching(udg_Ipf_Real[5],udg_Ipf_Loc[3],Condition(function Trig_IpfL_Func001Func008002003))call RemoveLocation(udg_Ipf_Loc[3])set udg_Ipf_Loc[3]=nullcall ForGroupBJ(udg_Ipf_Group,function Trig_IpfL_Func001Func011A)call DestroyGroup(udg_Ipf_Group)
set udg_Ipf_Group=nullset udg_Ipf_Int[1]=(udg_Ipf_Int[1]-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Ipf_Group2)set udg_Ipf_Bool=falseloop
exitwhen(Trig_IpfL_Func001Func018001())call TriggerSleepAction(RMaxBJ(bj_WAIT_FOR_COND_MIN_INTERVAL,.1))endloopset udg_Ipf_Group=CreateGroup()call GroupAddGroup(udg_Ipf_Group3,udg_Ipf_Group)
call GroupClear(udg_Ipf_Group3)call ForGroupBJ(udg_Ipf_Group,function Trig_IpfL_Func001Func022A)call DestroyGroup(udg_Ipf_Group)
set udg_Ipf_Group=nullcall RemoveUnit(udg_Ipf_Unit[1])
set udg_Ipf_Unit[1]=null
endifendfunctionfunction InitTrig_IpfL takes nothing returns nothing
set gg_trg_IpfL=CreateTrigger()call DisableTrigger(gg_trg_IpfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IpfL,.04)call TriggerAddAction(gg_trg_IpfL,function Trig_IpfL_Actions)endfunctionfunction IpfKeyCheck takes integer Ipf_IntUnitKey returns booleanreturn(Ipf_IntUnitKey<1)
endfunctionfunction IpfPathCheck takes nothing returns booleanreturn(IsTerrainPathableBJ(udg_Ipf_Loc[1],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction IpfL2_GroupAct takes nothing returns nothinglocal unit Ipf_PickUnit=GetEnumUnit()local location array Ipf_Loc
local integer Ipf_IntUnitId=GetHandleIdBJ(Ipf_PickUnit)local integer Ipf_IntUnitKey=LoadIntegerBJ(StringHashBJ(udg_Ipf_Key[0]),Ipf_IntUnitId,udg_Ipf_Hash)local real Ipf_Speed=LoadRealBJ(StringHashBJ(udg_Ipf_Key[1]),Ipf_IntUnitId,udg_Ipf_Hash)
if(IpfKeyCheck(Ipf_IntUnitKey))thencall GroupRemoveUnit(udg_Ipf_Group4,Ipf_PickUnit)endifcall SaveIntegerBJ((Ipf_IntUnitKey-1),StringHashBJ(udg_Ipf_Key[0]),Ipf_IntUnitId,udg_Ipf_Hash)set Ipf_Loc[0]=GetUnitLoc(Ipf_PickUnit)set Ipf_Loc[1]=PolarProjectionBJ(Ipf_Loc[0],Ipf_Speed,udg_Ipf_Real[0])if(IpfPathCheck())thencall SetUnitPositionLoc(Ipf_PickUnit,Ipf_Loc[1])
call SaveRealBJ((Ipf_Speed-1.5),StringHashBJ(udg_Ipf_Key[1]),Ipf_IntUnitId,udg_Ipf_Hash)
call EnumDestructablesInCircleBJ(80.,Ipf_Loc[1],function TreeKiller)
endifcall CreateNUnitsAtLoc(1,udg_Ipf_Type[0],udg_Ipf_Own,Ipf_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Ipf_Loc[0])set Ipf_Loc[0]=nullcall RemoveLocation(Ipf_Loc[1])set Ipf_Loc[1]=nullset Ipf_PickUnit=nullset Ipf_IntUnitId=0set Ipf_IntUnitKey=0
endfunctionfunction IpfL2_Cond1 takes nothing returns booleanreturn(udg_Ipf_Bool)
endfunctionfunction Trig_IpfL2_Actions takes nothing returns nothinglocal group Ipf_Grouplocal integer count=0local group GroupCount=CreateGroup()
call GroupAddGroup(udg_Ipf_Group4,GroupCount)if(IpfL2_Cond1()or IsUnitGroupEmptyBJ(GroupCount)==false)thencall DestroyGroup(GroupCount)set GroupCount=nullset Ipf_Group=CreateGroup()call GroupAddGroup(udg_Ipf_Group4,Ipf_Group)
call ForGroupBJ(Ipf_Group,function IpfL2_GroupAct)call DestroyGroup(Ipf_Group)
set Ipf_Group=nullelse
call DestroyGroup(GroupCount)set GroupCount=nullcall DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Ipf_Group4)call GroupClear(udg_Ipf_GroupShake)call RemoveRect(udg_Ipf_Map)
call FlushParentHashtableBJ(udg_Ipf_Hash)set udg_Ipf_Map=null
set udg_Ipf_Hash=nullset udg_Ipf_Unit[0]=null
set udg_Ipf_Type[0]=0set udg_Ipf_Type[1]=0set udg_Ipf_Type[2]=0set udg_Ipf_Key[0]=""set udg_Ipf_Key[1]=""set udg_Ipf_Own=null
set udg_Ipf_Real[0]=.0set udg_Ipf_Real[1]=.0set udg_Ipf_Real[2]=.0set udg_Ipf_Real[3]=.0set udg_Ipf_Real[4]=.0set udg_Ipf_Real[5]=.0set udg_Ipf_Int[0]=0
set udg_Ipf_Int[1]=0
set udg_Ipf_Int[2]=0
endifendfunctionfunction InitTrig_IpfL2 takes nothing returns nothingset gg_trg_IpfL2=CreateTrigger()
call DisableTrigger(gg_trg_IpfL2)call TriggerRegisterTimerEventPeriodic(gg_trg_IpfL2,.04)
call TriggerAddAction(gg_trg_IpfL2,function Trig_IpfL2_Actions)endfunctionfunction AI_Neji_Cond5 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='U006')or(GetUnitTypeId(GetTriggerUnit())=='U007')endfunctionfunction AI_Neji_Cond3 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Neji_Cond5())thenreturn false
endifreturn trueendfunctionfunction AI_Neji_Cond4 takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='U006')or(GetUnitTypeId(GetAttacker())=='U007')
endfunctionfunction AI_Neji_Cond2 takes nothing returns boolean
if(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Neji_Cond4())thenreturn false
endifreturn trueendfunctionfunction AI_Neji_Cond1 takes nothing returns boolean
if(AI_Neji_Cond3())thenreturn trueelseif(AI_Neji_Cond2())thenreturn trueendifreturn false
endfunctionfunction AI_Neji_Cond takes nothing returns booleanif(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Neji_Cond1())thenreturn false
endifreturn trueendfunctionfunction AI_Neji_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local boolean AI_C=false
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Neji_Cond5())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A07P')call SelectHeroSkill(AI_1,'A07N')call SelectHeroSkill(AI_1,'A07L')call SelectHeroSkill(AI_1,'A07K')call SelectHeroSkill(AI_1,'A07J')endifset AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point2)call RemoveLocation(AI_Point2)set AI_Point2=nullif(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssueImmediateOrderById(AI_1,$D02B7)call IssueImmediateOrderById(AI_1,$D022E)call IssueImmediateOrderById(AI_1,$D0277)set AI_C=falseendifcall IssueTargetOrderById(AI_1,$D0065,AI_2)call IssueTargetOrderById(AI_1,$D007F,AI_2)endifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Neji takes nothing returns nothingset udg_AI_Trig[$B]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$B],Condition(function AI_Neji_Cond))call TriggerAddAction(udg_AI_Trig[$B],function AI_Neji_Act)endfunctionfunction Trig_Gef_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07H')endfunctionfunction Trig_Gef_Actions takes nothing returns nothingset udg_Gef_Unit[0]=GetTriggerUnit()
set udg_Gef_Unit[1]=GetSpellTargetUnit()
call UnitAddAbility(udg_Gef_Unit[0],'A07I')set udg_Gef_Real[0]=(4.*I2R(GetHeroStatBJ(1,udg_Gef_Unit[0],true)))call TriggerSleepAction(.01)
set udg_Gef_Loc[0]=GetUnitLoc(udg_Gef_Unit[0])set udg_Gef_Loc[1]=GetUnitLoc(udg_Gef_Unit[1])set udg_Gef_Real[1]=AngleBetweenPoints(udg_Gef_Loc[0],udg_Gef_Loc[1])set udg_Gef_Loc[2]=PolarProjectionBJ(udg_Gef_Loc[1],120.,udg_Gef_Real[1])call SetUnitPositionLocFacingLocBJ(udg_Gef_Unit[0],udg_Gef_Loc[2],udg_Gef_Loc[1])call CreateNUnitsAtLoc(1,'h01L',GetOwningPlayer(udg_Gef_Unit[0]),udg_Gef_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call SetUnitScalePercent(bj_lastCreatedUnit,200.,200.,200.)call CreateNUnitsAtLoc(1,'h00E',GetOwningPlayer(udg_Gef_Unit[0]),udg_Gef_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Gef_Loc[0])set udg_Gef_Loc[0]=nullcall RemoveLocation(udg_Gef_Loc[1])set udg_Gef_Loc[1]=nullcall RemoveLocation(udg_Gef_Loc[2])set udg_Gef_Loc[2]=nullcall IssueTargetOrderById(udg_Gef_Unit[0],$D000F,udg_Gef_Unit[1])call DisplayText("Juken",udg_Gef_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call UnitDamageTargetBJ(udg_Gef_Unit[0],udg_Gef_Unit[1],udg_Gef_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Gef_Real[0]=.0set udg_Gef_Real[1]=.0set udg_Gef_Unit[1]=null
call TriggerSleepAction(.1)call UnitRemoveAbility(udg_Gef_Unit[0],'A07I')set udg_Gef_Unit[0]=null
endfunctionfunction InitTrig_Gef takes nothing returns nothingset gg_trg_Gef=CreateTrigger()call TriggerAddCondition(gg_trg_Gef,Condition(function Trig_Gef_Conditions))
call TriggerAddAction(gg_trg_Gef,function Trig_Gef_Actions)endfunctionfunction Trig_Eth_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07J')endfunctionfunction Trig_Eth_Actions takes nothing returns nothingset udg_Eth_Unit[0]=GetTriggerUnit()
set udg_Eth_Loc[0]=GetSpellTargetLoc()set udg_Eth_Own=GetOwningPlayer(udg_Eth_Unit[0])
set udg_Eth_Loc[1]=GetUnitLoc(udg_Eth_Unit[0])set udg_Eth_Real[0]=AngleBetweenPoints(udg_Eth_Loc[1],udg_Eth_Loc[0])set udg_Eth_Loc[2]=PolarProjectionBJ(udg_Eth_Loc[1],120.,udg_Eth_Real[0])set udg_Eth_Loc[3]=PolarProjectionBJ(udg_Eth_Loc[1],-50.,udg_Eth_Real[0])call RemoveLocation(udg_Eth_Loc[0])set udg_Eth_Loc[0]=nullcall RemoveLocation(udg_Eth_Loc[1])set udg_Eth_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h000',udg_Eth_Own,udg_Eth_Loc[2],bj_UNIT_FACING)set udg_Eth_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06C',udg_Eth_Own,udg_Eth_Loc[3],udg_Eth_Real[0])call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Eth_Loc[2])set udg_Eth_Loc[2]=nullcall RemoveLocation(udg_Eth_Loc[3])set udg_Eth_Loc[3]=nullcall DisplayText("Hakke Hasangeki",udg_Eth_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Eth_Real[1]=BasicDmg_Q(udg_Eth_Unit[0],'A07J',1)
set udg_Eth_Real[2]=52.set udg_Eth_Real[3]=250.
set udg_Eth_Int=22set udg_Eth_Bool=trueset udg_Eth_Type='h06D'call EnableTrigger(gg_trg_EthL)endfunctionfunction InitTrig_Eth takes nothing returns nothingset gg_trg_Eth=CreateTrigger()call TriggerAddCondition(gg_trg_Eth,Condition(function Trig_Eth_Conditions))
call TriggerAddAction(gg_trg_Eth,function Trig_Eth_Actions)endfunctionfunction Trig_EthL_Func001Func004C takes nothing returns boolean
return(udg_Eth_Bool)
endfunctionfunction Trig_EthL_Func001Func008002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Eth_Group2)==false)
endfunctionfunction Trig_EthL_Func001Func008002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Eth_Own))
endfunctionfunction Trig_EthL_Func001Func008002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_EthL_Func001Func008002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_EthL_Func001Func008002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_EthL_Func001Func008002003002002001(),Trig_EthL_Func001Func008002003002002002())endfunctionfunction Trig_EthL_Func001Func008002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_EthL_Func001Func008002003002001(),Trig_EthL_Func001Func008002003002002())endfunctionfunction Trig_EthL_Func001Func008002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_EthL_Func001Func008002003001(),Trig_EthL_Func001Func008002003002())endfunctionfunction Trig_EthL_Func001Func011A takes nothing returns nothing
set udg_Eth_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Eth_Group2,udg_Eth_Unit[2])call UnitDamageTargetBJ(udg_Eth_Unit[0],udg_Eth_Unit[2],udg_Eth_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Eth_Unit[2]=null
endfunctionfunction Trig_EthL_Func001C takes nothing returns booleanreturn(udg_Eth_Int>0)endfunctionfunction Trig_EthL_Actions takes nothing returns nothing
if(Trig_EthL_Func001C())then
set udg_Eth_Loc[0]=GetUnitLoc(udg_Eth_Unit[1])set udg_Eth_Loc[1]=PolarProjectionBJ(udg_Eth_Loc[0],udg_Eth_Real[2],udg_Eth_Real[0])
call SetUnitPositionLoc(udg_Eth_Unit[1],udg_Eth_Loc[1])if(Trig_EthL_Func001Func004C())thencall CreateNUnitsAtLoc(1,udg_Eth_Type,udg_Eth_Own,udg_Eth_Loc[0],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)set udg_Eth_Bool=falseelse
set udg_Eth_Bool=trueendifcall RemoveLocation(udg_Eth_Loc[0])set udg_Eth_Loc[0]=nullcall EnumDestructablesInCircleBJ(udg_Eth_Real[3],udg_Eth_Loc[1],function TreeKiller)
set udg_Eth_Group=GetUnitsInRangeOfLocMatching(udg_Eth_Real[3],udg_Eth_Loc[1],Condition(function Trig_EthL_Func001Func008002003))call RemoveLocation(udg_Eth_Loc[1])set udg_Eth_Loc[1]=nullcall ForGroupBJ(udg_Eth_Group,function Trig_EthL_Func001Func011A)call DestroyGroup(udg_Eth_Group)
set udg_Eth_Group=nullset udg_Eth_Int=(udg_Eth_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Eth_Group2)call RemoveUnit(udg_Eth_Unit[1])
set udg_Eth_Unit[0]=null
set udg_Eth_Unit[1]=null
set udg_Eth_Own=null
set udg_Eth_Type=0set udg_Eth_Real[0]=.0set udg_Eth_Real[1]=.0set udg_Eth_Real[2]=.0set udg_Eth_Real[3]=.0set udg_Eth_Int=0set udg_Eth_Bool=falseendifendfunctionfunction InitTrig_EthL takes nothing returns nothing
set gg_trg_EthL=CreateTrigger()call DisableTrigger(gg_trg_EthL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EthL,.04)call TriggerAddAction(gg_trg_EthL,function Trig_EthL_Actions)endfunctionfunction Trig_Rti_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07K')endfunctionfunction Trig_Rti_Func022C takes nothing returns boolean
return(GetUnitTypeId(udg_Rti_Unit[0])=='U007')endfunctionfunction Trig_Rti_Actions takes nothing returns nothingset udg_Rti_Unit[0]=GetTriggerUnit()
set udg_Rti_Own=GetOwningPlayer(udg_Rti_Unit[0])
set udg_Rti_Type='h03C'set udg_Rti_Real[0]=(300.+((3.+I2R(GetUnitAbilityLevelSwapped('A07K',GetTriggerUnit())))*I2R(GetHeroStatBJ(1,udg_Rti_Unit[0],true))))set udg_Rti_Real[1]=300.
set udg_Rti_Real[2]=12.set udg_Rti_Int=34set udg_Rti_Hash=InitHashtable()
set udg_Rti_Loc[0]=GetUnitLoc(udg_Rti_Unit[0])call CreateNUnitsAtLoc(1,udg_Rti_Type,udg_Rti_Own,udg_Rti_Loc[0],GetRandomReal(0,360))set udg_Rti_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,udg_Rti_Type,udg_Rti_Own,udg_Rti_Loc[0],GetRandomReal(0,360))set udg_Rti_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06F',udg_Rti_Own,udg_Rti_Loc[0],bj_UNIT_FACING)set udg_Rti_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06E',udg_Rti_Own,udg_Rti_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call EnumDestructablesInCircleBJ(udg_Rti_Real[1],udg_Rti_Loc[0],function TreeKiller)
call RemoveLocation(udg_Rti_Loc[0])set udg_Rti_Loc[0]=nullif(Trig_Rti_Func022C())thencall UnitAddAbility(udg_Rti_Unit[1],'A07Q')endifcall UnitApplyTimedLifeBJ(1.,'BTLF',udg_Rti_Unit[1])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Rti_Unit[2])
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Rti_Unit[3])
call SetUnitScalePercent(udg_Rti_Unit[1],270.,270.,270.)
call SetUnitScalePercent(udg_Rti_Unit[2],270.,270.,270.)
call SetUnitVertexColorBJ(udg_Rti_Unit[3],'d','d','d',100.)call SetUnitAnimation(udg_Rti_Unit[3],"birth")call SetUnitTimeScalePercent(udg_Rti_Unit[3],250.)set udg_Rti_Unit[1]=null
set udg_Rti_Unit[2]=null
set udg_Rti_Unit[3]=null
call PauseSystem(udg_Rti_Unit[0],true)call SetUnitAnimation(udg_Rti_Unit[0],"spell spin")call SetUnitTimeScalePercent(udg_Rti_Unit[0],340.)call DisplayText("Hakkesho Kaiten",udg_Rti_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Neji\\Rotation.wav",GetUnitX(udg_Rti_Unit[0]),GetUnitY(udg_Rti_Unit[0]))set udg_Rti_Type='h017'set udg_Rti_Bool=truecall EnableTrigger(gg_trg_RtiL)call TriggerSleepAction(.1)call SetUnitTimeScalePercent(udg_Rti_Unit[0],100.)call PauseSystem(udg_Rti_Unit[0],false)call QueueUnitAnimation(udg_Rti_Unit[0],"stand")
call UnitRemoveAbility(udg_Rti_Unit[0],'B01D')set udg_Rti_Bool=falsecall GroupClear(udg_Rti_Group2)endfunctionfunction InitTrig_Rti takes nothing returns nothingset gg_trg_Rti=CreateTrigger()call TriggerAddCondition(gg_trg_Rti,Condition(function Trig_Rti_Conditions))
call TriggerAddAction(gg_trg_Rti,function Trig_Rti_Actions)endfunctionfunction Trig_RtiL_Func001Func003002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Rti_Group2)==false)
endfunctionfunction Trig_RtiL_Func001Func003002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Rti_Own))
endfunctionfunction Trig_RtiL_Func001Func003002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_RtiL_Func001Func003002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_RtiL_Func001Func003002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_RtiL_Func001Func003002003002002001(),Trig_RtiL_Func001Func003002003002002002())endfunctionfunction Trig_RtiL_Func001Func003002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_RtiL_Func001Func003002003002001(),Trig_RtiL_Func001Func003002003002002())endfunctionfunction Trig_RtiL_Func001Func003002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_RtiL_Func001Func003002003001(),Trig_RtiL_Func001Func003002003002())endfunctionfunction RtiL_GroupAct1 takes nothing returns nothinglocal unit Rti_Unit=GetEnumUnit()local integer Rti_Int=GetHandleIdBJ(GetEnumUnit())local location array Rti_Loc
call GroupAddUnit(udg_Rti_Group2,Rti_Unit)call GroupAddUnit(udg_Rti_Group3,Rti_Unit)call SaveIntegerBJ(udg_Rti_Int,0,Rti_Int,udg_Rti_Hash)call SaveRealBJ(udg_Rti_Real[2],1,Rti_Int,udg_Rti_Hash)set Rti_Loc[0]=GetUnitLoc(udg_Rti_Unit[0])set Rti_Loc[1]=GetUnitLoc(Rti_Unit)call SaveRealBJ(AngleBetweenPoints(Rti_Loc[0],Rti_Loc[1]),2,Rti_Int,udg_Rti_Hash)call RemoveLocation(Rti_Loc[0])set Rti_Loc[0]=nullcall RemoveLocation(Rti_Loc[1])set Rti_Loc[1]=nullcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Rti_Unit,"origin"))
call UnitDamageTargetBJ(udg_Rti_Unit[0],Rti_Unit,udg_Rti_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)set Rti_Unit=nullendfunctionfunction RtiL_GroupAct2Cond takes integer Rti_Int returns booleanreturn(Rti_Int<2)endfunctionfunction RtiL_GroupAct2 takes nothing returns nothinglocal unit Rti_Unit=GetEnumUnit()local integer array Rti_Intlocal real Rti_Reallocal location array Rti_Loc
set Rti_Int[1]=GetHandleIdBJ(Rti_Unit)set Rti_Int[2]=LoadIntegerBJ(0,Rti_Int[1],udg_Rti_Hash)set Rti_Real=LoadRealBJ(1,Rti_Int[1],udg_Rti_Hash)call SaveIntegerBJ((Rti_Int[2]-1),0,Rti_Int[1],udg_Rti_Hash)
call SaveRealBJ((Rti_Real-.34),1,Rti_Int[1],udg_Rti_Hash)if(RtiL_GroupAct2Cond(Rti_Int[2]))thencall GroupRemoveUnit(udg_Rti_Group3,Rti_Unit)endifset Rti_Loc[1]=GetUnitLoc(Rti_Unit)set Rti_Loc[2]=PolarProjectionBJ(Rti_Loc[1],Rti_Real,LoadRealBJ(2,Rti_Int[1],udg_Rti_Hash))call CreateNUnitsAtLoc(1,udg_Rti_Type,udg_Rti_Own,Rti_Loc[1],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(Rti_Loc[1])set Rti_Loc[1]=nullcall UnitMoveXY(Rti_Unit,GetLocationX(Rti_Loc[2]),GetLocationY(Rti_Loc[2]))call RemoveLocation(Rti_Loc[2])set Rti_Loc[2]=nullset Rti_Int[1]=0
set Rti_Int[2]=0
set Rti_Real=.0set Rti_Unit=nullendfunctionfunction RtiL_Cond2 takes nothing returns booleanreturn(udg_Rti_Bool==false)and(IsUnitGroupEmptyBJ(udg_Rti_Group))endfunctionfunction RtiL_Cond1 takes nothing returns booleanreturn(udg_Rti_Bool)
endfunctionfunction Trig_RtiL_Actions takes nothing returns nothing
local group Rti_Grouplocal location Rti_Locif(RtiL_Cond1())then
set Rti_Loc=GetUnitLoc(udg_Rti_Unit[0])set Rti_Group=GetUnitsInRangeOfLocMatching(udg_Rti_Real[1],Rti_Loc,Condition(function Trig_RtiL_Func001Func003002003))call RemoveLocation(Rti_Loc)
set Rti_Loc=null
call ForGroupBJ(Rti_Group,function RtiL_GroupAct1)call DestroyGroup(Rti_Group)
set Rti_Group=nullendifset udg_Rti_Group=CreateGroup()call GroupAddGroup(udg_Rti_Group3,udg_Rti_Group)
call ForGroupBJ(udg_Rti_Group,function RtiL_GroupAct2)if(RtiL_Cond2())then
call DisableTrigger(gg_trg_RtiL)
call GroupClear(udg_Rti_Group3)call FlushParentHashtableBJ(udg_Rti_Hash)set udg_Rti_Unit[0]=null
set udg_Rti_Own=null
set udg_Rti_Hash=nullset udg_Rti_Type=0set udg_Rti_Real[0]=.0set udg_Rti_Real[1]=.0set udg_Rti_Real[2]=.0set udg_Rti_Int=0endifcall DestroyGroup(udg_Rti_Group)
set udg_Rti_Group=nullendfunctionfunction InitTrig_RtiL takes nothing returns nothing
set gg_trg_RtiL=CreateTrigger()call DisableTrigger(gg_trg_RtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RtiL,.04)call TriggerAddAction(gg_trg_RtiL,function Trig_RtiL_Actions)endfunctionfunction Trig_Bkg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07L')endfunctionfunction Trig_Bkg_Func007Func025002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Bkg_Own))
endfunctionfunction Trig_Bkg_Func007Func025002003002001 takes nothing returns booleanreturn(IsUnitPaused(GetFilterUnit())==false)
endfunctionfunction Trig_Bkg_Func007Func025002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Bkg_Func007Func025002003002002002001 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Bkg_Func007Func025002003002002002002 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=nullendfunctionfunction Trig_Bkg_Func007Func025002003002002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Bkg_Func007Func025002003002002002001(),Trig_Bkg_Func007Func025002003002002002002())endfunctionfunction Trig_Bkg_Func007Func025002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Bkg_Func007Func025002003002002001(),Trig_Bkg_Func007Func025002003002002002())endfunctionfunction Trig_Bkg_Func007Func025002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Bkg_Func007Func025002003002001(),Trig_Bkg_Func007Func025002003002002())endfunctionfunction Trig_Bkg_Func007Func025002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Bkg_Func007Func025002003001(),Trig_Bkg_Func007Func025002003002())endfunctionfunction Trig_Bkg_Func007Func028Func014C takes nothing returns booleanreturn(IsUnitAliveBJ(udg_Bkg_Unit[1]))endfunctionfunction Trig_Bkg_Func007Func028A takes nothing returns nothingset udg_Bkg_Unit[1]=GetEnumUnit()set udg_Bkg_Loc[0]=GetUnitLoc(udg_Bkg_Unit[0])set udg_Bkg_Loc[1]=GetUnitLoc(udg_Bkg_Unit[1])set udg_Bkg_Loc[2]=PolarProjectionBJ(udg_Bkg_Loc[1],udg_TransformBackstab,AngleBetweenPoints(udg_Bkg_Loc[0],udg_Bkg_Loc[1]))
call RemoveLocation(udg_Bkg_Loc[0])set udg_Bkg_Loc[0]=nullcall RemoveLocation(udg_Bkg_Loc[1])set udg_Bkg_Loc[1]=nullcall SetUnitPositionLoc(udg_Bkg_Unit[1],udg_Bkg_Loc[2])call CreateNUnitsAtLoc(1,'h017',udg_Bkg_Own,udg_Bkg_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Bkg_Loc[2])set udg_Bkg_Loc[2]=nullif(Trig_Bkg_Func007Func028Func014C())thencall IssueImmediateOrderById(udg_Bkg_Unit[1],$D0004)
endifset udg_Bkg_Unit[1]=null
endfunctionfunction Trig_Bkg_Func007C takes nothing returns boolean
return(GetUnitTypeId(udg_Bkg_Unit[0])==udg_Bkg_Type)
endfunctionfunction Trig_Bkg_Actions takes nothing returns nothingset udg_Bkg_Unit[0]=GetTriggerUnit()
set udg_Bkg_Type='U007'set udg_Bkg_Own=GetOwningPlayer(udg_Bkg_Unit[0])
set udg_Bkg_String="Abilities\\Spells\\Human\\Feedback\\SpellBreakerAttack.mdl"set udg_Bkg_Burn=70.
if(Trig_Bkg_Func007C())thencall DisableTrigger(gg_trg_BkgC)
call DisableTrigger(gg_trg_BkgDmg)set udg_Bkg_Type=0set udg_Bkg_Own=null
set udg_Bkg_String=""set udg_Bkg_Burn=.0else
call DisplayText("Byakugan",udg_Bkg_Unit[0],.023,false,$FF,$FF,$FF,$FF)set udg_Bkg_Loc[0]=GetUnitLoc(udg_Bkg_Unit[0])call EnumDestructablesInCircleBJ(udg_TransformArea,udg_Bkg_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'u003',udg_Bkg_Own,udg_Bkg_Loc[0],bj_UNIT_FACING)set udg_Bkg_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05O',udg_Bkg_Own,udg_Bkg_Loc[0],bj_UNIT_FACING)set udg_Bkg_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h062',udg_Bkg_Own,udg_Bkg_Loc[0],bj_UNIT_FACING)set udg_Bkg_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01L',udg_Bkg_Own,udg_Bkg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h01P',udg_Bkg_Own,udg_Bkg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.7,'BTLF',bj_lastCreatedUnit)
call UnitAddAbility(udg_Bkg_Unit[1],udg_TransformSkill)call IssueImmediateOrderById(udg_Bkg_Unit[1],$D0080)
call SetUnitScalePercent(udg_Bkg_Unit[2],300.,300.,300.)
call SetUnitVertexColorBJ(udg_Bkg_Unit[3],'d','d','d',0)
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Bkg_Unit[1])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Bkg_Unit[2])
call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Bkg_Unit[3])set udg_Bkg_Unit[1]=null
set udg_Bkg_Unit[2]=null
set udg_Bkg_Unit[3]=null
set udg_Bkg_Group=GetUnitsInRangeOfLocMatching(udg_TransformArea,udg_Bkg_Loc[0],Condition(function Trig_Bkg_Func007Func025002003))call RemoveLocation(udg_Bkg_Loc[0])set udg_Bkg_Loc[0]=nullcall ForGroupBJ(udg_Bkg_Group,function Trig_Bkg_Func007Func028A)
call DestroyGroup(udg_Bkg_Group)
set udg_Bkg_Group=nullcall EnableTrigger(gg_trg_BkgC)call EnableTrigger(gg_trg_BkgDmg)endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Bkg_Unit[0])set udg_Bkg_Unit[0]=null
endfunctionfunction InitTrig_Bkg takes nothing returns nothingset gg_trg_Bkg=CreateTrigger()call TriggerAddCondition(gg_trg_Bkg,Condition(function Trig_Bkg_Conditions))
call TriggerAddAction(gg_trg_Bkg,function Trig_Bkg_Actions)endfunctionfunction Trig_BkgC_Conditions takes nothing returns booleanreturn(GetUnitTypeId(GetDyingUnit())==udg_Bkg_Type)endfunctionfunction Trig_BkgC_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_BkgDmg)set udg_Bkg_Type=0set udg_Bkg_Own=null
set udg_Bkg_String=""set udg_Bkg_Burn=.0endfunctionfunction InitTrig_BkgC takes nothing returns nothing
set gg_trg_BkgC=CreateTrigger()call DisableTrigger(gg_trg_BkgC)
call TriggerAddCondition(gg_trg_BkgC,Condition(function Trig_BkgC_Conditions))call TriggerAddAction(gg_trg_BkgC,function Trig_BkgC_Actions)endfunctionfunction Trig_BkgAdd_Conditions takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==udg_Bkg_Type)and(IsUnitInGroup(GetTriggerUnit(),udg_Bkg_Group2)==false)
endfunctionfunction Bkg_SlotCheck takes nothing returns boolean
return udg_Bkg_Slot>'d'endfunctionfunction Bkg_DmgCond takes nothing returns booleanreturn GetUnitTypeId(GetEventDamageSource())==udg_Bkg_Type and IsUnitIllusion(GetEventDamageSource())==false
endfunctionfunction Bkg_MPCheck takes real MP returns booleanreturn(MP>.0)endfunctionfunction Bkg_DmgAct takes nothing returns nothinglocal unit Bkg_U=GetTriggerUnit()local real Bkg_MP=GetUnitStateSwap(UNIT_STATE_MANA,Bkg_U)if(Bkg_MPCheck(Bkg_MP))thencall SetUnitManaBJ(Bkg_U,(Bkg_MP-udg_Bkg_Burn))endifcall DestroyEffect(AddSpecialEffectTarget(udg_Bkg_String,Bkg_U,"origin"))set Bkg_U=nullset Bkg_MP=.0endfunctionfunction Trig_BkgAdd_Actions takes nothing returns nothinglocal unit Bkg_Attacked=GetTriggerUnit()
local integer Slot=udg_Bkg_Slotlocal triggercondition trgCondlocal triggeraction trgActset udg_Bkg_Slot=(udg_Bkg_Slot+1)if(Bkg_SlotCheck())thenset udg_Bkg_Slot=0endifcall GroupAddUnit(udg_Bkg_Group2,Bkg_Attacked)set udg_Bkg_Trig[Slot]=CreateTrigger()set trgCond=TriggerAddCondition(udg_Bkg_Trig[Slot],Condition(function Bkg_DmgCond))set trgAct=TriggerAddAction(udg_Bkg_Trig[Slot],function Bkg_DmgAct)call TriggerRegisterUnitEvent(udg_Bkg_Trig[Slot],Bkg_Attacked,EVENT_UNIT_DAMAGED)call TriggerSleepAction(.12)
call TriggerRemoveAction(udg_Bkg_Trig[Slot],trgAct)call TriggerRemoveCondition(udg_Bkg_Trig[Slot],trgCond)call DestroyTrigger(udg_Bkg_Trig[Slot])set trgAct=nullset trgCond=null
set udg_Bkg_Trig[Slot]=nullcall GroupRemoveUnit(udg_Bkg_Group2,Bkg_Attacked)set Slot=0endfunctionfunction InitTrig_BkgDmg takes nothing returns nothingset gg_trg_BkgDmg=CreateTrigger()call DisableTrigger(gg_trg_BkgDmg)call TriggerRegisterAnyUnitEventBJ(gg_trg_BkgDmg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_BkgDmg,Condition(function Trig_BkgAdd_Conditions))call TriggerAddAction(gg_trg_BkgDmg,function Trig_BkgAdd_Actions)endfunctionfunction Trig_Hns_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07N')endfunctionfunction Trig_Hns_Func018C takes nothing returns boolean
return(GetUnitTypeId(udg_Hns_Unit[0])=='U007')endfunctionfunction Trig_Hns_Func038C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Hns_Unit[0]))endfunctionfunction Trig_Hns_Actions takes nothing returns nothingset udg_Hns_Unit[0]=GetTriggerUnit()
set udg_Hns_Own=GetOwningPlayer(udg_Hns_Unit[0])
set udg_Hns_Type[0]='h06H'call PauseSystem(udg_Hns_Unit[0],true)call SetUnitAnimation(udg_Hns_Unit[0],"spell looping")set udg_Hns_Loc=GetUnitLoc(udg_Hns_Unit[0])call CreateNUnitsAtLoc(1,'h06Q',udg_Hns_Own,udg_Hns_Loc,bj_UNIT_FACING)set udg_Hns_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06G',udg_Hns_Own,udg_Hns_Loc,GetRandomReal(0,360))set udg_Hns_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02R',udg_Hns_Own,udg_Hns_Loc,GetRandomReal(0,360))set udg_Hns_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06D',udg_Hns_Own,udg_Hns_Loc,bj_UNIT_FACING)set udg_Hns_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Hns_Loc)
set udg_Hns_Loc=null
if(Trig_Hns_Func018C())thencall UnitAddAbility(udg_Hns_Unit[1],'A07Q')endifcall SetUnitTimeScalePercent(udg_Hns_Unit[1],.0)
call SetUnitScalePercent(udg_Hns_Unit[4],500.,500.,500.)
call SetUnitVertexColorBJ(udg_Hns_Unit[4],10.,'d',10.,0)
call UnitApplyTimedLifeBJ(3.5,'BTLF',udg_Hns_Unit[4])set udg_Hns_Unit[4]=null
call SetUnitTimeScalePercent(udg_Hns_Unit[0],200.)call SetUnitVertexColorBJ(udg_Hns_Unit[0],'d','d','d',100.)call UnitAddAbility(udg_Hns_Unit[3],'A07O')call DisplayText("Hakke Hyaku Nijuhachi Sho",udg_Hns_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Neji\\128Palms.wav",GetUnitX(udg_Hns_Unit[0]),GetUnitY(udg_Hns_Unit[0]))set udg_Hns_Int[0]=40set udg_Hns_Int[1]=0
set udg_Hns_Real[0]=((768.+((12.+I2R(GetUnitAbilityLevelSwapped('A07N',udg_Hns_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Hns_Unit[0],true))))/ I2R(udg_Hns_Int[0]))
set udg_Hns_Real[1]=700.
set udg_Hns_Bool=truecall SelectUnitForPlayerSingle(udg_Hns_Unit[3],udg_Hns_Own)call EnableTrigger(gg_trg_HnsL)call EnableTrigger(gg_trg_HnsC)call TriggerSleepAction(.1)if(Trig_Hns_Func038C())thencall SetUnitTimeScalePercent(udg_Hns_Unit[1],.0)
set udg_Hns_Loc2=GetUnitLoc(udg_Hns_Unit[0])
call SetUnitPositionLoc(udg_Hns_Unit[1],udg_Hns_Loc2)call SetUnitPositionLoc(udg_Hns_Unit[2],udg_Hns_Loc2)call SetUnitPositionLoc(udg_Hns_Unit[3],udg_Hns_Loc2)call RemoveLocation(udg_Hns_Loc2)set udg_Hns_Loc2=nullendifendfunctionfunction InitTrig_Hns takes nothing returns nothingset gg_trg_Hns=CreateTrigger()call TriggerAddCondition(gg_trg_Hns,Condition(function Trig_Hns_Conditions))
call TriggerAddAction(gg_trg_Hns,function Trig_Hns_Actions)endfunctionfunction Trig_HnsL_Func001Func017C takes nothing returns boolean
return(udg_Hns_Int[1]==3)endfunctionfunction Trig_HnsL_Func001Func018002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Hns_Own))
endfunctionfunction Trig_HnsL_Func001Func018002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HnsL_Func001Func018002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HnsL_Func001Func018002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HnsL_Func001Func018002003002001(),Trig_HnsL_Func001Func018002003002002())endfunctionfunction Trig_HnsL_Func001Func018002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HnsL_Func001Func018002003001(),Trig_HnsL_Func001Func018002003002())endfunctionfunction Trig_HnsL_Func001Func021A takes nothing returns nothing
local unit U=GetEnumUnit()call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",U,"chest"))
call UnitPureDamageTarget(udg_Hns_Unit[0],U,udg_Hns_Real[0])
set U=nullendfunctionfunction Trig_HnsL_Func001C takes nothing returns booleanreturn(udg_Hns_Bool)and(udg_Hns_Int[0]>0)and(IsUnitAliveBJ(udg_Hns_Unit[0]))
endfunctionfunction Trig_HnsL_Actions takes nothing returns nothing
if(Trig_HnsL_Func001C())then
set udg_Hns_Int[0]=(udg_Hns_Int[0]-1)call SetUnitAnimation(udg_Hns_Unit[0],"attack")set udg_Hns_Real[2]=GetRandomReal(0,360)
set udg_Hns_Real[3]=GetRandomReal(0,360)
set udg_Hns_Loc=GetUnitLoc(udg_Hns_Unit[0])call CreateNUnitsAtLoc(1,udg_Hns_Type[0],udg_Hns_Own,udg_Hns_Loc,udg_Hns_Real[2])set udg_Hns_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,udg_Hns_Type[0],udg_Hns_Own,udg_Hns_Loc,udg_Hns_Real[3])set udg_Hns_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,udg_Hns_Type[0],udg_Hns_Own,udg_Hns_Loc,GetRandomReal(0,360))set udg_Hns_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06I',udg_Hns_Own,udg_Hns_Loc,udg_Hns_Real[2])
set udg_Hns_Unit[7]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06I',udg_Hns_Own,udg_Hns_Loc,udg_Hns_Real[3])
set udg_Hns_Unit[8]=bj_lastCreatedUnitif(Trig_HnsL_Func001Func017C())thencall CreateNUnitsAtLoc(1,'h01L',udg_Hns_Own,udg_Hns_Loc,GetRandomReal(0,360))set udg_Hns_Unit[9]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Hns_Unit[9],500.,500.,500.)
call SetUnitVertexColorBJ(udg_Hns_Unit[9],10.,'d',10.,0)
call UnitApplyTimedLifeBJ(1.2,'BTLF',udg_Hns_Unit[9])set udg_Hns_Unit[9]=null
set udg_Hns_Int[1]=0
else
set udg_Hns_Int[1]=(udg_Hns_Int[1]+1)endifset udg_Hns_Group=GetUnitsInRangeOfLocMatching(udg_Hns_Real[1],udg_Hns_Loc,Condition(function Trig_HnsL_Func001Func018002003))call RemoveLocation(udg_Hns_Loc)
set udg_Hns_Loc=null
call ForGroupBJ(udg_Hns_Group,function Trig_HnsL_Func001Func021A)call DestroyGroup(udg_Hns_Group)
set udg_Hns_Group=nullcall UnitApplyTimedLifeBJ(.2,'BTLF',udg_Hns_Unit[4])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Hns_Unit[5])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Hns_Unit[6])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Hns_Unit[7])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Hns_Unit[8])
call SetUnitVertexColorBJ(udg_Hns_Unit[4],'d','d','d',40.)call SetUnitVertexColorBJ(udg_Hns_Unit[5],'d','d','d',40.)call SetUnitVertexColorBJ(udg_Hns_Unit[6],'d','d','d',40.)call SetUnitAnimation(udg_Hns_Unit[4],"attack")call SetUnitAnimation(udg_Hns_Unit[5],"attack")call SetUnitAnimation(udg_Hns_Unit[6],"attack")call SetUnitTimeScalePercent(udg_Hns_Unit[4],130.)call SetUnitTimeScalePercent(udg_Hns_Unit[5],130.)call SetUnitTimeScalePercent(udg_Hns_Unit[6],130.)call SetUnitTimeScalePercent(udg_Hns_Unit[7],140.)call SetUnitTimeScalePercent(udg_Hns_Unit[8],140.)set udg_Hns_Unit[4]=null
set udg_Hns_Unit[5]=null
set udg_Hns_Unit[6]=null
set udg_Hns_Unit[7]=null
set udg_Hns_Unit[8]=null
else
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_HnsC)
call GroupClear(udg_Hns_Group2)call SelectUnitForPlayerSingle(udg_Hns_Unit[0],udg_Hns_Own)set udg_Hns_Own=null
call QueueUnitAnimation(udg_Hns_Unit[0],"stand")
call PauseSystem(udg_Hns_Unit[0],false)call SetUnitTimeScalePercent(udg_Hns_Unit[0],100.)call SetUnitVertexColorBJ(udg_Hns_Unit[0],'d','d','d',.0)call RemoveUnit(udg_Hns_Unit[1])
call RemoveUnit(udg_Hns_Unit[2])
call RemoveUnit(udg_Hns_Unit[3])
set udg_Hns_Unit[0]=null
set udg_Hns_Unit[1]=null
set udg_Hns_Unit[2]=null
set udg_Hns_Unit[3]=null
set udg_Hns_Type[0]=0set udg_Hns_Real[0]=.0set udg_Hns_Real[1]=.0set udg_Hns_Real[2]=.0set udg_Hns_Real[3]=.0set udg_Hns_Int[0]=0
set udg_Hns_Int[1]=0
set udg_Hns_Bool=falseendifendfunctionfunction InitTrig_HnsL takes nothing returns nothing
set gg_trg_HnsL=CreateTrigger()call DisableTrigger(gg_trg_HnsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HnsL,.1)call TriggerAddAction(gg_trg_HnsL,function Trig_HnsL_Actions)endfunctionfunction Trig_HnsC_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07O')endfunctionfunction Trig_HnsC_Actions takes nothing returns nothing
set udg_Hns_Bool=falseendfunctionfunction InitTrig_HnsC takes nothing returns nothing
set gg_trg_HnsC=CreateTrigger()call DisableTrigger(gg_trg_HnsC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HnsC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_HnsC,Condition(function Trig_HnsC_Conditions))call TriggerAddAction(gg_trg_HnsC,function Trig_HnsC_Actions)endfunctionfunction Trig_Etp_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07P')endfunctionfunction Trig_Etp_Func022C takes nothing returns boolean
return(GetUnitTypeId(udg_Etp_Unit[0])=='U007')endfunctionfunction Trig_Etp_Actions takes nothing returns nothingset udg_Etp_Unit[0]=GetTriggerUnit()
set udg_Etp_Unit[1]=GetSpellTargetUnit()
call SetUnitInvulnerable(udg_Etp_Unit[0],true)call SetUnitInvulnerable(udg_Etp_Unit[1],true)call PauseSystem(udg_Etp_Unit[0],true)call PauseSystem(udg_Etp_Unit[1],true)set udg_Etp_Own=GetOwningPlayer(udg_Etp_Unit[0])
set udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[0])call CreateNUnitsAtLoc(1,'h06G',udg_Etp_Own,udg_Etp_Loc[0],bj_UNIT_FACING)set udg_Etp_Unit[2]=bj_lastCreatedUnitset udg_Etp_Loc[1]=GetUnitLoc(udg_Etp_Unit[1])set udg_Etp_Real[0]=AngleBetweenPoints(udg_Etp_Loc[0],udg_Etp_Loc[1])call RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall RemoveLocation(udg_Etp_Loc[1])set udg_Etp_Loc[1]=nullcall UnitAddAbility(udg_Etp_Unit[0],'A07I')call SetUnitAnimation(udg_Etp_Unit[0],"spell looping")call SetUnitPathing(udg_Etp_Unit[0],false)call SetUnitPathing(udg_Etp_Unit[1],false)if(Trig_Etp_Func022C())thencall UnitAddAbility(udg_Etp_Unit[2],'A07Q')endifset udg_Etp_Real[1]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A07P',udg_Etp_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Etp_Unit[0],false))))set udg_Etp_Real[2]=(udg_Etp_Real[0]+180.)set udg_Etp_Real[3]=120.
set udg_Etp_Real[4]=20.call DisplayText("Hakke Rokujuyon Sho",udg_Etp_Unit[0],.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\64Palms.mp3")call TriggerSleepAction(.6)call SetUnitTimeScalePercent(udg_Etp_Unit[0],130.)call SetUnitVertexColorBJ(udg_Etp_Unit[0],'d','d','d',40.)set udg_Etp_Int=$Ecall EnableTrigger(gg_trg_EtpL)endfunctionfunction InitTrig_Etp takes nothing returns nothingset gg_trg_Etp=CreateTrigger()call TriggerAddCondition(gg_trg_Etp,Condition(function Trig_Etp_Conditions))
call TriggerAddAction(gg_trg_Etp,function Trig_Etp_Actions)endfunctionfunction Trig_EtpL_Func002Func004C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Etp_Loc[1],PATHING_TYPE_WALKABILITY)==false)and(IsTerrainPathableBJ(udg_Etp_Loc[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_EtpL_Func002Func035C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Etp_Unit[0]))and(IsUnitAliveBJ(udg_Etp_Unit[1]))endfunctionfunction Trig_EtpL_Func002C takes nothing returns booleanreturn(udg_Etp_Int>0)and(IsUnitAliveBJ(udg_Etp_Unit[0]))and(IsUnitAliveBJ(udg_Etp_Unit[1]))endfunctionfunction Trig_EtpL_Actions takes nothing returns nothing
if(Trig_EtpL_Func002C())then
set udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[1])set udg_Etp_Loc[1]=PolarProjectionBJ(udg_Etp_Loc[0],udg_Etp_Real[3],udg_Etp_Real[2])
set udg_Etp_Loc[2]=PolarProjectionBJ(udg_Etp_Loc[0],udg_Etp_Real[4],udg_Etp_Real[0])
if(Trig_EtpL_Func002Func004C())thencall EnumDestructablesInCircleBJ(130.,udg_Etp_Loc[2],function TreeKiller)call SetUnitPositionLocFacingBJ(udg_Etp_Unit[0],udg_Etp_Loc[1],udg_Etp_Real[0])call SetUnitPositionLoc(udg_Etp_Unit[1],udg_Etp_Loc[2])endifcall CreateNUnitsAtLoc(1,'h06H',udg_Etp_Own,udg_Etp_Loc[1],(udg_Etp_Real[0]+GetRandomReal(-60.,60.)))set udg_Etp_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06H',udg_Etp_Own,udg_Etp_Loc[1],(udg_Etp_Real[0]+GetRandomReal(-60.,60.)))set udg_Etp_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h093',udg_Etp_Own,udg_Etp_Loc[2],.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall RemoveLocation(udg_Etp_Loc[1])set udg_Etp_Loc[1]=nullcall RemoveLocation(udg_Etp_Loc[2])set udg_Etp_Loc[2]=nullcall SetUnitTimeScalePercent(udg_Etp_Unit[3],130.)call SetUnitTimeScalePercent(udg_Etp_Unit[4],130.)call SetUnitVertexColorBJ(udg_Etp_Unit[3],'d','d','d',40.)call SetUnitVertexColorBJ(udg_Etp_Unit[4],'d','d','d',40.)call SetUnitAnimation(udg_Etp_Unit[3],"attack")call SetUnitAnimation(udg_Etp_Unit[4],"attack")call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Etp_Unit[3])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Etp_Unit[4])
set udg_Etp_Unit[3]=null
set udg_Etp_Unit[4]=null
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",udg_Etp_Unit[1],"origin"))call SetUnitAnimation(udg_Etp_Unit[0],"attack")set udg_Etp_Int=(udg_Etp_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_EtpL_Func002Func035C())thenset udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[0])call CreateNUnitsAtLoc(1,'h06H',udg_Etp_Own,udg_Etp_Loc[0],(udg_Etp_Real[0]+GetRandomReal(-60.,60.)))set udg_Etp_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall SetUnitAnimation(udg_Etp_Unit[0],"spell spin")call SetUnitAnimation(udg_Etp_Unit[3],"spell spin")call TriggerSleepAction(.1)call RemoveUnit(udg_Etp_Unit[3])
set udg_Etp_Unit[3]=null
set udg_Etp_Int=20call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",udg_Etp_Unit[1],"origin"))endifcall EnableTrigger(gg_trg_Etp2)endifendfunctionfunction InitTrig_EtpL takes nothing returns nothing
set gg_trg_EtpL=CreateTrigger()call DisableTrigger(gg_trg_EtpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EtpL,.16)call TriggerAddAction(gg_trg_EtpL,function Trig_EtpL_Actions)endfunctionfunction Trig_Etp2_Func001Func006C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Etp_Loc[1],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_Etp2_Func001Func015Func006Func001003 takes nothing returns nothing
call KillDestructable(GetEnumDestructable())
endfunctionfunction Trig_Etp2_Func001Func015Func006C takes nothing returns booleanreturn(IsTerrainPathableBJ(udg_Etp_Loc[1],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_Etp2_Func001Func015C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Etp_Unit[0]))and(IsUnitAliveBJ(udg_Etp_Unit[1]))endfunctionfunction Trig_Etp2_Func001C takes nothing returns booleanreturn(udg_Etp_Int>0)and(IsUnitAliveBJ(udg_Etp_Unit[0]))and(IsUnitAliveBJ(udg_Etp_Unit[1]))endfunctionfunction Trig_Etp2_Actions takes nothing returns nothing
if(Trig_Etp2_Func001C())then
set udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[1])set udg_Etp_Loc[1]=PolarProjectionBJ(udg_Etp_Loc[0],udg_Etp_Real[4],udg_Etp_Real[0])
if(Trig_Etp2_Func001Func006C())thencall EnumDestructablesInCircleBJ(130.,udg_Etp_Loc[1],function TreeKiller)call SetUnitPositionLoc(udg_Etp_Unit[1],udg_Etp_Loc[1])endifcall CreateNUnitsAtLoc(1,'h017',udg_Etp_Own,udg_Etp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall RemoveLocation(udg_Etp_Loc[1])set udg_Etp_Loc[1]=nullset udg_Etp_Int=(udg_Etp_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_Etp2_Func001Func015C())thenset udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[1])set udg_Etp_Loc[1]=PolarProjectionBJ(udg_Etp_Loc[0],udg_Etp_Real[3],udg_Etp_Real[2])
if(Trig_Etp2_Func001Func015Func006C())thencall EnumDestructablesInCircleBJ(130.,udg_Etp_Loc[1],function Trig_Etp2_Func001Func015Func006Func001003)
call SetUnitPositionLoc(udg_Etp_Unit[0],udg_Etp_Loc[1])endifcall RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall RemoveLocation(udg_Etp_Loc[1])set udg_Etp_Loc[1]=nullcall SetUnitTimeScalePercent(udg_Etp_Unit[0],170.)call SetUnitAnimation(udg_Etp_Unit[0],"attack 2")call TriggerSleepAction(.05)
set udg_Etp_Loc[0]=GetUnitLoc(udg_Etp_Unit[0])set udg_Etp_Loc[1]=PolarProjectionBJ(udg_Etp_Loc[0],45.,udg_Etp_Real[0])
call CreateNUnitsAtLoc(1,'h06K',udg_Etp_Own,udg_Etp_Loc[0],udg_Etp_Real[0])set udg_Etp_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06K',udg_Etp_Own,udg_Etp_Loc[0],udg_Etp_Real[0])set udg_Etp_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06L',udg_Etp_Own,udg_Etp_Loc[1],udg_Etp_Real[0])set udg_Etp_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h06L',udg_Etp_Own,udg_Etp_Loc[1],udg_Etp_Real[0])set udg_Etp_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h05H',udg_Etp_Own,udg_Etp_Loc[0],udg_Etp_Real[0])set udg_Etp_Unit[7]=bj_lastCreatedUnitcall Dynamic_GroupShake(GetLocationX(udg_Etp_Loc[1]),GetLocationY(udg_Etp_Loc[1]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Etp_Loc[0])set udg_Etp_Loc[0]=nullcall RemoveLocation(udg_Etp_Loc[1])set udg_Etp_Loc[1]=nullcall UnitApplyTimedLifeBJ(4.,'BTLF',udg_Etp_Unit[3])
call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Etp_Unit[4])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Etp_Unit[5])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Etp_Unit[6])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Etp_Unit[7])
call SetUnitTimeScalePercent(udg_Etp_Unit[3],20.)call SetUnitTimeScalePercent(udg_Etp_Unit[4],20.)call SetUnitTimeScalePercent(udg_Etp_Unit[5],50.)call SetUnitTimeScalePercent(udg_Etp_Unit[6],50.)call SetUnitScalePercent(udg_Etp_Unit[7],500.,500.,500.)
set udg_Etp_Unit[3]=null
set udg_Etp_Unit[4]=null
set udg_Etp_Unit[5]=null
set udg_Etp_Unit[6]=null
set udg_Etp_Unit[7]=null
endifcall RemoveUnit(udg_Etp_Unit[2])
call SetUnitVertexColorBJ(udg_Etp_Unit[0],'d','d','d',.0)call SetUnitTimeScalePercent(udg_Etp_Unit[0],'d')call UnitRemoveAbility(udg_Etp_Unit[0],'A07I')call SetUnitPathing(udg_Etp_Unit[0],true)call SetUnitPathing(udg_Etp_Unit[1],true)call SetUnitInvulnerable(udg_Etp_Unit[0],false)call SetUnitInvulnerable(udg_Etp_Unit[1],false)call PauseSystem(udg_Etp_Unit[0],false)call PauseSystem(udg_Etp_Unit[1],false)call DisplayText(I2S(R2I(udg_Etp_Real[1]))+"!",udg_Etp_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Etp_Unit[0],udg_Etp_Unit[1],udg_Etp_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Etp_Own=null
set udg_Etp_Unit[0]=null
set udg_Etp_Unit[1]=null
set udg_Etp_Unit[2]=null
set udg_Etp_Real[0]=.0set udg_Etp_Real[1]=.0set udg_Etp_Real[2]=.0set udg_Etp_Real[3]=.0set udg_Etp_Real[4]=.0set udg_Etp_Int=0endifendfunctionfunction InitTrig_Etp2 takes nothing returns nothing
set gg_trg_Etp2=CreateTrigger()call DisableTrigger(gg_trg_Etp2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Etp2,.04)call TriggerAddAction(gg_trg_Etp2,function Trig_Etp2_Actions)endfunctionfunction AIByakuya__isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIByakuya__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIByakuya__isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIByakuya__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIByakuya__Cond takes nothing returns booleanif(not(AIByakuya__isAtked()or AIByakuya__isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIByakuya__Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIByakuya__AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIByakuya__isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A082')call SelectHeroSkill(mySelf,'A07Y')call SelectHeroSkill(mySelf,'A07W')call SelectHeroSkill(mySelf,'A05J')call SelectHeroSkill(mySelf,'A05E')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueTargetOrderById(mySelf,$D00FA,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D0065,myTarget)if(isAttacking)thencall IssueTargetOrderById(mySelf,$D0208,myTarget)call IssueImmediateOrderById(mySelf,$D022E)call IssueImmediateOrder(mySelf,"Locustswarm")if(GetRandomInt(0,3)==0)then
call IssueTargetOrderById(mySelf,$D0097,myTarget)endifendifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIByakuya__AINo])
endfunctionfunction AIByakuya__Init takes nothing returns nothingset udg_AI_Trig[AIByakuya__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIByakuya__AINo],Condition(function AIByakuya__Cond))call TriggerAddAction(udg_AI_Trig[AIByakuya__AINo],function AIByakuya__Act)endfunctionfunction Trig_Tcb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05E')endfunctionfunction Trig_Tcb_Actions takes nothing returns nothingset udg_Tcb_Unit[0]=GetTriggerUnit()
set udg_Tcb_Loc[0]=GetSpellTargetLoc()set udg_Tcb_Own=GetOwningPlayer(udg_Tcb_Unit[0])
set udg_Tcb_Loc[1]=GetUnitLoc(udg_Tcb_Unit[0])set udg_Tcb_Real[0]=AngleBetweenPoints(udg_Tcb_Loc[1],udg_Tcb_Loc[0])set udg_Tcb_Loc[2]=PolarProjectionBJ(udg_Tcb_Loc[1],50.,udg_Tcb_Real[0])
call Dynamic_3D("Abilities\\Spells\\Human\\InnerFire\\InnerFireBirth.wav",GetLocationX(udg_Tcb_Loc[0]),GetLocationY(udg_Tcb_Loc[0]))
call RemoveLocation(udg_Tcb_Loc[0])set udg_Tcb_Loc[0]=nullcall RemoveLocation(udg_Tcb_Loc[1])set udg_Tcb_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h00B',udg_Tcb_Own,udg_Tcb_Loc[2],udg_Tcb_Real[0])set udg_Tcb_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Tcb_Loc[2])set udg_Tcb_Loc[2]=nullset udg_Tcb_Real[1]=BasicDmg_Q(udg_Tcb_Unit[0],'A05E',1)
set udg_Tcb_Real[2]=40.set udg_Tcb_Real[3]=300.
set udg_Tcb_Int=30set udg_Tcb_Bool=truecall DisplayText("Senbonzakura",udg_Tcb_Unit[0],.023,false,$FF,$FF,$FF,$FF)call EnableTrigger(gg_trg_TcbL)endfunctionfunction InitTrig_Tcb takes nothing returns nothingset gg_trg_Tcb=CreateTrigger()call TriggerAddCondition(gg_trg_Tcb,Condition(function Trig_Tcb_Conditions))
call TriggerAddAction(gg_trg_Tcb,function Trig_Tcb_Actions)endfunctionfunction Trig_TcbL_Func001Func006C takes nothing returns boolean
return(udg_Tcb_Bool)
endfunctionfunction Trig_TcbL_Func001Func007Func003002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Tcb_Group2)==false)
endfunctionfunction Trig_TcbL_Func001Func007Func003002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Tcb_Unit[0])))endfunctionfunction Trig_TcbL_Func001Func007Func003002003002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_TcbL_Func001Func007Func003002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_TcbL_Func001Func007Func003002003002001(),Trig_TcbL_Func001Func007Func003002003002002())endfunctionfunction Trig_TcbL_Func001Func007Func003002003 takes nothing returns boolean
return GetBooleanAnd(Trig_TcbL_Func001Func007Func003002003001(),Trig_TcbL_Func001Func007Func003002003002())endfunctionfunction Trig_TcbL_Func001Func007Func004A takes nothing returns nothingset udg_Tcb_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Tcb_Group2,udg_Tcb_Unit[2])call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",udg_Tcb_Unit[2],"chest"))call UnitDamageTargetBJ(udg_Tcb_Unit[0],udg_Tcb_Unit[2],udg_Tcb_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Tcb_Unit[2]=null
endfunctionfunction Trig_TcbL_Func001Func007C takes nothing returns boolean
return(udg_Tcb_Int>4)endfunctionfunction Trig_TcbL_Func001C takes nothing returns booleanreturn(udg_Tcb_Int>0)endfunctionfunction Trig_TcbL_Actions takes nothing returns nothing
if(Trig_TcbL_Func001C())then
set udg_Tcb_Loc[0]=GetUnitLoc(udg_Tcb_Unit[1])set udg_Tcb_Loc[1]=PolarProjectionBJ(udg_Tcb_Loc[0],udg_Tcb_Real[2],udg_Tcb_Real[0])
call RemoveLocation(udg_Tcb_Loc[0])set udg_Tcb_Loc[0]=nullcall SetUnitPositionLoc(udg_Tcb_Unit[1],udg_Tcb_Loc[1])if(Trig_TcbL_Func001Func006C())thenset udg_Tcb_Bool=falsecall CreateNUnitsAtLoc(1,'h00C',udg_Tcb_Own,udg_Tcb_Loc[1],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitTimeScalePercent(bj_lastCreatedUnit,150.)else
set udg_Tcb_Bool=trueendifif(Trig_TcbL_Func001Func007C())thenset udg_Tcb_Group=GetUnitsInRangeOfLocMatching(udg_Tcb_Real[3],udg_Tcb_Loc[1],Condition(function Trig_TcbL_Func001Func007Func003002003))
call ForGroupBJ(udg_Tcb_Group,function Trig_TcbL_Func001Func007Func004A)
call DestroyGroup(udg_Tcb_Group)
set udg_Tcb_Group=nullendifcall RemoveLocation(udg_Tcb_Loc[1])set udg_Tcb_Loc[1]=nullset udg_Tcb_Int=(udg_Tcb_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitAnimation(udg_Tcb_Unit[1],"death")call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Tcb_Unit[1])
call GroupClear(udg_Tcb_Group2)set udg_Tcb_Own=null
set udg_Tcb_Unit[0]=null
set udg_Tcb_Unit[1]=null
set udg_Tcb_Unit[2]=null
set udg_Tcb_Real[0]=.0set udg_Tcb_Real[1]=.0set udg_Tcb_Real[2]=.0set udg_Tcb_Real[3]=.0set udg_Tcb_Int=0set udg_Tcb_Bool=falseendifendfunctionfunction InitTrig_TcbL takes nothing returns nothing
set gg_trg_TcbL=CreateTrigger()call DisableTrigger(gg_trg_TcbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TcbL,.04)call TriggerAddAction(gg_trg_TcbL,function Trig_TcbL_Actions)endfunctionfunction Trig_Srl_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A05J')endfunctionfunction Trig_Srl_Func003002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),GetOwningPlayer(udg_Srl_Unit[0])))endfunctionfunction Trig_Srl_Func003002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Srl_Func003002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Srl_Func003002003002002002 takes nothing returns booleanreturn(IsUnitPaused(GetFilterUnit())==false)
endfunctionfunction Trig_Srl_Func003002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Srl_Func003002003002002001(),Trig_Srl_Func003002003002002002())endfunctionfunction Trig_Srl_Func003002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Srl_Func003002003002001(),Trig_Srl_Func003002003002002())endfunctionfunction Trig_Srl_Func003002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Srl_Func003002003001(),Trig_Srl_Func003002003002())endfunctionfunction Trig_Srl_Func006A takes nothing returns nothing
set udg_Srl_Unit[1]=GetEnumUnit()set udg_Srl_Loc=GetUnitLoc(udg_Srl_Unit[1])call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(udg_Srl_Unit[0]),udg_Srl_Loc,bj_UNIT_FACING)
set udg_Srl_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Srl_Loc)
set udg_Srl_Loc=null
call UnitAddAbility(udg_Srl_Unit[2],'A07V')call SetUnitAbilityLevelSwapped('A07V',udg_Srl_Unit[2],GetUnitAbilityLevelSwapped('A05J',udg_Srl_Unit[0]))call IssueTargetOrderById(udg_Srl_Unit[2],$D007F,udg_Srl_Unit[1])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Srl_Unit[2])
set udg_Srl_Unit[1]=null
set udg_Srl_Unit[2]=null
endfunctionfunction Trig_Srl_Actions takes nothing returns nothingset udg_Srl_Unit[0]=GetTriggerUnit()
set udg_Srl_Loc=GetSpellTargetLoc()set udg_Srl_Group=GetUnitsInRangeOfLocMatching(140.,udg_Srl_Loc,Condition(function Trig_Srl_Func003002003))call RemoveLocation(udg_Srl_Loc)
set udg_Srl_Loc=null
call ForGroupBJ(udg_Srl_Group,function Trig_Srl_Func006A)call DestroyGroup(udg_Srl_Group)
set udg_Srl_Group=nullcall DisplayText("Bakudo #61. Rikujokoro",udg_Srl_Unit[0],.023,false,$FF,$FF,$FF,$FF)set udg_Srl_Unit[0]=null
endfunctionfunction InitTrig_Srl takes nothing returns nothingset gg_trg_Srl=CreateTrigger()call TriggerAddCondition(gg_trg_Srl,Condition(function Trig_Srl_Conditions))
call TriggerAddAction(gg_trg_Srl,function Trig_Srl_Actions)endfunctionfunction SenbonzakuraKageyoshi__GetAllZakura takes player p returns grouplocal group g=CreateGroup()local group g2set g2=CreateGroupUnitType('u009',p)
call GroupAddGroup(g2,g)
call DestroyGroup(g2)set g2=nullset g2=CreateGroupUnitType('u004',p)
call GroupAddGroup(g2,g)
call DestroyGroup(g2)set g2=nullset g2=CreateGroupUnitType('u00S',p)
call GroupAddGroup(g2,g)
call DestroyGroup(g2)set g2=nullreturn g
endfunctionfunction SenbonzakuraKageyoshi__GokeiCond takes nothing returns booleanreturn(GetSpellAbilityId()==SenbonzakuraKageyoshi__GokeiskId)endfunctionfunction SenbonzakuraKageyoshi__GokeiActL takes nothing returns nothinglocal player plocal real array xlocal real array ylocal real array rlocal integer ilocal integer jset i=0set x[0]=GetUnitX(SenbonzakuraKageyoshi__GokeiUnit[1])set y[0]=GetUnitY(SenbonzakuraKageyoshi__GokeiUnit[1])if(SenbonzakuraKageyoshi__GokeiI>0)and(GetUnitState(SenbonzakuraKageyoshi__GokeiUnit[1],UNIT_STATE_LIFE)>0)thenset SenbonzakuraKageyoshi__GokeiI=SenbonzakuraKageyoshi__GokeiI-1set j=0loop
exitwhen(SenbonzakuraKageyoshi__GokeiMax<i)if(SenbonzakuraKageyoshi__GokeiDummy[i]!=null)thenset x[1]=GetUnitX(SenbonzakuraKageyoshi__GokeiDummy[i])set y[1]=GetUnitY(SenbonzakuraKageyoshi__GokeiDummy[i])set r[0]=AngleBetweenXY(x[1],y[1],x[0],y[0])
set x[1]=PolarX(x[1],SenbonzakuraKageyoshi__GokeiSpeed,r[0])
set y[1]=PolarY(y[1],SenbonzakuraKageyoshi__GokeiSpeed,r[0])
if(DistanceBetweenXY(x[0],x[0],x[1],x[1])<=SenbonzakuraKageyoshi__GokeiSpeed)thencall RemoveUnit(SenbonzakuraKageyoshi__GokeiDummy[i])set SenbonzakuraKageyoshi__GokeiDummy[i]=nullelse
call SetUnitX(SenbonzakuraKageyoshi__GokeiDummy[i],x[1])
call SetUnitY(SenbonzakuraKageyoshi__GokeiDummy[i],y[1])
endifelse
set j=j+1endifset i=i+1endloopif(j>=$A)thenset SenbonzakuraKageyoshi__GokeiI=-1
endifelse
call PauseTimer(SenbonzakuraKageyoshi__GokeiTimer)call DestroyTimer(SenbonzakuraKageyoshi__GokeiTimer)
set SenbonzakuraKageyoshi__GokeiTimer=nullloop
exitwhen(SenbonzakuraKageyoshi__GokeiMax<i)if(SenbonzakuraKageyoshi__GokeiDummy[i]!=null)thencall RemoveUnit(SenbonzakuraKageyoshi__GokeiDummy[i])set SenbonzakuraKageyoshi__GokeiDummy[i]=nullendifset i=i+1endloopset p=GetOwningPlayer(SenbonzakuraKageyoshi__GokeiUnit[0])if(SenbonzakuraKageyoshi__GokeiI==(-1))and(GetUnitState(SenbonzakuraKageyoshi__GokeiUnit[1],UNIT_STATE_LIFE)>0)thenset bj_lastCreatedUnit=CreateUnit(p,'h07I',x[0],y[0],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h07I',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h00P',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h00E',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)set bj_lastCreatedUnit=CreateUnit(p,'h00E',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)set r[0]=150.set i=0loop
exitwhen(8<i)set r[2]=I2R(45*i)set x[1]=PolarX(x[0],r[0],r[2])set y[1]=PolarY(y[0],r[0],r[2])set bj_lastCreatedUnit=CreateUnit(p,'h0ED',x[1],y[1],r[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.1)call SetUnitAnimation(bj_lastCreatedUnit,"death")set bj_lastCreatedUnit=CreateUnit(p,'h00Q',x[1],y[1],r[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set i=i+1endloopcall UnitDamageTarget(SenbonzakuraKageyoshi__GokeiUnit[0],SenbonzakuraKageyoshi__GokeiUnit[1],I2R(8*GetHeroAgi(SenbonzakuraKageyoshi__GokeiUnit[0],true)),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifset SenbonzakuraKageyoshi__GokeiUnit[0]=null
set SenbonzakuraKageyoshi__GokeiUnit[1]=null
set p=nullendifendfunctionfunction SenbonzakuraKageyoshi__GokeiAct takes nothing returns nothinglocal real array xlocal real array ylocal real array rlocal player pset SenbonzakuraKageyoshi__GokeiUnit[0]=GetTriggerUnit()
set SenbonzakuraKageyoshi__GokeiUnit[1]=GetSpellTargetUnit()
set p=GetOwningPlayer(SenbonzakuraKageyoshi__GokeiUnit[0])call DisplayText("Gokei",SenbonzakuraKageyoshi__GokeiUnit[0],.023,true,$FF,$FF,$FF,$FF)call UnitRemoveAbility(SenbonzakuraKageyoshi__GokeiUnit[0],SenbonzakuraKageyoshi__skBuff)set x[0]=GetUnitX(SenbonzakuraKageyoshi__GokeiUnit[1])set y[0]=GetUnitY(SenbonzakuraKageyoshi__GokeiUnit[1])set r[0]=700.set r[1]=I2R(360/ SenbonzakuraKageyoshi__GokeiMax)set SenbonzakuraKageyoshi__GokeiI=0loop
exitwhen(SenbonzakuraKageyoshi__GokeiMax<SenbonzakuraKageyoshi__GokeiI)set r[2]=(I2R(SenbonzakuraKageyoshi__GokeiI)*r[1])set x[1]=PolarX(x[0],r[0],r[2])set y[1]=PolarY(y[0],r[0],r[2])set SenbonzakuraKageyoshi__GokeiDummy[SenbonzakuraKageyoshi__GokeiI]=CreateUnit(p,'h00B',x[1],y[1],AngleBetweenXY(x[1],y[1],x[0],y[0]))set SenbonzakuraKageyoshi__GokeiI=SenbonzakuraKageyoshi__GokeiI+1endloopset SenbonzakuraKageyoshi__GokeiI='x'set SenbonzakuraKageyoshi__GokeiTimer=CreateTimer()call TimerStart(SenbonzakuraKageyoshi__GokeiTimer,.04,true,function SenbonzakuraKageyoshi__GokeiActL)set p=nullendfunctionfunction SenbonzakuraKageyoshi__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==SenbonzakuraKageyoshi__skId)
endfunctionfunction SenbonzakuraKageyoshi__TimerAct takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit pickedlocal group gcall PauseTimer(t)call DestroyTimer(t)
set t=nullset g=SenbonzakuraKageyoshi__GetAllZakura(SenbonzakuraKageyoshi__pTemp)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call SetUnitPathing(picked,false)call SetUnitFly(picked)call SetUnitFlyHeight(picked,150.,800.)endloopcall DestroyGroup(g)
set g=nullset SenbonzakuraKageyoshi__pTemp=nullendfunctionfunction SenbonzakuraKageyoshi__Act takes nothing returns nothinglocal unit array ulocal player plocal group glocal group gdummylocal real garea
local real array xlocal real array ylocal real array rlocal real delay
local real dmglocal integer ilocal integer skArmorlocal integer skBook
local timer tset u[0]=GetTriggerUnit()set skArmor='A07X'set skBook='A0EF'set p=GetOwningPlayer(u[0])set SenbonzakuraKageyoshi__pTemp=pset garea=1000.set dmg=(GetHeroAgi(u[0],true)*5.)call DisplayText("Bankai: Senbonzakura Kageyoshi !",u[0],.023,true,$FF,$FF,$FF,$FF)set t=CreateTimer()call TimerStart(t,2.,false,function SenbonzakuraKageyoshi__TimerAct)
set t=nullset x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set r[0]=GetUnitFacing(u[0])
call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Byakuya\\Bankai.wav",x[0],y[0])set bj_lastCreatedUnit=CreateUnit(p,'h06O',x[0],y[0],bj_UNIT_FACING)
call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,skArmor)call SetUnitAbilityLevel(bj_lastCreatedUnit,skArmor,GetUnitAbilityLevel(u[0],SenbonzakuraKageyoshi__skId))call IssueTargetOrderById(bj_lastCreatedUnit,$D0062,u[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call UnitAddAbility(u[0],skBook)
set g=CreateGroupXY(x[0],y[0],garea,p)loop
set u[1]=FirstOfGroup(g)
exitwhen(u[1]==null)
call GroupRemoveUnit(g,u[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdx",u[1],"origin"))
call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endloopcall DestroyGroup(g)
set g=nullset r[1]=150.set r[2]=r[0]+90.set x[1]=PolarX(x[0],r[1],r[2])set y[1]=PolarY(y[0],r[1],r[2])set r[3]=r[0]-90.set x[2]=PolarX(x[0],r[1],r[3])set y[2]=PolarY(y[0],r[1],r[3])set r[1]=(-100.)
set gdummy=CreateGroup()
set delay=.06set i=0loop
exitwhen(i>5)set i=i+1set x[1]=PolarX(x[1],r[1],r[0])set y[1]=PolarY(y[1],r[1],r[0])set bj_lastCreatedUnit=CreateUnit(p,'h03Y',x[1],y[1],r[2])call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h06M',x[1],y[1],r[2])call SetUnitFlyHeight(bj_lastCreatedUnit,.0,600.)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call GroupAddUnit(gdummy,bj_lastCreatedUnit)
set x[2]=PolarX(x[2],r[1],r[0])set y[2]=PolarY(y[2],r[1],r[0])set bj_lastCreatedUnit=CreateUnit(p,'h03Y',x[2],y[2],r[3])call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h06M',x[2],y[2],r[3])call SetUnitFlyHeight(bj_lastCreatedUnit,.0,600.)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call GroupAddUnit(gdummy,bj_lastCreatedUnit)
call TriggerSleepAction(delay)endloopif(GetUnitAbilityLevel(u[0],SenbonzakuraKageyoshi__skBuff)>0)thencall TriggerSleepAction(2.)call SetPlayerAbilityAvailable(p,SenbonzakuraKageyoshi__skId,false)call UnitAddAbility(u[0],SenbonzakuraKageyoshi__GokeiskId)endifloop
set u[1]=FirstOfGroup(gdummy)exitwhen(u[1]==null)
call GroupRemoveUnit(gdummy,u[1])call RemoveUnit(u[1])set bj_lastCreatedUnit=CreateUnit(p,'h06N',GetUnitX(u[1]),GetUnitY(u[1]),r[0])call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h06N',GetUnitX(u[1]),GetUnitY(u[1]),r[0])call SetUnitFlyHeight(bj_lastCreatedUnit,200.,.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h06N',GetUnitX(u[1]),GetUnitY(u[1]),r[0])call SetUnitFlyHeight(bj_lastCreatedUnit,300.,.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endloopcall DestroyGroup(gdummy)set gdummy=nullset delay=.06set i=5loop
exitwhen(GetUnitAbilityLevel(u[0],SenbonzakuraKageyoshi__skBuff)<1)call TriggerSleepAction(delay)endloopset g=SenbonzakuraKageyoshi__GetAllZakura(p)
loop
set u[1]=FirstOfGroup(g)
exitwhen(u[1]==null)
call GroupRemoveUnit(g,u[1])
call SetUnitAnimation(u[1],"death")call UnitApplyTimedLife(u[1],'BTLF',1.)endloopcall DestroyGroup(g)
set g=nullcall UnitRemoveAbility(u[0],skBook)call UnitRemoveAbility(u[0],SenbonzakuraKageyoshi__GokeiskId)call SetPlayerAbilityAvailable(p,SenbonzakuraKageyoshi__skId,true)set u[0]=nullset p=nullendfunctionfunction SenbonzakuraKageyoshi__Init takes nothing returns nothingset gg_trg_Senbonzakura_Kageyoshi=CreateTrigger()call TriggerAddCondition(gg_trg_Senbonzakura_Kageyoshi,Condition(function SenbonzakuraKageyoshi__Cond))call TriggerAddAction(gg_trg_Senbonzakura_Kageyoshi,function SenbonzakuraKageyoshi__Act)
set Byakuya_Gokei=CreateTrigger()call TriggerAddCondition(Byakuya_Gokei,Condition(function SenbonzakuraKageyoshi__GokeiCond))
call TriggerAddAction(Byakuya_Gokei,function SenbonzakuraKageyoshi__GokeiAct)endfunctionfunction Trig_Anl_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A07Y')endfunctionfunction Trig_Anl_Actions takes nothing returns nothingset udg_Anl_Unit[0]=GetTriggerUnit()
set udg_Anl_Lv=GetUnitAbilityLevelSwapped('A07Y',udg_Anl_Unit[0])set udg_Anl_Own=GetOwningPlayer(udg_Anl_Unit[0])
set udg_Anl_Type='h06P'set udg_Anl_Real[0]=700.
set udg_Anl_Real[1]=18.set udg_Anl_Int[1]=20call DisplayText("Senkei",udg_Anl_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Byakuya\\Senkei.wav",GetUnitX(udg_Anl_Unit[0]),GetUnitY(udg_Anl_Unit[0]))
set udg_Anl_Skill='A07Z'
call UnitAddAbility(udg_Anl_Unit[0],udg_Anl_Skill)call SetUnitAbilityLevelSwapped(udg_Anl_Skill,udg_Anl_Unit[0],udg_Anl_Lv)set udg_Anl_Loc[0]=GetUnitLoc(udg_Anl_Unit[0])call CreateNUnitsAtLoc(1,'h06Q',udg_Anl_Own,udg_Anl_Loc[0],bj_UNIT_FACING)set udg_Anl_Unit[1]=bj_lastCreatedUnitcall UnitAddAbility(udg_Anl_Unit[1],'A080')call SetUnitAbilityLevelSwapped('A080',udg_Anl_Unit[1],udg_Anl_Lv)call UnitAddAbility(udg_Anl_Unit[1],'A081')call SetUnitTimeScalePercent(udg_Anl_Unit[1],.0)
set udg_Anl_Int[0]=1
loop
exitwhen udg_Anl_Int[0]>udg_Anl_Int[1]set udg_Anl_Loc[1]=PolarProjectionBJ(udg_Anl_Loc[0],udg_Anl_Real[0],(I2R(udg_Anl_Int[0])*udg_Anl_Real[1]))call CreateNUnitsAtLocFacingLocBJ(1,udg_Anl_Type,udg_Anl_Own,udg_Anl_Loc[1],udg_Anl_Loc[0])call GroupAddUnit(udg_Anl_Group1,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h06Q',udg_Anl_Own,udg_Anl_Loc[1],bj_UNIT_FACING)set udg_Anl_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Anl_Loc[1])set udg_Anl_Loc[1]=nullcall GroupAddUnit(udg_Anl_GroupHakke,udg_Anl_Unit[2])call SetUnitTimeScalePercent(udg_Anl_Unit[2],.0)
call SetUnitScalePercent(udg_Anl_Unit[2],30.,30.,30.)set udg_Anl_Unit[2]=null
set udg_Anl_Int[0]=udg_Anl_Int[0]+1endloopcall RemoveLocation(udg_Anl_Loc[0])set udg_Anl_Loc[0]=nullset udg_Anl_Loc[0]=GetUnitLoc(udg_Anl_Unit[0])set udg_Anl_Int[0]=1
loop
exitwhen udg_Anl_Int[0]>udg_Anl_Int[1]set udg_Anl_Loc[1]=PolarProjectionBJ(udg_Anl_Loc[0],450.,(I2R(udg_Anl_Int[0])*udg_Anl_Real[1]))call CreateNUnitsAtLoc(1,'h06Q',udg_Anl_Own,udg_Anl_Loc[1],bj_UNIT_FACING)set udg_Anl_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Anl_Loc[1])set udg_Anl_Loc[1]=nullcall GroupAddUnit(udg_Anl_GroupHakke,udg_Anl_Unit[2])call SetUnitTimeScalePercent(udg_Anl_Unit[2],.0)
call SetUnitScalePercent(udg_Anl_Unit[2],30.,30.,30.)set udg_Anl_Unit[2]=null
set udg_Anl_Int[0]=udg_Anl_Int[0]+1endloopcall RemoveLocation(udg_Anl_Loc[0])set udg_Anl_Loc[0]=nullset udg_Anl_Loc[0]=GetUnitLoc(udg_Anl_Unit[0])set udg_Anl_Int[0]=1
loop
exitwhen udg_Anl_Int[0]>udg_Anl_Int[1]set udg_Anl_Loc[1]=PolarProjectionBJ(udg_Anl_Loc[0],udg_Anl_Real[0],(I2R(udg_Anl_Int[0])*udg_Anl_Real[1]))call CreateNUnitsAtLocFacingLocBJ(1,udg_Anl_Type,udg_Anl_Own,udg_Anl_Loc[1],udg_Anl_Loc[0])set udg_Anl_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Anl_Loc[1])set udg_Anl_Loc[1]=nullcall SetUnitFlyHeight(udg_Anl_Unit[2],320.,.0)call GroupAddUnit(udg_Anl_Group2,udg_Anl_Unit[2])set udg_Anl_Unit[2]=null
set udg_Anl_Int[0]=udg_Anl_Int[0]+1endloopcall RemoveLocation(udg_Anl_Loc[0])set udg_Anl_Loc[0]=nullset udg_Anl_Loc[0]=GetUnitLoc(udg_Anl_Unit[0])set udg_Anl_Int[0]=1
loop
exitwhen udg_Anl_Int[0]>udg_Anl_Int[1]set udg_Anl_Loc[1]=PolarProjectionBJ(udg_Anl_Loc[0],udg_Anl_Real[0],(I2R(udg_Anl_Int[0])*udg_Anl_Real[1]))call CreateNUnitsAtLocFacingLocBJ(1,udg_Anl_Type,udg_Anl_Own,udg_Anl_Loc[1],udg_Anl_Loc[0])set udg_Anl_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Anl_Loc[1])set udg_Anl_Loc[1]=nullcall SetUnitFlyHeight(udg_Anl_Unit[2],600.,.0)call GroupAddUnit(udg_Anl_Group1,udg_Anl_Unit[2])set udg_Anl_Unit[2]=null
set udg_Anl_Int[0]=udg_Anl_Int[0]+1endloopset udg_Anl_Rect=RectFromCenterSizeBJ(udg_Anl_Loc[0],1300.,1300.)call RemoveLocation(udg_Anl_Loc[0])set udg_Anl_Loc[0]=nullset udg_Anl_Type=0set udg_Anl_Real[0]=.0set udg_Anl_Real[1]=.0set udg_Anl_Int[1]=$DCset udg_Anl_Buff[0]='B01J'set udg_Anl_Buff[1]='B01K'call EnableTrigger(gg_trg_AnlL)call TriggerExecute(gg_trg_AnlE)
endfunctionfunction InitTrig_Anl takes nothing returns nothingset gg_trg_Anl=CreateTrigger()call TriggerAddCondition(gg_trg_Anl,Condition(function Trig_Anl_Conditions))
call TriggerAddAction(gg_trg_Anl,function Trig_Anl_Actions)endfunctionfunction Trig_AnlL_Func001Func007A takes nothing returns nothing
set udg_Anl_Unit[2]=GetEnumUnit()call RemoveUnit(udg_Anl_Unit[2])
set udg_Anl_Unit[2]=null
endfunctionfunction Trig_AnlL_Func001Func014A takes nothing returns nothing
set udg_Anl_Unit[2]=GetEnumUnit()call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Anl_Unit[2])
call SetUnitTimeScalePercent(udg_Anl_Unit[2],70.)set udg_Anl_Unit[2]=null
endfunctionfunction Trig_AnlL_Func001Func019002003 takes nothing returns booleanreturn(UnitHasBuffBJ(GetFilterUnit(),udg_Anl_Buff[0]))endfunctionfunction Trig_AnlL_Func001Func022A takes nothing returns nothing
set udg_Anl_Unit[2]=GetEnumUnit()call UnitRemoveAbility(udg_Anl_Unit[2],udg_Anl_Buff[0])call UnitRemoveAbility(udg_Anl_Unit[2],udg_Anl_Buff[1])set udg_Anl_Unit[2]=null
endfunctionfunction Trig_AnlL_Func001C takes nothing returns booleanreturn(udg_Anl_Int[1]>0)
endfunctionfunction Trig_AnlL_Actions takes nothing returns nothing
if(Trig_AnlL_Func001C())then
set udg_Anl_Int[1]=(udg_Anl_Int[1]-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Anl_Group=CreateGroup()call GroupAddGroup(udg_Anl_Group1,udg_Anl_Group)
call GroupAddGroup(udg_Anl_Group2,udg_Anl_Group)
call ForGroupBJ(udg_Anl_Group,function Trig_AnlL_Func001Func007A)call DestroyGroup(udg_Anl_Group)
set udg_Anl_Group=nullcall GroupClear(udg_Anl_Group1)call GroupClear(udg_Anl_Group2)set udg_Anl_Group=CreateGroup()call GroupAddGroup(udg_Anl_GroupHakke,udg_Anl_Group)
call ForGroupBJ(udg_Anl_Group,function Trig_AnlL_Func001Func014A)call DestroyGroup(udg_Anl_Group)
set udg_Anl_Group=nullcall GroupClear(udg_Anl_GroupHakke)set udg_Anl_Loc[0]=GetUnitLoc(udg_Anl_Unit[1])set udg_Anl_Group=GetUnitsInRangeOfLocMatching(2000.,udg_Anl_Loc[0],Condition(function Trig_AnlL_Func001Func019002003))call RemoveLocation(udg_Anl_Loc[0])set udg_Anl_Loc[0]=nullcall ForGroupBJ(udg_Anl_Group,function Trig_AnlL_Func001Func022A)call DestroyGroup(udg_Anl_Group)
set udg_Anl_Group=nullcall RemoveUnit(udg_Anl_Unit[1])
call DestroyTrigger(udg_Anl_Trigger[0])set udg_Anl_Trigger[0]=nullcall DestroyTrigger(udg_Anl_Trigger[1])set udg_Anl_Trigger[1]=nullcall DestroyTrigger(udg_Anl_Trigger[2])set udg_Anl_Trigger[2]=nullcall UnitRemoveAbility(udg_Anl_Unit[0],udg_Anl_Skill)call TriggerSleepAction(.01)
call RemoveRect(udg_Anl_Rect)set udg_Anl_Rect=nullset udg_Anl_Own=null
set udg_Anl_Unit[0]=null
set udg_Anl_Unit[1]=null
set udg_Anl_Buff[0]=0set udg_Anl_Buff[1]=0set udg_Anl_Lv=0
set udg_Anl_Int[1]=0
endifendfunctionfunction InitTrig_AnlL takes nothing returns nothing
set gg_trg_AnlL=CreateTrigger()call DisableTrigger(gg_trg_AnlL)
call TriggerRegisterTimerEventPeriodic(gg_trg_AnlL,.07)call TriggerAddAction(gg_trg_AnlL,function Trig_AnlL_Actions)endfunctionfunction Anl_LeaveAct takes nothing returns nothinglocal unit Leaver=GetLeavingUnit()if((UnitHasBuffBJ(Leaver,udg_Anl_Buff[0]))or(UnitHasBuffBJ(Leaver,udg_Anl_Buff[1])))then
call UnitRemoveAbility(Leaver,udg_Anl_Buff[0])call UnitRemoveAbility(Leaver,udg_Anl_Buff[1])elseif(udg_Anl_Unit[0]==Leaver)thencall UnitRemoveAbility(udg_Anl_Unit[0],udg_Anl_Skill)endifset Leaver=nullendfunctionfunction Anl_EnterCond takes nothing returns boolean
return(udg_Anl_Unit[0]==GetEnteringUnit())endfunctionfunction Anl_EnterAct takes nothing returns nothingcall UnitAddAbility(udg_Anl_Unit[0],udg_Anl_Skill)call SetUnitAbilityLevelSwapped(udg_Anl_Skill,udg_Anl_Unit[0],udg_Anl_Lv)endfunctionfunction Anl_DeathAct takes nothing returns nothingset udg_Anl_Int[1]=0
endfunctionfunction Trig_AnlE_Actions takes nothing returns nothing
set udg_Anl_Trigger[0]=CreateTrigger()call TriggerRegisterLeaveRectSimple(udg_Anl_Trigger[0],udg_Anl_Rect)
call TriggerAddAction(udg_Anl_Trigger[0],function Anl_LeaveAct)set udg_Anl_Trigger[1]=CreateTrigger()call TriggerRegisterEnterRectSimple(udg_Anl_Trigger[1],udg_Anl_Rect)
call TriggerAddCondition(udg_Anl_Trigger[1],Condition(function Anl_EnterCond))call TriggerAddAction(udg_Anl_Trigger[1],function Anl_EnterAct)set udg_Anl_Trigger[2]=CreateTrigger()call TriggerRegisterUnitEvent(udg_Anl_Trigger[2],udg_Anl_Unit[0],EVENT_UNIT_DEATH)call TriggerAddAction(udg_Anl_Trigger[2],function Anl_DeathAct)endfunctionfunction InitTrig_AnlE takes nothing returns nothing
set gg_trg_AnlE=CreateTrigger()call DisableTrigger(gg_trg_AnlE)
call TriggerAddAction(gg_trg_AnlE,function Trig_AnlE_Actions)endfunctionfunction Trig_Wes_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A082')endfunctionfunction Trig_Wes_Func035C takes nothing returns boolean
return(IsTerrainPathableBJ(udg_Wes_Loc[2],PATHING_TYPE_WALKABILITY)==false)endfunctionfunction Trig_Wes_Actions takes nothing returns nothingset udg_Wes_Unit[0]=GetTriggerUnit()
set udg_Wes_Unit[1]=GetSpellTargetUnit()
set udg_Wes_Own=GetOwningPlayer(udg_Wes_Unit[0])
set udg_Wes_Loc[0]=GetUnitLoc(udg_Wes_Unit[0])set udg_Wes_Loc[1]=GetUnitLoc(udg_Wes_Unit[1])set udg_Wes_Real[0]=AngleBetweenPoints(udg_Wes_Loc[0],udg_Wes_Loc[1])set udg_Wes_Loc[2]=PolarProjectionBJ(udg_Wes_Loc[0],50.,udg_Wes_Real[0])
call RemoveLocation(udg_Wes_Loc[0])set udg_Wes_Loc[0]=nullcall RemoveLocation(udg_Wes_Loc[1])set udg_Wes_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h06R',udg_Wes_Own,udg_Wes_Loc[2],udg_Wes_Real[0])set udg_Wes_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Wes_Loc[2])set udg_Wes_Loc[2]=nullcall SetUnitInvulnerable(udg_Wes_Unit[0],true)call SetUnitInvulnerable(udg_Wes_Unit[1],true)call PauseSystem(udg_Wes_Unit[0],true)call PauseSystem(udg_Wes_Unit[1],true)call SetUnitPathing(udg_Wes_Unit[0],false)call UnitAddAbility(udg_Wes_Unit[0],'A083')call SetUnitAnimation(udg_Wes_Unit[0],"stand ready")
call Dynamic_Sound("Sounds\\Hakuteiken.mp3")
call DisplayText("Shukei: Hakuteiken",udg_Wes_Unit[0],.023,true,$DC,5,5,$FF)
set udg_Wes_Real[1]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A082',udg_Wes_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Wes_Unit[0],false))))set udg_Wes_Real[2]=20.call TriggerSleepAction(1.8)
set udg_Wes_Loc[0]=GetUnitLoc(udg_Wes_Unit[0])call CreateNUnitsAtLoc(1,'h01J',udg_Wes_Own,udg_Wes_Loc[0],udg_Wes_Real[0])call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h013',udg_Wes_Own,udg_Wes_Loc[0],udg_Wes_Real[0])call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
set udg_Wes_Loc[1]=GetUnitLoc(udg_Wes_Unit[1])set udg_Wes_Loc[2]=PolarProjectionBJ(udg_Wes_Loc[1],300.,udg_Wes_Real[0])if(Trig_Wes_Func035C())thencall SetUnitPositionLocFacingBJ(udg_Wes_Unit[0],udg_Wes_Loc[2],udg_Wes_Real[0])else
call SetUnitPositionLocFacingBJ(udg_Wes_Unit[0],udg_Wes_Loc[1],udg_Wes_Real[0])endifcall CreateNUnitsAtLoc(1,'h038',udg_Wes_Own,udg_Wes_Loc[1],udg_Wes_Real[0])set udg_Wes_Unit[3]=bj_lastCreatedUnitcall Dynamic_3D("Abilities\\Spells\\NightElf\\Blink\\BlinkArrival1.wav",GetLocationX(udg_Wes_Loc[1]),GetLocationY(udg_Wes_Loc[1]))call RemoveLocation(udg_Wes_Loc[0])set udg_Wes_Loc[0]=nullcall RemoveLocation(udg_Wes_Loc[1])set udg_Wes_Loc[1]=nullset udg_Wes_Loc[3]=PolarProjectionBJ(udg_Wes_Loc[2],50.,udg_Wes_Real[0])
call SetUnitPositionLocFacingBJ(udg_Wes_Unit[2],udg_Wes_Loc[3],udg_Wes_Real[0])call RemoveLocation(udg_Wes_Loc[2])set udg_Wes_Loc[2]=nullcall SetUnitVertexColorBJ(udg_Wes_Unit[3],'d','d','d',.0)call SetUnitScalePercent(udg_Wes_Unit[3],300.,300.,300.)
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Wes_Unit[3])
set udg_Wes_Unit[3]=null
call TriggerSleepAction(1.2)
set udg_Wes_Loc[0]=GetUnitLoc(udg_Wes_Unit[1])call CreateNUnitsAtLoc(1,'h03E',udg_Wes_Own,udg_Wes_Loc[0],bj_UNIT_FACING)set udg_Wes_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01X',udg_Wes_Own,udg_Wes_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h01Z',udg_Wes_Own,udg_Wes_Loc[0],bj_UNIT_FACING)set udg_Wes_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',udg_Wes_Own,udg_Wes_Loc[0],GetRandomReal(0,360))
set udg_Wes_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h01W',udg_Wes_Own,udg_Wes_Loc[0],GetRandomReal(0,360))
set udg_Wes_Unit[6]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h03F',udg_Wes_Own,udg_Wes_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h00P',udg_Wes_Own,udg_Wes_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call SetUnitScalePercent(bj_lastCreatedUnit,600.,600.,600.)call UnitApplyTimedLifeBJ(6.,'BTLF',udg_Wes_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Wes_Unit[4])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Wes_Unit[5])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Wes_Unit[6])
call SetUnitTimeScalePercent(udg_Wes_Unit[4],30.)call SetUnitTimeScalePercent(udg_Wes_Unit[5],30.)call SetUnitTimeScalePercent(udg_Wes_Unit[6],30.)call SetUnitVertexColorBJ(udg_Wes_Unit[3],19.,.0,19.,0)set udg_Wes_Unit[3]=null
set udg_Wes_Unit[4]=null
set udg_Wes_Unit[5]=null
set udg_Wes_Unit[6]=null
call Dynamic_GroupShake(GetLocationX(udg_Wes_Loc[0]),GetLocationY(udg_Wes_Loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Wes_Loc[0])set udg_Wes_Loc[0]=nullcall SetUnitPathing(udg_Wes_Unit[0],true)call SetUnitInvulnerable(udg_Wes_Unit[0],false)call SetUnitInvulnerable(udg_Wes_Unit[1],false)call PauseSystem(udg_Wes_Unit[0],false)call PauseSystem(udg_Wes_Unit[1],false)call UnitRemoveAbility(udg_Wes_Unit[0],'A083')call RemoveUnit(udg_Wes_Unit[2])
call Dynamic_Sound("Sounds\\Explosion.mp3")call DisplayText(I2S(R2I(udg_Wes_Real[1]))+"!",udg_Wes_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Wes_Unit[0],udg_Wes_Unit[1],udg_Wes_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Wes_Unit[0]=null
set udg_Wes_Unit[1]=null
set udg_Wes_Unit[2]=null
set udg_Wes_Own=null
call RemoveLocation(udg_Wes_Loc[3])set udg_Wes_Loc[3]=nullendfunctionfunction InitTrig_Wes takes nothing returns nothingset gg_trg_Wes=CreateTrigger()call TriggerAddCondition(gg_trg_Wes,Condition(function Trig_Wes_Conditions))
call TriggerAddAction(gg_trg_Wes,function Trig_Wes_Actions)endfunctionfunction AI_Shirohige_Cond5 takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='H071')endfunctionfunction AI_Shirohige_Cond3 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Shirohige_Cond5())then
return false
endifreturn trueendfunctionfunction AI_Shirohige_Cond4 takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='H071')
endfunctionfunction AI_Shirohige_Cond2 takes nothing returns booleanif(not(GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER))thenreturn false
elseif(not AI_Shirohige_Cond4())then
return false
endifreturn trueendfunctionfunction AI_Shirohige_Cond1 takes nothing returns booleanif(AI_Shirohige_Cond3())then
return trueelseif(AI_Shirohige_Cond2())then
return trueendifreturn false
endfunctionfunction AI_Shirohige_Cond takes nothing returns boolean
if(not(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))==false))thenreturn false
elseif(not AI_Shirohige_Cond1())then
return false
endifreturn trueendfunctionfunction AI_Shirohige_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local boolean AI_C=false
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Shirohige_Cond5())then
set AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_C=trueendifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A08I')call SelectHeroSkill(AI_1,'A08H')call SelectHeroSkill(AI_1,'A08G')call SelectHeroSkill(AI_1,'A08E')call SelectHeroSkill(AI_1,'A08C')endifset AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_C)then
call IssueImmediateOrderById(AI_1,$D0080)call IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point2)set AI_C=falseendifcall IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point2)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Shirohige takes nothing returns nothing
set udg_AI_Trig[$D]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$D],Condition(function AI_Shirohige_Cond))call TriggerAddAction(udg_AI_Trig[$D],function AI_Shirohige_Act)
endfunctionfunction Trig_Endurance_Actions takes nothing returns nothingcall UnitAddItemByIdSwapped('I05X',GetLevelingUnit())endfunctionfunction InitTrig_Endurance takes nothing returns nothingset gg_trg_Endurance=CreateTrigger()
call TriggerAddAction(gg_trg_Endurance,function Trig_Endurance_Actions)endfunctionfunction Trig_Nrt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08C')endfunctionfunction Trig_Nrt_Func051002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Nrt_Own))
endfunctionfunction Trig_Nrt_Func051002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Nrt_Func051002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Nrt_Func051002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Nrt_Func051002003002001(),Trig_Nrt_Func051002003002002())endfunctionfunction Trig_Nrt_Func051002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Nrt_Func051002003001(),Trig_Nrt_Func051002003002())endfunctionfunction Trig_Nrt_Func059Func004C takes nothing returns booleanreturn(IsUnitType(udg_Nrt_Unit[3],UNIT_TYPE_FLYING)==false)!=nullendfunctionfunction Trig_Nrt_Func059A takes nothing returns nothing
set udg_Nrt_Unit[3]=GetEnumUnit()call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",udg_Nrt_Unit[3],"origin"))call UnitDamageTargetBJ(udg_Nrt_Unit[0],udg_Nrt_Unit[3],udg_Nrt_Real[2],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(Trig_Nrt_Func059Func004C())thenset udg_Nrt_Loc[0]=Location(udg_Nrt_Real[0],udg_Nrt_Real[1])
set udg_Nrt_Loc[1]=GetUnitLoc(udg_Nrt_Unit[3])call SaveRealBJ(AngleBetweenPoints(udg_Nrt_Loc[0],udg_Nrt_Loc[1]),0,GetHandleIdBJ(udg_Nrt_Unit[3]),udg_Nrt_Hash)
call RemoveLocation(udg_Nrt_Loc[0])set udg_Nrt_Loc[0]=nullcall RemoveLocation(udg_Nrt_Loc[1])set udg_Nrt_Loc[1]=nullcall GroupAddUnit(udg_Nrt_GroupFly,udg_Nrt_Unit[3])call SetUnitPathing(udg_Nrt_Unit[3],false)call SetUnitFly(udg_Nrt_Unit[3])
call SetUnitFlyHeight(udg_Nrt_Unit[3],1.,.0)
call SetUnitFly(udg_Nrt_Unit[3])
call SetUnitFlyHeight(udg_Nrt_Unit[3],400.,600.)
endifset udg_Nrt_Unit[3]=null
endfunctionfunction Trig_Nrt_Func076A takes nothing returns nothing
call SetUnitFlyHeight(GetEnumUnit(),.0,700.)
endfunctionfunction Trig_Nrt_Actions takes nothing returns nothingset udg_Nrt_Unit[0]=GetTriggerUnit()
set udg_Nrt_Own=GetOwningPlayer(udg_Nrt_Unit[0])
set udg_Nrt_Loc[0]=GetSpellTargetLoc()set udg_Nrt_Loc[1]=GetUnitLoc(udg_Nrt_Unit[0])set udg_Nrt_Real[0]=AngleBetweenPoints(udg_Nrt_Loc[1],udg_Nrt_Loc[0])set udg_Nrt_Loc[2]=PolarProjectionBJ(udg_Nrt_Loc[1],250.,udg_Nrt_Real[0])set udg_Nrt_Loc[3]=PolarProjectionBJ(udg_Nrt_Loc[1],200.,udg_Nrt_Real[0])call CreateNUnitsAtLoc(1,'h072',udg_Nrt_Own,udg_Nrt_Loc[2],udg_Nrt_Real[0])set udg_Nrt_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h074',udg_Nrt_Own,udg_Nrt_Loc[3],udg_Nrt_Real[0])set udg_Nrt_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h075',udg_Nrt_Own,udg_Nrt_Loc[3],udg_Nrt_Real[0])set udg_Nrt_Unit[3]=bj_lastCreatedUnitset udg_Nrt_Real[0]=GetLocationX(udg_Nrt_Loc[0])
set udg_Nrt_Real[1]=GetLocationY(udg_Nrt_Loc[0])
call RemoveLocation(udg_Nrt_Loc[0])set udg_Nrt_Loc[0]=nullcall RemoveLocation(udg_Nrt_Loc[1])set udg_Nrt_Loc[1]=nullcall RemoveLocation(udg_Nrt_Loc[2])set udg_Nrt_Loc[2]=nullcall RemoveLocation(udg_Nrt_Loc[3])set udg_Nrt_Loc[3]=nullcall Dynamic_3D("Sounds\\GuraGura.wav",udg_Nrt_Real[0],udg_Nrt_Real[1])call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Nrt_Unit[2])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Nrt_Unit[3])
call SetUnitTimeScalePercent(udg_Nrt_Unit[2],40.)call SetUnitTimeScalePercent(udg_Nrt_Unit[3],200.)set udg_Nrt_Unit[2]=null
set udg_Nrt_Unit[3]=null
set udg_Nrt_Real[2]=BasicDmg_Q(udg_Nrt_Unit[0],'A08C',0)
set udg_Nrt_Real[2]=udg_Nrt_Real[2]+25.call DisplayText("Naginata Rasetsu",udg_Nrt_Unit[0],.023,true,$FF,$FF,$FF,$FF)call TriggerSleepAction(.2)call SetUnitScalePercent(udg_Nrt_Unit[1],400.,400.,400.)
call TriggerSleepAction(.2)call SetUnitScalePercent(udg_Nrt_Unit[1],600.,600.,600.)
call TriggerSleepAction(.4)call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Nrt_Unit[1])
set udg_Nrt_Hash=InitHashtable()
set udg_Nrt_Loc[0]=Location(udg_Nrt_Real[0],udg_Nrt_Real[1])
call CreateNUnitsAtLoc(1,'h073',udg_Nrt_Own,udg_Nrt_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(3.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h073',udg_Nrt_Own,udg_Nrt_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(3.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h02L',udg_Nrt_Own,udg_Nrt_Loc[0],bj_UNIT_FACING)set udg_Nrt_Unit[2]=bj_lastCreatedUnitcall EnumDestructablesInCircleBJ(460.,udg_Nrt_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'u003',udg_Nrt_Own,udg_Nrt_Loc[0],bj_UNIT_FACING)set udg_Nrt_Unit[4]=bj_lastCreatedUnitset udg_Nrt_Group=GetUnitsInRangeOfLocMatching(460.,udg_Nrt_Loc[0],Condition(function Trig_Nrt_Func051002003))call RemoveLocation(udg_Nrt_Loc[0])set udg_Nrt_Loc[0]=nullcall SetUnitVertexColorBJ(udg_Nrt_Unit[2],40.,64.,'d',0)
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Nrt_Unit[4])
call UnitAddAbility(udg_Nrt_Unit[4],'A08D')call IssueImmediateOrderById(udg_Nrt_Unit[4],$D0080)
call UnitApplyTimedLifeBJ(4.5,'BTLF',udg_Nrt_Unit[2])call ForGroupBJ(udg_Nrt_Group,function Trig_Nrt_Func059A)call DestroyGroup(udg_Nrt_Group)
set udg_Nrt_Group=nullset udg_Nrt_Own=null
set udg_Nrt_Unit[0]=null
set udg_Nrt_Unit[1]=null
set udg_Nrt_Unit[2]=null
set udg_Nrt_Unit[4]=null
set udg_Nrt_Real[0]=.0set udg_Nrt_Real[1]=.0set udg_Nrt_Real[2]=.0set udg_Nrt_Real[3]=12.set udg_Nrt_Int=25call EnableTrigger(gg_trg_NrtL)call TriggerSleepAction(.5)set udg_Nrt_Group=CreateGroup()call GroupAddGroup(udg_Nrt_GroupFly,udg_Nrt_Group)call ForGroupBJ(udg_Nrt_Group,function Trig_Nrt_Func076A)call DestroyGroup(udg_Nrt_Group)
set udg_Nrt_Group=nullendfunctionfunction InitTrig_Nrt takes nothing returns nothingset gg_trg_Nrt=CreateTrigger()call TriggerAddCondition(gg_trg_Nrt,Condition(function Trig_Nrt_Conditions))
call TriggerAddAction(gg_trg_Nrt,function Trig_Nrt_Actions)endfunctionfunction Trig_NrtL_Func001Func003A takes nothing returns nothing
set udg_Nrt_Unit[3]=GetEnumUnit()set udg_Nrt_Loc[0]=GetUnitLoc(udg_Nrt_Unit[3])set udg_Nrt_Loc[1]=PolarProjectionBJ(udg_Nrt_Loc[0],udg_Nrt_Real[3],LoadRealBJ(0,GetHandleIdBJ(udg_Nrt_Unit[3]),udg_Nrt_Hash))call RemoveLocation(udg_Nrt_Loc[0])set udg_Nrt_Loc[0]=nullcall UnitMoveLoc(udg_Nrt_Unit[3],udg_Nrt_Loc[1])
call RemoveLocation(udg_Nrt_Loc[1])set udg_Nrt_Loc[1]=nullset udg_Nrt_Unit[3]=null
endfunctionfunction Trig_NrtL_Func001Func011A takes nothing returns nothing
set udg_Nrt_Unit[3]=GetEnumUnit()call SetUnitPathing(udg_Nrt_Unit[3],true)set udg_Nrt_Unit[3]=null
endfunctionfunction Trig_NrtL_Func001C takes nothing returns booleanreturn(udg_Nrt_Int>0)endfunctionfunction Trig_NrtL_Actions takes nothing returns nothing
if(Trig_NrtL_Func001C())then
set udg_Nrt_Group=CreateGroup()call GroupAddGroup(udg_Nrt_GroupFly,udg_Nrt_Group)call ForGroupBJ(udg_Nrt_Group,function Trig_NrtL_Func001Func003A)call DestroyGroup(udg_Nrt_Group)
set udg_Nrt_Group=nullset udg_Nrt_Int=(udg_Nrt_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Nrt_Group=CreateGroup()call GroupAddGroup(udg_Nrt_GroupFly,udg_Nrt_Group)call ForGroupBJ(udg_Nrt_Group,function Trig_NrtL_Func001Func011A)call DestroyGroup(udg_Nrt_Group)
set udg_Nrt_Group=nullcall GroupClear(udg_Nrt_GroupFly)call FlushParentHashtableBJ(udg_Nrt_Hash)set udg_Nrt_Hash=nullset udg_Nrt_Real[3]=.0set udg_Nrt_Int=0endifendfunctionfunction InitTrig_NrtL takes nothing returns nothing
set gg_trg_NrtL=CreateTrigger()call DisableTrigger(gg_trg_NrtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_NrtL,.04)call TriggerAddAction(gg_trg_NrtL,function Trig_NrtL_Actions)endfunctionfunction Trig_Grc_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A08E')endfunctionfunction Trig_Grc_Init_Actions takes nothing returns nothing
set udg_Grc_Unit=GetLearningUnit()set udg_Grc_Delay=3.
set udg_Grc_Rand=19set udg_Grc_Radius=300.set udg_Grc_Ability[0]='A08E'set udg_Grc_Ability[1]='A08F'call TriggerRegisterUnitEvent(gg_trg_Grc,udg_Grc_Unit,EVENT_UNIT_ATTACKED)call EnableTrigger(gg_trg_Grc)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Grc_Init takes nothing returns nothing
set gg_trg_Grc_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Grc_Init,Condition(function Trig_Grc_Init_Conditions))call TriggerAddAction(gg_trg_Grc_Init,function Trig_Grc_Init_Actions)endfunctionfunction Trig_Grc_Conditions takes nothing returns booleanreturn(GetRandomInt(1,'d')<udg_Grc_Rand)
endfunctionfunction Grc_GroupCond takes unit Dummy returns booleanif(IsUnitEnemy(Dummy,GetOwningPlayer(udg_Grc_Unit))==false)thenreturn false
elseif(IsUnitAliveBJ(Dummy)==false)thenreturn false
elseif(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],Dummy)!=0)thenreturn false
endifreturn trueendfunctionfunction Trig_Grc_Actions takes nothing returns nothinglocal unit Attacking
local unit Dummy
local player Plocal real Dmglocal location Loclocal location Loc2local group Glocal integer SkLvcall DisableTrigger(GetTriggeringTrigger())set Attacking=GetAttacker()set P=GetOwningPlayer(udg_Grc_Unit)set SkLv=GetUnitAbilityLevelSwapped(udg_Grc_Ability[0],udg_Grc_Unit)
set Dmg=150.+((.5+(.5*I2R(SkLv)))*I2R(GetHeroStatBJ(0,udg_Grc_Unit,true)))call SetPlayerAbilityAvailable(P,udg_Grc_Ability[0],false)call UnitAddAbility(udg_Grc_Unit,udg_Grc_Ability[1])
call SetUnitAbilityLevelSwapped(udg_Grc_Ability[1],udg_Grc_Unit,SkLv)set Loc=GetUnitLoc(Attacking)call CreateNUnitsAtLoc(1,'h076',P,Loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h05Z',Player($E),Loc,bj_UNIT_FACING)set Dummy=bj_lastCreatedUnit
call EnumDestructablesInCircleBJ(udg_Grc_Radius,Loc,function TreeKiller)
set G=GetUnitsInRangeOfLocAll(udg_Grc_Radius,Loc)call RemoveLocation(Loc)
set Loc=null
call IssueTargetOrderById(Dummy,$D006B,udg_Grc_Unit)
call UnitApplyTimedLife(Dummy,'BTLF',1.)
set Dummy=nullloop
set Dummy=FirstOfGroup(G)exitwhen Dummy==null
if(Grc_GroupCond(Dummy))then
set Loc2=GetUnitLoc(Dummy)call CreateNUnitsAtLoc(1,'h0BJ',P,Loc2,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(Loc2)set Loc2=nullcall UnitDamageTargetBJ(udg_Grc_Unit,Dummy,Dmg,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)
endifcall GroupRemoveUnit(G,Dummy)set Dummy=nullendloopcall DestroyGroup(G)
set G=nullset Attacking=nullset P=nullset Dmg=.0call TriggerSleepAction(udg_Grc_Delay)call UnitRemoveAbility(udg_Grc_Unit,udg_Grc_Ability[1])call SetPlayerAbilityAvailable(GetOwningPlayer(udg_Grc_Unit),udg_Grc_Ability[0],true)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Grc takes nothing returns nothingset gg_trg_Grc=CreateTrigger()call DisableTrigger(gg_trg_Grc)call TriggerAddCondition(gg_trg_Grc,Condition(function Trig_Grc_Conditions))
call TriggerAddAction(gg_trg_Grc,function Trig_Grc_Actions)endfunctionfunction Trig_Gks_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08G')endfunctionfunction Trig_Gks_Actions takes nothing returns nothingset udg_Gks_Unit[0]=GetTriggerUnit()
set udg_Gks_Loc[0]=GetSpellTargetLoc()set udg_Gks_Loc[1]=GetUnitLoc(udg_Gks_Unit[0])set udg_Ggs_Real[0]=AngleBetweenPoints(udg_Gks_Loc[1],udg_Gks_Loc[0])set udg_Gks_Own=GetOwningPlayer(udg_Gks_Unit[0])
set udg_Gks_Loc[2]=PolarProjectionBJ(udg_Gks_Loc[1],200.,udg_Ggs_Real[0])set udg_Gks_Loc[3]=PolarProjectionBJ(udg_Gks_Loc[1],250.,udg_Ggs_Real[0])call CreateNUnitsAtLoc(1,'h078',udg_Gks_Own,udg_Gks_Loc[2],udg_Ggs_Real[0])set udg_Gks_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h072',udg_Gks_Own,udg_Gks_Loc[3],udg_Ggs_Real[0])set udg_Gks_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h074',udg_Gks_Own,udg_Gks_Loc[2],udg_Ggs_Real[0])set udg_Gks_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h075',udg_Gks_Own,udg_Gks_Loc[2],udg_Ggs_Real[0])set udg_Gks_Unit[4]=bj_lastCreatedUnitcall Dynamic_3D("Sounds\\GuraGura.wav",GetLocationX(udg_Gks_Loc[2]),GetLocationY(udg_Gks_Loc[2]))call RemoveLocation(udg_Gks_Loc[0])set udg_Gks_Loc[0]=nullcall RemoveLocation(udg_Gks_Loc[1])set udg_Gks_Loc[1]=nullcall RemoveLocation(udg_Gks_Loc[2])set udg_Gks_Loc[2]=nullcall RemoveLocation(udg_Gks_Loc[3])set udg_Gks_Loc[3]=nullcall SetUnitVertexColorBJ(udg_Gks_Unit[1],'d','d','d',100.)call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Gks_Unit[3])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Gks_Unit[4])
call SetUnitTimeScalePercent(udg_Gks_Unit[3],40.)call SetUnitTimeScalePercent(udg_Gks_Unit[4],200.)set udg_Gks_Unit[3]=null
set udg_Gks_Unit[4]=null
set udg_Ggs_Real[1]=((400.+(100.*I2R(GetUnitAbilityLevelSwapped('A08G',udg_Gks_Unit[0]))))+((3.+I2R(GetUnitAbilityLevelSwapped('A08G',udg_Gks_Unit[0])))*I2R(GetHeroStatBJ(0,udg_Gks_Unit[0],true))))set udg_Ggs_Real[2]=120.
set udg_Ggs_Real[3]=500.
set udg_Gks_Int=25call DisplayText("Gekishin",udg_Gks_Unit[0],.023,true,$FF,$FF,$FF,$FF)call TriggerSleepAction(.2)call SetUnitScalePercent(udg_Gks_Unit[2],300.,300.,300.)
call TriggerSleepAction(.2)call SetUnitScalePercent(udg_Gks_Unit[2],400.,400.,400.)
call TriggerSleepAction(.3)set udg_Gks_Loc[0]=GetUnitLoc(udg_Gks_Unit[1])call CreateNUnitsAtLoc(1,'h07A',udg_Gks_Own,udg_Gks_Loc[0],udg_Ggs_Real[0])call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07A',udg_Gks_Own,udg_Gks_Loc[0],udg_Ggs_Real[0])call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h079',udg_Gks_Own,udg_Gks_Loc[0],udg_Ggs_Real[0])call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call RemoveLocation(udg_Gks_Loc[0])set udg_Gks_Loc[0]=nullcall SetUnitVertexColorBJ(udg_Gks_Unit[1],'d','d','d',.0)set udg_Gks_Map=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])call EnableTrigger(gg_trg_GksL)call SetUnitScalePercent(udg_Gks_Unit[2],600.,600.,600.)
call TriggerSleepAction(.4)call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Gks_Unit[2])
set udg_Gks_Unit[2]=null
endfunctionfunction InitTrig_Gks takes nothing returns nothingset gg_trg_Gks=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Gks,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Gks,Condition(function Trig_Gks_Conditions))
call TriggerAddAction(gg_trg_Gks,function Trig_Gks_Actions)endfunctionfunction Trig_GksL_Func002Func005C takes nothing returns boolean
return(RectContainsLoc(udg_Gks_Map,udg_Gks_Loc[0]))endfunctionfunction Trig_GksL_Func002Func007002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Gks_Group2)==false)
endfunctionfunction Trig_GksL_Func002Func007002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Gks_Own))
endfunctionfunction Trig_GksL_Func002Func007002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_GksL_Func002Func007002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_GksL_Func002Func007002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_GksL_Func002Func007002003002002001(),Trig_GksL_Func002Func007002003002002002())endfunctionfunction Trig_GksL_Func002Func007002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_GksL_Func002Func007002003002001(),Trig_GksL_Func002Func007002003002002())endfunctionfunction Trig_GksL_Func002Func007002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_GksL_Func002Func007002003001(),Trig_GksL_Func002Func007002003002())endfunctionfunction Trig_GksL_Func002Func015A takes nothing returns nothing
set udg_Gks_Unit[3]=GetEnumUnit()call GroupAddUnit(udg_Gks_Group2,udg_Gks_Unit[3])set udg_Gks_Loc[2]=GetUnitLoc(udg_Gks_Unit[3])call CreateNUnitsAtLoc(1,'h04R',udg_Gks_Own,udg_Gks_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Gks_Loc[2])set udg_Gks_Loc[2]=nullcall UnitDamageTargetBJ(udg_Gks_Unit[0],udg_Gks_Unit[3],udg_Ggs_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Gks_Unit[3]=null
endfunctionfunction Trig_GksL_Func002C takes nothing returns booleanreturn(udg_Gks_Int>0)and(IsUnitAliveBJ(udg_Gks_Unit[1]))
endfunctionfunction Trig_GksL_Actions takes nothing returns nothing
if(Trig_GksL_Func002C())then
set udg_Gks_Loc[0]=GetUnitLoc(udg_Gks_Unit[1])set udg_Gks_Loc[1]=PolarProjectionBJ(udg_Gks_Loc[0],udg_Ggs_Real[2],udg_Ggs_Real[0])
call CreateNUnitsAtLoc(1,'h075',udg_Gks_Own,udg_Gks_Loc[1],udg_Ggs_Real[0])set udg_Gks_Unit[3]=bj_lastCreatedUnitif(Trig_GksL_Func002Func005C())thencall SetUnitPositionLoc(udg_Gks_Unit[1],udg_Gks_Loc[1])endifcall EnumDestructablesInCircleBJ(udg_Ggs_Real[3],udg_Gks_Loc[1],function TreeKiller)
set udg_Gks_Group=GetUnitsInRangeOfLocMatching(udg_Ggs_Real[3],udg_Gks_Loc[1],Condition(function Trig_GksL_Func002Func007002003))call RemoveLocation(udg_Gks_Loc[0])set udg_Gks_Loc[0]=nullcall RemoveLocation(udg_Gks_Loc[1])set udg_Gks_Loc[1]=nullcall UnitApplyTimedLifeBJ(1.,'BTLF',udg_Gks_Unit[3])
call SetUnitTimeScalePercent(udg_Gks_Unit[3],200.)set udg_Gks_Unit[3]=null
call ForGroupBJ(udg_Gks_Group,function Trig_GksL_Func002Func015A)call DestroyGroup(udg_Gks_Group)
set udg_Gks_Group=nullset udg_Gks_Int=(udg_Gks_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Gks_Unit[1])
call RemoveRect(udg_Gks_Map)
set udg_Gks_Map=null
call GroupClear(udg_Gks_Group2)set udg_Gks_Own=null
set udg_Gks_Unit[0]=null
set udg_Gks_Unit[1]=null
set udg_Ggs_Real[0]=.0set udg_Ggs_Real[1]=.0set udg_Ggs_Real[2]=.0set udg_Ggs_Real[3]=.0endifendfunctionfunction InitTrig_GksL takes nothing returns nothing
set gg_trg_GksL=CreateTrigger()call DisableTrigger(gg_trg_GksL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GksL,.05)call TriggerAddAction(gg_trg_GksL,function Trig_GksL_Actions)endfunctionfunction Trig_Kin_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08H')endfunctionfunction Trig_Kin_Actions takes nothing returns nothingset udg_Kin_Unit[0]=GetTriggerUnit()
set udg_Kin_Loc[0]=GetSpellTargetLoc()set udg_Kin_Own=GetOwningPlayer(udg_Kin_Unit[0])
set udg_Kin_Loc[1]=GetUnitLoc(udg_Kin_Unit[0])set udg_Kin_Real[0]=AngleBetweenPoints(udg_Kin_Loc[1],udg_Kin_Loc[0])set udg_Kin_Real[1]=(udg_Kin_Real[0]+90.)set udg_Kin_Real[2]=(udg_Kin_Real[0]-91.)set udg_Kin_Real[3]=GetLocationX(udg_Kin_Loc[1])
set udg_Kin_Real[4]=GetLocationY(udg_Kin_Loc[1])
set udg_Kin_Loc[2]=PolarProjectionBJ(udg_Kin_Loc[1],250.,udg_Kin_Real[1])set udg_Kin_Loc[3]=PolarProjectionBJ(udg_Kin_Loc[1],250.,udg_Kin_Real[2])set udg_Kin_Loc[4]=PolarProjectionBJ(udg_Kin_Loc[1],200.,udg_Kin_Real[1])set udg_Kin_Loc[5]=PolarProjectionBJ(udg_Kin_Loc[1],200.,udg_Kin_Real[2])call Dynamic_GroupShake(udg_Kin_Real[3],udg_Kin_Real[4],.4,6.,udg_CameraArea,null)call RemoveLocation(udg_Kin_Loc[0])set udg_Kin_Loc[0]=nullcall RemoveLocation(udg_Kin_Loc[1])set udg_Kin_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h072',udg_Kin_Own,udg_Kin_Loc[2],udg_Kin_Real[1])set udg_Kin_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h072',udg_Kin_Own,udg_Kin_Loc[3],udg_Kin_Real[2])set udg_Kin_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h074',udg_Kin_Own,udg_Kin_Loc[4],udg_Kin_Real[1])set udg_Kin_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h074',udg_Kin_Own,udg_Kin_Loc[5],udg_Kin_Real[2])set udg_Kin_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h075',udg_Kin_Own,udg_Kin_Loc[4],udg_Kin_Real[1])set udg_Kin_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h075',udg_Kin_Own,udg_Kin_Loc[5],udg_Kin_Real[2])set udg_Kin_Unit[6]=bj_lastCreatedUnitcall RemoveLocation(udg_Kin_Loc[2])set udg_Kin_Loc[2]=nullcall RemoveLocation(udg_Kin_Loc[3])set udg_Kin_Loc[3]=nullcall RemoveLocation(udg_Kin_Loc[4])set udg_Kin_Loc[4]=nullcall RemoveLocation(udg_Kin_Loc[5])set udg_Kin_Loc[5]=nullcall Dynamic_3D("Sounds\\GuraGura.wav",udg_Kin_Real[3],udg_Kin_Real[4])call SetUnitTimeScalePercent(udg_Kin_Unit[3],40.)call SetUnitTimeScalePercent(udg_Kin_Unit[4],40.)call SetUnitTimeScalePercent(udg_Kin_Unit[5],200.)call SetUnitTimeScalePercent(udg_Kin_Unit[6],200.)call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Kin_Unit[3])
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Kin_Unit[4])
call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Kin_Unit[5])call UnitApplyTimedLifeBJ(1.5,'BTLF',udg_Kin_Unit[6])set udg_Kin_Unit[3]=null
set udg_Kin_Unit[4]=null
set udg_Kin_Unit[5]=null
set udg_Kin_Unit[6]=null
call DisplayText("Kaishin",udg_Kin_Unit[0],.023,false,$FF,$FF,$FF,$FF)call TriggerSleepAction(.22)
call SetUnitScalePercent(udg_Kin_Unit[1],400.,400.,400.)
call SetUnitScalePercent(udg_Kin_Unit[2],400.,400.,400.)
call TriggerSleepAction(.22)
call SetUnitScalePercent(udg_Kin_Unit[1],500.,500.,500.)
call SetUnitScalePercent(udg_Kin_Unit[2],500.,500.,500.)
call TriggerSleepAction(.22)
call SetUnitScalePercent(udg_Kin_Unit[1],600.,600.,600.)
call SetUnitScalePercent(udg_Kin_Unit[2],600.,600.,600.)
call TriggerSleepAction(.22)
set udg_Kin_Loc[0]=Location(udg_Kin_Real[3],udg_Kin_Real[4])
set udg_Kin_Loc[1]=PolarProjectionBJ(udg_Kin_Loc[0],400.,udg_Kin_Real[0])set udg_Kin_Loc[2]=PolarProjectionBJ(udg_Kin_Loc[0],800.,udg_Kin_Real[0])set udg_Kin_Loc[3]=PolarProjectionBJ(udg_Kin_Loc[0],1200.,udg_Kin_Real[0])set udg_Kin_Real[0]=700.
set udg_Kin_Loc[4]=PolarProjectionBJ(udg_Kin_Loc[0],udg_Kin_Real[0],udg_Kin_Real[1])
set udg_Kin_Loc[5]=PolarProjectionBJ(udg_Kin_Loc[0],udg_Kin_Real[0],udg_Kin_Real[2])
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[4],udg_Kin_Loc[0])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[5],udg_Kin_Loc[0])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[4],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[5],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call Dynamic_GroupShake(udg_Kin_Real[3],udg_Kin_Real[4],udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call RemoveLocation(udg_Kin_Loc[0])set udg_Kin_Loc[0]=nullset udg_Kin_Loc[6]=PolarProjectionBJ(udg_Kin_Loc[1],udg_Kin_Real[0],udg_Kin_Real[1])
set udg_Kin_Loc[7]=PolarProjectionBJ(udg_Kin_Loc[1],udg_Kin_Real[0],udg_Kin_Real[2])
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[6],udg_Kin_Loc[1])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[7],udg_Kin_Loc[1])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[6],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[7],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Kin_Loc[1])set udg_Kin_Loc[1]=nullset udg_Kin_Loc[8]=PolarProjectionBJ(udg_Kin_Loc[2],udg_Kin_Real[0],udg_Kin_Real[1])
set udg_Kin_Loc[9]=PolarProjectionBJ(udg_Kin_Loc[2],udg_Kin_Real[0],udg_Kin_Real[2])
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[8],udg_Kin_Loc[2])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[9],udg_Kin_Loc[2])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[8],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[9],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Kin_Loc[2])set udg_Kin_Loc[2]=nullset udg_Kin_Loc[$A]=PolarProjectionBJ(udg_Kin_Loc[3],udg_Kin_Real[0],udg_Kin_Real[1])set udg_Kin_Loc[$B]=PolarProjectionBJ(udg_Kin_Loc[3],udg_Kin_Real[0],udg_Kin_Real[2])call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[$A],udg_Kin_Loc[3])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLocFacingLocBJ(1,'h07B',udg_Kin_Own,udg_Kin_Loc[$B],udg_Kin_Loc[3])call GroupAddUnit(udg_Kin_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[$A],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07C',udg_Kin_Own,udg_Kin_Loc[$B],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Kin_Loc[3])set udg_Kin_Loc[3]=nullcall RemoveLocation(udg_Kin_Loc[4])set udg_Kin_Loc[4]=nullcall RemoveLocation(udg_Kin_Loc[5])set udg_Kin_Loc[5]=nullcall RemoveLocation(udg_Kin_Loc[6])set udg_Kin_Loc[6]=nullcall RemoveLocation(udg_Kin_Loc[7])set udg_Kin_Loc[7]=nullcall RemoveLocation(udg_Kin_Loc[8])set udg_Kin_Loc[8]=nullcall RemoveLocation(udg_Kin_Loc[9])set udg_Kin_Loc[9]=nullcall RemoveLocation(udg_Kin_Loc[$A])
set udg_Kin_Loc[$A]=null
call RemoveLocation(udg_Kin_Loc[$B])
set udg_Kin_Loc[$B]=null
set udg_Kin_Real[0]=(600.+(200.*I2R(GetUnitAbilityLevelSwapped('A08H',udg_Kin_Unit[0]))))set udg_Kin_Real[1]=50.set udg_Kin_Real[2]=300.
set udg_Kin_Int=31call EnableTrigger(gg_trg_KinL)call TriggerSleepAction(.4)call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Kin_Unit[1])
call UnitApplyTimedLifeBJ(.2,'BTLF',udg_Kin_Unit[2])
set udg_Kin_Unit[1]=null
set udg_Kin_Unit[2]=null
endfunctionfunction InitTrig_Kin takes nothing returns nothingset gg_trg_Kin=CreateTrigger()call TriggerAddCondition(gg_trg_Kin,Condition(function Trig_Kin_Conditions))
call TriggerAddAction(gg_trg_Kin,function Trig_Kin_Actions)endfunctionfunction Trig_KinL_Func002Func003Func008002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Kin_Group3)==false)
endfunctionfunction Trig_KinL_Func002Func003Func008002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Kin_Own))
endfunctionfunction Trig_KinL_Func002Func003Func008002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_KinL_Func002Func003Func008002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_KinL_Func002Func003Func008002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_KinL_Func002Func003Func008002003002002001(),Trig_KinL_Func002Func003Func008002003002002002())endfunctionfunction Trig_KinL_Func002Func003Func008002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_KinL_Func002Func003Func008002003002001(),Trig_KinL_Func002Func003Func008002003002002())endfunctionfunction Trig_KinL_Func002Func003Func008002003 takes nothing returns boolean
return GetBooleanAnd(Trig_KinL_Func002Func003Func008002003001(),Trig_KinL_Func002Func003Func008002003002())endfunctionfunction Trig_KinL_Func002Func003Func011A takes nothing returns nothingset udg_Kin_Unit[4]=GetEnumUnit()call GroupAddUnit(udg_Kin_Group3,udg_Kin_Unit[4])set udg_Kin_Loc[2]=GetUnitLoc(udg_Kin_Unit[4])call CreateNUnitsAtLoc(1,'h07D',udg_Kin_Own,udg_Kin_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Kin_Loc[2])set udg_Kin_Loc[2]=nullcall UnitPureDamageTarget(udg_Kin_Unit[0],udg_Kin_Unit[4],udg_Kin_Real[0])set udg_Kin_Unit[4]=null
endfunctionfunction Trig_KinL_Func002Func003A takes nothing returns nothing
set udg_Kin_Unit[3]=GetEnumUnit()set udg_Kin_Loc[0]=GetUnitLoc(udg_Kin_Unit[3])set udg_Kin_Loc[1]=PolarProjectionBJ(udg_Kin_Loc[0],udg_Kin_Real[1],GetUnitFacing(udg_Kin_Unit[3]))call RemoveLocation(udg_Kin_Loc[0])set udg_Kin_Loc[0]=nullcall SetUnitPositionLoc(udg_Kin_Unit[3],udg_Kin_Loc[1])call EnumDestructablesInCircleBJ(udg_Kin_Real[2],udg_Kin_Loc[1],function TreeKiller)
set udg_Kin_Group2=GetUnitsInRangeOfLocMatching(udg_Kin_Real[2],udg_Kin_Loc[1],Condition(function Trig_KinL_Func002Func003Func008002003))call RemoveLocation(udg_Kin_Loc[1])set udg_Kin_Loc[1]=nullcall ForGroupBJ(udg_Kin_Group2,function Trig_KinL_Func002Func003Func011A)call DestroyGroup(udg_Kin_Group2)set udg_Kin_Group2=nullset udg_Kin_Unit[3]=null
endfunctionfunction Trig_KinL_Func002Func011A takes nothing returns nothing
set udg_Kin_Unit[3]=GetEnumUnit()call RemoveUnit(udg_Kin_Unit[3])
set udg_Kin_Unit[3]=null
endfunctionfunction Trig_KinL_Func002C takes nothing returns booleanreturn(udg_Kin_Int>0)endfunctionfunction Trig_KinL_Actions takes nothing returns nothing
if(Trig_KinL_Func002C())then
set udg_Kin_Group=CreateGroup()call GroupAddGroup(udg_Kin_GroupDummy,udg_Kin_Group)
call ForGroupBJ(udg_Kin_Group,function Trig_KinL_Func002Func003A)call DestroyGroup(udg_Kin_Group)
set udg_Kin_Group=nullset udg_Kin_Int=(udg_Kin_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Kin_Group=CreateGroup()call GroupAddGroup(udg_Kin_GroupDummy,udg_Kin_Group)
call ForGroupBJ(udg_Kin_Group,function Trig_KinL_Func002Func011A)call DestroyGroup(udg_Kin_Group)
set udg_Kin_Group=nullcall GroupClear(udg_Kin_GroupDummy)call GroupClear(udg_Kin_Group3)set udg_Kin_Own=null
set udg_Kin_Unit[0]=null
set udg_Kin_Real[0]=.0set udg_Kin_Real[1]=.0set udg_Kin_Real[2]=.0set udg_Kin_Real[3]=.0set udg_Kin_Real[4]=.0set udg_Kin_Int=0endifendfunctionfunction InitTrig_KinL takes nothing returns nothing
set gg_trg_KinL=CreateTrigger()call DisableTrigger(gg_trg_KinL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KinL,.05)call TriggerAddAction(gg_trg_KinL,function Trig_KinL_Actions)endfunctionfunction Trig_Isk_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08I')endfunctionfunction Trig_Isk_Func022Func013002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Isk_Own))
endfunctionfunction Trig_Isk_Func022Func013002003002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Isk_Func022Func013002003002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Isk_Func022Func013002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Isk_Func022Func013002003002001(),Trig_Isk_Func022Func013002003002002())endfunctionfunction Trig_Isk_Func022Func013002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Isk_Func022Func013002003001(),Trig_Isk_Func022Func013002003002())endfunctionfunction Trig_Isk_Func022Func016Func007C takes nothing returns booleanreturn(IsUnitType(udg_Isk_Unit[1],UNIT_TYPE_HERO))!=null
endfunctionfunction Trig_Isk_Func022Func016A takes nothing returns nothingset udg_Isk_Unit[1]=GetEnumUnit()set udg_Isk_Loc=GetUnitLoc(udg_Isk_Unit[1])call CreateNUnitsAtLoc(1,'h07F',udg_Isk_Own,udg_Isk_Loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(udg_Isk_Loc)
set udg_Isk_Loc=null
if(Trig_Isk_Func022Func016Func007C())thencall DisplayText(I2S(R2I(udg_Isk_Real))+"!",udg_Isk_Unit[1],.027,true,$FF,0,0,$FF)endifcall UnitDamageTargetBJ(udg_Isk_Unit[0],udg_Isk_Unit[1],udg_Isk_Real,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)set udg_Isk_Unit[1]=null
endfunctionfunction Trig_Isk_Func022C takes nothing returns boolean
return(IsTriggerEnabled(gg_trg_IskD))endfunctionfunction Trig_Isk_Actions takes nothing returns nothingset udg_Isk_Unit[0]=GetTriggerUnit()
set udg_Isk_Own=GetOwningPlayer(udg_Isk_Unit[0])
set udg_Isk_Loc=GetUnitLoc(udg_Isk_Unit[0])call CreateNUnitsAtLoc(1,'h07E',udg_Isk_Own,udg_Isk_Loc,bj_UNIT_FACING)set udg_Isk_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h07E',udg_Isk_Own,udg_Isk_Loc,bj_UNIT_FACING)set udg_Isk_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Isk_Loc)
set udg_Isk_Loc=null
call PauseSystem(udg_Isk_Unit[0],true)call SetUnitAnimation(udg_Isk_Unit[0],"spell two")call UnitAddAbility(udg_Isk_Unit[0],'A08J')set udg_Isk_Real=(2000.+((10.+(5.*I2R(GetUnitAbilityLevelSwapped('A08I',udg_Isk_Unit[0]))))*I2R(GetHeroStatBJ(0,udg_Isk_Unit[0],false))))call DisplayText("Shima Yurashi",udg_Isk_Unit[0],.023,false,$DC,5,5,$FF)
call EnableTrigger(gg_trg_IskD)call TriggerSleepAction(1.)call SetUnitTimeScalePercent(udg_Isk_Unit[0],10.)call TriggerSleepAction(.6)call SetUnitTimeScalePercent(udg_Isk_Unit[0],100.)call TriggerSleepAction(.3)if(Trig_Isk_Func022C())thencall DisableTrigger(gg_trg_IskD)
call Dynamic_Sound("Sounds\\ShakeIsland.mp3")call UnitRemoveAbility(udg_Isk_Unit[0],'A08J')call SetUnitAnimation(udg_Isk_Unit[1],"death")call SetUnitAnimation(udg_Isk_Unit[2],"death")call UnitApplyTimedLifeBJ(.7,'BTLF',udg_Isk_Unit[1])
call UnitApplyTimedLifeBJ(.7,'BTLF',udg_Isk_Unit[2])
call PauseSystem(udg_Isk_Unit[0],false)call QueueUnitAnimation(udg_Isk_Unit[0],"stand")
set udg_Isk_Loc=GetUnitLoc(udg_Isk_Unit[0])call Dynamic_GroupShake(GetLocationX(udg_Isk_Loc),GetLocationY(udg_Isk_Loc),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,null)call TerrainDeformationRippleBJ(4,false,udg_Isk_Loc,1300.,1300.,64,1,512)set udg_Isk_Group=GetUnitsInRangeOfLocMatching(1000.,udg_Isk_Loc,Condition(function Trig_Isk_Func022Func013002003))call RemoveLocation(udg_Isk_Loc)
set udg_Isk_Loc=null
call ForGroupBJ(udg_Isk_Group,function Trig_Isk_Func022Func016A)
call DestroyGroup(udg_Isk_Group)
set udg_Isk_Group=nullendifset udg_Isk_Own=null
set udg_Isk_Unit[0]=null
set udg_Isk_Unit[1]=null
set udg_Isk_Unit[2]=null
set udg_Isk_Real=.0endfunctionfunction InitTrig_Isk takes nothing returns nothingset gg_trg_Isk=CreateTrigger()call TriggerAddCondition(gg_trg_Isk,Condition(function Trig_Isk_Conditions))
call TriggerAddAction(gg_trg_Isk,function Trig_Isk_Actions)endfunctionfunction Trig_IskD_Actions takes nothing returns nothing
call DisableTrigger(GetTriggeringTrigger())call UnitRemoveAbility(udg_Isk_Unit[0],'A08J')call PauseSystem(udg_Isk_Unit[0],false)call SetUnitAnimation(udg_Isk_Unit[1],"death")call SetUnitAnimation(udg_Isk_Unit[2],"death")call UnitApplyTimedLifeBJ(.7,'BTLF',udg_Isk_Unit[1])
call UnitApplyTimedLifeBJ(.7,'BTLF',udg_Isk_Unit[2])
endfunctionfunction InitTrig_IskD takes nothing returns nothing
set gg_trg_IskD=CreateTrigger()call DisableTrigger(gg_trg_IskD)
call TriggerAddAction(gg_trg_IskD,function Trig_IskD_Actions)endfunctionfunction AIMadara__isAtked takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==AIMadara__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIMadara__isAtker takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())==AIMadara__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIMadara__Cond takes nothing returns booleanif(not(AIMadara__isAtked()or AIMadara__isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIMadara__Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIMadara__AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AIMadara__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A089')call SelectHeroSkill(mySelf,'A085')call SelectHeroSkill(mySelf,'A087')call SelectHeroSkill(mySelf,'A088')call SelectHeroSkill(mySelf,'A021')endifcall IssueTargetOrderById(mySelf,$D0270,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D0084)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueImmediateOrderById(mySelf,$D00D7)call IssueImmediateOrderById(mySelf,$D0277)call IssueTargetOrderById(mySelf,$D00FA,myTarget)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIMadara__AINo])endfunctionfunction AIMadara__Init takes nothing returns nothingset udg_AI_Trig[AIMadara__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIMadara__AINo],Condition(function AIMadara__Cond))
call TriggerAddAction(udg_AI_Trig[AIMadara__AINo],function AIMadara__Act)endfunctionfunction Trig_Madara_SixPath_Actions takes nothing returns nothingcall BlockDamageAct(GetTriggerUnit(),(GetEventDamage()*.15))
endfunctionfunction InitTrig_Madara_SixPath takes nothing returns nothingset gg_trg_Madara_SixPath=CreateTrigger()call TriggerAddAction(gg_trg_Madara_SixPath,function Trig_Madara_SixPath_Actions)endfunctionfunction IntonRaiha__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==IntonRaiha__skId)endfunctionfunction IntonRaiha__Act takes nothing returns nothinglocal unit array ulocal player plocal group glocal real array xlocal real array ylocal real array rlocal real dmgset u[0]=GetTriggerUnit()set x[0]=GetSpellTargetX()set y[0]=GetSpellTargetY()set x[1]=GetUnitX(u[0])set y[1]=GetUnitY(u[0])set r[0]=AngleBetweenXY(x[1],y[1],x[0],y[0])
set p=GetOwningPlayer(u[0])call DisplayText("Senpo: Inton Raiha",u[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Madara\\IntonRaiha.wav",x[1],y[1])set dmg=(110.+(GetUnitAbilityLevel(u[0],IntonRaiha__skId)*115.))
if(GetUnitAbilityLevel(u[0],'B01L')>0)thenset bj_lastCreatedUnit=CreateUnit(p,'h06V',x[1],y[1],r[0])call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitRemoveAbility(bj_lastCreatedUnit,'Aatk')call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call SetUnitAnimation(bj_lastCreatedUnit,"spell one")call SetUnitVertexColor(bj_lastCreatedUnit,25,25,25,$BB)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)set dmg=dmg*1.1endifset g=CreateGroupXYnWW(x[0],y[0],400.,p)
loop
set u[1]=FirstOfGroup(g)
exitwhen(u[1]==null)
call GroupRemoveUnit(g,u[1])
set bj_lastCreatedUnit=CreateUnit(p,'u003',x[1],y[1],r[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call UnitAddAbility(bj_lastCreatedUnit,IntonRaiha__skLightning)call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,u[1])set bj_lastCreatedUnit=CreateUnit(p,'h00O',GetUnitX(u[1]),GetUnitY(u[1]),bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(g)
set g=nullcall TriggerSleepAction(.02)
set bj_lastCreatedUnit=CreateUnit(p,'h00N',x[1],y[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)set u[0]=nullset p=nullendfunctionfunction IntonRaiha__Init takes nothing returns nothingset gg_trg_Inton_Raiha=CreateTrigger()call TriggerAddCondition(gg_trg_Inton_Raiha,Condition(function IntonRaiha__Cond))call TriggerAddAction(gg_trg_Inton_Raiha,function IntonRaiha__Act)endfunctionfunction ShadowStrike__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==ShadowStrike__skId)endfunctionfunction ShadowStrike__Act takes nothing returns nothing
local unit array ulocal player plocal group gmainlocal group gdummylocal group glocal real array xlocal real array ylocal real array rlocal real garea
local real delay
local real array dmg
local integer ilocal integer skBuff='A0J5'set u[0]=GetTriggerUnit()set p=GetOwningPlayer(u[0])set garea=500.set dmg[0]=(1.5*GetHeroAgi(u[0],true))set dmg[1]=dmg[0]*.2
set i=(2+GetUnitAbilityLevel(u[0],ShadowStrike__skId))set delay=.3
set r[0]=120.set gmain=CreateGroupUnitBuff(ShadowStrike__cloneBuff)call GroupAddUnit(gmain,u[0])set gdummy=CreateGroup()
call GroupAddGroup(gmain,gdummy)
loop
set u[1]=FirstOfGroup(gdummy)exitwhen(u[1]==null)
call GroupRemoveUnit(gdummy,u[1])set bj_lastCreatedUnit=CreateUnit(p,'u003',GetUnitX(u[1]),GetUnitY(u[1]),bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,skBuff)call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,u[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endloopcall DestroyGroup(gdummy)set gdummy=nullloop
exitwhen(i<1)or(GroupCountUnits(gmain)<1)set gdummy=CreateGroup()
call GroupAddGroup(gmain,gdummy)
loop
set u[1]=FirstOfGroup(gdummy)exitwhen(u[1]==null)
call GroupRemoveUnit(gdummy,u[1])if(GetUnitState(u[1],UNIT_STATE_LIFE)<1)then
call GroupRemoveUnit(gmain,u[1])
else
if not((IsUnitType(u[1],UNIT_TYPE_STUNNED))or(IsUnitPaused(u[1])))thenset x[0]=GetUnitX(u[1])set y[0]=GetUnitY(u[1])set g=CreateGroupXYnWW(x[0],y[0],garea,p)set u[2]=GroupRandomUnit(g)call DestroyGroup(g)
set g=nullif(u[2]!=null)thenset bj_lastCreatedUnit=CreateUnit(p,'h03G',x[0],y[0],GetUnitFacing(u[1]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set x[0]=GetUnitX(u[2])set y[0]=GetUnitY(u[2])set r[1]=GetRandomReal(0,360)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])call DestroyTreeXY(x[1],y[1],150.)call UnitMoveXY2(u[1],x[1],y[1])
set bj_lastCreatedUnit=CreateUnit(p,'h01H',x[0],y[0],r[1])call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdx",u[2],"origin"))if(GetUnitAbilityLevel(u[1],ShadowStrike__cloneBuff)<1)thencall UnitDamageTarget(u[1],u[2],dmg[0],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)else
call UnitDamageTarget(u[1],u[2],dmg[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifif(GetUnitState(u[2],UNIT_STATE_LIFE)>0)then
call IssueTargetOrderById(u[1],$D000F,u[2])else
call IssueImmediateOrder(u[1],"stand")call SetUnitAnimation(u[1],"attack")
call SetUnitFacing(u[1],AngleBetweenXY(x[1],y[1],x[0],y[0]))
endifendifendifendifendloopcall DestroyGroup(gdummy)set gdummy=nullset i=i-1call TriggerSleepAction(delay)endloopset gdummy=CreateGroupUnitBuff(ShadowStrike__cloneBuff)call GroupAddUnit(gdummy,u[0])loop
set u[1]=FirstOfGroup(gdummy)exitwhen(u[1]==null)
call GroupRemoveUnit(gdummy,u[1])call UnitRemoveAbility(u[1],'B04O')endloopcall DestroyGroup(gdummy)set gdummy=nullcall DestroyGroup(gmain)
set gmain=nullcall UnitRemoveAbility(u[0],'B04M')set u[0]=nullset u[1]=nullset u[2]=nullset p=nullendfunctionfunction ShadowStrike__Init takes nothing returns nothingset gg_trg_Shadow_Strike=CreateTrigger()
call TriggerAddCondition(gg_trg_Shadow_Strike,Condition(function ShadowStrike__Cond))call TriggerAddAction(gg_trg_Shadow_Strike,function ShadowStrike__Act)endfunctionfunction GokaMekkyaku__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==GokaMekkyaku__skId)endfunctionfunction GokaMekkyaku__ActDmg takes nothing returns nothinglocal unit pickedlocal group glocal integer uIdlocal integer jif(GokaMekkyaku__isDmgOn)thenset g=CreateGroup()call GroupAddGroup(GokaMekkyaku__gdmg,g)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set uId=GetHandleId(picked)set j=(LoadInteger(Madara_KatonHash,uId,0)-1)if(j<0)or(GetUnitState(picked,UNIT_STATE_LIFE)<1)thencall DestroyEffect((LoadEffectHandle(Madara_KatonHash,uId,1)))call FlushChildHashtable(Madara_KatonHash,uId)call GroupRemoveUnit(GokaMekkyaku__gdmg,picked)else
call UnitDamageTarget(GokaMekkyaku__u[0],picked,GokaMekkyaku__dmg2,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
if(GetUnitState(picked,UNIT_STATE_LIFE)>0)thencall SaveInteger(Madara_KatonHash,uId,0,j)else
call DestroyEffect((LoadEffectHandle(Madara_KatonHash,uId,1)))call FlushChildHashtable(Madara_KatonHash,uId)call GroupRemoveUnit(GokaMekkyaku__gdmg,picked)endifendifendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(GokaMekkyaku__t2)call DestroyTimer(GokaMekkyaku__t2)set GokaMekkyaku__t2=nullloop
set picked=FirstOfGroup(GokaMekkyaku__gdmg)exitwhen(picked==null)call GroupRemoveUnit(GokaMekkyaku__gdmg,picked)set uId=GetHandleId(picked)call DestroyEffect((LoadEffectHandle(Madara_KatonHash,uId,1)))call FlushChildHashtable(Madara_KatonHash,uId)endloopcall DestroyGroup(GokaMekkyaku__gdmg)set GokaMekkyaku__gdmg=nullset GokaMekkyaku__u[0]=nullset GokaMekkyaku__p=null
endifendfunctionfunction GokaMekkyaku__ActL2 takes nothing returns nothingcall PauseTimer(GokaMekkyaku__t1)call DestroyTimer(GokaMekkyaku__t1)set GokaMekkyaku__t1=nullset GokaMekkyaku__isDmgOn=falseendfunctionfunction GokaMekkyaku__ActL takes nothing returns nothinglocal unit pickedlocal group glocal real array xlocal real array ylocal real array rlocal integer jlocal integer uIdif(GokaMekkyaku__i>0)thenset GokaMekkyaku__i=GokaMekkyaku__i-1set j=1loop
exitwhen(j>GokaMekkyaku__maxDummy)set x[0]=GetUnitX(GokaMekkyaku__u[j])set y[0]=GetUnitY(GokaMekkyaku__u[j])set x[1]=PolarX(x[0],GokaMekkyaku__speed,GokaMekkyaku__facing[j])set y[1]=PolarY(y[0],GokaMekkyaku__speed,GokaMekkyaku__facing[j])call DestroyTreeXY(x[1],y[1],GokaMekkyaku__garea)call SetUnitX(GokaMekkyaku__u[j],x[1])call SetUnitY(GokaMekkyaku__u[j],y[1])call SetUnitX(GokaMekkyaku__dummy[j],x[1])call SetUnitY(GokaMekkyaku__dummy[j],y[1])if(GokaMekkyaku__iSpawn>1)thenset bj_lastCreatedUnit=CreateUnit(GokaMekkyaku__p,'h03I',x[1],y[1],GokaMekkyaku__facing[j])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(GokaMekkyaku__p,'h06T',x[1],y[1],GokaMekkyaku__facing[j])call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)endifset g=CreateGroupXY2(x[1],y[1],GokaMekkyaku__garea,GokaMekkyaku__p,GokaMekkyaku__gcheck)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call GroupAddUnit(GokaMekkyaku__gcheck,picked)call UnitDamageTarget(GokaMekkyaku__u[0],picked,GokaMekkyaku__dmg1,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetUnitState(picked,UNIT_STATE_LIFE)>0)thenset uId=GetHandleId(picked)call SaveInteger(Madara_KatonHash,uId,0,4)call SaveEffectHandle(Madara_KatonHash,uId,1,AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdx",picked,"chest"))call GroupAddUnit(GokaMekkyaku__gdmg,picked)
else
call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdx",picked,"chest"))endifendloopcall DestroyGroup(g)
set g=nullset j=j+1endloopif(GokaMekkyaku__iSpawn>1)thenset GokaMekkyaku__iSpawn=0else
set GokaMekkyaku__iSpawn=GokaMekkyaku__iSpawn+1endifelse
call PauseTimer(GokaMekkyaku__t1)call DestroyTimer(GokaMekkyaku__t1)set GokaMekkyaku__t1=nullcall DestroyGroup(GokaMekkyaku__gcheck)set GokaMekkyaku__gcheck=nullset j=1loop
exitwhen(j>GokaMekkyaku__maxDummy)call RemoveUnit(GokaMekkyaku__u[j])call SetUnitTimeScale(GokaMekkyaku__dummy[j],2.)
call UnitApplyTimedLife(GokaMekkyaku__dummy[j],'BTLF',2.)set GokaMekkyaku__u[j]=nullset GokaMekkyaku__dummy[j]=nullset j=j+1endloopset GokaMekkyaku__t1=CreateTimer()call TimerStart(GokaMekkyaku__t1,5.,false,function GokaMekkyaku__ActL2)endifendfunctionfunction GokaMekkyaku__Act takes nothing returns nothing
local real array xlocal real array ylocal real array rlocal integer skLvlocal integer heroStrset GokaMekkyaku__u[0]=GetTriggerUnit()set x[1]=GetSpellTargetX()set y[1]=GetSpellTargetY()set x[0]=GetUnitX(GokaMekkyaku__u[0])set y[0]=GetUnitY(GokaMekkyaku__u[0])set GokaMekkyaku__facing[1]=AngleBetweenXY(x[0],y[0],x[1],y[1])set GokaMekkyaku__facing[2]=GokaMekkyaku__facing[1]+22.set GokaMekkyaku__facing[3]=GokaMekkyaku__facing[1]-22.set GokaMekkyaku__p=GetOwningPlayer(GokaMekkyaku__u[0])call DisplayText("Katon: Goka Mekkyaku",GokaMekkyaku__u[0],.023,true,$FF,$FF,$FF,$FF)call Dynamic_GroupShake(x[0],y[0],1.5,3.5,udg_CameraArea,null)set skLv=(GetUnitAbilityLevel(GokaMekkyaku__u[0],GokaMekkyaku__skId))set GokaMekkyaku__dmg2=I2R(GetHeroStr(GokaMekkyaku__u[0],true))set GokaMekkyaku__dmg1=((500.+(skLv*'d'))+((2+skLv)*GokaMekkyaku__dmg2))
set r[0]=120.set x[1]=PolarX(x[0],r[0],GokaMekkyaku__facing[1])set y[1]=PolarY(y[0],r[0],GokaMekkyaku__facing[1])set GokaMekkyaku__u[1]=CreateUnit(GokaMekkyaku__p,'h03H',x[1],y[1],GokaMekkyaku__facing[1])set GokaMekkyaku__dummy[1]=CreateUnit(GokaMekkyaku__p,'h06T',x[1],y[1],GokaMekkyaku__facing[1])set x[1]=PolarX(x[0],r[0],GokaMekkyaku__facing[2])set y[1]=PolarY(y[0],r[0],GokaMekkyaku__facing[2])set GokaMekkyaku__u[2]=CreateUnit(GokaMekkyaku__p,'h03H',x[1],y[1],GokaMekkyaku__facing[2])set GokaMekkyaku__dummy[2]=CreateUnit(GokaMekkyaku__p,'h06T',x[1],y[1],GokaMekkyaku__facing[2])set x[1]=PolarX(x[0],r[0],GokaMekkyaku__facing[3])set y[1]=PolarY(y[0],r[0],GokaMekkyaku__facing[3])set GokaMekkyaku__u[3]=CreateUnit(GokaMekkyaku__p,'h03H',x[1],y[1],GokaMekkyaku__facing[3])set GokaMekkyaku__dummy[3]=CreateUnit(GokaMekkyaku__p,'h06T',x[1],y[1],GokaMekkyaku__facing[3])set GokaMekkyaku__gcheck=CreateGroup()set GokaMekkyaku__gdmg=CreateGroup()
set GokaMekkyaku__isDmgOn=trueset GokaMekkyaku__i=20set GokaMekkyaku__iSpawn=2set GokaMekkyaku__t1=CreateTimer()call TimerStart(GokaMekkyaku__t1,.04,true,function GokaMekkyaku__ActL)set GokaMekkyaku__t2=CreateTimer()call TimerStart(GokaMekkyaku__t2,1.,true,function GokaMekkyaku__ActDmg)endfunctionfunction CastAct takes nothing returns nothinglocal unit l__GokaMekkyaku__u=GetTriggerUnit()local real x
local real y
local real array rset x=GetUnitX(l__GokaMekkyaku__u)set y=GetUnitY(l__GokaMekkyaku__u)set r[1]=AngleBetweenXY(x,y,GetSpellTargetX(),GetSpellTargetY())
set r[0]=120.set x=PolarX(x,r[0],r[1])set y=PolarY(y,r[0],r[1])set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(l__GokaMekkyaku__u),'h06W',x,y,r[1])call SetUnitAnimation(bj_lastCreatedUnit,"birth")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.4)set l__GokaMekkyaku__u=nullendfunctionfunction GokaMekkyaku__Init takes nothing returns nothingset gg_trg_Goka_Mekkyaku=CreateTrigger()
call TriggerAddCondition(gg_trg_Goka_Mekkyaku,Condition(function GokaMekkyaku__Cond))call TriggerAddAction(gg_trg_Goka_Mekkyaku,function GokaMekkyaku__Act)call TriggerAddCondition(Madara_Goka_Mekkyaku_Cast,Condition(function GokaMekkyaku__Cond))call TriggerAddAction(Madara_Goka_Mekkyaku_Cast,function CastAct)endfunctionfunction Rinbo___RinboCond takes nothing returns boolean
return(GetUnitAbilityLevel(GetSummonedUnit(),Rinbo___cloneBuff)>0)endfunctionfunction Rinbo___RinboAct takes nothing returns nothinglocal unit sumUnit=GetSummonedUnit()
local player p=GetOwningPlayer(sumUnit)local real x
local real y
local real distlocal real facingset Rinbo___count=Rinbo___count+1if(Rinbo___self!=null)thenset x=GetUnitX(Rinbo___self)
set y=GetUnitY(Rinbo___self)
else
set x=GetUnitX(sumUnit)set y=GetUnitY(sumUnit)endifset dist=GetRandomReal('x',300)set facing=GetRandomReal(0,360)set x=PolarX(x,dist,facing)set y=PolarY(y,dist,facing)call UnitMoveXY2(sumUnit,x,y)if(Rinbo___count==Rinbo___maxRinbo)thencall DisableTrigger(Rinbo___RinboSummonTrg)endifcall TriggerSleepAction(.0)call SelectUnitAddForPlayer(sumUnit,p)set x=GetUnitX(sumUnit)set y=GetUnitY(sumUnit)call UnitApplyTimedLife(CreateUnit(p,'h03G',x,y,bj_UNIT_FACING),'BTLF',1.)set sumUnit=null
set p=nullendfunctionfunction Rinbo___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Rinbo___skId)endfunctionfunction Rinbo___Act takes nothing returns nothinglocal unit pickedlocal real x
local real y
local player plocal integer skClonelocal integer buffRinbolocal integer skGhostlocal integer ilocal real delay
local group gset Rinbo___self=GetTriggerUnit()set x=GetUnitX(Rinbo___self)
set y=GetUnitY(Rinbo___self)
set p=GetOwningPlayer(Rinbo___self)set skClone='A0J4'set buffRinbo='B01L'
set skGhost='A0J6'set g=CreateGroupUnitBuff(Rinbo___cloneBuff)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set bj_lastCreatedUnit=CreateUnit(p,'u003',GetUnitX(picked),GetUnitY(picked),bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A060')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,Rinbo___self)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveUnit(picked)endloopcall DestroyGroup(g)
set g=nullset Rinbo___count=0call EnableTrigger(Rinbo___RinboSummonTrg)call DisplayText("Rinbo: Hengoku",Rinbo___self,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Madara\\Limbo.wav",x,y)call UnitAddAbility(Rinbo___self,skGhost)set i=Rinbo___maxRinboloop
exitwhen(i<1)set bj_lastCreatedUnit=CreateUnit(p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,skClone)call IssueTargetOrderById(bj_lastCreatedUnit,$D0132,Rinbo___self)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=i-1endloopcall UnitRemoveAbility(Rinbo___self,skGhost)
set delay=.1
loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(Rinbo___self,buffRinbo)<1)endloopif(IsTriggerEnabled(Rinbo___RinboSummonTrg))then
call DisableTrigger(Rinbo___RinboSummonTrg)endifset Rinbo___self=CreateUnit(p,'u005',GetUnitX(Rinbo___self),GetUnitY(Rinbo___self),bj_UNIT_FACING)set g=CreateGroupUnitBuff(Rinbo___cloneBuff)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set bj_lastCreatedUnit=CreateUnit(p,'u003',GetUnitX(picked),GetUnitY(picked),bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A060')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,Rinbo___self)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveUnit(picked)endloopcall DestroyGroup(g)
set g=nullcall UnitApplyTimedLife(Rinbo___self,'BTLF',1.)set Rinbo___self=nullset p=nullendfunctionfunction Rinbo___Init takes nothing returns nothingset gg_trg_Rinbo=CreateTrigger()
call TriggerAddCondition(gg_trg_Rinbo,Condition(function Rinbo___Cond))call TriggerAddAction(gg_trg_Rinbo,function Rinbo___Act)
set Rinbo___RinboSummonTrg=CreateTrigger()call DisableTrigger(Rinbo___RinboSummonTrg)call TriggerRegisterAnyUnitEventBJ(Rinbo___RinboSummonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(Rinbo___RinboSummonTrg,Condition(function Rinbo___RinboCond))call TriggerAddAction(Rinbo___RinboSummonTrg,function Rinbo___RinboAct)endfunctionfunction Trig_Mti_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A089')endfunctionfunction Trig_Mti_Func017002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Mti_Own))
endfunctionfunction Trig_Mti_Func017002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Mti_Func017002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Mti_Func017002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Mti_Func017002003002001(),Trig_Mti_Func017002003002002())endfunctionfunction Trig_Mti_Func017002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Mti_Func017002003001(),Trig_Mti_Func017002003002())endfunctionfunction Trig_Mti_Func020A takes nothing returns nothing
set udg_Mti_Unit[2]=GetEnumUnit()set udg_Mti_Loc[1]=GetUnitLoc(udg_Mti_Unit[2])call CreateNUnitsAtLoc(1,'h06Z',udg_Mti_Own,udg_Mti_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,'BTLF',bj_lastCreatedUnit)call SetUnitAnimation(bj_lastCreatedUnit,"death")call CreateNUnitsAtLoc(1,'u003',udg_Mti_Own,udg_Mti_Loc[1],bj_UNIT_FACING)set udg_Mti_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Mti_Loc[1])set udg_Mti_Loc[1]=nullcall UnitAddAbility(udg_Mti_Unit[3],'A08B')call IssueTargetOrderById(udg_Mti_Unit[3],$D007F,udg_Mti_Unit[2])call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Mti_Unit[3])
set udg_Mti_Unit[2]=null
set udg_Mti_Unit[3]=null
endfunctionfunction Trig_Mti_Actions takes nothing returns nothingset udg_Mti_Unit[0]=GetTriggerUnit()
call Dynamic_Sound("Sounds\\Infinite.mp3")call DisplayText("Mugen Tsukuyomi",udg_Mti_Unit[0],.023,false,$DC,5,5,$FF)set udg_Mti_Own=GetOwningPlayer(udg_Mti_Unit[0])
set udg_Mti_Loc[0]=GetUnitLoc(udg_Mti_Unit[0])call CreateNUnitsAtLoc(1,'h06Y',udg_Mti_Own,udg_Mti_Loc[0],bj_UNIT_FACING)call GroupAddUnit(udg_Mti_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h06X',udg_Mti_Own,udg_Mti_Loc[0],bj_UNIT_FACING)set udg_Mti_Unit[1]=bj_lastCreatedUnitcall UnitAddAbility(udg_Mti_Unit[1],'A08A')call CreateNUnitsAtLoc(1,'h070',udg_Mti_Own,udg_Mti_Loc[0],bj_UNIT_FACING)call GroupAddUnit(udg_Mti_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h070',udg_Mti_Own,udg_Mti_Loc[0],bj_UNIT_FACING)call GroupAddUnit(udg_Mti_GroupDummy,bj_lastCreatedUnit)
set udg_Mti_Rect=RectFromCenterSizeBJ(udg_Mti_Loc[0],3000.,3000.)set udg_Mti_Real[0]=1800.set udg_Mti_Group=GetUnitsInRangeOfLocMatching(udg_Mti_Real[0],udg_Mti_Loc[0],Condition(function Trig_Mti_Func017002003))call RemoveLocation(udg_Mti_Loc[0])set udg_Mti_Loc[0]=nullcall ForGroupBJ(udg_Mti_Group,function Trig_Mti_Func020A)call DestroyGroup(udg_Mti_Group)
set udg_Mti_Group=nullcall AddWeatherEffectSaveLast(udg_Mti_Rect,'LRaa')set udg_Mti_Weather=bj_lastCreatedWeatherEffectcall EnableWeatherEffect(udg_Mti_Weather,true)set udg_Mti_Int=70set udg_Mti_Real[1]=(1500.+((5.*I2R(GetUnitAbilityLevelSwapped('A09M',udg_Mti_Unit[0])))*I2R(GetHeroStatBJ(0,udg_Mti_Unit[0],true))))set udg_Mti_Real[1]=(udg_Mti_Real[1]/ 60.)call EnableTrigger(gg_trg_MtiL)endfunctionfunction InitTrig_Mti takes nothing returns nothingset gg_trg_Mti=CreateTrigger()call TriggerAddCondition(gg_trg_Mti,Condition(function Trig_Mti_Conditions))
call TriggerAddAction(gg_trg_Mti,function Trig_Mti_Actions)endfunctionfunction Trig_MtiL_Func001Func002002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Mti_Own))
endfunctionfunction Trig_MtiL_Func001Func002002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_MtiL_Func001Func002002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_MtiL_Func001Func002002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_MtiL_Func001Func002002003002001(),Trig_MtiL_Func001Func002002003002002())endfunctionfunction Trig_MtiL_Func001Func002002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_MtiL_Func001Func002002003001(),Trig_MtiL_Func001Func002002003002())endfunctionfunction Trig_MtiL_Func001Func005A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Mti_Unit[0],GetEnumUnit(),udg_Mti_Real[1],ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_MtiL_Func001Func018A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_MtiL_Func001C takes nothing returns booleanreturn(udg_Mti_Int>0)endfunctionfunction Trig_MtiL_Actions takes nothing returns nothing
if(Trig_MtiL_Func001C())then
set udg_Mti_Loc[0]=GetUnitLoc(udg_Mti_Unit[1])set udg_Mti_Group=GetUnitsInRangeOfLocMatching(udg_Mti_Real[0],udg_Mti_Loc[0],Condition(function Trig_MtiL_Func001Func002002003))call RemoveLocation(udg_Mti_Loc[0])set udg_Mti_Loc[0]=nullcall ForGroupBJ(udg_Mti_Group,function Trig_MtiL_Func001Func005A)call DestroyGroup(udg_Mti_Group)
set udg_Mti_Group=nullset udg_Mti_Int=(udg_Mti_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(6.)call EnableWeatherEffect(udg_Mti_Weather,false)call RemoveWeatherEffect(udg_Mti_Weather)set udg_Mti_Weather=null
call RemoveRect(udg_Mti_Rect)set udg_Mti_Rect=nullset udg_Mti_Group=CreateGroup()call GroupAddGroup(udg_Mti_GroupDummy,udg_Mti_Group)
call ForGroupBJ(udg_Mti_Group,function Trig_MtiL_Func001Func018A)call DestroyGroup(udg_Mti_Group)
set udg_Mti_Group=nullcall GroupClear(udg_Mti_GroupDummy)call RemoveUnit(udg_Mti_Unit[1])
set udg_Mti_Own=null
set udg_Mti_Unit[0]=null
set udg_Mti_Unit[1]=null
set udg_Mti_Real[0]=.0set udg_Mti_Real[1]=.0set udg_Mti_Int=0endifendfunctionfunction InitTrig_MtiL takes nothing returns nothing
set gg_trg_MtiL=CreateTrigger()call DisableTrigger(gg_trg_MtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_MtiL,.05)call TriggerAddAction(gg_trg_MtiL,function Trig_MtiL_Actions)endfunctionfunction AIAizen___isAtked takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==AIAizen___AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIAizen___isAtker takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())==AIAizen___AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIAizen___Cond takes nothing returns booleanif(not(AIAizen___isAtked()or AIAizen___isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIAizen___Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIAizen___AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AIAizen___isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A08V')call SelectHeroSkill(mySelf,'A08T')call SelectHeroSkill(mySelf,'A0K1')call SelectHeroSkill(mySelf,'A08N')call SelectHeroSkill(mySelf,'A08M')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueImmediateOrderById(mySelf,$D00A1)if(isHeroTarget)then
call IssueTargetOrderById(mySelf,$D00CB,myTarget)call IssueTargetOrderById(mySelf,$D00DD,myTarget)if(isAttacking)thencall IssueTargetOrderById(mySelf,$D007F,myTarget)call IssueImmediateOrderById(mySelf,$D0084)if(selfHPPercent<30)then
call IssueImmediateOrderById(mySelf,$D022E)endifendifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIAizen___AINo])endfunctionfunction AIAizen___Init takes nothing returns nothingset udg_AI_Trig[AIAizen___AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIAizen___AINo],Condition(function AIAizen___Cond))
call TriggerAddAction(udg_AI_Trig[AIAizen___AINo],function AIAizen___Act)endfunctionfunction KanzenSaimin___AtkTrgCond takes nothing returns boolean
return(KanzenSaimin___canUse)and(GetAttacker()==KanzenSaimin___self)
endfunctionfunction KanzenSaimin___AtkTrgTimer takes nothing returns nothinglocal timer t=GetExpiredTimer()local player p2=Player($C)local real x
local real y
local real r
call PauseTimer(t)call DestroyTimer(t)
set t=nullloop
exitwhen(KanzenSaimin___count<0)
set x=GetUnitX(KanzenSaimin___dummy[KanzenSaimin___count])set y=GetUnitY(KanzenSaimin___dummy[KanzenSaimin___count])set r=GetUnitFacing(KanzenSaimin___dummy[KanzenSaimin___count])call UnitApplyTimedLife(CreateUnit(p2,'h013',x,y,r),'BTLF',1.5)call UnitApplyTimedLife(CreateUnit(p2,'h07G',x,y,r),'BTLF',1.5)call RemoveUnit(KanzenSaimin___dummy[KanzenSaimin___count])set KanzenSaimin___dummy[KanzenSaimin___count]=nullset KanzenSaimin___count=KanzenSaimin___count-1endloopset p2=nullendfunctionfunction KanzenSaimin___AtkTrgAct takes nothing returns nothinglocal unit atker=GetAttacker()local unit pickedlocal group glocal real x
local real y
local real r
local real garea
local real dmglocal timer tcall DisableTrigger(KanzenSaimin___atkTrg)call UnitRemoveAbility(atker,KanzenSaimin___buffWwId)set x=GetUnitX(atker)set y=GetUnitY(atker)set garea=600.set dmg=BasicDmg_Q(atker,KanzenSaimin___skId,1)call UnitApplyTimedLife(CreateUnit(KanzenSaimin___p,'h07H',x,y,bj_UNIT_FACING),'BTLF',1.)call UnitApplyTimedLife(CreateUnit(KanzenSaimin___p,'h07H',x,y,bj_UNIT_FACING),'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(KanzenSaimin___p,'h019',x,y,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set KanzenSaimin___count=-1call DestroyTreeXY(x,y,garea)set g=CreateGroupXY(x,y,garea,KanzenSaimin___p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set KanzenSaimin___count=KanzenSaimin___count+1call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdx",picked,"origin"))set x=GetUnitX(picked)set y=GetUnitY(picked)set KanzenSaimin___dummy[KanzenSaimin___count]=CreateUnit(Player($C),GetUnitTypeId(picked),x,y,GetUnitFacing(picked))call UnitAddAbility(KanzenSaimin___dummy[KanzenSaimin___count],'Aloc')call SetUnitInvulnerable(KanzenSaimin___dummy[KanzenSaimin___count],true)call SetUnitVertexColor(KanzenSaimin___dummy[KanzenSaimin___count],$FF,$FF,$FF,$96)call PauseUnit(KanzenSaimin___dummy[KanzenSaimin___count],true)call SetUnitTimeScalePercent(KanzenSaimin___dummy[KanzenSaimin___count],35.)
call SetUnitAnimation(KanzenSaimin___dummy[KanzenSaimin___count],"death")call UnitDamageTarget(atker,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(g)
set g=nullset atker=nullset t=CreateTimer()call TimerStart(t,2.,false,function KanzenSaimin___AtkTrgTimer)set t=nullendfunctionfunction KanzenSaimin___SummonTrgCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetSummonedUnit(),KanzenSaimin___buffKyokaId)>0)endfunctionfunction KanzenSaimin___SummonTrgAct takes nothing returns nothinglocal unit sumUnit=GetSummonedUnit()
call DisableTrigger(KanzenSaimin___summonTrg)if(KanzenSaimin___self!=null)thenif(GetUnitAbilityLevel(KanzenSaimin___self,'B01T')>0)thencall UnitAddAbility(sumUnit,'A0K5')else
call UnitRemoveAbility(sumUnit,'A0K4')endifcall UnitMoveXY2(sumUnit,GetUnitX(KanzenSaimin___self),GetUnitY(KanzenSaimin___self))call SelectUnitAddForPlayer(sumUnit,KanzenSaimin___p)call SetUnitFacing(sumUnit,GetUnitFacing(KanzenSaimin___self))endifset sumUnit=null
endfunctionfunction KanzenSaimin___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==KanzenSaimin___skId)
endfunctionfunction KanzenSaimin___ActL takes nothing returns nothinglocal timer tif(GetUnitAbilityLevel(KanzenSaimin___self,KanzenSaimin___buffWwId)<1)thenset t=GetExpiredTimer()call PauseTimer(t)call DestroyTimer(t)
set t=nullset KanzenSaimin___canUse=falseif(IsTriggerEnabled(KanzenSaimin___atkTrg))thencall DisableTrigger(KanzenSaimin___atkTrg)endifset KanzenSaimin___self=null
set KanzenSaimin___p=nullendifendfunctionfunction KanzenSaimin___Act takes nothing returns nothinglocal real x
local real y
local timer tset KanzenSaimin___self=GetTriggerUnit()
set KanzenSaimin___p=GetOwningPlayer(KanzenSaimin___self)set x=GetUnitX(KanzenSaimin___self)set y=GetUnitY(KanzenSaimin___self)set KanzenSaimin___canUse=truecall EnableTrigger(KanzenSaimin___summonTrg)
call EnableTrigger(KanzenSaimin___atkTrg)set bj_lastCreatedUnit=CreateUnit(KanzenSaimin___p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0K2')call IssueTargetOrderById(bj_lastCreatedUnit,$D0132,KanzenSaimin___self)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call TriggerSleepAction(.1)if(IsTriggerEnabled(KanzenSaimin___summonTrg))thencall DisableTrigger(KanzenSaimin___summonTrg)endifset t=CreateTimer()call TimerStart(t,.05,true,function KanzenSaimin___ActL)
set t=nullendfunctionfunction KanzenSaimin___Init takes nothing returns nothingset gg_trg_Kanzen_Saimin=CreateTrigger()
call TriggerAddCondition(gg_trg_Kanzen_Saimin,Condition(function KanzenSaimin___Cond))call TriggerAddAction(gg_trg_Kanzen_Saimin,function KanzenSaimin___Act)set KanzenSaimin___summonTrg=CreateTrigger()
call DisableTrigger(KanzenSaimin___summonTrg)call TriggerRegisterAnyUnitEventBJ(KanzenSaimin___summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(KanzenSaimin___summonTrg,Condition(function KanzenSaimin___SummonTrgCond))call TriggerAddAction(KanzenSaimin___summonTrg,function KanzenSaimin___SummonTrgAct)
set KanzenSaimin___atkTrg=CreateTrigger()call DisableTrigger(KanzenSaimin___atkTrg)call TriggerRegisterAnyUnitEventBJ(KanzenSaimin___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(KanzenSaimin___atkTrg,Condition(function KanzenSaimin___AtkTrgCond))call TriggerAddAction(KanzenSaimin___atkTrg,function KanzenSaimin___AtkTrgAct)endfunctionfunction HypnosisStrike___Cond takes nothing returns boolean
return(GetSpellAbilityId()==HypnosisStrike___skId)endfunctionfunction HypnosisStrike___Act takes nothing returns nothinglocal unit array ulocal player plocal real array xlocal real array ylocal real distlocal real facinglocal real dmglocal effect array effset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])set eff[0]=AddSpecialEffectTarget("AvengerMissile.mdx",u[0],"weapon")set eff[1]=AddSpecialEffectTarget("AvengerMissile.mdx",u[0],"hand right")set x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set u[2]=CreateUnit(p,'O005',x[0],y[0],GetUnitFacing(u[0]))call UnitAddAbility(u[2],'Aloc')
call SetUnitInvulnerable(u[2],true)call PauseUnit(u[2],true)call SetUnitAnimation(u[2],"attack")
call SetUnitTimeScalePercent(u[2],140.)call SetUnitFacing(u[2],AngleBetweenXY(x[0],y[0],GetUnitX(u[1]),GetUnitY(u[1])))
call TriggerSleepAction(.01)
set x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set dist=-120.set x[2]=PolarX(x[1],dist,facing)set y[2]=PolarY(y[1],dist,facing)call DestroyTreeXY(x[2],y[2],150.)call UnitMoveXY2(u[0],x[2],y[2])
call SetUnitFacing(u[0],facing)call UnitApplyTimedLife(CreateUnit(p,'h04R',x[1],y[1],GetRandomReal(0,360)),'BTLF',1.)call UnitApplyTimedLife(CreateUnit(p,'h07I',x[1],y[1],GetRandomReal(0,360)),'BTLF',4.)set dmg=200.+(I2R(GetUnitAbilityLevel(u[0],HypnosisStrike___skId))*100.)
call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u[0]=nullset u[1]=nullcall TriggerSleepAction(.1)set facing=GetUnitFacing(u[2])call UnitApplyTimedLife(CreateUnit(p,'h013',x[0],y[0],facing),'BTLF',1.5)call UnitApplyTimedLife(CreateUnit(p,'h07G',x[0],y[0],facing),'BTLF',1.5)call RemoveUnit(u[2])set u[2]=nullset p=nullcall DestroyEffect(eff[0])call DestroyEffect(eff[1])set eff[0]=nullset eff[1]=nullendfunctionfunction HypnosisStrike___Init takes nothing returns nothing
set gg_trg_Hypnosis_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Hypnosis_Strike,Condition(function HypnosisStrike___Cond))call TriggerAddAction(gg_trg_Hypnosis_Strike,function HypnosisStrike___Act)endfunctionfunction HogyokuPower___LearnCond takes nothing returns booleanreturn(GetLearnedSkill()==HogyokuPower___skId)endfunctionfunction HogyokuPower___LearnAct takes nothing returns nothinglocal unit u=GetLearningUnit()local integer skLv=GetLearnedSkillLevel()if(skLv==1)thencall UnitAddAbility(u,HogyokuPower___statsSkill)
call UnitAddAbility(u,HogyokuPower___dmgSkill)call UnitAddAbility(u,'A08O')call UnitAddAbility(u,'A0KB')else
call SetUnitAbilityLevel(u,HogyokuPower___statsSkill,skLv)call SetUnitAbilityLevel(u,HogyokuPower___dmgSkill,skLv)
if(skLv==5)thencall DestroyTrigger(Aizen_Hogyoku_Learn)
set Aizen_Hogyoku_Learn=null
endifendifset u=nullendfunctionfunction HogyokuPower___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==HogyokuPower___skId)
endfunctionfunction HogyokuPower___ActL takes nothing returns nothinglocal real hp=GetUnitState(HogyokuPower___self,UNIT_STATE_LIFE)local timer tif(hp>1)and(hp<GetUnitState(HogyokuPower___self,UNIT_STATE_MAX_LIFE))thencall SetUnitState(HogyokuPower___self,UNIT_STATE_LIFE,(hp+HogyokuPower___healRate))else
set t=GetExpiredTimer()call PauseTimer(t)call DestroyTimer(t)
set t=nullset HogyokuPower___self=null
set HogyokuPower___p=nullcall DestroyEffect(HogyokuPower___eff[0])call DestroyEffect(HogyokuPower___eff[1])call DestroyEffect(HogyokuPower___eff[2])call DestroyEffect(HogyokuPower___eff[3])set HogyokuPower___eff[0]=nullset HogyokuPower___eff[1]=nullset HogyokuPower___eff[2]=nullset HogyokuPower___eff[3]=nullendifendfunctionfunction HogyokuPower___Act takes nothing returns nothinglocal timer tset HogyokuPower___self=GetTriggerUnit()
set HogyokuPower___p=GetOwningPlayer(HogyokuPower___self)if(HogyokuPower___eff[0]==null)thenset HogyokuPower___eff[0]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdx",HogyokuPower___self,"hand left")
set HogyokuPower___eff[1]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdx",HogyokuPower___self,"hand right")set HogyokuPower___eff[2]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainTarget.mdx",HogyokuPower___self,"chest")
set HogyokuPower___eff[3]=AddSpecialEffectTarget("AizenRegen.mdx",HogyokuPower___self,"origin")endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIre\\AIreTarget.mdx",HogyokuPower___self,"chest"))
set HogyokuPower___healRate=GetUnitState(HogyokuPower___self,UNIT_STATE_MAX_LIFE)*.02set t=CreateTimer()call TimerStart(t,.04,true,function HogyokuPower___ActL)
set t=nullendfunctionfunction HogyokuPower___Init takes nothing returns nothingset gg_trg_Hogyoku_Power=CreateTrigger()
call TriggerAddCondition(gg_trg_Hogyoku_Power,Condition(function HogyokuPower___Cond))call TriggerAddAction(gg_trg_Hogyoku_Power,function HogyokuPower___Act)call TriggerAddCondition(Aizen_Hogyoku_Learn,Condition(function HogyokuPower___LearnCond))call TriggerAddAction(Aizen_Hogyoku_Learn,function HogyokuPower___LearnAct)endfunctionfunction KyokyaSuigetsu___Cond takes nothing returns boolean
return(GetSpellAbilityId()==KyokyaSuigetsu___skId)endfunctionfunction KyokyaSuigetsu___Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local player p=GetOwningPlayer(self)
local real x=GetUnitX(self)local real y=GetUnitY(self)local real delay=.04
call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Aizen\\KyokaSuigetsu.wav",x,y)call DisplayText("Kyokya Suigetsu",self,.023,true,$FF,$FF,$FF,$FF)call SetPlayerAbilityAvailable(p,KyokyaSuigetsu___skId,false)call UnitAddAbility(self,KyokyaSuigetsu___bookId)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(self,KyokyaSuigetsu___buffId)<1)endloopcall UnitRemoveAbility(self,KyokyaSuigetsu___bookId)
call UnitRemoveAbility(self,'B04Y')call SetPlayerAbilityAvailable(p,KyokyaSuigetsu___skId,true)
set self=nullset p=nullendfunctionfunction KyokyaSuigetsu___Init takes nothing returns nothing
set gg_trg_Kyokya_Suigetsu=CreateTrigger()call TriggerAddCondition(gg_trg_Kyokya_Suigetsu,Condition(function KyokyaSuigetsu___Cond))call TriggerAddAction(gg_trg_Kyokya_Suigetsu,function KyokyaSuigetsu___Act)endfunctionfunction MirageStrike___BlinkStrike takes unit atker,unit atked returns nothinglocal real array xlocal real array ylocal real array rlocal integer iset x[0]=GetUnitX(atker)
set y[0]=GetUnitY(atker)
set x[1]=GetUnitX(atked)
set y[1]=GetUnitY(atked)
set r[0]=120.set r[1]=AngleBetweenXY(x[0],y[0],x[1],y[1])
set x[1]=PolarX(x[1],r[0],r[1])set y[1]=PolarY(y[1],r[0],r[1])set i=$A
set r[0]=DistanceBetweenXY(x[0],y[0],x[1],y[1])/ I2R(i)loop
exitwhen(i<1)set x[0]=PolarX(x[0],r[0],r[1])set y[0]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(MirageStrike___p,'h013',x[0],y[0],r[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=i-1endloopcall UnitMoveXY2(atker,x[1],y[1])call IssueTargetOrderById(atker,$D000F,atked)set atker=nullset atked=nullset MirageStrike___p=nullendfunctionfunction MirageStrike___SummonCond takes nothing returns boolean
return(GetUnitAbilityLevel(GetSummonedUnit(),MirageStrike___cloneBuff)>0)endfunctionfunction MirageStrike___SummonAct takes nothing returns nothinglocal unit sumUnit=GetSummonedUnit()
local real x
local real y
local integer skTemp
call DisableTrigger(MirageStrike___summonTrg)if(MirageStrike___self!=null)thenset x=GetUnitX(MirageStrike___self)set y=GetUnitY(MirageStrike___self)call SelectUnitAddForPlayer(sumUnit,MirageStrike___p)set bj_lastCreatedUnit=CreateUnit(MirageStrike___p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,MirageStrike___bloodlustSkill)call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,sumUnit)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitAddAbility(sumUnit,'A0K5')if(MirageStrike___target!=null)thencall IssueImmediateOrderById(sumUnit,$D0019)
call SetUnitAnimation(sumUnit,"attack")call UnitMoveXY2(sumUnit,x,y)call TriggerSleepAction(.01)
call MirageStrike___BlinkStrike(sumUnit,MirageStrike___target)else
call UnitMoveXY2(sumUnit,x,y)endifset MirageStrike___self=null
endifset MirageStrike___target=nullset sumUnit=null
endfunctionfunction MirageStrike___Cond takes nothing returns booleanlocal integer skTemp=GetSpellAbilityId()
return(skTemp==MirageStrike___skId1)or(skTemp==MirageStrike___skId2)
endfunctionfunction MirageStrike___Act takes nothing returns nothinglocal unit dummy
local real x
local real y
local integer skTemp
set MirageStrike___self=GetTriggerUnit()
set MirageStrike___target=GetSpellTargetUnit()set skTemp=GetSpellAbilityId()set MirageStrike___p=GetOwningPlayer(MirageStrike___self)set x=GetUnitX(MirageStrike___self)set y=GetUnitY(MirageStrike___self)set dummy=CreateUnit(MirageStrike___p,'h01A',x,y,GetRandomReal(0,360))call SetUnitScale(dummy,3.,3.,3.)call UnitApplyTimedLife(dummy,'BTLF',1.)
call UnitRemoveAbility(dummy,'Amov')
set bj_lastCreatedUnit=CreateUnit(MirageStrike___p,'h01H',x,y,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')if(skTemp==MirageStrike___skId1)then
call UnitAddAbility(bj_lastCreatedUnit,'A0K7')call IssueTargetOrderById(bj_lastCreatedUnit,$D00DD,MirageStrike___target)call UnitAddAbility(dummy,MirageStrike___bloodlustSkill)
call SetUnitAbilityLevel(dummy,MirageStrike___bloodlustSkill,2)call IssueTargetOrderById(dummy,$D0085,MirageStrike___self)set dummy=nullcall TriggerSleepAction(.01)
call MirageStrike___BlinkStrike(MirageStrike___self,MirageStrike___target)set MirageStrike___target=nullloop
call TriggerSleepAction(.1)exitwhen(GetUnitAbilityLevel(MirageStrike___self,'B04Y')<1)endloopset MirageStrike___self=null
else
call EnableTrigger(MirageStrike___summonTrg)
call UnitAddAbility(dummy,'A0K2')call IssueTargetOrderById(dummy,$D0132,MirageStrike___self)set dummy=nullcall TriggerSleepAction(.1)if(IsTriggerEnabled(MirageStrike___summonTrg))thencall DisableTrigger(MirageStrike___summonTrg)endifendifendfunctionfunction MirageStrike___Init takes nothing returns nothingset gg_trg_Mirage_Strike=CreateTrigger()
call TriggerAddCondition(gg_trg_Mirage_Strike,Condition(function MirageStrike___Cond))call TriggerAddAction(gg_trg_Mirage_Strike,function MirageStrike___Act)set MirageStrike___summonTrg=CreateTrigger()
call DisableTrigger(MirageStrike___summonTrg)call TriggerRegisterAnyUnitEventBJ(MirageStrike___summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(MirageStrike___summonTrg,Condition(function MirageStrike___SummonCond))
call TriggerAddAction(MirageStrike___summonTrg,function MirageStrike___SummonAct)endfunctionfunction Trig_Khg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08V')endfunctionfunction Trig_Khg_Actions takes nothing returns nothingset udg_Khg_Unit[0]=GetTriggerUnit()
set udg_Khg_Unit[1]=GetSpellTargetUnit()
call SetUnitInvulnerable(udg_Khg_Unit[0],true)call SetUnitInvulnerable(udg_Khg_Unit[1],true)call PauseSystem(udg_Khg_Unit[0],true)call PauseSystem(udg_Khg_Unit[1],true)call SetUnitAnimation(udg_Khg_Unit[0],"spell")call DisplayText("Hado #90. Kurohitsugi",udg_Khg_Unit[0],.023,false,$DC,5,5,$FF)
set udg_Khg_Own=GetOwningPlayer(udg_Khg_Unit[0])
set udg_Khg_Dmg=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A08V',udg_Khg_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Khg_Unit[0],false))))set udg_Khg_Int=7set udg_Khg_Delay=.3
call Dynamic_Sound("Sounds\\Kurohitsugi.mp3")call EnableTrigger(gg_trg_KhgL)endfunctionfunction InitTrig_Khg takes nothing returns nothingset gg_trg_Khg=CreateTrigger()call TriggerAddCondition(gg_trg_Khg,Condition(function Trig_Khg_Conditions))
call TriggerAddAction(gg_trg_Khg,function Trig_Khg_Actions)endfunctionfunction Trig_KhgL_Func001Func028C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Khg_Unit[0]))and(IsUnitAliveBJ(udg_Khg_Unit[1]))endfunctionfunction Trig_KhgL_Func001C takes nothing returns booleanreturn(udg_Khg_Int>0)and(IsUnitAliveBJ(udg_Khg_Unit[0]))and(IsUnitAliveBJ(udg_Khg_Unit[1]))endfunctionfunction Trig_KhgL_Actions takes nothing returns nothing
if(Trig_KhgL_Func001C())then
set udg_Khg_Loc[0]=GetUnitLoc(udg_Khg_Unit[0])set udg_Khg_Loc[1]=GetUnitLoc(udg_Khg_Unit[1])call CreateNUnitsAtLoc(1,'h01A',udg_Khg_Own,udg_Khg_Loc[1],bj_UNIT_FACING)set udg_Khg_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h039',udg_Khg_Own,udg_Khg_Loc[0],bj_UNIT_FACING)set udg_Khg_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h039',udg_Khg_Own,udg_Khg_Loc[1],bj_UNIT_FACING)set udg_Khg_Unit[4]=bj_lastCreatedUnitcall Dynamic_GroupShake(GetLocationX(udg_Khg_Loc[1]),GetLocationY(udg_Khg_Loc[1]),.5,9.,udg_CameraArea,null)
call RemoveLocation(udg_Khg_Loc[0])set udg_Khg_Loc[0]=nullcall RemoveLocation(udg_Khg_Loc[1])set udg_Khg_Loc[1]=nullcall SetUnitTimeScalePercent(udg_Khg_Unit[2],200.)call SetUnitScalePercent(udg_Khg_Unit[3],800.,800.,800.)
call SetUnitScalePercent(udg_Khg_Unit[4],800.,800.,800.)
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Khg_Unit[2])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[4])
set udg_Khg_Unit[2]=null
set udg_Khg_Unit[3]=null
set udg_Khg_Unit[4]=null
set udg_Khg_Int=(udg_Khg_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_KhgL_Func001Func028C())thenset udg_Khg_Loc[0]=GetUnitLoc(udg_Khg_Unit[0])set udg_Khg_Loc[1]=GetUnitLoc(udg_Khg_Unit[1])call CreateNUnitsAtLoc(1,'h01A',udg_Khg_Own,udg_Khg_Loc[1],bj_UNIT_FACING)set udg_Khg_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h07L',udg_Khg_Own,udg_Khg_Loc[1],bj_UNIT_FACING)set udg_Khg_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h07L',udg_Khg_Own,udg_Khg_Loc[1],GetRandomReal(0,360))
set udg_Khg_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h039',udg_Khg_Own,udg_Khg_Loc[0],bj_UNIT_FACING)set udg_Khg_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h039',udg_Khg_Own,udg_Khg_Loc[1],bj_UNIT_FACING)set udg_Khg_Unit[6]=bj_lastCreatedUnitcall RemoveLocation(udg_Khg_Loc[0])set udg_Khg_Loc[0]=nullcall RemoveLocation(udg_Khg_Loc[1])set udg_Khg_Loc[1]=nullcall SetUnitAnimation(udg_Khg_Unit[3],"spell")call SetUnitAnimation(udg_Khg_Unit[4],"spell")call SetUnitTimeScalePercent(udg_Khg_Unit[2],200.)call SetUnitScalePercent(udg_Khg_Unit[5],800.,800.,800.)
call SetUnitScalePercent(udg_Khg_Unit[6],800.,800.,800.)
call UnitApplyTimedLifeBJ(2.,'BTLF',udg_Khg_Unit[2])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[5])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[6])
set udg_Khg_Unit[2]=null
set udg_Khg_Unit[5]=null
set udg_Khg_Unit[6]=null
call SetUnitTimeScalePercent(udg_Khg_Unit[3],80.)call SetUnitTimeScalePercent(udg_Khg_Unit[4],80.)call SetUnitScalePercent(udg_Khg_Unit[4],50.,50.,50.)call SetUnitVertexColorBJ(udg_Khg_Unit[4],'d','d','d',100.)call TriggerSleepAction(.9)call SetUnitTimeScalePercent(udg_Khg_Unit[3],.0)
call SetUnitTimeScalePercent(udg_Khg_Unit[4],.0)
call SetUnitVertexColorBJ(udg_Khg_Unit[4],'d',100.,100.,.0)call TriggerSleepAction(udg_Khg_Delay)call Dynamic_Sound("Sounds\\KurohitsugiEnd.mp3")
call TriggerSleepAction(.8)call SetUnitTimeScalePercent(udg_Khg_Unit[3],100.)call SetUnitTimeScalePercent(udg_Khg_Unit[4],100.)call TriggerSleepAction(.22)
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[3])
call UnitApplyTimedLifeBJ(3.,'BTLF',udg_Khg_Unit[4])
set udg_Khg_Unit[3]=null
set udg_Khg_Unit[4]=null
call SetUnitInvulnerable(udg_Khg_Unit[0],false)call SetUnitInvulnerable(udg_Khg_Unit[1],false)call PauseSystem(udg_Khg_Unit[0],false)call PauseSystem(udg_Khg_Unit[1],false)call QueueUnitAnimation(udg_Khg_Unit[0],"stand")
set udg_Khg_Loc[0]=GetUnitLoc(udg_Khg_Unit[1])call CreateNUnitsAtLoc(1,'h07K',udg_Khg_Own,udg_Khg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(4.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'O005',udg_Khg_Own,udg_Khg_Loc[0],bj_UNIT_FACING)set udg_Khg_Unit[2]=bj_lastCreatedUnitcall SetUnitVertexColorBJ(udg_Khg_Unit[2],.0,.0,.0,100.)
set udg_Khg_Int=0loop
exitwhen udg_Khg_Int>3call CreateNUnitsAtLoc(1,'h07M',udg_Khg_Own,udg_Khg_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLifeBJ(3.,'BTLF',bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h07I',udg_Khg_Own,udg_Khg_Loc[0],GetRandomReal(0,360))
set udg_Khg_Unit[3]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Khg_Unit[3],300.,300.,300.)
call UnitApplyTimedLifeBJ(4.,'BTLF',udg_Khg_Unit[3])
set udg_Khg_Unit[3]=null
set udg_Khg_Int=udg_Khg_Int+1endloopcall Dynamic_GroupShake(GetLocationX(udg_Khg_Loc[0]),GetLocationY(udg_Khg_Loc[0]),1.2,19,udg_CameraArea,null)call RemoveLocation(udg_Khg_Loc[0])set udg_Khg_Loc[0]=nullcall SetUnitScalePercent(udg_Khg_Unit[2],400.,400.,400.)
call DestroyEffect(AddSpecialEffectTarget("Darkblast.mdl",udg_Khg_Unit[2],"origin"))
call DestroyEffect(AddSpecialEffectTarget("Darkblast.mdl",udg_Khg_Unit[2],"origin"))
call UnitApplyTimedLifeBJ(1.,'BTLF',udg_Khg_Unit[2])
set udg_Khg_Unit[2]=null
call DisplayText(I2S(R2I(udg_Khg_Dmg))+"!",udg_Khg_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTargetBJ(udg_Khg_Unit[0],udg_Khg_Unit[1],udg_Khg_Dmg,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
else
call SetUnitInvulnerable(udg_Khg_Unit[0],false)call SetUnitInvulnerable(udg_Khg_Unit[1],false)call PauseSystem(udg_Khg_Unit[0],false)call PauseSystem(udg_Khg_Unit[1],false)endifset udg_Khg_Own=null
set udg_Khg_Unit[0]=null
set udg_Khg_Unit[1]=null
set udg_Khg_Dmg=.0set udg_Khg_Delay=.0
set udg_Khg_Int=0endifendfunctionfunction InitTrig_KhgL takes nothing returns nothing
set gg_trg_KhgL=CreateTrigger()call DisableTrigger(gg_trg_KhgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KhgL,.4)call TriggerAddAction(gg_trg_KhgL,function Trig_KhgL_Actions)endfunctionfunction AIAce___isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIAce___AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIAce___isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIAce___AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIAce___Cond takes nothing returns booleanif(not(AIAce___isAtked()or AIAce___isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIAce___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIAce___AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIAce___isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A09D')call SelectHeroSkill(mySelf,'A09C')call SelectHeroSkill(mySelf,'A09B')call SelectHeroSkill(mySelf,'A099')call SelectHeroSkill(mySelf,'A098')endifcall IssueTargetOrderById(mySelf,$D009D,myTarget)if(isHeroTarget)and(isAttacking)then
call IssueImmediateOrderById(mySelf,$D0080)call IssueImmediateOrderById(mySelf,$D022E)call IssueTargetOrderById(mySelf,$D0270,myTarget)endifif(isAttacking)thencall IssueImmediateOrderById(mySelf,$D0084)endifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIAce___AINo])endfunctionfunction AIAce___Init takes nothing returns nothingset udg_AI_Trig[AIAce___AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIAce___AINo],Condition(function AIAce___Cond))
call TriggerAddAction(udg_AI_Trig[AIAce___AINo],function AIAce___Act)endfunctionfunction FireSkin___Cond takes nothing returns booleanlocal unit atker=GetAttacker()local unit atked=GetTriggerUnit()local real dmgif(DistanceBetweenXY(GetUnitX(atker),GetUnitY(atker),GetUnitX(atked),GetUnitY(atked))<FireSkin___dist)thenset dmg=(20.+(.05*GetUnitState(atker,UNIT_STATE_LIFE)))call DestroyEffect(AddSpecialEffectTarget("ImmolationFireDamage.mdx",atker,"chest"))
call UnitPureDamageTarget(atked,atker,dmg)endifset atker=nullset atked=nullreturn false
endfunctionfunction FireSkin___Init takes nothing returns nothingset gg_trg_Fire_Skin=CreateTrigger()
call TriggerAddCondition(gg_trg_Fire_Skin,Condition(function FireSkin___Cond))endfunctionfunction Trig_Hik_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A098')endfunctionfunction Trig_Hik_Actions takes nothing returns nothingset udg_Hik_Unit[0]=GetTriggerUnit()
set udg_Hik_Loc[0]=GetSpellTargetLoc()set udg_Hik_Loc[1]=GetUnitLoc(udg_Hik_Unit[0])set udg_Hik_Real[0]=AngleBetweenPoints(udg_Hik_Loc[1],udg_Hik_Loc[0])set udg_Hik_Loc[2]=PolarProjectionBJ(udg_Hik_Loc[1],160.,udg_Hik_Real[0])call RemoveLocation(udg_Hik_Loc[0])set udg_Hik_Loc[0]=nullcall RemoveLocation(udg_Hik_Loc[1])set udg_Hik_Loc[1]=nullset udg_Hik_Own=GetOwningPlayer(udg_Hik_Unit[0])
call CreateNUnitsAtLoc(1,'h03H',udg_Hik_Own,udg_Hik_Loc[2],udg_Hik_Real[0])set udg_Hik_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Hik_Loc[2])set udg_Hik_Loc[2]=nullcall SetUnitFlyHeight(udg_Hik_Unit[1],.0,.0)
call SetUnitScalePercent(udg_Hik_Unit[1],250.,250.,250.)
call DisplayText("Hiken",udg_Hik_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Ace\\Hiken.wav",GetUnitX(udg_Hik_Unit[0]),GetUnitY(udg_Hik_Unit[0]))set udg_Hik_Real[1]=46.set udg_Hik_Real[2]=300.
set udg_Hik_Real[3]=BasicDmg_Q(udg_Hik_Unit[0],'A098',1)
set udg_Hik_Int[0]=20set udg_Hik_Int[1]=2
call EnableTrigger(gg_trg_HikL)endfunctionfunction InitTrig_Hik takes nothing returns nothingset gg_trg_Hik=CreateTrigger()call TriggerAddCondition(gg_trg_Hik,Condition(function Trig_Hik_Conditions))
call TriggerAddAction(gg_trg_Hik,function Trig_Hik_Actions)endfunctionfunction Trig_HikL_Func002Func018002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Hik_Group2)==false)
endfunctionfunction Trig_HikL_Func002Func018002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hik_Own))
endfunctionfunction Trig_HikL_Func002Func018002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HikL_Func002Func018002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HikL_Func002Func018002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HikL_Func002Func018002003002002001(),Trig_HikL_Func002Func018002003002002002())endfunctionfunction Trig_HikL_Func002Func018002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HikL_Func002Func018002003002001(),Trig_HikL_Func002Func018002003002002())endfunctionfunction Trig_HikL_Func002Func018002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HikL_Func002Func018002003001(),Trig_HikL_Func002Func018002003002())endfunctionfunction Trig_HikL_Func002Func021A takes nothing returns nothing
set udg_Hik_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Hik_Group2,udg_Hik_Unit[2])set udg_Hik_Loc[0]=GetUnitLoc(udg_Hik_Unit[2])call CreateNUnitsAtLoc(1,'h081',udg_Hik_Own,udg_Hik_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(udg_Hik_Loc[0])set udg_Hik_Loc[0]=nullcall UnitDamageTargetBJ(udg_Hik_Unit[0],udg_Hik_Unit[2],udg_Hik_Real[3],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Hik_Unit[2]=null
endfunctionfunction Trig_HikL_Func002C takes nothing returns booleanreturn(udg_Hik_Int[0]>0)
endfunctionfunction Trig_HikL_Actions takes nothing returns nothing
if(Trig_HikL_Func002C())then
set udg_Hik_Loc[0]=GetUnitLoc(udg_Hik_Unit[1])set udg_Hik_Loc[1]=PolarProjectionBJ(udg_Hik_Loc[0],udg_Hik_Real[1],udg_Hik_Real[0])
call RemoveLocation(udg_Hik_Loc[0])set udg_Hik_Loc[0]=nullcall SetUnitPositionLoc(udg_Hik_Unit[1],udg_Hik_Loc[1])if(udg_Hik_Int[1]==2)thencall CreateNUnitsAtLoc(1,'h080',udg_Hik_Own,udg_Hik_Loc[1],udg_Hik_Real[0])set udg_Hik_Unit[2]=bj_lastCreatedUnitcall UnitApplyTimedLife(udg_Hik_Unit[2],'BTLF',1.5)call SetUnitTimeScalePercent(udg_Hik_Unit[2],140.)set udg_Hik_Unit[2]=null
set udg_Hik_Int[1]=0
else
set udg_Hik_Int[1]=(udg_Hik_Int[1]+1)endifcall EnumDestructablesInCircleBJ(udg_Hik_Real[2],udg_Hik_Loc[1],function TreeKiller)
set udg_Hik_Group=GetUnitsInRangeOfLocMatching(udg_Hik_Real[2],udg_Hik_Loc[1],Condition(function Trig_HikL_Func002Func018002003))call RemoveLocation(udg_Hik_Loc[1])set udg_Hik_Loc[1]=nullcall ForGroupBJ(udg_Hik_Group,function Trig_HikL_Func002Func021A)call DestroyGroup(udg_Hik_Group)
set udg_Hik_Group=nullset udg_Hik_Int[0]=(udg_Hik_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Hik_Unit[1])
call GroupClear(udg_Hik_Group2)set udg_Hik_Own=null
set udg_Hik_Unit[0]=null
set udg_Hik_Unit[1]=null
set udg_Hik_Real[0]=.0set udg_Hik_Real[1]=.0set udg_Hik_Real[2]=.0set udg_Hik_Real[3]=.0set udg_Hik_Int[0]=0
set udg_Hik_Int[1]=0
endifendfunctionfunction InitTrig_HikL takes nothing returns nothing
set gg_trg_HikL=CreateTrigger()call DisableTrigger(gg_trg_HikL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HikL,.04)call TriggerAddAction(gg_trg_HikL,function Trig_HikL_Actions)endfunctionfunction FireShield___Cond takes nothing returns boolean
return(GetSpellAbilityId()==FireShield___skId)endfunctionfunction FireShield___Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit pickedlocal player p=GetOwningPlayer(self)
local real dmg=I2R(((50+(GetUnitAbilityLevel(self,FireShield___skId)*30))+(GetHeroLevel(self)*4))/ 2)local real delay=.5local real garea=300.local real tarea=200.local real x
local real y
local group glocal integer buffId='B01Z'local integer skArmor='A09E'
call UnitAddAbility(self,skArmor)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(self,buffId)<1)
set x=GetUnitX(self)
set y=GetUnitY(self)
call DestroyTreeXY(x,y,tarea)set g=CreateGroupXY(x,y,garea,p)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdx",picked,"chest"))call UnitPureDamageTarget(self,picked,dmg)endloopcall DestroyGroup(g)
set g=nullendloopcall UnitRemoveAbility(self,skArmor)
set self=nullset p=nullendfunctionfunction FireShield___Init takes nothing returns nothing
set gg_trg_Fire_Shield=CreateTrigger()call TriggerAddCondition(gg_trg_Fire_Shield,Condition(function FireShield___Cond))call TriggerAddAction(gg_trg_Fire_Shield,function FireShield___Act)endfunctionfunction Hibashira___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Hibashira___skId)endfunctionfunction Hibashira___Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit pickedlocal player p=GetOwningPlayer(self)
local real array dmg
local real delay=.5local real garea=350.local real x=GetUnitX(self)local real y=GetUnitY(self)local group glocal group gtemplocal integer ilocal integer countcall DisplayText("Hibashira",self,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Ace\\Hibashira.wav",x,y)set i=GetUnitAbilityLevel(self,Hibashira___skId)
set dmg[0]=I2R($C8+(i*'d'))set dmg[1]=I2R((2+i)*GetHeroAgi(self,true))set dmg[2]=I2R(('}'+(25*i))/ 2)call UnitApplyTimedLife(CreateUnit(p,'h084',x,y,GetRandomReal(0,360)),'BTLF',2.)
set bj_lastCreatedUnit=CreateUnit(p,'h083',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',14.)set bj_lastCreatedUnit=CreateUnit(p,'h082',x,y,GetRandomReal(0,360))
call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call DestroyTreeXY(x,y,garea)set g=CreateGroupXY(x,y,garea,p)
set gtemp=CreateGroup()loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call UnitDamageTarget(self,picked,dmg[0],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call UnitDamageTarget(self,picked,dmg[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetUnitState(picked,UNIT_STATE_LIFE)>0)thencall GroupAddUnit(gtemp,picked)endifendloopcall DestroyGroup(g)
set g=nullcall TriggerSleepAction(delay)set i=6loop
exitwhen(i<1)set count=0set g=CreateGroup()call GroupAddGroup(gtemp,g)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set count=count+1call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdx",picked,"chest"))call UnitPureDamageTarget(self,picked,dmg[2])if(GetUnitState(picked,UNIT_STATE_LIFE)<1)thencall GroupRemoveUnit(gtemp,picked)endifendloopcall DestroyGroup(g)
set g=nullif(count>0)thencall TriggerSleepAction(delay)set i=i-1else
set i=0endifendloopcall DestroyGroup(gtemp)
set gtemp=nullset self=nullset p=nullendfunctionfunction Hibashira___Init takes nothing returns nothingset gg_trg_Hibashira=CreateTrigger()
call TriggerAddCondition(gg_trg_Hibashira,Condition(function Hibashira___Cond))call TriggerAddAction(gg_trg_Hibashira,function Hibashira___Act)
endfunctionfunction Trig_Hdb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09C')endfunctionfunction Trig_Hdb_Func011002003001 takes nothing returns boolean
return(IsUnitType(GetFilterUnit(),UNIT_TYPE_HERO))!=null
endfunctionfunction Trig_Hdb_Func011002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hdb_Own))
endfunctionfunction Trig_Hdb_Func011002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Hdb_Func011002003002002002001 takes nothing returns booleanreturn(IsUnitIllusion(GetFilterUnit())==false)endfunctionfunction Trig_Hdb_Func011002003002002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[6],GetFilterUnit())==0)endfunctionfunction Trig_Hdb_Func011002003002002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Hdb_Func011002003002002002001(),Trig_Hdb_Func011002003002002002002())endfunctionfunction Trig_Hdb_Func011002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Hdb_Func011002003002002001(),Trig_Hdb_Func011002003002002002())endfunctionfunction Trig_Hdb_Func011002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Hdb_Func011002003002001(),Trig_Hdb_Func011002003002002())endfunctionfunction Trig_Hdb_Func011002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Hdb_Func011002003001(),Trig_Hdb_Func011002003002())endfunctionfunction Trig_Hdb_Func014A takes nothing returns nothing
if(udg_Hdb_Int[0]<4)then
set udg_Hdb_Unit[1]=GetEnumUnit()set udg_Hdb_Loc[0]=GetUnitLoc(udg_Hdb_Unit[0])set udg_Hdb_Int[1]=1
loop
exitwhen udg_Hdb_Int[1]>3set udg_Hdb_Max=(udg_Hdb_Max+1)set udg_Hdb_Int[2]=udg_Hdb_Int[2]+1set udg_Hdb_Loc[1]=PolarProjectionBJ(udg_Hdb_Loc[0],GetRandomReal(-120.,119.),GetRandomReal(0,360))call CreateNUnitsAtLoc(1,'h085',udg_Hdb_Own,udg_Hdb_Loc[1],bj_UNIT_FACING)set udg_Hdb_Unit[udg_Hdb_Int[2]]=bj_lastCreatedUnitcall RemoveLocation(udg_Hdb_Loc[1])set udg_Hdb_Loc[1]=nullcall SetUnitFlyHeight(udg_Hdb_Unit[udg_Hdb_Int[2]],GetRandomReal(40.,150.),200.)
set udg_Hdb_Int[3]=GetHandleId(udg_Hdb_Unit[udg_Hdb_Int[2]])
set udg_Hdb_Loc[2]=GetUnitLoc(udg_Hdb_Unit[1])set udg_Hdb_Loc[3]=PolarProjectionBJ(udg_Hdb_Loc[2],GetRandomReal(-220.,219.),GetRandomReal(0,360))call RemoveLocation(udg_Hdb_Loc[2])set udg_Hdb_Loc[2]=nullcall SaveReal(udg_Hdb_Hash,udg_Hdb_Int[3],0,GetLocationX(udg_Hdb_Loc[3]))call SaveReal(udg_Hdb_Hash,udg_Hdb_Int[3],1,GetLocationY(udg_Hdb_Loc[3]))call IssuePointOrderByIdLoc(udg_Hdb_Unit[udg_Hdb_Int[2]],$D0003,udg_Hdb_Loc[3])call RemoveLocation(udg_Hdb_Loc[3])set udg_Hdb_Loc[3]=nullset udg_Hdb_Int[1]=udg_Hdb_Int[1]+1endloopcall RemoveLocation(udg_Hdb_Loc[0])set udg_Hdb_Loc[0]=nullset udg_Hdb_Unit[1]=null
set udg_Hdb_Int[0]=udg_Hdb_Int[0]+1endifendfunctionfunction Trig_Hdb_Actions takes nothing returns nothingset udg_Hdb_Unit[0]=GetTriggerUnit()
call DisplayText("Hotarubi",udg_Hdb_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Ace\\Hotarubi.wav",GetUnitX(udg_Hdb_Unit[0]),GetUnitY(udg_Hdb_Unit[0]))
set udg_Hdb_Real[0]=(700.+(100.*I2R(GetUnitAbilityLevelSwapped('A09C',udg_Hdb_Unit[0]))))set udg_Hdb_Real[1]=300.
set udg_Hdb_Own=GetOwningPlayer(udg_Hdb_Unit[0])
set udg_Hdb_Hash=InitHashtable()
set udg_Hdb_Int[2]=2
set udg_Hdb_Loc[0]=GetUnitLoc(udg_Hdb_Unit[0])set udg_Hdb_Group=GetUnitsInRangeOfLocMatching(2000.,udg_Hdb_Loc[0],Condition(function Trig_Hdb_Func011002003))call RemoveLocation(udg_Hdb_Loc[0])set udg_Hdb_Loc[0]=nullcall ForGroupBJ(udg_Hdb_Group,function Trig_Hdb_Func014A)call DestroyGroup(udg_Hdb_Group)
set udg_Hdb_Group=nullset udg_Hdb_Int[1]=0
call TriggerSleepAction(1.8)
call EnableTrigger(gg_trg_HdbL)endfunctionfunction InitTrig_Hdb takes nothing returns nothingset gg_trg_Hdb=CreateTrigger()call TriggerAddCondition(gg_trg_Hdb,Condition(function Trig_Hdb_Conditions))
call TriggerAddAction(gg_trg_Hdb,function Trig_Hdb_Actions)endfunctionfunction Trig_HdbL_Func001Func001Func020002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Hdb_Group2)==false)
endfunctionfunction Trig_HdbL_Func001Func001Func020002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hdb_Own))
endfunctionfunction Trig_HdbL_Func001Func001Func020002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HdbL_Func001Func001Func020002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HdbL_Func001Func001Func020002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HdbL_Func001Func001Func020002003002002001(),Trig_HdbL_Func001Func001Func020002003002002002())endfunctionfunction Trig_HdbL_Func001Func001Func020002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HdbL_Func001Func001Func020002003002001(),Trig_HdbL_Func001Func001Func020002003002002())endfunctionfunction Trig_HdbL_Func001Func001Func020002003 takes nothing returns boolean
return GetBooleanAnd(Trig_HdbL_Func001Func001Func020002003001(),Trig_HdbL_Func001Func001Func020002003002())endfunctionfunction Trig_HdbL_Func001Func001Func021A takes nothing returns nothingset udg_Hdb_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Hdb_Group2,udg_Hdb_Unit[2])call UnitPureDamageTarget(udg_Hdb_Unit[0],udg_Hdb_Unit[2],udg_Hdb_Real[0])set udg_Hdb_Unit[2]=null
endfunctionfunction Trig_HdbL_Func001Func004Func013002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Hdb_Group2)==false)
endfunctionfunction Trig_HdbL_Func001Func004Func013002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hdb_Own))
endfunctionfunction Trig_HdbL_Func001Func004Func013002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HdbL_Func001Func004Func013002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HdbL_Func001Func004Func013002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HdbL_Func001Func004Func013002003002002001(),Trig_HdbL_Func001Func004Func013002003002002002())endfunctionfunction Trig_HdbL_Func001Func004Func013002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HdbL_Func001Func004Func013002003002001(),Trig_HdbL_Func001Func004Func013002003002002())endfunctionfunction Trig_HdbL_Func001Func004Func013002003 takes nothing returns boolean
return GetBooleanAnd(Trig_HdbL_Func001Func004Func013002003001(),Trig_HdbL_Func001Func004Func013002003002())endfunctionfunction Trig_HdbL_Func001Func004Func016A takes nothing returns nothingset udg_Hdb_Unit[2]=GetEnumUnit()set udg_Hdb_Real[2]=GetUnitStateSwap(UNIT_STATE_LIFE,udg_Hdb_Unit[2])if(udg_Hdb_Real[0]<udg_Hdb_Real[2])thencall SetWidgetLife(udg_Hdb_Unit[2],(udg_Hdb_Real[2]-udg_Hdb_Real[0]))call CreateNUnitsAtLoc(1,'u003',udg_Hdb_Own,udg_Hdb_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],bj_lastCreatedUnit,2)
call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Hdb_Unit[2])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Hdb_Loc[1])set udg_Hdb_Loc[1]=nullelse
call SetWidgetLife(udg_Hdb_Unit[2],1.)call UnitDamageTargetBJ(udg_Hdb_Unit[0],udg_Hdb_Unit[2],udg_Hdb_Real[0],ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)endifset udg_Hdb_Unit[2]=null
endfunctionfunction Trig_HdbL_Func001C takes nothing returns booleanreturn(udg_Hdb_Int[1]!=udg_Hdb_Max)and(udg_Hdb_Int[2]<40)endfunctionfunction Trig_HdbL_Actions takes nothing returns nothing
if(Trig_HdbL_Func001C())then
set udg_Hdb_Int[0]=3
loop
exitwhen udg_Hdb_Int[0]>udg_Hdb_Int[2]if(udg_Hdb_Unit[udg_Hdb_Int[0]]!=null)thenset udg_Hdb_Int[3]=GetHandleId(udg_Hdb_Unit[udg_Hdb_Int[0]])
set udg_Hdb_Loc[0]=GetUnitLoc(udg_Hdb_Unit[udg_Hdb_Int[0]])set udg_Hdb_Loc[1]=Location(LoadReal(udg_Hdb_Hash,udg_Hdb_Int[3],0),LoadReal(udg_Hdb_Hash,udg_Hdb_Int[3],1))
if(DistanceBetweenPoints(udg_Hdb_Loc[0],udg_Hdb_Loc[1])<110.)thenif(udg_Hdb_Bool==false)thenset udg_Hdb_Bool=truecall DisplayText("Hidaruma",udg_Hdb_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Ace\\Hidaruma.wav",GetUnitX(udg_Hdb_Unit[0]),GetUnitY(udg_Hdb_Unit[0]))
endifset udg_Hdb_Int[1]=udg_Hdb_Int[1]+1call CreateNUnitsAtLoc(1,'h081',udg_Hdb_Own,udg_Hdb_Loc[0],GetRandomReal(0,360))
set udg_Hdb_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h082',udg_Hdb_Own,udg_Hdb_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call RemoveUnit(udg_Hdb_Unit[udg_Hdb_Int[0]])set udg_Hdb_Unit[udg_Hdb_Int[0]]=nullcall EnumDestructablesInCircleBJ(udg_Hdb_Real[1],udg_Hdb_Loc[0],function TreeKiller)
set udg_Hdb_Group=GetUnitsInRangeOfLocMatching(udg_Hdb_Real[1],udg_Hdb_Loc[0],Condition(function Trig_HdbL_Func001Func001Func020002003))
call ForGroupBJ(udg_Hdb_Group,function Trig_HdbL_Func001Func001Func021A)
call DestroyGroup(udg_Hdb_Group)
set udg_Hdb_Group=nullcall UnitApplyTimedLife(udg_Hdb_Unit[1],'BTLF',2.)call SetUnitScalePercent(udg_Hdb_Unit[1],400.,400.,400.)
call SetUnitFlyHeight(udg_Hdb_Unit[1],GetUnitFlyHeight(udg_Hdb_Unit[udg_Hdb_Int[0]]),.0)
set udg_Hdb_Unit[1]=null
endifcall RemoveLocation(udg_Hdb_Loc[0])set udg_Hdb_Loc[0]=nullcall RemoveLocation(udg_Hdb_Loc[1])set udg_Hdb_Loc[1]=nullendifset udg_Hdb_Int[0]=udg_Hdb_Int[0]+1endloopset udg_Hdb_Int[2]=(udg_Hdb_Int[2]+1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Hdb_Int[0]=3
loop
exitwhen udg_Hdb_Int[0]>udg_Hdb_Int[2]if(udg_Hdb_Unit[udg_Hdb_Int[0]]!=null)thenset udg_Hdb_Loc[0]=GetUnitLoc(udg_Hdb_Unit[udg_Hdb_Int[0]])call CreateNUnitsAtLoc(1,'h082',udg_Hdb_Own,udg_Hdb_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call CreateNUnitsAtLoc(1,'h081',udg_Hdb_Own,udg_Hdb_Loc[0],GetRandomReal(0,360))
set udg_Hdb_Unit[1]=bj_lastCreatedUnitcall UnitApplyTimedLife(udg_Hdb_Unit[1],'BTLF',4.)call SetUnitFlyHeight(udg_Hdb_Unit[1],GetUnitFlyHeight(udg_Hdb_Unit[udg_Hdb_Int[0]]),.0)
call RemoveUnit(udg_Hdb_Unit[udg_Hdb_Int[0]])set udg_Hdb_Unit[udg_Hdb_Int[0]]=nullcall EnumDestructablesInCircleBJ(udg_Hdb_Real[1],udg_Hdb_Loc[0],function TreeKiller)
set udg_Hdb_Group=GetUnitsInRangeOfLocMatching(udg_Hdb_Real[1],udg_Hdb_Loc[0],Condition(function Trig_HdbL_Func001Func004Func013002003))
call RemoveLocation(udg_Hdb_Loc[0])set udg_Hdb_Loc[0]=nullcall ForGroupBJ(udg_Hdb_Group,function Trig_HdbL_Func001Func004Func016A)
call DestroyGroup(udg_Hdb_Group)
set udg_Hdb_Group=nullcall UnitApplyTimedLife(udg_Hdb_Unit[1],'BTLF',4.)call SetUnitFlyHeight(udg_Hdb_Unit[1],GetUnitFlyHeight(udg_Hdb_Unit[udg_Hdb_Int[0]]),.0)
set udg_Hdb_Unit[1]=null
endifset udg_Hdb_Int[0]=udg_Hdb_Int[0]+1endloopcall GroupClear(udg_Hdb_Group2)call FlushParentHashtableBJ(udg_Hdb_Hash)set udg_Hdb_Hash=nullset udg_Hdb_Own=null
set udg_Hdb_Unit[0]=null
set udg_Hdb_Real[0]=.0set udg_Hdb_Real[1]=.0set udg_Hdb_Real[2]=.0set udg_Hdb_Int[0]=0
set udg_Hdb_Int[1]=0
set udg_Hdb_Int[2]=0
set udg_Hdb_Int[3]=0
set udg_Hdb_Max=0set udg_Hdb_Bool=falseendifendfunctionfunction InitTrig_HdbL takes nothing returns nothing
set gg_trg_HdbL=CreateTrigger()call DisableTrigger(gg_trg_HdbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HdbL,.1)call TriggerAddAction(gg_trg_HdbL,function Trig_HdbL_Actions)endfunctionfunction Trig_Eti_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09D')endfunctionfunction Trig_Eti_Actions takes nothing returns nothingset udg_Eti_Unit[0]=GetTriggerUnit()
set udg_Eti_Loc[0]=GetSpellTargetLoc()set udg_Eti_Loc[1]=GetUnitLoc(udg_Eti_Unit[0])set udg_Eti_Real[0]=GetLocationX(udg_Eti_Loc[0])
set udg_Eti_Real[1]=GetLocationY(udg_Eti_Loc[0])
set udg_Eti_Real[2]=AngleBetweenPoints(udg_Eti_Loc[1],udg_Eti_Loc[0])set udg_Eti_Own=GetOwningPlayer(udg_Eti_Unit[0])
call CreateNUnitsAtLoc(1,'h07Z',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)set udg_Eti_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h086',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)set udg_Eti_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h086',udg_Eti_Own,udg_Eti_Loc[1],GetRandomReal(0,360))
set udg_Eti_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h087',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)set udg_Eti_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h087',udg_Eti_Own,udg_Eti_Loc[1],GetRandomReal(0,360))
set udg_Eti_Unit[5]=bj_lastCreatedUnitcall RemoveLocation(udg_Eti_Loc[0])set udg_Eti_Loc[0]=nullcall RemoveLocation(udg_Eti_Loc[1])set udg_Eti_Loc[1]=nullcall PauseSystem(udg_Eti_Unit[0],true)call SetUnitAnimation(udg_Eti_Unit[0],"spell two")call SetUnitScalePercent(udg_Eti_Unit[1],1000.,1000.,1000.)call SetUnitFlyHeight(udg_Eti_Unit[1],120.,.0)call SetUnitTimeScalePercent(udg_Eti_Unit[2],40.)call SetUnitTimeScalePercent(udg_Eti_Unit[3],40.)call SetUnitTimeScalePercent(udg_Eti_Unit[4],120.)call SetUnitTimeScalePercent(udg_Eti_Unit[5],120.)call SetUnitAnimation(udg_Eti_Unit[4],"birth")call SetUnitAnimation(udg_Eti_Unit[5],"birth")call UnitApplyTimedLife(udg_Eti_Unit[2],'BTLF',3.)call UnitApplyTimedLife(udg_Eti_Unit[3],'BTLF',3.)call UnitApplyTimedLife(udg_Eti_Unit[4],'BTLF',5.)call UnitApplyTimedLife(udg_Eti_Unit[5],'BTLF',5.)call Dynamic_Sound("Sounds\\Enkai.mp3")call DisplayText("Dai Enkai",udg_Eti_Unit[0],.023,false,$DC,5,5,$FF)
set udg_Eti_Unit[2]=null
set udg_Eti_Unit[3]=null
set udg_Eti_Unit[4]=null
set udg_Eti_Unit[5]=null
set udg_Eti_Real[3]=(2000.+((10.+(5.*I2R(GetUnitAbilityLevelSwapped('A09D',udg_Eti_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Eti_Unit[0],false))))
set udg_Eti_Real[4]=42.set udg_Eti_Real[5]=1000.call TriggerSleepAction(1.5)
if(IsUnitAliveBJ(udg_Eti_Unit[0]))thencall TriggerSleepAction(1.)call SetUnitAnimation(udg_Eti_Unit[0],"spell throw")
call SetUnitFlyHeight(udg_Eti_Unit[1],.0,200.)call Dynamic_Sound("Sounds\\Entei.mp3")call DisplayText("Entei",udg_Eti_Unit[0],.023,true,$DC,5,5,$FF)set udg_Eti_Int=80call EnableTrigger(gg_trg_EtiL)call TriggerSleepAction(.1)call PauseSystem(udg_Eti_Unit[0],false)else
call PauseSystem(udg_Eti_Unit[0],false)set udg_Eti_Int=0call EnableTrigger(gg_trg_EtiL)endifendfunctionfunction InitTrig_Eti takes nothing returns nothingset gg_trg_Eti=CreateTrigger()call TriggerAddCondition(gg_trg_Eti,Condition(function Trig_Eti_Conditions))
call TriggerAddAction(gg_trg_Eti,function Trig_Eti_Actions)endfunctionfunction Trig_EtiL_Func003Func011Func019003 takes nothing returns nothingcall KillDestructable(GetEnumDestructable())
endfunctionfunction Trig_EtiL_Func003Func011Func020002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Eti_Own))
endfunctionfunction Trig_EtiL_Func003Func011Func020002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_EtiL_Func003Func011Func020002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_EtiL_Func003Func011Func020002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_EtiL_Func003Func011Func020002003002001(),Trig_EtiL_Func003Func011Func020002003002002())endfunctionfunction Trig_EtiL_Func003Func011Func020002003 takes nothing returns boolean
return GetBooleanAnd(Trig_EtiL_Func003Func011Func020002003001(),Trig_EtiL_Func003Func011Func020002003002())endfunctionfunction Trig_EtiL_Func003Func011Func025A takes nothing returns nothingset udg_Eti_Unit[6]=GetEnumUnit()if(IsUnitType(udg_Eti_Unit[6],UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Eti_Real[3]))+"!",udg_Eti_Unit[6],.027,true,$FF,0,0,$FF)endifcall UnitDamageTargetBJ(udg_Eti_Unit[0],udg_Eti_Unit[6],udg_Eti_Real[3],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Eti_Unit[6]=null
endfunctionfunction Trig_EtiL_Func003Func011C takes nothing returns boolean
return(IsUnitAliveBJ(udg_Eti_Unit[0]))and(udg_Eti_Int!=0)endfunctionfunction Trig_EtiL_Func003C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Eti_Loc[0],udg_Eti_Loc[1])>50.)and(IsUnitAliveBJ(udg_Eti_Unit[0]))and(IsUnitAliveBJ(udg_Eti_Unit[1]))and(udg_Eti_Int>0)
endfunctionfunction Trig_EtiL_Actions takes nothing returns nothing
set udg_Eti_Loc[0]=Location(udg_Eti_Real[0],udg_Eti_Real[1])
set udg_Eti_Loc[1]=GetUnitLoc(udg_Eti_Unit[1])if(Trig_EtiL_Func003C())then
set udg_Eti_Loc[2]=PolarProjectionBJ(udg_Eti_Loc[1],udg_Eti_Real[4],udg_Eti_Real[2])
call RemoveLocation(udg_Eti_Loc[0])set udg_Eti_Loc[0]=nullcall RemoveLocation(udg_Eti_Loc[1])set udg_Eti_Loc[1]=nullcall SetUnitPositionLoc(udg_Eti_Unit[1],udg_Eti_Loc[2])call RemoveLocation(udg_Eti_Loc[2])set udg_Eti_Loc[2]=nullset udg_Eti_Int=(udg_Eti_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_EtiL_Func003Func011C())thencall CreateNUnitsAtLoc(1,'h03E',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call CreateNUnitsAtLoc(1,'h088',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h083',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)set udg_Eti_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h02L',udg_Eti_Own,udg_Eti_Loc[1],bj_UNIT_FACING)set udg_Eti_Unit[3]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h081',udg_Eti_Own,udg_Eti_Loc[1],GetRandomReal(0,360))
set udg_Eti_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h081',udg_Eti_Own,udg_Eti_Loc[1],GetRandomReal(0,360))
set udg_Eti_Unit[5]=bj_lastCreatedUnitcall Dynamic_GroupShake(GetLocationX(udg_Eti_Loc[1]),GetLocationY(udg_Eti_Loc[1]),2.,19,udg_CameraArea,null)
call EnumDestructablesInCircleBJ(udg_Eti_Real[5],udg_Eti_Loc[1],function Trig_EtiL_Func003Func011Func019003)
set udg_Eti_Group=GetUnitsInRangeOfLocMatching(udg_Eti_Real[5],udg_Eti_Loc[1],Condition(function Trig_EtiL_Func003Func011Func020002003))
call RemoveLocation(udg_Eti_Loc[0])set udg_Eti_Loc[0]=nullcall RemoveLocation(udg_Eti_Loc[1])set udg_Eti_Loc[1]=nullcall ForGroupBJ(udg_Eti_Group,function Trig_EtiL_Func003Func011Func025A)
call DestroyGroup(udg_Eti_Group)
set udg_Eti_Group=nullcall UnitApplyTimedLife(udg_Eti_Unit[2],'BTLF',14.)call UnitApplyTimedLife(udg_Eti_Unit[3],'BTLF',4.)call UnitApplyTimedLife(udg_Eti_Unit[4],'BTLF',4.)call UnitApplyTimedLife(udg_Eti_Unit[5],'BTLF',4.)call SetUnitScalePercent(udg_Eti_Unit[2],200.,200.,200.)
call SetUnitScalePercent(udg_Eti_Unit[3],500.,500.,500.)
call SetUnitScalePercent(udg_Eti_Unit[4],1000.,1000.,1000.)call SetUnitScalePercent(udg_Eti_Unit[5],1000.,1000.,1000.)call SetUnitFlyHeight(udg_Eti_Unit[4],200.,.0)call SetUnitFlyHeight(udg_Eti_Unit[5],200.,.0)call Dynamic_Sound("Sounds\\Explosion.mp3")else
call RemoveLocation(udg_Eti_Loc[0])set udg_Eti_Loc[0]=nullcall RemoveLocation(udg_Eti_Loc[1])set udg_Eti_Loc[1]=nullendifcall RemoveUnit(udg_Eti_Unit[1])
call TriggerSleepAction(.1)set udg_Eti_Own=null
set udg_Eti_Unit[0]=null
set udg_Eti_Unit[1]=null
set udg_Eti_Unit[2]=null
set udg_Eti_Unit[3]=null
set udg_Eti_Unit[4]=null
set udg_Eti_Unit[5]=null
set udg_Eti_Real[0]=.0set udg_Eti_Real[1]=.0set udg_Eti_Real[2]=.0set udg_Eti_Real[3]=.0set udg_Eti_Real[4]=.0set udg_Eti_Real[5]=.0endifendfunctionfunction InitTrig_EtiL takes nothing returns nothing
set gg_trg_EtiL=CreateTrigger()call DisableTrigger(gg_trg_EtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EtiL,.06)call TriggerAddAction(gg_trg_EtiL,function Trig_EtiL_Actions)endfunctionfunction AIItachi___isAtked takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==AIItachi___AIType1 or GetUnitTypeId(GetTriggerUnit())==AIItachi___AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIItachi___isAtker takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==AIItachi___AIType1 or GetUnitTypeId(GetAttacker())==AIItachi___AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIItachi___Cond takes nothing returns booleanif(not(AIItachi___isAtked()or AIItachi___isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIItachi___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIItachi___AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIItachi___isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A09K')call SelectHeroSkill(mySelf,'A09M')call SelectHeroSkill(mySelf,'A09J')call SelectHeroSkill(mySelf,'A0ER')call SelectHeroSkill(mySelf,'A09H')endifcall IssueTargetOrderById(mySelf,$D00FA,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D00A1)endifif(isHeroTarget)and(isAttacking)then
call IssueImmediateOrderById(mySelf,$D02B7)call IssueTargetOrderById(mySelf,$D0270,myTarget)call IssueTargetOrderById(mySelf,$D007F,myTarget)endifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIItachi___AINo])
endfunctionfunction AIItachi___Init takes nothing returns nothingset udg_AI_Trig[AIItachi___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIItachi___AINo],Condition(function AIItachi___Cond))call TriggerAddAction(udg_AI_Trig[AIItachi___AINo],function AIItachi___Act)endfunctionfunction Izanami___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Izanami___skId)endfunctionfunction Izanami___ActL takes nothing returns nothingif(Izanami___i>0)thenset Izanami___i=Izanami___i-1call SetUnitVertexColor(Izanami___dummy,$FF,$FF,$FF,R2I(Izanami___i*6.37))else
call PauseTimer(Izanami___t)
call DestroyTimer(Izanami___t)set Izanami___t=null
call RemoveUnit(Izanami___dummy)
set Izanami___dummy=null
endifendfunctionfunction Izanami___Act takes nothing returns nothing
local unit array ulocal player plocal real facinglocal real x
local real y
set u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])set Izanami___markX=GetUnitX(u[1])set Izanami___markY=GetUnitY(u[1])set Izanami___hp=GetUnitState(u[1],UNIT_STATE_LIFE)set Izanami___sp=GetUnitState(u[1],UNIT_STATE_MANA)call TriggerSleepAction(2.5)
if(GetUnitState(u[1],UNIT_STATE_LIFE)>0)then
set x=GetUnitX(u[1])
set y=GetUnitY(u[1])
set facing=GetUnitFacing(u[1])set Izanami___dummy=CreateUnit(Player($F),GetUnitTypeId(u[1]),x,y,facing)call DisplayText("Izanami",Izanami___dummy,.023,true,$FF,$FF,$FF,$FF)call UnitAddAbility(Izanami___dummy,'Aloc')call SetUnitInvulnerable(Izanami___dummy,true)call SetUnitPathing(Izanami___dummy,false)call SetUnitTimeScale(Izanami___dummy,.0)if not(IsUnitPaused(u[1]))thencall UnitMoveXY2(u[1],Izanami___markX,Izanami___markY)call PanCameraToTimedForPlayer(GetOwningPlayer(u[1]),Izanami___markX,Izanami___markY,0)endifcall SetUnitState(u[1],UNIT_STATE_LIFE,Izanami___hp)
call SetUnitState(u[1],UNIT_STATE_MANA,Izanami___sp)
call UnitApplyTimedLife(CreateUnit(p,'h03G',Izanami___markX,Izanami___markY,facing),'BTLF',1.5)call SetUnitX(Izanami___dummy,x)
call SetUnitY(Izanami___dummy,y)
set Izanami___i=40set Izanami___t=CreateTimer()call TimerStart(Izanami___t,.05,true,function Izanami___ActL)endifset u[0]=nullset u[1]=nullset p=nullendfunctionfunction Izanami___Init takes nothing returns nothingset gg_trg_Izanami=CreateTrigger()call TriggerAddCondition(gg_trg_Izanami,Condition(function Izanami___Cond))call TriggerAddAction(gg_trg_Izanami,function Izanami___Act)
endfunctionfunction Trig_Ffb_Cast_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09H')endfunctionfunction Trig_Ffb_Cast_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local location array Ffb_Loc
local real Facingset Ffb_Loc[0]=GetSpellTargetLoc()set Ffb_Loc[1]=GetUnitLoc(u)
set Facing=AngleBetweenPoints(Ffb_Loc[1],Ffb_Loc[0])
set Ffb_Loc[2]=PolarProjectionBJ(Ffb_Loc[1],85.,Facing)call RemoveLocation(Ffb_Loc[0])set Ffb_Loc[0]=nullcall RemoveLocation(Ffb_Loc[1])set Ffb_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h06W',GetOwningPlayer(u),Ffb_Loc[2],Facing)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(Ffb_Loc[2])set Ffb_Loc[2]=nullset u=nullset Facing=.0endfunctionfunction Trig_Ffb_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A09H')endfunctionfunction Trig_Ffb_Init_Actions takes nothing returns nothing
local trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Trig_Ffb_Cast_Conditions))
call TriggerAddAction(t,function Trig_Ffb_Cast_Actions)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Ffb_Init takes nothing returns nothing
set gg_trg_Ffb_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Ffb_Init,Condition(function Trig_Ffb_Init_Conditions))call TriggerAddAction(gg_trg_Ffb_Init,function Trig_Ffb_Init_Actions)endfunctionfunction Trig_Ffb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09H')endfunctionfunction Trig_Ffb_Func031A takes nothing returns nothing
set udg_Ffb_Unit[3]=GetEnumUnit()set udg_Ffb_Int[2]=GetHandleId(udg_Ffb_Unit[3])set udg_Ffb_Int[3]=(LoadInteger(udg_Ffb_Hash,udg_Ffb_Int[2],0)-1)call SaveInteger(udg_Ffb_Hash,udg_Ffb_Int[2],0,udg_Ffb_Int[3])call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",udg_Ffb_Unit[3],"chest"))
call UnitDamageTargetBJ(udg_Ffb_Unit[0],udg_Ffb_Unit[3],udg_Ffb_Real[2],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(udg_Ffb_Int[3]==0 or GetUnitState(udg_Ffb_Unit[3],UNIT_STATE_LIFE)<1)then
call GroupRemoveUnit(udg_Ffb_Group2,udg_Ffb_Unit[3])
endifset udg_Ffb_Unit[3]=null
endfunctionfunction Trig_Ffb_Actions takes nothing returns nothingset udg_Ffb_Unit[0]=GetTriggerUnit()
set udg_Ffb_Loc[0]=GetSpellTargetLoc()set udg_Ffb_Loc[1]=GetUnitLoc(udg_Ffb_Unit[0])set udg_Ffb_Real[0]=AngleBetweenPoints(udg_Ffb_Loc[1],udg_Ffb_Loc[0])set udg_Ffb_Loc[2]=PolarProjectionBJ(udg_Ffb_Loc[1],120.,udg_Ffb_Real[0])call RemoveLocation(udg_Ffb_Loc[0])set udg_Ffb_Loc[0]=nullcall RemoveLocation(udg_Ffb_Loc[1])set udg_Ffb_Loc[1]=nullset udg_Ffb_Own=GetOwningPlayer(udg_Ffb_Unit[0])
call CreateNUnitsAtLoc(1,'h03H',udg_Ffb_Own,udg_Ffb_Loc[2],udg_Ffb_Real[0])set udg_Ffb_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Ffb_Loc[2])set udg_Ffb_Loc[2]=nullcall DisplayText("Katon Gokakyu no Jutsu",udg_Ffb_Unit[0],.023,true,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Itachi\\Fireball.wav",GetUnitX(udg_Ffb_Unit[0]),GetUnitY(udg_Ffb_Unit[0]))set udg_Ffb_Hash=InitHashtable()
set udg_Ffb_Real[1]=(60.+(115.*I2R(GetUnitAbilityLevelSwapped('A09H',udg_Ffb_Unit[0]))))
set udg_Ffb_Real[2]=.75*GetHeroAgi(udg_Ffb_Unit[0],true)
set udg_Ffb_Real[3]=32.set udg_Ffb_Real[4]=270.
set udg_Ffb_Bool=trueset udg_Ffb_Int[0]=30set udg_Ffb_Int[1]=2
call EnableTrigger(gg_trg_FfbL)loop
call TriggerSleepAction(.5)exitwhen udg_Ffb_Bool==false
set udg_Ffb_GroupFire=CreateGroup()call GroupAddGroup(udg_Ffb_Group2,udg_Ffb_GroupFire)
call ForGroupBJ(udg_Ffb_GroupFire,function Trig_Ffb_Func031A)call DestroyGroup(udg_Ffb_GroupFire)
set udg_Ffb_GroupFire=nullendloopendfunctionfunction InitTrig_Ffb takes nothing returns nothingset gg_trg_Ffb=CreateTrigger()call TriggerAddCondition(gg_trg_Ffb,Condition(function Trig_Ffb_Conditions))
call TriggerAddAction(gg_trg_Ffb,function Trig_Ffb_Actions)endfunctionfunction Trig_FfbL_Func001Func013002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Ffb_Group2)==false)
endfunctionfunction Trig_FfbL_Func001Func013002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Ffb_Own))
endfunctionfunction Trig_FfbL_Func001Func013002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_FfbL_Func001Func013002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_FfbL_Func001Func013002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_FfbL_Func001Func013002003002002001(),Trig_FfbL_Func001Func013002003002002002())endfunctionfunction Trig_FfbL_Func001Func013002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_FfbL_Func001Func013002003002001(),Trig_FfbL_Func001Func013002003002002())endfunctionfunction Trig_FfbL_Func001Func013002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_FfbL_Func001Func013002003001(),Trig_FfbL_Func001Func013002003002())endfunctionfunction Trig_FfbL_Func001Func018A takes nothing returns nothing
set udg_Ffb_Unit[2]=GetEnumUnit()call UnitDamageTargetBJ(udg_Ffb_Unit[0],udg_Ffb_Unit[2],udg_Ffb_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(GetUnitState(udg_Ffb_Unit[2],UNIT_STATE_LIFE)>0)thencall SaveInteger(udg_Ffb_Hash,GetHandleId(udg_Ffb_Unit[2]),0,6)call GroupAddUnit(udg_Ffb_Group2,udg_Ffb_Unit[2])endifset udg_Ffb_Unit[2]=null
endfunctionfunction Trig_FfbL_Func001C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_Ffb_Unit[1])==false)and(udg_Ffb_Int[0]>0)endfunctionfunction Trig_FfbL_Actions takes nothing returns nothing
if(Trig_FfbL_Func001C())then
set udg_Ffb_Loc[0]=GetUnitLoc(udg_Ffb_Unit[1])if(udg_Ffb_Int[1]==2)thencall CreateNUnitsAtLoc(1,'h03I',udg_Ffb_Own,udg_Ffb_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set udg_Ffb_Int[1]=0
else
set udg_Ffb_Int[1]=(udg_Ffb_Int[1]+1)endifset udg_Ffb_Loc[1]=PolarProjectionBJ(udg_Ffb_Loc[0],udg_Ffb_Real[3],udg_Ffb_Real[0])
call SetUnitPositionLoc(udg_Ffb_Unit[1],udg_Ffb_Loc[1])call EnumDestructablesInCircleBJ(udg_Ffb_Real[4],udg_Ffb_Loc[1],function TreeKiller)
set udg_Ffb_Group=GetUnitsInRangeOfLocMatching(udg_Ffb_Real[4],udg_Ffb_Loc[1],Condition(function Trig_FfbL_Func001Func013002003))call RemoveLocation(udg_Ffb_Loc[0])set udg_Ffb_Loc[0]=nullcall RemoveLocation(udg_Ffb_Loc[1])set udg_Ffb_Loc[1]=nullcall ForGroupBJ(udg_Ffb_Group,function Trig_FfbL_Func001Func018A)call DestroyGroup(udg_Ffb_Group)
set udg_Ffb_Group=nullset udg_Ffb_Int[0]=(udg_Ffb_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Ffb_Unit[1])
call TriggerSleepAction(4.)set udg_Ffb_Bool=falsecall GroupClear(udg_Ffb_Group2)call FlushParentHashtableBJ(udg_Ffb_Hash)set udg_Ffb_Hash=nullset udg_Ffb_Own=null
set udg_Ffb_Unit[0]=null
set udg_Ffb_Unit[1]=null
set udg_Ffb_Real[0]=.0set udg_Ffb_Real[1]=.0set udg_Ffb_Real[2]=.0set udg_Ffb_Real[3]=.0set udg_Ffb_Real[4]=.0set udg_Ffb_Int[0]=0
set udg_Ffb_Int[1]=0
set udg_Ffb_Int[2]=0
set udg_Ffb_Int[3]=0
endifendfunctionfunction InitTrig_FfbL takes nothing returns nothing
set gg_trg_FfbL=CreateTrigger()call DisableTrigger(gg_trg_FfbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FfbL,.04)call TriggerAddAction(gg_trg_FfbL,function Trig_FfbL_Actions)endfunctionfunction BunshinDaibakuha___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==BunshinDaibakuha___skId)
endfunctionfunction BunshinDaibakuha___Act takes nothing returns nothinglocal unit array ulocal player plocal real x
local real y
local real garea
local real dmglocal group gset u[0]=GetTriggerUnit()set p=GetOwningPlayer(u[0])set dmg=(200.+(100.*I2R(GetUnitAbilityLevel(u[0],BunshinDaibakuha___skId))))
set garea=350.call DisplayText("Bunshin Daibakuha",u[0],.023,true,$FF,$FF,$FF,$FF)
set u[1]=CreateUnit(p,'h089',GetUnitX(u[0]),GetUnitY(u[0]),GetUnitFacing(u[0]))call TriggerSleepAction(1.5)
set x=GetUnitX(u[1])
set y=GetUnitY(u[1])
call RemoveUnit(u[1])set bj_lastCreatedUnit=CreateUnit(p,'h08B',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h08A',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0EG')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call UnitApplyTimedLife(CreateUnit(p,'h07D',x,y,bj_UNIT_FACING),'BTLF',4.)call UnitApplyTimedLife(CreateUnit(p,'h076',x,y,bj_UNIT_FACING),'BTLF',3.)call DestroyTreeXY(x,y,garea)set g=CreateGroupXY(x,y,garea,p)
loop
set u[2]=FirstOfGroup(g)
exitwhen(u[2]==null)
call GroupRemoveUnit(g,u[2])
call UnitDamageTarget(u[0],u[2],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endloopcall DestroyGroup(g)
set g=nullset u[0]=nullset u[1]=nullset p=nullendfunctionfunction BunshinDaibakuha___Init takes nothing returns nothingset gg_trg_Bunshin_Daibakuha=CreateTrigger()
call TriggerAddCondition(gg_trg_Bunshin_Daibakuha,Condition(function BunshinDaibakuha___Cond))call TriggerAddAction(gg_trg_Bunshin_Daibakuha,function BunshinDaibakuha___Act)endfunctionfunction Trig_IssInit_DieAct takes nothing returns nothingcall DisableTrigger(udg_Iss_TrigDeath)call DisableTrigger(udg_Iss_TrigAttack)endfunctionfunction Trig_IssInit_Cond takes nothing returns boolean
return(GetLearnedSkill()=='A09J')endfunctionfunction Trig_IssA_Act takes nothing returns nothing
local unit u=GetAttacker()local location array loc
local player p=GetOwningPlayer(udg_Iss_Unit)
local real facingset loc[0]=GetUnitLoc(udg_Iss_Unit)set loc[1]=GetUnitLoc(u)
set facing=AngleBetweenPoints(loc[0],loc[1])
call CreateNUnitsAtLoc(1,'h042',p,loc[0],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call CreateNUnitsAtLoc(1,'h017',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set loc[2]=PolarProjectionBJ(loc[1],180.,facing)
call UnitMoveXY(u,GetLocationX(loc[2]),GetLocationY(loc[2]))
call UnitDamageTargetBJ(udg_Iss_Unit,u,(GetHeroAgi(udg_Iss_Unit,true)*5),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)if(GetUnitState(u,UNIT_STATE_LIFE)>0)thencall CreateNUnitsAtLoc(1,'u003',p,loc[2],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[2],bj_lastCreatedUnit,5)
call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullset p=nullset u=nullset facing=.0endfunctionfunction Trig_IssA_Cond takes nothing returns booleanif(udg_Iss_Unit!=GetTriggerUnit())thenreturn false
elseif(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)!=true)then
return false
elseif(GetRandomInt(1,'d')>udg_Iss_Int)thenreturn false
endifreturn trueendfunctionfunction Trig_IssInit_Actions takes nothing returns nothingset udg_Iss_Unit=GetLearningUnit()set udg_Iss_Int=25set udg_Iss_TrigDeath=CreateTrigger()set udg_Iss_TrigAttack=CreateTrigger()call TriggerRegisterUnitEvent(udg_Iss_TrigDeath,udg_Iss_Unit,EVENT_UNIT_DEATH)call TriggerAddAction(udg_Iss_TrigDeath,function Trig_IssInit_DieAct)call DisableTrigger(udg_Iss_TrigDeath)call TriggerRegisterUnitEvent(udg_Iss_TrigAttack,udg_Iss_Unit,EVENT_UNIT_ATTACKED)call TriggerAddCondition(udg_Iss_TrigAttack,Condition(function Trig_IssA_Cond))call TriggerAddAction(udg_Iss_TrigAttack,function Trig_IssA_Act)
call DisableTrigger(udg_Iss_TrigAttack)call DestroyTrigger(gg_trg_Iss_Init)
endfunctionfunction InitTrig_Iss_Init takes nothing returns nothing
set gg_trg_Iss_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Iss_Init,Condition(function Trig_IssInit_Cond))call TriggerAddAction(gg_trg_Iss_Init,function Trig_IssInit_Actions)
endfunctionfunction Trig_Iss_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09J')endfunctionfunction Trig_Iss_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='N01I')then
set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)call DisplayText("Susanoo",u,.023,false,$FF,$FF,$FF,$FF)
call EnableTrigger(udg_Iss_TrigDeath)call EnableTrigger(udg_Iss_TrigAttack)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)set bj_lastCreatedUnit=CreateUnit(p,'h043',x,y,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,230.,230.,230.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call TransfromAction(u,x,y)set p=nullelse
call DisableTrigger(udg_Iss_TrigDeath)call DisableTrigger(udg_Iss_TrigAttack)endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Iss takes nothing returns nothingset gg_trg_Iss=CreateTrigger()call TriggerAddCondition(gg_trg_Iss,Condition(function Trig_Iss_Conditions))
call TriggerAddAction(gg_trg_Iss,function Trig_Iss_Actions)endfunctionfunction Trig_Iss_Anim_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09J')endfunctionfunction Trig_Iss_Anim_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()call AddUnitAnimationProperties(u,"alternate",false)
call AddUnitAnimationProperties(u,"morph",true)set u=nullendfunctionfunction InitTrig_Iss_Anim takes nothing returns nothing
set gg_trg_Iss_Anim=CreateTrigger()call TriggerAddCondition(gg_trg_Iss_Anim,Condition(function Trig_Iss_Anim_Conditions))call TriggerAddAction(gg_trg_Iss_Anim,function Trig_Iss_Anim_Actions)endfunctionfunction Tsukuyomi___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Tsukuyomi___skId)endfunctionfunction Tsukuyomi___ActL takes nothing returns nothinglocal unit pickedlocal real array xlocal real array ylocal real array rlocal group glocal integer j=0local boolean b=(GetUnitState(Tsukuyomi___u[1],UNIT_STATE_LIFE)>0)if(Tsukuyomi___i>0)and(b)thenset Tsukuyomi___i=Tsukuyomi___i-1set x[0]=GetUnitX(Tsukuyomi___u[1])set y[0]=GetUnitY(Tsukuyomi___u[1])if(Tsukuyomi___count>0)thenset Tsukuyomi___count=0loop
exitwhen(j>Tsukuyomi___maxItachi)call SetUnitAnimation(Tsukuyomi___itachi[j],"attack")set j=j+1endloopcall SetUnitAnimation(Tsukuyomi___u[1],"death")call SetUnitFacing(Tsukuyomi___u[1],GetRandomReal(0,360))set g=CreateGroup()call GroupAddGroup(Tsukuyomi___gdummy,g)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set bj_lastCreatedUnit=CreateUnit(Tsukuyomi___p,'u00A',GetUnitX(picked),GetUnitY(picked),bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.2)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,Tsukuyomi___u[2])endloopcall DestroyGroup(g)
set g=nullset x[1]=GetUnitX(Tsukuyomi___u[0])set y[1]=GetUnitY(Tsukuyomi___u[0])set r[0]=50.
set r[1]=600.set r[2]=I2R(360/ Tsukuyomi___maxItachi)
set j=0loop
exitwhen(j>Tsukuyomi___maxItachi)set r[3]=(I2R(j)*r[2])set x[2]=PolarX(x[1],r[0],r[3])set y[2]=PolarY(y[1],r[0],r[3])set r[4]=AngleBetweenXY(x[1],y[1],x[2],y[2])
set bj_lastCreatedUnit=CreateUnit(Tsukuyomi___p,'h08G',x[2],y[2],r[4])call SetUnitPathing(bj_lastCreatedUnit,false)call SetUnitFly(bj_lastCreatedUnit)call SetUnitFlyHeight(bj_lastCreatedUnit,300.,80.)call IssuePointOrderById(bj_lastCreatedUnit,$D0003,PolarX(x[2],r[1],r[4]),PolarY(y[2],r[1],r[4]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set j=j+1endloopelse
set Tsukuyomi___count=Tsukuyomi___count+1call UnitApplyTimedLife(CreateUnit(Tsukuyomi___p,'h08H',x[0],y[0],GetRandomReal(0,360)),'BTLF',2.5)call UnitDamageTarget(Tsukuyomi___u[0],Tsukuyomi___u[1],Tsukuyomi___dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endifset picked=CreateUnit(Tsukuyomi___p,'u005',x[0],y[0],bj_UNIT_FACING)
set r[0]=GetRandomReal($C8,700)set r[1]=GetRandomReal(0,360)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(Tsukuyomi___p,'h089',x[1],y[1],AngleBetweenXY(x[1],y[1],x[0],y[0]))call SetUnitTimeScale(bj_lastCreatedUnit,1.3)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdx",x[1],y[1]))
call UnitApplyTimedLife(picked,'BTLF',1.)set picked=nullelse
call PauseTimer(Tsukuyomi___t)call DestroyTimer(Tsukuyomi___t)
set Tsukuyomi___t=nullloop
set picked=FirstOfGroup(Tsukuyomi___gdummy)exitwhen(picked==null)call GroupRemoveUnit(Tsukuyomi___gdummy,picked)call RemoveUnit(picked)endloopcall DestroyGroup(Tsukuyomi___gdummy)set Tsukuyomi___gdummy=nullloop
exitwhen(j>Tsukuyomi___maxItachi)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Undead\\UndeadDissipate\\UndeadDissipate.mdx",GetUnitX(Tsukuyomi___itachi[j]),GetUnitY(Tsukuyomi___itachi[j])))call RemoveUnit(Tsukuyomi___itachi[j])set j=j+1endloopcall PauseSystem(Tsukuyomi___u[1],false)
if(b)thencall QueueUnitAnimation(Tsukuyomi___u[1],"stand")endifcall RemoveUnit(Tsukuyomi___u[2])call RemoveUnit(Tsukuyomi___u[3])call RemoveUnit(Tsukuyomi___u[4])set Tsukuyomi___u[0]=nullset Tsukuyomi___u[1]=nullset Tsukuyomi___u[2]=nullset Tsukuyomi___u[3]=nullset Tsukuyomi___u[4]=nullset Tsukuyomi___p=nullendifendfunctionfunction Tsukuyomi___Act takes nothing returns nothinglocal real array xlocal real array ylocal real array rset Tsukuyomi___u[0]=GetTriggerUnit()set Tsukuyomi___u[1]=GetSpellTargetUnit()set x[0]=GetUnitX(Tsukuyomi___u[1])set y[0]=GetUnitY(Tsukuyomi___u[1])set Tsukuyomi___p=GetOwningPlayer(Tsukuyomi___u[0])set Tsukuyomi___dmg=(500.+((4.+GetUnitAbilityLevel(Tsukuyomi___u[0],Tsukuyomi___skId))*GetHeroAgi(Tsukuyomi___u[0],true)))set Tsukuyomi___dmg=(Tsukuyomi___dmg*1.5)call DisplayText("Tsukuyomi",Tsukuyomi___u[0],.023,true,$FF,$FF,$FF,$FF)
call Dynamic_Sound("Sounds\\Amaterasu2.mp3")
call PauseSystem(Tsukuyomi___u[1],true)set Tsukuyomi___u[2]=CreateUnit(Tsukuyomi___p,'u005',x[0],y[0],bj_UNIT_FACING)call SetUnitFlyHeight(Tsukuyomi___u[2],350.,.0)set Tsukuyomi___u[3]=CreateUnit(Tsukuyomi___p,'h08E',x[0],y[0],bj_UNIT_FACING)call SetUnitTimeScale(Tsukuyomi___u[2],1.4)set Tsukuyomi___u[4]=CreateUnit(Tsukuyomi___p,'h08D',x[0],y[0],bj_UNIT_FACING)call SetUnitTimeScale(Tsukuyomi___u[4],4.)set Tsukuyomi___gdummy=CreateGroup()
set r[0]=380.set r[1]=700.set r[2]=I2R(360/ Tsukuyomi___maxItachi)
set Tsukuyomi___i=0loop
exitwhen(Tsukuyomi___i>Tsukuyomi___maxItachi)set r[3]=(I2R(Tsukuyomi___i)*r[2])set x[1]=PolarX(x[0],r[0],r[3])set y[1]=PolarY(y[0],r[0],r[3])set r[4]=AngleBetweenXY(x[1],y[1],x[0],y[0])
call GroupAddUnit(Tsukuyomi___gdummy,CreateUnit(Tsukuyomi___p,'h08F',x[1],y[1],r[4]))set Tsukuyomi___itachi[Tsukuyomi___i]=CreateUnit(Tsukuyomi___p,'h089',x[1],y[1],r[4])call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIil\\AIilTarget.mdx",Tsukuyomi___itachi[Tsukuyomi___i],"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdx",Tsukuyomi___itachi[Tsukuyomi___i],"origin"))set r[5]=250.set x[1]=PolarX(x[1],r[5],r[4])set y[1]=PolarY(y[1],r[5],r[4])call IssuePointOrderById(Tsukuyomi___itachi[Tsukuyomi___i],$D0003,x[1],y[1])
call UnitAddAbility(Tsukuyomi___itachi[Tsukuyomi___i],'A09O')call SetUnitAnimationByIndex(Tsukuyomi___itachi[Tsukuyomi___i],6)call SetUnitTimeScale(Tsukuyomi___itachi[Tsukuyomi___i],GetRandomReal(1.2,2.))set x[1]=PolarX(x[0],r[1],r[3])set y[1]=PolarY(y[0],r[1],r[3])set bj_lastCreatedUnit=CreateUnit(Tsukuyomi___p,'h08F',x[1],y[1],r[4])call SetUnitFlyHeight(bj_lastCreatedUnit,270.,.0)call GroupAddUnit(Tsukuyomi___gdummy,bj_lastCreatedUnit)
set Tsukuyomi___i=Tsukuyomi___i+1endloopcall TriggerSleepAction(.18)
set Tsukuyomi___i=20
set Tsukuyomi___dmg=(Tsukuyomi___dmg/ I2R(Tsukuyomi___i))set Tsukuyomi___count=1set Tsukuyomi___t=CreateTimer()call TimerStart(Tsukuyomi___t,.18,true,function Tsukuyomi___ActL)endfunctionfunction Tsukuyomi___Init takes nothing returns nothingset gg_trg_Tsukuyomi=CreateTrigger()
call TriggerAddCondition(gg_trg_Tsukuyomi,Condition(function Tsukuyomi___Cond))call TriggerAddAction(gg_trg_Tsukuyomi,function Tsukuyomi___Act)
endfunctionfunction Trig_Hii_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09K')endfunctionfunction Trig_Hii_Func016002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Hii_Own))
endfunctionfunction Trig_Hii_Func016002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Hii_Func016002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Hii_Func016002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Hii_Func016002003002001(),Trig_Hii_Func016002003002002())endfunctionfunction Trig_Hii_Func016002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Hii_Func016002003001(),Trig_Hii_Func016002003002())endfunctionfunction Trig_Hii_Func020A takes nothing returns nothing
call UnitDamageTargetBJ(udg_Hii_Unit[0],GetEnumUnit(),udg_Hii_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction Trig_Hii_Actions takes nothing returns nothingset udg_Hii_Unit[0]=GetTriggerUnit()
set udg_Hii_Loc[0]=GetSpellTargetLoc()set udg_Hii_Real[0]=90.set udg_Hii_Real[1]=36.set udg_Hii_Bool=trueset udg_Hii_Own=GetOwningPlayer(udg_Hii_Unit[0])
call CreateNUnitsAtLoc(1,'h000',udg_Hii_Own,udg_Hii_Loc[0],bj_UNIT_FACING)set udg_Hii_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h08D',udg_Hii_Own,udg_Hii_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',8.)call SetUnitFlyHeight(bj_lastCreatedUnit,40.,.0)
call SetUnitScalePercent(bj_lastCreatedUnit,520.,520.,520.)set udg_Hii_Int[0]=1
loop
exitwhen udg_Hii_Int[0]>$Aset udg_Hii_Int[1]=1
loop
exitwhen udg_Hii_Int[1]>3set udg_Hii_Loc[1]=PolarProjectionBJ(udg_Hii_Loc[0],(udg_Hii_Real[0]+(udg_Hii_Real[0]*I2R(udg_Hii_Int[1]))),(udg_Hii_Real[1]*I2R(udg_Hii_Int[0])))call CreateNUnitsAtLoc(1,'h0BH',udg_Hii_Own,udg_Hii_Loc[1],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)call CreateNUnitsAtLoc(1,'h08C',udg_Hii_Own,udg_Hii_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',10.)if(udg_Hii_Bool)then
call CreateNUnitsAtLoc(1,'h03Z',udg_Hii_Own,udg_Hii_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,70.)
call SetUnitScalePercent(bj_lastCreatedUnit,100.,100.,100.)set udg_Hii_Bool=falseelse
set udg_Hii_Bool=trueendifcall RemoveLocation(udg_Hii_Loc[1])set udg_Hii_Loc[1]=nullset udg_Hii_Int[1]=udg_Hii_Int[1]+1endloopset udg_Hii_Int[0]=udg_Hii_Int[0]+1endloopset udg_Hii_Real[0]=450.
call EnumDestructablesInCircleBJ(udg_Hii_Real[0],udg_Hii_Loc[0],function TreeKiller)
set udg_Hii_Group=GetUnitsInRangeOfLocMatching(udg_Hii_Real[0],udg_Hii_Loc[0],Condition(function Trig_Hii_Func016002003))call RemoveLocation(udg_Hii_Loc[0])set udg_Hii_Loc[0]=nullset udg_Hii_Real[0]=(400.+((2.+I2R(GetUnitAbilityLevelSwapped('A09K',udg_Hii_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Hii_Unit[0],true))))
call ForGroupBJ(udg_Hii_Group,function Trig_Hii_Func020A)call DestroyGroup(udg_Hii_Group)
set udg_Hii_Group=nullcall UnitAddAbility(udg_Hii_Unit[1],'A09L')call UnitApplyTimedLife(udg_Hii_Unit[1],'BTLF',20.)call Dynamic_Sound("Sounds\\Amaterasu2.mp3")
call DisplayText("Amaterasu",udg_Hii_Unit[0],.023,false,$DC,5,5,$FF)
set udg_Hii_Own=null
set udg_Hii_Bool=falseset udg_Hii_Real[0]=.5*GetHeroAgi(udg_Hii_Unit[0],true)set udg_Hii_Int[0]=70set udg_Hii_Int[1]=0
set udg_Hii_Buff='B021'call EnableTrigger(gg_trg_HiiL)call TriggerSleepAction(.6)call Dynamic_Sound("Sounds\\Amaterasu1.mp3")
endfunctionfunction InitTrig_Hii takes nothing returns nothingset gg_trg_Hii=CreateTrigger()call TriggerAddCondition(gg_trg_Hii,Condition(function Trig_Hii_Conditions))
call TriggerAddAction(gg_trg_Hii,function Trig_Hii_Actions)endfunctionfunction Trig_HiiL_Func001Func002002002 takes nothing returns booleanreturn(UnitHasBuffBJ(GetFilterUnit(),udg_Hii_Buff))endfunctionfunction Trig_HiiL_Func001Func005A takes nothing returns nothing
call UnitPureDamageTarget(udg_Hii_Unit[0],GetEnumUnit(),udg_Hii_Real[0])
endfunctionfunction Trig_HiiL_Func001C takes nothing returns booleanreturn(udg_Hii_Int[0]>0)
endfunctionfunction Trig_HiiL_Actions takes nothing returns nothing
if(Trig_HiiL_Func001C())then
set udg_Hii_Rect=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])set udg_Hii_Group=GetUnitsInRectMatching(udg_Hii_Rect,Condition(function Trig_HiiL_Func001Func002002002))call RemoveRect(udg_Hii_Rect)set udg_Hii_Rect=nullcall ForGroupBJ(udg_Hii_Group,function Trig_HiiL_Func001Func005A)call DestroyGroup(udg_Hii_Group)
set udg_Hii_Group=nullset udg_Hii_Int[0]=(udg_Hii_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Hii_Unit[1])
set udg_Hii_Unit[0]=null
set udg_Hii_Unit[1]=null
set udg_Hii_Real[0]=.0set udg_Hii_Real[1]=.0set udg_Hii_Int[0]=0
set udg_Hii_Buff=0endifendfunctionfunction InitTrig_HiiL takes nothing returns nothing
set gg_trg_HiiL=CreateTrigger()call DisableTrigger(gg_trg_HiiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HiiL,.2)call TriggerAddAction(gg_trg_HiiL,function Trig_HiiL_Actions)endfunctionfunction AI_Hitsugaya_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='E003' or GetUnitTypeId(GetTriggerUnit())=='E004')endfunctionfunction AI_Hitsugaya_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='E003' or GetUnitTypeId(GetAttacker())=='E004')
endfunctionfunction AI_Hitsugaya_AttackedCond takes nothing returns boolean
if(not AI_Hitsugaya_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Hitsugaya_AttackerCond takes nothing returns boolean
if(not AI_Hitsugaya_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Hitsugaya_CondOR takes nothing returns booleanreturn(AI_Hitsugaya_AttackedCond()or AI_Hitsugaya_AttackerCond())endfunctionfunction AI_Hitsugaya_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Hitsugaya_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Hitsugaya_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Hitsugaya_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A097')call SelectHeroSkill(AI_1,'A096')call SelectHeroSkill(AI_1,'A093')call SelectHeroSkill(AI_1,'A092')call SelectHeroSkill(AI_1,'A091')call SelectHeroSkill(AI_1,'A08Z')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point3)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssueTargetOrderById(AI_1,$D007F,AI_2)call IssueImmediateOrderById(AI_1,$D02B7)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point3)set AI_Attacker=falseendifcall IssuePointOrderByIdLoc(AI_1,$D0271,AI_Point3)endifcall RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Hitsugaya takes nothing returns nothing
set udg_AI_Trig[18]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[18],Condition(function AI_Hitsugaya_Cond))call TriggerAddAction(udg_AI_Trig[18],function AI_Hitsugaya_Act)
endfunctionfunction Trig_Hnm_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A08Z')endfunctionfunction Trig_Hnm_Actions takes nothing returns nothingset udg_Hnm_Unit[0]=GetTriggerUnit()
set udg_Hnm_Loc[0]=GetSpellTargetLoc()set udg_Hnm_Loc[1]=GetUnitLoc(udg_Hnm_Unit[0])set udg_Hnm_Real[0]=AngleBetweenPoints(udg_Hnm_Loc[1],udg_Hnm_Loc[0])set udg_Hnm_Own=GetOwningPlayer(udg_Hnm_Unit[0])
set udg_Hnm_Loc[2]=PolarProjectionBJ(udg_Hnm_Loc[1],100.,udg_Hnm_Real[0])set udg_Hnm_Loc[3]=PolarProjectionBJ(udg_Hnm_Loc[1],-50.,udg_Hnm_Real[0])call RemoveLocation(udg_Hnm_Loc[0])set udg_Hnm_Loc[0]=nullcall RemoveLocation(udg_Hnm_Loc[1])set udg_Hnm_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h07N',udg_Hnm_Own,udg_Hnm_Loc[2],udg_Hnm_Real[0])set udg_Hnm_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h07O',udg_Hnm_Own,udg_Hnm_Loc[3],udg_Hnm_Real[0])set udg_Hnm_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Hnm_Loc[2])set udg_Hnm_Loc[2]=nullcall RemoveLocation(udg_Hnm_Loc[3])set udg_Hnm_Loc[3]=nullcall SetUnitTimeScalePercent(udg_Hnm_Unit[2],170.)call UnitApplyTimedLife(udg_Hnm_Unit[2],'BTLF',3.)set udg_Hnm_Unit[2]=null
if(GetUnitTypeId(udg_Hnm_Unit[0])=='E001')thenset udg_Hnm_Bool=truecall DisplayText("Daiguren Hyorinmaru",udg_Hnm_Unit[0],.023,true,$FF,$FF,$FF,$FF)else
call DisplayText("Hyorinmaru",udg_Hnm_Unit[0],.023,true,$FF,$FF,$FF,$FF)
endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",udg_Hnm_Unit[0],"weapon"))set udg_Hnm_Real[1]=(150.+(75.*I2R(GetUnitAbilityLevelSwapped('A08Z',udg_Hnm_Unit[0]))))
set udg_Hnm_Real[2]=35.set udg_Hnm_Real[3]=270.
set udg_Hnm_Count=3set udg_Hnm_Int=25call EnableTrigger(gg_trg_HnmL)endfunctionfunction InitTrig_Hnm takes nothing returns nothingset gg_trg_Hnm=CreateTrigger()call TriggerAddCondition(gg_trg_Hnm,Condition(function Trig_Hnm_Conditions))
call TriggerAddAction(gg_trg_Hnm,function Trig_Hnm_Actions)endfunctionfunction Trig_HnmL_Func001Func019002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Hnm_Group2)==false)
endfunctionfunction Trig_HnmL_Func001Func019002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hnm_Own))
endfunctionfunction Trig_HnmL_Func001Func019002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HnmL_Func001Func019002003002002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HnmL_Func001Func019002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_HnmL_Func001Func019002003002002001(),Trig_HnmL_Func001Func019002003002002002())endfunctionfunction Trig_HnmL_Func001Func019002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HnmL_Func001Func019002003002001(),Trig_HnmL_Func001Func019002003002002())endfunctionfunction Trig_HnmL_Func001Func019002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HnmL_Func001Func019002003001(),Trig_HnmL_Func001Func019002003002())endfunctionfunction Trig_HnmL_Func001Func022A takes nothing returns nothing
set udg_Hnm_Unit[2]=GetEnumUnit()call GroupAddUnit(udg_Hnm_Group2,udg_Hnm_Unit[2])set udg_Hnm_Loc[0]=GetUnitLoc(udg_Hnm_Unit[2])call CreateNUnitsAtLoc(1,'u003',udg_Hnm_Own,udg_Hnm_Loc[0],bj_UNIT_FACING)set udg_Hnm_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Hnm_Loc[0])set udg_Hnm_Loc[0]=nullcall UnitAddAbility(udg_Hnm_Unit[3],udg_GlobalSkill[5])if(udg_Hnm_Bool)then
call SetUnitAbilityLevelSwapped(udg_GlobalSkill[5],udg_Hnm_Unit[3],2)endifcall IssueTargetOrderById(udg_Hnm_Unit[3],$D0102,udg_Hnm_Unit[2])call UnitApplyTimedLife(udg_Hnm_Unit[3],'BTLF',1.)if(IsUnitAliveBJ(udg_Hnm_Unit[2]))thencall UnitDamageTargetBJ(udg_Hnm_Unit[0],udg_Hnm_Unit[2],udg_Hnm_Real[1],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifset udg_Hnm_Unit[2]=null
set udg_Hnm_Unit[3]=null
endfunctionfunction Trig_HnmL_Func001C takes nothing returns booleanreturn(udg_Hnm_Int>0)endfunctionfunction Trig_HnmL_Actions takes nothing returns nothing
if(Trig_HnmL_Func001C())then
set udg_Hnm_Loc[0]=GetUnitLoc(udg_Hnm_Unit[1])set udg_Hnm_Loc[1]=PolarProjectionBJ(udg_Hnm_Loc[0],udg_Hnm_Real[2],udg_Hnm_Real[0])
call RemoveLocation(udg_Hnm_Loc[0])set udg_Hnm_Loc[0]=nullcall SetUnitPositionLoc(udg_Hnm_Unit[1],udg_Hnm_Loc[1])if(udg_Hnm_Count==3)then
call DestroyEffect(AddSpecialEffectLoc("IceNova2_Nosound.mdl",udg_Hnm_Loc[1]))set udg_Hnm_Count=0else
set udg_Hnm_Count=udg_Hnm_Count+1endifcall CreateNUnitsAtLoc(1,'h07Q',udg_Hnm_Own,udg_Hnm_Loc[1],udg_Hnm_Real[0])set udg_Hnm_Unit[2]=bj_lastCreatedUnitcall SetUnitTimeScalePercent(udg_Hnm_Unit[2],200.)call SetUnitAnimation(udg_Hnm_Unit[2],"death")call UnitApplyTimedLife(udg_Hnm_Unit[2],'BTLF',.2)set udg_Hnm_Unit[2]=null
call EnumDestructablesInCircleBJ(udg_Hnm_Real[3],udg_Hnm_Loc[1],function TreeKiller)
set udg_Hnm_Group=GetUnitsInRangeOfLocMatching(udg_Hnm_Real[3],udg_Hnm_Loc[1],Condition(function Trig_HnmL_Func001Func019002003))call RemoveLocation(udg_Hnm_Loc[1])set udg_Hnm_Loc[1]=nullcall ForGroupBJ(udg_Hnm_Group,function Trig_HnmL_Func001Func022A)call DestroyGroup(udg_Hnm_Group)
set udg_Hnm_Group=nullset udg_Hnm_Int=(udg_Hnm_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Hnm_Unit[1])
call GroupClear(udg_Hnm_Group2)set udg_Hnm_Own=null
set udg_Hnm_Unit[0]=null
set udg_Hnm_Unit[1]=null
set udg_Hnm_Real[0]=.0set udg_Hnm_Real[1]=.0set udg_Hnm_Real[2]=.0set udg_Hnm_Real[3]=.0set udg_Hnm_Count=0set udg_Hnm_Int=0set udg_Hnm_Bool=falseendifendfunctionfunction InitTrig_HnmL takes nothing returns nothing
set gg_trg_HnmL=CreateTrigger()call DisableTrigger(gg_trg_HnmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HnmL,.04)call TriggerAddAction(gg_trg_HnmL,function Trig_HnmL_Actions)endfunctionfunction Trig_Inv_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A091')endfunctionfunction Trig_Inv_Actions takes nothing returns nothingset udg_Inv_Unit[0]=GetTriggerUnit()
set udg_Inv_Loc[0]=GetSpellTargetLoc()set udg_Inv_Own=GetOwningPlayer(udg_Inv_Unit[0])
set udg_Inv_Real[0]=90.set udg_Inv_Real[1]=120.
set udg_Inv_Real[2]=-200.set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>3set udg_Inv_Real[3]=(I2R(udg_Inv_Int[0])*udg_Inv_Real[1])set udg_Inv_Loc[1]=PolarProjectionBJ(udg_Inv_Loc[0],udg_Inv_Real[0],(udg_Inv_Real[3]-udg_Inv_Real[1]))set udg_Inv_Loc[2]=PolarProjectionBJ(udg_Inv_Loc[1],udg_Inv_Real[2],udg_Inv_Real[3])
call CreateNUnitsAtLoc(1,'h07N',udg_Inv_Own,udg_Inv_Loc[2],udg_Inv_Real[3])set udg_Inv_Unit[udg_Inv_Int[0]]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullcall RemoveLocation(udg_Inv_Loc[2])set udg_Inv_Loc[2]=nullset udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopset udg_Inv_Real[0]=GetLocationX(udg_Inv_Loc[0])
set udg_Inv_Real[1]=GetLocationY(udg_Inv_Loc[0])
call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullset udg_Inv_Real[2]=30.set udg_Inv_Real[3]=(200.+(200.*I2R(GetUnitAbilityLevelSwapped('A091',udg_Inv_Unit[0]))))set udg_Inv_Int[1]=7
call EnableTrigger(gg_trg_InvL)endfunctionfunction InitTrig_Inv takes nothing returns nothingset gg_trg_Inv=CreateTrigger()call TriggerAddCondition(gg_trg_Inv,Condition(function Trig_Inv_Conditions))
call TriggerAddAction(gg_trg_Inv,function Trig_Inv_Actions)endfunctionfunction Trig_InvL_Func001Func015002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Inv_Own))
endfunctionfunction Trig_InvL_Func001Func015002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_InvL_Func001Func015002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_InvL_Func001Func015002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_InvL_Func001Func015002003002001(),Trig_InvL_Func001Func015002003002002())endfunctionfunction Trig_InvL_Func001Func015002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_InvL_Func001Func015002003001(),Trig_InvL_Func001Func015002003002())endfunctionfunction Trig_InvL_Func001Func018A takes nothing returns nothing
set udg_Inv_Unit[5]=GetEnumUnit()set udg_Inv_Loc[0]=GetUnitLoc(udg_Inv_Unit[5])call CreateNUnitsAtLoc(1,'u003',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)set udg_Inv_Unit[6]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall UnitAddAbility(udg_Inv_Unit[6],udg_GlobalSkill[5])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[5],udg_Hnm_Unit[6],3)call IssueTargetOrderById(udg_Inv_Unit[6],$D0102,udg_Inv_Unit[5])call UnitApplyTimedLife(udg_Inv_Unit[6],'BTLF',1.)if(IsUnitAliveBJ(udg_Inv_Unit[5]))thencall UnitDamageTargetBJ(udg_Inv_Unit[0],udg_Inv_Unit[5],udg_Inv_Real[3],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endifset udg_Inv_Unit[5]=null
set udg_Inv_Unit[6]=null
endfunctionfunction Trig_InvL_Func001C takes nothing returns booleanreturn(udg_Inv_Int[1]>0)
endfunctionfunction Trig_InvL_Actions takes nothing returns nothing
if(Trig_InvL_Func001C())then
set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>3set udg_Inv_Loc[0]=GetUnitLoc(udg_Inv_Unit[udg_Inv_Int[0]])set udg_Inv_Loc[1]=PolarProjectionBJ(udg_Inv_Loc[0],udg_Inv_Real[2],GetUnitFacing(udg_Inv_Unit[udg_Inv_Int[0]]))
call SetUnitPositionLoc(udg_Inv_Unit[udg_Inv_Int[0]],udg_Inv_Loc[1])
call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullset udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopset udg_Inv_Int[1]=(udg_Inv_Int[1]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullset udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>3set udg_Inv_Loc[0]=GetUnitLoc(udg_Inv_Unit[udg_Inv_Int[0]])call CreateNUnitsAtLoc(1,'h04O',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)set udg_Inv_Unit[4]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall SetUnitScalePercent(udg_Inv_Unit[4],500.,500.,500.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",udg_Inv_Unit[4],"origin"))call UnitApplyTimedLife(udg_Inv_Unit[4],'BTLF',2.)call RemoveUnit(udg_Inv_Unit[udg_Inv_Int[0]])set udg_Inv_Unit[udg_Inv_Int[0]]=nullset udg_Inv_Unit[4]=null
set udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopset udg_Inv_Real[4]=400.
set udg_Inv_Loc[0]=Location(udg_Inv_Real[0],udg_Inv_Real[1])
call CreateNUnitsAtLoc(1,'h02M',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)call CreateNUnitsAtLoc(1,'h07P',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h04O',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)set udg_Inv_Unit[4]=bj_lastCreatedUnitcall EnumDestructablesInCircleBJ(udg_Inv_Real[4],udg_Inv_Loc[0],function TreeKiller)
set udg_Inv_Group=GetUnitsInRangeOfLocMatching(udg_Inv_Real[4],udg_Inv_Loc[0],Condition(function Trig_InvL_Func001Func015002003))call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall ForGroupBJ(udg_Inv_Group,function Trig_InvL_Func001Func018A)call DestroyGroup(udg_Inv_Group)
set udg_Inv_Group=nullcall SetUnitScalePercent(udg_Inv_Unit[4],250.,250.,250.)
call DestroyEffect(AddSpecialEffectTarget("IceNova2.mdl",udg_Inv_Unit[4],"origin"))call UnitApplyTimedLife(udg_Inv_Unit[4],'BTLF',2.)set udg_Inv_Unit[0]=null
set udg_Inv_Unit[4]=null
set udg_Inv_Own=null
set udg_Inv_Real[0]=.0set udg_Inv_Real[1]=.0set udg_Inv_Real[2]=.0set udg_Inv_Real[3]=.0set udg_Inv_Real[4]=.0set udg_Inv_Int[0]=0
set udg_Inv_Int[1]=0
endifendfunctionfunction InitTrig_InvL takes nothing returns nothing
set gg_trg_InvL=CreateTrigger()call DisableTrigger(gg_trg_InvL)
call TriggerRegisterTimerEventPeriodic(gg_trg_InvL,.03)call TriggerAddAction(gg_trg_InvL,function Trig_InvL_Actions)endfunctionfunction Trig_Inv2_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A092')endfunctionfunction Trig_Inv2_Actions takes nothing returns nothing
set udg_Inv_Unit[0]=GetTriggerUnit()
set udg_Inv_Loc[0]=GetSpellTargetLoc()set udg_Inv_Own=GetOwningPlayer(udg_Inv_Unit[0])
set udg_Inv_Real[0]=GetLocationX(udg_Inv_Loc[0])
set udg_Inv_Real[1]=GetLocationY(udg_Inv_Loc[0])
set udg_Inv_Real[2]=600.
set udg_Inv_Real[3]=72.set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>5set udg_Inv_Loc[1]=PolarProjectionBJ(udg_Inv_Loc[0],udg_Inv_Real[2],(I2R(udg_Inv_Int[0])*udg_Inv_Real[3]))call CreateNUnitsAtLoc(1,'h02M',udg_Inv_Own,udg_Inv_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)call CreateNUnitsAtLoc(1,'h04O',udg_Inv_Own,udg_Inv_Loc[1],bj_UNIT_FACING)set udg_Inv_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullcall DestroyEffect(AddSpecialEffectTarget("IceNova2_Nosound.mdl",udg_Inv_Unit[1],"origin"))call UnitApplyTimedLife(udg_Inv_Unit[1],'BTLF',1.)set udg_Inv_Unit[1]=null
set udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullset udg_Inv_Real[3]=20.set udg_Inv_Loc[0]=Location(udg_Inv_Real[0],udg_Inv_Real[1])
set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>18set udg_Inv_Loc[1]=PolarProjectionBJ(udg_Inv_Loc[0],udg_Inv_Real[2],(udg_Inv_Real[3]*I2R(udg_Inv_Int[0])))call CreateNUnitsAtLocFacingLocBJ(1,'h07R',udg_Inv_Own,udg_Inv_Loc[1],udg_Inv_Loc[0])set udg_Inv_Unit[udg_Inv_Int[0]]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullset udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall DisplayText("Sennen Hyoro",udg_Inv_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Hitsugaya\\SennenHyoro.wav",GetUnitX(udg_Inv_Unit[0]),GetUnitY(udg_Inv_Unit[0]))call TriggerSleepAction(.5)set udg_Inv_Loc[0]=Location(udg_Inv_Real[0],udg_Inv_Real[1])
set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>18call SetUnitMoveSpeed(udg_Inv_Unit[udg_Inv_Int[0]],522.)
call IssuePointOrderByIdLoc(udg_Inv_Unit[udg_Inv_Int[0]],$D0003,udg_Inv_Loc[0])set udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullset udg_Inv_Real[2]=(200.+(200.*I2R(GetUnitAbilityLevelSwapped('A092',udg_Inv_Unit[0]))))set udg_Inv_Real[3]=50.set udg_Inv_Real[4]=100.
set udg_Inv_Real[5]=40.set udg_Inv_Int[1]=24call EnableTrigger(gg_trg_InvL2)
endfunctionfunction InitTrig_Inv2 takes nothing returns nothing
set gg_trg_Inv2=CreateTrigger()call TriggerAddCondition(gg_trg_Inv2,Condition(function Trig_Inv2_Conditions))call TriggerAddAction(gg_trg_Inv2,function Trig_Inv2_Actions)endfunctionfunction Trig_InvL2_Func001Func001Func003002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Inv_Own))
endfunctionfunction Trig_InvL2_Func001Func001Func003002003002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_InvL2_Func001Func001Func003002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_InvL2_Func001Func001Func003002003002002002 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=nullendfunctionfunction Trig_InvL2_Func001Func001Func003002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_InvL2_Func001Func001Func003002003002002001(),Trig_InvL2_Func001Func001Func003002003002002002())endfunctionfunction Trig_InvL2_Func001Func001Func003002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_InvL2_Func001Func001Func003002003002001(),Trig_InvL2_Func001Func001Func003002003002002())endfunctionfunction Trig_InvL2_Func001Func001Func003002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_InvL2_Func001Func001Func003002003001(),Trig_InvL2_Func001Func001Func003002003002())endfunctionfunction Trig_InvL2_Func001Func001Func009Func002C takes nothing returns booleanreturn(IsUnitInGroup(udg_Inv_Unit[19],udg_Inv_Group2)==false)endfunctionfunction Trig_InvL2_Func001Func001Func009A takes nothing returns nothing
set udg_Inv_Unit[19]=GetEnumUnit()if(Trig_InvL2_Func001Func001Func009Func002C())thencall GroupAddUnit(udg_Inv_Group2,udg_Inv_Unit[19])call SetUnitPathing(udg_Inv_Unit[19],false)endifset udg_Inv_Loc[0]=Location(udg_Inv_Real[0],udg_Inv_Real[1])
set udg_Inv_Loc[1]=GetUnitLoc(udg_Inv_Unit[19])set udg_Inv_Loc[2]=PolarProjectionBJ(udg_Inv_Loc[1],udg_Inv_Real[5],AngleBetweenPoints(udg_Inv_Loc[1],udg_Inv_Loc[0]))if(IsTerrainPathableBJ(udg_Inv_Loc[2],PATHING_TYPE_WALKABILITY)==false)thencall SetUnitPositionLoc(udg_Inv_Unit[19],udg_Inv_Loc[2])
endifcall RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullcall RemoveLocation(udg_Inv_Loc[2])set udg_Inv_Loc[2]=nullset udg_Inv_Unit[19]=nullendfunctionfunction Trig_InvL2_Func001Func013002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Inv_Own))
endfunctionfunction Trig_InvL2_Func001Func013002003002001 takes nothing returns boolean
return(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_InvL2_Func001Func013002003002002 takes nothing returns boolean
return(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_InvL2_Func001Func013002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_InvL2_Func001Func013002003002001(),Trig_InvL2_Func001Func013002003002002())endfunctionfunction Trig_InvL2_Func001Func013002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_InvL2_Func001Func013002003001(),Trig_InvL2_Func001Func013002003002())endfunctionfunction Trig_InvL2_Func001Func016A takes nothing returns nothingset udg_Inv_Unit[20]=GetEnumUnit()set udg_Inv_Loc[1]=GetUnitLoc(udg_Inv_Unit[20])call CreateNUnitsAtLoc(1,'u003',udg_Inv_Own,udg_Inv_Loc[1],bj_UNIT_FACING)set udg_Inv_Unit[21]=bj_lastCreatedUnitcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullcall UnitAddAbility(udg_Inv_Unit[21],udg_GlobalSkill[5])
call SetUnitAbilityLevelSwapped(udg_GlobalSkill[5],udg_Hnm_Unit[21],4)call IssueTargetOrderById(udg_Inv_Unit[21],$D0102,udg_Inv_Unit[20])call UnitApplyTimedLife(udg_Inv_Unit[21],'BTLF',1.)if(IsUnitAliveBJ(udg_Inv_Unit[20]))thencall UnitDamageTargetBJ(udg_Inv_Unit[0],udg_Inv_Unit[20],udg_Inv_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endifset udg_Inv_Unit[20]=nullset udg_Inv_Unit[21]=nullendfunctionfunction Trig_InvL2_Func001Func028A takes nothing returns nothingcall SetUnitPathing(udg_Inv_Unit[19],true)endfunctionfunction Trig_InvL2_Func001C takes nothing returns booleanreturn(udg_Inv_Int[1]>0)
endfunctionfunction Trig_InvL2_Actions takes nothing returns nothingif(Trig_InvL2_Func001C())thenset udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>18set udg_Inv_Loc[0]=GetUnitLoc(udg_Inv_Unit[udg_Inv_Int[0]])set udg_Inv_Loc[1]=PolarProjectionBJ(udg_Inv_Loc[0],udg_Inv_Real[3],GetUnitFacing(udg_Inv_Unit[udg_Inv_Int[0]]))
set udg_Inv_Group=GetUnitsInRangeOfLocMatching(udg_Inv_Real[4],udg_Inv_Loc[1],Condition(function Trig_InvL2_Func001Func001Func003002003))call EnumDestructablesInCircleBJ(udg_Inv_Real[4],udg_Inv_Loc[1],function TreeKiller)
call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall RemoveLocation(udg_Inv_Loc[1])set udg_Inv_Loc[1]=nullcall ForGroupBJ(udg_Inv_Group,function Trig_InvL2_Func001Func001Func009A)call DestroyGroup(udg_Inv_Group)
set udg_Inv_Group=nullset udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopset udg_Inv_Int[1]=(udg_Inv_Int[1]-1)if(udg_Inv_Int[1]==1)thenset udg_Inv_Loc[0]=Location(udg_Inv_Real[0],udg_Inv_Real[1])
call CreateNUnitsAtLoc(1,'h02M',udg_Inv_Own,udg_Inv_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)call CreateNUnitsAtLoc(1,'h07P',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h07S',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h04O',udg_Inv_Own,udg_Inv_Loc[0],bj_UNIT_FACING)set udg_Inv_Unit[19]=bj_lastCreatedUnitset udg_Inv_Group=GetUnitsInRangeOfLocMatching(400.,udg_Inv_Loc[0],Condition(function Trig_InvL2_Func001Func013002003))call RemoveLocation(udg_Inv_Loc[0])set udg_Inv_Loc[0]=nullcall ForGroupBJ(udg_Inv_Group,function Trig_InvL2_Func001Func016A)call DestroyGroup(udg_Inv_Group)
set udg_Inv_Group=nullcall DestroyEffect(AddSpecialEffectTarget("IceNova2.mdl",udg_Inv_Unit[19],"origin"))
call SetUnitScalePercent(udg_Inv_Unit[19],300.,300.,300.)call UnitApplyTimedLife(udg_Inv_Unit[19],'BTLF',1.)set udg_Inv_Unit[19]=nullendifelse
call DisableTrigger(GetTriggeringTrigger())set udg_Inv_Int[0]=1
loop
exitwhen udg_Inv_Int[0]>18call RemoveUnit(udg_Inv_Unit[udg_Inv_Int[0]])set udg_Inv_Unit[udg_Inv_Int[0]]=nullset udg_Inv_Int[0]=udg_Inv_Int[0]+1endloopset udg_Inv_Group=CreateGroup()call GroupAddGroup(udg_Inv_Group2,udg_Inv_Group)
call ForGroupBJ(udg_Inv_Group,function Trig_InvL2_Func001Func028A)call DestroyGroup(udg_Inv_Group)
set udg_Inv_Group=nullcall GroupClear(udg_Inv_Group2)set udg_Inv_Unit[0]=null
set udg_Inv_Own=null
set udg_Inv_Real[0]=.0set udg_Inv_Real[1]=.0set udg_Inv_Real[2]=.0set udg_Inv_Real[3]=.0set udg_Inv_Real[4]=.0set udg_Inv_Real[5]=.0set udg_Inv_Int[0]=0
set udg_Inv_Int[1]=0
endifendfunctionfunction InitTrig_InvL2 takes nothing returns nothingset gg_trg_InvL2=CreateTrigger()
call DisableTrigger(gg_trg_InvL2)call TriggerRegisterTimerEventPeriodic(gg_trg_InvL2,.05)
call TriggerAddAction(gg_trg_InvL2,function Trig_InvL2_Actions)endfunctionfunction Trig_Daiguren_Init_DieAct takes nothing returns nothing
call UnitRemoveAbility(GetDyingUnit(),'A094')endfunctionfunction Trig_Daiguren_Init_DieCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetDyingUnit(),'A094')>0)
endfunctionfunction Trig_Daiguren_Init_Conditions takes nothing returns boolean
return(GetLearnedSkill()=='A093')endfunctionfunction Trig_Daiguren_Init_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()local trigger t=CreateTrigger()call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A094',false)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddCondition(t,Condition(function Trig_Daiguren_Init_DieCond))call TriggerAddAction(t,function Trig_Daiguren_Init_DieAct)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Daiguren_Init takes nothing returns nothingset gg_trg_Daiguren_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_Daiguren_Init,Condition(function Trig_Daiguren_Init_Conditions))
call TriggerAddAction(gg_trg_Daiguren_Init,function Trig_Daiguren_Init_Actions)endfunctionfunction Trig_Daiguren_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A093')endfunctionfunction Trig_Daiguren_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='E004')then
set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)call DisplayText("Bankai Daiguren Hyorinmaru",u,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Hitsugaya\\Bankai.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h02M',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)set bj_lastCreatedUnit=CreateUnit(p,'h07S',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h058',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)set bj_lastCreatedUnit=CreateUnit(p,'h04O',x,y,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,300.,300.,300.)call DestroyEffect(AddSpecialEffectTarget("IceNova2.mdl",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call TransfromAction(u,x,y)set p=nullelse
call UnitRemoveAbility(u,'A094')
endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Daiguren takes nothing returns nothing
set gg_trg_Daiguren=CreateTrigger()call TriggerAddCondition(gg_trg_Daiguren,Condition(function Trig_Daiguren_Conditions))call TriggerAddAction(gg_trg_Daiguren,function Trig_Daiguren_Actions)endfunctionfunction Trig_Dhf_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A096')endfunctionfunction Trig_Dhf_Actions takes nothing returns nothingset udg_Dhf_Unit[0]=GetTriggerUnit()
set udg_Dhf_Loc[0]=GetSpellTargetLoc()set udg_Dhf_Loc[1]=GetUnitLoc(udg_Dhf_Unit[0])set udg_Dhf_Real[0]=AngleBetweenPoints(udg_Dhf_Loc[1],udg_Dhf_Loc[0])call RemoveLocation(udg_Dhf_Loc[0])set udg_Dhf_Loc[0]=nullcall RemoveLocation(udg_Dhf_Loc[1])set udg_Dhf_Loc[1]=nullcall SetUnitTimeScalePercent(udg_Dhf_Unit[0],.0)
call SetUnitPathing(udg_Dhf_Unit[0],false)call PauseSystem(udg_Dhf_Unit[0],true)call DisplayText("Ryusenka",udg_Dhf_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Hitsugaya\\Ryuusenka.wav",GetUnitX(udg_Dhf_Unit[0]),GetUnitY(udg_Dhf_Unit[0]))set udg_Dhf_Own=GetOwningPlayer(udg_Dhf_Unit[0])
set udg_Dhf_Real[1]=(900.+((5.+I2R(GetUnitAbilityLevelSwapped('A096',udg_Dhf_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Dhf_Unit[0],true))))
set udg_Dhf_Real[2]=46.set udg_Dhf_Real[3]=350.
set udg_Dhf_Int[0]=24set udg_Dhf_Int[1]=3
call EnableTrigger(gg_trg_DhfL)endfunctionfunction InitTrig_Dhf takes nothing returns nothingset gg_trg_Dhf=CreateTrigger()call TriggerAddCondition(gg_trg_Dhf,Condition(function Trig_Dhf_Conditions))
call TriggerAddAction(gg_trg_Dhf,function Trig_Dhf_Actions)endfunctionfunction Trig_DhfL_Func001Func016002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Dhf_Group2)==false)
endfunctionfunction Trig_DhfL_Func001Func016002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Dhf_Own))
endfunctionfunction Trig_DhfL_Func001Func016002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_DhfL_Func001Func016002003002002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_DhfL_Func001Func016002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_DhfL_Func001Func016002003002002001(),Trig_DhfL_Func001Func016002003002002002())endfunctionfunction Trig_DhfL_Func001Func016002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_DhfL_Func001Func016002003002001(),Trig_DhfL_Func001Func016002003002002())endfunctionfunction Trig_DhfL_Func001Func016002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_DhfL_Func001Func016002003001(),Trig_DhfL_Func001Func016002003002())endfunctionfunction Trig_DhfL_Func001Func021A takes nothing returns nothing
set udg_Dhf_Unit[1]=GetEnumUnit()call GroupAddUnit(udg_Dhf_Group2,udg_Dhf_Unit[1])set udg_Dhf_Loc[0]=GetUnitLoc(udg_Dhf_Unit[1])call DestroyEffect(AddSpecialEffectLoc("IceNova2.mdl",udg_Dhf_Loc[0]))call CreateNUnitsAtLoc(1,'h07P',udg_Dhf_Own,udg_Dhf_Loc[0],bj_UNIT_FACING)set udg_Dhf_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Dhf_Loc[0])set udg_Dhf_Loc[0]=nullcall SetUnitScalePercent(udg_Dhf_Unit[2],'d','d','d')call UnitApplyTimedLife(udg_Dhf_Unit[2],'BTLF',3.)call UnitDamageTargetBJ(udg_Dhf_Unit[0],udg_Dhf_Unit[1],udg_Dhf_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Dhf_Unit[1]=null
set udg_Dhf_Unit[2]=null
endfunctionfunction Trig_DhfL_Func001C takes nothing returns booleanreturn(udg_Dhf_Int[0]>0)and(IsUnitAliveBJ(udg_Dhf_Unit[0]))endfunctionfunction Trig_DhfL_Actions takes nothing returns nothing
if(Trig_DhfL_Func001C())then
set udg_Dhf_Loc[0]=GetUnitLoc(udg_Dhf_Unit[0])set udg_Dhf_Loc[1]=PolarProjectionBJ(udg_Dhf_Loc[0],udg_Dhf_Real[2],udg_Dhf_Real[0])
if(IsTerrainPathableBJ(udg_Dhf_Loc[1],PATHING_TYPE_WALKABILITY)==false)thencall EnumDestructablesInCircleBJ(150.,udg_Dhf_Loc[1],function TreeKiller)call SetUnitPositionLocFacingBJ(udg_Dhf_Unit[0],udg_Dhf_Loc[1],udg_Dhf_Real[0])endifif(udg_Dhf_Int[1]==3)thencall CreateNUnitsAtLoc(1,'h07T',udg_Dhf_Own,udg_Dhf_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h07U',udg_Dhf_Own,udg_Dhf_Loc[1],udg_Dhf_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Dhf_Int[1]=0
else
set udg_Dhf_Int[1]=(udg_Dhf_Int[1]+1)endifset udg_Dhf_Group=GetUnitsInRangeOfLocMatching(udg_Dhf_Real[3],udg_Dhf_Loc[1],Condition(function Trig_DhfL_Func001Func016002003))call RemoveLocation(udg_Dhf_Loc[0])set udg_Dhf_Loc[0]=nullcall RemoveLocation(udg_Dhf_Loc[1])set udg_Dhf_Loc[1]=nullcall ForGroupBJ(udg_Dhf_Group,function Trig_DhfL_Func001Func021A)call DestroyGroup(udg_Dhf_Group)
set udg_Dhf_Group=nullset udg_Dhf_Int[0]=(udg_Dhf_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitPathing(udg_Dhf_Unit[0],true)call SetUnitTimeScalePercent(udg_Dhf_Unit[0],100.)call PauseSystem(udg_Dhf_Unit[0],false)call GroupClear(udg_Dhf_Group2)set udg_Dhf_Own=null
set udg_Dhf_Unit[0]=null
set udg_Dhf_Real[0]=AngleBetweenPoints(udg_Dhf_Loc[1],udg_Dhf_Loc[0])set udg_Dhf_Real[1]=.0set udg_Dhf_Real[2]=.0set udg_Dhf_Real[3]=.0set udg_Dhf_Int[0]=0
set udg_Dhf_Int[1]=0
endifendfunctionfunction InitTrig_DhfL takes nothing returns nothing
set gg_trg_DhfL=CreateTrigger()call DisableTrigger(gg_trg_DhfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DhfL,.04)call TriggerAddAction(gg_trg_DhfL,function Trig_DhfL_Actions)endfunctionfunction Trig_Hho_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A097')endfunctionfunction Trig_Hho_Actions takes nothing returns nothingset udg_Hho_Unit[0]=GetTriggerUnit()
set udg_Hho_Unit[1]=GetSpellTargetUnit()
set udg_Hho_Real[0]=(2000.+((10.+(5.*I2R(GetUnitAbilityLevelSwapped('A097',udg_Hho_Unit[0]))))*I2R(GetHeroStatBJ(1,udg_Hho_Unit[0],false))))
set udg_Hho_Real[1]=(udg_Hho_Real[0]/ 2.)set udg_Hho_Real[2]=700.
call SetUnitInvulnerable(udg_Hho_Unit[0],true)call SetUnitInvulnerable(udg_Hho_Unit[1],true)call SetUnitTimeScalePercent(udg_Hho_Unit[0],.0)
call PauseSystem(udg_Hho_Unit[0],true)call PauseSystem(udg_Hho_Unit[1],true)set udg_Hho_Loc[0]=GetUnitLoc(udg_Hho_Unit[1])set udg_Hho_Rect=RectFromCenterSizeBJ(udg_Hho_Loc[0],9999.,9999.)set udg_Hho_Weather=AddWeatherEffectSaveLast(udg_Hho_Rect,'SNhs')call RemoveLocation(udg_Hho_Loc[0])set udg_Hho_Loc[0]=nullcall EnableWeatherEffect(udg_Hho_Weather,true)set udg_Hho_Own=GetOwningPlayer(udg_Hho_Unit[0])
call DisplayText("Hyoten Hyakkaso",udg_Hho_Unit[0],.023,false,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\HyotenHyakkaso.mp3")
call TriggerSleepAction(1.)set udg_Hho_Int=1call EnableTrigger(gg_trg_HhoL)endfunctionfunction InitTrig_Hho takes nothing returns nothingset gg_trg_Hho=CreateTrigger()call TriggerAddCondition(gg_trg_Hho,Condition(function Trig_Hho_Conditions))
call TriggerAddAction(gg_trg_Hho,function Trig_Hho_Actions)endfunctionfunction Trig_HhoL_Func001Func005002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Hho_Own))
endfunctionfunction Trig_HhoL_Func001Func005002003002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HhoL_Func001Func005002003002002 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_HhoL_Func001Func005002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HhoL_Func001Func005002003002001(),Trig_HhoL_Func001Func005002003002002())endfunctionfunction Trig_HhoL_Func001Func005002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HhoL_Func001Func005002003001(),Trig_HhoL_Func001Func005002003002())endfunctionfunction Trig_HhoL_Func001Func006A takes nothing returns nothing
set udg_Hho_Unit[2]=GetEnumUnit()set udg_Hho_Loc[1]=GetUnitLoc(udg_Hho_Unit[2])call CreateNUnitsAtLoc(1,'h07X',udg_Hho_Own,udg_Hho_Loc[1],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07W',udg_Hho_Own,udg_Hho_Loc[1],GetRandomReal(0,360))
call GroupAddUnit(udg_Hho_GroupDummy,bj_lastCreatedUnit)
call RemoveLocation(udg_Hho_Loc[1])set udg_Hho_Loc[1]=nullif(IsUnitType(udg_Hho_Unit[2],UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Hho_Real[1]))+"!",udg_Hho_Unit[2],.027,true,$FF,0,0,$FF)endifcall UnitDamageTargetBJ(udg_Hho_Unit[0],udg_Hho_Unit[2],udg_Hho_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(IsUnitAliveBJ(udg_Hho_Unit[2]))thencall CreateNUnitsAtLoc(1,'u003',udg_Hho_Own,udg_Hho_Loc[0],bj_UNIT_FACING)set udg_Hho_Unit[3]=bj_lastCreatedUnitcall UnitAddAbility(udg_Hho_Unit[3],udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],udg_Hho_Unit[3],6)call IssueTargetOrderById(udg_Hho_Unit[3],$D007F,udg_Hho_Unit[2])call UnitApplyTimedLife(udg_Hho_Unit[3],'BTLF',1.)set udg_Hho_Unit[3]=null
endifset udg_Hho_Unit[2]=null
endfunctionfunction Trig_HhoL_Func001C takes nothing returns booleanreturn(udg_Hho_Int<$B)and(IsUnitAliveBJ(udg_Hho_Unit[1]))endfunctionfunction Trig_HhoL_Actions takes nothing returns nothing
if(Trig_HhoL_Func001C())then
set udg_Hho_Loc[0]=GetUnitLoc(udg_Hho_Unit[1])call CreateNUnitsAtLoc(1,'h07V',udg_Hho_Own,udg_Hho_Loc[0],GetRandomReal(0,360))
set udg_Hho_Unit[2]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h04O',udg_Hho_Own,udg_Hho_Loc[0],bj_UNIT_FACING)set udg_Hho_Unit[3]=bj_lastCreatedUnitcall RemoveLocation(udg_Hho_Loc[0])set udg_Hho_Loc[0]=nullcall SetUnitTimeScalePercent(udg_Hho_Unit[2],(100.-(5.*I2R(udg_Hho_Int))))call SetUnitFlyHeight(udg_Hho_Unit[2],(1100.-(100.*I2R(udg_Hho_Int))),0)
call SetUnitScalePercent(udg_Hho_Unit[3],300.,300.,300.)
call DestroyEffect(AddSpecialEffectTarget("Icestomp2.mdl",udg_Hho_Unit[3],"origin"))
call UnitApplyTimedLife(udg_Hho_Unit[2],'BTLF',6.)call UnitApplyTimedLife(udg_Hho_Unit[3],'BTLF',1.)set udg_Hho_Unit[2]=null
set udg_Hho_Unit[3]=null
set udg_Hho_Int=(udg_Hho_Int+1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Hho_Loc[0]=GetUnitLoc(udg_Hho_Unit[1])call SetTerrainTypeBJ(udg_Hho_Loc[0],'Isnw',-1,7,0)call EnumDestructablesInCircleBJ(udg_Hho_Real[2],udg_Hho_Loc[0],function TreeKiller)
set udg_Hho_Group=GetUnitsInRangeOfLocMatching(udg_Hho_Real[2],udg_Hho_Loc[0],Condition(function Trig_HhoL_Func001Func005002003))call ForGroupBJ(udg_Hho_Group,function Trig_HhoL_Func001Func006A)call RemoveLocation(udg_Hho_Loc[0])set udg_Hho_Loc[0]=nullcall DestroyGroup(udg_Hho_Group)
set udg_Hho_Group=nullcall SetUnitInvulnerable(udg_Hho_Unit[0],false)call SetUnitInvulnerable(udg_Hho_Unit[1],false)call PauseSystem(udg_Hho_Unit[0],false)call PauseSystem(udg_Hho_Unit[1],false)call DisplayText(I2S(R2I(udg_Hho_Real[0]))+"!",udg_Hho_Unit[1],.027,true,$FF,0,0,$FF)set udg_Hho_Loc[0]=GetUnitLoc(udg_Hho_Unit[1])call CreateNUnitsAtLoc(1,'h07X',udg_Hho_Own,udg_Hho_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07X',udg_Hho_Own,udg_Hho_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call UnitDamageTargetBJ(udg_Hho_Unit[0],udg_Hho_Unit[1],udg_Hho_Real[0],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(IsUnitAliveBJ(udg_Hho_Unit[1]))thencall CreateNUnitsAtLoc(1,'u003',udg_Hho_Own,udg_Hho_Loc[0],bj_UNIT_FACING)set udg_Hho_Unit[3]=bj_lastCreatedUnitcall UnitAddAbility(udg_Hho_Unit[3],udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],udg_Hho_Unit[3],7)call IssueTargetOrderById(udg_Hho_Unit[3],$D007F,udg_Hho_Unit[1])call UnitApplyTimedLife(udg_Hho_Unit[3],'BTLF',1.)set udg_Hho_Unit[3]=null
endifset udg_Hho_Int=1loop
exitwhen udg_Hho_Int>5set udg_Hho_Real[2]=(240.-(40.*I2R(udg_Hho_Int)))call CreateNUnitsAtLoc(1,'h07W',udg_Hho_Own,udg_Hho_Loc[0],GetRandomReal(0,360))
set udg_Hho_Unit[2]=bj_lastCreatedUnitcall SetUnitScalePercent(udg_Hho_Unit[2],udg_Hho_Real[2],udg_Hho_Real[2],udg_Hho_Real[2])call GroupAddUnit(udg_Hho_GroupDummy,udg_Hho_Unit[2])set udg_Hho_Unit[2]=null
set udg_Hho_Int=udg_Hho_Int+1endloopcall RemoveLocation(udg_Hho_Loc[0])set udg_Hho_Loc[0]=nullcall SetUnitTimeScalePercent(udg_Hho_Unit[0],100.)set udg_Hho_Own=null
set udg_Hho_Unit[0]=null
set udg_Hho_Unit[1]=null
set udg_Hho_Real[0]=.0set udg_Hho_Real[1]=.0set udg_Hho_Real[2]=.0call TriggerSleepAction(3.)call EnableWeatherEffect(udg_Hho_Weather,false)set udg_Hho_Int=1call EnableTrigger(gg_trg_HhoR)call TriggerSleepAction(2)call RemoveWeatherEffect(udg_Hho_Weather)set udg_Hho_Weather=null
call RemoveRect(udg_Hho_Rect)set udg_Hho_Rect=nullendifendfunctionfunction InitTrig_HhoL takes nothing returns nothing
set gg_trg_HhoL=CreateTrigger()call DisableTrigger(gg_trg_HhoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HhoL,.12)call TriggerAddAction(gg_trg_HhoL,function Trig_HhoL_Actions)endfunctionfunction Trig_HhoR_Func001Func003A takes nothing returns nothing
call SetUnitVertexColorBJ(GetEnumUnit(),'d','d','d',(5.*I2R(udg_Hho_Int)))endfunctionfunction Trig_HhoR_Func001Func011A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_HhoR_Func001C takes nothing returns booleanreturn(udg_Hho_Int<20)endfunctionfunction Trig_HhoR_Actions takes nothing returns nothing
if(Trig_HhoR_Func001C())then
set udg_Hho_Group=CreateGroup()call GroupAddGroup(udg_Hho_GroupDummy,udg_Hho_Group)
call ForGroupBJ(udg_Hho_Group,function Trig_HhoR_Func001Func003A)call DestroyGroup(udg_Hho_Group)
set udg_Hho_Group=nullset udg_Hho_Int=(udg_Hho_Int+1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Hho_Group=CreateGroup()call GroupAddGroup(udg_Hho_GroupDummy,udg_Hho_Group)
call ForGroupBJ(udg_Hho_Group,function Trig_HhoR_Func001Func011A)call DestroyGroup(udg_Hho_Group)
set udg_Hho_Group=nullcall GroupClear(udg_Hho_GroupDummy)set udg_Hho_Int=0endifendfunctionfunction InitTrig_HhoR takes nothing returns nothing
set gg_trg_HhoR=CreateTrigger()call DisableTrigger(gg_trg_HhoR)
call TriggerRegisterTimerEventPeriodic(gg_trg_HhoR,.06)call TriggerAddAction(gg_trg_HhoR,function Trig_HhoR_Actions)endfunctionfunction AI_Crocodile_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='N01J')endfunctionfunction AI_Crocodile_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='N01J')
endfunctionfunction AI_Crocodile_AttackedCond takes nothing returns boolean
if(not AI_Crocodile_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Crocodile_AttackerCond takes nothing returns boolean
if(not AI_Crocodile_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Crocodile_CondOR takes nothing returns booleanreturn(AI_Crocodile_AttackedCond()or AI_Crocodile_AttackerCond())endfunctionfunction AI_Crocodile_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Crocodile_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Crocodile_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Crocodile_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A09U')call SelectHeroSkill(AI_1,'A09T')call SelectHeroSkill(AI_1,'A09S')call SelectHeroSkill(AI_1,'A09R')call SelectHeroSkill(AI_1,'A09Q')endifset AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0264,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0277)set AI_Attacker=falseendifcall IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point2)call IssueTargetOrderById(AI_1,$D007F,AI_2)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullcall IssueImmediateOrderById(AI_1,$D0084)endifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Crocodile takes nothing returns nothing
set udg_AI_Trig[19]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[19],Condition(function AI_Crocodile_Cond))call TriggerAddAction(udg_AI_Trig[19],function AI_Crocodile_Act)
endfunctionfunction SandSkin_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09W')endfunctionfunction SandSkin_Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer my_skill='A09G'local integer my_buff='B025'
local real delay=.5call SetPlayerAbilityAvailable(p,my_skill,false)
call UnitAddAbility(u,my_skill)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,my_buff)<1)endloopcall UnitRemoveAbility(u,my_skill)call SetPlayerAbilityAvailable(p,my_skill,true)set p=nullset u=nullset my_skill=0set my_buff=0set delay=.0
endfunctionfunction InitTrig_Sand_Skin takes nothing returns nothingset gg_trg_Sand_Skin=CreateTrigger()
call TriggerAddCondition(gg_trg_Sand_Skin,Condition(function SandSkin_Conditions))call TriggerAddAction(gg_trg_Sand_Skin,function SandSkin_Act)endfunctionfunction Trig_Dsd_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09Q')endfunctionfunction Trig_Dsd_Actions takes nothing returns nothingset udg_Dsd_Unit[0]=GetTriggerUnit()
set udg_Dsd_Loc[0]=GetSpellTargetLoc()set udg_Dsd_Loc[1]=GetUnitLoc(udg_Dsd_Unit[0])set udg_Dsd_Real[0]=AngleBetweenPoints(udg_Dsd_Loc[1],udg_Dsd_Loc[0])call RemoveLocation(udg_Dsd_Loc[0])set udg_Dsd_Loc[0]=nullset udg_Dsd_Real[1]=GetLocationX(udg_Dsd_Loc[1])
set udg_Dsd_Real[2]=GetLocationY(udg_Dsd_Loc[1])
call RemoveLocation(udg_Dsd_Loc[1])set udg_Dsd_Loc[1]=nullcall DisplayText("Desert Spada",udg_Dsd_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Dsd_Real[3]=((50.+(I2R(GetUnitAbilityLevelSwapped('A09Q',udg_Dsd_Unit[0]))*100.))+((1.5+(.5*I2R(GetUnitAbilityLevelSwapped('A09Q',udg_Dsd_Unit[0]))))*I2R(GetHeroStr(udg_Dsd_Unit[0],true))))set udg_Dsd_Real[4]=70.set udg_Dsd_Real[5]=150.
set udg_Dsd_Int=0set udg_Dsd_Own=GetOwningPlayer(udg_Dsd_Unit[0])
call EnableTrigger(gg_trg_DsdL)endfunctionfunction InitTrig_Dsd takes nothing returns nothingset gg_trg_Dsd=CreateTrigger()call TriggerAddCondition(gg_trg_Dsd,Condition(function Trig_Dsd_Conditions))
call TriggerAddAction(gg_trg_Dsd,function Trig_Dsd_Actions)endfunctionfunction Trig_DsdL_Func001Func022002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Dsd_Group2)==false)
endfunctionfunction Trig_DsdL_Func001Func022002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Dsd_Own))
endfunctionfunction Trig_DsdL_Func001Func022002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_DsdL_Func001Func022002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_DsdL_Func001Func022002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_DsdL_Func001Func022002003002002001(),Trig_DsdL_Func001Func022002003002002002())endfunctionfunction Trig_DsdL_Func001Func022002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_DsdL_Func001Func022002003002001(),Trig_DsdL_Func001Func022002003002002())endfunctionfunction Trig_DsdL_Func001Func022002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_DsdL_Func001Func022002003001(),Trig_DsdL_Func001Func022002003002())endfunctionfunction Trig_DsdL_Func001Func025A takes nothing returns nothing
set udg_Dsd_Unit[1]=GetEnumUnit()call GroupAddUnit(udg_Dsd_Group2,udg_Dsd_Unit[1])call UnitDamageTargetBJ(udg_Dsd_Unit[0],udg_Dsd_Unit[1],udg_Dsd_Real[3],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Dsd_Unit[1]=null
endfunctionfunction Trig_DsdL_Func001C takes nothing returns booleanreturn(udg_Dsd_Int<21)endfunctionfunction Trig_DsdL_Actions takes nothing returns nothing
if(Trig_DsdL_Func001C())then
set udg_Dsd_Loc[0]=Location(udg_Dsd_Real[1],udg_Dsd_Real[2])
set udg_Dsd_Loc[1]=PolarProjectionBJ(udg_Dsd_Loc[0],(I2R(udg_Dsd_Int)*udg_Dsd_Real[4]),udg_Dsd_Real[0])call RemoveLocation(udg_Dsd_Loc[0])set udg_Dsd_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h08J',udg_Dsd_Own,udg_Dsd_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h017',udg_Dsd_Own,udg_Dsd_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call EnumDestructablesInCircleBJ(udg_Dsd_Real[5],udg_Dsd_Loc[1],function TreeKiller)
set udg_Dsd_Group=GetUnitsInRangeOfLocMatching(udg_Dsd_Real[5],udg_Dsd_Loc[1],Condition(function Trig_DsdL_Func001Func022002003))call RemoveLocation(udg_Dsd_Loc[1])set udg_Dsd_Loc[1]=nullcall ForGroupBJ(udg_Dsd_Group,function Trig_DsdL_Func001Func025A)call DestroyGroup(udg_Dsd_Group)
set udg_Dsd_Group=nullset udg_Dsd_Int=(udg_Dsd_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Dsd_Group2)set udg_Dsd_Own=null
set udg_Dsd_Unit[0]=null
set udg_Dsd_Real[0]=.0set udg_Dsd_Real[1]=.0set udg_Dsd_Real[2]=.0set udg_Dsd_Real[3]=.0set udg_Dsd_Real[4]=.0set udg_Dsd_Real[5]=.0set udg_Dsd_Int=0endifendfunctionfunction InitTrig_DsdL takes nothing returns nothing
set gg_trg_DsdL=CreateTrigger()call DisableTrigger(gg_trg_DsdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DsdL,.04)call TriggerAddAction(gg_trg_DsdL,function Trig_DsdL_Actions)endfunctionfunction Trig_Csd_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09R')endfunctionfunction Trig_Csd_Actions takes nothing returns nothingset udg_Csd_Unit[0]=GetTriggerUnit()
set udg_Csd_Unit[1]=GetSpellTargetUnit()
call DisplayText("Barjan",udg_Csd_Unit[0],.023,false,$FF,$FF,$FF,$FF)set udg_Csd_Own=GetOwningPlayer(udg_Csd_Unit[0])
set udg_Csd_Loc=GetUnitLoc(udg_Csd_Unit[1])call CreateNUnitsAtLoc(1,'h08J',udg_Csd_Own,udg_Csd_Loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h08K',udg_Csd_Own,udg_Csd_Loc,bj_UNIT_FACING)set udg_Csd_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Csd_Loc)
set udg_Csd_Loc=null
call SetUnitScalePercent(udg_Csd_Unit[2],200.,200.,200.)
set udg_Csd_Int=30set udg_Csd_Real[0]=((I2R(GetHeroStr(udg_Csd_Unit[0],false))*6.5)/ I2R(udg_Csd_Int))
set udg_Csd_Bool=truecall EnableTrigger(gg_trg_CsdL)endfunctionfunction InitTrig_Csd takes nothing returns nothingset gg_trg_Csd=CreateTrigger()call TriggerAddCondition(gg_trg_Csd,Condition(function Trig_Csd_Conditions))
call TriggerAddAction(gg_trg_Csd,function Trig_Csd_Actions)endfunctionfunction Trig_CsdL_Func001Func002C takes nothing returns boolean
return(R2I(udg_Csd_Real[1])>R2I(udg_Csd_Real[0]))endfunctionfunction Trig_CsdL_Func001C takes nothing returns booleanreturn(udg_Csd_Int>0)endfunctionfunction Trig_CsdL_Actions takes nothing returns nothing
if(Trig_CsdL_Func001C())then
set udg_Csd_Real[1]=GetUnitStateSwap(UNIT_STATE_LIFE,udg_Csd_Unit[1])if(Trig_CsdL_Func001Func002C())thencall SetWidgetLife(udg_Csd_Unit[1],(udg_Csd_Real[1]-udg_Csd_Real[0]))set udg_Csd_Loc=GetUnitLoc(udg_Csd_Unit[1])call SetUnitPositionLoc(udg_Csd_Unit[2],udg_Csd_Loc)
call RemoveLocation(udg_Csd_Loc)
set udg_Csd_Loc=null
if(udg_Csd_Bool)then
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl",udg_Csd_Unit[1],"chest"))set udg_Csd_Bool=falseelse
set udg_Csd_Bool=trueendifset udg_Csd_Int=(udg_Csd_Int-1)else
call SetWidgetLife(udg_Csd_Unit[1],1.)call UnitDamageTargetBJ(udg_Csd_Unit[0],udg_Csd_Unit[1],udg_Csd_Real[0],ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)set udg_Csd_Int=0endifelse
call DisableTrigger(GetTriggeringTrigger())call UnitApplyTimedLife(udg_Csd_Unit[2],'BTLF',1.)set udg_Csd_Own=null
set udg_Csd_Unit[0]=null
set udg_Csd_Unit[1]=null
set udg_Csd_Unit[2]=null
set udg_Csd_Real[0]=.0set udg_Csd_Real[1]=.0set udg_Csd_Int=0set udg_Csd_Bool=falseendifendfunctionfunction InitTrig_CsdL takes nothing returns nothing
set gg_trg_CsdL=CreateTrigger()call DisableTrigger(gg_trg_CsdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CsdL,.03)call TriggerAddAction(gg_trg_CsdL,function Trig_CsdL_Actions)endfunctionfunction Trig_Crocodile_Cast_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09S')endfunctionfunction Trig_Crocodile_Cast_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h08K',GetOwningPlayer(u),loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.05)call SetUnitTimeScalePercent(bj_lastCreatedUnit,150.)call RemoveLocation(loc)
set loc=null
set u=nullendfunctionfunction Trig_Crocodile_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A09S')endfunctionfunction Trig_Crocodile_Init_Actions takes nothing returns nothinglocal trigger t=CreateTrigger()call TriggerRegisterUnitEvent(t,GetLearningUnit(),EVENT_UNIT_SPELL_CAST)
call TriggerAddCondition(t,Condition(function Trig_Crocodile_Cast_Conditions))call TriggerAddAction(t,function Trig_Crocodile_Cast_Actions)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Crocodile_Init takes nothing returns nothingset gg_trg_Crocodile_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Crocodile_Init,Condition(function Trig_Crocodile_Init_Conditions))call TriggerAddAction(gg_trg_Crocodile_Init,function Trig_Crocodile_Init_Actions)endfunctionfunction Trig_Gse_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09S')endfunctionfunction Trig_Gse_Actions takes nothing returns nothingset udg_Gse_Unit[0]=GetTriggerUnit()
set udg_Gse_Loc[0]=GetSpellTargetLoc()set udg_Gse_Real[0]=GetLocationX(udg_Gse_Loc[0])
set udg_Gse_Real[1]=GetLocationY(udg_Gse_Loc[0])
call Dynamic_3D("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeTargetWaveNonLoop1.wav",udg_Gse_Real[0],udg_Gse_Real[1])set udg_Gse_Ter=TerrainDeformCrater(udg_Gse_Real[0],udg_Gse_Real[1],400.,800.,7000,false)set udg_Gse_Real[2]=400.
call EnumDestructablesInCircleBJ(udg_Gse_Real[2],udg_Gse_Loc[0],function TreeKiller)
set udg_Gse_Own=GetOwningPlayer(udg_Gse_Unit[0])
call CreateNUnitsAtLoc(1,'h08L',udg_Gse_Own,udg_Gse_Loc[0],bj_UNIT_FACING)set udg_Gse_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h08M',udg_Gse_Own,udg_Gse_Loc[0],bj_UNIT_FACING)set udg_Gse_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Gse_Loc[0])set udg_Gse_Loc[0]=nullcall DisplayText("Desert Girasole",udg_Gse_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Crocodile\\DesertGirasole.wav",GetUnitX(udg_Gse_Unit[0]),GetUnitY(udg_Gse_Unit[0]))
set udg_Gse_Real[3]=7.5set udg_Gse_Int=(70+(GetUnitAbilityLevelSwapped('A09S',udg_Gse_Unit[0])*6))set udg_Gse_Real[4]=(600.+(100.*I2R(GetUnitAbilityLevelSwapped('A09S',udg_Gse_Unit[0]))))/ 75call EnableTrigger(gg_trg_GseL)endfunctionfunction InitTrig_Gse takes nothing returns nothingset gg_trg_Gse=CreateTrigger()call TriggerAddCondition(gg_trg_Gse,Condition(function Trig_Gse_Conditions))
call TriggerAddAction(gg_trg_Gse,function Trig_Gse_Actions)endfunctionfunction Trig_GseL_Func001Func002002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Gse_Own))
endfunctionfunction Trig_GseL_Func001Func002002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_GseL_Func001Func002002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_GseL_Func001Func002002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_GseL_Func001Func002002003002001(),Trig_GseL_Func001Func002002003002002())endfunctionfunction Trig_GseL_Func001Func002002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_GseL_Func001Func002002003001(),Trig_GseL_Func001Func002002003002())endfunctionfunction Trig_GseL_Func001Func003A takes nothing returns nothing
set udg_Gse_Unit[3]=GetEnumUnit()set udg_Gse_Loc[1]=GetUnitLoc(udg_Gse_Unit[3])set udg_Gse_Loc[2]=PolarProjectionBJ(udg_Gse_Loc[1],udg_Gse_Real[3],AngleBetweenPoints(udg_Gse_Loc[1],udg_Gse_Loc[0]))call RemoveLocation(udg_Gse_Loc[1])set udg_Gse_Loc[1]=nullif(IsTerrainPathableBJ(udg_Gse_Loc[2],PATHING_TYPE_WALKABILITY)==false and IsUnitType(udg_Gse_Unit[3],UNIT_TYPE_ANCIENT)==false)then
if(udg_Gse_Int>35)thencall IssueImmediateOrderById(udg_Gse_Unit[3],$D0004)
endifcall SetUnitX(udg_Gse_Unit[3],GetLocationX(udg_Gse_Loc[2]))call SetUnitY(udg_Gse_Unit[3],GetLocationY(udg_Gse_Loc[2]))endifcall RemoveLocation(udg_Gse_Loc[2])set udg_Gse_Loc[2]=nullcall UnitPureDamageTarget(udg_Gse_Unit[0],udg_Gse_Unit[3],udg_Gse_Real[4])set udg_Gse_Unit[3]=null
endfunctionfunction Trig_GseL_Func001C takes nothing returns booleanreturn(udg_Gse_Int>0)endfunctionfunction Trig_GseL_Actions takes nothing returns nothing
if(Trig_GseL_Func001C())then
set udg_Gse_Loc[0]=Location(udg_Gse_Real[0],udg_Gse_Real[1])
set udg_Gse_Group=GetUnitsInRangeOfLocMatching(udg_Gse_Real[2],udg_Gse_Loc[0],Condition(function Trig_GseL_Func001Func002002003))call ForGroupBJ(udg_Gse_Group,function Trig_GseL_Func001Func003A)call RemoveLocation(udg_Gse_Loc[0])set udg_Gse_Loc[0]=nullcall DestroyGroup(udg_Gse_Group)
set udg_Gse_Group=nullset udg_Gse_Int=(udg_Gse_Int-1)if(udg_Gse_Int==35)thencall SetUnitAnimation(udg_Gse_Unit[1],"death")call SetUnitAnimation(udg_Gse_Unit[2],"death")call SetUnitTimeScalePercent(udg_Gse_Unit[2],300.)endifelse
call DisableTrigger(GetTriggeringTrigger())call UnitApplyTimedLife(udg_Gse_Unit[1],'BTLF',2.)call UnitApplyTimedLife(udg_Gse_Unit[2],'BTLF',2.)call TerrainDeformStop(udg_Gse_Ter,$7D0)
set udg_Gse_Ter=null
set udg_Gse_Own=null
set udg_Gse_Unit[0]=null
set udg_Gse_Unit[1]=null
set udg_Gse_Unit[2]=null
set udg_Gse_Real[0]=.0set udg_Gse_Real[1]=.0set udg_Gse_Real[2]=.0set udg_Gse_Real[3]=.0set udg_Gse_Real[4]=.0set udg_Gse_Int=0endifendfunctionfunction InitTrig_GseL takes nothing returns nothing
set gg_trg_GseL=CreateTrigger()call DisableTrigger(gg_trg_GseL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GseL,.04)call TriggerAddAction(gg_trg_GseL,function Trig_GseL_Actions)endfunctionfunction Trig_Sad_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09T')endfunctionfunction Trig_Sad_Actions takes nothing returns nothingset udg_Sad_Unit[0]=GetTriggerUnit()
set udg_Sad_Loc[0]=GetSpellTargetLoc()set udg_Sad_Loc[1]=GetUnitLoc(udg_Sad_Unit[0])set udg_Sad_Real[0]=AngleBetweenPoints(udg_Sad_Loc[1],udg_Sad_Loc[0])call RemoveLocation(udg_Sad_Loc[0])set udg_Sad_Loc[0]=nullset udg_Sad_Loc[2]=PolarProjectionBJ(udg_Sad_Loc[1],100.,udg_Sad_Real[0])call RemoveLocation(udg_Sad_Loc[1])set udg_Sad_Loc[1]=nullset udg_Sad_Own=GetOwningPlayer(udg_Sad_Unit[0])
call CreateNUnitsAtLoc(1,'h08N',udg_Sad_Own,udg_Sad_Loc[2],bj_UNIT_FACING)set udg_Sad_Unit[1]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,'h08N',udg_Sad_Own,udg_Sad_Loc[2],GetRandomReal(0,360))
set udg_Sad_Unit[2]=bj_lastCreatedUnitcall RemoveLocation(udg_Sad_Loc[2])set udg_Sad_Loc[2]=nullcall SetUnitTimeScalePercent(udg_Sad_Unit[1],150.)call SetUnitTimeScalePercent(udg_Sad_Unit[2],150.)call DisplayText("Sables: Pesado",udg_Sad_Unit[0],.023,true,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Crocodile\\Heavy.wav",GetUnitX(udg_Sad_Unit[0]),GetUnitY(udg_Sad_Unit[0]))set udg_Sad_Real[1]=((200.+(200.*I2R(GetUnitAbilityLevel(udg_Sad_Unit[0],'A09T'))))+(8.*I2R(GetHeroStr(udg_Sad_Unit[0],true))))set udg_Sad_Real[2]=(udg_Sad_Real[1]*.35)set udg_Sad_Real[3]=36.set udg_Sad_Real[4]=200.
set udg_Sad_Int=56set udg_Sad_Count=2set udg_Sad_Map=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])call EnableTrigger(gg_trg_SadL)endfunctionfunction InitTrig_Sad takes nothing returns nothingset gg_trg_Sad=CreateTrigger()call TriggerAddCondition(gg_trg_Sad,Condition(function Trig_Sad_Conditions))
call TriggerAddAction(gg_trg_Sad,function Trig_Sad_Actions)endfunctionfunction Trig_SadL_Func001Func018002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Sad_Group2)==false)
endfunctionfunction Trig_SadL_Func001Func018002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Sad_Own))
endfunctionfunction Trig_SadL_Func001Func018002003002002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_SadL_Func001Func018002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_SadL_Func001Func018002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_SadL_Func001Func018002003002002001(),Trig_SadL_Func001Func018002003002002002())endfunctionfunction Trig_SadL_Func001Func018002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_SadL_Func001Func018002003002001(),Trig_SadL_Func001Func018002003002002())endfunctionfunction Trig_SadL_Func001Func018002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_SadL_Func001Func018002003001(),Trig_SadL_Func001Func018002003002())endfunctionfunction Trig_SadL_Func001Func021A takes nothing returns nothing
set udg_Sad_Unit[3]=GetEnumUnit()if(IsUnitType(udg_Sad_Unit[3],UNIT_TYPE_HERO))thenset udg_Sad_Int=1set udg_Sad_Unit[4]=udg_Sad_Unit[3]else
call GroupAddUnit(udg_Sad_Group2,udg_Sad_Unit[3])call UnitDamageTargetBJ(udg_Sad_Unit[0],udg_Sad_Unit[3],udg_Sad_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
endifset udg_Sad_Unit[3]=null
endfunctionfunction Trig_SadL_Func001Func028Func030002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Sad_Own))
endfunctionfunction Trig_SadL_Func001Func028Func030002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_SadL_Func001Func028Func030002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_SadL_Func001Func028Func030002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_SadL_Func001Func028Func030002003002001(),Trig_SadL_Func001Func028Func030002003002002())endfunctionfunction Trig_SadL_Func001Func028Func030002003 takes nothing returns boolean
return GetBooleanAnd(Trig_SadL_Func001Func028Func030002003001(),Trig_SadL_Func001Func028Func030002003002())endfunctionfunction Trig_SadL_Func001Func028Func034A takes nothing returns nothingset udg_Sad_Unit[3]=GetEnumUnit()set udg_Sad_Loc[1]=GetUnitLoc(udg_Sad_Unit[3])call CreateNUnitsAtLoc(1,'h04R',udg_Sad_Own,udg_Sad_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Sad_Loc[1])set udg_Sad_Loc[1]=nullcall UnitDamageTargetBJ(udg_Sad_Unit[0],udg_Sad_Unit[3],udg_Sad_Real[2],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Sad_Unit[3]=null
endfunctionfunction Trig_SadL_Func001Func028C takes nothing returns boolean
return(udg_Sad_Unit[4]!=null)endfunctionfunction Trig_SadL_Func001C takes nothing returns booleanreturn(udg_Sad_Int>0)and(IsUnitDeadBJ(udg_Sad_Unit[1])==false)endfunctionfunction Trig_SadL_Actions takes nothing returns nothing
if(Trig_SadL_Func001C())then
set udg_Sad_Loc[0]=GetUnitLoc(udg_Sad_Unit[1])if(udg_Sad_Count==2)then
call CreateNUnitsAtLoc(1,'h08O',udg_Sad_Own,udg_Sad_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,150.)set udg_Sad_Count=0else
set udg_Sad_Count=(udg_Sad_Count+1)endifset udg_Sad_Loc[1]=PolarProjectionBJ(udg_Sad_Loc[0],udg_Sad_Real[3],udg_Sad_Real[0])
call RemoveLocation(udg_Sad_Loc[0])set udg_Sad_Loc[0]=nullif(RectContainsLoc(udg_Sad_Map,udg_Sad_Loc[1]))thencall SetUnitPositionLoc(udg_Sad_Unit[1],udg_Sad_Loc[1])call SetUnitPositionLoc(udg_Sad_Unit[2],udg_Sad_Loc[1])endifcall EnumDestructablesInCircleBJ(udg_Sad_Real[4],udg_Sad_Loc[1],function TreeKiller)
set udg_Sad_Group=GetUnitsInRangeOfLocMatching(udg_Sad_Real[4],udg_Sad_Loc[1],Condition(function Trig_SadL_Func001Func018002003))call RemoveLocation(udg_Sad_Loc[1])set udg_Sad_Loc[1]=nullcall ForGroupBJ(udg_Sad_Group,function Trig_SadL_Func001Func021A)call DestroyGroup(udg_Sad_Group)
set udg_Sad_Group=nullset udg_Sad_Int=(udg_Sad_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(Trig_SadL_Func001Func028C())thenset udg_Sad_Real[4]=400.
set udg_Sad_Loc[0]=GetUnitLoc(udg_Sad_Unit[4])call SetUnitPositionLoc(udg_Sad_Unit[1],udg_Sad_Loc[0])call SetUnitPositionLoc(udg_Sad_Unit[2],udg_Sad_Loc[0])call CreateNUnitsAtLoc(1,'h08H',udg_Sad_Own,udg_Sad_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08H',udg_Sad_Own,udg_Sad_Loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h01X',udg_Sad_Own,udg_Sad_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h01Y',udg_Sad_Own,udg_Sad_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h04R',udg_Sad_Own,udg_Sad_Loc[1],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,500.,500.,500.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h03E',udg_Sad_Own,udg_Sad_Loc[0],bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$C8,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call CreateNUnitsAtLoc(1,'h01Z',udg_Sad_Own,udg_Sad_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,40.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h02B',udg_Sad_Own,udg_Sad_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,300.,300.,300.)call SetUnitVertexColor(bj_lastCreatedUnit,0,27,27,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call EnumDestructablesInCircleBJ(udg_Sad_Real[4],udg_Sad_Loc[0],function TreeKiller)
call Dynamic_GroupShake(GetLocationX(udg_Sad_Loc[0]),GetLocationY(udg_Sad_Loc[0]),1.8,3.,udg_CameraArea,null)set udg_Sad_Group=GetUnitsInRangeOfLocMatching(udg_Sad_Real[4],udg_Sad_Loc[0],Condition(function Trig_SadL_Func001Func028Func030002003))
call RemoveLocation(udg_Sad_Loc[0])set udg_Sad_Loc[0]=nullcall GroupAddUnit(udg_Sad_Group,udg_Sad_Unit[4])
call ForGroupBJ(udg_Sad_Group,function Trig_SadL_Func001Func028Func034A)
call DestroyGroup(udg_Sad_Group)
set udg_Sad_Group=nullcall UnitDamageTargetBJ(udg_Sad_Unit[0],udg_Sad_Unit[4],udg_Sad_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
set udg_Sad_Unit[4]=null
endifcall GroupClear(udg_Sad_Group2)call SetUnitTimeScalePercent(udg_Sad_Unit[1],40.)call SetUnitTimeScalePercent(udg_Sad_Unit[2],40.)call SetUnitAnimation(udg_Sad_Unit[1],"death")call SetUnitAnimation(udg_Sad_Unit[2],"death")call UnitApplyTimedLife(udg_Sad_Unit[1],'BTLF',3.5)call UnitApplyTimedLife(udg_Sad_Unit[2],'BTLF',3.5)call RemoveRect(udg_Sad_Map)
set udg_Sad_Map=null
set udg_Sad_Own=null
set udg_Sad_Unit[0]=null
set udg_Sad_Unit[1]=null
set udg_Sad_Unit[2]=null
set udg_Sad_Real[1]=.0set udg_Sad_Real[2]=.0set udg_Sad_Real[3]=.0set udg_Sad_Real[4]=.0set udg_Sad_Int=0set udg_Sad_Count=0endifendfunctionfunction InitTrig_SadL takes nothing returns nothing
set gg_trg_SadL=CreateTrigger()call DisableTrigger(gg_trg_SadL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SadL,.04)call TriggerAddAction(gg_trg_SadL,function Trig_SadL_Actions)endfunctionfunction Trig_Coe_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09U')endfunctionfunction Trig_Coe_Func018Func011002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Coe_Own))
endfunctionfunction Trig_Coe_Func018Func011002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Coe_Func018Func011002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Coe_Func018Func011002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Coe_Func018Func011002003002001(),Trig_Coe_Func018Func011002003002002())endfunctionfunction Trig_Coe_Func018Func011002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Coe_Func018Func011002003001(),Trig_Coe_Func018Func011002003002())endfunctionfunction Trig_Coe_Func018Func014A takes nothing returns nothingset udg_Coe_Unit[2]=GetEnumUnit()set udg_Coe_Loc=GetUnitLoc(udg_Coe_Unit[2])call CreateNUnitsAtLoc(1,'h08O',udg_Coe_Own,udg_Coe_Loc,bj_UNIT_FACING)call SetUnitFlyHeight(bj_lastCreatedUnit,100.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Coe_Loc)
set udg_Coe_Loc=null
set udg_Coe_Real[3]=(udg_Coe_Real[0]*GetUnitStateSwap(UNIT_STATE_MAX_LIFE,udg_Coe_Unit[2]))call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Undead\\ImpaleTargetDust\\ImpaleTargetDust.mdl",udg_Coe_Unit[2],"origin"))if(IsUnitType(udg_Coe_Unit[2],UNIT_TYPE_ANCIENT))thencall UnitDamageTargetBJ(udg_Coe_Unit[0],udg_Coe_Unit[2],(udg_Coe_Real[3]*.5),ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)else
call UnitDamageTargetBJ(udg_Coe_Unit[0],udg_Coe_Unit[2],udg_Coe_Real[3],ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL)endifset udg_Coe_Unit[2]=null
endfunctionfunction Trig_Coe_Actions takes nothing returns nothingset udg_Coe_Unit[0]=GetTriggerUnit()
call PauseSystem(udg_Coe_Unit[0],true)set udg_Coe_Real[0]=.37set udg_Coe_Real[1]=.07set udg_Coe_Real[2]=200.
call SetUnitAnimation(udg_Coe_Unit[0],"spell two")call DisplayText("Ground Death",udg_Coe_Unit[0],.023,false,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\GroundDeath.mp3")set udg_Coe_Own=GetOwningPlayer(udg_Coe_Unit[0])
set udg_Coe_Max=(5+GetUnitAbilityLevelSwapped('A09U',udg_Coe_Unit[0]))call TriggerSleepAction(.4)set udg_Coe_Loc=GetUnitLoc(udg_Coe_Unit[0])call CreateNUnitsAtLoc(1,'h08P',udg_Coe_Own,udg_Coe_Loc,bj_UNIT_FACING)set udg_Coe_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Coe_Loc)
set udg_Coe_Loc=null
call SetUnitTimeScalePercent(udg_Coe_Unit[0],.0)
set udg_Coe_Int=1loop
exitwhen udg_Coe_Int>udg_Coe_Max
if(GetUnitState(udg_Coe_Unit[0],UNIT_STATE_LIFE)>0)thenset udg_Coe_Real[3]=(udg_Coe_Real[2]+(100.*I2R(udg_Coe_Int)))set udg_Coe_Loc=GetUnitLoc(udg_Coe_Unit[0])call Dynamic_GroupShake(GetLocationX(udg_Coe_Loc),GetLocationY(udg_Coe_Loc),udg_CameraShakeTime,7.,udg_CameraArea,udg_Coe_GroupShake)call CreateNUnitsAtLoc(1,'h01Z',udg_Coe_Own,udg_Coe_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,300.,300.,300.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,50.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetTerrainType(GetLocationX(udg_Coe_Loc),GetLocationY(udg_Coe_Loc),'Wdro',-1,udg_Coe_Int,0)
call EnumDestructablesInCircleBJ(udg_Coe_Real[3],udg_Coe_Loc,function TreeKiller)set udg_Coe_Group=GetUnitsInRangeOfLocMatching(udg_Coe_Real[3],udg_Coe_Loc,Condition(function Trig_Coe_Func018Func011002003))call RemoveLocation(udg_Coe_Loc)
set udg_Coe_Loc=null
call ForGroupBJ(udg_Coe_Group,function Trig_Coe_Func018Func014A)
call DestroyGroup(udg_Coe_Group)
set udg_Coe_Group=nullset udg_Coe_Real[0]=(udg_Coe_Real[0]*.85)call TriggerSleepAction(udg_Coe_Real[1])
else
set udg_Coe_Int=$Aendifset udg_Coe_Int=udg_Coe_Int+1endloopcall RemoveUnit(udg_Coe_Unit[1])
call GroupClear(udg_Coe_GroupShake)call SetUnitTimeScalePercent(udg_Coe_Unit[0],100.)call PauseSystem(udg_Coe_Unit[0],false)call QueueUnitAnimation(udg_Coe_Unit[0],"stand")
set udg_Coe_Own=null
set udg_Coe_Unit[0]=null
set udg_Coe_Unit[1]=null
set udg_Coe_Real[0]=.0set udg_Coe_Real[1]=.0set udg_Coe_Real[2]=.0set udg_Coe_Real[3]=.0set udg_Coe_Int=0endfunctionfunction InitTrig_Coe takes nothing returns nothingset gg_trg_Coe=CreateTrigger()call TriggerAddCondition(gg_trg_Coe,Condition(function Trig_Coe_Conditions))
call TriggerAddAction(gg_trg_Coe,function Trig_Coe_Actions)endfunctionfunction AI_Pain_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='O008')endfunctionfunction AI_Pain_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='O008')
endfunctionfunction AI_Pain_AttackedCond takes nothing returns booleanif(not AI_Pain_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Pain_AttackerCond takes nothing returns booleanif(not AI_Pain_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Pain_CondOR takes nothing returns booleanreturn(AI_Pain_AttackedCond()or AI_Pain_AttackerCond())endfunctionfunction AI_Pain_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Pain_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Pain_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Pain_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0A1')call SelectHeroSkill(AI_1,'A0AL')call SelectHeroSkill(AI_1,'A0A0')call SelectHeroSkill(AI_1,'A09Y')call SelectHeroSkill(AI_1,'A09X')call SelectHeroSkill(AI_1,'A09V')endifcall IssueTargetOrderById(AI_1,$D0097,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0277)endifset AI_Point2=GetUnitLoc(AI_2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D026C)set AI_Attacker=falseendifcall IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point2)call IssueImmediateOrderById(AI_1,$D0084)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullcall IssueImmediateOrderById(AI_1,$D022E)endifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Pain takes nothing returns nothingset udg_AI_Trig[20]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[20],Condition(function AI_Pain_Cond))call TriggerAddAction(udg_AI_Trig[20],function AI_Pain_Act)endfunctionfunction Samsara_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0A2')endfunctionfunction Samsara_Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer my_skill='A09G'local integer my_buff='B028'
local real delay=.5local location loc=GetUnitLoc(u)
call DisplayText("Rinnegan",u,.023,true,$FF,$FF,$FF,$FF)
set bj_lastCreatedUnit=CreateUnit(p,'u003',GetLocationX(loc),GetLocationY(loc),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0A3')call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call SetPlayerAbilityAvailable(p,my_skill,false)
call UnitAddAbility(u,my_skill)call SetUnitAbilityLevelSwapped('A09F',u,2)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,my_buff)<1)endloopcall UnitRemoveAbility(u,my_skill)call SetPlayerAbilityAvailable(p,my_skill,true)set p=nullset u=nullset my_skill=0set my_buff=0set delay=.0
endfunctionfunction InitTrig_Samsara takes nothing returns nothingset gg_trg_Samsara=CreateTrigger()call TriggerAddCondition(gg_trg_Samsara,Condition(function Samsara_Conditions))call TriggerAddAction(gg_trg_Samsara,function Samsara_Act)endfunctionfunction Trig_Amp_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09V')endfunctionfunction Trig_Amp_Func017002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Amp_Own))
endfunctionfunction Trig_Amp_Func017002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Amp_Func017002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Amp_Func017002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Amp_Func017002003002001(),Trig_Amp_Func017002003002002())endfunctionfunction Trig_Amp_Func017002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Amp_Func017002003001(),Trig_Amp_Func017002003002())endfunctionfunction Trig_Amp_Func018Func016C takes nothing returns booleanreturn(IsUnitPaused(udg_Amp_Unit[2])==false)
endfunctionfunction Trig_Amp_Func018A takes nothing returns nothing
set udg_Amp_Unit[2]=GetEnumUnit()set udg_Amp_Loc[1]=GetUnitLoc(udg_Amp_Unit[2])set udg_Amp_Real[2]=AngleBetweenPoints(udg_Amp_Loc[0],udg_Amp_Loc[1])call CreateNUnitsAtLoc(1,'h08S',udg_Amp_Own,udg_Amp_Loc[1],(udg_Amp_Real[2]+180.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call UnitDamageTargetBJ(udg_Amp_Unit[0],udg_Amp_Unit[2],udg_Amp_Real[1],ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(GetUnitState(udg_Amp_Unit[2],UNIT_STATE_LIFE)>0)thencall CreateNUnitsAtLoc(1,'u003',udg_Amp_Own,udg_Amp_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[2],bj_lastCreatedUnit,6)
call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,udg_Amp_Unit[2])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(udg_Amp_Loc[1])set udg_Amp_Loc[1]=nullif(Trig_Amp_Func018Func016C())thencall SaveReal(udg_Amp_Hash,GetHandleId(udg_Amp_Unit[2]),0,udg_Amp_Real[2])call GroupAddUnit(udg_Amp_Group2,udg_Amp_Unit[2])endifset udg_Amp_Unit[2]=null
endfunctionfunction Trig_Amp_Actions takes nothing returns nothingset udg_Amp_Unit[0]=GetTriggerUnit()
call DisplayText("Shinra Tensei",udg_Amp_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Pein\\ShinraTensei.wav",GetUnitX(udg_Amp_Unit[0]),GetUnitY(udg_Amp_Unit[0]))set udg_Amp_Own=GetOwningPlayer(udg_Amp_Unit[0])
set udg_Amp_Real[0]=600.
set udg_Amp_Real[1]=((100.+(100.*I2R(GetUnitAbilityLevelSwapped('A09V',udg_Amp_Unit[0]))))+(4.*I2R(GetHeroInt(udg_Amp_Unit[0],true))))set udg_Amp_Hash=InitHashtable()
set udg_Amp_Loc[0]=GetUnitLoc(udg_Amp_Unit[0])call CreateNUnitsAtLoc(1,'h08Q',udg_Amp_Own,udg_Amp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08Q',udg_Amp_Own,udg_Amp_Loc[0],GetRandomReal(0,360.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08R',udg_Amp_Own,udg_Amp_Loc[0],bj_UNIT_FACING)set udg_Amp_Unit[1]=bj_lastCreatedUnitcall Dynamic_3D("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.wav",GetLocationX(udg_Amp_Loc[0]),GetLocationY(udg_Amp_Loc[0]))call EnumDestructablesInCircleBJ(udg_Amp_Real[0],udg_Amp_Loc[0],function TreeKiller)
set udg_Amp_Group=GetUnitsInRangeOfLocMatching(udg_Amp_Real[0],udg_Amp_Loc[0],Condition(function Trig_Amp_Func017002003))call ForGroupBJ(udg_Amp_Group,function Trig_Amp_Func018A)call RemoveLocation(udg_Amp_Loc[0])set udg_Amp_Loc[0]=nullcall DestroyGroup(udg_Amp_Group)
set udg_Amp_Group=nullset udg_Amp_Real[0]=24.set udg_Amp_BoolSpawn=trueset udg_Amp_Int=20call EnableTrigger(gg_trg_AmpL)call TriggerSleepAction(.5)call UnitApplyTimedLife(udg_Amp_Unit[1],'BTLF',2.)call SetUnitAnimation(udg_Amp_Unit[1],"death")set udg_Amp_Unit[1]=null
endfunctionfunction InitTrig_Amp takes nothing returns nothingset gg_trg_Amp=CreateTrigger()call TriggerAddCondition(gg_trg_Amp,Condition(function Trig_Amp_Conditions))
call TriggerAddAction(gg_trg_Amp,function Trig_Amp_Actions)endfunctionfunction Trig_AmpL_Func002Func004A takes nothing returns nothing
set udg_Amp_Unit[2]=GetEnumUnit()set udg_Amp_Bool=trueset udg_Amp_Loc[0]=GetUnitLoc(udg_Amp_Unit[2])if(udg_Amp_BoolSpawn)thencall CreateNUnitsAtLoc(1,'h017',udg_Amp_Own,udg_Amp_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset udg_Amp_Loc[1]=PolarProjectionBJ(udg_Amp_Loc[0],udg_Amp_Real[0],LoadReal(udg_Amp_Hash,GetHandleId(udg_Amp_Unit[2]),0))call RemoveLocation(udg_Amp_Loc[0])set udg_Amp_Loc[0]=nullcall EnumDestructablesInCircleBJ('x',udg_Amp_Loc[1],function TreeKiller)
call UnitMoveXY(udg_Amp_Unit[2],GetLocationX(udg_Amp_Loc[1]),GetLocationY(udg_Amp_Loc[1]))call RemoveLocation(udg_Amp_Loc[1])set udg_Amp_Loc[1]=nullset udg_Amp_Unit[2]=null
endfunctionfunction Trig_AmpL_Func002C takes nothing returns booleanreturn(udg_Amp_Int>0)endfunctionfunction Trig_AmpL_Actions takes nothing returns nothing
if(Trig_AmpL_Func002C())then
set udg_Amp_Bool=falseset udg_Amp_Group=CreateGroup()call GroupAddGroup(udg_Amp_Group2,udg_Amp_Group)
call ForGroupBJ(udg_Amp_Group,function Trig_AmpL_Func002Func004A)call DestroyGroup(udg_Amp_Group)
set udg_Amp_Group=nullif(udg_Amp_BoolSpawn)thenset udg_Amp_BoolSpawn=falseelse
set udg_Amp_BoolSpawn=trueendifif(udg_Amp_Bool)then
set udg_Amp_Int=(udg_Amp_Int-1)set udg_Amp_Real[0]=(udg_Amp_Real[0]-.75)else
set udg_Amp_Int=0endifelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Amp_Group2)call FlushParentHashtableBJ(udg_Amp_Hash)set udg_Amp_Hash=nullset udg_Amp_Own=null
set udg_Amp_Unit[0]=null
set udg_Amp_Real[0]=.0set udg_Amp_Real[1]=.0set udg_Amp_Real[2]=.0set udg_Amp_Key=0set udg_Amp_Int=0set udg_Amp_Bool=falseset udg_Amp_BoolSpawn=falseendifendfunctionfunction InitTrig_AmpL takes nothing returns nothing
set gg_trg_AmpL=CreateTrigger()call DisableTrigger(gg_trg_AmpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_AmpL,.04)call TriggerAddAction(gg_trg_AmpL,function Trig_AmpL_Actions)endfunctionfunction Trig_Uvp_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09X')endfunctionfunction Trig_Uvp_Actions takes nothing returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()set udg_Uvp_Unit[0]=GetTriggerUnit()
set udg_Uvp_Own=GetOwningPlayer(udg_Uvp_Unit[0])
set udg_Uvp_Unit[1]=GetUnitNearestXY(x,y,$8C,udg_Uvp_Own)call DisplayText("Bansho Ten'in",udg_Uvp_Unit[0],.023,false,$FF,$FF,$FF,$FF)
if(udg_Uvp_Unit[1]==null)thenset udg_Uvp_Unit[0]=null
set udg_Uvp_Own=null
else
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Pein\\BanshoTein.wav",GetUnitX(udg_Uvp_Unit[0]),GetUnitY(udg_Uvp_Unit[0]))set udg_Uvp_Real[0]=((200.+(100.*I2R(GetUnitAbilityLevelSwapped('A09X',udg_Uvp_Unit[0]))))+((1.+(1.*I2R(GetUnitAbilityLevelSwapped('A09X',udg_Uvp_Unit[0]))))*I2R(GetHeroInt(udg_Uvp_Unit[0],true))))set udg_Uvp_Loc[0]=GetUnitLoc(udg_Uvp_Unit[0])set udg_Uvp_Real[1]=GetLocationX(udg_Uvp_Loc[0])
set udg_Uvp_Real[2]=GetLocationY(udg_Uvp_Loc[0])
set udg_Uvp_Loc[1]=GetUnitLoc(udg_Uvp_Unit[1])call CreateNUnitsAtLoc(1,'h08S',udg_Uvp_Own,udg_Uvp_Loc[1],AngleBetweenPoints(udg_Uvp_Loc[1],udg_Uvp_Loc[0]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Uvp_Loc[0])set udg_Uvp_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h08T',udg_Uvp_Own,udg_Uvp_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(udg_Uvp_Loc[1])set udg_Uvp_Loc[1]=nullcall UnitDamageTargetBJ(udg_Uvp_Unit[0],udg_Uvp_Unit[1],udg_Uvp_Real[0],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set udg_Uvp_Real[0]=100.
set udg_Uvp_Real[3]=39.set udg_Uvp_Bool=trueset udg_Uvp_Int=33call EnableTrigger(gg_trg_UvpL)endifendfunctionfunction InitTrig_Uvp takes nothing returns nothingset gg_trg_Uvp=CreateTrigger()call TriggerAddCondition(gg_trg_Uvp,Condition(function Trig_Uvp_Conditions))
call TriggerAddAction(gg_trg_Uvp,function Trig_Uvp_Actions)endfunctionfunction Trig_UvpL_Func003C takes nothing returns booleanreturn(udg_Uvp_Int>0)and(DistanceBetweenPoints(udg_Uvp_Loc[0],udg_Uvp_Loc[1])>udg_Uvp_Real[0])endfunctionfunction Trig_UvpL_Actions takes nothing returns nothing
set udg_Uvp_Loc[0]=Location(udg_Uvp_Real[1],udg_Uvp_Real[2])
set udg_Uvp_Loc[1]=GetUnitLoc(udg_Uvp_Unit[1])if(Trig_UvpL_Func003C())then
if(udg_Uvp_Bool)then
call CreateNUnitsAtLoc(1,'h017',udg_Uvp_Own,udg_Uvp_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Uvp_Bool=falseelse
set udg_Uvp_Bool=trueendifset udg_Uvp_Loc[2]=PolarProjectionBJ(udg_Uvp_Loc[1],udg_Uvp_Real[3],AngleBetweenPoints(udg_Uvp_Loc[1],udg_Uvp_Loc[0]))call RemoveLocation(udg_Uvp_Loc[0])set udg_Uvp_Loc[0]=nullcall RemoveLocation(udg_Uvp_Loc[1])set udg_Uvp_Loc[1]=nullcall EnumDestructablesInCircleBJ($96,udg_Uvp_Loc[2],function TreeKiller)
if(IsTerrainPathable(GetLocationX(udg_Uvp_Loc[2]),GetLocationY(udg_Uvp_Loc[2]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitX(udg_Uvp_Unit[1],GetLocationX(udg_Uvp_Loc[2]))call SetUnitY(udg_Uvp_Unit[1],GetLocationY(udg_Uvp_Loc[2]))endifcall RemoveLocation(udg_Uvp_Loc[2])set udg_Uvp_Loc[2]=nullset udg_Uvp_Int=(udg_Uvp_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveLocation(udg_Uvp_Loc[0])set udg_Uvp_Loc[0]=nullcall RemoveLocation(udg_Uvp_Loc[1])set udg_Uvp_Loc[1]=nullset udg_Uvp_Own=null
set udg_Uvp_Unit[0]=null
set udg_Uvp_Unit[1]=null
set udg_Uvp_Real[0]=.0set udg_Uvp_Real[1]=.0set udg_Uvp_Real[2]=.0set udg_Uvp_Real[3]=.0set udg_Uvp_Int=0set udg_Uvp_Bool=falseendifendfunctionfunction InitTrig_UvpL takes nothing returns nothing
set gg_trg_UvpL=CreateTrigger()call DisableTrigger(gg_trg_UvpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_UvpL,.04)call TriggerAddAction(gg_trg_UvpL,function Trig_UvpL_Actions)endfunctionfunction Trig_Rkj_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A09Y')endfunctionfunction Trig_Rkj_GroupCond takes nothing returns booleanif((GetUnitAbilityLevel(GetFilterUnit(),udg_Rkj_Buff[1])>0))then
return false
elseif(IsUnitEnemy(GetFilterUnit(),udg_Rkj_Own)==false)thenreturn false
elseif(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<1)thenreturn false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[7])!=0)thenreturn false
endifreturn trueendfunctionfunction Trig_Rkj_GroupAct takes nothing returns nothing
set udg_Rkj_Unit[1]=GetEnumUnit()set udg_Rkj_Loc=GetUnitLoc(udg_Rkj_Unit[1])call CreateNUnitsAtLoc(1,'u003',udg_Rkj_Own,udg_Rkj_Loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_Rkj_Skill)call SetUnitAbilityLevelSwapped(udg_Rkj_Skill,bj_lastCreatedUnit,udg_Rkj_Lv)
call IssueTargetOrderById(bj_lastCreatedUnit,$D00B5,udg_Rkj_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Rkj_Loc)
set udg_Rkj_Loc=null
if(IsUnitInGroup(udg_Rkj_Unit[1],udg_Rkj_Group2)==false)then
call GroupAddUnit(udg_Rkj_Group2,udg_Rkj_Unit[1])endifset udg_Rkj_Unit[1]=null
endfunctionfunction Trig_Rkj_GroupAct2 takes nothing returns nothingset udg_Rkj_Unit[1]=GetEnumUnit()if((GetUnitAbilityLevel(udg_Rkj_Unit[1],udg_Rkj_Buff[1])>0))then
call UnitRemoveAbility(udg_Rkj_Unit[1],udg_Rkj_Buff[1])endifset udg_Rkj_Unit[1]=null
endfunctionfunction Trig_Rkj_Actions takes nothing returns nothinglocal sound MySoundset udg_Rkj_Unit[0]=GetTriggerUnit()
call SetUnitAnimation(udg_Rkj_Unit[0],"spell")call DisplayText("Ukojizai no Jutsu",udg_Rkj_Unit[0],.023,true,$FF,$FF,$FF,$FF)set MySound=CreateSound("Sound\\Ambient\\BattleNetWindStereoLoop1.wav",false,false,false,$A,$A,"DefaultEAXON")call SetSoundParamsFromLabel(MySound,"GlueScreenBnetWind")call SetSoundDuration(MySound,$4D47)
call SetSoundVolume(MySound,$C8)
set udg_Rkj_Lv=GetUnitAbilityLevelSwapped('A09Y',udg_Rkj_Unit[0])set udg_Rkj_Skill='A09Z'
set udg_Rkj_Buff[0]='B026'set udg_Rkj_Buff[1]='B027'set udg_Rkj_Real=(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,udg_Rkj_Unit[0])*.03)
set udg_Rkj_Delay=.5
set udg_Rkj_Time=GetTimeOfDay()call SetTimeOfDay(.0)call SetTimeOfDayScale(.0)set udg_Rkj_Own=GetOwningPlayer(udg_Rkj_Unit[0])
call EnableWeatherEffect(udg_Weather_Map[0],true)set udg_Weather_Stack[0]=udg_Weather_Stack[0]+1call StartSound(MySound)
loop
set udg_Rkj_Group=GetUnitsInRectMatching(bj_mapInitialPlayableArea,Condition(function Trig_Rkj_GroupCond))call ForGroup(udg_Rkj_Group,function Trig_Rkj_GroupAct)call DestroyGroup(udg_Rkj_Group)
set udg_Rkj_Group=nullcall TriggerSleepAction(udg_Rkj_Delay)exitwhen((GetUnitAbilityLevel(udg_Rkj_Unit[0],udg_Rkj_Buff[0])<1))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\VampiricAura\\VampiricAuraTarget.mdl",udg_Rkj_Unit[0],"origin"))call SetUnitState(udg_Rkj_Unit[0],UNIT_STATE_LIFE,RMaxBJ(0,(GetUnitStateSwap(UNIT_STATE_LIFE,udg_Rkj_Unit[0])+udg_Rkj_Real)))endloopcall SetSoundVolume(MySound,0)call KillSoundWhenDone(MySound)set MySound=null
set udg_Rkj_Group=CreateGroup()call GroupAddGroup(udg_Rkj_Group2,udg_Rkj_Group)
call ForGroup(udg_Rkj_Group,function Trig_Rkj_GroupAct2)
call DestroyGroup(udg_Rkj_Group)
set udg_Rkj_Group=nullcall GroupClear(udg_Rkj_Group2)call SetTimeOfDay(udg_Rkj_Time)call SetTimeOfDayScale(1.)set udg_Weather_Stack[0]=udg_Weather_Stack[0]-1if(udg_Weather_Stack[0]==0)thencall EnableWeatherEffect(udg_Weather_Map[0],false)endifset udg_Rkj_Own=null
set udg_Rkj_Unit[0]=null
set udg_Rkj_Real=.0set udg_Rkj_Delay=.0
set udg_Rkj_Time=.0set udg_Rkj_Lv=0
set udg_Rkj_Skill=0set udg_Rkj_Buff[0]=0set udg_Rkj_Buff[1]=0endfunctionfunction InitTrig_Rkj takes nothing returns nothingset gg_trg_Rkj=CreateTrigger()call TriggerAddCondition(gg_trg_Rkj,Condition(function Trig_Rkj_Conditions))
call TriggerAddAction(gg_trg_Rkj,function Trig_Rkj_Actions)endfunctionfunction Trig_Pdn_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0A0')endfunctionfunction Trig_Pdn_Func011002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Pdn_Own))
endfunctionfunction Trig_Pdn_Func011002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Pdn_Func011002003002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Pdn_Func011002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[7],GetFilterUnit())==0)endfunctionfunction Trig_Pdn_Func011002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Pdn_Func011002003002002001(),Trig_Pdn_Func011002003002002002())endfunctionfunction Trig_Pdn_Func011002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Pdn_Func011002003002001(),Trig_Pdn_Func011002003002002())endfunctionfunction Trig_Pdn_Func011002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Pdn_Func011002003001(),Trig_Pdn_Func011002003002())endfunctionfunction Trig_Pdn_Func012A takes nothing returns nothing
set udg_Pdn_Unit[3]=GetEnumUnit()set udg_Pdn_Loc[1]=GetUnitLoc(udg_Pdn_Unit[3])set udg_Pdn_Loc[2]=PolarProjectionBJ(udg_Pdn_Loc[0],GetRandomReal(0,120.),GetRandomReal(0,360.))
set udg_Pdn_Real[1]=DistanceBetweenPoints(udg_Pdn_Loc[1],udg_Pdn_Loc[2])
call RemoveLocation(udg_Pdn_Loc[1])set udg_Pdn_Loc[1]=nullcall RemoveLocation(udg_Pdn_Loc[2])set udg_Pdn_Loc[2]=nullcall SetUnitInvulnerable(udg_Pdn_Unit[3],true)call SetUnitPathing(udg_Pdn_Unit[3],false)call SetUnitFly(udg_Pdn_Unit[3])
call SetUnitFlyHeight(udg_Pdn_Unit[3],1.,.0)
call PauseSystem(udg_Pdn_Unit[3],true)call SetUnitFly(udg_Pdn_Unit[3])
call SetUnitFlyHeight(udg_Pdn_Unit[3],800.,((udg_Pdn_Real[1]+300)-(udg_Pdn_Real[1]*.81)))call GroupAddUnit(udg_Pdn_Group2,udg_Pdn_Unit[3])call SaveReal(udg_Pdn_Hash,GetHandleId(udg_Pdn_Unit[3]),0,(udg_Pdn_Real[1]/ udg_Pdn_Int))set udg_Pdn_Unit[3]=null
endfunctionfunction Trig_Pdn_Actions takes nothing returns nothingset udg_Pdn_Unit[0]=GetTriggerUnit()
set udg_Pdn_Loc[0]=GetSpellTargetLoc()set udg_Pdn_Own=GetOwningPlayer(udg_Pdn_Unit[0])
set udg_Pdn_Real[0]=600.
set udg_Pdn_Int=60set udg_Pdn_Unit[1]=CreateUnit(udg_Pdn_Own,'h03T',GetLocationX(udg_Pdn_Loc[0]),GetLocationY(udg_Pdn_Loc[0]),bj_UNIT_FACING)set udg_Pdn_Unit[2]=CreateUnit(udg_Pdn_Own,'h03X',GetLocationX(udg_Pdn_Loc[0]),GetLocationY(udg_Pdn_Loc[0]),bj_UNIT_FACING)set udg_Pdn_Hash=InitHashtable()
call EnumDestructablesInCircleBJ(udg_Pdn_Real[0],udg_Pdn_Loc[0],function TreeKiller)
set udg_Pdn_Group=GetUnitsInRangeOfLocMatching(udg_Pdn_Real[0],udg_Pdn_Loc[0],Condition(function Trig_Pdn_Func011002003))call ForGroupBJ(udg_Pdn_Group,function Trig_Pdn_Func012A)set udg_Pdn_Rect=RectFromCenterSizeBJ(udg_Pdn_Loc[0],600.,600.)call RemoveLocation(udg_Pdn_Loc[0])set udg_Pdn_Loc[0]=nullcall DestroyGroup(udg_Pdn_Group)
set udg_Pdn_Group=nullcall SetUnitTimeScalePercent(udg_Pdn_Unit[2],17.)call DisplayText("Chibaku Tensei",udg_Pdn_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Pein\\ChibakuTensei.wav",GetUnitX(udg_Pdn_Unit[0]),GetUnitY(udg_Pdn_Unit[0]))
set udg_Pdn_Real[0]=(600.+(200.*I2R(GetUnitAbilityLevelSwapped('A0A0',udg_Pdn_Unit[0]))))set udg_Pdn_Bool=truecall EnableTrigger(gg_trg_PdnL)set udg_Pdn_Real[1]=5.call EnableTrigger(gg_trg_PdnL2)
endfunctionfunction InitTrig_Pdn takes nothing returns nothingset gg_trg_Pdn=CreateTrigger()call TriggerAddCondition(gg_trg_Pdn,Condition(function Trig_Pdn_Conditions))
call TriggerAddAction(gg_trg_Pdn,function Trig_Pdn_Actions)endfunctionfunction Trig_PdnL_Func001Func021A takes nothing returns nothing
set udg_Pdn_Unit[3]=GetEnumUnit()call SetUnitPathing(udg_Pdn_Unit[3],true)call SetUnitInvulnerable(udg_Pdn_Unit[3],false)call PauseSystem(udg_Pdn_Unit[3],false)call SetUnitFly(udg_Pdn_Unit[3])
set udg_Pdn_Loc[1]=GetUnitLoc(udg_Pdn_Unit[3])call SetUnitPositionLoc(udg_Pdn_Unit[3],udg_Pdn_Loc[1])call RemoveLocation(udg_Pdn_Loc[1])set udg_Pdn_Loc[1]=nullcall UnitDamageTargetBJ(udg_Pdn_Unit[0],udg_Pdn_Unit[3],udg_Pdn_Real[0],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call SetUnitFlyHeight(udg_Pdn_Unit[3],.0,800.)set udg_Pdn_Unit[3]=null
endfunctionfunction Trig_PdnL_Func001Func026A takes nothing returns nothing
call RemoveUnit(GetEnumUnit())endfunctionfunction Trig_PdnL_Func001Func037A takes nothing returns nothing
set udg_Pdn_Unit[3]=GetEnumUnit()set udg_Pdn_Real[2]=LoadReal(udg_Pdn_Hash,GetHandleId(udg_Pdn_Unit[3]),0)set udg_Pdn_Loc[1]=GetUnitLoc(udg_Pdn_Unit[3])set udg_Pdn_Loc[2]=PolarProjectionBJ(udg_Pdn_Loc[1],udg_Pdn_Real[2],AngleBetweenPoints(udg_Pdn_Loc[1],udg_Pdn_Loc[0]))call RemoveLocation(udg_Pdn_Loc[1])set udg_Pdn_Loc[1]=nullcall SetUnitPositionLoc(udg_Pdn_Unit[3],udg_Pdn_Loc[2])call SetUnitX(udg_Pdn_Unit[3],GetLocationX(udg_Pdn_Loc[2]))call SetUnitY(udg_Pdn_Unit[3],GetLocationY(udg_Pdn_Loc[2]))call RemoveLocation(udg_Pdn_Loc[2])set udg_Pdn_Loc[2]=nullset udg_Pdn_Unit[3]=null
endfunctionfunction Trig_PdnL_Func001C takes nothing returns booleanreturn(udg_Pdn_Int>0)endfunctionfunction Trig_PdnL_Actions takes nothing returns nothing
if(Trig_PdnL_Func001C())then
set udg_Pdn_Loc[0]=GetUnitLoc(udg_Pdn_Unit[1])set udg_Pdn_Group=CreateGroup()call GroupAddGroup(udg_Pdn_Group2,udg_Pdn_Group)
call ForGroupBJ(udg_Pdn_Group,function Trig_PdnL_Func001Func037A)call RemoveLocation(udg_Pdn_Loc[0])set udg_Pdn_Loc[0]=nullcall DestroyGroup(udg_Pdn_Group)
set udg_Pdn_Group=nullset udg_Pdn_Int=(udg_Pdn_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Pdn_Bool=falsecall TriggerSleepAction(1.)call DisableTrigger(gg_trg_PdnL2)call TriggerSleepAction(.1)set udg_Pdn_Loc[0]=GetUnitLoc(udg_Pdn_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Pdn_Loc[0]),GetLocationY(udg_Pdn_Loc[0]),1.5,12.,udg_CameraArea,null)call CreateNUnitsAtLoc(1,'h02L',udg_Pdn_Own,udg_Pdn_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,500.,500.,500.)call SetUnitFlyHeight(bj_lastCreatedUnit,700.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.5)call CreateNUnitsAtLoc(1,'h088',udg_Pdn_Own,udg_Pdn_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,350.,350.,350.)call SetUnitFlyHeight(bj_lastCreatedUnit,500.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call RemoveLocation(udg_Pdn_Loc[0])set udg_Pdn_Loc[0]=nullset udg_Pdn_Group=CreateGroup()call GroupAddGroup(udg_Pdn_Group2,udg_Pdn_Group)
call ForGroupBJ(udg_Pdn_Group,function Trig_PdnL_Func001Func021A)call DestroyGroup(udg_Pdn_Group)
set udg_Pdn_Group=nullset udg_Pdn_Group=CreateGroup()call GroupAddGroup(udg_Pdn_GroupDummy,udg_Pdn_Group)
call ForGroupBJ(udg_Pdn_Group,function Trig_PdnL_Func001Func026A)call DestroyGroup(udg_Pdn_Group)
set udg_Pdn_Group=nullcall RemoveRect(udg_Pdn_Rect)set udg_Pdn_Rect=nullcall FlushParentHashtableBJ(udg_Pdn_Hash)set udg_Pdn_Hash=nullcall GroupClear(udg_Pdn_Group2)call GroupClear(udg_Pdn_GroupDummy)set udg_Pdn_Own=null
call RemoveUnit(udg_Pdn_Unit[1])
call RemoveUnit(udg_Pdn_Unit[2])
set udg_Pdn_Unit[0]=null
set udg_Pdn_Unit[1]=null
set udg_Pdn_Unit[2]=null
set udg_Pdn_Real[0]=.0set udg_Pdn_Real[1]=.0set udg_Pdn_Real[2]=.0set udg_Pdn_Int=0set udg_Pdn_Result=0
endifendfunctionfunction InitTrig_PdnL takes nothing returns nothing
set gg_trg_PdnL=CreateTrigger()call DisableTrigger(gg_trg_PdnL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PdnL,.04)call TriggerAddAction(gg_trg_PdnL,function Trig_PdnL_Actions)endfunctionfunction Trig_PdnL2_Func023A takes nothing returns nothingset udg_Pdn_Unit[4]=GetEnumUnit()set udg_Pdn_Key=GetHandleId(udg_Pdn_Unit[4])
set udg_Pdn_Result=(LoadInteger(udg_Pdn_Hash,udg_Pdn_Key,1)-1)if(udg_Pdn_Result>0)then
call SaveInteger(udg_Pdn_Hash,udg_Pdn_Key,1,udg_Pdn_Result)set udg_Pdn_Real[3]=(LoadReal(udg_Pdn_Hash,udg_Pdn_Key,1)-1)
set udg_Pdn_Loc[4]=GetUnitLoc(udg_Pdn_Unit[4])set udg_Pdn_Loc[5]=PolarProjectionBJ(udg_Pdn_Loc[4],LoadReal(udg_Pdn_Hash,udg_Pdn_Key,0),AngleBetweenPoints(udg_Pdn_Loc[4],udg_Pdn_Loc[3]))call RemoveLocation(udg_Pdn_Loc[4])set udg_Pdn_Loc[4]=nullif(IsTerrainPathable(GetLocationX(udg_Pdn_Loc[5]),GetLocationY(udg_Pdn_Loc[5]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitX(udg_Pdn_Unit[4],GetLocationX(udg_Pdn_Loc[5]))call SetUnitY(udg_Pdn_Unit[4],GetLocationY(udg_Pdn_Loc[5]))endifcall RemoveLocation(udg_Pdn_Loc[5])set udg_Pdn_Loc[5]=nullendifset udg_Pdn_Unit[4]=null
endfunctionfunction Trig_PdnL2_Actions takes nothing returns nothingset udg_Pdn_Loc[3]=GetUnitLoc(udg_Pdn_Unit[1])if(udg_Pdn_Bool)then
set udg_Pdn_Loc[4]=PolarProjectionBJ(udg_Pdn_Loc[3],GetRandomReal(.0,120.),GetRandomReal(0,360.))set udg_Pdn_Loc[5]=GetRandomLocInRect(udg_Pdn_Rect)set udg_Pdn_Real[3]=DistanceBetweenPoints(udg_Pdn_Loc[4],udg_Pdn_Loc[5])
call CreateNUnitsAtLoc(1,'h08U',udg_Pdn_Own,udg_Pdn_Loc[5],GetRandomReal(0,360.))set udg_Pdn_Unit[4]=bj_lastCreatedUnitset udg_Pdn_Key=GetHandleId(udg_Pdn_Unit[4])
call SaveInteger(udg_Pdn_Hash,udg_Pdn_Key,1,20)call SaveReal(udg_Pdn_Hash,udg_Pdn_Key,0,(udg_Pdn_Real[3]/ 20.))
call RemoveLocation(udg_Pdn_Loc[4])set udg_Pdn_Loc[4]=nullcall RemoveLocation(udg_Pdn_Loc[5])set udg_Pdn_Loc[5]=nullcall SetUnitFlyHeight(udg_Pdn_Unit[4],800.,((udg_Pdn_Real[3]+600)-(udg_Pdn_Real[3]*.85)))set udg_Pdn_Real[3]=GetRandomReal(150.,400.)
call SetUnitScalePercent(udg_Pdn_Unit[4],udg_Pdn_Real[3],udg_Pdn_Real[3],udg_Pdn_Real[3])call GroupAddUnit(udg_Pdn_GroupDummy,udg_Pdn_Unit[4])set udg_Pdn_Unit[4]=null
endifset udg_Pdn_Group=CreateGroup()call GroupAddGroup(udg_Pdn_GroupDummy,udg_Pdn_Group)
call ForGroupBJ(udg_Pdn_Group,function Trig_PdnL2_Func023A)call RemoveLocation(udg_Pdn_Loc[3])set udg_Pdn_Loc[3]=nullcall DestroyGroup(udg_Pdn_Group)
set udg_Pdn_Group=nullendfunctionfunction InitTrig_PdnL2 takes nothing returns nothingset gg_trg_PdnL2=CreateTrigger()
call DisableTrigger(gg_trg_PdnL2)call TriggerRegisterTimerEventPeriodic(gg_trg_PdnL2,.08)
call TriggerAddAction(gg_trg_PdnL2,function Trig_PdnL2_Actions)endfunctionfunction Trig_Sdt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0A1' or GetSpellAbilityId()=='A0AL')endfunctionfunction Sdt_GroupCond takes nothing returns boolean
if(IsUnitEnemy(GetFilterUnit(),udg_Sdt_Own)==false)thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<1.)thenreturn false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction Sdt_GroupAct takes nothing returns nothinglocal unit Sdt_Pick=GetEnumUnit()local location Sdt_Loc=GetUnitLoc(Sdt_Pick)call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",Sdt_Loc))call RemoveLocation(Sdt_Loc)
set Sdt_Loc=null
if(IsUnitType(Sdt_Pick,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Sdt_Real))+"!",Sdt_Pick,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_Sdt_Unit,Sdt_Pick,udg_Sdt_Real,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set Sdt_Pick=nullendfunctionfunction Trig_Sdt_Actions takes nothing returns nothinglocal integer skill=GetSpellAbilityId()local unit array Sdt_Dummylocal real Sdt_Arealocal location Sdt_Loclocal group Sdt_Groupset udg_Sdt_Unit=GetTriggerUnit()set udg_Sdt_Bool=truecall EnableTrigger(gg_trg_Sdt_Die)set udg_Sdt_Real=((28+(GetUnitAbilityLevel(udg_Sdt_Unit,skill)*2))*GetHeroInt(udg_Sdt_Unit,true))call PauseSystem(udg_Sdt_Unit,true)call UnitAddAbility(udg_Sdt_Unit,udg_GlobalSkill[7])
call SetUnitFly(udg_Sdt_Unit)call SetUnitFlyHeight(udg_Sdt_Unit,900,600)call Dynamic_Sound("Sounds\\ShinraTensei2.mp3")call SetUnitAnimation(udg_Sdt_Unit,"spell one")call SetUnitTimeScalePercent(udg_Sdt_Unit,15.)call TriggerSleepAction(2.)if(udg_Sdt_Bool)then
call SetUnitTimeScalePercent(udg_Sdt_Unit,30.)call TriggerSleepAction(2.)if(udg_Sdt_Bool)then
call CreateTextTagUnitBJ("Shinra Tensei",udg_Sdt_Unit,0,$A,86,2,2,0)
call SetTextTagVelocityBJ(bj_lastCreatedTextTag,50.,100.)call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,2.)call TriggerSleepAction(2.)if(udg_Sdt_Bool)then
set Sdt_Loc=GetUnitLoc(udg_Sdt_Unit)
call CreateNUnitsAtLoc(1,'h01L',udg_Sdt_Own,Sdt_Loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call SetUnitFlyHeight(bj_lastCreatedUnit,900,0)call RemoveLocation(Sdt_Loc)
set Sdt_Loc=null
call CinematicFadeBJ(2,2.,"ReplaceableTextures\\CameraMasks\\White_mask.blp",100.,100.,100.,0)call TriggerSleepAction(1.9)
if(udg_Sdt_Bool)then
call Dynamic_Sound("Sounds\\Explosion.mp3")set udg_Sdt_Own=GetOwningPlayer(udg_Sdt_Unit)set Sdt_Loc=GetUnitLoc(udg_Sdt_Unit)
set Sdt_Dummy[1]=CreateUnit(udg_Sdt_Own,'h08V',GetLocationX(Sdt_Loc),GetLocationY(Sdt_Loc),bj_UNIT_FACING)set Sdt_Dummy[2]=CreateUnit(udg_Sdt_Own,'h083',GetLocationX(Sdt_Loc),GetLocationY(Sdt_Loc),bj_UNIT_FACING)call SetUnitScalePercent(Sdt_Dummy[2],600.,600.,600.)set Sdt_Area=2000.call EnumDestructablesInCircleBJ(Sdt_Area,Sdt_Loc,function TreeKiller)call Dynamic_GroupShake(GetLocationX(Sdt_Loc),GetLocationY(Sdt_Loc),udg_CameraShakeTime,udg_CameraShakePow,3000.,null)set Sdt_Group=GetUnitsInRangeOfLocMatching(Sdt_Area,Sdt_Loc,Condition(function Sdt_GroupCond))call RemoveLocation(Sdt_Loc)
set Sdt_Loc=null
call ForGroup(Sdt_Group,function Sdt_GroupAct)call DestroyGroup(Sdt_Group)
set Sdt_Group=nullcall UnitApplyTimedLife(Sdt_Dummy[1],'BTLF',6.)call UnitApplyTimedLife(Sdt_Dummy[2],'BTLF',15.)
call TriggerSleepAction(.1)call SetUnitTimeScalePercent(Sdt_Dummy[1],10.)call TriggerSleepAction(.5)call SetUnitTimeScalePercent(Sdt_Dummy[2],200.)set udg_Sdt_Own=null
set Sdt_Dummy[1]=nullset Sdt_Dummy[2]=nullset Sdt_Area=.0call QueueUnitAnimation(udg_Sdt_Unit,"stand")endifendifendifendifif(udg_Sdt_Bool)then
set udg_Sdt_Bool=falsecall DisableTrigger(gg_trg_Sdt_Die)endifcall SetUnitTimeScalePercent(udg_Sdt_Unit,100.)call PauseSystem(udg_Sdt_Unit,false)
call UnitRemoveAbility(udg_Sdt_Unit,udg_GlobalSkill[7])call SetUnitFlyHeight(udg_Sdt_Unit,0,600)set udg_Sdt_Unit=nullset udg_Sdt_Real=.0set skill=0endfunctionfunction InitTrig_Sdt takes nothing returns nothingset gg_trg_Sdt=CreateTrigger()call TriggerAddCondition(gg_trg_Sdt,Condition(function Trig_Sdt_Conditions))
call TriggerAddAction(gg_trg_Sdt,function Trig_Sdt_Actions)endfunctionfunction Trig_Sdt_Die_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())set udg_Sdt_Bool=falseendfunctionfunction InitTrig_Sdt_Die takes nothing returns nothingset gg_trg_Sdt_Die=CreateTrigger()call DisableTrigger(gg_trg_Sdt_Die)call TriggerAddAction(gg_trg_Sdt_Die,function Trig_Sdt_Die_Actions)endfunctionfunction AI_Kenpachi_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='U001')endfunctionfunction AI_Kenpachi_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='U001')
endfunctionfunction AI_Kenpachi_AttackedCond takes nothing returns booleanif(not AI_Kenpachi_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Kenpachi_AttackerCond takes nothing returns booleanif(not AI_Kenpachi_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Kenpachi_CondOR takes nothing returns booleanreturn(AI_Kenpachi_AttackedCond()or AI_Kenpachi_AttackerCond())endfunctionfunction AI_Kenpachi_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Kenpachi_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Kenpachi_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Kenpachi_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0AB')call SelectHeroSkill(AI_1,'A0AA')call SelectHeroSkill(AI_1,'A0A7')call SelectHeroSkill(AI_1,'A0A6')call SelectHeroSkill(AI_1,'A0A4')endifcall IssueImmediateOrderById(AI_1,$D0080)set AI_Point2=GetUnitLoc(AI_2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssuePointOrderByIdLoc(AI_1,$D0264,AI_Point2)call IssueImmediateOrderById(AI_1,$D00C4)set AI_Attacker=falseendifcall IssuePointOrderByIdLoc(AI_1,$D0271,AI_Point2)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Kenpachi takes nothing returns nothingset udg_AI_Trig[21]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[21],Condition(function AI_Kenpachi_Cond))call TriggerAddAction(udg_AI_Trig[21],function AI_Kenpachi_Act)endfunctionfunction Trig_Thrilling_Spiritual_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0A4')endfunctionfunction Trig_Thrilling_Spiritual_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h04B',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call CreateNUnitsAtLoc(1,'u003',p,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0A5')call IssueImmediateOrderById(bj_lastCreatedUnit,$D026C)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
set p=nullset u=nullendfunctionfunction InitTrig_Thrilling_Spiritual takes nothing returns nothingset gg_trg_Thrilling_Spiritual=CreateTrigger()call TriggerAddCondition(gg_trg_Thrilling_Spiritual,Condition(function Trig_Thrilling_Spiritual_Conditions))
call TriggerAddAction(gg_trg_Thrilling_Spiritual,function Trig_Thrilling_Spiritual_Actions)endfunctionfunction Trig_Czj_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0A7')endfunctionfunction Trig_Czj_Actions takes nothing returns nothingset udg_Czj_Unit=GetTriggerUnit()set udg_Czj_Loc[0]=GetSpellTargetLoc()set udg_Czj_Loc[1]=GetUnitLoc(udg_Czj_Unit)set udg_Czj_Real[0]=DistanceBetweenPoints(udg_Czj_Loc[0],udg_Czj_Loc[1])
set udg_Czj_Real[1]=AngleBetweenPoints(udg_Czj_Loc[1],udg_Czj_Loc[0])set udg_Czj_Real[2]=(3500.-(.8*udg_Czj_Real[0]))
call RemoveLocation(udg_Czj_Loc[0])set udg_Czj_Loc[0]=nullcall RemoveLocation(udg_Czj_Loc[1])set udg_Czj_Loc[1]=nullcall SetUnitPathing(udg_Czj_Unit,false)call PauseSystem(udg_Czj_Unit,true)call SetUnitAnimation(udg_Czj_Unit,"attack")
call SetUnitTimeScalePercent(udg_Czj_Unit,50.)call UnitAddAbility(udg_Czj_Unit,'A0A9')
call SetUnitFly(udg_Czj_Unit)call SetUnitFlyHeight(udg_Czj_Unit,600.,1200.)set udg_Czj_Real[3]=(700.+((4.+I2R(GetUnitAbilityLevel(udg_Czj_Unit,'A0A7')))*I2R(GetHeroStr(udg_Czj_Unit,true))))set udg_Czj_Own=GetOwningPlayer(udg_Czj_Unit)set udg_Czj_Bool=trueset udg_Czj_Speed[0]=(udg_Czj_Real[0]*.3)set udg_Czj_Speed[1]=(udg_Czj_Real[0]-udg_Czj_Speed[0])set udg_Czj_Int=30set udg_Czj_Speed[0]=(udg_Czj_Speed[0]/ 22.)
set udg_Czj_Speed[1]=(udg_Czj_Speed[1]/ 8.)call EnableTrigger(gg_trg_CzjL)endfunctionfunction InitTrig_Czj takes nothing returns nothingset gg_trg_Czj=CreateTrigger()call TriggerAddCondition(gg_trg_Czj,Condition(function Trig_Czj_Conditions))
call TriggerAddAction(gg_trg_Czj,function Trig_Czj_Actions)endfunctionfunction Trig_CzjL_Func001Func042002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Czj_Own))
endfunctionfunction Trig_CzjL_Func001Func042002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_CzjL_Func001Func042002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_CzjL_Func001Func042002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_CzjL_Func001Func042002003002001(),Trig_CzjL_Func001Func042002003002002())endfunctionfunction Trig_CzjL_Func001Func042002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_CzjL_Func001Func042002003001(),Trig_CzjL_Func001Func042002003002())endfunctionfunction Trig_CzjL_Func001Func045A takes nothing returns nothing
call UnitDamageTarget(udg_Czj_Unit,GetEnumUnit(),udg_Czj_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction Trig_CzjL_Func001C takes nothing returns booleanreturn(udg_Czj_Int>0)and(IsUnitDeadBJ(udg_Czj_Unit)==false)endfunctionfunction Trig_CzjL_Actions takes nothing returns nothing
if(Trig_CzjL_Func001C())then
set udg_Czj_Loc[0]=GetUnitLoc(udg_Czj_Unit)if(udg_Czj_Int>8)thenset udg_Czj_Loc[1]=PolarProjectionBJ(udg_Czj_Loc[0],udg_Czj_Speed[0],udg_Czj_Real[1])if(udg_Czj_Int==16)thencall Dynamic_3D("Abilities\\Spells\\Other\\Stampede\\StampedeCaster1.wav",GetLocationX(udg_Czj_Loc[0]),GetLocationY(udg_Czj_Loc[0]))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",udg_Czj_Unit,"origin"))endifelse
if(udg_Czj_Bool)then
call SetUnitFlyHeight(udg_Czj_Unit,.0,udg_Czj_Real[2])set udg_Czj_Bool=falseendifset udg_Czj_Loc[1]=PolarProjectionBJ(udg_Czj_Loc[0],udg_Czj_Speed[1],udg_Czj_Real[1])endifcall SetUnitPositionLoc(udg_Czj_Unit,udg_Czj_Loc[1])
call RemoveLocation(udg_Czj_Loc[0])set udg_Czj_Loc[0]=nullcall RemoveLocation(udg_Czj_Loc[1])set udg_Czj_Loc[1]=nullset udg_Czj_Int=(udg_Czj_Int-1)else
call DisableTrigger(GetTriggeringTrigger())if(GetWidgetLife(udg_Czj_Unit)>0)thenset udg_Czj_Real[0]=450.
set udg_Czj_Loc[0]=GetUnitLoc(udg_Czj_Unit)call TerrainDeformationRippleBJ(.5,false,udg_Czj_Loc[0],500.,500.,100.,1,512)call CreateNUnitsAtLoc(1,'u003',udg_Czj_Own,udg_Czj_Loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[9])call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h08Q',udg_Czj_Own,udg_Czj_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08Q',udg_Czj_Own,udg_Czj_Loc[0],GetRandomReal(0,360.))call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08T',udg_Czj_Own,udg_Czj_Loc[0],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,200.,200.,200.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call EnumDestructablesInCircleBJ(udg_Czj_Real[0],udg_Czj_Loc[0],function TreeKiller)
set udg_Czj_Group=GetUnitsInRangeOfLocMatching(udg_Czj_Real[0],udg_Czj_Loc[0],Condition(function Trig_CzjL_Func001Func042002003))call RemoveLocation(udg_Czj_Loc[0])set udg_Czj_Loc[0]=nullcall ForGroupBJ(udg_Czj_Group,function Trig_CzjL_Func001Func045A)call DestroyGroup(udg_Czj_Group)
set udg_Czj_Group=nullendifcall SetUnitPathing(udg_Czj_Unit,true)call PauseSystem(udg_Czj_Unit,false)
call SetUnitTimeScalePercent(udg_Czj_Unit,100.)call UnitRemoveAbility(udg_Czj_Unit,'A0A9')set udg_Czj_Own=null
set udg_Czj_Unit=nullset udg_Czj_Real[0]=.0set udg_Czj_Real[1]=.0set udg_Czj_Real[2]=.0set udg_Czj_Real[3]=.0set udg_Czj_Speed[0]=.0set udg_Czj_Speed[1]=.0set udg_Czj_Int=0set udg_Czj_Bool=falseendifendfunctionfunction InitTrig_CzjL takes nothing returns nothing
set gg_trg_CzjL=CreateTrigger()call DisableTrigger(gg_trg_CzjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CzjL,.03)call TriggerAddAction(gg_trg_CzjL,function Trig_CzjL_Actions)endfunctionfunction Trig_Release_Eye_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AA')endfunctionfunction Trig_Release_Eye_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
local real delay=.5set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)set udg_Rep_Buff='B02B'call EnableTrigger(gg_trg_Release_Eye_Attack)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Kenpachi\\EyePatchRelease.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h08W',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(p,'h02A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(p,'h02B',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set p=nullcall TransfromAction(u,x,y)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,udg_Rep_Buff)<1)endloopcall DisableTrigger(gg_trg_Release_Eye_Attack)set u=nullendfunctionfunction InitTrig_Release_Eye takes nothing returns nothingset gg_trg_Release_Eye=CreateTrigger()call TriggerAddCondition(gg_trg_Release_Eye,Condition(function Trig_Release_Eye_Conditions))
call TriggerAddAction(gg_trg_Release_Eye,function Trig_Release_Eye_Actions)endfunctionfunction Trig_Release_Eye_Attack_Conditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),udg_Rep_Buff)>0)endfunctionfunction Trig_Release_Eye_Attack_Actions takes nothing returns nothinglocal unit u=GetAttacker()local real x=GetUnitX(u)
local real y=GetUnitY(u)
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",GetTriggerUnit(),"origin"))
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h08X',x,y,GetUnitFacing(u))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set u=nullendfunctionfunction InitTrig_Release_Eye_Attack takes nothing returns nothingset gg_trg_Release_Eye_Attack=CreateTrigger()call DisableTrigger(gg_trg_Release_Eye_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Release_Eye_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Release_Eye_Attack,Condition(function Trig_Release_Eye_Attack_Conditions))call TriggerAddAction(gg_trg_Release_Eye_Attack,function Trig_Release_Eye_Attack_Actions)endfunctionfunction Trig_Kds_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AB')endfunctionfunction Kds_GroupCond takes nothing returns boolean
if(IsUnitInGroup(GetFilterUnit(),udg_Kds_Group2))thenreturn false
elseif(IsUnitAlly(GetFilterUnit(),udg_Kds_Own))thenreturn false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<1)then
return false
endifreturn trueendfunctionfunction Kds_GroupAct takes nothing returns nothinglocal unit u=GetEnumUnit()call GroupAddUnit(udg_Kds_Group2,u)if(IsUnitType(u,UNIT_TYPE_HERO))then
call DisplayText(I2S(R2I(udg_Kds_Real[1]))+"!",u,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_Kds_Unit[0],u,udg_Kds_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u=nullendfunctionfunction Trig_Kds_Actions takes nothing returns nothingset udg_Kds_Unit[0]=GetTriggerUnit()
set udg_Kds_Loc[0]=GetSpellTargetLoc()set udg_Kds_Loc[1]=GetUnitLoc(udg_Kds_Unit[0])set udg_Kds_Real[0]=AngleBetweenPoints(udg_Kds_Loc[1],udg_Kds_Loc[0])call RemoveLocation(udg_Kds_Loc[0])set udg_Kds_Loc[0]=nullcall RemoveLocation(udg_Kds_Loc[1])set udg_Kds_Loc[1]=nullset udg_Kds_Real[1]=(1800.+((10.+(5.*I2R(GetUnitAbilityLevel(udg_Kds_Unit[0],'A0AB'))))*I2R(GetHeroStr(udg_Kds_Unit[0],false))))
call PauseSystem(udg_Kds_Unit[0],true)call SetUnitAnimation(udg_Kds_Unit[0],"stand ready")
call DisplayText("\"gimme a break...\"",udg_Kds_Unit[0],.023,true,$DC,5,5,$FF)call TriggerSleepAction(.42)
if(GetWidgetLife(udg_Kds_Unit[0])>0)then
call SetUnitAnimationByIndex(udg_Kds_Unit[0],0)set udg_Kds_Own=GetOwningPlayer(udg_Kds_Unit[0])
set udg_Kds_Loc[0]=GetUnitLoc(udg_Kds_Unit[0])call CreateNUnitsAtLoc(1,'h08X',udg_Kds_Own,udg_Kds_Loc[0],udg_Kds_Real[0])call SetUnitScalePercent(bj_lastCreatedUnit,$B4,$B4,$B4)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h08X',udg_Kds_Own,udg_Kds_Loc[0],udg_Kds_Real[0])call SetUnitScalePercent(bj_lastCreatedUnit,$B4,$B4,$B4)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Kds_Loc[0])set udg_Kds_Loc[0]=nullcall DisplayText("Ryodan !",udg_Kds_Unit[0],.023,false,$DC,5,5,$FF)call TriggerSleepAction(.01)
set udg_Kds_Real[2]=72.set udg_Kds_Real[3]=300.
set udg_Kds_Bool=trueset udg_Kds_Loc[0]=GetUnitLoc(udg_Kds_Unit[0])call Dynamic_GroupShake(GetLocationX(udg_Kds_Loc[0]),GetLocationY(udg_Kds_Loc[0]),.8,udg_CameraShakePow,udg_CameraArea,null)
set udg_Kds_Int=1loop
exitwhen udg_Kds_Int>$Cset udg_Kds_Loc[1]=PolarProjectionBJ(udg_Kds_Loc[0],(I2R(udg_Kds_Int)*udg_Kds_Real[2]),udg_Kds_Real[0])call EnumDestructablesInCircleBJ(udg_Kds_Real[3],udg_Kds_Loc[1],function TreeKiller)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",udg_Kds_Loc[1]))if(udg_Kds_Bool)then
call CreateNUnitsAtLoc(1,'h0BA',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=falseelse
call CreateNUnitsAtLoc(1,'h08Q',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,$C8,$C8,$C8)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=trueendifset udg_Kds_Group=GetUnitsInRangeOfLocMatching(udg_Kds_Real[3],udg_Kds_Loc[1],Condition(function Kds_GroupCond))
call RemoveLocation(udg_Kds_Loc[1])set udg_Kds_Loc[1]=nullcall ForGroup(udg_Kds_Group,function Kds_GroupAct)call DestroyGroup(udg_Kds_Group)
set udg_Kds_Group=nullset udg_Kds_Int=udg_Kds_Int+1endloopset udg_Kds_Real[0]=(udg_Kds_Real[0]+20.)set udg_Kds_Int=1loop
exitwhen udg_Kds_Int>$Cset udg_Kds_Loc[1]=PolarProjectionBJ(udg_Kds_Loc[0],(I2R(udg_Kds_Int)*udg_Kds_Real[2]),udg_Kds_Real[0])call EnumDestructablesInCircleBJ(udg_Kds_Real[3],udg_Kds_Loc[1],function TreeKiller)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",udg_Kds_Loc[1]))if(udg_Kds_Bool)then
call CreateNUnitsAtLoc(1,'h0BA',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=falseelse
call CreateNUnitsAtLoc(1,'h08Q',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,$C8,$C8,$C8)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=trueendifset udg_Kds_Group=GetUnitsInRangeOfLocMatching(udg_Kds_Real[3],udg_Kds_Loc[1],Condition(function Kds_GroupCond))
call RemoveLocation(udg_Kds_Loc[1])set udg_Kds_Loc[1]=nullcall ForGroup(udg_Kds_Group,function Kds_GroupAct)call DestroyGroup(udg_Kds_Group)
set udg_Kds_Group=nullset udg_Kds_Int=udg_Kds_Int+1endloopset udg_Kds_Real[0]=(udg_Kds_Real[0]-39.)set udg_Kds_Int=1loop
exitwhen udg_Kds_Int>$Cset udg_Kds_Loc[1]=PolarProjectionBJ(udg_Kds_Loc[0],(I2R(udg_Kds_Int)*udg_Kds_Real[2]),udg_Kds_Real[0])call EnumDestructablesInCircleBJ(udg_Kds_Real[3],udg_Kds_Loc[1],function TreeKiller)
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",udg_Kds_Loc[1]))if(udg_Kds_Bool)then
call CreateNUnitsAtLoc(1,'h0BA',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=falseelse
call CreateNUnitsAtLoc(1,'h08Q',udg_Kds_Own,udg_Kds_Loc[1],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,$C8,$C8,$C8)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Kds_Bool=trueendifset udg_Kds_Group=GetUnitsInRangeOfLocMatching(udg_Kds_Real[3],udg_Kds_Loc[1],Condition(function Kds_GroupCond))
call RemoveLocation(udg_Kds_Loc[1])set udg_Kds_Loc[1]=nullcall ForGroup(udg_Kds_Group,function Kds_GroupAct)call DestroyGroup(udg_Kds_Group)
set udg_Kds_Group=nullset udg_Kds_Int=udg_Kds_Int+1endloopcall RemoveLocation(udg_Kds_Loc[0])set udg_Kds_Loc[0]=nullset udg_Kds_Own=null
call GroupClear(udg_Kds_Group2)set udg_Kds_Real[2]=.0set udg_Kds_Real[3]=.0set udg_Kds_Int=0endifcall PauseSystem(udg_Kds_Unit[0],false)set udg_Kds_Unit[0]=null
set udg_Kds_Real[0]=.0set udg_Kds_Real[1]=.0endfunctionfunction InitTrig_Kds takes nothing returns nothingset gg_trg_Kds=CreateTrigger()call TriggerAddCondition(gg_trg_Kds,Condition(function Trig_Kds_Conditions))
call TriggerAddAction(gg_trg_Kds,function Trig_Kds_Actions)endfunctionfunction AI_Enel_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='E005')endfunctionfunction AI_Enel_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='E005')
endfunctionfunction AI_Enel_AttackedCond takes nothing returns booleanif(not AI_Enel_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Enel_AttackerCond takes nothing returns booleanif(not AI_Enel_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Enel_CondOR takes nothing returns booleanreturn(AI_Enel_AttackedCond()or AI_Enel_AttackerCond())endfunctionfunction AI_Enel_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Enel_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Enel_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local location AI_Point4
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Enel_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0AJ')call SelectHeroSkill(AI_1,'A0AN')call SelectHeroSkill(AI_1,'A0AI')call SelectHeroSkill(AI_1,'A0AG')call SelectHeroSkill(AI_1,'A0AE')call SelectHeroSkill(AI_1,'A0AD')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point3)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenset AI_Point4=GetUnitLoc(AI_1)call IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point4)call RemoveLocation(AI_Point4)set AI_Point4=nullcall IssueImmediateOrderById(AI_1,$D022E)call IssueImmediateOrderById(AI_1,$D00D7)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0081)set AI_Attacker=falseendifendifcall RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Enel takes nothing returns nothingset udg_AI_Trig[22]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[22],Condition(function AI_Enel_Cond))call TriggerAddAction(udg_AI_Trig[22],function AI_Enel_Act)endfunctionfunction Trig_Jog_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AD')endfunctionfunction Trig_Jog_Func030002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Jog_Own))
endfunctionfunction Trig_Jog_Func030002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_Jog_Func030002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Jog_Func030002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Jog_Func030002003002001(),Trig_Jog_Func030002003002002())endfunctionfunction Trig_Jog_Func030002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Jog_Func030002003001(),Trig_Jog_Func030002003002())endfunctionfunction Trig_Jog_Func033A takes nothing returns nothing
call UnitDamageTarget(udg_Jog_Unit,GetEnumUnit(),udg_Jog_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction Trig_Jog_Actions takes nothing returns nothingset udg_Jog_Unit=GetTriggerUnit()set udg_Jog_Loc[0]=GetSpellTargetLoc()set udg_Jog_Real[0]=GetLocationX(udg_Jog_Loc[0])
set udg_Jog_Real[1]=GetLocationY(udg_Jog_Loc[0])
set udg_Jog_Loc[1]=GetUnitLoc(udg_Jog_Unit)set udg_Jog_Real[2]=AngleBetweenPoints(udg_Jog_Loc[1],udg_Jog_Loc[0])call RemoveLocation(udg_Jog_Loc[0])set udg_Jog_Loc[0]=nullcall RemoveLocation(udg_Jog_Loc[1])set udg_Jog_Loc[1]=nullcall DisplayText("El Thor",udg_Jog_Unit,.023,true,$FF,$FF,$FF,$FF)set udg_Jog_Real[3]=(150.+(3.*I2R(GetHeroInt(udg_Jog_Unit,true))))set udg_Jog_Real[4]=180.
set udg_Jog_Real[5]=250.
set udg_Jog_Int[0]=GetUnitAbilityLevel(udg_Jog_Unit,'A0AD')set udg_Jog_Int[1]=0
set udg_Jog_Own=GetOwningPlayer(udg_Jog_Unit)loop
set udg_Jog_Loc[0]=Location(udg_Jog_Real[0],udg_Jog_Real[1])
set udg_Jog_Loc[1]=PolarProjectionBJ(udg_Jog_Loc[0],(I2R(udg_Jog_Int[1])*udg_Jog_Real[4]),udg_Jog_Real[2])call RemoveLocation(udg_Jog_Loc[0])set udg_Jog_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h04S',udg_Jog_Own,udg_Jog_Loc[1],GetRandomReal(0,360.))call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h04R',udg_Jog_Own,udg_Jog_Loc[1],GetRandomReal(0,360.))call SetUnitScalePercent(bj_lastCreatedUnit,250.,250.,250.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call EnumDestructablesInCircleBJ(udg_Jog_Real[5],udg_Jog_Loc[1],function TreeKiller)
set udg_Jog_Group=GetUnitsInRangeOfLocMatching(udg_Jog_Real[5],udg_Jog_Loc[1],Condition(function Trig_Jog_Func030002003))call RemoveLocation(udg_Jog_Loc[1])set udg_Jog_Loc[1]=nullcall ForGroupBJ(udg_Jog_Group,function Trig_Jog_Func033A)call DestroyGroup(udg_Jog_Group)
set udg_Jog_Group=nullset udg_Jog_Int[1]=(udg_Jog_Int[1]+1)exitwhen udg_Jog_Int[1]>=udg_Jog_Int[0]call TriggerSleepAction(.0)endloopset udg_Jog_Own=null
set udg_Jog_Unit=nullset udg_Jog_Real[0]=.0set udg_Jog_Real[1]=.0set udg_Jog_Real[2]=.0set udg_Jog_Real[3]=.0set udg_Jog_Real[4]=.0set udg_Jog_Real[5]=.0set udg_Jog_Int[0]=0
set udg_Jog_Int[1]=0
endfunctionfunction InitTrig_Jog takes nothing returns nothingset gg_trg_Jog=CreateTrigger()call TriggerAddCondition(gg_trg_Jog,Condition(function Trig_Jog_Conditions))
call TriggerAddAction(gg_trg_Jog,function Trig_Jog_Actions)endfunctionfunction Trig_Tmt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AE')endfunctionfunction Trig_Tmt_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local location loclocal real delay
call DisplayText("Gloam Paddling",u,.023,false,$FF,$FF,$FF,$FF)set udg_Tmt_Own=GetOwningPlayer(u)set loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u005',udg_Tmt_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0BL')call SetUnitAbilityLevelSwapped('A0BL',bj_lastCreatedUnit,GetUnitAbilityLevel(u,'A0AE'))
call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call SetUnitTimeScalePercent(u,150.)
set udg_Tmt_Buff='B02C'set delay=.1
call EnableTrigger(gg_trg_Tmt_Attack)call TriggerSleepAction(.4)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,udg_Tmt_Buff)<1)endloopcall DisableTrigger(gg_trg_Tmt_Attack)call SetUnitTimeScalePercent(u,100.)
set u=nullset udg_Tmt_Own=null
set delay=.0
set udg_Tmt_Buff=0endfunctionfunction InitTrig_Tmt takes nothing returns nothingset gg_trg_Tmt=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Tmt,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Tmt,Condition(function Trig_Tmt_Conditions))
call TriggerAddAction(gg_trg_Tmt,function Trig_Tmt_Actions)endfunctionfunction Trig_Tmt_Attack_Conditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),udg_Tmt_Buff)>0)endfunctionfunction Trig_Tmt_Attack_Actions takes nothing returns nothinglocal unit Attacker=GetAttacker()local unit Attacked=GetTriggerUnit()
local location loc=GetUnitLoc(Attacker)call CreateNUnitsAtLoc(1,'u003',udg_Tmt_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A07T')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,Attacked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call DestroyEffect(AddSpecialEffectTarget("OrbOfLightning.mdl",Attacked,"chest"))call UnitDamageTarget(Attacker,Attacked,((1.+(.3*I2R(GetUnitAbilityLevel(Attacker,'A0AE'))))*I2R(GetHeroInt(Attacker,true))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set Attacker=nullset Attacked=nullendfunctionfunction InitTrig_Tmt_Attack takes nothing returns nothingset gg_trg_Tmt_Attack=CreateTrigger()call DisableTrigger(gg_trg_Tmt_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Tmt_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Tmt_Attack,Condition(function Trig_Tmt_Attack_Conditions))call TriggerAddAction(gg_trg_Tmt_Attack,function Trig_Tmt_Attack_Actions)endfunctionfunction Trig_Vri_Cast_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AG')endfunctionfunction Trig_Vri_Cast_Actions takes nothing returns nothing
set udg_Vri_Unit[0]=GetTriggerUnit()
set udg_Vri_Own=GetOwningPlayer(udg_Vri_Unit[0])
set udg_Vri_Loc=GetUnitLoc(udg_Vri_Unit[0])set udg_Vri_Unit[1]=CreateUnit(udg_Vri_Own,'h090',GetLocationX(udg_Vri_Loc),GetLocationY(udg_Vri_Loc),bj_UNIT_FACING)call RemoveLocation(udg_Vri_Loc)
set udg_Vri_Loc=null
call SetUnitTimeScalePercent(udg_Vri_Unit[1],25.)set udg_Vri_Real[0]=((5.+(3.*I2R(GetUnitAbilityLevel(udg_Vri_Unit[0],'A0AG'))))*I2R(GetHeroInt(udg_Vri_Unit[0],true)))set udg_Vri_Real[1]=1.set udg_Vri_Text=CreateTextTag()
call SetTextTagPosUnit(udg_Vri_Text,udg_Vri_Unit[0],0)call SetTextTagColor(udg_Vri_Text,'d',$96,$FF,$FF)call EnableTrigger(gg_trg_Vri_L)
call EnableTrigger(gg_trg_Vri)endfunctionfunction InitTrig_Vri_Cast takes nothing returns nothing
set gg_trg_Vri_Cast=CreateTrigger()call TriggerAddCondition(gg_trg_Vri_Cast,Condition(function Trig_Vri_Cast_Conditions))call TriggerAddAction(gg_trg_Vri_Cast,function Trig_Vri_Cast_Actions)endfunctionfunction Trig_Vri_L_Actions takes nothing returns nothingset udg_Vri_Real[1]=(udg_Vri_Real[1]+1.65)call SetTextTagText(udg_Vri_Text,I2S(R2I(udg_Vri_Real[1]))+"%",.023)
set udg_Vri_Loc=GetUnitLoc(udg_Vri_Unit[0])call SetUnitPositionLoc(udg_Sda_Unit[1],udg_Vri_Loc)
call RemoveLocation(udg_Vri_Loc)
set udg_Vri_Loc=null
endfunctionfunction InitTrig_Vri_L takes nothing returns nothingset gg_trg_Vri_L=CreateTrigger()
call DisableTrigger(gg_trg_Vri_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Vri_L,.05)
call TriggerAddAction(gg_trg_Vri_L,function Trig_Vri_L_Actions)endfunctionfunction Trig_Vri_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AG')endfunctionfunction Trig_Vri_Func014002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Vri_Own))
endfunctionfunction Trig_Vri_Func014002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_Vri_Func014002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Vri_Func014002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Vri_Func014002003002001(),Trig_Vri_Func014002003002002())endfunctionfunction Trig_Vri_Func014002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Vri_Func014002003001(),Trig_Vri_Func014002003002())endfunctionfunction Trig_Vri_Func030A takes nothing returns nothing
set udg_Vri_Unit[2]=GetEnumUnit()set udg_Vri_Loc=GetUnitLoc(udg_Vri_Unit[2])call CreateNUnitsAtLoc(1,'h04S',udg_Vri_Own,udg_Vri_Loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h00E',udg_Vri_Own,udg_Vri_Loc,GetRandomReal(0,360.))call SetUnitScalePercent(bj_lastCreatedUnit,350.,350.,350.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitDamageTarget(udg_Vri_Unit[0],udg_Vri_Unit[2],udg_Vri_Real[0],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(udg_Vri_Unit[2])>0)then
call CreateNUnitsAtLoc(1,'u003',udg_Vri_Own,udg_Vri_Loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A06I')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,udg_Vri_Unit[2])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(udg_Vri_Loc)
set udg_Vri_Loc=null
set udg_Vri_Unit[2]=null
endfunctionfunction Trig_Vri_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_Vri_L)call SetTextTagPermanent(udg_Vri_Text,false)
call DestroyTextTag(udg_Vri_Text)if(GetWidgetLife(udg_Vri_Unit[0])>0)then
call DisplayText(I2S((R2I(udg_Vri_Real[1])+1)*2)+" Million Volt",udg_Vri_Unit[0],.023,false,'d',$96,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Enel\\Vari.wav",GetUnitX(udg_Vri_Unit[0]),GetUnitY(udg_Vri_Unit[0]))set udg_Vri_Real[0]=(udg_Vri_Real[0]*(udg_Vri_Real[1]/ 100.))set udg_Vri_Real[2]=1650.set udg_Vri_Loc=GetUnitLoc(udg_Vri_Unit[0])if(udg_Vri_Real[1]>89)thencall Dynamic_GroupShake(GetLocationX(udg_Vri_Loc),GetLocationY(udg_Vri_Loc),1.2,udg_CameraShakePow,udg_CameraArea,null)endifset udg_Vri_Group=GetUnitsInRangeOfLocMatching(udg_Vri_Real[2],udg_Vri_Loc,Condition(function Trig_Vri_Func014002003))call CreateNUnitsAtLoc(1,'h04R',udg_Vri_Own,udg_Vri_Loc,GetRandomReal(0,360.))call SetUnitScalePercent(bj_lastCreatedUnit,850.,850.,850.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,20.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h04R',udg_Vri_Own,udg_Vri_Loc,GetRandomReal(0,360.))call SetUnitScalePercent(bj_lastCreatedUnit,850.,850.,850.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,20.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h05O',udg_Vri_Own,udg_Vri_Loc,bj_UNIT_FACING)call SetUnitTimeScalePercent(bj_lastCreatedUnit,50.)
call SetUnitScalePercent(bj_lastCreatedUnit,2000.,2000.,2000.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call EnumDestructablesInCircleBJ(udg_Vri_Real[2],udg_Vri_Loc,function TreeKiller)call RemoveLocation(udg_Vri_Loc)
set udg_Vri_Loc=null
call ForGroupBJ(udg_Vri_Group,function Trig_Vri_Func030A)call DestroyGroup(udg_Vri_Group)
set udg_Vri_Group=nullset udg_Vri_Real[2]=.0endifcall SetUnitTimeScalePercent(udg_Vri_Unit[1],100.)call UnitApplyTimedLife(udg_Vri_Unit[1],'BTLF',3.)set udg_Vri_Own=null
set udg_Vri_Unit[0]=null
set udg_Vri_Unit[1]=null
set udg_Vri_Real[0]=.0set udg_Vri_Real[1]=.0endfunctionfunction InitTrig_Vri takes nothing returns nothingset gg_trg_Vri=CreateTrigger()call DisableTrigger(gg_trg_Vri)call TriggerAddCondition(gg_trg_Vri,Condition(function Trig_Vri_Conditions))
call TriggerAddAction(gg_trg_Vri,function Trig_Vri_Actions)endfunctionfunction Mmg_TrigDieAct takes nothing returns nothingset udg_Mmg_Bool=falseendfunctionfunction Trig_Mmg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AI')endfunctionfunction Trig_Mmg_Actions takes nothing returns nothinglocal sound MySoundlocal real delay
local integer rounds
set udg_Mmg_Unit=GetTriggerUnit()set udg_Mmg_Bool=truecall DisplayText("Mamaragan",udg_Mmg_Unit,.023,true,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Enel\\Mamaragan.wav",GetUnitX(udg_Mmg_Unit),GetUnitY(udg_Mmg_Unit))
call EnableWeatherEffect(udg_Weather_Map[0],true)set udg_Weather_Stack[0]=udg_Weather_Stack[0]+1set MySound=CreateSound("Sound\\Ambient\\BattleNetWindStereoLoop1.wav",false,false,false,$A,$A,"DefaultEAXON")call SetSoundParamsFromLabel(MySound,"GlueScreenBnetWind")call SetSoundDuration(MySound,$4D47)
call SetSoundVolume(MySound,$C8)
call StartSound(MySound)
call KillSoundWhenDone(MySound)set udg_Mmg_Own=GetOwningPlayer(udg_Mmg_Unit)set udg_Mmg_Int[0]=(25+(5*GetUnitAbilityLevelSwapped('A0AI',udg_Mmg_Unit)))set udg_Mmg_Int[1]=(7+(1*GetUnitAbilityLevelSwapped('A0AI',udg_Mmg_Unit)))call EnableTrigger(gg_trg_MmgL)call EnableTrigger(udg_Mmg_TrigAtk)call EnableTrigger(udg_Mmg_TrigDie)set delay=.4
set rounds=0
loop
call TriggerSleepAction(delay)exitwhen(udg_Mmg_Bool==false or rounds>29)set rounds=rounds+1endloopcall DisableTrigger(gg_trg_MmgL)
call DisableTrigger(udg_Mmg_TrigAtk)
call DisableTrigger(udg_Mmg_TrigDie)
set udg_Weather_Stack[0]=udg_Weather_Stack[0]-1if(udg_Weather_Stack[0]==0)thencall EnableWeatherEffect(udg_Weather_Map[0],false)endifcall SetSoundVolume(MySound,0)call KillSoundWhenDone(MySound)set MySound=null
set udg_Mmg_Unit=nullset udg_Mmg_Own=null
set udg_Mmg_Int[0]=0
set udg_Mmg_Int[1]=0
set delay=.0
set rounds=0
endfunctionfunction InitTrig_Mmg takes nothing returns nothingset gg_trg_Mmg=CreateTrigger()call TriggerAddCondition(gg_trg_Mmg,Condition(function Trig_Mmg_Conditions))
call TriggerAddAction(gg_trg_Mmg,function Trig_Mmg_Actions)set udg_Mmg_TrigDie=CreateTrigger()call DisableTrigger(udg_Mmg_TrigDie)
call TriggerAddAction(udg_Mmg_TrigDie,function Mmg_TrigDieAct)endfunctionfunction Mmg_GroupCond takes nothing returns boolean
if(IsUnitAlly(GetFilterUnit(),udg_Mmg_Own))thenreturn false
elseif(GetUnitState(GetFilterUnit(),UNIT_STATE_LIFE)<1)thenreturn false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction Mmg_GroupAct takes nothing returns nothingcall UnitDamageTarget(udg_Mmg_Unit,GetEnumUnit(),(GetHeroInt(udg_Mmg_Unit,true)*1.5),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction MmgL_AtkCond takes nothing returns booleanif(IsUnitType(GetAttacker(),UNIT_TYPE_HERO)==false)thenreturn false
elseif(IsUnitAlly(GetAttacker(),udg_Mmg_Own))thenreturn false
elseif(GetUnitAbilityLevel(GetAttacker(),udg_GlobalSkill[0])!=0)then
return false
elseif(udg_Mmg_Int[1]<GetRandomInt(1,'d'))thenreturn false
endifreturn trueendfunctionfunction MmgL_AtkAct takes nothing returns nothinglocal unit u=GetAttacker()local location loclocal group glocal real dmglocal real area=250.
call TriggerSleepAction(.0)set dmg=(GetHeroInt(udg_Mmg_Unit,true)*1.5)call Dynamic_Sound("Abilities\\Spells\\Other\\Monsoon\\MonsoonLightningHit.wav")
set loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u00C',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A07T')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h091',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h091',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h08T',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call EnumDestructablesInCircleBJ(area,loc,function TreeKiller)set g=GetUnitsInRangeOfLocMatching(area,loc,Condition(function Mmg_GroupCond))call RemoveLocation(loc)
set loc=null
call GroupRemoveUnit(g,u)call ForGroup(g,function Mmg_GroupAct)call DestroyGroup(g)
set g=nullcall UnitPureDamageTarget(udg_Mmg_Unit,u,dmg)set u=nullendfunctionfunction MmgL_Cond takes nothing returns boolean
if(IsUnitType(GetTriggerUnit(),UNIT_TYPE_HERO)==false)thenreturn false
elseif(IsUnitAlly(GetTriggerUnit(),udg_Mmg_Own))then
return false
elseif(GetUnitAbilityLevel(GetTriggerUnit(),udg_GlobalSkill[0])!=0)thenreturn false
elseif(udg_Mmg_Int[0]<GetRandomInt(1,'d'))thenreturn false
endifreturn trueendfunctionfunction MmgL_Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local location loclocal group glocal real dmglocal real area=250.
call TriggerSleepAction(.0)set dmg=I2R(GetHeroInt(udg_Mmg_Unit,true))*1.5call Dynamic_Sound("Abilities\\Spells\\Other\\Monsoon\\MonsoonLightningHit.wav")
set loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u00C',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A07T')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h091',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h091',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h08T',udg_Mmg_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call SetUnitScalePercent(bj_lastCreatedUnit,120.,120.,120.)call EnumDestructablesInCircleBJ(area,loc,function TreeKiller)set g=GetUnitsInRangeOfLocMatching(area,loc,Condition(function Mmg_GroupCond))call RemoveLocation(loc)
set loc=null
call GroupRemoveUnit(g,u)call ForGroup(g,function Mmg_GroupAct)call DestroyGroup(g)
set g=nullcall UnitPureDamageTarget(udg_Mmg_Unit,u,dmg)set u=nullendfunctionfunction InitTrig_MmgL takes nothing returns nothing
set gg_trg_MmgL=CreateTrigger()set udg_Mmg_TrigAtk=CreateTrigger()call DisableTrigger(gg_trg_MmgL)
call DisableTrigger(udg_Mmg_TrigAtk)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MmgL,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_MmgL,Condition(function MmgL_Cond))call TriggerAddAction(gg_trg_MmgL,function MmgL_Act)
call TriggerRegisterAnyUnitEventBJ(udg_Mmg_TrigAtk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_Mmg_TrigAtk,Condition(function MmgL_AtkCond))call TriggerAddAction(udg_Mmg_TrigAtk,function MmgL_AtkAct)endfunctionfunction Trig_Rgo_Func019C takes nothing returns boolean
return(GetSpellAbilityId()=='A0AJ')or(GetSpellAbilityId()=='A0AN')endfunctionfunction Trig_Rgo_Conditions takes nothing returns booleanreturn(Trig_Rgo_Func019C())endfunctionfunction Trig_Rgo_Actions takes nothing returns nothingset udg_Rgo_Unit[0]=GetTriggerUnit()
set udg_Rgo_Skill=GetSpellAbilityId()set udg_Rgo_Loc[0]=GetSpellTargetLoc()set udg_Rgo_Own=GetOwningPlayer(udg_Rgo_Unit[0])
set udg_Rgo_Unit[1]=CreateUnit(udg_Rgo_Own,'h092',GetLocationX(udg_Rgo_Loc[0]),GetLocationY(udg_Rgo_Loc[0]),bj_UNIT_FACING)call RemoveLocation(udg_Rgo_Loc[0])set udg_Rgo_Loc[0]=nullcall DestroyEffect(AddSpecialEffectTarget("LightningT_Dead.mdx",udg_Rgo_Unit[0],"sprite first"))
call DestroyEffect(AddSpecialEffectTarget("LightningT_Dead.mdx",udg_Rgo_Unit[0],"sprite second"))call DestroyEffect(AddSpecialEffectTarget("LightningT_Dead.mdx",udg_Rgo_Unit[0],"sprite third"))
call DestroyEffect(AddSpecialEffectTarget("LightningT_Dead.mdx",udg_Rgo_Unit[0],"sprite fourth"))set udg_Rgo_Eff=AddSpecialEffectTarget("LightningTailFX.mdl",udg_Rgo_Unit[0],"sprite fifth")
call DisplayText("RAIGO",udg_Rgo_Unit[0],.023,false,$DC,5,5,$FF)
call Dynamic_Sound("Sounds\\Raigo.mp3")set udg_Rgo_Real[0]=1.2set udg_Rgo_Real[2]=7.set udg_Rgo_Int=1call EnableTrigger(gg_trg_RgoL)endfunctionfunction InitTrig_Rgo takes nothing returns nothingset gg_trg_Rgo=CreateTrigger()call TriggerAddCondition(gg_trg_Rgo,Condition(function Trig_Rgo_Conditions))
call TriggerAddAction(gg_trg_Rgo,function Trig_Rgo_Actions)endfunctionfunction Trig_RgoL_Func003Func033A takes nothing returns nothing
local destructable d=GetEnumDestructable()local location locif(GetWidgetLife(d)>0)thenset loc=GetDestructableLoc(d)call CreateNUnitsAtLoc(1,'h091',udg_Rgo_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call KillDestructable(d)
endifset d=nullendfunctionfunction Trig_RgoL_Func003Func034002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Rgo_Own))
endfunctionfunction Trig_RgoL_Func003Func034002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_RgoL_Func003Func034002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_RgoL_Func003Func034002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_RgoL_Func003Func034002003002001(),Trig_RgoL_Func003Func034002003002002())endfunctionfunction Trig_RgoL_Func003Func034002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_RgoL_Func003Func034002003001(),Trig_RgoL_Func003Func034002003002())endfunctionfunction Trig_RgoL_Func003Func037A takes nothing returns nothing
local unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h091',udg_Rgo_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h04U',udg_Rgo_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h04R',udg_Rgo_Own,loc,GetRandomReal(0,360))call SetUnitScalePercent(bj_lastCreatedUnit,600.,600.,600.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
if(IsUnitType(u,UNIT_TYPE_HERO))then
call DisplayText(I2S(R2I(udg_Rgo_Real[0]))+"!",u,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_Rgo_Unit[0],u,udg_Rgo_Real[0],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u=nullendfunctionfunction Trig_RgoL_Func003C takes nothing returns booleanreturn(udg_Rgo_Int<301)and(DistanceBetweenPoints(udg_Rgo_Loc[0],udg_Rgo_Loc[1])<701.)and(IsUnitDeadBJ(udg_Rgo_Unit[0])==false)endfunctionfunction Trig_RgoL_Actions takes nothing returns nothing
set udg_Rgo_Loc[0]=GetUnitLoc(udg_Rgo_Unit[0])set udg_Rgo_Loc[1]=GetUnitLoc(udg_Rgo_Unit[1])if(Trig_RgoL_Func003C())then
call SetUnitState(udg_Rgo_Unit[0],UNIT_STATE_LIFE,(GetWidgetLife(udg_Rgo_Unit[0])+udg_Rgo_Real[2]))set udg_Rgo_Real[1]=(udg_Rgo_Real[0]*I2R(udg_Rgo_Int))call SetUnitScalePercent(udg_Rgo_Unit[1],udg_Rgo_Real[1],udg_Rgo_Real[1],udg_Rgo_Real[1])call SetUnitFlyHeight(udg_Rgo_Unit[1],(udg_Rgo_Real[0]*I2R(udg_Rgo_Int)),.0)
call SetUnitPositionLoc(udg_Rgo_Unit[1],udg_Rgo_Loc[1])call IssueTargetOrderById(udg_Rgo_Unit[1],$D0106,udg_Rgo_Unit[0])set udg_Rgo_Real[1]=(3.*I2R(udg_Rgo_Int))call CreateNUnitsAtLoc(1,'h04V',udg_Rgo_Own,udg_Rgo_Loc[1],bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,udg_Rgo_Real[1],udg_Rgo_Real[1],udg_Rgo_Real[1])
call SetUnitFlyHeight(bj_lastCreatedUnit,(2.3*I2R(udg_Rgo_Int)),.0)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Rgo_Loc[0])set udg_Rgo_Loc[0]=nullcall RemoveLocation(udg_Rgo_Loc[1])set udg_Rgo_Loc[1]=nullset udg_Rgo_Int=(udg_Rgo_Int+1)else
call DisableTrigger(GetTriggeringTrigger())if(udg_Rgo_Int>300)thencall Dynamic_GroupShake(GetLocationX(udg_Rgo_Loc[1]),GetLocationY(udg_Rgo_Loc[1]),udg_CameraShakeTime,udg_CameraShakePow,3500.,null)
call RemoveLocation(udg_Rgo_Loc[0])set udg_Rgo_Loc[0]=nullcall Dynamic_Sound("Abilities\\Spells\\Other\\Monsoon\\MonsoonLightningHit.wav")
call CreateNUnitsAtLoc(1,'h03E',udg_Rgo_Own,udg_Rgo_Loc[1],bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$E6,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call CreateNUnitsAtLoc(1,'h03E',udg_Rgo_Own,udg_Rgo_Loc[1],bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$E6,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call CreateNUnitsAtLoc(1,'h03E',udg_Rgo_Own,udg_Rgo_Loc[1],bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$E6,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call RemoveLocation(udg_Rgo_Loc[1])set udg_Rgo_Loc[1]=nullset udg_Rgo_Int=1set udg_Rgo_Loc[1]=GetUnitLoc(udg_Rgo_Unit[1])loop
call CreateNUnitsAtLoc(1,'h00E',udg_Rgo_Own,udg_Rgo_Loc[1],GetRandomReal(0,360.))call SetUnitFlyHeight(bj_lastCreatedUnit,I2R((udg_Rgo_Int*$8F)),.0)call SetUnitScalePercent(bj_lastCreatedUnit,1600.,1600.,1600.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,(10.*I2R(udg_Rgo_Int)))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)set udg_Rgo_Int=udg_Rgo_Int+1exitwhen udg_Rgo_Int>6endloopset udg_Rgo_Real[0]=((27.5+(2.5*I2R(GetUnitAbilityLevel(udg_Rgo_Unit[0],udg_Rgo_Skill))))*I2R(GetHeroInt(udg_Rgo_Unit[0],true)))
set udg_Rgo_Real[1]=3000.call EnumDestructablesInCircleBJ(udg_Rgo_Real[1],udg_Rgo_Loc[1],function Trig_RgoL_Func003Func033A)set udg_Rgo_Group=GetUnitsInRangeOfLocMatching(udg_Rgo_Real[1],udg_Rgo_Loc[1],Condition(function Trig_RgoL_Func003Func034002003))call RemoveLocation(udg_Rgo_Loc[1])set udg_Rgo_Loc[1]=nullcall ForGroupBJ(udg_Rgo_Group,function Trig_RgoL_Func003Func037A)call DestroyGroup(udg_Rgo_Group)
set udg_Rgo_Group=nullelse
call RemoveLocation(udg_Rgo_Loc[0])set udg_Rgo_Loc[0]=nullcall RemoveLocation(udg_Rgo_Loc[1])set udg_Rgo_Loc[1]=nullendifcall DestroyEffect(udg_Rgo_Eff)set udg_Rgo_Eff=null
call RemoveUnit(udg_Rgo_Unit[1])
set udg_Rgo_Own=null
set udg_Rgo_Unit[0]=null
set udg_Rgo_Unit[1]=null
set udg_Rgo_Real[0]=.0set udg_Rgo_Real[1]=.0set udg_Rgo_Real[2]=.0set udg_Rgo_Int=0set udg_Rgo_Skill=0endifendfunctionfunction InitTrig_RgoL takes nothing returns nothing
set gg_trg_RgoL=CreateTrigger()call DisableTrigger(gg_trg_RgoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RgoL,.04)call TriggerAddAction(gg_trg_RgoL,function Trig_RgoL_Actions)endfunctionfunction AI_Deidara_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='E006')endfunctionfunction AI_Deidara_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='E006')
endfunctionfunction AI_Deidara_AttackedCond takes nothing returns booleanif(not AI_Deidara_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Deidara_AttackerCond takes nothing returns booleanif(not AI_Deidara_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Deidara_CondOR takes nothing returns boolean
return(AI_Deidara_AttackedCond()or AI_Deidara_AttackerCond())endfunctionfunction AI_Deidara_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Deidara_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Deidara_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Deidara_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0AT')call SelectHeroSkill(AI_1,'A0AU')call SelectHeroSkill(AI_1,'A0AS')call SelectHeroSkill(AI_1,'A0AR')call SelectHeroSkill(AI_1,'A0AQ')call SelectHeroSkill(AI_1,'A0AO')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifcall IssueImmediateOrderById(AI_1,$D022E)set AI_Point3=GetUnitLoc(AI_2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point3)call IssueImmediateOrderById(AI_1,$D026C)set AI_Attacker=falseendifcall IssuePointOrderByIdLoc(AI_1,$D0079,AI_Point3)endifcall IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point3)call RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Deidara takes nothing returns nothingset udg_AI_Trig[23]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[23],Condition(function AI_Deidara_Cond))call TriggerAddAction(udg_AI_Trig[23],function AI_Deidara_Act)endfunctionfunction Trig_C13_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AV')endfunctionfunction Trig_C13_Actions takes nothing returns nothingset udg_C13_Unit=GetTriggerUnit()set udg_C13_Loc[0]=GetSpellTargetLoc()set udg_C13_Loc[1]=GetUnitLoc(udg_C13_Unit)set udg_C13_Real[0]=AngleBetweenPoints(udg_C13_Loc[1],udg_C13_Loc[0])set udg_C13_Real[1]=DistanceBetweenPoints(udg_C13_Loc[0],udg_C13_Loc[1])
set udg_C13_Real[2]=(udg_C13_Real[1]/ 1200.)
call RemoveLocation(udg_C13_Loc[0])set udg_C13_Loc[0]=nullcall RemoveLocation(udg_C13_Loc[1])set udg_C13_Loc[1]=nullcall PauseSystem(udg_C13_Unit,true)call UnitAddAbility(udg_C13_Unit,udg_GlobalSkill[7])
call SetUnitAnimation(udg_C13_Unit,"morph")call SetUnitTimeScale(udg_C13_Unit,(4.-udg_C13_Real[2]))
set udg_C13_Real[2]=32.set udg_C13_Real[1]=I2R(R2I(udg_C13_Real[1]/ udg_C13_Real[2]))set udg_C13_Real[3]=150.
call TriggerSleepAction(.1)call SetUnitPathing(udg_C13_Unit,false)call SetUnitTimeScale(udg_C13_Unit,1.)call EnableTrigger(gg_trg_C13L)endfunctionfunction InitTrig_C13 takes nothing returns nothingset gg_trg_C13=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_C13,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_C13,Condition(function Trig_C13_Conditions))
call TriggerAddAction(gg_trg_C13,function Trig_C13_Actions)endfunctionfunction Trig_C13L_Func001C takes nothing returns booleanreturn(IsUnitDeadBJ(udg_C13_Unit)==false)and(udg_C13_Real[1]>.0)
endfunctionfunction Trig_C13L_Actions takes nothing returns nothing
if(Trig_C13L_Func001C())then
set udg_C13_Loc[0]=GetUnitLoc(udg_C13_Unit)set udg_C13_Loc[1]=PolarProjectionBJ(udg_C13_Loc[0],udg_C13_Real[2],udg_C13_Real[0])
call RemoveLocation(udg_C13_Loc[0])set udg_C13_Loc[0]=nullif(IsTerrainPathable(GetLocationX(udg_C13_Loc[1]),GetLocationY(udg_C13_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(udg_C13_Real[3],udg_C13_Loc[1],function TreeKiller)
call SetUnitX(udg_C13_Unit,GetLocationX(udg_C13_Loc[1]))
call SetUnitY(udg_C13_Unit,GetLocationY(udg_C13_Loc[1]))
else
set udg_C13_Real[1]=1.endifif(udg_C13_Real[1]==7.)thenset udg_C13_Bool=truecall UnitRemoveAbility(udg_C13_Unit,udg_GlobalSkill[7])call PauseSystem(udg_C13_Unit,false)
endifcall RemoveLocation(udg_C13_Loc[1])set udg_C13_Loc[1]=nullset udg_C13_Real[1]=(udg_C13_Real[1]-1.)
else
call DisableTrigger(GetTriggeringTrigger())call SetUnitPathing(udg_C13_Unit,true)if(udg_C13_Bool)then
set udg_C13_Bool=falseelse
call UnitRemoveAbility(udg_C13_Unit,udg_GlobalSkill[7])call PauseSystem(udg_C13_Unit,false)
endifif(udg_C13_Real[1]==.0)thencall SetUnitAnimation(udg_C13_Unit,"stand")endifset udg_C13_Unit=nullset udg_C13_Real[0]=.0set udg_C13_Real[1]=.0set udg_C13_Real[2]=.0set udg_C13_Real[3]=.0endifendfunctionfunction InitTrig_C13L takes nothing returns nothing
set gg_trg_C13L=CreateTrigger()call DisableTrigger(gg_trg_C13L)
call TriggerRegisterTimerEventPeriodic(gg_trg_C13L,.04)call TriggerAddAction(gg_trg_C13L,function Trig_C13L_Actions)endfunctionfunction C1_Clear takes nothing returns nothingcall UnitRemoveAbility(udg_C1_Unit,'A074')call SetPlayerAbilityAvailable(udg_C1_Own,'A0AO',true)call DisableTrigger(udg_C1_TrigDie)call DisableTrigger(udg_C1_TrigAtk)call DisableTrigger(gg_trg_C1_Bomb)call GroupClear(udg_C1_GroupDummy)set udg_C1_Own=nullset udg_C1_Unit=null
set udg_C1_Real[0]=.0set udg_C1_Real[1]=.0set udg_C1_Real[2]=.0set udg_C1_Real[3]=.0set udg_C1_Int[0]=0set udg_C1_Int[1]=0set udg_C1_Type=0endfunctionfunction C1_Die_GroupCond takes nothing returns booleanif(IsUnitAlly(GetFilterUnit(),udg_C1_Own))thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<1)then
return false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction C1_Die_GroupAct takes nothing returns nothinglocal unit u=GetEnumUnit()local location loccall UnitDamageTarget(udg_C1_Unit,u,udg_C1_Real[0],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u003',udg_C1_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],bj_lastCreatedUnit,5)
call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction C1_Die_Cond takes nothing returns booleanreturn(GetUnitTypeId(GetDyingUnit())==udg_C1_Type)endfunctionfunction C1_Die_Act takes nothing returns nothinglocal unit u=GetDyingUnit()local location loc=GetUnitLoc(u)
local group gcall DestroyEffect(AddSpecialEffectLoc("DeidaraMissile.mdl",loc))call CreateNUnitsAtLoc(1,'h095',udg_C1_Own,loc,GetRandomReal(0,360.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)call EnumDestructablesInCircleBJ(udg_C1_Real[2],loc,function TreeKiller)
set g=GetUnitsInRangeOfLocMatching(udg_C1_Real[2],loc,Condition(function C1_Die_GroupCond))call RemoveLocation(loc)
set loc=null
call ForGroup(g,function C1_Die_GroupAct)call DestroyGroup(g)
set g=nullset u=nullset udg_C1_Int[1]=udg_C1_Int[1]+1if(udg_C1_Int[1]==udg_C1_Int[0])then
call C1_Clear()endifendfunctionfunction C1_Atk_Cond takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==udg_C1_Type)endfunctionfunction C1_Atk_Act takes nothing returns nothinglocal unit u=GetAttacker()call UnitAddAbility(u,'A005')call KillUnit(u)
set u=nullendfunctionfunction Trig_C1_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AO')endfunctionfunction Trig_C1_Actions takes nothing returns nothingset udg_C1_Unit=GetTriggerUnit()
call DisplayText("C1",udg_C1_Unit,.023,false,$FF,$FF,$FF,$FF)set udg_C1_Int[0]=GetUnitAbilityLevel(udg_C1_Unit,'A0AO')set udg_C1_Real[0]=120.+I2R(GetHeroInt(udg_C1_Unit,true))set udg_C1_Int[0]=(udg_C1_Int[0]+2)set udg_C1_Real[1]=GetUnitFacing(udg_C1_Unit)set udg_C1_Real[2]=250.set udg_C1_Own=GetOwningPlayer(udg_C1_Unit)set udg_C1_Int[1]=1set udg_C1_Type='h094'set udg_C1_Loc[0]=GetUnitLoc(udg_C1_Unit)loop
set udg_C1_Real[3]=(udg_C1_Real[1]+GetRandomReal(-70.,69.))set udg_C1_Loc[1]=PolarProjectionBJ(udg_C1_Loc[0],GetRandomReal(50.,120.),udg_C1_Real[3])call CreateNUnitsAtLoc(1,udg_C1_Type,udg_C1_Own,udg_C1_Loc[1],udg_C1_Real[3])call SelectUnitAddForPlayer(bj_lastCreatedUnit,udg_C1_Own)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call GroupAddUnit(udg_C1_GroupDummy,bj_lastCreatedUnit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call RemoveLocation(udg_C1_Loc[1])set udg_C1_Loc[1]=nullset udg_C1_Int[1]=udg_C1_Int[1]+1exitwhen udg_C1_Int[1]>udg_C1_Int[0]
endloopcall RemoveLocation(udg_C1_Loc[0])set udg_C1_Loc[0]=nullset udg_C1_Int[1]=0call EnableTrigger(udg_C1_TrigDie)call EnableTrigger(udg_C1_TrigAtk)call EnableTrigger(gg_trg_C1_Bomb)call SetPlayerAbilityAvailable(udg_C1_Own,'A0AO',false)call UnitAddAbility(udg_C1_Unit,'A074')endfunctionfunction InitTrig_C1 takes nothing returns nothingset gg_trg_C1=CreateTrigger()call TriggerAddCondition(gg_trg_C1,Condition(function Trig_C1_Conditions))call TriggerAddAction(gg_trg_C1,function Trig_C1_Actions)set udg_C1_TrigDie=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(udg_C1_TrigDie,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(udg_C1_TrigDie,Condition(function C1_Die_Cond))
call TriggerAddAction(udg_C1_TrigDie,function C1_Die_Act)set udg_C1_TrigAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(udg_C1_TrigAtk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_C1_TrigAtk,Condition(function C1_Atk_Cond))
call TriggerAddAction(udg_C1_TrigAtk,function C1_Atk_Act)endfunctionfunction Trig_C1_Bomb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A074')endfunctionfunction Trig_C1_Bomb_GroupAct takes nothing returns nothing
local unit u=GetEnumUnit()call UnitAddAbility(u,'A005')call KillUnit(u)
set u=nullendfunctionfunction Trig_C1_Bomb_Actions takes nothing returns nothinglocal group glocal location loccall IssueImmediateOrderById(udg_C1_Unit,$D0004)
call SetUnitAnimation(udg_C1_Unit,"spell two")call DisplayText("!",udg_C1_Unit,.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Deidara\\DeidaraBomb.wav",GetUnitX(udg_C1_Unit),GetUnitY(udg_C1_Unit))set loc=GetUnitLoc(GetTriggerUnit())
call RemoveLocation(loc)
set loc=null
set g=CreateGroup()call GroupAddGroup(udg_C1_GroupDummy,g)call ForGroup(g,function Trig_C1_Bomb_GroupAct)call DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_C1_Bomb takes nothing returns nothingset gg_trg_C1_Bomb=CreateTrigger()call DisableTrigger(gg_trg_C1_Bomb)call TriggerAddCondition(gg_trg_C1_Bomb,Condition(function Trig_C1_Bomb_Conditions))
call TriggerAddAction(gg_trg_C1_Bomb,function Trig_C1_Bomb_Actions)endfunctionfunction Trig_C12_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AQ')endfunctionfunction Trig_C12_Actions takes nothing returns nothingset udg_C12_Unit[0]=GetTriggerUnit()
set udg_C12_Loc[0]=GetSpellTargetLoc()set udg_C12_RealLoc[0]=GetLocationX(udg_C12_Loc[0])set udg_C12_RealLoc[1]=GetLocationY(udg_C12_Loc[0])set udg_C12_Loc[1]=GetUnitLoc(udg_C12_Unit[0])set udg_C12_Real[0]=AngleBetweenPoints(udg_C12_Loc[1],udg_C12_Loc[0])set udg_C12_Loc[2]=PolarProjectionBJ(udg_C12_Loc[1],GetRandomReal(-220.,-400.),udg_C12_Real[0])set udg_C12_Loc[3]=PolarProjectionBJ(udg_C12_Loc[2],GetRandomReal(-450.,449.),(udg_C12_Real[0]+60.))
set udg_C12_Real[0]=AngleBetweenPoints(udg_C12_Loc[3],udg_C12_Loc[0])set udg_C12_Real[2]=42.set udg_C12_Int=R2I(DistanceBetweenPoints(udg_C12_Loc[3],udg_C12_Loc[0])/ udg_C12_Real[2])-1
call RemoveLocation(udg_C12_Loc[0])set udg_C12_Loc[0]=nullcall RemoveLocation(udg_C12_Loc[1])set udg_C12_Loc[1]=nullcall RemoveLocation(udg_C12_Loc[2])set udg_C12_Loc[2]=nullset udg_C12_Own=GetOwningPlayer(udg_C12_Unit[0])
set udg_C12_Unit[1]=CreateUnit(udg_C12_Own,'h097',GetLocationX(udg_C12_Loc[3]),GetLocationY(udg_C12_Loc[3]),udg_C12_Real[0])
call RemoveLocation(udg_C12_Loc[3])set udg_C12_Loc[3]=nullcall DisplayText("C1",udg_C12_Unit[0],.023,true,$FF,$FF,$FF,$FF)
set udg_C12_Real[1]=((250.+(100.*I2R(GetUnitAbilityLevel(udg_C12_Unit[0],'A0AQ'))))+((2.+(1.*I2R(GetUnitAbilityLevel(udg_C12_Unit[0],'A0AQ'))))*I2R(GetHeroInt(udg_C12_Unit[0],true))))set udg_C12_Real[3]=350.
call SetUnitFlyHeight(udg_C12_Unit[1],100.,300.)
call EnableTrigger(gg_trg_C12L)endfunctionfunction InitTrig_C12 takes nothing returns nothingset gg_trg_C12=CreateTrigger()call TriggerAddCondition(gg_trg_C12,Condition(function Trig_C12_Conditions))
call TriggerAddAction(gg_trg_C12,function Trig_C12_Actions)endfunctionfunction Trig_C12L_Func001Func021002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_C12_Own))
endfunctionfunction Trig_C12L_Func001Func021002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_C12L_Func001Func021002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_C12L_Func001Func021002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_C12L_Func001Func021002003002001(),Trig_C12L_Func001Func021002003002002())endfunctionfunction Trig_C12L_Func001Func021002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_C12L_Func001Func021002003001(),Trig_C12L_Func001Func021002003002())endfunctionfunction Trig_C12L_Func001Func024A takes nothing returns nothing
local unit u=GetEnumUnit()local location loccall UnitDamageTarget(udg_C12_Unit[0],u,udg_C12_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u003',udg_C12_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],bj_lastCreatedUnit,3)
call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction Trig_C12L_Func001C takes nothing returns booleanreturn(udg_C12_Int>0)endfunctionfunction Trig_C12L_Actions takes nothing returns nothing
if(Trig_C12L_Func001C())then
set udg_C12_Loc[0]=GetUnitLoc(udg_C12_Unit[1])set udg_C12_Loc[1]=PolarProjectionBJ(udg_C12_Loc[0],udg_C12_Real[2],udg_C12_Real[0])
call RemoveLocation(udg_C12_Loc[0])set udg_C12_Loc[0]=nullcall SetUnitPositionLoc(udg_C12_Unit[1],udg_C12_Loc[1])call RemoveLocation(udg_C12_Loc[1])set udg_C12_Loc[1]=nullset udg_C12_Int=(udg_C12_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_C12_Unit[1])
set udg_C12_Loc[0]=Location(udg_C12_RealLoc[0],udg_C12_RealLoc[1])call CreateNUnitsAtLoc(1,'h02L',udg_C12_Own,udg_C12_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)call CreateNUnitsAtLoc(1,'h087',udg_C12_Own,udg_C12_Loc[0],bj_UNIT_FACING)call SetUnitTimeScalePercent(bj_lastCreatedUnit,200.)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)call CreateNUnitsAtLoc(1,'h082',udg_C12_Own,udg_C12_Loc[0],bj_UNIT_FACING)call SetUnitTimeScalePercent(bj_lastCreatedUnit,200.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call EnumDestructablesInCircleBJ(udg_C12_Real[3],udg_C12_Loc[0],function TreeKiller)
set udg_C12_Group=GetUnitsInRangeOfLocMatching(udg_C12_Real[3],udg_C12_Loc[0],Condition(function Trig_C12L_Func001Func021002003))call RemoveLocation(udg_C12_Loc[0])set udg_C12_Loc[0]=nullcall ForGroupBJ(udg_C12_Group,function Trig_C12L_Func001Func024A)call DestroyGroup(udg_C12_Group)
set udg_C12_Group=nullset udg_C12_Own=null
set udg_C12_Unit[0]=null
set udg_C12_Unit[1]=null
set udg_C12_RealLoc[0]=.0set udg_C12_RealLoc[1]=.0set udg_C12_Real[0]=.0set udg_C12_Real[1]=.0set udg_C12_Real[2]=.0set udg_C12_Real[3]=.0set udg_C12_Int=0endifendfunctionfunction InitTrig_C12L takes nothing returns nothing
set gg_trg_C12L=CreateTrigger()call DisableTrigger(gg_trg_C12L)
call TriggerRegisterTimerEventPeriodic(gg_trg_C12L,.04)call TriggerAddAction(gg_trg_C12L,function Trig_C12L_Actions)endfunctionfunction Trig_C3_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AR')endfunctionfunction Trig_C3_Actions takes nothing returns nothingset udg_C3_Unit[0]=GetTriggerUnit()set udg_C3_Loc=GetSpellTargetLoc()set udg_C3_Own=GetOwningPlayer(udg_C3_Unit[0])set udg_C3_Unit[1]=CreateUnit(udg_C3_Own,'h098',GetLocationX(udg_C3_Loc),GetLocationY(udg_C3_Loc),bj_UNIT_FACING)call RemoveLocation(udg_C3_Loc)set udg_C3_Loc=nullcall DisplayText("C3",udg_C3_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_C3_Real[0]=796.set udg_C3_Real[1]=4.call EnableTrigger(gg_trg_C3L)endfunctionfunction InitTrig_C3 takes nothing returns nothingset gg_trg_C3=CreateTrigger()call TriggerAddCondition(gg_trg_C3,Condition(function Trig_C3_Conditions))call TriggerAddAction(gg_trg_C3,function Trig_C3_Actions)endfunctionfunction Trig_C3L_Func001Func052002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_C3_Own))endfunctionfunction Trig_C3L_Func001Func052002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_C3L_Func001Func052002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_C3L_Func001Func052002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_C3L_Func001Func052002003002001(),Trig_C3L_Func001Func052002003002002())endfunctionfunction Trig_C3L_Func001Func052002003 takes nothing returns boolean
return GetBooleanAnd(Trig_C3L_Func001Func052002003001(),Trig_C3L_Func001Func052002003002())endfunctionfunction Trig_C3L_Func001Func055A takes nothing returns nothingset udg_C3_Unit[2]=GetEnumUnit()
set udg_C3_Loc=GetUnitLoc(udg_C3_Unit[2])call CreateNUnitsAtLoc(1,'h081',udg_C3_Own,udg_C3_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,220.,220.,220.)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.8)call RemoveLocation(udg_C3_Loc)set udg_C3_Loc=nullcall UnitDamageTarget(udg_C3_Unit[0],udg_C3_Unit[2],udg_C3_Real[0],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_C3_Unit[2]=nullendfunctionfunction Trig_C3L_Func001C takes nothing returns boolean
return(udg_C3_Real[0]>.0)endfunctionfunction Trig_C3L_Actions takes nothing returns nothingif(Trig_C3L_Func001C())thencall SetUnitFlyHeight(udg_C3_Unit[1],udg_C3_Real[0],.0)set udg_C3_Real[0]=(udg_C3_Real[0]-udg_C3_Real[1])if(udg_C3_Real[0]==600.)then
call SetUnitScalePercent(udg_C3_Unit[1],2000.,2000.,2000.)set udg_C3_Loc=GetUnitLoc(udg_C3_Unit[1])call CreateNUnitsAtLoc(1,'h02C',udg_C3_Own,udg_C3_Loc,bj_UNIT_FACING)call SetUnitFlyHeight(bj_lastCreatedUnit,700.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_C3_Loc)set udg_C3_Loc=nullset udg_C3_Real[1]=36.elseif(udg_C3_Real[0]==528.)then
set udg_C3_Loc=GetUnitLoc(udg_C3_Unit[1])call CreateNUnitsAtLoc(1,'h087',udg_C3_Own,udg_C3_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,500.,500.,500.)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.5)call RemoveLocation(udg_C3_Loc)set udg_C3_Loc=nullelseif(udg_C3_Real[0]==276.)then
call DisplayText("!",udg_C3_Unit[0],.023,true,$FF,$FF,$FF,$FF)if(udg_C13_Unit==null)thencall SetUnitAnimation(udg_C3_Unit[0],"spell two")else
call SetUnitAnimation(udg_C3_Unit[0],"spell alternate two")endifcall SoundPatch_Spell(udg_soundPatch_Naruto+"\\Deidara\\DeidaraBomb.wav",GetUnitX(udg_C3_Unit[0]),GetUnitY(udg_C3_Unit[0]))endifelse
call DisableTrigger(GetTriggeringTrigger())set udg_C3_Real[0]=((6.5+(1.5*I2R(GetUnitAbilityLevel(udg_C3_Unit[0],'A0AR'))))*I2R(GetHeroInt(udg_C3_Unit[0],true)))set udg_C3_Real[1]=900.set udg_C3_Loc=GetUnitLoc(udg_C3_Unit[1])call RemoveUnit(udg_C3_Unit[1])call CreateNUnitsAtLoc(1,'h083',udg_C3_Own,udg_C3_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,220.,220.,220.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,130.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',15.)call CreateNUnitsAtLoc(1,'h02L',udg_C3_Own,udg_C3_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,400.,400.,400.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)call CreateNUnitsAtLoc(1,'h082',udg_C3_Own,udg_C3_Loc,GetRandomReal(0,360.))
call SetUnitScalePercent(bj_lastCreatedUnit,400.,400.,400.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h082',udg_C3_Own,udg_C3_Loc,GetRandomReal(0,360.))
call SetUnitScalePercent(bj_lastCreatedUnit,400.,400.,400.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h082',udg_C3_Own,udg_C3_Loc,GetRandomReal(0,360.))
call SetUnitScalePercent(bj_lastCreatedUnit,400.,400.,400.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call Dynamic_GroupShake(GetLocationX(udg_C3_Loc),GetLocationY(udg_C3_Loc),1.2,udg_CameraShakePow,udg_CameraArea,null)call EnumDestructablesInCircleBJ(udg_C3_Real[1],udg_C3_Loc,function TreeKiller)set udg_C3_Group=GetUnitsInRangeOfLocMatching(udg_C3_Real[1],udg_C3_Loc,Condition(function Trig_C3L_Func001Func052002003))call RemoveLocation(udg_C3_Loc)set udg_C3_Loc=nullcall ForGroupBJ(udg_C3_Group,function Trig_C3L_Func001Func055A)call DestroyGroup(udg_C3_Group)set udg_C3_Group=nullset udg_C3_Own=nullset udg_C3_Unit[0]=nullset udg_C3_Unit[1]=nullset udg_C3_Real[0]=.0set udg_C3_Real[1]=.0endifendfunctionfunction InitTrig_C3L takes nothing returns nothingset gg_trg_C3L=CreateTrigger()call DisableTrigger(gg_trg_C3L)call TriggerRegisterTimerEventPeriodic(gg_trg_C3L,.04)call TriggerAddAction(gg_trg_C3L,function Trig_C3L_Actions)endfunctionfunction Trig_C4_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AS')endfunctionfunction Trig_C4_Actions takes nothing returns nothingset udg_C4_Unit[0]=GetTriggerUnit()set udg_C4_Loc=GetSpellTargetLoc()set udg_C4_Own=GetOwningPlayer(udg_C4_Unit[0])set udg_C4_Unit[1]=CreateUnit(udg_C4_Own,'h099',GetLocationX(udg_C4_Loc),GetLocationY(udg_C4_Loc),bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'h02C',udg_C4_Own,udg_C4_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_C4_Loc)set udg_C4_Loc=nullcall DisplayText("C4",udg_C4_Unit[0],.023,false,$FF,$FF,$FF,$FF)
set udg_C4_Real[0]=1.54set udg_C4_Real[1]=.04set udg_C4_Real[2]=4.call SetUnitTimeScale(udg_C4_Unit[1],.5)
call TriggerSleepAction(.1)call SetUnitAnimation(udg_C4_Unit[1],"spell four")call EnableTrigger(gg_trg_C4L)endfunctionfunction InitTrig_C4 takes nothing returns nothingset gg_trg_C4=CreateTrigger()call TriggerAddCondition(gg_trg_C4,Condition(function Trig_C4_Conditions))call TriggerAddAction(gg_trg_C4,function Trig_C4_Actions)endfunctionfunction Trig_C4L_Func001Func015002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_C4_Own))endfunctionfunction Trig_C4L_Func001Func015002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_C4L_Func001Func015002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_C4L_Func001Func015002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_C4L_Func001Func015002003002001(),Trig_C4L_Func001Func015002003002002())endfunctionfunction Trig_C4L_Func001Func015002003 takes nothing returns boolean
return GetBooleanAnd(Trig_C4L_Func001Func015002003001(),Trig_C4L_Func001Func015002003002())endfunctionfunction Trig_C4L_Func001Func018A takes nothing returns nothinglocal unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'u003',udg_C4_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[2],bj_lastCreatedUnit,7)
call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call GroupAddUnit(udg_C4_Group2,u)set u=nullendfunctionfunction Trig_C4L_Func001C takes nothing returns boolean
return(udg_C4_Real[2]>udg_C4_Real[0])endfunctionfunction Trig_C4L_Actions takes nothing returns nothingif(Trig_C4L_Func001C())thenset udg_C4_Real[0]=(udg_C4_Real[0]+udg_C4_Real[1])call SetUnitScale(udg_C4_Unit[1],udg_C4_Real[0],udg_C4_Real[0],udg_C4_Real[0])else
call DisableTrigger(GetTriggeringTrigger())set udg_C4_Real[2]=60.set udg_C4_Real[0]=((800.+(200.*I2R(GetUnitAbilityLevel(udg_C4_Unit[0],'A0AS'))))/ udg_C4_Real[2])set udg_C4_Real[1]=900.set udg_C4_Loc=GetUnitLoc(udg_C4_Unit[1])call CreateNUnitsAtLoc(1,'h01L',udg_C4_Own,udg_C4_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,10.,10.,10.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',15.)call CreateNUnitsAtLoc(1,'h08V',udg_C4_Own,udg_C4_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)set udg_C4_Group=GetUnitsInRangeOfLocMatching(udg_C4_Real[1],udg_C4_Loc,Condition(function Trig_C4L_Func001Func015002003))call RemoveLocation(udg_C4_Loc)set udg_C4_Loc=nullcall ForGroupBJ(udg_C4_Group,function Trig_C4L_Func001Func018A)call DestroyGroup(udg_C4_Group)set udg_C4_Group=nullcall RemoveUnit(udg_C4_Unit[1])call EnableTrigger(gg_trg_C4L2)endifendfunctionfunction InitTrig_C4L takes nothing returns nothingset gg_trg_C4L=CreateTrigger()call DisableTrigger(gg_trg_C4L)call TriggerRegisterTimerEventPeriodic(gg_trg_C4L,.06)call TriggerAddAction(gg_trg_C4L,function Trig_C4L_Actions)endfunctionfunction Trig_C4L2_Func001Func004A takes nothing returns nothing
local unit u=GetEnumUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
call UnitPureDamageTarget(udg_C4_Unit[0],u,udg_C4_Real[0])if(GetUnitState(u,UNIT_STATE_LIFE)<1)thencall GroupRemoveUnit(udg_C4_Group2,u)call UnitApplyTimedLife(CreateUnit(udg_C4_Own,'h095',x,y,GetRandomReal(0,360)),'BTLF',3.5)endifset u=nullendfunctionfunction Trig_C4L2_Func001C takes nothing returns booleanreturn(udg_C4_Real[2]>.0)endfunctionfunction Trig_C4L2_Actions takes nothing returns nothing
if(Trig_C4L2_Func001C())then
set udg_C4_Real[2]=(udg_C4_Real[2]-1.)set udg_C4_Group=CreateGroup()call GroupAddGroup(udg_C4_Group2,udg_C4_Group)call ForGroupBJ(udg_C4_Group,function Trig_C4L2_Func001Func004A)
call DestroyGroup(udg_C4_Group)set udg_C4_Group=nullelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_C4_Group2)set udg_C4_Own=nullset udg_C4_Unit[0]=nullset udg_C4_Real[0]=.0set udg_C4_Real[1]=.0set udg_C4_Real[2]=.0endifendfunctionfunction InitTrig_C4L2 takes nothing returns nothing
set gg_trg_C4L2=CreateTrigger()call DisableTrigger(gg_trg_C4L2)
call TriggerRegisterTimerEventPeriodic(gg_trg_C4L2,.04)call TriggerAddAction(gg_trg_C4L2,function Trig_C4L2_Actions)endfunctionfunction Trig_C0_Func002C takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AT')or(GetSpellAbilityId()=='A0AU')endfunctionfunction Trig_C0_Conditions takes nothing returns booleanreturn(Trig_C0_Func002C())endfunctionfunction Trig_C0_Actions takes nothing returns nothinglocal integer skill=GetSpellAbilityId()set udg_C0_Unit[0]=GetTriggerUnit()call PauseSystem(udg_C0_Unit[0],true)call UnitAddAbility(udg_C0_Unit[0],udg_GlobalSkill[7])call SetUnitAnimation(udg_C0_Unit[0],"spell")set udg_C0_Loc=GetUnitLoc(udg_C0_Unit[0])set udg_C0_Own=GetOwningPlayer(udg_C0_Unit[0])set udg_C0_Unit[1]=CreateUnit(udg_C0_Own,'h03X',GetLocationX(udg_C0_Loc),GetLocationY(udg_C0_Loc),bj_UNIT_FACING)call RemoveLocation(udg_C0_Loc)set udg_C0_Loc=nullcall SetUnitScale(udg_C0_Unit[1],2.,2.,2.)call SetUnitFlyHeight(udg_C0_Unit[1],130.,.0)call SetUnitTimeScale(udg_C0_Unit[1],.22)call DisplayText("C0",udg_C0_Unit[0],.023,false,$DC,5,5,$FF)
set udg_C0_Eff=AddSpecialEffectTarget("BitchAura.mdl",udg_C0_Unit[0],"origin")if(skill=='A0AU')thenset udg_C0_Real[2]=(.3+(.1*I2R(GetUnitAbilityLevel(udg_C0_Unit[0],skill))))set udg_C0_Real[3]=(19.*I2R(GetHeroInt(udg_C0_Unit[0],true)))else
set udg_C0_Real[2]=(.2+(.1*I2R(GetUnitAbilityLevel(udg_C0_Unit[0],skill))))set udg_C0_Real[3]=(16.*I2R(GetHeroInt(udg_C0_Unit[0],true)))endifset skill=0set udg_C0_Int=$FCcall EnableTrigger(gg_trg_C0L)endfunctionfunction InitTrig_C0 takes nothing returns nothingset gg_trg_C0=CreateTrigger()call TriggerAddCondition(gg_trg_C0,Condition(function Trig_C0_Conditions))call TriggerAddAction(gg_trg_C0,function Trig_C0_Actions)endfunctionfunction Trig_C0L_Func001Func033002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_C0_Own))endfunctionfunction Trig_C0L_Func001Func033002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_C0L_Func001Func033002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_C0L_Func001Func033002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_C0L_Func001Func033002003002001(),Trig_C0L_Func001Func033002003002002())endfunctionfunction Trig_C0L_Func001Func033002003 takes nothing returns boolean
return GetBooleanAnd(Trig_C0L_Func001Func033002003001(),Trig_C0L_Func001Func033002003002())endfunctionfunction Trig_C0L_Func001Func036A takes nothing returns nothinglocal unit u=GetEnumUnit()local real dmg=udg_C0_Real[3]+(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,u)*udg_C0_Real[2])if(IsUnitType(u,UNIT_TYPE_HERO))then
call DisplayText(I2S(R2I(dmg))+"!",u,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_C0_Unit[0],u,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set u=nullset dmg=.0endfunctionfunction Trig_C0L_Func001C takes nothing returns boolean
return(IsUnitDeadBJ(udg_C0_Unit[0])==false)and(udg_C0_Int>0)
endfunctionfunction Trig_C0L_Actions takes nothing returns nothingif(Trig_C0L_Func001C())thencall SetUnitVertexColor(udg_C0_Unit[0],udg_C0_Int,udg_C0_Int,udg_C0_Int,$FF)
set udg_C0_Int=(udg_C0_Int-3)if(udg_C0_Int==24)thencall Dynamic_Sound(udg_soundPatch_Naruto+"\\Deidara\\DeidaraBomb.wav")endifelse
call DisableTrigger(GetTriggeringTrigger())call DestroyEffect(udg_C0_Eff)set udg_C0_Eff=nullcall SetUnitVertexColor(udg_C0_Unit[0],$FF,$FF,$FF,$FF)call UnitRemoveAbility(udg_C0_Unit[0],udg_GlobalSkill[7])call PauseSystem(udg_C0_Unit[0],false)call SetUnitTimeScale(udg_C0_Unit[1],2.)
call UnitApplyTimedLife(udg_C0_Unit[1],'BTLF',1.)if(GetWidgetLife(udg_C0_Unit[0])>0)thencall Dynamic_Sound("Sounds\\Explosion.mp3")set udg_C0_Real[0]=1500.
set udg_C0_Loc=GetUnitLoc(udg_C0_Unit[0])set udg_C0_Unit[2]=CreateUnit(udg_C0_Own,'h09A',GetLocationX(udg_C0_Loc),GetLocationY(udg_C0_Loc),bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'h083',udg_C0_Own,udg_C0_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,280.,280.,280.)call SetUnitTimeScalePercent(bj_lastCreatedUnit,130.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',15.)call CreateNUnitsAtLoc(1,'h02L',udg_C0_Own,udg_C0_Loc,bj_UNIT_FACING)call SetUnitScalePercent(bj_lastCreatedUnit,1000.,1000.,1000.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)call CreateNUnitsAtLoc(1,'h03E',udg_C0_Own,udg_C0_Loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$E6,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)call Dynamic_GroupShake(GetLocationX(udg_C0_Loc),GetLocationY(udg_C0_Loc),udg_CameraShakeTime,19.,udg_CameraArea,null)call EnumDestructablesInCircleBJ(udg_C0_Real[0],udg_C0_Loc,function TreeKiller)set udg_C0_Group=GetUnitsInRangeOfLocMatching(udg_C0_Real[0],udg_C0_Loc,Condition(function Trig_C0L_Func001Func033002003))call RemoveLocation(udg_C0_Loc)set udg_C0_Loc=nullcall ForGroupBJ(udg_C0_Group,function Trig_C0L_Func001Func036A)call DestroyGroup(udg_C0_Group)set udg_C0_Group=nullcall SetUnitTimeScale(udg_C0_Unit[2],2.)
call QueueUnitAnimation(udg_C0_Unit[0],"stand")set udg_C0_Real[0]=.0set udg_C0_Real[1]=.0set udg_C0_Real[2]=.0set udg_C0_Real[3]=.0call SetUnitState(udg_C0_Unit[0],UNIT_STATE_LIFE,1.)
call UnitDamageTarget(udg_C0_Unit[0],udg_C0_Unit[0],9999.99,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call TriggerSleepAction(3.)call SetUnitTimeScale(udg_C0_Unit[2],.15)call SetUnitScale(udg_C0_Unit[2],1.8,1.8,1.8)call SetUnitAnimation(udg_C0_Unit[2],"death")call UnitApplyTimedLife(udg_C0_Unit[2],'BTLF',4.)set udg_C0_Unit[2]=nullendifset udg_C0_Own=nullset udg_C0_Unit[0]=nullset udg_C0_Unit[1]=nullset udg_C0_Int=0
endifendfunctionfunction InitTrig_C0L takes nothing returns nothingset gg_trg_C0L=CreateTrigger()call DisableTrigger(gg_trg_C0L)call TriggerRegisterTimerEventPeriodic(gg_trg_C0L,.04)call TriggerAddAction(gg_trg_C0L,function Trig_C0L_Actions)endfunctionfunction AI_Yamamoto_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='U00B' or GetUnitTypeId(GetTriggerUnit())=='U00D')endfunctionfunction AI_Yamamoto_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='U00B' or GetUnitTypeId(GetAttacker())=='U00D')
endfunctionfunction AI_Yamamoto_AttackedCond takes nothing returns booleanif(not AI_Yamamoto_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Yamamoto_AttackerCond takes nothing returns booleanif(not AI_Yamamoto_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Yamamoto_CondOR takes nothing returns booleanreturn(AI_Yamamoto_AttackedCond()or AI_Yamamoto_AttackerCond())endfunctionfunction AI_Yamamoto_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Yamamoto_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Yamamoto_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Yamamoto_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0B2')call SelectHeroSkill(AI_1,'A0B3')call SelectHeroSkill(AI_1,'A0AX')call SelectHeroSkill(AI_1,'A0B0')call SelectHeroSkill(AI_1,'A0AY')call SelectHeroSkill(AI_1,'A0AW')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D007F,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D022E)call IssueImmediateOrderById(AI_1,$D02B7)set AI_Attacker=falseendifendifcall IssueImmediateOrderById(AI_1,$D0080)call RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Yamamoto takes nothing returns nothingset udg_AI_Trig[24]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[24],Condition(function AI_Yamamoto_Cond))call TriggerAddAction(udg_AI_Trig[24],function AI_Yamamoto_Act)endfunctionfunction Trig_Fsw_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AY' or GetSpellAbilityId()=='A0B0')endfunctionfunction Fsw_GroupCond1 takes nothing returns booleanif(IsUnitAlly(GetFilterUnit(),udg_Fsw_Own))thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<1)then
return false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction Fsw_GroupAct1 takes nothing returns nothing
local location loc=GetUnitLoc(GetEnumUnit())
call CreateNUnitsAtLoc(1,'h09B',udg_Fsw_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(loc)
set loc=null
endfunctionfunction Fsw_GroupCond2 takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),'B02F')>0)endfunctionfunction Fsw_GroupAct2 takes nothing returns nothing
set udg_Fsw_Stack=(udg_Fsw_Stack+1)call GroupAddUnit(udg_Fsw_Group,GetEnumUnit())endfunctionfunction Fsw_GroupAct3 takes nothing returns nothing
local unit u=GetEnumUnit()local integer hp=R2I(GetWidgetLife(u))if(hp>0)then
call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",u,"origin"))call UnitPureDamageTarget(udg_Fsw_Unit,u,I2R(udg_Fsw_Dmg))else
set udg_Fsw_Stack=(udg_Fsw_Stack-1)call GroupRemoveUnit(udg_Fsw_Group,u)endifset u=nullendfunctionfunction Fsw_GroupAct4 takes nothing returns nothing
local unit u=GetEnumUnit()local integer hp=R2I(GetWidgetLife(u))if(hp>0)then
call UnitPureDamageTarget(udg_Fsw_Unit,u,I2R(udg_Fsw_Dmg))else
set udg_Fsw_Stack=(udg_Fsw_Stack-1)call GroupRemoveUnit(udg_Fsw_Group,u)endifset u=nullendfunctionfunction Trig_Fsw_Actions takes nothing returns nothinglocal integer skill=GetSpellAbilityId()local real Fsw_Arealocal integer Fsw_Intlocal location Fsw_Loclocal location Fsw_Loc2local group Fsw_Grouplocal integer Fsw_IntMax
set udg_Fsw_Unit=GetTriggerUnit()set Fsw_Area=720.set udg_Fsw_Own=GetOwningPlayer(udg_Fsw_Unit)set Fsw_Loc=GetUnitLoc(udg_Fsw_Unit)
if(skill=='A0AY')thencall CreateNUnitsAtLoc(1,'h096',udg_Fsw_Own,Fsw_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)else
call DisplayText("Nishi Zanjitsu Gokui",udg_Fsw_Unit,.023,false,$FF,$FF,$FF,$FF)
call CreateNUnitsAtLoc(1,'u003',udg_Fsw_Own,Fsw_Loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[4])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[4],bj_lastCreatedUnit,2)
call IssueTargetOrderById(bj_lastCreatedUnit,$D0062,udg_Fsw_Unit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h096',udg_Fsw_Own,Fsw_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$96,50,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)endifcall EnumDestructablesInCircleBJ(Fsw_Area,Fsw_Loc,function TreeKiller)set Fsw_Group=GetUnitsInRangeOfLocMatching(Fsw_Area,Fsw_Loc,Condition(function Fsw_GroupCond1))call RemoveLocation(Fsw_Loc)
set Fsw_Loc=null
call ForGroup(Fsw_Group,function Fsw_GroupAct1)call DestroyGroup(Fsw_Group)
set Fsw_Group=nullif(skill=='A0AY')thencall TriggerSleepAction(.0)set udg_Fsw_Stack=0set Fsw_Loc2=GetUnitLoc(udg_Fsw_Unit)set Fsw_Group=GetUnitsInRangeOfLocMatching(Fsw_Area,Fsw_Loc2,Condition(function Fsw_GroupCond2))
call RemoveLocation(Fsw_Loc2)set Fsw_Loc2=nullcall ForGroup(Fsw_Group,function Fsw_GroupAct2)call DestroyGroup(Fsw_Group)
set Fsw_Group=nullset udg_Fsw_Dmg=(25+($A*GetUnitAbilityLevel(udg_Fsw_Unit,skill)))set Fsw_Int=1loop
exitwhen Fsw_Int>8if(udg_Fsw_Stack!=0)then
set Fsw_Group=CreateGroup()call GroupAddGroup(udg_Fsw_Group,Fsw_Group)call ForGroup(Fsw_Group,function Fsw_GroupAct3)call DestroyGroup(Fsw_Group)
set Fsw_Group=nullcall TriggerSleepAction(.5)else
set Fsw_Int=8endifset Fsw_Int=Fsw_Int+1endloopelse
call EnableTrigger(gg_trg_FswL)set Fsw_Area=300.set Fsw_IntMax=68set udg_Fsw_Dmg=(R2I(12.5*GetHeroStr(udg_Fsw_Unit,true))/ Fsw_IntMax)set Fsw_Int=1loop
exitwhen Fsw_Int>Fsw_IntMaxif(GetWidgetLife(udg_Fsw_Unit)>0)thenset Fsw_Loc2=GetUnitLoc(udg_Fsw_Unit)set Fsw_Group=GetUnitsInRangeOfLocMatching(Fsw_Area,Fsw_Loc2,Condition(function Fsw_GroupCond1))
call RemoveLocation(Fsw_Loc2)set Fsw_Loc2=nullcall ForGroup(Fsw_Group,function Fsw_GroupAct4)call DestroyGroup(Fsw_Group)
set Fsw_Group=nullcall TriggerSleepAction(.0)else
set Fsw_Int=Fsw_IntMaxendifset Fsw_Int=Fsw_Int+1endloopcall UnitRemoveAbility(udg_Fsw_Unit,'B02G')call DisableTrigger(gg_trg_FswL)
set Fsw_IntMax=0
endifcall GroupClear(udg_Fsw_Group)set udg_Fsw_Own=null
set udg_Fsw_Unit=nullset Fsw_Area=.0set udg_Fsw_Dmg=0set Fsw_Int=0set udg_Fsw_Stack=0set skill=0endfunctionfunction InitTrig_Fsw takes nothing returns nothingset gg_trg_Fsw=CreateTrigger()call TriggerAddCondition(gg_trg_Fsw,Condition(function Trig_Fsw_Conditions))
call TriggerAddAction(gg_trg_Fsw,function Trig_Fsw_Actions)endfunctionfunction Trig_FswL_Conditions takes nothing returns booleanreturn((GetKillingUnit()==udg_Fsw_Unit)and(IsUnitType(GetDyingUnit(),UNIT_TYPE_HERO)==false))!=nullendfunctionfunction Trig_FswL_Actions takes nothing returns nothing
local unit u=GetDyingUnit()call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",u,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspiritdone.mdl",u,"chest"))
call SetUnitVertexColor(u,0,0,0,$FF)
set u=nullendfunctionfunction InitTrig_FswL takes nothing returns nothing
set gg_trg_FswL=CreateTrigger()call DisableTrigger(gg_trg_FswL)
call TriggerRegisterAnyUnitEventBJ(gg_trg_FswL,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_FswL,Condition(function Trig_FswL_Conditions))call TriggerAddAction(gg_trg_FswL,function Trig_FswL_Actions)endfunctionfunction Trig_LotCastCond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AX')endfunctionfunction Trig_LotCastAct takes nothing returns nothingcall SetUnitAnimation(GetTriggerUnit(),"stand ready")endfunctionfunction Trig_LotInit_DieAct takes nothing returns nothinglocal unit dyer=GetDyingUnit()set udg_Lot_Bool=falseif(GetUnitAbilityLevel(dyer,'A0B1')>0)thencall UnitRemoveAbility(dyer,'A0B1')endifif(IsTriggerEnabled(gg_trg_Lot_Atk))then
call DisableTrigger(gg_trg_Lot_Atk)endifset udg_Lot_Unit=nullset udg_Lot_Delay=.0
endfunctionfunction Trig_LotInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0AX')endfunctionfunction Trig_LotInit_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0B1',false)set udg_Lot_Trig=CreateTrigger()
call TriggerRegisterUnitEvent(udg_Lot_Trig,u,EVENT_UNIT_DEATH)call TriggerAddAction(udg_Lot_Trig,function Trig_LotInit_DieAct)
set udg_Lot_TrigCast=CreateTrigger()
call TriggerRegisterUnitEvent(udg_Lot_TrigCast,u,EVENT_UNIT_SPELL_CAST)call TriggerAddCondition(udg_Lot_TrigCast,Condition(function Trig_LotCastCond))call TriggerAddAction(udg_Lot_TrigCast,function Trig_LotCastAct)
set u=nullcall DestroyTrigger(gg_trg_Lot_Init)
endfunctionfunction InitTrig_Lot_Init takes nothing returns nothing
set gg_trg_Lot_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Lot_Init,Condition(function Trig_LotInit_Conditions))call TriggerAddAction(gg_trg_Lot_Init,function Trig_LotInit_Actions)
endfunctionfunction Trig_Lot_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0AX')endfunctionfunction Trig_Lot_Actions takes nothing returns nothinglocal player plocal real x
local real y
set udg_Lot_Unit=GetTriggerUnit()if(GetUnitTypeId(udg_Lot_Unit)!='U00D')thenset udg_Lot_Bool=trueset udg_Lot_Delay=(1.4-(.2*GetUnitAbilityLevel(udg_Lot_Unit,'A0AX')))call EnableTrigger(gg_trg_Lot_Atk)set p=GetOwningPlayer(udg_Lot_Unit)call DisplayText("Bankai Zanka no Tachi",udg_Lot_Unit,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(udg_Lot_Unit)
set y=GetUnitY(udg_Lot_Unit)
set bj_lastCreatedUnit=CreateUnit(p,'h09B',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)set bj_lastCreatedUnit=CreateUnit(p,'h09C',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h09C',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h096',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)call TransfromAction(udg_Lot_Unit,x,y)set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Lot_Unit)
else
set udg_Lot_Bool=falseif(IsTriggerEnabled(gg_trg_Lot_Atk))then
call DisableTrigger(gg_trg_Lot_Atk)endifcall UnitRemoveAbility(udg_Lot_Unit,'A0B1')set udg_Lot_Delay=.0
call TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Lot_Unit)
set udg_Lot_Unit=nullendifendfunctionfunction InitTrig_Lot takes nothing returns nothingset gg_trg_Lot=CreateTrigger()call TriggerAddCondition(gg_trg_Lot,Condition(function Trig_Lot_Conditions))
call TriggerAddAction(gg_trg_Lot,function Trig_Lot_Actions)endfunctionfunction Trig_Lot_Atk_Conditions takes nothing returns booleanreturn(GetAttacker()==udg_Lot_Unit)endfunctionfunction Trig_Lot_Atk_Actions takes nothing returns nothinglocal unit atker=GetAttacker()local unit atked=GetTriggerUnit()local real array rlocal real array xyset r[0]=100.set r[1]=GetRandomReal(0,360)set xy[0]=GetUnitX(atked)set xy[1]=GetUnitY(atked)set xy[2]=GetUnitX(atker)set xy[3]=GetUnitY(atker)set xy[4]=PolarX(xy[0],r[0],r[1])set xy[5]=PolarY(xy[1],r[0],r[1])call DisableTrigger(gg_trg_Lot_Atk)if(IsTerrainPathable(xy[4],xy[5],PATHING_TYPE_WALKABILITY)==false)thencall DestroyTreeXY(xy[4],xy[5],150.)
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(atker),'h03G',xy[4],xy[5],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitX(atker,xy[4])call SetUnitY(atker,xy[5])call SetUnitFacing(atker,AngleBetweenXY(xy[4],xy[5],xy[0],xy[1]))else
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(atker),'h03G',xy[2],xy[3],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset atked=nullset atker=nullcall TriggerSleepAction(udg_Lot_Delay)if(udg_Lot_Bool)then
call EnableTrigger(gg_trg_Lot_Atk)endifendfunctionfunction InitTrig_Lot_Atk takes nothing returns nothingset gg_trg_Lot_Atk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lot_Atk,EVENT_PLAYER_UNIT_ATTACKED)call DisableTrigger(gg_trg_Lot_Atk)call TriggerAddCondition(gg_trg_Lot_Atk,Condition(function Trig_Lot_Atk_Conditions))
call TriggerAddAction(gg_trg_Lot_Atk,function Trig_Lot_Atk_Actions)endfunctionfunction Trig_Cin_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0B3')endfunctionfunction Trig_Cin_Actions takes nothing returns nothingset udg_Cin_Unit[0]=GetTriggerUnit()
set udg_Cin_Type='h09D'set udg_Cin_Own=GetOwningPlayer(udg_Cin_Unit[0])
set udg_Cin_Loc[0]=GetUnitLoc(udg_Cin_Unit[0])set udg_Cin_RealLoc[0]=GetLocationX(udg_Cin_Loc[0])set udg_Cin_RealLoc[1]=GetLocationY(udg_Cin_Loc[0])set udg_Cin_Unit[1]=CreateUnit(udg_Cin_Own,udg_Cin_Type,GetLocationX(udg_Cin_Loc[0]),GetLocationY(udg_Cin_Loc[0]),220.)set udg_Cin_Unit[2]=CreateUnit(udg_Cin_Own,udg_Cin_Type,GetLocationX(udg_Cin_Loc[0]),GetLocationY(udg_Cin_Loc[0]),320.)set udg_Cin_Unit[3]=CreateUnit(udg_Cin_Own,udg_Cin_Type,GetLocationX(udg_Cin_Loc[0]),GetLocationY(udg_Cin_Loc[0]),90.)call RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall Dynamic_Sound("Sounds\\JokakuEnjo.mp3")
call DisplayText("Jokaku Enjo",udg_Cin_Unit[0],.023,true,$FF,$FF,$FF,$FF)set udg_Cin_Real[0]=71.set udg_Cin_Real[1]=(5*I2R(GetHeroStr(udg_Cin_Unit[0],true)))set udg_Cin_Real[2]=200.
set udg_Cin_Int[0]=$Ecall EnableTrigger(gg_trg_CinL)endfunctionfunction InitTrig_Cin takes nothing returns nothingset gg_trg_Cin=CreateTrigger()call TriggerAddCondition(gg_trg_Cin,Condition(function Trig_Cin_Conditions))
call TriggerAddAction(gg_trg_Cin,function Trig_Cin_Actions)endfunctionfunction Trig_CinL_Func001Func004Func010002003001 takes nothing returns booleanreturn(IsUnitInGroup(GetFilterUnit(),udg_Cin_GroupTake)==false)endfunctionfunction Trig_CinL_Func001Func004Func010002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Cin_Own))
endfunctionfunction Trig_CinL_Func001Func004Func010002003002002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_CinL_Func001Func004Func010002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_CinL_Func001Func004Func010002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL_Func001Func004Func010002003002002001(),Trig_CinL_Func001Func004Func010002003002002002())endfunctionfunction Trig_CinL_Func001Func004Func010002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL_Func001Func004Func010002003002001(),Trig_CinL_Func001Func004Func010002003002002())endfunctionfunction Trig_CinL_Func001Func004Func010002003 takes nothing returns boolean
return GetBooleanAnd(Trig_CinL_Func001Func004Func010002003001(),Trig_CinL_Func001Func004Func010002003002())endfunctionfunction Trig_CinL_Func001Func004Func013A takes nothing returns nothinglocal unit u=GetEnumUnit()call GroupAddUnit(udg_Cin_GroupTake,u)call UnitDamageTarget(udg_Cin_Unit[0],u,udg_Cin_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u=nullendfunctionfunction Trig_CinL_Func001C takes nothing returns booleanreturn(udg_Cin_Int[0]>0)and(IsUnitDeadBJ(udg_Cin_Unit[0])==false)endfunctionfunction Trig_CinL_Actions takes nothing returns nothing
if(Trig_CinL_Func001C())then
set udg_Cin_Int[1]=1
loop
exitwhen udg_Cin_Int[1]>3set udg_Cin_Loc[0]=GetUnitLoc(udg_Cin_Unit[udg_Cin_Int[1]])set udg_Cin_Loc[1]=PolarProjectionBJ(udg_Cin_Loc[0],udg_Cin_Real[0],GetUnitFacing(udg_Cin_Unit[udg_Cin_Int[1]]))
call RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h00F',udg_Cin_Own,udg_Cin_Loc[1],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.3)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.3)call SetUnitPositionLoc(udg_Cin_Unit[udg_Cin_Int[1]],udg_Cin_Loc[1])
call EnumDestructablesInCircleBJ(udg_Cin_Real[2],udg_Cin_Loc[1],function TreeKiller)
set udg_Cin_Group=GetUnitsInRangeOfLocMatching(udg_Cin_Real[2],udg_Cin_Loc[1],Condition(function Trig_CinL_Func001Func004Func010002003))
call RemoveLocation(udg_Cin_Loc[1])set udg_Cin_Loc[1]=nullcall ForGroupBJ(udg_Cin_Group,function Trig_CinL_Func001Func004Func013A)
call DestroyGroup(udg_Cin_Group)
set udg_Cin_Group=nullset udg_Cin_Int[1]=udg_Cin_Int[1]+1endloopset udg_Cin_Int[0]=(udg_Cin_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Cin_GroupTake)set udg_Cin_Int[1]=1
loop
exitwhen udg_Cin_Int[1]>3set udg_Cin_Loc[0]=GetUnitLoc(udg_Cin_Unit[udg_Cin_Int[1]])call RemoveUnit(udg_Cin_Unit[udg_Cin_Int[1]])set udg_Cin_Unit[udg_Cin_Int[1]]=nullset udg_Cin_Loc[1]=Location(udg_Cin_RealLoc[0],udg_Cin_RealLoc[1])call CreateNUnitsAtLoc(1,udg_Cin_Type,udg_Cin_Own,udg_Cin_Loc[0],AngleBetweenPoints(udg_Cin_Loc[0],udg_Cin_Loc[1]))set udg_Cin_Unit[udg_Cin_Int[1]]=bj_lastCreatedUnitcall RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall RemoveLocation(udg_Cin_Loc[1])set udg_Cin_Loc[1]=nullset udg_Cin_Int[1]=udg_Cin_Int[1]+1endloopset udg_Cin_Real[0]=92.5
set udg_Cin_Int[0]=25call EnableTrigger(gg_trg_CinL2)
endifendfunctionfunction InitTrig_CinL takes nothing returns nothing
set gg_trg_CinL=CreateTrigger()call DisableTrigger(gg_trg_CinL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CinL,.12)call TriggerAddAction(gg_trg_CinL,function Trig_CinL_Actions)endfunctionfunction Trig_CinL2_Func001C takes nothing returns booleanreturn(udg_Cin_Int[0]>0)and(IsUnitDeadBJ(udg_Cin_Unit[0])==false)endfunctionfunction Trig_CinL2_Actions takes nothing returns nothingif(Trig_CinL2_Func001C())thenset udg_Cin_Int[1]=1
loop
exitwhen udg_Cin_Int[1]>3set udg_Cin_Loc[0]=GetUnitLoc(udg_Cin_Unit[udg_Cin_Int[1]])set udg_Cin_Loc[1]=PolarProjectionBJ(udg_Cin_Loc[0],udg_Cin_Real[0],(GetUnitFacing(udg_Cin_Unit[udg_Cin_Int[1]])+88.))call RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall CreateNUnitsAtLoc(1,udg_Cin_Type,udg_Cin_Own,udg_Cin_Loc[1],bj_UNIT_FACING)
call GroupAddUnit(udg_Cin_GroupDummy,bj_lastCreatedUnit)
call EnumDestructablesInCircleBJ(udg_Cin_Real[2],udg_Cin_Loc[1],function TreeKiller)
set udg_Cin_Loc[2]=Location(udg_Cin_RealLoc[0],udg_Cin_RealLoc[1])call SetUnitPositionLocFacingLocBJ(udg_Cin_Unit[udg_Cin_Int[1]],udg_Cin_Loc[1],udg_Cin_Loc[2])call RemoveLocation(udg_Cin_Loc[1])set udg_Cin_Loc[1]=nullcall RemoveLocation(udg_Cin_Loc[2])set udg_Cin_Loc[2]=nullset udg_Cin_Int[1]=udg_Cin_Int[1]+1endloopset udg_Cin_Int[0]=(udg_Cin_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Cin_Unit[1])
call RemoveUnit(udg_Cin_Unit[2])
call RemoveUnit(udg_Cin_Unit[3])
set udg_Cin_Unit[1]=null
set udg_Cin_Unit[2]=null
set udg_Cin_Unit[3]=null
set udg_Cin_Int[0]=GetUnitAbilityLevelSwapped('A0B3',udg_Cin_Unit[0])set udg_Cin_Dmg[0]=R2I(75.+(25.*I2R(udg_Cin_Int[0])))set udg_Cin_Dmg[1]=R2I(200.+(50.*I2R(udg_Cin_Int[0])))set udg_Cin_Real[0]=900.
set udg_Cin_Real[1]=200.
set udg_Cin_Int[0]=40call EnableTrigger(gg_trg_CinL3)
endifendfunctionfunction InitTrig_CinL2 takes nothing returns nothingset gg_trg_CinL2=CreateTrigger()
call DisableTrigger(gg_trg_CinL2)call TriggerRegisterTimerEventPeriodic(gg_trg_CinL2,.08)
call TriggerAddAction(gg_trg_CinL2,function Trig_CinL2_Actions)endfunctionfunction Trig_CinL3_Func002Func007002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Cin_Own))
endfunctionfunction Trig_CinL3_Func002Func007002003002001 takes nothing returns boolean
return(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_CinL3_Func002Func007002003002002 takes nothing returns boolean
return(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_CinL3_Func002Func007002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL3_Func002Func007002003002001(),Trig_CinL3_Func002Func007002003002002())endfunctionfunction Trig_CinL3_Func002Func007002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL3_Func002Func007002003001(),Trig_CinL3_Func002Func007002003002())endfunctionfunction Trig_CinL3_Func002Func010A takes nothing returns nothingcall UnitPureDamageTarget(udg_Cin_Unit[0],GetEnumUnit(),I2R(udg_Cin_Dmg[0]))
endfunctionfunction Trig_CinL3_Func002Func015Func002002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Cin_GroupTake)==false)endfunctionfunction Trig_CinL3_Func002Func015Func002002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Cin_Own))
endfunctionfunction Trig_CinL3_Func002Func015Func002002003002002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_CinL3_Func002Func015Func002002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_CinL3_Func002Func015Func002002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL3_Func002Func015Func002002003002002001(),Trig_CinL3_Func002Func015Func002002003002002002())endfunctionfunction Trig_CinL3_Func002Func015Func002002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_CinL3_Func002Func015Func002002003002001(),Trig_CinL3_Func002Func015Func002002003002002())endfunctionfunction Trig_CinL3_Func002Func015Func002002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_CinL3_Func002Func015Func002002003001(),Trig_CinL3_Func002Func015Func002002003002())endfunctionfunction Trig_CinL3_Func002Func015Func005A takes nothing returns nothing
local unit u=GetEnumUnit()call GroupAddUnit(udg_Cin_GroupTake,u)call UnitPureDamageTarget(udg_Cin_Unit[0],u,I2R(udg_Cin_Dmg[1]))
set u=nullendfunctionfunction Trig_CinL3_Func002Func015A takes nothing returns nothingset udg_Cin_Loc[0]=GetUnitLoc(GetEnumUnit())
set udg_Cin_Group2=GetUnitsInRangeOfLocMatching(udg_Cin_Real[1],udg_Cin_Loc[0],Condition(function Trig_CinL3_Func002Func015Func002002003))call RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall ForGroupBJ(udg_Cin_Group2,function Trig_CinL3_Func002Func015Func005A)call DestroyGroup(udg_Cin_Group2)set udg_Cin_Group2=nullendfunctionfunction Trig_CinL3_Func002Func022A takes nothing returns nothinglocal unit u=GetEnumUnit()call SetUnitAnimation(u,"death")
call UnitApplyTimedLife(u,'BTLF',1.)
set u=nullendfunctionfunction Trig_CinL3_Func002C takes nothing returns booleanreturn(udg_Cin_Int[0]>0)and(IsUnitDeadBJ(udg_Cin_Unit[0])==false)endfunctionfunction Trig_CinL3_Actions takes nothing returns nothingif(Trig_CinL3_Func002C())thenset udg_Cin_Int[0]=(udg_Cin_Int[0]-1)set udg_Cin_Loc[0]=Location(udg_Cin_RealLoc[0],udg_Cin_RealLoc[1])call CreateNUnitsAtLoc(1,'u003',udg_Cin_Own,udg_Cin_Loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0B4')call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D0208,udg_Cin_Loc[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Cin_Group=GetUnitsInRangeOfLocMatching(udg_Cin_Real[0],udg_Cin_Loc[0],Condition(function Trig_CinL3_Func002Func007002003))call RemoveLocation(udg_Cin_Loc[0])set udg_Cin_Loc[0]=nullcall ForGroupBJ(udg_Cin_Group,function Trig_CinL3_Func002Func010A)call DestroyGroup(udg_Cin_Group)
set udg_Cin_Group=nullset udg_Cin_Group=CreateGroup()call GroupAddGroup(udg_Cin_GroupDummy,udg_Cin_Group)
call ForGroupBJ(udg_Cin_Group,function Trig_CinL3_Func002Func015A)call DestroyGroup(udg_Cin_Group)
set udg_Cin_Group=nullcall GroupClear(udg_Cin_GroupTake)else
call DisableTrigger(GetTriggeringTrigger())set udg_Cin_Group=CreateGroup()call GroupAddGroup(udg_Cin_GroupDummy,udg_Cin_Group)
call ForGroupBJ(udg_Cin_Group,function Trig_CinL3_Func002Func022A)call DestroyGroup(udg_Cin_Group)
set udg_Cin_Group=nullset udg_Cin_Own=null
set udg_Cin_Unit[0]=null
set udg_Cin_RealLoc[0]=.0set udg_Cin_RealLoc[1]=.0set udg_Cin_Real[0]=.0set udg_Cin_Real[1]=.0set udg_Cin_Real[2]=.0set udg_Cin_Dmg[0]=0
set udg_Cin_Dmg[1]=0
set udg_Cin_Type=0set udg_Cin_Int[0]=0
set udg_Cin_Int[1]=0
endifendfunctionfunction InitTrig_CinL3 takes nothing returns nothingset gg_trg_CinL3=CreateTrigger()
call DisableTrigger(gg_trg_CinL3)call TriggerRegisterTimerEventPeriodic(gg_trg_CinL3,.5)call TriggerAddAction(gg_trg_CinL3,function Trig_CinL3_Actions)endfunctionfunction Trig_Kjd_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0B2')endfunctionfunction Trig_Kjd_Func034002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Kjd_Own))
endfunctionfunction Trig_Kjd_Func034002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_Kjd_Func034002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Kjd_Func034002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Kjd_Func034002003002001(),Trig_Kjd_Func034002003002002())endfunctionfunction Trig_Kjd_Func034002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Kjd_Func034002003001(),Trig_Kjd_Func034002003002())endfunctionfunction Trig_Kjd_Func037A takes nothing returns nothing
set udg_Kjd_Unit[4]=GetEnumUnit()set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[4])set udg_Kjd_Loc[1]=GetRandomLocInRect(udg_Kjd_Rect)set udg_Kjd_Int[1]=GetRandomInt(1,4)
if(udg_Kjd_Int[1]==1)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09F',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])elseif(udg_Kjd_Int[1]==2)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09G',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])elseif(udg_Kjd_Int[1]==3)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09H',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])else
call CreateNUnitsAtLocFacingLocBJ(1,'h09I',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])endifcall SetUnitTimeScale(bj_lastCreatedUnit,1.7)call GroupAddUnit(udg_Kjd_GroupDummy,bj_lastCreatedUnit)
call IssueTargetOrderById(bj_lastCreatedUnit,$D000F,udg_Kjd_Unit[4])
call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h09C',udg_Kjd_Own,udg_Kjd_Loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call RemoveLocation(udg_Kjd_Loc[1])set udg_Kjd_Loc[1]=nullset udg_Kjd_Unit[4]=null
endfunctionfunction Trig_Kjd_Actions takes nothing returns nothingset udg_Kjd_Unit[0]=GetTriggerUnit()
set udg_Kjd_Unit[1]=GetSpellTargetUnit()
set udg_Kjd_Own=GetOwningPlayer(udg_Kjd_Unit[0])
call SetUnitInvulnerable(udg_Kjd_Unit[0],true)call SetUnitInvulnerable(udg_Kjd_Unit[1],true)call PauseSystem(udg_Kjd_Unit[0],true)call PauseSystem(udg_Kjd_Unit[1],true)call SetUnitAnimation(udg_Kjd_Unit[0],"attack slam")
set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[0])call CreateNUnitsAtLoc(1,'h02L',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)call CreateNUnitsAtLoc(1,'h04B',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)call CreateNUnitsAtLoc(1,'h09C',udg_Kjd_Own,udg_Kjd_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.7)call CreateNUnitsAtLoc(1,'h096',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$96,50,$C8)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.2)call CreateNUnitsAtLoc(1,'h096',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$96,50,$C8)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.2)set udg_Kjd_Unit[3]=CreateUnit(udg_Kjd_Own,'h09D',GetLocationX(udg_Kjd_Loc[0]),GetLocationY(udg_Kjd_Loc[0]),bj_UNIT_FACING)call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullcall SetUnitScale(udg_Kjd_Unit[3],5.,5.,5.)set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Kjd_Loc[0]),GetLocationY(udg_Kjd_Loc[0]),3.,8.,udg_CameraArea,null)
set udg_Kjd_Unit[2]=CreateUnit(Player($C),'h09E',GetLocationX(udg_Kjd_Loc[0]),GetLocationY(udg_Kjd_Loc[0]),bj_UNIT_FACING)set udg_Kjd_Rect=RectFromCenterSizeBJ(udg_Kjd_Loc[0],950.,950.)set udg_Kjd_Group=GetUnitsInRangeOfLocMatching(700.,udg_Kjd_Loc[0],Condition(function Trig_Kjd_Func034002003))call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullcall ForGroupBJ(udg_Kjd_Group,function Trig_Kjd_Func037A)call DestroyGroup(udg_Kjd_Group)
set udg_Kjd_Group=nullcall DisplayText("Minami: Kaka Jumanokushi Daisojin",udg_Kjd_Unit[0],.023,false,$DC,5,5,$FF)
set udg_Kjd_Real=(2000.+((10.*I2R(GetUnitAbilityLevel(udg_Kjd_Unit[0],'A0B2')))*I2R(GetHeroStr(udg_Kjd_Unit[0],false))))
call SetUnitTimeScale(udg_Kjd_Unit[0],1.3)set udg_Kjd_Int[0]=20call EnableTrigger(gg_trg_Kjd_Atk)call EnableTrigger(gg_trg_KjdL)endfunctionfunction InitTrig_Kjd takes nothing returns nothingset gg_trg_Kjd=CreateTrigger()call TriggerAddCondition(gg_trg_Kjd,Condition(function Trig_Kjd_Conditions))
call TriggerAddAction(gg_trg_Kjd,function Trig_Kjd_Actions)endfunctionfunction Trig_KjdL_Func001Func046A takes nothing returns nothing
local unit u=GetEnumUnit()if(GetWidgetLife(u)>0)thencall UnitAddAbility(u,'Aloc')call UnitAddAbility(u,'Avul')call UnitRemoveAbility(u,'Aatk')
call UnitRemoveAbility(u,'Amov')
call SetUnitAnimation(u,"death")
call UnitApplyTimedLife(u,'BTLF',3.)
else
call RemoveUnit(u)endifset u=nullendfunctionfunction Trig_KjdL_Func001C takes nothing returns booleanreturn(udg_Kjd_Int[0]>0)
endfunctionfunction Trig_KjdL_Actions takes nothing returns nothing
if(Trig_KjdL_Func001C())then
set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[1])set udg_Kjd_Loc[1]=GetRandomLocInRect(udg_Kjd_Rect)set udg_Kjd_Int[1]=GetRandomInt(1,4)
if(udg_Kjd_Int[1]==1)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09F',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])elseif(udg_Kjd_Int[1]==2)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09G',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])elseif(udg_Kjd_Int[1]==3)thencall CreateNUnitsAtLocFacingLocBJ(1,'h09H',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])else
call CreateNUnitsAtLocFacingLocBJ(1,'h09I',udg_Kjd_Own,udg_Kjd_Loc[1],udg_Kjd_Loc[0])endifcall SetUnitAnimation(bj_lastCreatedUnit,"birth")call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call SetUnitUserData(bj_lastCreatedUnit,8)call GroupAddUnit(udg_Kjd_GroupDummy,bj_lastCreatedUnit)
call GroupAddUnit(udg_Kjd_GroupAtk,bj_lastCreatedUnit)call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h09B',udg_Kjd_Own,udg_Kjd_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)call CreateNUnitsAtLoc(1,'h09C',udg_Kjd_Own,udg_Kjd_Loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call RemoveLocation(udg_Kjd_Loc[1])set udg_Kjd_Loc[1]=nullset udg_Kjd_Int[0]=(udg_Kjd_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(1.3)
call DisableTrigger(gg_trg_Kjd_Atk)call GroupClear(udg_Kjd_GroupAtk)call SetUnitAnimation(udg_Kjd_Unit[3],"death")call UnitApplyTimedLife(udg_Kjd_Unit[3],'BTLF',1.5)set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[0])set udg_Kjd_Loc[1]=GetUnitLoc(udg_Kjd_Unit[1])set udg_Kjd_Loc[2]=PolarProjectionBJ(udg_Kjd_Loc[1],250.,AngleBetweenPoints(udg_Kjd_Loc[1],udg_Kjd_Loc[0]))call CreateNUnitsAtLoc(1,'h013',udg_Kjd_Own,udg_Kjd_Loc[0],GetUnitFacing(udg_Kjd_Unit[0]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call SetUnitPositionLocFacingLocBJ(udg_Kjd_Unit[0],udg_Kjd_Loc[2],udg_Kjd_Loc[1])call CreateNUnitsAtLoc(1,'h013',udg_Kjd_Own,udg_Kjd_Loc[1],GetUnitFacing(udg_Kjd_Unit[0]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullcall RemoveLocation(udg_Kjd_Loc[1])set udg_Kjd_Loc[1]=nullcall RemoveLocation(udg_Kjd_Loc[2])set udg_Kjd_Loc[2]=nullcall DisplayText("Kita: Tenchi Kaijin",udg_Kjd_Unit[0],.023,true,$DC,5,5,$FF)call SetUnitAnimation(udg_Kjd_Unit[0],"spell")call TriggerSleepAction(.22)
set udg_Kjd_Loc[0]=GetUnitLoc(udg_Kjd_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Kjd_Loc[0]),GetLocationY(udg_Kjd_Loc[0]),1.5,udg_CameraShakePow,udg_CameraArea,null)call CreateNUnitsAtLoc(1,'h01U',udg_Kjd_Own,udg_Kjd_Loc[0],GetUnitFacing(udg_Kjd_Unit[0]))call SetUnitFlyHeight(bj_lastCreatedUnit,140.,.0)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07I',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h084',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h04C',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h04D',udg_Kjd_Own,udg_Kjd_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(udg_Kjd_Loc[0])set udg_Kjd_Loc[0]=nullset udg_Kjd_Group=CreateGroup()call GroupAddGroup(udg_Kjd_GroupDummy,udg_Kjd_Group)
call GroupClear(udg_Kjd_GroupDummy)call ForGroupBJ(udg_Kjd_Group,function Trig_KjdL_Func001Func046A)call DestroyGroup(udg_Kjd_Group)
set udg_Kjd_Group=nullcall RemoveUnit(udg_Kjd_Unit[2])
call SetUnitInvulnerable(udg_Kjd_Unit[0],false)call SetUnitInvulnerable(udg_Kjd_Unit[1],false)call DisplayText(I2S(R2I(udg_Kjd_Real))+"!",udg_Kjd_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Kjd_Unit[0],udg_Kjd_Unit[1],udg_Kjd_Real,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call SetUnitTimeScale(udg_Kjd_Unit[0],1.)call PauseSystem(udg_Kjd_Unit[0],false)call PauseSystem(udg_Kjd_Unit[1],false)call RemoveRect(udg_Kjd_Rect)set udg_Kjd_Rect=nullset udg_Kjd_Own=null
set udg_Kjd_Unit[0]=null
set udg_Kjd_Unit[1]=null
set udg_Kjd_Unit[2]=null
set udg_Kjd_Unit[3]=null
set udg_Kjd_Int[0]=0
set udg_Kjd_Int[1]=0
endifendfunctionfunction InitTrig_KjdL takes nothing returns nothing
set gg_trg_KjdL=CreateTrigger()call DisableTrigger(gg_trg_KjdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KjdL,.1)call TriggerAddAction(gg_trg_KjdL,function Trig_KjdL_Actions)endfunctionfunction Trig_Kjd_Atk_Func003A takes nothing returns nothing
local unit u=GetEnumUnit()local integer i=GetUnitUserData(u)if(i==0)then
call GroupRemoveUnit(udg_Kjd_GroupAtk,u)
call IssueTargetOrderById(u,$D000F,udg_Kjd_Unit[2])else
call SetUnitUserData(u,(i-1))endifset u=nullset i=0endfunctionfunction Trig_Kjd_Atk_Actions takes nothing returns nothingset udg_Kjd_Group=CreateGroup()call GroupAddGroup(udg_Kjd_GroupAtk,udg_Kjd_Group)call ForGroupBJ(udg_Kjd_Group,function Trig_Kjd_Atk_Func003A)call DestroyGroup(udg_Kjd_Group)
set udg_Kjd_Group=nullendfunctionfunction InitTrig_Kjd_Atk takes nothing returns nothingset gg_trg_Kjd_Atk=CreateTrigger()call DisableTrigger(gg_trg_Kjd_Atk)call TriggerRegisterTimerEventPeriodic(gg_trg_Kjd_Atk,.1)call TriggerAddAction(gg_trg_Kjd_Atk,function Trig_Kjd_Atk_Actions)endfunctionfunction AI_Mihawk_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='N01S')endfunctionfunction AI_Mihawk_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='N01S')
endfunctionfunction AI_Mihawk_AttackedCond takes nothing returns booleanif(not AI_Mihawk_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Mihawk_AttackerCond takes nothing returns booleanif(not AI_Mihawk_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Mihawk_CondOR takes nothing returns booleanreturn(AI_Mihawk_AttackedCond()or AI_Mihawk_AttackerCond())endfunctionfunction AI_Mihawk_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Mihawk_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Mihawk_Act takes nothing returns nothing
local unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Mihawk_AttackedType())then
set AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0BN')call SelectHeroSkill(AI_1,'A0BH')call SelectHeroSkill(AI_1,'A0BG')call SelectHeroSkill(AI_1,'A0BF')call SelectHeroSkill(AI_1,'A0BE')endifif(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D0065,AI_2)call IssueTargetOrderById(AI_1,$D007F,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0080)set AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point2)call RemoveLocation(AI_Point2)set AI_Point2=nullcall IssueImmediateOrderById(AI_1,$D0084)set AI_Attacker=falseendifendifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Mihawk takes nothing returns nothingset udg_AI_Trig[25]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[25],Condition(function AI_Mihawk_Cond))
call TriggerAddAction(udg_AI_Trig[25],function AI_Mihawk_Act)endfunctionfunction Trig_Ovp_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BE')endfunctionfunction Trig_Ovp_Actions takes nothing returns nothinglocal real delay
local location locset udg_Ovp_Unit=GetTriggerUnit()set udg_Ovp_Dmg=((1.5+(.25*I2R(GetUnitAbilityLevelSwapped('A0BE',udg_Ovp_Unit))))*I2R(GetHeroStatBJ(0,udg_Ovp_Unit,false)))set udg_Ovp_Buff='B02I'set udg_Ovp_Own=GetOwningPlayer(udg_Ovp_Unit)set udg_Osg_Int=0set loc=GetUnitLoc(udg_Ovp_Unit)
call CreateNUnitsAtLoc(1,'u003',udg_Ovp_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0BJ')call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,udg_Ovp_Unit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call EnableTrigger(gg_trg_Ovp_Atk)set delay=.5
loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(udg_Ovp_Unit,udg_Ovp_Buff)<1)endloopcall DisableTrigger(gg_trg_Ovp_Atk)set udg_Ovp_Own=null
set udg_Ovp_Unit=nullset udg_Ovp_Dmg=.0set delay=.0
set udg_Ovp_Buff=0set udg_Osg_Int=0endfunctionfunction InitTrig_Ovp takes nothing returns nothingset gg_trg_Ovp=CreateTrigger()call TriggerAddCondition(gg_trg_Ovp,Condition(function Trig_Ovp_Conditions))
call TriggerAddAction(gg_trg_Ovp,function Trig_Ovp_Actions)endfunctionfunction Trig_Ovp_Atk_Conditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),udg_Ovp_Buff)>0)endfunctionfunction Trig_Ovp_Atk_Actions takes nothing returns nothinglocal unit attacked=GetTriggerUnit()
local real facing=GetUnitFacing(udg_Ovp_Unit)local location loc=GetUnitLoc(udg_Ovp_Unit)local location loc2=PolarProjectionBJ(loc,65,facing)
call CreateNUnitsAtLoc(1,'h09J',udg_Ovp_Own,loc,GetUnitFacing(udg_Ovp_Unit))
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call SetUnitAnimation(bj_lastCreatedUnit,"attack")call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$96)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.4)call CreateNUnitsAtLoc(1,'h09K',udg_Ovp_Own,loc2,(facing-25.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",attacked,"origin"))call UnitDamageTarget(udg_Ovp_Unit,attacked,udg_Ovp_Dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
call DisplayText(I2S(R2I(udg_Ovp_Dmg))+"!",attacked,.023,true,$DC,5,5,$FF)if(GetWidgetLife(attacked)>0 and 31>GetRandomInt(1,'d'))then
call CreateNUnitsAtLoc(1,'u003',udg_Ovp_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0BK')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,attacked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc)
set loc=null
call RemoveLocation(loc2)set loc2=nullset udg_Osg_Int=(udg_Osg_Int+1)if(udg_Osg_Int==3)thencall UnitRemoveAbility(udg_Ovp_Unit,udg_Ovp_Buff)endifset attacked=nullset facing=.0endfunctionfunction InitTrig_Ovp_Atk takes nothing returns nothingset gg_trg_Ovp_Atk=CreateTrigger()call DisableTrigger(gg_trg_Ovp_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Ovp_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Ovp_Atk,Condition(function Trig_Ovp_Atk_Conditions))
call TriggerAddAction(gg_trg_Ovp_Atk,function Trig_Ovp_Atk_Actions)endfunctionfunction Trig_Bst_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BF')endfunctionfunction Trig_Bst_Actions takes nothing returns nothinglocal location array loc
local player plocal real facinglocal real dmgset udg_Bst_Unit[0]=GetTriggerUnit()
set udg_Bst_Unit[1]=GetSpellTargetUnit()
call SetUnitVertexColor(udg_Bst_Unit[0],$FF,$FF,$FF,0)set p=GetOwningPlayer(udg_Bst_Unit[0])set loc[0]=GetUnitLoc(udg_Bst_Unit[0])set loc[1]=GetUnitLoc(udg_Bst_Unit[1])set facing=AngleBetweenPoints(loc[0],loc[1])
set loc[2]=PolarProjectionBJ(loc[1],-100.,facing)set udg_Bst_Unit[2]=CreateUnit(p,'h09J',GetLocationX(loc[0]),GetLocationY(loc[0]),facing)call SetUnitVertexColor(udg_Bst_Unit[2],$FF,$FF,$FF,$80)
call SetUnitTimeScale(udg_Bst_Unit[2],.7)call SetUnitAnimation(udg_Bst_Unit[2],"spell one")call TriggerSleepAction(.01)
call IssueTargetOrderById(udg_Bst_Unit[0],$D000F,udg_Bst_Unit[1])call SetUnitX(udg_Bst_Unit[0],GetLocationX(loc[2]))call SetUnitY(udg_Bst_Unit[0],GetLocationY(loc[2]))call SetUnitAnimation(udg_Bst_Unit[0],"spell two")call CreateNUnitsAtLoc(1,'h09C',p,loc[1],bj_UNIT_FACING)
call SetUnitVertexColor(bj_lastCreatedUnit,'d',$FF,'d',$FF)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall SetUnitFacing(udg_Bst_Unit[0],facing)set dmg=(GetHeroStr(udg_Bst_Unit[0],false)*3.)+75.call UnitPureDamageTarget(udg_Bst_Unit[0],udg_Bst_Unit[1],dmg)set udg_Bst_Int=1call EnableTrigger(gg_trg_BstV)set p=nullendfunctionfunction InitTrig_Bst takes nothing returns nothingset gg_trg_Bst=CreateTrigger()call TriggerAddCondition(gg_trg_Bst,Condition(function Trig_Bst_Conditions))
call TriggerAddAction(gg_trg_Bst,function Trig_Bst_Actions)endfunctionfunction Trig_BstV_Actions takes nothing returns nothing
local integer vertex
if(udg_Bst_Int<20)thenset vertex=R2I(12.75*I2R(udg_Bst_Int))call SetUnitVertexColor(udg_Bst_Unit[0],$FF,$FF,$FF,vertex)call SetUnitVertexColor(udg_Bst_Unit[2],$FF,$FF,$FF,($FF-vertex))set udg_Bst_Int=udg_Bst_Int+1set vertex=0
else
call DisableTrigger(GetTriggeringTrigger())call SetUnitVertexColor(udg_Bst_Unit[0],$FF,$FF,$FF,$FF)
call RemoveUnit(udg_Bst_Unit[2])
set udg_Bst_Unit[0]=null
set udg_Bst_Unit[1]=null
set udg_Bst_Unit[2]=null
set udg_Bst_Int=0endifendfunctionfunction InitTrig_BstV takes nothing returns nothing
set gg_trg_BstV=CreateTrigger()call DisableTrigger(gg_trg_BstV)
call TriggerRegisterTimerEventPeriodic(gg_trg_BstV,.05)call TriggerAddAction(gg_trg_BstV,function Trig_BstV_Actions)endfunctionfunction Trig_Hws_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BG')endfunctionfunction Trig_Hws_Actions takes nothing returns nothingset udg_Hws_Unit=GetTriggerUnit()set udg_Hws_Loc[0]=GetSpellTargetLoc()set udg_Hws_Loc[1]=GetUnitLoc(udg_Hws_Unit)set udg_Hws_Real[0]=AngleBetweenPoints(udg_Hws_Loc[1],udg_Hws_Loc[0])call Dynamic_3D("Sounds\\SwordSlash.wav",GetLocationX(udg_Hws_Loc[1]),GetLocationY(udg_Hws_Loc[1]))call RemoveLocation(udg_Hws_Loc[0])set udg_Hws_Loc[0]=nullset udg_Hws_Loc[2]=PolarProjectionBJ(udg_Hws_Loc[1],150.,udg_Hws_Real[0])call RemoveLocation(udg_Hws_Loc[1])set udg_Hws_Loc[1]=nullset udg_Hws_Real[1]=GetLocationX(udg_Hws_Loc[2])
set udg_Hws_Real[2]=GetLocationY(udg_Hws_Loc[2])
call CreateNUnitsAtLoc(1,'h09M',udg_Hws_Own,udg_Hws_Loc[2],udg_Hws_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Hws_Loc[2])set udg_Hws_Loc[2]=nullcall DisplayText("Chi wo Hau Zangeki",udg_Hws_Unit,.023,true,$FF,$FF,$FF,$FF)set udg_Hws_Real[3]=130.
set udg_Hws_Real[4]=(udg_Hws_Real[0]+180.)set udg_Hws_Real[5]=300.
set udg_Hws_Real[6]=(600.+(150.*I2R(GetUnitAbilityLevel(udg_Hws_Unit,'A0BG'))))set udg_Hws_Real[7]=(udg_Hws_Real[6]*.02)set udg_Hws_Int=20set udg_Hws_Own=GetOwningPlayer(udg_Hws_Unit)call EnableTrigger(gg_trg_HwsL)endfunctionfunction InitTrig_Hws takes nothing returns nothingset gg_trg_Hws=CreateTrigger()call TriggerAddCondition(gg_trg_Hws,Condition(function Trig_Hws_Conditions))
call TriggerAddAction(gg_trg_Hws,function Trig_Hws_Actions)endfunctionfunction Trig_HwsL_Func002Func017002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Hws_Group2)==false)
endfunctionfunction Trig_HwsL_Func002Func017002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Hws_Own))
endfunctionfunction Trig_HwsL_Func002Func017002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_HwsL_Func002Func017002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_HwsL_Func002Func017002003002001(),Trig_HwsL_Func002Func017002003002002())endfunctionfunction Trig_HwsL_Func002Func017002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_HwsL_Func002Func017002003001(),Trig_HwsL_Func002Func017002003002())endfunctionfunction Trig_HwsL_Func002Func022A takes nothing returns nothing
local unit u=GetEnumUnit()call GroupAddUnit(udg_Hws_Group2,u)call UnitDamageTarget(udg_Hws_Unit,u,udg_Hws_Real[6],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_HwsL_Func002Func032A takes nothing returns nothing
local unit u=GetEnumUnit()call SetUnitAnimation(u,"death")
call UnitApplyTimedLife(u,'BTLF',1.3)set u=nullendfunctionfunction Trig_HwsL_Func002C takes nothing returns booleanreturn(udg_Hws_Int>0)endfunctionfunction Trig_HwsL_Actions takes nothing returns nothing
if(Trig_HwsL_Func002C())then
set udg_Hws_Loc[0]=Location(udg_Hws_Real[1],udg_Hws_Real[2])
set udg_Hws_Loc[1]=PolarProjectionBJ(udg_Hws_Loc[0],udg_Hws_Real[3],udg_Hws_Real[0])
call RemoveLocation(udg_Hws_Loc[0])set udg_Hws_Loc[0]=nullcall EnumDestructablesInCircleBJ(udg_Hws_Real[5],udg_Hws_Loc[1],function TreeKiller)
set udg_Hws_Real[1]=GetLocationX(udg_Hws_Loc[1])
set udg_Hws_Real[2]=GetLocationY(udg_Hws_Loc[1])
call CreateNUnitsAtLoc(1,'h09L',udg_Hws_Own,udg_Hws_Loc[1],udg_Hws_Real[4])call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call GroupAddUnit(udg_Hws_GroupDummy,bj_lastCreatedUnit)
set udg_Hws_Loc[2]=PolarProjectionBJ(udg_Hws_Loc[1],250.,udg_Hws_Real[0])call CreateNUnitsAtLoc(1,'h09M',udg_Hws_Own,udg_Hws_Loc[2],udg_Hws_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call Dynamic_GroupShake(GetLocationX(udg_Hws_Loc[1]),GetLocationY(udg_Hws_Loc[1]),1.2,8.,udg_CameraArea,udg_Hws_GroupShake)set udg_Hws_Group=GetUnitsInRangeOfLocMatching(udg_Hws_Real[5],udg_Hws_Loc[1],Condition(function Trig_HwsL_Func002Func017002003))call RemoveLocation(udg_Hws_Loc[1])set udg_Hws_Loc[1]=nullcall RemoveLocation(udg_Hws_Loc[2])set udg_Hws_Loc[2]=nullcall ForGroupBJ(udg_Hws_Group,function Trig_HwsL_Func002Func022A)call DestroyGroup(udg_Hws_Group)
set udg_Hws_Group=nullset udg_Hws_Real[6]=(udg_Hws_Real[6]-udg_Hws_Real[7])set udg_Hws_Int=(udg_Hws_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(1.5)
set udg_Hws_Group=CreateGroup()call GroupAddGroup(udg_Hws_GroupDummy,udg_Hws_Group)
call ForGroupBJ(udg_Hws_Group,function Trig_HwsL_Func002Func032A)call DestroyGroup(udg_Hws_Group)
set udg_Hws_Group=nullcall GroupClear(udg_Hws_Group2)call GroupClear(udg_Hws_GroupDummy)call GroupClear(udg_Hws_GroupShake)set udg_Hws_Own=null
set udg_Hws_Unit=nullset udg_Hws_Real[0]=.0set udg_Hws_Real[1]=.0set udg_Hws_Real[2]=.0set udg_Hws_Real[3]=.0set udg_Hws_Real[4]=.0set udg_Hws_Real[5]=.0set udg_Hws_Real[6]=.0set udg_Hws_Real[7]=.0set udg_Hws_Int=0endifendfunctionfunction InitTrig_HwsL takes nothing returns nothing
set gg_trg_HwsL=CreateTrigger()call DisableTrigger(gg_trg_HwsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HwsL,.03)call TriggerAddAction(gg_trg_HwsL,function Trig_HwsL_Actions)endfunctionfunction Trig_Wof_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BH')endfunctionfunction Trig_Wof_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer skill='A0BM'local integer skillLv=GetUnitAbilityLevel(u,'A0BH')local integer i=1local real distance=300.
local real facing=60.local real size=13.5
local player p=GetOwningPlayer(u)local location loc2local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h045',p,loc,GetRandomReal(.0,360.))call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitVertexColor(bj_lastCreatedUnit,20,$FF,0,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h045',p,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitVertexColor(bj_lastCreatedUnit,20,$FF,0,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h034',p,loc,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.1)call SetUnitScale(bj_lastCreatedUnit,7.,7.,7.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h034',p,loc,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.1)call SetUnitScale(bj_lastCreatedUnit,7.,7.,7.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call EnumDestructablesInCircleBJ(1000.,loc,function TreeKiller)loop
exitwhen i>6
set loc2=PolarProjectionBJ(loc,distance,facing)call CreateNUnitsAtLoc(1,'u003',p,loc,facing)call SetUnitScale(bj_lastCreatedUnit,size,size,size)
call UnitAddAbility(bj_lastCreatedUnit,skill)call SetUnitAbilityLevelSwapped(skill,bj_lastCreatedUnit,skillLv)call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D009D,loc2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)call RemoveLocation(loc2)set loc2=nullset facing=(facing+60.)set i=i+1endloopcall RemoveLocation(loc)
set loc=null
call DisplayText("Kokuto Issen",u,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Mihawk\\ShockWave.wav",GetUnitX(u),GetUnitY(u))
set p=nullset u=nullset distance=.0set facing=.0set skill=0set skillLv=0set i=0endfunctionfunction InitTrig_Wof takes nothing returns nothingset gg_trg_Wof=CreateTrigger()call TriggerAddCondition(gg_trg_Wof,Condition(function Trig_Wof_Conditions))
call TriggerAddAction(gg_trg_Wof,function Trig_Wof_Actions)endfunctionfunction Trig_Bwt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BN')endfunctionfunction Trig_Bwt_Actions takes nothing returns nothingset udg_Bwt_Unit[0]=GetTriggerUnit()
set udg_Bwt_Unit[1]=GetSpellTargetUnit()
set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Unit[0])set udg_Bwt_Loc[1]=GetUnitLoc(udg_Bwt_Unit[1])set udg_Bwt_Real[0]=AngleBetweenPoints(udg_Bwt_Loc[0],udg_Bwt_Loc[1])set udg_Bwt_Loc[2]=PolarProjectionBJ(udg_Bwt_Loc[1],150.,udg_Bwt_Real[0])call RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall RemoveLocation(udg_Bwt_Loc[1])set udg_Bwt_Loc[1]=nullset udg_Bwt_Real[1]=GetLocationX(udg_Bwt_Loc[2])
set udg_Bwt_Real[2]=GetLocationY(udg_Bwt_Loc[2])
call RemoveLocation(udg_Bwt_Loc[2])set udg_Bwt_Loc[2]=nullcall SetUnitPathing(udg_Bwt_Unit[0],false)call SetUnitAnimation(udg_Bwt_Unit[0],"spell one")call SetUnitTimeScale(udg_Bwt_Unit[0],.3)call SetUnitInvulnerable(udg_Bwt_Unit[0],true)call SetUnitInvulnerable(udg_Bwt_Unit[1],true)call PauseSystem(udg_Bwt_Unit[0],true)call PauseSystem(udg_Bwt_Unit[1],true)call Dynamic_Sound("Sounds\\Mihawk1.mp3")set udg_Bwt_Own=GetOwningPlayer(udg_Bwt_Unit[0])
set udg_Bwt_Int=0call EnableTrigger(gg_trg_BwtL)endfunctionfunction InitTrig_Bwt takes nothing returns nothingset gg_trg_Bwt=CreateTrigger()call TriggerAddCondition(gg_trg_Bwt,Condition(function Trig_Bwt_Conditions))
call TriggerAddAction(gg_trg_Bwt,function Trig_Bwt_Actions)endfunctionfunction Trig_BwtL_Func001C takes nothing returns booleanreturn(udg_Bwt_Int<$B)endfunctionfunction Trig_BwtL_Actions takes nothing returns nothing
if(Trig_BwtL_Func001C())then
set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Unit[0])set udg_Bwt_Loc[1]=PolarProjectionBJ(udg_Bwt_Loc[0],-9.,udg_Bwt_Real[0])
call RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullif(IsTerrainPathable(GetLocationX(udg_Bwt_Loc[1]),GetLocationY(udg_Bwt_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitPositionLoc(udg_Bwt_Unit[0],udg_Bwt_Loc[1])endifcall RemoveLocation(udg_Bwt_Loc[1])set udg_Bwt_Loc[1]=nullcall SetUnitVertexColor(udg_Bwt_Unit[0],$FF,$FF,$FF,($FF-R2I(25.5*I2R(udg_Bwt_Int))))set udg_Bwt_Int=(udg_Bwt_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call ShowUnitHide(udg_Bwt_Unit[0])call SetUnitAnimation(udg_Bwt_Unit[0],"stand ready")
call SetUnitTimeScale(udg_Bwt_Unit[0],1.)set udg_Bwt_Real[3]=72.set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Unit[1])set udg_Bwt_Int=1loop
exitwhen udg_Bwt_Int>5call CreateNUnitsAtLoc(1,'h09J',udg_Bwt_Own,udg_Bwt_Loc[0],udg_Bwt_Real[3])set udg_Bwt_Dummy[udg_Bwt_Int]=bj_lastCreatedUnitcall SetUnitAnimation(udg_Bwt_Dummy[udg_Bwt_Int],"spell one")call SetUnitTimeScale(udg_Bwt_Dummy[udg_Bwt_Int],.5)
call SetUnitVertexColor(udg_Bwt_Dummy[udg_Bwt_Int],$FF,$FF,$FF,$7F)set udg_Bwt_Eff[udg_Bwt_Int]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",udg_Bwt_Dummy[udg_Bwt_Int],"hand right")set udg_Bwt_Real[3]=(udg_Bwt_Real[3]+72.)set udg_Bwt_Int=udg_Bwt_Int+1endloopcall RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall TriggerSleepAction(.01)
set udg_Bwt_Real[3]=.0call EnableTrigger(gg_trg_BwtL2)
endifendfunctionfunction InitTrig_BwtL takes nothing returns nothing
set gg_trg_BwtL=CreateTrigger()call DisableTrigger(gg_trg_BwtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_BwtL,.05)call TriggerAddAction(gg_trg_BwtL,function Trig_BwtL_Actions)endfunctionfunction Trig_BwtL2_Func001C takes nothing returns booleanreturn(udg_Bwt_Real[3]<23.)endfunctionfunction Trig_BwtL2_Actions takes nothing returns nothingif(Trig_BwtL2_Func001C())thenset udg_Bwt_Real[4]=72.set udg_Bwt_Int=1loop
exitwhen udg_Bwt_Int>5set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Dummy[udg_Bwt_Int])set udg_Bwt_Loc[1]=PolarProjectionBJ(udg_Bwt_Loc[0],30.,udg_Bwt_Real[4])
call RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall SetUnitPositionLoc(udg_Bwt_Dummy[udg_Bwt_Int],udg_Bwt_Loc[1])call EnumDestructablesInCircleBJ(150.,udg_Bwt_Loc[1],function TreeKiller)call CreateNUnitsAtLoc(1,'h017',udg_Bwt_Own,udg_Bwt_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Bwt_Loc[1])set udg_Bwt_Loc[1]=nullset udg_Bwt_Real[4]=(udg_Bwt_Real[4]+72.)set udg_Bwt_Int=udg_Bwt_Int+1endloopset udg_Bwt_Real[3]=(udg_Bwt_Real[3]+1)else
call DisableTrigger(GetTriggeringTrigger())call Dynamic_Sound("Sounds\\Mihawk2.mp3")call SetUnitVertexColor(udg_Bwt_Unit[0],$FF,$FF,$FF,$FF)
call ShowUnitShow(udg_Bwt_Unit[0])call SelectUnitAddForPlayer(udg_Bwt_Unit[0],udg_Bwt_Own)
set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Bwt_Loc[0]),GetLocationY(udg_Bwt_Loc[0]),1.2,19.,udg_CameraArea,null)call CreateNUnitsAtLoc(1,'h09C',udg_Bwt_Own,udg_Bwt_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitVertexColor(bj_lastCreatedUnit,'d',$FF,'d',$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h09C',udg_Bwt_Own,udg_Bwt_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitVertexColor(bj_lastCreatedUnit,'d',$FF,'d',$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h07I',udg_Bwt_Own,udg_Bwt_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07I',udg_Bwt_Own,udg_Bwt_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07I',udg_Bwt_Own,udg_Bwt_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall SetUnitInvulnerable(udg_Bwt_Unit[1],false)call PauseSystem(udg_Bwt_Unit[1],false)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",udg_Bwt_Unit[1],"origin"))set udg_Bwt_Real[4]=(2000.+(I2R(GetHeroStr(udg_Bwt_Unit[0],false))*(10.*I2R(GetUnitAbilityLevel(udg_Bwt_Unit[0],'A0BN')))))call DisplayText(I2S(R2I(udg_Bwt_Real[4]))+"!",udg_Bwt_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Bwt_Unit[0],udg_Bwt_Unit[1],udg_Bwt_Real[4],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_Bwt_Int=1loop
exitwhen udg_Bwt_Int>5call DestroyEffect(udg_Bwt_Eff[udg_Bwt_Int])
set udg_Bwt_Eff[udg_Bwt_Int]=nullset udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Dummy[udg_Bwt_Int])call CreateNUnitsAtLoc(1,'h013',udg_Bwt_Own,udg_Bwt_Loc[0],GetUnitFacing(udg_Bwt_Dummy[udg_Bwt_Int]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall RemoveUnit(udg_Bwt_Dummy[udg_Bwt_Int])set udg_Bwt_Dummy[udg_Bwt_Int]=nullset udg_Bwt_Int=udg_Bwt_Int+1endloopcall SetUnitPathing(udg_Bwt_Unit[0],true)set udg_Bwt_Loc[0]=GetUnitLoc(udg_Bwt_Unit[0])set udg_Bwt_Loc[1]=Location(udg_Bwt_Real[1],udg_Bwt_Real[2])
call CreateNUnitsAtLoc(1,'h013',udg_Bwt_Own,udg_Bwt_Loc[0],udg_Bwt_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(IsTerrainPathable(GetLocationX(udg_Bwt_Loc[1]),GetLocationY(udg_Bwt_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitX(udg_Bwt_Unit[0],GetLocationX(udg_Bwt_Loc[1]))call SetUnitY(udg_Bwt_Unit[0],GetLocationY(udg_Bwt_Loc[1]))else
call SetUnitPositionLoc(udg_Bwt_Unit[0],udg_Bwt_Loc[1])endifcall RemoveLocation(udg_Bwt_Loc[0])set udg_Bwt_Loc[0]=nullcall RemoveLocation(udg_Bwt_Loc[1])set udg_Bwt_Loc[1]=nullcall TriggerSleepAction(.5)call SetUnitInvulnerable(udg_Bwt_Unit[0],false)call PauseSystem(udg_Bwt_Unit[0],false)set udg_Bwt_Own=null
set udg_Bwt_Unit[0]=null
set udg_Bwt_Unit[1]=null
set udg_Bwt_Real[0]=.0set udg_Bwt_Real[1]=.0set udg_Bwt_Real[2]=.0set udg_Bwt_Real[3]=.0set udg_Bwt_Real[4]=.0set udg_Bwt_Int=0endifendfunctionfunction InitTrig_BwtL2 takes nothing returns nothingset gg_trg_BwtL2=CreateTrigger()
call DisableTrigger(gg_trg_BwtL2)call TriggerRegisterTimerEventPeriodic(gg_trg_BwtL2,.03)
call TriggerAddAction(gg_trg_BwtL2,function Trig_BwtL2_Actions)endfunctionfunction AI_Hidan_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='H09N')endfunctionfunction AI_Hidan_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='H09N')
endfunctionfunction AI_Hidan_AttackedCond takes nothing returns boolean
if(not AI_Hidan_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Hidan_AttackerCond takes nothing returns boolean
if(not AI_Hidan_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Hidan_CondOR takes nothing returns booleanreturn(AI_Hidan_AttackedCond()or AI_Hidan_AttackerCond())endfunctionfunction AI_Hidan_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Hidan_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Hidan_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Hidan_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0BW')call SelectHeroSkill(AI_1,'A0BT')call SelectHeroSkill(AI_1,'A0BR')call SelectHeroSkill(AI_1,'A0BQ')call SelectHeroSkill(AI_1,'A0BO')endifcall IssueImmediateOrderById(AI_1,$D0277)call IssueImmediateOrderById(AI_1,$D026C)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D022E)endifif(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D0065,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0278)set AI_Attacker=falseendifendifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Hidan takes nothing returns nothing
set udg_AI_Trig[26]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[26],Condition(function AI_Hidan_Cond))call TriggerAddAction(udg_AI_Trig[26],function AI_Hidan_Act)
endfunctionfunction Scythe_Slash_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BO')endfunctionfunction Scythe_Slash_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit dummy
local player p=GetOwningPlayer(u)local location array loc
local real facinglocal real arealocal group array glocal group g2local unit pickedlocal real dmgcall PauseSystem(u,true)
call SetUnitTimeScale(u,1.5)
if(IsTriggerEnabled(gg_trg_Curse_Dmg))thencall SetUnitAnimationByIndex(u,17)else
call SetUnitAnimationByIndex(u,5)endifset loc[5]=GetUnitLoc(u)
set dummy=CreateUnit(p,'h08X',GetLocationX(loc[5]),GetLocationY(loc[5]),bj_UNIT_FACING)call SetUnitVertexColor(dummy,$FF,20,20,$FF)
call UnitApplyTimedLife(dummy,'BTLF',1.)
call RemoveLocation(loc[5])set loc[5]=nullcall TriggerSleepAction(.08)
if(GetWidgetLife(u)>0)thenset facing=GetUnitFacing(u)set area=315.set dmg=BasicDmg_Q(u,'A0BO',0)set g2=CreateGroup()
set loc[0]=GetUnitLoc(u)
call SetUnitPositionLoc(dummy,loc[0])call Dynamic_3D("Abilities\\Spells\\Orc\\FeralSpirit\\FeralSpiritTarget1.wav",GetLocationX(loc[0]),GetLocationY(loc[0]))
call CreateNUnitsAtLoc(1,'h09K',p,loc[0],facing)
call SetUnitScale(bj_lastCreatedUnit,8.,8.,8.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,0,$FF)call SetUnitFlyHeight(bj_lastCreatedUnit,100.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set loc[1]=PolarProjectionBJ(loc[0],350.,facing)
set loc[2]=PolarProjectionBJ(loc[0],215.,facing)
set loc[3]=PolarProjectionBJ(loc[2],249.,facing-90.)
set loc[4]=PolarProjectionBJ(loc[2],-250.,facing-90.)call EnumDestructablesInCircleBJ(350.,loc[1],function TreeKiller)call EnumDestructablesInCircleBJ(area,loc[3],function TreeKiller)call EnumDestructablesInCircleBJ(area,loc[4],function TreeKiller)set g[0]=GetUnitsInRangeOfLocAll(350.,loc[1])set g[1]=GetUnitsInRangeOfLocAll(area,loc[3])set g[2]=GetUnitsInRangeOfLocAll(area,loc[4])call GroupAddGroup(g[1],g[0])call GroupAddGroup(g[2],g[0])loop
set picked=FirstOfGroup(g[0])exitwhen picked==nullif(IsUnitInGroup(picked,g2)==false and IsUnitEnemy(picked,p)and GetWidgetLife(picked)>0 and GetUnitAbilityLevel(picked,udg_GlobalSkill[0])==0)thencall GroupRemoveUnit(g2,picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",picked,"origin"))call UnitDamageTarget(u,picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
endifcall GroupRemoveUnit(g[0],picked)set picked=nullendloopcall RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall RemoveLocation(loc[3])set loc[3]=nullcall RemoveLocation(loc[4])set loc[4]=nullcall DestroyGroup(g[0])set g[0]=nullcall DestroyGroup(g[1])set g[1]=nullcall DestroyGroup(g[2])set g[2]=nullcall GroupClear(g2)set g2=nullset facing=.0set area=.0set dmg=.0call TriggerSleepAction(.02)
endifcall PauseSystem(u,false)call SetUnitTimeScale(u,1.)set p=nullset u=nullset dummy=nullendfunctionfunction InitTrig_Scythe_Slash takes nothing returns nothing
set gg_trg_Scythe_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Scythe_Slash,Condition(function Scythe_Slash_Conditions))call TriggerAddAction(gg_trg_Scythe_Slash,function Scythe_Slash_Actions)
endfunctionfunction Trig_Jump_Strike_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BQ')endfunctionfunction Trig_Jump_Strike_Actions takes nothing returns nothinglocal unit array ulocal integer sklvlocal effect eff
local player plocal location array loc
local real dmgset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set sklv=GetUnitAbilityLevel(u[0],'A0BQ')set dmg=(350.+((1.+I2R(GetUnitAbilityLevel(u[0],sklv)))*I2R(GetHeroStr(u[0],true))))
set eff=AddSpecialEffectTarget("SadoBuff.mdl",u[0],"weapon")
call SetUnitTimeScale(u[0],2.)call TriggerSleepAction(.02)
call SetUnitTimeScale(u[0],1.)set p=GetOwningPlayer(u[0])set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set loc[2]=PolarProjectionBJ(loc[1],120.,AngleBetweenPoints(loc[0],loc[1]))call RemoveLocation(loc[0])set loc[0]=nullcall CreateNUnitsAtLoc(1,'h04R',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h048',p,loc[1],bj_UNIT_FACING)
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,0,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call UnitApplyTimedLife(udg_Hidan_Blood,'BTLF',12.)call CreateNUnitsAtLoc(1,'h09U',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)if(IsUnitType(u[1],UNIT_TYPE_HERO))thenif(udg_Hidan_Blood!=null)thencall RemoveUnit(udg_Hidan_Blood)
set udg_Hidan_Blood=null
set udg_Hidan_Target=nullendifset udg_Hidan_Target=u[1]if(IsTriggerEnabled(gg_trg_Curse_Dmg))thenif(udg_Hidan_Eff!=null)thencall DestroyEffect(udg_Hidan_Eff)set udg_Hidan_Eff=nullendifset udg_Hidan_Eff=AddSpecialEffectTarget("Reverse_Star.mdl",udg_Hidan_Target,"origin")endifset udg_Hidan_Blood=CreateUnit(p,'h09O',GetLocationX(loc[1]),GetLocationY(loc[1]),bj_UNIT_FACING)endifcall SetUnitX(u[0],GetLocationX(loc[2]))
call SetUnitY(u[0],GetLocationY(loc[2]))
call IssueTargetOrderById(u[0],$D000F,u[1])call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u[1])>0)thencall CreateNUnitsAtLoc(1,'h09P',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call UnitAddAbility(bj_lastCreatedUnit,'A0BP')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,u[1])endifcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodPeasant.mdl",u[0],"weapon"))call TriggerSleepAction(.1)call DestroyEffect(eff)set eff=null
set p=nullset u[0]=nullset u[1]=nullset sklv=0endfunctionfunction InitTrig_Wielding_Strike takes nothing returns nothingset gg_trg_Wielding_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Wielding_Strike,Condition(function Trig_Jump_Strike_Conditions))
call TriggerAddAction(gg_trg_Wielding_Strike,function Trig_Jump_Strike_Actions)endfunctionfunction Trig_Blood_Die_Conditions takes nothing returns boolean
return(GetDyingUnit()==udg_Hidan_Blood or GetDyingUnit()==udg_Hidan_Target)endfunctionfunction Trig_Blood_Die_Actions takes nothing returns nothingif(GetDyingUnit()!=udg_Hidan_Blood)thencall RemoveUnit(udg_Hidan_Blood)
endifif(udg_Hidan_Eff!=null)thencall DestroyEffect(udg_Hidan_Eff)set udg_Hidan_Eff=nullendifset udg_Hidan_Blood=null
set udg_Hidan_Target=nullendfunctionfunction InitTrig_Blood_Die takes nothing returns nothingset gg_trg_Blood_Die=CreateTrigger()
call TriggerAddCondition(gg_trg_Blood_Die,Condition(function Trig_Blood_Die_Conditions))
call TriggerAddAction(gg_trg_Blood_Die,function Trig_Blood_Die_Actions)set udg_Hidan_BloodTrig=CreateTrigger()call TriggerAddAction(udg_Hidan_BloodTrig,function Trig_Blood_Die_Actions)endfunctionfunction Trig_Czs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BR')endfunctionfunction Trig_Czs_Actions takes nothing returns nothingset udg_Czs_Unit[0]=GetTriggerUnit()
set udg_Czs_Own=GetOwningPlayer(udg_Czs_Unit[0])
set udg_Czs_Real[0]=350.
call UnitAddAbility(udg_Czs_Unit[0],'A0BS')set udg_Czs_Loc=GetUnitLoc(udg_Czs_Unit[0])call EnumDestructablesInCircleBJ(udg_Czs_Real[0],udg_Czs_Loc,function TreeKiller)set udg_Czs_Unit[1]=CreateUnit(udg_Czs_Own,'h09Q',GetLocationX(udg_Czs_Loc),GetLocationY(udg_Czs_Loc),bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'u003',udg_Czs_Own,udg_Czs_Loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[9])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[9],bj_lastCreatedUnit,2)
call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h04O',udg_Czs_Own,udg_Czs_Loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Czs_Loc)
set udg_Czs_Loc=null
call SetUnitTimeScale(udg_Czs_Unit[0],1.7)set udg_Czs_Real[1]=((.6+(.2*I2R(GetUnitAbilityLevel(udg_Czs_Unit[0],'A0BR'))))*I2R(GetHeroStr(udg_Czs_Unit[0],true)))set udg_Czs_Real[2]=(400.+(100.*I2R(GetUnitAbilityLevel(udg_Czs_Unit[0],'A0BR'))))set udg_Czs_Real[2]=udg_Czs_Real[2]+udg_Czs_Real[1]set udg_Czs_Int=0call EnableTrigger(gg_trg_Czs_L)
call EnableTrigger(gg_trg_Czs_End)endfunctionfunction InitTrig_Czs takes nothing returns nothingset gg_trg_Czs=CreateTrigger()call TriggerAddCondition(gg_trg_Czs,Condition(function Trig_Czs_Conditions))
call TriggerAddAction(gg_trg_Czs,function Trig_Czs_Actions)endfunctionfunction Trig_Czs_L_Func011002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Czs_Own))
endfunctionfunction Trig_Czs_L_Func011002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_Czs_L_Func011002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Czs_L_Func011002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Czs_L_Func011002003002001(),Trig_Czs_L_Func011002003002002())endfunctionfunction Trig_Czs_L_Func011002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Czs_L_Func011002003001(),Trig_Czs_L_Func011002003002())endfunctionfunction Trig_Czs_L_Func014A takes nothing returns nothinglocal unit u=GetEnumUnit()local location loccall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\HydraliskImpact\\HydraliskImpact.mdl",u,"chest"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",u,"chest"))
call UnitDamageTarget(udg_Czs_Unit[0],u,udg_Czs_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u)<1)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'h09P',udg_Czs_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction Trig_Czs_L_Actions takes nothing returns nothingset udg_Czs_Int=(udg_Czs_Int+1)set udg_Czs_Loc=GetUnitLoc(udg_Czs_Unit[0])call CreateNUnitsAtLoc(1,'h09S',udg_Czs_Own,udg_Czs_Loc,(GetUnitFacing(udg_Czs_Unit[0])+GetRandomReal(-69.,68.)))call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,'x')call SetUnitTimeScale(bj_lastCreatedUnit,1.8)call SetUnitAnimation(bj_lastCreatedUnit,"spell channel")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.3)call CreateNUnitsAtLoc(1,'h09R',udg_Czs_Own,udg_Czs_Loc,GetRandomReal(0,360.))call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)set udg_Czs_Group=GetUnitsInRangeOfLocMatching(udg_Czs_Real[0],udg_Czs_Loc,Condition(function Trig_Czs_L_Func011002003))
call RemoveLocation(udg_Czs_Loc)
set udg_Czs_Loc=null
call ForGroupBJ(udg_Czs_Group,function Trig_Czs_L_Func014A)call DestroyGroup(udg_Czs_Group)
set udg_Czs_Group=nullendfunctionfunction InitTrig_Czs_L takes nothing returns nothingset gg_trg_Czs_L=CreateTrigger()
call DisableTrigger(gg_trg_Czs_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Czs_L,.2)call TriggerAddAction(gg_trg_Czs_L,function Trig_Czs_L_Actions)endfunctionfunction Trig_Czs_End_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BR')endfunctionfunction Trig_Czs_End_Func005Func011002003001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Czs_Own))
endfunctionfunction Trig_Czs_End_Func005Func011002003002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_Czs_End_Func005Func011002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Czs_End_Func005Func011002003002 takes nothing returns booleanreturn GetBooleanAnd(Trig_Czs_End_Func005Func011002003002001(),Trig_Czs_End_Func005Func011002003002002())endfunctionfunction Trig_Czs_End_Func005Func011002003 takes nothing returns boolean
return GetBooleanAnd(Trig_Czs_End_Func005Func011002003001(),Trig_Czs_End_Func005Func011002003002())endfunctionfunction Trig_Czs_End_Func005Func014A takes nothing returns nothinglocal unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h04D',udg_Czs_Own,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h09P',udg_Czs_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(loc)
set loc=null
call UnitDamageTarget(udg_Czs_Unit[0],u,udg_Czs_Real[2],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_Czs_End_Func005C takes nothing returns boolean
return(udg_Czs_Int>6)endfunctionfunction Trig_Czs_End_Actions takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_Czs_L)call RemoveUnit(udg_Czs_Unit[1])
call UnitRemoveAbility(udg_Czs_Unit[0],'A0BS')if(Trig_Czs_End_Func005C())thencall SetUnitAnimation(udg_Czs_Unit[0],"attack slam")
set udg_Czs_Real[0]=450.
set udg_Czs_Real[1]=(udg_Czs_Real[1]*4.)
set udg_Czs_Loc=GetUnitLoc(udg_Czs_Unit[0])set udg_Czs_Int=1loop
exitwhen udg_Czs_Int>9set udg_Czs_Loc2=PolarProjectionBJ(udg_Czs_Loc,200.,(I2R(udg_Czs_Int)*90.))call CreateNUnitsAtLoc(1,'h04O',udg_Czs_Own,udg_Czs_Loc2,bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Czs_Loc2)set udg_Czs_Loc2=nullset udg_Czs_Int=udg_Czs_Int+1endloopcall CreateNUnitsAtLoc(1,'h096',udg_Czs_Own,udg_Czs_Loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,0,$FF)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set udg_Czs_Group=GetUnitsInRangeOfLocMatching(udg_Czs_Real[0],udg_Czs_Loc,Condition(function Trig_Czs_End_Func005Func011002003))call RemoveLocation(udg_Czs_Loc)
set udg_Czs_Loc=null
call ForGroupBJ(udg_Czs_Group,function Trig_Czs_End_Func005Func014A)
call DestroyGroup(udg_Czs_Group)
set udg_Czs_Group=nullcall TriggerSleepAction(.2)endifcall SetUnitTimeScale(udg_Czs_Unit[0],1.)set udg_Czs_Own=null
set udg_Czs_Unit[0]=null
set udg_Czs_Unit[1]=null
set udg_Czs_Real[0]=.0set udg_Czs_Real[1]=.0set udg_Czs_Real[2]=.0set udg_Czs_Int=0endfunctionfunction InitTrig_Czs_End takes nothing returns nothingset gg_trg_Czs_End=CreateTrigger()call DisableTrigger(gg_trg_Czs_End)call TriggerAddCondition(gg_trg_Czs_End,Condition(function Trig_Czs_End_Conditions))
call TriggerAddAction(gg_trg_Czs_End,function Trig_Czs_End_Actions)endfunctionfunction Trig_Curse_Jutsu_Cond takes nothing returns boolean
return(GetSpellAbilityId()=='A0BT')endfunctionfunction Trig_Curse_Jutsu_Act takes nothing returns nothinglocal player plocal real x
local real y
local integer my_buff='B02L'
local real delay=.2local integer sklvset udg_Hidan=GetTriggerUnit()if(udg_Hidan_Blood!=null)thencall UnitAddAbility(udg_Hidan,'A0BU')call AddUnitAnimationProperties(udg_Hidan,"Alternate",true)set udg_Hidan_Reduce=.35
call EnableTrigger(gg_trg_Curse_Dmg)
call EnableTrigger(gg_trg_Curse_Area)set udg_Hidan_Eff=AddSpecialEffectTarget("Reverse_Star.mdl",udg_Hidan_Target,"origin")set p=GetOwningPlayer(udg_Hidan)
call DisplayText("Jujutsu Shiji Hyoketsu",udg_Hidan,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(udg_Hidan)set y=GetUnitY(udg_Hidan)call RemoveUnit(udg_Hidan_Blood)
set udg_Hidan_Blood=null
set udg_Hidan_Blood=CreateUnit(p,'h09O',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(udg_Hidan_Blood,'BTLF',15.)set udg_Hidan_Curse=CreateUnit(p,'h09V',x,y,GetUnitFacing(udg_Hidan))call UnitRemoveAbility(udg_Hidan_Curse,'Amov')call UnitAddAbility(udg_Hidan_Curse,udg_TransformSkill)call IssueImmediateOrderById(udg_Hidan_Curse,$D0080)
set bj_lastCreatedUnit=CreateUnit(p,'h043',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h04D',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h04D',x,y,GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h09W',x,y,GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call TransfromAction(udg_Hidan,x,y)set p=nullloop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(udg_Hidan,my_buff)<1)or(udg_Hidan_Target==null)
endloopcall DisableTrigger(gg_trg_Curse_Area)call DisableTrigger(gg_trg_Curse_Dmg)call AddUnitAnimationProperties(udg_Hidan,"Alternate",false)
call UnitRemoveAbility(udg_Hidan,'A0BU')
call SetUnitAnimation(udg_Hidan,"morph alternate")set udg_Hidan_Reduce=.0if(GetWidgetLife(udg_Hidan)>0 and udg_Hidan_Eff!=null)thencall DestroyEffect(udg_Hidan_Eff)set udg_Hidan_Eff=nullendifif(GetUnitAbilityLevel(udg_Hidan,'A0BV')>0)thencall RemoveUnit(udg_Hidan_AreaUnit)set udg_Hidan_AreaUnit=nullcall UnitRemoveAbility(udg_Hidan,'A0BV')
endifcall UnitRemoveAbility(udg_Hidan,'A0BV')
call RemoveUnit(udg_Hidan_Curse)
set udg_Hidan_Curse=null
else
call IssueImmediateOrderById(udg_Hidan,$D0004)set sklv=GetUnitAbilityLevel(udg_Hidan,'A0BT')call UnitRemoveAbility(udg_Hidan,'A0BT')
call UnitAddAbility(udg_Hidan,'A0BT')call SetUnitAbilityLevel(udg_Hidan,'A0BT',sklv)set sklv=0call TriggerSleepAction(.0)call SetUnitState(udg_Hidan,UNIT_STATE_MANA,(GetUnitState(udg_Hidan,UNIT_STATE_MANA)+250.))endifif(GetUnitAbilityLevel(udg_Hidan,my_buff)!=0)thencall UnitRemoveAbility(udg_Hidan,my_buff)endifset udg_Hidan=nullset delay=.0
set my_buff=0endfunctionfunction InitTrig_Curse_Jutsu takes nothing returns nothingset gg_trg_Curse_Jutsu=CreateTrigger()call TriggerAddCondition(gg_trg_Curse_Jutsu,Condition(function Trig_Curse_Jutsu_Cond))call TriggerAddAction(gg_trg_Curse_Jutsu,function Trig_Curse_Jutsu_Act)endfunctionfunction Trig_Curse_Dmg_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer dmg=R2I(GetEventDamage())local real heal=(udg_Hidan_Reduce*I2R(dmg))local player plocal real x
local real y
call SetUnitState(u,UNIT_STATE_LIFE,(GetUnitState(u,UNIT_STATE_LIFE)+heal))if(GetUnitAbilityLevel(udg_Hidan,'A0BV')>0)and(udg_Hidan_Target!=null)thenset x=GetUnitX(udg_Hidan_Target)
set y=GetUnitY(udg_Hidan_Target)
call UnitPureDamageTarget(u,udg_Hidan_Target,I2R(dmg))if(GetUnitState(udg_Hidan_Target,UNIT_STATE_LIFE)<1)then
set p=GetOwningPlayer(u)
set bj_lastCreatedUnit=CreateUnit(p,'h07I',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call UnitApplyTimedLife(CreateUnit(p,'h09X',x,y,GetUnitFacing(udg_Hidan_Target)),'BTLF',3.)call UnitApplyTimedLife(CreateUnit(p,'h04D',x,y,GetRandomReal(0,360)),'BTLF',3.)
call UnitApplyTimedLife(CreateUnit(p,'h04D',x,y,GetRandomReal(0,360)),'BTLF',3.)
call UnitApplyTimedLife(CreateUnit(p,'h043',x,y,bj_UNIT_FACING),'BTLF',3.)call UnitApplyTimedLife(CreateUnit(p,'h09Z',x,y,bj_UNIT_FACING),'BTLF',1.)set p=nullcall Dynamic_Sound("Sounds\\Hidan2.mp3")
endifendifset u=nullendfunctionfunction InitTrig_Curse_Dmg takes nothing returns nothingset gg_trg_Curse_Dmg=CreateTrigger()
call DisableTrigger(gg_trg_Curse_Dmg)call TriggerAddAction(gg_trg_Curse_Dmg,function Trig_Curse_Dmg_Actions)endfunctionfunction Trig_Curse_Area_Actions takes nothing returns nothinglocal real array xyset xy[0]=GetUnitX(udg_Hidan)set xy[1]=GetUnitY(udg_Hidan)set xy[2]=GetUnitX(udg_Hidan_Curse)set xy[3]=GetUnitY(udg_Hidan_Curse)if(GetUnitAbilityLevel(udg_Hidan,'A0BV')==0)then
if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])<$97)thencall UnitAddAbility(udg_Hidan,'A0BV')set udg_Hidan_AreaUnit=CreateUnit(GetOwningPlayer(udg_Hidan),'h09Y',xy[2],xy[3],bj_UNIT_FACING)endifelse
if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>$96)thencall RemoveUnit(udg_Hidan_AreaUnit)set udg_Hidan_AreaUnit=nullcall UnitRemoveAbility(udg_Hidan,'A0BV')
endifendifendfunctionfunction InitTrig_Curse_Area takes nothing returns nothingset gg_trg_Curse_Area=CreateTrigger()call DisableTrigger(gg_trg_Curse_Area)call TriggerRegisterTimerEventPeriodic(gg_trg_Curse_Area,.08)call TriggerAddAction(gg_trg_Curse_Area,function Trig_Curse_Area_Actions)endfunctionfunction Spear_Self_Pain_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0BW')endfunctionfunction Spear_Self_Pain_Spawn takes location loc,player p returns nothingcall CreateNUnitsAtLoc(1,'h07I',p,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h04D',p,loc,GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h04D',p,loc,GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h043',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h09Z',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endfunctionfunction Spear_Self_Pain_Return takes unit u returns nothing
local integer skill='A0BW'local integer sklv=GetUnitAbilityLevel(u,skill)call UnitRemoveAbility(u,skill)call UnitAddAbility(u,skill)
call SetUnitAbilityLevel(u,skill,sklv)set sklv=0call SetUnitTimeScale(u,1.)call PauseSystem(u,false)call IssueImmediateOrderById(u,$D0004)call TriggerSleepAction(.0)call SetUnitState(u,UNIT_STATE_MANA,(GetUnitState(u,UNIT_STATE_MANA)+400.))set u=nullendfunctionfunction Spear_Self_Pain_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real dmglocal location array loc
call PauseSystem(u,true)
call SetUnitTimeScale(u,.3)if(udg_Hidan_Target==null)thencall Spear_Self_Pain_Return(u)returnendifcall RemoveUnit(udg_Hidan_Blood)
set udg_Hidan_Blood=null
set loc[2]=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h09O',GetOwningPlayer(u),loc[2],bj_UNIT_FACING)set udg_Hidan_Blood=bj_lastCreatedUnitcall UnitApplyTimedLife(udg_Hidan_Blood,'BTLF',15.)call RemoveLocation(loc[2])set loc[2]=nullcall SetUnitAnimation(u,"spell")
call Dynamic_Sound("Sounds\\Hidan1.mp3")
call TriggerSleepAction(1.1)
if(udg_Hidan_Target==null)thencall Spear_Self_Pain_Return(u)else
if(GetWidgetLife(u)>0)thencall SetUnitTimeScale(u,1.7)
call TriggerSleepAction(.04)
if(udg_Hidan_Target==null)thencall Spear_Self_Pain_Return(u)returnendifset dmg=(1800.+((10.*I2R(GetUnitAbilityLevel(u,'A0BW')))*I2R(GetHeroStr(u,false))))set p=GetOwningPlayer(u)
set loc[0]=GetUnitLoc(u)
call Dynamic_GroupShake(GetLocationX(loc[0]),GetLocationY(loc[0]),1.2,9.,udg_CameraArea,null)set loc[1]=GetUnitLoc(udg_Hidan_Target)call CreateNUnitsAtLoc(1,'h09X',p,loc[0],GetUnitFacing(u))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h09X',p,loc[1],GetUnitFacing(u))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call Spear_Self_Pain_Spawn(loc[0],p)
call Spear_Self_Pain_Spawn(loc[1],p)
call DisplayText(I2S(R2I(dmg))+"!",udg_Hidan_Target,.027,true,$FF,0,0,$FF)call UnitDamageTarget(u,udg_Hidan_Target,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(udg_Hidan_Target)>0)thencall CreateNUnitsAtLoc(1,'u003',p,loc[1],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[3],bj_lastCreatedUnit,3)
call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Hidan_Target)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
call Dynamic_Sound("Sounds\\Hidan2.mp3")
endifcall RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullset p=nullset dmg=.0call TriggerSleepAction(.01)
endifcall SetUnitTimeScale(u,1.)call PauseSystem(u,false)set u=nullendifendfunctionfunction InitTrig_Spear_Self_Pain takes nothing returns nothingset gg_trg_Spear_Self_Pain=CreateTrigger()call TriggerAddCondition(gg_trg_Spear_Self_Pain,Condition(function Spear_Self_Pain_Conditions))call TriggerAddAction(gg_trg_Spear_Self_Pain,function Spear_Self_Pain_Actions)endfunctionfunction AI_Evil_Ichigo_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='H006' or GetUnitTypeId(GetTriggerUnit())=='H0A2')endfunctionfunction AI_Evil_Ichigo_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='H006' or GetUnitTypeId(GetAttacker())=='H0A2')
endfunctionfunction AI_Evil_Ichigo_AttackedCond takes nothing returns booleanif(not AI_Evil_Ichigo_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Evil_Ichigo_AttackerCond takes nothing returns booleanif(not AI_Evil_Ichigo_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Evil_Ichigo_CondOR takes nothing returns boolean
return(AI_Evil_Ichigo_AttackedCond()or AI_Evil_Ichigo_AttackerCond())endfunctionfunction AI_Evil_Ichigo_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Evil_Ichigo_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Evil_Ichigo_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Evil_Ichigo_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0C5')call SelectHeroSkill(AI_1,'A0C3')call SelectHeroSkill(AI_1,'A0C2')call SelectHeroSkill(AI_1,'A0C1')call SelectHeroSkill(AI_1,'A0BY')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point3)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D00DD,AI_2)call IssuePointOrderByIdLoc(AI_1,$D0271,AI_Point3)if(AI_Attacker)thencall IssueTargetOrderById(AI_1,$D007F,AI_2)call IssueImmediateOrderById(AI_1,$D02B7)set AI_Attacker=falseendifendifcall RemoveLocation(AI_Point3)set AI_Point3=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Evil_Ichigo takes nothing returns nothingset udg_AI_Trig[27]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[27],Condition(function AI_Evil_Ichigo_Cond))call TriggerAddAction(udg_AI_Trig[27],function AI_Evil_Ichigo_Act)endfunctionfunction Trig_White_Getsuga_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0BY')endfunctionfunction Trig_White_Getsuga_Actions takes nothing returns nothinglocal unit array ulocal location array loc
local player plocal real facinglocal integer skillset u[0]=GetTriggerUnit()set loc[0]=GetSpellTargetLoc()set p=GetOwningPlayer(u[0])set loc[1]=GetUnitLoc(u[0])call CreateNUnitsAtLoc(1,'h0A0',p,loc[1],bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,1.25)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set facing=AngleBetweenPoints(loc[1],loc[0])
call RemoveLocation(loc[0])set loc[0]=nullset loc[2]=PolarProjectionBJ(loc[1],50.,facing)call RemoveLocation(loc[1])set loc[1]=nullset u[1]=CreateUnit(p,'u003',GetLocationX(loc[2]),GetLocationY(loc[2]),facing)set loc[3]=PolarProjectionBJ(loc[2],50.,facing)call RemoveLocation(loc[2])set loc[2]=nullif(GetUnitTypeId(u[0])=='H0A2')thenset skill='A0C0'
call SetUnitScale(u[1],8.25,8.25,8.25)call UnitAddAbility(u[1],skill)call SetUnitAbilityLevel(u[1],skill,GetUnitAbilityLevel(u[0],'A0BY'))call IssuePointOrderByIdLoc(u[1],$D00FA,loc[3])else
set skill='A0BZ'
call SetUnitScale(u[1],2.,2.,2.)
call UnitAddAbility(u[1],skill)call SetUnitAbilityLevel(u[1],skill,GetUnitAbilityLevel(u[0],'A0BY'))call IssuePointOrderByIdLoc(u[1],$D009D,loc[3])endifcall RemoveLocation(loc[3])set loc[3]=nullcall UnitApplyTimedLife(u[1],'BTLF',2.)call DisplayText("Getsuga Tensho",u[0],.023,true,$FF,$FF,$FF,$FF)set p=nullset u[0]=nullset u[1]=nullset facing=.0set skill=0endfunctionfunction InitTrig_White_Getsuga takes nothing returns nothingset gg_trg_White_Getsuga=CreateTrigger()
call TriggerAddCondition(gg_trg_White_Getsuga,Condition(function Trig_White_Getsuga_Conditions))
call TriggerAddAction(gg_trg_White_Getsuga,function Trig_White_Getsuga_Actions)endfunctionfunction Trig_Getsuga_Strike_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C1')endfunctionfunction Trig_Getsuga_Strike_Actions takes nothing returns nothinglocal unit array ulocal effect eff
local location array loc
set u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set eff=AddSpecialEffectTarget("WhiteCripple.mdx",u[0],"origin")
call TriggerSleepAction(.01)
set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set loc[2]=PolarProjectionBJ(loc[1],140.,AngleBetweenPoints(loc[0],loc[1]))call RemoveLocation(loc[0])set loc[0]=nullcall EnumDestructablesInCircleBJ(300.,loc[2],function TreeKiller)call SetUnitPositionLoc(u[0],loc[2])
call SetUnitFacing(u[0],AngleBetweenPoints(loc[2],loc[1]))call CreateNUnitsAtLoc(1,'h0A1',GetOwningPlayer(u[0]),loc[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(loc[1])set loc[1]=nullcall DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl",loc[2]))call RemoveLocation(loc[2])set loc[2]=nullcall UnitDamageTarget(u[0],u[1],(100.+('d'*I2R(GetUnitAbilityLevel(u[0],'A0C1')))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u[1])>0 and GetUnitTypeId(u[0])=='H0A2')thencall UnitDamageTarget(u[0],u[1],('n'*I2R(GetUnitAbilityLevel(u[0],'A011'))),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
endifcall DisplayText("Zangetsu Sutoraiku",u[0],.023,false,$FF,$FF,$FF,$FF)set u[0]=nullset u[1]=nullcall TriggerSleepAction(.5)call DestroyEffect(eff)set eff=null
endfunctionfunction InitTrig_Getsuga_Strike takes nothing returns nothingset gg_trg_Getsuga_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Getsuga_Strike,Condition(function Trig_Getsuga_Strike_Conditions))call TriggerAddAction(gg_trg_Getsuga_Strike,function Trig_Getsuga_Strike_Actions)endfunctionfunction Trig_BtzInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0C2')endfunctionfunction Trig_BtzInit_DieAct takes nothing returns nothingcall DisableTrigger(udg_Btz_TrigDie)
set udg_Btz_Bool=falseif(IsTriggerEnabled(gg_trg_Btz_Atk))then
call DisableTrigger(gg_trg_Btz_Atk)endifset udg_Btz_Unit=nullset udg_Btz_Delay=.0
endfunctionfunction Trig_BtzInit_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()set udg_Btz_TrigDie=CreateTrigger()call DisableTrigger(udg_Btz_TrigDie)
call TriggerRegisterUnitEvent(udg_Btz_TrigDie,u,EVENT_UNIT_DEATH)call TriggerAddAction(udg_Btz_TrigDie,function Trig_BtzInit_DieAct)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Btz_Init takes nothing returns nothing
set gg_trg_Btz_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Btz_Init,Condition(function Trig_BtzInit_Conditions))call TriggerAddAction(gg_trg_Btz_Init,function Trig_BtzInit_Actions)
endfunctionfunction Trig_Btz_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C2')endfunctionfunction Trig_Btz_Actions takes nothing returns nothinglocal player plocal real x
local real y
set udg_Btz_Unit=GetTriggerUnit()if(GetUnitTypeId(udg_Btz_Unit)!='H0A2')thenset udg_Btz_Bool=trueset udg_Btz_Delay=(.9-(.1*GetUnitAbilityLevel(udg_Btz_Unit,'A0C2')))
call EnableTrigger(gg_trg_Btz_Atk)call EnableTrigger(udg_Btz_TrigDie)set p=GetOwningPlayer(udg_Btz_Unit)call DisplayText("Bankai Tensa Zangetsu",udg_Btz_Unit,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(udg_Btz_Unit)
set y=GetUnitY(udg_Btz_Unit)
set bj_lastCreatedUnit=CreateUnit(p,'h019',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h07U',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h07T',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h0A3',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call TransfromAction(udg_Btz_Unit,x,y)set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Btz_Unit)
else
set udg_Btz_Bool=falseif(IsTriggerEnabled(gg_trg_Btz_Atk))then
call DisableTrigger(gg_trg_Btz_Atk)endifcall DisableTrigger(udg_Btz_TrigDie)
set udg_Btz_Delay=.0
call TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Btz_Unit)
set udg_Btz_Unit=nullendifendfunctionfunction InitTrig_Btz takes nothing returns nothingset gg_trg_Btz=CreateTrigger()call TriggerAddCondition(gg_trg_Btz,Condition(function Trig_Btz_Conditions))
call TriggerAddAction(gg_trg_Btz,function Trig_Btz_Actions)endfunctionfunction Trig_Btz_Atk_Conditions takes nothing returns booleanreturn(GetAttacker()==udg_Btz_Unit)endfunctionfunction Trig_Btz_Atk_Actions takes nothing returns nothinglocal unit Btz_U=GetAttacker()local unit Btz_T=GetTriggerUnit()local location Btz_P1=GetUnitLoc(Btz_T)local location Btz_P2=PolarProjectionBJ(Btz_P1,100.,GetRandomReal(0,360))call DisableTrigger(gg_trg_Btz_Atk)if(IsTerrainPathable(GetLocationX(Btz_P2),GetLocationY(Btz_P2),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(150.,Btz_P2,function TreeKiller)call SetUnitX(Btz_U,GetLocationX(Btz_P2))call SetUnitY(Btz_U,GetLocationY(Btz_P2))call SetUnitFacing(Btz_U,AngleBetweenPoints(Btz_P2,Btz_P1))endifcall RemoveLocation(Btz_P1)set Btz_P1=nullcall RemoveLocation(Btz_P2)set Btz_P2=nullcall DestroyEffect(AddSpecialEffectTarget("Sonido.mdx",Btz_U,"origin"))set Btz_T=nullset Btz_U=nullcall TriggerSleepAction(udg_Btz_Delay)if(udg_Btz_Bool)then
call EnableTrigger(gg_trg_Btz_Atk)endifendfunctionfunction InitTrig_Btz_Atk takes nothing returns nothingset gg_trg_Btz_Atk=CreateTrigger()call DisableTrigger(gg_trg_Btz_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Btz_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Btz_Atk,Condition(function Trig_Btz_Atk_Conditions))
call TriggerAddAction(gg_trg_Btz_Atk,function Trig_Btz_Atk_Actions)endfunctionfunction Trig_Hsm_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C3')endfunctionfunction Trig_Hsm_Actions takes nothing returns nothingset udg_Hsm_Unit[0]=GetTriggerUnit()
set udg_Hsm_Loc[0]=GetSpellTargetLoc()set udg_Hsm_Loc[1]=GetUnitLoc(udg_Hsm_Unit[0])set udg_Hsm_Real[0]=AngleBetweenPoints(udg_Hsm_Loc[1],udg_Hsm_Loc[0])set udg_Hsm_Real[1]=GetLocationX(udg_Hsm_Loc[0])
set udg_Hsm_Real[2]=GetLocationY(udg_Hsm_Loc[0])
call RemoveLocation(udg_Hsm_Loc[0])set udg_Hsm_Loc[0]=nullcall RemoveLocation(udg_Hsm_Loc[1])set udg_Hsm_Loc[1]=nullcall PauseSystem(udg_Hsm_Unit[0],true)call SetUnitInvulnerable(udg_Hsm_Unit[0],true)call SetUnitPathing(udg_Hsm_Unit[0],false)call TriggerSleepAction(.01)
set udg_Hsm_Own=GetOwningPlayer(udg_Hsm_Unit[0])
set udg_Hsm_Int=1call EnableTrigger(gg_trg_HsmL)endfunctionfunction InitTrig_Hsm takes nothing returns nothingset gg_trg_Hsm=CreateTrigger()call TriggerAddCondition(gg_trg_Hsm,Condition(function Trig_Hsm_Conditions))
call TriggerAddAction(gg_trg_Hsm,function Trig_Hsm_Actions)endfunctionfunction Trig_HsmL_Func001C takes nothing returns booleanreturn(udg_Hsm_Int<$A)endfunctionfunction Trig_HsmL_Actions takes nothing returns nothing
if(Trig_HsmL_Func001C())then
call SetUnitVertexColor(udg_Hsm_Unit[0],$FF,$FF,$FF,($FF-udg_Hsm_Int*28))set udg_Hsm_Loc[0]=GetUnitLoc(udg_Hsm_Unit[0])set udg_Hsm_Loc[1]=PolarProjectionBJ(udg_Hsm_Loc[0],-9.,udg_Hsm_Real[0])
call RemoveLocation(udg_Hsm_Loc[0])set udg_Hsm_Loc[0]=nullcall SetUnitPositionLocFacingBJ(udg_Hsm_Unit[0],udg_Hsm_Loc[1],udg_Hsm_Real[0])call RemoveLocation(udg_Hsm_Loc[1])set udg_Hsm_Loc[1]=nullset udg_Hsm_Int=(udg_Hsm_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call ShowUnitHide(udg_Hsm_Unit[0])set udg_Hsm_Loc[0]=Location(udg_Hsm_Real[1],udg_Hsm_Real[2])
if(GetUnitTypeId(udg_Hsm_Unit[0])=='H0A2')thenset udg_Hsm_Unit[1]=CreateUnit(udg_Hsm_Own,'h0A5',GetLocationX(udg_Hsm_Loc[0]),GetLocationY(udg_Hsm_Loc[0]),udg_Hsm_Real[0])
set udg_Hsm_Eff[0]=AddSpecialEffectTarget("IshidaBuff.mdl",udg_Hsm_Unit[1],"weapon second")call SetUnitTimeScale(udg_Hsm_Unit[1],.65)call SetUnitAnimationByIndex(udg_Hsm_Unit[1],$C)
else
set udg_Hsm_Unit[1]=CreateUnit(udg_Hsm_Own,'h0A4',GetLocationX(udg_Hsm_Loc[0]),GetLocationY(udg_Hsm_Loc[0]),udg_Hsm_Real[0])
set udg_Hsm_Eff[0]=AddSpecialEffectTarget("IshidaBuff.mdl",udg_Hsm_Unit[1],"weapon first")call SetUnitTimeScale(udg_Hsm_Unit[1],.65)call SetUnitAnimation(udg_Hsm_Unit[1],"attack")endifcall RemoveLocation(udg_Hsm_Loc[0])set udg_Hsm_Loc[0]=nullset udg_Hsm_Eff[1]=AddSpecialEffectTarget("Abilities\\Spells\\Items\\TomeOfRetraining\\TomeOfRetrainingCaster.mdl",udg_Hsm_Unit[1],"origin")
set udg_Hsm_Eff[2]=AddSpecialEffectTarget("WhiteCripple.mdl",udg_Hsm_Unit[1],"origin")call SoundPatch_Spell(udg_soundPatch_Bleach+"\\WhiteIchigo\\HighSlam.wav",GetUnitX(udg_Hsm_Unit[1]),GetUnitY(udg_Hsm_Unit[1]))set udg_Hsm_Int=0call EnableTrigger(gg_trg_HsmL2)
endifendfunctionfunction InitTrig_HsmL takes nothing returns nothing
set gg_trg_HsmL=CreateTrigger()call DisableTrigger(gg_trg_HsmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HsmL,.05)call TriggerAddAction(gg_trg_HsmL,function Trig_HsmL_Actions)endfunctionfunction Trig_HsmL2_Func001C takes nothing returns booleanreturn(udg_Hsm_Int<27)endfunctionfunction Trig_HsmL2_Actions takes nothing returns nothingif(Trig_HsmL2_Func001C())thencall SetUnitFlyHeight(udg_Hsm_Unit[1],(GetUnitFlyHeight(udg_Hsm_Unit[1])-20.),.0)set udg_Hsm_Loc[0]=Location(udg_Hsm_Real[1],udg_Hsm_Real[2])
call SetUnitPositionLoc(udg_Hsm_Unit[1],udg_Hsm_Loc[0])call RemoveLocation(udg_Hsm_Loc[0])set udg_Hsm_Loc[0]=nullcall SetUnitFacing(udg_Hsm_Unit[1],udg_Hsm_Real[0])set udg_Hsm_Int=(udg_Hsm_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call DestroyEffect(udg_Hsm_Eff[0])set udg_Hsm_Eff[0]=nullcall DestroyEffect(udg_Hsm_Eff[1])set udg_Hsm_Eff[1]=nullcall DestroyEffect(udg_Hsm_Eff[2])set udg_Hsm_Eff[2]=nullset udg_Hsm_Loc[0]=Location(udg_Hsm_Real[1],udg_Hsm_Real[2])
call SetUnitPositionLoc(udg_Hsm_Unit[0],udg_Hsm_Loc[0])call EnumDestructablesInCircleBJ(600.,udg_Hsm_Loc[0],function TreeKiller)call CreateNUnitsAtLoc(1,'h0A0',udg_Hsm_Own,udg_Hsm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h08V',udg_Hsm_Own,udg_Hsm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h08Q',udg_Hsm_Own,udg_Hsm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h04R',udg_Hsm_Own,udg_Hsm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'u003',udg_Hsm_Own,udg_Hsm_Loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0C4')call SetUnitAbilityLevelSwapped('A0C4',bj_lastCreatedUnit,GetUnitAbilityLevel(udg_Hsm_Unit[0],'A0C3'))call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Hsm_Loc[0])set udg_Hsm_Loc[0]=nullcall SetUnitFacing(udg_Hsm_Unit[0],udg_Hsm_Real[0])call ShowUnitShow(udg_Hsm_Unit[0])call SetUnitVertexColor(udg_Hsm_Unit[0],$FF,$FF,$FF,$FF)
call RemoveUnit(udg_Hsm_Unit[1])
call PauseSystem(udg_Hsm_Unit[0],false)call SetUnitTimeScale(udg_Hsm_Unit[1],1.)call SetUnitInvulnerable(udg_Hsm_Unit[0],false)call SetUnitPathing(udg_Hsm_Unit[0],true)call SelectUnitAddForPlayer(udg_Hsm_Unit[0],udg_Hsm_Own)
set udg_Hsm_Own=null
set udg_Hsm_Unit[0]=null
set udg_Hsm_Unit[1]=null
set udg_Hsm_Real[0]=.0set udg_Hsm_Real[1]=.0set udg_Hsm_Real[2]=.0set udg_Hsm_Int=0endifendfunctionfunction InitTrig_HsmL2 takes nothing returns nothingset gg_trg_HsmL2=CreateTrigger()
call DisableTrigger(gg_trg_HsmL2)call TriggerRegisterTimerEventPeriodic(gg_trg_HsmL2,.03)
call TriggerAddAction(gg_trg_HsmL2,function Trig_HsmL2_Actions)endfunctionfunction Black_Moon_Slash_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C5')endfunctionfunction Black_Moon_Slash_Move takes unit u1,unit u2,integer sklv returns nothinglocal location array loc
local real facinglocal player p=GetOwningPlayer(u1)local integer skill='A0C0'set loc[0]=GetUnitLoc(u2)set loc[1]=PolarProjectionBJ(loc[0],70.,GetRandomReal(0,360))call EnumDestructablesInCircleBJ(170.,loc[1],function TreeKiller)set facing=AngleBetweenPoints(loc[1],loc[0])
call DestroyEffect(AddSpecialEffectLoc("Sonido.mdl",loc[1]))
call SetUnitPositionLoc(u1,loc[1])call SetUnitFacing(u1,facing)call CreateNUnitsAtLoc(1,'h0A0',p,loc[1],bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h0A6',p,loc[1],facing)
call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'u003',p,loc[1],facing)
call SetUnitScale(bj_lastCreatedUnit,8.25,8.25,8.25)
call UnitAddAbility(bj_lastCreatedUnit,skill)call SetUnitAbilityLevel(bj_lastCreatedUnit,skill,sklv)call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D00FA,loc[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall SetUnitAnimation(u1,"attack")call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl",u2,"origin"))call UnitDamageTarget(u1,u2,(3.*I2R(GetHeroStr(u1,true))),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set p=nullset facing=.0set skill=0endfunctionfunction Black_Moon_Slash_Actions takes nothing returns nothinglocal unit array ulocal player plocal integer sklvlocal integer ilocal location array loc
local group glocal real delay=.3local real area=700.
local effect array effset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])set sklv=(GetUnitAbilityLevel(u[0],'A0C5')+1)set eff[0]=AddSpecialEffectTarget("WhiteCripple.mdl",u[0],"origin")set eff[1]=AddSpecialEffectTarget("WhiteCripple.mdl",u[0],"chest")call UnitAddType(u[0],UNIT_TYPE_MAGIC_IMMUNE)call SetUnitAnimation(u[0],"stand")call SetUnitVertexColor(u[0],$FF,$FF,$FF,$7F)call Dynamic_Sound("Sounds\\EvilGetsuga.mp3")call TriggerSleepAction(.01)
call Black_Moon_Slash_Move(u[0],u[1],sklv)set u[1]=nullset i=0loop
exitwhen i>sklvcall TriggerSleepAction(delay)if(GetWidgetLife(u[0])>0)thenset loc[0]=GetUnitLoc(u[0])set g=DynamicCreateGroup(loc[0],area,p)call RemoveLocation(loc[0])set loc[0]=nullset u[1]=GroupRandomUnit(g)call DestroyGroup(g)
set g=nullif(u[1]!=null)thencall Black_Moon_Slash_Move(u[0],u[1],sklv)set u[1]=nullendifendifset i=i+1endloopcall UnitRemoveType(u[0],UNIT_TYPE_MAGIC_IMMUNE)
call SetUnitVertexColor(u[0],$FF,$FF,$FF,$FF)call DestroyEffect(eff[0])set eff[0]=nullcall DestroyEffect(eff[1])set eff[1]=nullset p=nullset u[0]=nullset delay=.0
set area=.0set sklv=0set i=0endfunctionfunction InitTrig_Evil_Moon_Slash takes nothing returns nothingset gg_trg_Evil_Moon_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Evil_Moon_Slash,Condition(function Black_Moon_Slash_Conditions))
call TriggerAddAction(gg_trg_Evil_Moon_Slash,function Black_Moon_Slash_Actions)endfunctionfunction AI_Sanji_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='N006' or GetUnitTypeId(GetTriggerUnit())=='N01T')endfunctionfunction AI_Sanji_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='N006' or GetUnitTypeId(GetAttacker())=='N01T')
endfunctionfunction AI_Sanji_AttackedCond takes nothing returns boolean
if(not AI_Sanji_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Sanji_AttackerCond takes nothing returns boolean
if(not AI_Sanji_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Sanji_CondOR takes nothing returns booleanreturn(AI_Sanji_AttackedCond()or AI_Sanji_AttackerCond())endfunctionfunction AI_Sanji_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Sanji_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Sanji_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Sanji_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0CC')call SelectHeroSkill(AI_1,'A0CB')call SelectHeroSkill(AI_1,'A0CA')call SelectHeroSkill(AI_1,'A0C8')call SelectHeroSkill(AI_1,'A0C7')endifcall IssueImmediateOrderById(AI_1,$D0084)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D007F,AI_2)set AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0208,AI_Point2)call RemoveLocation(AI_Point2)set AI_Point2=nullif(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D02B7)set AI_Attacker=falseendifcall IssueTargetOrderById(AI_1,$D0065,AI_2)endifif(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D0277)endifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Sanji takes nothing returns nothing
set udg_AI_Trig[28]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[28],Condition(function AI_Sanji_Cond))call TriggerAddAction(udg_AI_Trig[28],function AI_Sanji_Act)
endfunctionfunction Trig_Ptk_Cast_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C7')endfunctionfunction Trig_Ptk_Cast_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()call SetUnitTimeScale(u,1.6)
call TriggerSleepAction(.1)call SetUnitTimeScale(u,1.)set u=nullendfunctionfunction InitTrig_Ptk_Cast takes nothing returns nothing
set gg_trg_Ptk_Cast=CreateTrigger()call TriggerAddCondition(gg_trg_Ptk_Cast,Condition(function Trig_Ptk_Cast_Conditions))call TriggerAddAction(gg_trg_Ptk_Cast,function Trig_Ptk_Cast_Actions)endfunctionfunction Trig_Ptk_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0C7')endfunctionfunction Trig_Ptk_Func018002003001 takes nothing returns boolean
return(IsUnitEnemy(GetFilterUnit(),udg_Ptk_Own))
endfunctionfunction Trig_Ptk_Func018002003002001 takes nothing returns booleanreturn(IsUnitAliveBJ(GetFilterUnit()))endfunctionfunction Trig_Ptk_Func018002003002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_Ptk_Func018002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_Ptk_Func018002003002001(),Trig_Ptk_Func018002003002002())endfunctionfunction Trig_Ptk_Func018002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_Ptk_Func018002003001(),Trig_Ptk_Func018002003002())endfunctionfunction Trig_Ptk_Func019Func016C takes nothing returns booleanreturn((IsUnitType(udg_Ptk_Unit[1],UNIT_TYPE_ANCIENT)==false)and(IsUnitPaused(udg_Ptk_Unit[1])==false))!=nullendfunctionfunction Trig_Ptk_Func019A takes nothing returns nothing
set udg_Ptk_Unit[1]=GetEnumUnit()set udg_Ptk_Loc[1]=GetUnitLoc(udg_Ptk_Unit[1])set udg_Ptk_Real[2]=AngleBetweenPoints(udg_Ptk_Loc[0],udg_Ptk_Loc[1])call CreateNUnitsAtLoc(1,'h08S',udg_Ptk_Own,udg_Ptk_Loc[1],(udg_Ptk_Real[2]+180.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call UnitDamageTarget(udg_Ptk_Unit[0],udg_Ptk_Unit[1],udg_Ptk_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetUnitState(udg_Ptk_Unit[1],UNIT_STATE_LIFE)>0)thencall CreateNUnitsAtLoc(1,'u003',udg_Ptk_Own,udg_Ptk_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[2],bj_lastCreatedUnit,5)
call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,udg_Ptk_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(udg_Ptk_Loc[1])set udg_Ptk_Loc[1]=nullif(Trig_Ptk_Func019Func016C())thencall SaveReal(udg_Ptk_Hash,GetHandleId(udg_Ptk_Unit[1]),0,udg_Ptk_Real[2])call GroupAddUnit(udg_Ptk_Group2,udg_Ptk_Unit[1])endifset udg_Ptk_Unit[1]=null
endfunctionfunction Trig_Ptk_Actions takes nothing returns nothingset udg_Ptk_Unit[0]=GetTriggerUnit()
call DisplayText("Party Table Kick Course",udg_Ptk_Unit[0],.023,false,$FF,$FF,$FF,$FF)set udg_Ptk_Own=GetOwningPlayer(udg_Ptk_Unit[0])
set udg_Ptk_Real[0]=400.
set udg_Ptk_Real[1]=(300.+((1.5+(.5*I2R(GetUnitAbilityLevel(udg_Ptk_Unit[0],'A0C7'))))*I2R(GetHeroAgi(udg_Ptk_Unit[0],true))))if(GetUnitTypeId(udg_Ptk_Unit[0])=='N01T')thenset udg_Ptk_Real[1]=udg_Ptk_Real[1]*1.2endifset udg_Ptk_Hash=InitHashtable()
set udg_Ptk_Loc[0]=GetUnitLoc(udg_Ptk_Unit[0])call CreateNUnitsAtLoc(1,'h0A7',udg_Ptk_Own,udg_Ptk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h04O',udg_Ptk_Own,udg_Ptk_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call EnumDestructablesInCircleBJ(udg_Ptk_Real[0],udg_Ptk_Loc[0],function TreeKiller)
set udg_Ptk_Group=GetUnitsInRangeOfLocMatching(udg_Ptk_Real[0],udg_Ptk_Loc[0],Condition(function Trig_Ptk_Func018002003))call ForGroupBJ(udg_Ptk_Group,function Trig_Ptk_Func019A)call RemoveLocation(udg_Ptk_Loc[0])set udg_Ptk_Loc[0]=nullcall DestroyGroup(udg_Ptk_Group)
set udg_Ptk_Group=nullset udg_Ptk_Real[0]=18.set udg_Ptk_Int=20call EnableTrigger(gg_trg_PtkL)endfunctionfunction InitTrig_Ptk takes nothing returns nothingset gg_trg_Ptk=CreateTrigger()call TriggerAddCondition(gg_trg_Ptk,Condition(function Trig_Ptk_Conditions))
call TriggerAddAction(gg_trg_Ptk,function Trig_Ptk_Actions)endfunctionfunction Trig_PtkL_Func002Func004A takes nothing returns nothing
set udg_Ptk_Unit[1]=GetEnumUnit()set udg_Ptk_Bool=trueset udg_Ptk_Loc[0]=GetUnitLoc(udg_Ptk_Unit[1])if(udg_Ptk_BoolSpawn)thencall CreateNUnitsAtLoc(1,'h017',udg_Ptk_Own,udg_Ptk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset udg_Ptk_Loc[1]=PolarProjectionBJ(udg_Ptk_Loc[0],udg_Ptk_Real[0],LoadReal(udg_Ptk_Hash,GetHandleId(udg_Ptk_Unit[1]),0))call RemoveLocation(udg_Ptk_Loc[0])set udg_Ptk_Loc[0]=nullcall EnumDestructablesInCircleBJ('x',udg_Ptk_Loc[1],function TreeKiller)
if(IsTerrainPathable(GetLocationX(udg_Ptk_Loc[1]),GetLocationY(udg_Ptk_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitX(udg_Ptk_Unit[1],GetLocationX(udg_Ptk_Loc[1]))call SetUnitY(udg_Ptk_Unit[1],GetLocationY(udg_Ptk_Loc[1]))endifcall RemoveLocation(udg_Ptk_Loc[1])set udg_Ptk_Loc[1]=nullset udg_Ptk_Unit[1]=null
endfunctionfunction Trig_PtkL_Func002C takes nothing returns booleanreturn(udg_Ptk_Int>0)endfunctionfunction Trig_PtkL_Actions takes nothing returns nothing
if(Trig_PtkL_Func002C())then
set udg_Ptk_Bool=falseset udg_Ptk_Group=CreateGroup()call GroupAddGroup(udg_Ptk_Group2,udg_Ptk_Group)
call ForGroupBJ(udg_Ptk_Group,function Trig_PtkL_Func002Func004A)call DestroyGroup(udg_Ptk_Group)
set udg_Ptk_Group=nullif(udg_Ptk_BoolSpawn)thenset udg_Ptk_BoolSpawn=falseelse
set udg_Ptk_BoolSpawn=trueendifif(udg_Ptk_Bool)then
set udg_Ptk_Int=(udg_Ptk_Int-1)set udg_Ptk_Real[0]=(udg_Ptk_Real[0]-.9)
else
set udg_Ptk_Int=0endifelse
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Ptk_Group2)call FlushParentHashtableBJ(udg_Ptk_Hash)set udg_Ptk_Hash=nullset udg_Ptk_Own=null
set udg_Ptk_Unit[0]=null
set udg_Ptk_Real[0]=.0set udg_Ptk_Real[1]=.0set udg_Ptk_Real[2]=.0set udg_Ptk_Key=0set udg_Ptk_Int=0set udg_Ptk_Bool=falseendifendfunctionfunction InitTrig_PtkL takes nothing returns nothing
set gg_trg_PtkL=CreateTrigger()call DisableTrigger(gg_trg_PtkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PtkL,.04)call TriggerAddAction(gg_trg_PtkL,function Trig_PtkL_Actions)endfunctionfunction Trig_Veal_Shot_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0C8')endfunctionfunction Trig_Veal_Shot_Actions takes nothing returns nothinglocal unit array ulocal location array loc
local player plocal real facinglocal real dmglocal integer timeslocal real array speedlocal real delay=.04
local boolean upgrade=falseset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()call PauseSystem(u[0],true)call PauseSystem(u[1],true)call SetUnitPathing(u[0],false)call SetUnitPathing(u[1],false)call SetUnitTimeScale(u[0],2.75)
set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set facing=AngleBetweenPoints(loc[0],loc[1])
call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall DisplayText("Veau Shot",u[0],.023,true,$FF,$FF,$FF,$FF)
set dmg=(I2R(GetHeroAgi(u[0],true))*2.2)
if(GetUnitTypeId(u[0])=='N01T')thenset upgrade=true
set dmg=(dmg*1.2)endifset p=GetOwningPlayer(u[0])set speed[0]=-90.set speed[1]=30.
set times=1loop
exitwhen times>5
if(GetWidgetLife(u[0])>0 and GetWidgetLife(u[1])>0)thenset loc[2]=GetUnitLoc(u[0])if(times==1 or times==5)then
call Dynamic_3D("Sound\\Units\\Combat\\MetalHeavyBashFlesh3.wav",GetLocationX(loc[2]),GetLocationY(loc[2]))elseif(GetRandomInt(1,'d')<41)thencall Dynamic_3D("Sound\\Units\\Combat\\MetalHeavyBashFlesh2.wav",GetLocationX(loc[2]),GetLocationY(loc[2]))else
call Dynamic_3D("Sound\\Units\\Combat\\MetalHeavyChopFlesh1.wav",GetLocationX(loc[2]),GetLocationY(loc[2]))endifcall CreateNUnitsAtLoc(1,'h013',p,loc[2],facing)
call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call SetUnitFlyHeight(bj_lastCreatedUnit,50.,.0)
call SetUnitScale(bj_lastCreatedUnit,.8,.8,.8)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.3)call RemoveLocation(loc[2])set loc[2]=nullset loc[3]=GetUnitLoc(u[1])set loc[4]=PolarProjectionBJ(loc[3],speed[0],facing)
set loc[5]=PolarProjectionBJ(loc[3],speed[1],facing)
call RemoveLocation(loc[3])set loc[3]=nullif(IsTerrainPathable(GetLocationX(loc[5]),GetLocationY(loc[5]),PATHING_TYPE_WALKABILITY)==false)then
if(IsUnitType(u[1],UNIT_TYPE_ANCIENT)==false)thencall EnumDestructablesInCircleBJ(170.,loc[5],function TreeKiller)call SetUnitPositionLoc(u[1],loc[5])
endifcall SetUnitFacing(u[1],(facing-180.))call SetUnitPositionLoc(u[0],loc[4])
call SetUnitFacing(u[0],facing)endifcall CreateNUnitsAtLoc(1,'h0A8',p,loc[5],bj_UNIT_FACING)
call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[4])set loc[4]=nullcall RemoveLocation(loc[5])set loc[5]=nullif(GetRandomInt(1,'d')<78)thencall SetUnitAnimation(u[0],"attack")
else
call SetUnitAnimation(u[0],"spell")endifif(upgrade and times==5)then
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile.mdl",u[1],"chest"))endifcall UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
else
set times=5endifset times=times+1if(times<6)thencall TriggerSleepAction(delay)endifendloopcall SetUnitTimeScale(u[0],1.)call PauseSystem(u[0],false)
call PauseSystem(u[1],false)
call SetUnitPathing(u[0],true)call SetUnitPathing(u[1],true)set p=nullset u[0]=nullset u[1]=nullset dmg=.0set delay=.0
set speed[0]=.0set speed[1]=.0set times=0set upgrade=falseendfunctionfunction InitTrig_Veal_Shot takes nothing returns nothingset gg_trg_Veal_Shot=CreateTrigger()
call TriggerAddCondition(gg_trg_Veal_Shot,Condition(function Trig_Veal_Shot_Conditions))
call TriggerAddAction(gg_trg_Veal_Shot,function Trig_Veal_Shot_Actions)endfunctionfunction Trig_Diable_Jambe_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CA')endfunctionfunction Trig_Diable_Jambe_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='N01T')then
set p=GetOwningPlayer(u)
call DisplayText("Diable Jambe",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Sanji\\DiableJambe.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',6.)set bj_lastCreatedUnit=CreateUnit(p,'h00F',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h03I',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call TransfromAction(u,x,y)set p=nullendifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Diable_Jambe takes nothing returns nothing
set gg_trg_Diable_Jambe=CreateTrigger()call TriggerAddCondition(gg_trg_Diable_Jambe,Condition(function Trig_Diable_Jambe_Conditions))call TriggerAddAction(gg_trg_Diable_Jambe,function Trig_Diable_Jambe_Actions)endfunctionfunction Trig_Csh_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CB')endfunctionfunction Trig_Csh_Actions takes nothing returns nothingset udg_Csh_Unit[0]=GetTriggerUnit()
set udg_Csh_Loc[0]=GetSpellTargetLoc()set udg_Csh_Loc[1]=GetUnitLoc(udg_Csh_Unit[0])set udg_Csh_Real[0]=AngleBetweenPoints(udg_Csh_Loc[1],udg_Csh_Loc[0])set udg_Csh_Real[1]=DistanceBetweenPoints(udg_Csh_Loc[0],udg_Csh_Loc[1])
call RemoveLocation(udg_Csh_Loc[0])set udg_Csh_Loc[0]=nullcall SetUnitInvulnerable(udg_Csh_Unit[0],true)call PauseSystem(udg_Csh_Unit[0],true)set udg_Csh_Own=GetOwningPlayer(udg_Csh_Unit[0])
call ShowUnitHide(udg_Csh_Unit[0])set udg_Csh_Unit[1]=CreateUnit(udg_Csh_Own,'h0A9',GetLocationX(udg_Csh_Loc[1]),GetLocationY(udg_Csh_Loc[1]),udg_Csh_Real[0])
call RemoveLocation(udg_Csh_Loc[1])set udg_Csh_Loc[1]=nullif(GetUnitTypeId(udg_Csh_Unit[0])=='N01T')thenset udg_Csh_Eff=AddSpecialEffectTarget("PhoenixMissile.mdx",udg_Csh_Unit[1],"foot second")endifcall SetUnitFlyHeight(udg_Csh_Unit[1],500.,(4000.-(2.22*udg_Csh_Real[1])))call SetUnitAnimation(udg_Csh_Unit[1],"spell")call DisplayText("Concasse",udg_Csh_Unit[1],.023,true,$FF,$FF,$FF,$FF)set udg_Csh_Int[0]=18set udg_Csh_Int[1]=6
set udg_Csh_Int[2]=5
set udg_Csh_Real[1]=(udg_Csh_Real[1]/ I2R(udg_Csh_Int[0]))call EnableTrigger(gg_trg_CshL)endfunctionfunction InitTrig_Csh takes nothing returns nothingset gg_trg_Csh=CreateTrigger()call TriggerAddCondition(gg_trg_Csh,Condition(function Trig_Csh_Conditions))
call TriggerAddAction(gg_trg_Csh,function Trig_Csh_Actions)endfunctionfunction Trig_CshL_Func001Func032A takes nothing returns nothing
local unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h09B',udg_Csh_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(loc)
set loc=null
call DestroyEffect(AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",u,"chest"))set u=nullendfunctionfunction Trig_CshL_Func001C takes nothing returns booleanreturn(udg_Csh_Int[0]>0)
endfunctionfunction Trig_CshL_Actions takes nothing returns nothing
if(Trig_CshL_Func001C())then
set udg_Csh_Loc[0]=GetUnitLoc(udg_Csh_Unit[1])set udg_Csh_Loc[1]=PolarProjectionBJ(udg_Csh_Loc[0],udg_Csh_Real[1],udg_Csh_Real[0])
call RemoveLocation(udg_Csh_Loc[0])set udg_Csh_Loc[0]=nullcall SetUnitPositionLoc(udg_Csh_Unit[1],udg_Csh_Loc[1])if(udg_Csh_Int[0]==udg_Csh_Int[1])thencall SetUnitFlyHeight(udg_Csh_Unit[1],.0,3000.)elseif(udg_Csh_Int[0]==2)thenset udg_Csh_Loc[2]=PolarProjectionBJ(udg_Csh_Loc[1],udg_Csh_Real[1],udg_Csh_Real[0])
call Dynamic_GroupShake(GetLocationX(udg_Csh_Loc[2]),GetLocationY(udg_Csh_Loc[2]),.8,12.,udg_CameraArea,null)call CameraShake(.8,12.,udg_Csh_Unit[0])
call CreateNUnitsAtLoc(1,'h08Q',udg_Csh_Own,udg_Csh_Loc[2],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h08V',udg_Csh_Own,udg_Csh_Loc[2],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h04R',udg_Csh_Own,udg_Csh_Loc[2],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'u003',udg_Csh_Own,udg_Csh_Loc[2],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0AP')call SetUnitAbilityLevelSwapped('A0C4',bj_lastCreatedUnit,GetUnitAbilityLevel(udg_Csh_Unit[0],'A0CB'))call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call EnumDestructablesInCircleBJ(389.,udg_Csh_Loc[2],function TreeKiller)set udg_Csh_Group=DynamicCreateGroup(udg_Csh_Loc[2],450.,udg_Csh_Own)call RemoveLocation(udg_Csh_Loc[2])set udg_Csh_Loc[2]=nullcall ForGroupBJ(udg_Csh_Group,function Trig_CshL_Func001Func032A)call DestroyGroup(udg_Csh_Group)
set udg_Csh_Group=nullendifcall RemoveLocation(udg_Csh_Loc[1])set udg_Csh_Loc[1]=nullif(5==udg_Csh_Int[2])thencall DestroyEffect(AddSpecialEffectTarget("DoomDeathSanji.mdl",udg_Csh_Unit[1],"chest"))
set udg_Csh_Int[2]=0
else
set udg_Csh_Int[2]=(udg_Csh_Int[2]+1)endifset udg_Csh_Int[0]=(udg_Csh_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())if(udg_Csh_Eff!=null)thencall DestroyEffect(udg_Csh_Eff)set udg_Csh_Eff=null
endifset udg_Csh_Loc[0]=GetUnitLoc(udg_Csh_Unit[1])if(IsTerrainPathable(GetLocationX(udg_Csh_Loc[0]),GetLocationY(udg_Csh_Loc[0]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitPositionLocFacingBJ(udg_Csh_Unit[0],udg_Csh_Loc[0],udg_Csh_Real[0])endifcall RemoveLocation(udg_Csh_Loc[0])set udg_Csh_Loc[0]=nullcall ShowUnitShow(udg_Csh_Unit[0])call SetUnitInvulnerable(udg_Csh_Unit[0],false)call PauseSystem(udg_Csh_Unit[0],false)call SelectUnitAddForPlayer(udg_Csh_Unit[0],udg_Csh_Own)
call RemoveUnit(udg_Csh_Unit[1])
set udg_Csh_Own=null
set udg_Csh_Unit[0]=null
set udg_Csh_Unit[1]=null
set udg_Csh_Real[0]=.0set udg_Csh_Real[1]=.0set udg_Csh_Real[2]=.0set udg_Csh_Int[0]=0
set udg_Csh_Int[1]=0
endifendfunctionfunction InitTrig_CshL takes nothing returns nothing
set gg_trg_CshL=CreateTrigger()call DisableTrigger(gg_trg_CshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CshL,.04)call TriggerAddAction(gg_trg_CshL,function Trig_CshL_Actions)endfunctionfunction Trig_Lsh_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CC')endfunctionfunction Trig_Lsh_Actions takes nothing returns nothingset udg_Lsh_Unit[0]=GetTriggerUnit()
set udg_Lsh_Unit[1]=GetSpellTargetUnit()
call SetUnitInvulnerable(udg_Lsh_Unit[0],true)call SetUnitInvulnerable(udg_Lsh_Unit[1],true)call PauseSystem(udg_Lsh_Unit[0],true)call PauseSystem(udg_Lsh_Unit[1],true)call SetUnitAnimation(udg_Lsh_Unit[0],"spell one")call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Sanji\\DiableJambe.wav",GetUnitX(udg_Lsh_Unit[0]),GetUnitY(udg_Lsh_Unit[0]))set udg_Lsh_Eff[0]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",udg_Lsh_Unit[0],"foot left")set udg_Lsh_Eff[1]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AbsorbMana\\AbsorbManaBirthMissile.mdl",udg_Lsh_Unit[0],"foot right")set udg_Lsh_Own=GetOwningPlayer(udg_Lsh_Unit[0])
set udg_Lsh_Int=16call EnableTrigger(gg_trg_LshL)endfunctionfunction InitTrig_Lsh takes nothing returns nothingset gg_trg_Lsh=CreateTrigger()call TriggerAddCondition(gg_trg_Lsh,Condition(function Trig_Lsh_Conditions))
call TriggerAddAction(gg_trg_Lsh,function Trig_Lsh_Actions)endfunctionfunction Trig_LshL_Func001C takes nothing returns booleanreturn(udg_Lsh_Int>0)endfunctionfunction Trig_LshL_Actions takes nothing returns nothing
if(Trig_LshL_Func001C())then
set udg_Lsh_Loc[0]=GetUnitLoc(udg_Lsh_Unit[0])call CreateNUnitsAtLoc(1,'h00F',udg_Lsh_Own,udg_Lsh_Loc[0],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Lsh_Loc[0])set udg_Lsh_Loc[0]=nullset udg_Lsh_Int=(udg_Lsh_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call DisplayText("Amour Shot",udg_Lsh_Unit[0],.023,true,$DC,5,5,$FF)
set udg_Lsh_Loc[0]=GetUnitLoc(udg_Lsh_Unit[0])set udg_Lsh_Loc[1]=GetUnitLoc(udg_Lsh_Unit[1])set udg_Lsh_Real[0]=DistanceBetweenPoints(udg_Lsh_Loc[0],udg_Lsh_Loc[1])
call CreateNUnitsAtLoc(1,'h0AB',udg_Lsh_Own,udg_Lsh_Loc[0],AngleBetweenPoints(udg_Lsh_Loc[0],udg_Lsh_Loc[1]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call RemoveLocation(udg_Lsh_Loc[0])set udg_Lsh_Loc[0]=nullcall RemoveLocation(udg_Lsh_Loc[1])set udg_Lsh_Loc[1]=nullcall Dynamic_Sound("Sounds\\SanjiStrike.mp3")call SetUnitPathing(udg_Lsh_Unit[0],false)set udg_Lsh_Int=30call SetUnitTimeScale(udg_Lsh_Unit[0],3.-(udg_Lsh_Real[0]/ 550.))set udg_Lsh_Real[0]=60.set udg_Lsh_Real[2]=170.
call SetUnitAnimationByIndex(udg_Lsh_Unit[0],1)call EnableTrigger(gg_trg_Lsh2)endifendfunctionfunction InitTrig_LshL takes nothing returns nothing
set gg_trg_LshL=CreateTrigger()call DisableTrigger(gg_trg_LshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LshL,.1)call TriggerAddAction(gg_trg_LshL,function Trig_LshL_Actions)endfunctionfunction Trig_Lsh2_Func003C takes nothing returns booleanreturn(DistanceBetweenPoints(udg_Lsh_Loc[0],udg_Lsh_Loc[1])>120.)and(udg_Lsh_Int>0)endfunctionfunction Trig_Lsh2_Actions takes nothing returns nothing
set udg_Lsh_Loc[0]=GetUnitLoc(udg_Lsh_Unit[0])set udg_Lsh_Loc[1]=GetUnitLoc(udg_Lsh_Unit[1])if(Trig_Lsh2_Func003C())then
set udg_Lsh_Real[1]=AngleBetweenPoints(udg_Lsh_Loc[0],udg_Lsh_Loc[1])set udg_Lsh_Loc[2]=PolarProjectionBJ(udg_Lsh_Loc[0],udg_Lsh_Real[0],udg_Lsh_Real[1])
call RemoveLocation(udg_Lsh_Loc[0])set udg_Lsh_Loc[0]=nullcall RemoveLocation(udg_Lsh_Loc[1])set udg_Lsh_Loc[1]=nullif(IsTerrainPathable(GetLocationX(udg_Lsh_Loc[2]),GetLocationY(udg_Lsh_Loc[2]),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(udg_Lsh_Real[2],udg_Lsh_Loc[2],function TreeKiller)
call SetUnitPositionLocFacingBJ(udg_Lsh_Unit[0],udg_Lsh_Loc[2],udg_Lsh_Real[1])endifcall RemoveLocation(udg_Lsh_Loc[2])set udg_Lsh_Loc[2]=nullset udg_Lsh_Int=(udg_Lsh_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call Dynamic_GroupShake(GetLocationX(udg_Lsh_Loc[1]),GetLocationY(udg_Lsh_Loc[1]),1.3,udg_CameraShakePow,udg_CameraArea,null)set udg_Lsh_Real[1]=AngleBetweenPoints(udg_Lsh_Loc[0],udg_Lsh_Loc[1])call CreateNUnitsAtLoc(1,'h043',udg_Lsh_Own,udg_Lsh_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h080',udg_Lsh_Own,udg_Lsh_Loc[0],udg_Lsh_Real[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h04C',udg_Lsh_Own,udg_Lsh_Loc[0],udg_Lsh_Real[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h01U',udg_Lsh_Own,udg_Lsh_Loc[0],udg_Lsh_Real[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call RemoveLocation(udg_Lsh_Loc[0])set udg_Lsh_Loc[0]=nullcall SetUnitTimeScale(udg_Lsh_Unit[0],1.)call PauseSystem(udg_Lsh_Unit[0],false)call PauseSystem(udg_Lsh_Unit[1],false)call SetUnitInvulnerable(udg_Lsh_Unit[0],false)call SetUnitInvulnerable(udg_Lsh_Unit[1],false)call SetUnitPathing(udg_Lsh_Unit[0],true)set udg_Lsh_Real[3]=(2000.+((10.*I2R(GetUnitAbilityLevel(udg_Lsh_Unit[0],'A0CC')))*I2R(GetHeroAgi(udg_Lsh_Unit[0],false))))call DisplayText(I2S(R2I(udg_Lsh_Real[3]))+"!",udg_Lsh_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Lsh_Unit[0],udg_Lsh_Unit[1],udg_Lsh_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(udg_Lsh_Unit[1])>0)then
call CreateNUnitsAtLoc(1,'u003',udg_Lsh_Own,udg_Lsh_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[3],4)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Lsh_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(udg_Lsh_Loc[1])set udg_Lsh_Loc[1]=nullcall DestroyEffect(udg_Lsh_Eff[0])set udg_Lsh_Eff[0]=nullcall DestroyEffect(udg_Lsh_Eff[1])set udg_Lsh_Eff[1]=nullset udg_Lsh_Unit[0]=null
set udg_Lsh_Int=25set udg_Lsh_Real[0]=65.call SetUnitPathing(udg_Lsh_Unit[1],false)call EnableTrigger(gg_trg_Lsh3)endifendfunctionfunction InitTrig_Lsh2 takes nothing returns nothing
set gg_trg_Lsh2=CreateTrigger()call DisableTrigger(gg_trg_Lsh2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Lsh2,.03)call TriggerAddAction(gg_trg_Lsh2,function Trig_Lsh2_Actions)endfunctionfunction Trig_Lsh3_Func001C takes nothing returns booleanreturn(udg_Lsh_Int>0)endfunctionfunction Trig_Lsh3_Actions takes nothing returns nothing
if(Trig_Lsh3_Func001C())then
set udg_Lsh_Loc[0]=GetUnitLoc(udg_Lsh_Unit[1])set udg_Lsh_Loc[1]=PolarProjectionBJ(udg_Lsh_Loc[0],udg_Lsh_Real[0],udg_Lsh_Real[1])
call EnumDestructablesInCircleBJ(udg_Lsh_Real[2],udg_Lsh_Loc[1],function TreeKiller)
if(IsTerrainPathable(GetLocationX(udg_Lsh_Loc[1]),GetLocationY(udg_Lsh_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitPositionLoc(udg_Lsh_Unit[1],udg_Lsh_Loc[1])call CreateNUnitsAtLoc(1,'h017',udg_Lsh_Own,udg_Lsh_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
set udg_Lsh_Int=1endifcall RemoveLocation(udg_Lsh_Loc[0])set udg_Lsh_Loc[0]=nullcall RemoveLocation(udg_Lsh_Loc[1])set udg_Lsh_Loc[1]=nullset udg_Lsh_Int=(udg_Lsh_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitPathing(udg_Lsh_Unit[1],true)set udg_Lsh_Unit[1]=null
set udg_Lsh_Own=null
set udg_Lsh_Real[0]=.0set udg_Lsh_Real[1]=.0set udg_Lsh_Real[2]=.0set udg_Lsh_Int=0endifendfunctionfunction InitTrig_Lsh3 takes nothing returns nothing
set gg_trg_Lsh3=CreateTrigger()call DisableTrigger(gg_trg_Lsh3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Lsh3,.03)call TriggerAddAction(gg_trg_Lsh3,function Trig_Lsh3_Actions)endfunctionfunction AI_Zabuza_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='U00E')endfunctionfunction AI_Zabuza_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='U00E')
endfunctionfunction AI_Zabuza_AttackedCond takes nothing returns booleanif(not AI_Zabuza_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Zabuza_AttackerCond takes nothing returns booleanif(not AI_Zabuza_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Zabuza_CondOR takes nothing returns booleanreturn(AI_Zabuza_AttackedCond()or AI_Zabuza_AttackerCond())endfunctionfunction AI_Zabuza_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Zabuza_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Zabuza_Act takes nothing returns nothing
local unit AI_1local unit AI_2local location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Zabuza_AttackedType())then
set AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0CK')call SelectHeroSkill(AI_1,'A0CJ')call SelectHeroSkill(AI_1,'A0CG')call SelectHeroSkill(AI_1,'A0CF')call SelectHeroSkill(AI_1,'A0CD')endifset AI_Point2=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D0270,AI_Point2)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point2)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D007F,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D00C4)call IssueTargetOrderById(AI_1,$D0107,AI_2)set AI_Attacker=falseendifcall IssueImmediateOrderById(AI_1,$D0277)endifcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Zabuza takes nothing returns nothingset udg_AI_Trig[29]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[29],Condition(function AI_Zabuza_Cond))
call TriggerAddAction(udg_AI_Trig[29],function AI_Zabuza_Act)endfunctionfunction Trig_Water_Prison_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CL')endfunctionfunction Trig_Water_Prison_Actions takes nothing returns nothing
local unit array ulocal player plocal unit array dummylocal real array xylocal real array rlocal integer my_buffset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()call DisplayText("Suiro no Jutsu",u[0],.023,false,$FF,$FF,$FF,$FF)set p=GetOwningPlayer(u[0])set r[0]=172.set r[1]=GetRandomReal(0,360)set xy[0]=GetUnitX(u[1])
set xy[1]=GetUnitY(u[1])
set xy[2]=PolarX(xy[0],r[0],r[1])set xy[3]=PolarY(xy[1],r[0],r[1])set dummy[0]=CreateUnit(p,'h0AL',xy[0],xy[1],bj_UNIT_FACING)
set dummy[1]=CreateUnit(p,'h0AM',xy[2],xy[3],AngleBetweenXY(xy[2],xy[3],xy[0],xy[1]))call SetUnitTimeScale(dummy[1],1.4)call SetUnitAnimation(dummy[1],"spell four")
set r[3]=.06
set r[4]=200.set my_buff='BPSE'loop
call TriggerSleepAction(r[3])set xy[0]=GetUnitX(dummy[1])
set xy[1]=GetUnitY(dummy[1])
set xy[2]=GetUnitX(u[1])
set xy[3]=GetUnitY(u[1])
if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>r[4])thencall UnitRemoveAbility(u[1],my_buff)
endifexitwhen(GetUnitAbilityLevel(u[1],my_buff)<1)endloopset xy[0]=GetUnitX(dummy[1])
set xy[1]=GetUnitY(dummy[1])
call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",xy[0],xy[1]))
call RemoveUnit(dummy[0])call RemoveUnit(dummy[1])set p=nullset u[0]=nullset u[1]=nullset dummy[0]=nullset dummy[1]=nullendfunctionfunction InitTrig_Water_Prison takes nothing returns nothing
set gg_trg_Water_Prison=CreateTrigger()call TriggerAddCondition(gg_trg_Water_Prison,Condition(function Trig_Water_Prison_Conditions))call TriggerAddAction(gg_trg_Water_Prison,function Trig_Water_Prison_Actions)endfunctionfunction Trig_Wdg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CD')endfunctionfunction Trig_Wdg_Actions takes nothing returns nothingset udg_Wdg_Unit[0]=GetTriggerUnit()
set udg_Wdg_Loc[0]=GetSpellTargetLoc()set udg_Wdg_Real[0]=GetLocationX(udg_Wdg_Loc[0])
set udg_Wdg_Real[1]=GetLocationY(udg_Wdg_Loc[0])
set udg_Wdg_Loc[1]=GetUnitLoc(udg_Wdg_Unit[0])set udg_Wdg_Real[2]=AngleBetweenPoints(udg_Wdg_Loc[1],udg_Wdg_Loc[0])set udg_Wdg_Loc[2]=PolarProjectionBJ(udg_Wdg_Loc[1],-200.,udg_Wdg_Real[2])set udg_Wdg_Real[3]=DistanceBetweenPoints(udg_Wdg_Loc[0],udg_Wdg_Loc[2])
call RemoveLocation(udg_Wdg_Loc[0])set udg_Wdg_Loc[0]=nullcall RemoveLocation(udg_Wdg_Loc[1])set udg_Wdg_Loc[1]=nullset udg_Wdg_Own=GetOwningPlayer(udg_Wdg_Unit[0])
set udg_Wdg_Unit[1]=CreateUnit(udg_Wdg_Own,'h0AC',GetLocationX(udg_Wdg_Loc[2]),GetLocationY(udg_Wdg_Loc[2]),udg_Wdg_Real[2])
call CreateNUnitsAtLoc(1,'h07D',udg_Wdg_Own,udg_Wdg_Loc[2],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call RemoveLocation(udg_Wdg_Loc[2])set udg_Wdg_Loc[2]=nullcall SetUnitFlyHeight(udg_Wdg_Unit[1],700.,1000.)call DisplayText("Suiton Suiryudan no Jutsu",udg_Wdg_Unit[0],.023,false,$FF,$FF,$FF,$FF)
call TriggerSleepAction(.6)set udg_Wdg_Real[4]=(udg_Wdg_Real[3]/ 13.)set udg_Wdg_Int=$Bcall SetUnitFlyHeight(udg_Wdg_Unit[1],.0,1200.)call EnableTrigger(gg_trg_WdgL)endfunctionfunction InitTrig_Wdg takes nothing returns nothingset gg_trg_Wdg=CreateTrigger()call TriggerAddCondition(gg_trg_Wdg,Condition(function Trig_Wdg_Conditions))
call TriggerAddAction(gg_trg_Wdg,function Trig_Wdg_Actions)endfunctionfunction Trig_WdgL_Func001Func019A takes nothing returns nothing
call UnitDamageTarget(udg_Wdg_Unit[0],GetEnumUnit(),udg_Wdg_Real[4],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endfunctionfunction Trig_WdgL_Func001C takes nothing returns booleanreturn(udg_Wdg_Int>0)endfunctionfunction Trig_WdgL_Actions takes nothing returns nothing
if(Trig_WdgL_Func001C())then
set udg_Wdg_Loc[0]=GetUnitLoc(udg_Wdg_Unit[1])set udg_Wdg_Loc[1]=PolarProjectionBJ(udg_Wdg_Loc[0],udg_Wdg_Real[4],udg_Wdg_Real[2])
call RemoveLocation(udg_Wdg_Loc[0])set udg_Wdg_Loc[0]=nullcall SetUnitPositionLoc(udg_Wdg_Unit[1],udg_Wdg_Loc[1])call RemoveLocation(udg_Wdg_Loc[1])set udg_Wdg_Loc[1]=nullset udg_Wdg_Int=(udg_Wdg_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call UnitApplyTimedLife(udg_Wdg_Unit[1],'BTLF',.1)call SetUnitFlyHeight(udg_Wdg_Unit[1],100.,.0)set udg_Wdg_Real[3]=400.
set udg_Wdg_Real[4]=BasicDmg_Q(udg_Wdg_Unit[0],'A0CD',0)
set udg_Wdg_Loc[0]=Location(udg_Wdg_Real[0],udg_Wdg_Real[1])
call CreateNUnitsAtLoc(1,'u003',udg_Wdg_Own,udg_Wdg_Loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[$A])call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Wdg_Int=1loop
exitwhen udg_Wdg_Int>6set udg_Wdg_Loc[1]=PolarProjectionBJ(udg_Wdg_Loc[0],150.,(I2R(udg_Wdg_Int)*60.))
call CreateNUnitsAtLoc(1,'h0AD',udg_Wdg_Own,udg_Wdg_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call RemoveLocation(udg_Wdg_Loc[1])set udg_Wdg_Loc[1]=nullset udg_Wdg_Int=udg_Wdg_Int+1endloopcall CreateNUnitsAtLoc(1,'h07D',udg_Wdg_Own,udg_Wdg_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call EnumDestructablesInCircleBJ(udg_Wdg_Real[3],udg_Wdg_Loc[0],function TreeKiller)
set udg_Wdg_Group=DynamicCreateGroup(udg_Wdg_Loc[0],udg_Wdg_Real[3],udg_Wdg_Own)
call RemoveLocation(udg_Wdg_Loc[0])set udg_Wdg_Loc[0]=nullcall ForGroupBJ(udg_Wdg_Group,function Trig_WdgL_Func001Func019A)call DestroyGroup(udg_Wdg_Group)
set udg_Wdg_Group=nullset udg_Wdg_Own=null
set udg_Wdg_Unit[0]=null
set udg_Wdg_Unit[1]=null
set udg_Wdg_Real[0]=.0set udg_Wdg_Real[1]=.0set udg_Wdg_Real[2]=.0set udg_Wdg_Real[3]=.0set udg_Wdg_Real[4]=.0set udg_Wdg_Int=0endifendfunctionfunction InitTrig_WdgL takes nothing returns nothing
set gg_trg_WdgL=CreateTrigger()call DisableTrigger(gg_trg_WdgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WdgL,.04)call TriggerAddAction(gg_trg_WdgL,function Trig_WdgL_Actions)endfunctionfunction Trig_Flying_Turn_Slash_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0CF')endfunctionfunction Trig_Flying_Turn_Slash_Actions takes nothing returns nothinglocal unit array ulocal effect eff
local location array loc
local real facinglocal player plocal real dmgset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()if(GetUnitAbilityLevel(u[0],'B02U')>0)thenset eff=AddSpecialEffectTarget("SadoBuff.mdl",u[0],"weapon")
else
set eff=AddSpecialEffectTarget("IshidaBuff.mdl",u[0],"weapon")endifcall SetUnitTimeScale(u[0],1.4)call DisplayText("Hisenken",u[0],.023,true,$FF,$FF,$FF,$FF)call TriggerSleepAction(.01)
call SetUnitTimeScale(u[0],1.)set p=GetOwningPlayer(u[0])set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set facing=AngleBetweenPoints(loc[0],loc[1])
call RemoveLocation(loc[0])set loc[0]=nullset loc[2]=PolarProjectionBJ(loc[1],-120.,facing)call SetUnitPositionLoc(u[0],loc[2])
call CreateNUnitsAtLoc(1,'h04R',p,loc[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h0AD',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h0AE',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall SetUnitFacing(u[0],facing)set dmg=100.+(GetHeroStr(u[0],true)*R2I(3.))
call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set p=nullset u[0]=nullset u[1]=nullcall TriggerSleepAction(.1)call DestroyEffect(eff)set eff=null
endfunctionfunction InitTrig_Flying_Turn_Slash takes nothing returns nothingset gg_trg_Flying_Turn_Slash=CreateTrigger()
call TriggerAddCondition(gg_trg_Flying_Turn_Slash,Condition(function Trig_Flying_Turn_Slash_Conditions))
call TriggerAddAction(gg_trg_Flying_Turn_Slash,function Trig_Flying_Turn_Slash_Actions)endfunctionfunction Hidden_Mist_Jutsu_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CG')endfunctionfunction Hidden_Mist_Jutsu_Act takes nothing returns nothing
local unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer my_skill='A0CG'local integer array special_skilllocal integer my_buff='B02T'
local real delay=.5local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h0AO',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call RemoveLocation(loc)
set loc=null
call EnableWeatherEffect(udg_Weather_Map[1],true)set udg_Weather_Stack[1]=udg_Weather_Stack[1]+1call DisplayText("Kirigakure no Jutsu",u,.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Zabuza\\HiddenMist.wav",GetUnitX(u),GetUnitY(u))call SetUnitAnimation(u,"spell three")set special_skill[0]='A0CH'set special_skill[1]='A0CI'call SetPlayerAbilityAvailable(p,my_skill,false)
call UnitAddAbility(u,special_skill[0])call UnitAddAbility(u,special_skill[1])loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,my_buff)<1)endloopcall UnitRemoveAbility(u,special_skill[0])call UnitRemoveAbility(u,special_skill[1])call SetPlayerAbilityAvailable(p,my_skill,true)set udg_Weather_Stack[1]=udg_Weather_Stack[1]-1if(udg_Weather_Stack[1]==0)thencall EnableWeatherEffect(udg_Weather_Map[1],false)endifset p=nullset u=nullset my_skill=0set special_skill[0]=0set special_skill[1]=0set my_buff=0set delay=.0
endfunctionfunction InitTrig_Hidden_Mist_Jutsu takes nothing returns nothingset gg_trg_Hidden_Mist_Jutsu=CreateTrigger()
call TriggerAddCondition(gg_trg_Hidden_Mist_Jutsu,Condition(function Hidden_Mist_Jutsu_Conditions))call TriggerAddAction(gg_trg_Hidden_Mist_Jutsu,function Hidden_Mist_Jutsu_Act)endfunctionfunction Trig_Skl_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CI')endfunctionfunction Trig_Skl_Actions takes nothing returns nothinglocal location array loc
local texttag txtlocal force Foclocal real facingset udg_Skl_Unit[0]=GetTriggerUnit()
set udg_Skl_Unit[1]=GetSpellTargetUnit()
call SetUnitVertexColor(udg_Skl_Unit[0],0,0,0,0)
set txt=CreateTextTagUnitBJ("Sairento Kiringu",udg_Skl_Unit[0],0,10.,'d',100.,'d',0)
call SetTextTagVelocityBJ(txt,64,90)
call SetTextTagPermanentBJ(txt,false)call SetTextTagLifespanBJ(txt,2.)set Foc=GetPlayersByMapControl(MAP_CONTROL_USER)
call ShowTextTagForceBJ(false,txt,Foc)call DestroyForce(Foc)set Foc=null
set Foc=GetForceOfPlayer(GetOwningPlayer(udg_Skl_Unit[0]))call ShowTextTagForceBJ(true,txt,Foc)call DestroyForce(Foc)set Foc=null
set loc[0]=GetUnitLoc(udg_Skl_Unit[1])set loc[1]=PolarProjectionBJ(loc[0],-120.,GetUnitFacing(udg_Skl_Unit[1]))call TriggerSleepAction(.01)
call SetUnitX(udg_Skl_Unit[0],GetLocationX(loc[1]))call SetUnitY(udg_Skl_Unit[0],GetLocationY(loc[1]))call SetUnitFacing(udg_Skl_Unit[0],AngleBetweenPoints(loc[1],loc[0]))call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullset udg_Skl_Int=1call EnableTrigger(gg_trg_SklV)set facing=.0call TriggerSleepAction(2.)call DestroyTextTag(txt)
set txt=null
endfunctionfunction InitTrig_Skl takes nothing returns nothingset gg_trg_Skl=CreateTrigger()call TriggerAddCondition(gg_trg_Skl,Condition(function Trig_Skl_Conditions))
call TriggerAddAction(gg_trg_Skl,function Trig_Skl_Actions)endfunctionfunction Trig_SklV_Actions takes nothing returns nothing
local integer vertex
if(udg_Skl_Int<20)thenset vertex=R2I(12.75*I2R(udg_Skl_Int))call SetUnitVertexColor(udg_Skl_Unit[0],vertex,vertex,vertex,vertex)
set udg_Skl_Int=udg_Skl_Int+1else
call DisableTrigger(GetTriggeringTrigger())call SetUnitVertexColor(udg_Skl_Unit[0],$FF,$FF,$FF,$FF)
set udg_Skl_Unit[0]=null
set udg_Skl_Unit[1]=null
set udg_Skl_Int=0endifendfunctionfunction InitTrig_SklV takes nothing returns nothing
set gg_trg_SklV=CreateTrigger()call DisableTrigger(gg_trg_SklV)
call TriggerRegisterTimerEventPeriodic(gg_trg_SklV,.05)call TriggerAddAction(gg_trg_SklV,function Trig_SklV_Actions)endfunctionfunction Trig_Demon_Power_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CJ')endfunctionfunction Trig_Demon_Power_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
local real delay=.7set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)set udg_Demon_Power_Buff='B02U'call EnableTrigger(gg_trg_Demon_Power_Attack)set bj_lastCreatedUnit=CreateUnit(p,'h0AF',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.8,1.8,1.8)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h01O',x,y,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,50,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h01A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set p=nullcall TransfromAction(u,x,y)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,udg_Demon_Power_Buff)<1)call DestroyEffect(AddSpecialEffectTarget("DemonBuff.mdx",u,"origin"))endloopcall DisableTrigger(gg_trg_Demon_Power_Attack)set u=nullendfunctionfunction InitTrig_Demon_Power takes nothing returns nothingset gg_trg_Demon_Power=CreateTrigger()call TriggerAddCondition(gg_trg_Demon_Power,Condition(function Trig_Demon_Power_Conditions))
call TriggerAddAction(gg_trg_Demon_Power,function Trig_Demon_Power_Actions)endfunctionfunction Trig_Demon_Power_Attack_Conditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),udg_Demon_Power_Buff)>0)endfunctionfunction Trig_Demon_Power_Attack_Actions takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("PurpleRoar.mdl",GetAttacker(),"origin"))call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",GetTriggerUnit(),"origin"))
endfunctionfunction InitTrig_Demon_Power_Attack takes nothing returns nothingset gg_trg_Demon_Power_Attack=CreateTrigger()call DisableTrigger(gg_trg_Demon_Power_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Demon_Power_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Demon_Power_Attack,Condition(function Trig_Demon_Power_Attack_Conditions))call TriggerAddAction(gg_trg_Demon_Power_Attack,function Trig_Demon_Power_Attack_Actions)endfunctionfunction Trig_Gvj_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CK')endfunctionfunction Trig_Gvj_Actions takes nothing returns nothingset udg_Gvj_Unit[0]=GetTriggerUnit()
set udg_Gvj_Loc[0]=GetSpellTargetLoc()set udg_Gvj_Loc[1]=GetUnitLoc(udg_Gvj_Unit[0])set udg_Gvj_Real[0]=AngleBetweenPoints(udg_Gvj_Loc[1],udg_Gvj_Loc[0])call RemoveLocation(udg_Gvj_Loc[0])set udg_Gvj_Loc[0]=nullset udg_Gvj_Own=GetOwningPlayer(udg_Gvj_Unit[0])
set udg_Gvj_Unit[1]=CreateUnit(udg_Gvj_Own,'h0AG',GetLocationX(udg_Gvj_Loc[1]),GetLocationY(udg_Gvj_Loc[1]),bj_UNIT_FACING)call RemoveLocation(udg_Gvj_Loc[1])set udg_Gvj_Loc[1]=nullcall PauseSystem(udg_Gvj_Unit[0],true)call SetUnitAnimation(udg_Gvj_Unit[0],"spell channel two")call TriggerSleepAction(.5)if(GetWidgetLife(udg_Gvj_Unit[0])>0)then
set udg_Gvj_Loc[0]=GetUnitLoc(udg_Gvj_Unit[0])set udg_Gvj_Loc[1]=PolarProjectionBJ(udg_Gvj_Loc[0],-100.,udg_Gvj_Real[0])set udg_Gvj_Loc[2]=PolarProjectionBJ(udg_Gvj_Loc[0],600.,udg_Gvj_Real[0])call RemoveLocation(udg_Gvj_Loc[0])set udg_Gvj_Loc[0]=nullset udg_Gvj_Unit[2]=CreateUnit(udg_Gvj_Own,'h0AK',GetLocationX(udg_Gvj_Loc[1]),GetLocationY(udg_Gvj_Loc[1]),udg_Gvj_Real[0])
set udg_Gvj_Unit[3]=CreateUnit(udg_Gvj_Own,'h0AK',GetLocationX(udg_Gvj_Loc[2]),GetLocationY(udg_Gvj_Loc[2]),udg_Gvj_Real[0])
call RemoveLocation(udg_Gvj_Loc[1])set udg_Gvj_Loc[1]=nullcall RemoveLocation(udg_Gvj_Loc[2])set udg_Gvj_Loc[2]=nullcall DisplayText("Suiton Daibakufu no Jutsu",udg_Gvj_Unit[0],.023,true,$DC,5,5,$FF)call SetUnitAnimation(udg_Gvj_Unit[0],"spell channel one")set udg_Gvj_Hash=InitHashtable()
set udg_Gvj_Real[1]=100.
set udg_Gvj_Real[2]=42.set udg_Gvj_Real[3]=65.set udg_Gvj_Real[4]=400.
set udg_Gvj_Real[5]=(2000.+(10.+(5.*I2R(GetUnitAbilityLevel(udg_Gvj_Unit[0],'A0CK')))*I2R(GetHeroStr(udg_Gvj_Unit[0],false))))set udg_Gvj_Real[6]=38.set udg_Gvj_Int[0]=22set udg_Gvj_Int[1]=30call EnableTrigger(gg_trg_GvjL)call EnableTrigger(gg_trg_GvjM)else
call PauseSystem(udg_Gvj_Unit[0],false)call SetUnitAnimation(udg_Gvj_Unit[1],"death")call UnitApplyTimedLife(udg_Gvj_Unit[1],'BTLF',3.5)set udg_Gvj_Own=null
set udg_Gvj_Unit[0]=null
set udg_Gvj_Unit[1]=null
set udg_Gvj_Real[0]=.0endifendfunctionfunction InitTrig_Gvj takes nothing returns nothingset gg_trg_Gvj=CreateTrigger()call TriggerAddCondition(gg_trg_Gvj,Condition(function Trig_Gvj_Conditions))
call TriggerAddAction(gg_trg_Gvj,function Trig_Gvj_Actions)endfunctionfunction Trig_GvjL_Func001C takes nothing returns booleanreturn(udg_Gvj_Int[0]>0)and(IsUnitDeadBJ(udg_Gvj_Unit[0])==false)endfunctionfunction Trig_GvjL_Actions takes nothing returns nothing
if(Trig_GvjL_Func001C())then
set udg_Gvj_Loc[0]=GetUnitLoc(udg_Gvj_Unit[0])set udg_Gvj_Loc[1]=PolarProjectionBJ(udg_Gvj_Loc[0],udg_Gvj_Real[1],udg_Gvj_Real[0])
call CreateNUnitsAtLoc(1,'h0AH',udg_Gvj_Own,udg_Gvj_Loc[1],udg_Gvj_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.7)call GroupAddUnit(udg_Gvj_GroupDummy,bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h0AI',udg_Gvj_Own,udg_Gvj_Loc[1],udg_Gvj_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call GroupAddUnit(udg_Gvj_GroupDummy2,bj_lastCreatedUnit)call CreateNUnitsAtLoc(1,'h0AJ',udg_Gvj_Own,udg_Gvj_Loc[1],udg_Gvj_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.1)call GroupAddUnit(udg_Gvj_GroupDummy,bj_lastCreatedUnit)
call RemoveLocation(udg_Gvj_Loc[0])set udg_Gvj_Loc[0]=nullcall RemoveLocation(udg_Gvj_Loc[1])set udg_Gvj_Loc[1]=nullset udg_Gvj_Int[0]=(udg_Gvj_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitAnimation(udg_Gvj_Unit[1],"death")call UnitApplyTimedLife(udg_Gvj_Unit[1],'BTLF',3.5)call UnitApplyTimedLife(udg_Gvj_Unit[2],'BTLF',.5)call UnitApplyTimedLife(udg_Gvj_Unit[3],'BTLF',.5)call PauseSystem(udg_Gvj_Unit[0],false)call SetUnitAnimation(udg_Gvj_Unit[0],"stand")set udg_Gvj_Unit[1]=null
set udg_Gvj_Unit[2]=null
set udg_Gvj_Unit[3]=null
set udg_Gvj_Real[1]=.0set udg_Gvj_Int[0]=0
call TriggerSleepAction(2.)call DisableTrigger(gg_trg_GvjM)
call GroupClear(udg_Gvj_GroupDummy)call GroupClear(udg_Gvj_GroupDummy2)
call GroupClear(udg_Gvj_Group2)call GroupClear(udg_Gvj_GroupMove)call GroupClear(udg_Gvj_GroupShake)call FlushParentHashtableBJ(udg_Gvj_Hash)set udg_Gvj_Hash=nullset udg_Gvj_Own=null
set udg_Gvj_Unit[0]=null
set udg_Gvj_Real[0]=.0set udg_Gvj_Real[2]=.0set udg_Gvj_Real[3]=.0set udg_Gvj_Real[4]=.0set udg_Gvj_Real[5]=.0set udg_Gvj_Real[6]=.0endifendfunctionfunction InitTrig_GvjL takes nothing returns nothing
set gg_trg_GvjL=CreateTrigger()call DisableTrigger(gg_trg_GvjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvjL,.1)call TriggerAddAction(gg_trg_GvjL,function Trig_GvjL_Actions)endfunctionfunction GvjM_GroupMoveAct3 takes nothing returns nothinglocal unit u=GetEnumUnit()local integer key=GetHandleId(u)
local real speed=LoadReal(udg_Gvj_Hash,key,1)local integer countlocal location array loc
set loc[0]=GetUnitLoc(u)
set loc[1]=PolarProjectionBJ(loc[0],speed,udg_Gvj_Real[0])call RemoveLocation(loc[0])set loc[0]=nullcall SetUnitPositionLoc(u,loc[1])call RemoveLocation(loc[1])set loc[1]=nullcall SaveReal(udg_Gvj_Hash,key,1,(speed-1.12))set count=LoadInteger(udg_Gvj_Hash,key,0)if(count>0)thencall SaveInteger(udg_Gvj_Hash,key,0,(count-1))else
call GroupRemoveUnit(udg_Gvj_GroupMove,u)endifset u=nullset speed=.0
set key=0set count=0endfunctionfunction GvjM_GroupDmgCond takes nothing returns boolean
if(IsUnitInGroup(GetFilterUnit(),udg_Gvj_Group2))thenreturn false
elseif(IsUnitAlly(GetFilterUnit(),udg_Gvj_Own))thenreturn false
elseif(GetWidgetLife(GetFilterUnit())<1)then
return false
elseif(GetUnitAbilityLevel(GetFilterUnit(),udg_GlobalSkill[0])!=0)thenreturn false
endifreturn trueendfunctionfunction GvjM_GroupDmgAct takes nothing returns nothinglocal unit u=GetEnumUnit()call GroupAddUnit(udg_Gvj_Group2,u)call GroupAddUnit(udg_Gvj_GroupMove,u)call SaveInteger(udg_Gvj_Hash,GetHandleId(u),0,udg_Gvj_Int[1])call SaveReal(udg_Gvj_Hash,GetHandleId(u),1,udg_Gvj_Real[6])
call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Naga\\NagaDeath\\NagaDeath.mdl",u,"origin"))if(IsUnitType(u,UNIT_TYPE_HERO))then
call DisplayText(I2S(R2I(udg_Gvj_Real[5]))+"!",u,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_Gvj_Unit[0],u,udg_Gvj_Real[5],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u=nullendfunctionfunction GvjM_GroupMoveAct2 takes nothing returns nothinglocal unit u=GetEnumUnit()local location array loc
if(GetWidgetLife(u)>0)thenset loc[0]=GetUnitLoc(u)
call Dynamic_GroupShake(GetLocationX(loc[0]),GetLocationY(loc[0]),udg_CameraShakeTime,udg_CameraShakePow,udg_CameraArea,udg_Gvj_GroupShake)set loc[1]=PolarProjectionBJ(loc[0],udg_Gvj_Real[3],udg_Gvj_Real[0])
call RemoveLocation(loc[0])set loc[0]=nullcall SetUnitPositionLoc(u,loc[1])call EnumDestructablesInCircleBJ(udg_Gvj_Real[4],loc[1],function TreeKiller)
set udg_Gvj_GroupDmg=GetUnitsInRangeOfLocMatching(udg_Gvj_Real[4],loc[1],Condition(function GvjM_GroupDmgCond))call RemoveLocation(loc[1])set loc[1]=nullcall ForGroup(udg_Gvj_GroupDmg,function GvjM_GroupDmgAct)call DestroyGroup(udg_Gvj_GroupDmg)set udg_Gvj_GroupDmg=nullendifset u=nullendfunctionfunction GvjM_GroupMoveAct takes nothing returns nothing
local unit u=GetEnumUnit()local location array loc
if(GetWidgetLife(u)>0)thenset loc[0]=GetUnitLoc(u)
set loc[1]=PolarProjectionBJ(loc[0],udg_Gvj_Real[2],udg_Gvj_Real[0])
call RemoveLocation(loc[0])set loc[0]=nullcall SetUnitPositionLoc(u,loc[1])call RemoveLocation(loc[1])set loc[1]=nullendifset u=nullendfunctionfunction Trig_GvjM_Actions takes nothing returns nothing
local group array gset g[0]=CreateGroup()call GroupAddGroup(udg_Gvj_GroupDummy,g[0])call ForGroup(g[0],function GvjM_GroupMoveAct)call DestroyGroup(g[0])set g[0]=nullset g[1]=CreateGroup()call GroupAddGroup(udg_Gvj_GroupDummy2,g[1])
call ForGroup(g[1],function GvjM_GroupMoveAct2)call DestroyGroup(g[1])set g[1]=nullset g[2]=CreateGroup()call GroupAddGroup(udg_Gvj_GroupMove,g[2])call ForGroup(g[2],function GvjM_GroupMoveAct3)call DestroyGroup(g[2])set g[2]=nullendfunctionfunction InitTrig_GvjM takes nothing returns nothing
set gg_trg_GvjM=CreateTrigger()call DisableTrigger(gg_trg_GvjM)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvjM,.04)call TriggerAddAction(gg_trg_GvjM,function Trig_GvjM_Actions)endfunctionfunction AI_Yoruichi_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='O002' or GetUnitTypeId(GetTriggerUnit())=='O009')endfunctionfunction AI_Yoruichi_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='O002' or GetUnitTypeId(GetAttacker())=='O009')
endfunctionfunction AI_Yoruichi_AttackedCond takes nothing returns booleanif(not AI_Yoruichi_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Yoruichi_AttackerCond takes nothing returns booleanif(not AI_Yoruichi_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Yoruichi_CondOR takes nothing returns booleanreturn(AI_Yoruichi_AttackedCond()or AI_Yoruichi_AttackerCond())endfunctionfunction AI_Yoruichi_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Yoruichi_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Yoruichi_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Yoruichi_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0CT')call SelectHeroSkill(AI_1,'A0CR')call SelectHeroSkill(AI_1,'A0CQ')call SelectHeroSkill(AI_1,'A0CN')call SelectHeroSkill(AI_1,'A0CM')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D00FA,AI_Point3)call RemoveLocation(AI_Point3)set AI_Point3=nullcall IssueImmediateOrderById(AI_1,$D0084)if(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D007F,AI_2)call IssueTargetOrderById(AI_1,$D00DD,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D02B7)set AI_Attacker=falseendifendifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Yoruichi takes nothing returns nothingset udg_AI_Trig[30]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[30],Condition(function AI_Yoruichi_Cond))call TriggerAddAction(udg_AI_Trig[30],function AI_Yoruichi_Act)endfunctionfunction Trig_Flb_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CM')endfunctionfunction Trig_Flb_Actions takes nothing returns nothingset udg_Flb_Unit[0]=GetTriggerUnit()
set udg_Flb_Loc[0]=GetSpellTargetLoc()set udg_Flb_Loc[1]=GetUnitLoc(udg_Flb_Unit[0])set udg_Flb_Real[0]=AngleBetweenPoints(udg_Flb_Loc[1],udg_Flb_Loc[0])call RemoveLocation(udg_Flb_Loc[0])set udg_Flb_Loc[0]=nullset udg_Flb_Loc[2]=PolarProjectionBJ(udg_Flb_Loc[1],45.,udg_Flb_Real[0])
call RemoveLocation(udg_Flb_Loc[1])set udg_Flb_Loc[1]=nullset udg_Flb_Own=GetOwningPlayer(udg_Flb_Unit[0])
set udg_Flb_Unit[1]=CreateUnit(udg_Flb_Own,'h0AN',GetLocationX(udg_Flb_Loc[2]),GetLocationY(udg_Flb_Loc[2]),udg_Flb_Real[0])
call RemoveLocation(udg_Flb_Loc[2])set udg_Flb_Loc[2]=nullset udg_Flb_Real[1]=45.set udg_Flb_Real[2]=120.
set udg_Flb_Real[3]=(.17+(.03*I2R(GetUnitAbilityLevel(udg_Flb_Unit[0],'A0CM'))))
set udg_Flb_Real[4]=(udg_Flb_Real[3]-.02)set udg_Flb_Dmg=300set udg_Flb_Int=(($4B0+('d'*GetUnitAbilityLevel(udg_Flb_Unit[0],'A0CM')))/ R2I(udg_Flb_Real[1]))
call EnableTrigger(gg_trg_FlbL)endfunctionfunction InitTrig_Flb takes nothing returns nothingset gg_trg_Flb=CreateTrigger()call TriggerAddCondition(gg_trg_Flb,Condition(function Trig_Flb_Conditions))
call TriggerAddAction(gg_trg_Flb,function Trig_Flb_Actions)endfunctionfunction Trig_FlbL_Func001Func007002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Flb_Group2)==false)
endfunctionfunction Trig_FlbL_Func001Func007002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Flb_Own))
endfunctionfunction Trig_FlbL_Func001Func007002003002002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_FlbL_Func001Func007002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_FlbL_Func001Func007002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_FlbL_Func001Func007002003002002001(),Trig_FlbL_Func001Func007002003002002002())endfunctionfunction Trig_FlbL_Func001Func007002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_FlbL_Func001Func007002003002001(),Trig_FlbL_Func001Func007002003002002())endfunctionfunction Trig_FlbL_Func001Func007002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_FlbL_Func001Func007002003001(),Trig_FlbL_Func001Func007002003002())endfunctionfunction Trig_FlbL_Func001Func010A takes nothing returns nothing
local unit u=GetEnumUnit()local integer hp=R2I(GetWidgetLife(u))local location array loc
local real facingcall GroupAddUnit(udg_Flb_Group2,u)if(hp>udg_Flb_Dmg)thencall SetUnitState(u,UNIT_STATE_LIFE,I2R(hp-udg_Flb_Dmg))
else
call SetUnitState(u,UNIT_STATE_LIFE,1.)call UnitDamageTarget(udg_Flb_Unit[0],u,I2R(udg_Flb_Dmg),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifif(IsUnitType(u,UNIT_TYPE_HERO))then
set loc[0]=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h04R',udg_Flb_Own,loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h04U',udg_Flb_Own,loc[0],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h01L',udg_Flb_Own,loc[0],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,2.5)call SetUnitVertexColor(bj_lastCreatedUnit,50,$96,$FF,$FF)call SetUnitFlyHeight(bj_lastCreatedUnit,100.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call UnitDamageTarget(udg_Flb_Unit[0],u,(udg_Flb_Real[3]*GetHeroAgi(udg_Flb_Unit[0],true)),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u)>0)thencall CreateNUnitsAtLoc(1,'u003',udg_Flb_Own,loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifif(GetWidgetLife(udg_Flb_Unit[0])>0 and IsUnitPaused(udg_Flb_Unit[0])==false)thenset loc[1]=GetUnitLoc(udg_Flb_Unit[0])set facing=AngleBetweenPoints(loc[1],loc[0])
set loc[2]=PolarProjectionBJ(loc[0],-120.,facing)call CreateNUnitsAtLoc(1,'h013',udg_Flb_Own,loc[1],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitX(udg_Flb_Unit[0],GetLocationX(loc[2]))call SetUnitY(udg_Flb_Unit[0],GetLocationY(loc[2]))call PanCameraToTimedLocForPlayer(udg_Flb_Own,loc[2],0)call CreateNUnitsAtLoc(1,'u003',udg_Flb_Own,loc[1],facing)call UnitAddAbility(bj_lastCreatedUnit,'A0CP')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,udg_Flb_Unit[0])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall SetUnitFacing(udg_Flb_Unit[0],facing)set facing=.0endifcall RemoveLocation(loc[0])set loc[0]=nullset udg_Flb_Int=1endifset u=nullset hp=0
endfunctionfunction Trig_FlbL_Func001C takes nothing returns booleanreturn(udg_Flb_Int>0)endfunctionfunction Trig_FlbL_Actions takes nothing returns nothing
if(Trig_FlbL_Func001C())then
set udg_Flb_Loc[0]=GetUnitLoc(udg_Flb_Unit[1])set udg_Flb_Loc[1]=PolarProjectionBJ(udg_Flb_Loc[0],udg_Flb_Real[1],udg_Flb_Real[0])
call RemoveLocation(udg_Flb_Loc[0])set udg_Flb_Loc[0]=nullcall SetUnitPositionLoc(udg_Flb_Unit[1],udg_Flb_Loc[1])call EnumDestructablesInCircleBJ(udg_Flb_Real[2],udg_Flb_Loc[1],function TreeKiller)
set udg_Flb_Group=GetUnitsInRangeOfLocMatching(udg_Flb_Real[2],udg_Flb_Loc[1],Condition(function Trig_FlbL_Func001Func007002003))call RemoveLocation(udg_Flb_Loc[1])set udg_Flb_Loc[1]=nullcall ForGroupBJ(udg_Flb_Group,function Trig_FlbL_Func001Func010A)call DestroyGroup(udg_Flb_Group)
set udg_Flb_Group=nullset udg_Flb_Real[3]=(udg_Flb_Real[3]+udg_Flb_Real[4])set udg_Flb_Int=(udg_Flb_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Flb_Group2)call UnitApplyTimedLife(udg_Flb_Unit[1],'BTLF',1.5)call SetUnitAnimation(udg_Flb_Unit[1],"death")set udg_Flb_Own=null
set udg_Flb_Unit[0]=null
set udg_Flb_Unit[1]=null
set udg_Flb_Real[0]=.0set udg_Flb_Real[1]=.0set udg_Flb_Real[2]=.0set udg_Flb_Real[3]=.0set udg_Flb_Real[4]=.0set udg_Flb_Dmg=0set udg_Flb_Int=0endifendfunctionfunction InitTrig_FlbL takes nothing returns nothing
set gg_trg_FlbL=CreateTrigger()call DisableTrigger(gg_trg_FlbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FlbL,.03)call TriggerAddAction(gg_trg_FlbL,function Trig_FlbL_Actions)endfunctionfunction Flw_Init_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CN')endfunctionfunction Flw_Init_Act takes nothing returns nothinglocal real delay
set udg_Flw_Unit=GetTriggerUnit()set udg_Flw_Skill='A0CO'
set udg_Flw_Buff='B02V'set udg_Flw_Own=GetOwningPlayer(udg_Flw_Unit)set delay=.1
call UnitAddAbility(udg_Flw_Unit,udg_Flw_Skill)call EnableTrigger(gg_trg_Flw_Atk)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(udg_Flw_Unit,udg_Flw_Buff)<1)endloopif(IsTriggerEnabled(gg_trg_Flw_Atk))then
call DisableTrigger(gg_trg_Flw_Atk)call UnitRemoveAbility(udg_Flw_Unit,udg_Flw_Skill)endifcall TriggerSleepAction(1.5)
set udg_Flw_Own=null
set udg_Flw_Unit=nullset udg_Flw_Skill=0set udg_Flw_Buff=0set delay=.0
endfunctionfunction InitTrig_Flw takes nothing returns nothingset gg_trg_Flw=CreateTrigger()call TriggerAddCondition(gg_trg_Flw,Condition(function Flw_Init_Conditions))
call TriggerAddAction(gg_trg_Flw,function Flw_Init_Act)endfunctionfunction Trig_Strike_Conditions takes nothing returns booleanif(GetUnitAbilityLevel(GetAttacker(),udg_Flw_Buff)<1)thenreturn false
elseif(IsUnitAlly(GetTriggerUnit(),udg_Flw_Own))then
return false
elseif(GetUnitAbilityLevel(GetTriggerUnit(),udg_GlobalSkill[0])>0)thenreturn false
endifreturn trueendfunctionfunction Trig_Strike_Actions takes nothing returns nothinglocal location array loc
call DisableTrigger(gg_trg_Flw_Atk)set udg_Flw_Target=GetTriggerUnit()call UnitRemoveAbility(udg_Flw_Unit,udg_Flw_Buff)call UnitRemoveAbility(udg_Flw_Unit,udg_Flw_Skill)set loc[0]=GetUnitLoc(udg_Flw_Unit)set loc[1]=GetUnitLoc(udg_Flw_Target)set udg_Flw_Real[0]=AngleBetweenPoints(loc[0],loc[1])call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullset udg_Flw_Real[1]=42.set udg_Flw_Real[2]=-100.set udg_Flw_Int=$Fcall PauseSystem(udg_Flw_Unit,true)call PauseSystem(udg_Flw_Target,true)call SetUnitPathing(udg_Flw_Unit,false)call SetUnitPathing(udg_Flw_Target,false)call SetUnitTimeScale(udg_Flw_Unit,1.3)call SetUnitAnimation(udg_Flw_Unit,"spell slam")
set udg_Flw_Eff[0]=AddSpecialEffectTarget("Blue_Phoenix_Mini.mdl",udg_Flw_Unit,"foot left")set udg_Flw_Eff[1]=AddSpecialEffectTarget("Blue_Phoenix_Mini.mdl",udg_Flw_Unit,"foot right")
set udg_Flw_Real[3]=(350+((1+I2R(GetUnitAbilityLevel(udg_Flw_Unit,'A0CN')))*I2R(GetHeroAgi(udg_Flw_Unit,true))))
set udg_Flw_Real[4]=udg_Flw_Real[3]/ 2.call GroupAddUnit(udg_Flw_Group,udg_Flw_Target)call UnitDamageTarget(udg_Flw_Unit,udg_Flw_Target,udg_Flw_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_Flw_Real[5]=200.
set udg_Flw_Bool=truecall EnableTrigger(gg_trg_FlwL)endfunctionfunction InitTrig_Flw_Atk takes nothing returns nothingset gg_trg_Flw_Atk=CreateTrigger()call DisableTrigger(gg_trg_Flw_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Flw_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Flw_Atk,Condition(function Trig_Strike_Conditions))call TriggerAddAction(gg_trg_Flw_Atk,function Trig_Strike_Actions)endfunctionfunction Trig_FlwL_Actions takes nothing returns nothing
local location array loc
local group glocal unit pickedif(udg_Flw_Int>0 and GetWidgetLife(udg_Flw_Unit)>0)thenset loc[0]=GetUnitLoc(udg_Flw_Target)set loc[1]=PolarProjectionBJ(loc[0],udg_Flw_Real[1],udg_Flw_Real[0])
call RemoveLocation(loc[0])set loc[0]=nullif(IsTerrainPathable(GetLocationX(loc[1]),GetLocationY(loc[1]),PATHING_TYPE_WALKABILITY)==false)then
set loc[2]=PolarProjectionBJ(loc[1],udg_Flw_Real[2],udg_Flw_Real[0])
call SetUnitPositionLoc(udg_Flw_Target,loc[1])call SetUnitPositionLoc(udg_Flw_Unit,loc[2])
call PanCameraToTimedLocForPlayer(udg_Flw_Own,loc[2],0)call RemoveLocation(loc[2])set loc[2]=nullendifcall CreateNUnitsAtLoc(1,'h04O',udg_Flw_Own,loc[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.2,1.2,1.2)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call EnumDestructablesInCircleBJ(udg_Flw_Real[5],loc[1],function TreeKiller)
set g=DynamicCreateGroup(loc[1],udg_Flw_Real[5],udg_Flw_Own)
call RemoveLocation(loc[1])set loc[1]=nullloop
set picked=FirstOfGroup(g)exitwhen picked==nullif(IsUnitInGroup(picked,udg_Flw_Group)==false)thencall GroupAddUnit(udg_Flw_Group,picked)call UnitDamageTarget(udg_Flw_Unit,picked,udg_Flw_Real[4],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifcall GroupRemoveUnit(g,picked)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall SetUnitFacing(udg_Flw_Unit,udg_Flw_Real[0])
set udg_Flw_Int=(udg_Flw_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitTimeScale(udg_Flw_Unit,1.)call PauseSystem(udg_Flw_Unit,false)
call PauseSystem(udg_Flw_Target,false)call SetUnitPathing(udg_Flw_Unit,true)call SetUnitPathing(udg_Flw_Target,true)
if(GetWidgetLife(udg_Flw_Target)>0)thenset loc[0]=GetUnitLoc(udg_Flw_Target)call CreateNUnitsAtLoc(1,'u003',udg_Flw_Own,loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[3],8)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Flw_Target)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[0])set loc[0]=nullendifcall DestroyEffect(udg_Flw_Eff[0])set udg_Flw_Eff[0]=nullcall DestroyEffect(udg_Flw_Eff[1])set udg_Flw_Eff[1]=nullset udg_Flw_Target=nullcall GroupClear(udg_Flw_Group)set udg_Flw_Real[1]=.0set udg_Flw_Real[2]=.0set udg_Flw_Real[3]=.0set udg_Flw_Real[4]=.0set udg_Flw_Real[5]=.0set udg_Flw_Int=0set udg_Flw_Bool=falseendifendfunctionfunction InitTrig_FlwL takes nothing returns nothing
set gg_trg_FlwL=CreateTrigger()call DisableTrigger(gg_trg_FlwL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FlwL,.03)call TriggerAddAction(gg_trg_FlwL,function Trig_FlwL_Actions)endfunctionfunction Flash_Strike_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CQ')endfunctionfunction Flash_Strike_Move takes unit u1,unit u2 returns nothing
local location array loc
local real facingcall DestroyEffect(AddSpecialEffectTarget("Shunpo.mdl",u1,"origin"))
set loc[0]=GetUnitLoc(u1)set loc[1]=GetUnitLoc(u2)set loc[2]=PolarProjectionBJ(loc[1],70.,GetRandomReal(0,360))set facing=AngleBetweenPoints(loc[2],loc[1])
call EnumDestructablesInCircleBJ(170.,loc[2],function TreeKiller)call SetUnitPositionLoc(u1,loc[2])call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(u1),loc[0],facing)call UnitAddAbility(bj_lastCreatedUnit,'A0CP')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,u1)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall SetUnitFacing(u1,facing)call SetUnitAnimation(u1,"attack")call UnitDamageTarget(u1,u2,(3.*I2R(GetHeroAgi(u1,true))),true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set facing=.0endfunctionfunction Flash_Strike_Actions takes nothing returns nothinglocal unit array ulocal player plocal integer timeslocal integer ilocal location array loc
local group glocal real delay=.3local real area=700.
local effect eff
local real x
local real y
set u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p=GetOwningPlayer(u[0])set times=(GetUnitAbilityLevel(u[0],'A0CQ')+2)set eff=AddSpecialEffectTarget("Blue_Phoenix_Mini.mdl",u[0],"foot right")call SetUnitVertexColor(u[0],$FF,$FF,$FF,$7F)call TriggerSleepAction(.01)
call Flash_Strike_Move(u[0],u[1])set u[1]=nullset i=0loop
exitwhen i>times
call TriggerSleepAction(delay)if(udg_Flw_Bool==false)thenif(GetWidgetLife(u[0])>0)thenset g=CreateGroupXYnWW(GetUnitX(u[0]),GetUnitY(u[0]),area,p)
set u[1]=GroupRandomUnit(g)call DestroyGroup(g)
set g=nullif(u[1]!=null)thencall Flash_Strike_Move(u[0],u[1])set u[1]=nullendifendifset i=i+1endifendloopcall SetUnitVertexColor(u[0],$FF,$FF,$FF,$FF)call DestroyEffect(eff)set eff=null
set p=nullset u[0]=nullset delay=.0
set area=.0set times=0set i=0endfunctionfunction InitTrig_Flash_Strike takes nothing returns nothing
set gg_trg_Flash_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Flash_Strike,Condition(function Flash_Strike_Conditions))call TriggerAddAction(gg_trg_Flash_Strike,function Flash_Strike_Actions)
endfunctionfunction Trig_ShunkoInit_DieAct takes nothing returns nothingcall DisableTrigger(udg_Shunko_Trig)
call SetHeroAgi(GetDyingUnit(),(GetHeroAgi(GetDyingUnit(),false)-30),true)endfunctionfunction Trig_ShunkoInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0CR')endfunctionfunction Trig_ShunkoInit_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()set udg_Shunko_Trig=CreateTrigger()call DisableTrigger(udg_Shunko_Trig)
call TriggerRegisterUnitEvent(udg_Shunko_Trig,u,EVENT_UNIT_DEATH)call TriggerAddAction(udg_Shunko_Trig,function Trig_ShunkoInit_DieAct)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Shunko_Init takes nothing returns nothingset gg_trg_Shunko_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Shunko_Init,Condition(function Trig_ShunkoInit_Conditions))call TriggerAddAction(gg_trg_Shunko_Init,function Trig_ShunkoInit_Actions)endfunctionfunction Trig_Shunko_Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CR')endfunctionfunction Trig_Shunko_Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='O009')then
set p=GetOwningPlayer(u)
set x=GetUnitX(u)set y=GetUnitY(u)call SetHeroAgi(u,(GetHeroAgi(u,false)+30),true)
call EnableTrigger(udg_Shunko_Trig)call DisplayText("Shunko",u,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Yoruichi\\Shunkou.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h056',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h04T',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h04U',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h091',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h04R',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call TransfromAction(u,x,y)set p=nullelse
call DisableTrigger(udg_Shunko_Trig)
call SetHeroAgi(u,(GetHeroAgi(u,false)-30),true)
endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Shunko takes nothing returns nothingset gg_trg_Shunko=CreateTrigger()call TriggerAddCondition(gg_trg_Shunko,Condition(function Trig_Shunko_Cond))
call TriggerAddAction(gg_trg_Shunko,function Trig_Shunko_Act)endfunctionfunction Trig_Flo_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CT')endfunctionfunction Trig_Flo_Actions takes nothing returns nothingset udg_Flo_Unit[0]=GetTriggerUnit()
set udg_Flo_Unit[1]=GetSpellTargetUnit()
set udg_Flo_Real[0]=GetRandomReal(0,360.)call PauseSystem(udg_Flo_Unit[0],true)call PauseSystem(udg_Flo_Unit[1],true)call SetUnitInvulnerable(udg_Flo_Unit[0],true)call SetUnitInvulnerable(udg_Flo_Unit[1],true)call SetUnitPathing(udg_Flo_Unit[0],false)set udg_Flo_Eff[0]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",udg_Flo_Unit[0],"foot left")set udg_Flo_Eff[1]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",udg_Flo_Unit[0],"foot right")set udg_Flo_Eff[2]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",udg_Flo_Unit[0],"left right")set udg_Flo_Eff[3]=AddSpecialEffectTarget("Abilities\\Weapons\\PhoenixMissile\\Phoenix_Missile_mini.mdl",udg_Flo_Unit[0],"hand right")call SetUnitTimeScale(udg_Flo_Unit[0],3.5)call Dynamic_Sound("Sounds\\YoruichiUlti.mp3")set udg_Flo_Own=GetOwningPlayer(udg_Flo_Unit[0])
set udg_Flo_Loc[0]=GetUnitLoc(udg_Flo_Unit[0])call CreateNUnitsAtLoc(1,'u003',udg_Flo_Own,udg_Flo_Loc[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0CP')call IssueTargetOrderById(bj_lastCreatedUnit,$D0097,udg_Flo_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(udg_Flo_Loc[0])set udg_Flo_Loc[0]=nullset udg_Flo_Real[1]=80.set udg_Flo_Real[2]=I2R(GetHeroAgi(udg_Flo_Unit[0],true))set udg_Flo_Int=1call EnableTrigger(gg_trg_FloL)endfunctionfunction InitTrig_Flo takes nothing returns nothingset gg_trg_Flo=CreateTrigger()call TriggerAddCondition(gg_trg_Flo,Condition(function Trig_Flo_Conditions))
call TriggerAddAction(gg_trg_Flo,function Trig_Flo_Actions)endfunctionfunction Trig_FloL_Func001C takes nothing returns booleanreturn(udg_Flo_Int<17)and(IsUnitDeadBJ(udg_Flo_Unit[1])==false)endfunctionfunction Trig_FloL_Actions takes nothing returns nothing
if(Trig_FloL_Func001C())then
set udg_Flo_Real[0]=(udg_Flo_Real[0]+24.)set udg_Flo_Loc[0]=GetUnitLoc(udg_Flo_Unit[1])set udg_Flo_Loc[1]=PolarProjectionBJ(udg_Flo_Loc[0],udg_Flo_Real[1],udg_Flo_Real[0])
call EnumDestructablesInCircleBJ(200.,udg_Flo_Loc[1],function TreeKiller)if(IsTerrainPathable(GetLocationX(udg_Flo_Loc[1]),GetLocationY(udg_Flo_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitPositionLoc(udg_Flo_Unit[0],udg_Flo_Loc[1])call SetUnitFacing(udg_Flo_Unit[0],AngleBetweenPoints(udg_Flo_Loc[1],udg_Flo_Loc[0]))endifcall CreateNUnitsAtLoc(1,'h04R',udg_Flo_Own,udg_Flo_Loc[0],udg_Flo_Real[0])call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.8)call CreateNUnitsAtLoc(1,'h04U',udg_Flo_Own,udg_Flo_Loc[0],udg_Flo_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Flo_Loc[0])set udg_Flo_Loc[0]=nullcall RemoveLocation(udg_Flo_Loc[1])set udg_Flo_Loc[1]=nullcall SetUnitAnimation(udg_Flo_Unit[0],"attack")if(udg_Flo_Int==0)thencall CreateTextTagUnitBJ("1 hit",udg_Flo_Unit[1],0,$A,'d','d','d',0)
else
call CreateTextTagUnitBJ(I2S(udg_Flo_Int)+" hits",udg_Flo_Unit[1],0,$A,'d','d','d',0)endifcall SetTextTagVelocityBJ(bj_lastCreatedTextTag,100.,90)
call SetTextTagPermanentBJ(bj_lastCreatedTextTag,false)call SetTextTagLifespanBJ(bj_lastCreatedTextTag,.6)call SetUnitInvulnerable(udg_Flo_Unit[1],false)call UnitDamageTarget(udg_Flo_Unit[0],udg_Flo_Unit[1],udg_Flo_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call SetUnitInvulnerable(udg_Flo_Unit[1],true)set udg_Flo_Int=(udg_Flo_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitTimeScale(udg_Flo_Unit[0],1.)call SetUnitPathing(udg_Flo_Unit[0],true)if(GetWidgetLife(udg_Flo_Unit[1])>0)then
set udg_Flo_Real[0]=(udg_Flo_Real[0]+24.)set udg_Flo_Loc[0]=GetUnitLoc(udg_Flo_Unit[1])set udg_Flo_Loc[1]=PolarProjectionBJ(udg_Flo_Loc[0],udg_Flo_Real[1],udg_Flo_Real[0])
call SetUnitPositionLoc(udg_Flo_Unit[0],udg_Flo_Loc[1])set udg_Flo_Real[0]=AngleBetweenPoints(udg_Flo_Loc[1],udg_Flo_Loc[0])call SetUnitFacing(udg_Flo_Unit[0],udg_Flo_Real[0])call CreateNUnitsAtLoc(1,'h04R',udg_Flo_Own,udg_Flo_Loc[0],udg_Flo_Real[0])call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.8)call CreateNUnitsAtLoc(1,'h04U',udg_Flo_Own,udg_Flo_Loc[0],udg_Flo_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Flo_Loc[0])set udg_Flo_Loc[0]=nullcall RemoveLocation(udg_Flo_Loc[1])set udg_Flo_Loc[1]=nullcall SetUnitAnimation(udg_Flo_Unit[0],"spell slam")call PauseSystem(udg_Flo_Unit[1],false)call SetUnitInvulnerable(udg_Flo_Unit[1],false)call TriggerSleepAction(.03)
call DestroyEffect(udg_Flo_Eff[0])set udg_Flo_Eff[0]=nullcall DestroyEffect(udg_Flo_Eff[1])set udg_Flo_Eff[1]=nullcall DestroyEffect(udg_Flo_Eff[2])set udg_Flo_Eff[2]=nullcall DestroyEffect(udg_Flo_Eff[3])set udg_Flo_Eff[3]=nullset udg_Flo_Real[1]=30.set udg_Flo_Int=39call SetUnitPathing(udg_Flo_Unit[1],false)call EnableTrigger(gg_trg_FloL2)
call TriggerSleepAction(.3)call PauseSystem(udg_Flo_Unit[0],false)call SetUnitInvulnerable(udg_Flo_Unit[0],false)else
call DestroyEffect(udg_Flo_Eff[0])set udg_Flo_Eff[0]=nullcall DestroyEffect(udg_Flo_Eff[1])set udg_Flo_Eff[1]=nullcall DestroyEffect(udg_Flo_Eff[2])set udg_Flo_Eff[2]=nullcall DestroyEffect(udg_Flo_Eff[3])set udg_Flo_Eff[3]=nullcall PauseSystem(udg_Flo_Unit[0],false)call PauseSystem(udg_Flo_Unit[1],false)call SetUnitInvulnerable(udg_Flo_Unit[0],false)call SetUnitInvulnerable(udg_Flo_Unit[1],false)set udg_Flo_Own=null
set udg_Flo_Unit[0]=null
set udg_Flo_Unit[1]=null
set udg_Flo_Real[0]=.0set udg_Flo_Real[1]=.0set udg_Flo_Real[2]=.0set udg_Flo_Int=0endifendifendfunctionfunction InitTrig_FloL takes nothing returns nothing
set gg_trg_FloL=CreateTrigger()call DisableTrigger(gg_trg_FloL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FloL,.15)call TriggerAddAction(gg_trg_FloL,function Trig_FloL_Actions)endfunctionfunction Trig_FloL2_Func001C takes nothing returns booleanreturn(udg_Flo_Int>0)and(IsUnitDeadBJ(udg_Flo_Unit[1])==false)endfunctionfunction Trig_FloL2_Actions takes nothing returns nothingif(Trig_FloL2_Func001C())thenset udg_Flo_Loc[0]=GetUnitLoc(udg_Flo_Unit[1])set udg_Flo_Loc[1]=PolarProjectionBJ(udg_Flo_Loc[0],udg_Flo_Real[1],udg_Flo_Real[0])
if(IsTerrainPathable(GetLocationX(udg_Flo_Loc[1]),GetLocationY(udg_Flo_Loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(200.,udg_Flo_Loc[1],function TreeKiller)call SetUnitPositionLoc(udg_Flo_Unit[1],udg_Flo_Loc[1])call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",udg_Flo_Loc[1]))else
call DestroyEffect(AddSpecialEffectLoc("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",udg_Flo_Loc[0]))endifcall RemoveLocation(udg_Flo_Loc[0])set udg_Flo_Loc[0]=nullcall RemoveLocation(udg_Flo_Loc[1])set udg_Flo_Loc[1]=nullset udg_Flo_Int=(udg_Flo_Int-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Flo_Real[2]=((5.*I2R(GetUnitAbilityLevel(udg_Flo_Unit[0],'A0CT')))*I2R(GetHeroAgi(udg_Flo_Unit[0],true)))call TriggerSleepAction(.0)call SetUnitPathing(udg_Flo_Unit[1],true)if(GetWidgetLife(udg_Flo_Unit[1])>0)then
set udg_Flo_Loc[0]=GetUnitLoc(udg_Flo_Unit[1])call EnumDestructablesInCircleBJ(600.,udg_Flo_Loc[0],function TreeKiller)call Dynamic_GroupShake(GetLocationX(udg_Flo_Loc[0]),GetLocationY(udg_Flo_Loc[0]),1.,udg_CameraShakePow,udg_CameraArea,null)
call CreateNUnitsAtLoc(1,'h04R',udg_Flo_Own,udg_Flo_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h04R',udg_Flo_Own,udg_Flo_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(udg_Flo_Loc[0])set udg_Flo_Loc[0]=nullcall DisplayText(I2S(R2I(udg_Flo_Real[2]))+"!",udg_Flo_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Flo_Unit[0],udg_Flo_Unit[1],udg_Flo_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifcall TriggerSleepAction(.5)set udg_Flo_Own=null
set udg_Flo_Unit[0]=null
set udg_Flo_Unit[1]=null
set udg_Flo_Real[0]=.0set udg_Flo_Real[1]=.0set udg_Flo_Real[2]=.0set udg_Flo_Int=0endifendfunctionfunction InitTrig_FloL2 takes nothing returns nothingset gg_trg_FloL2=CreateTrigger()
call DisableTrigger(gg_trg_FloL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FloL2,.03)
call TriggerAddAction(gg_trg_FloL2,function Trig_FloL2_Actions)endfunctionfunction AI_Lucci_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='N01U' or GetUnitTypeId(GetTriggerUnit())=='N01V')endfunctionfunction AI_Lucci_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='N01U' or GetUnitTypeId(GetAttacker())=='N01V')
endfunctionfunction AI_Lucci_AttackedCond takes nothing returns boolean
if(not AI_Lucci_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Lucci_AttackerCond takes nothing returns boolean
if(not AI_Lucci_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Lucci_CondOR takes nothing returns booleanreturn(AI_Lucci_AttackedCond()or AI_Lucci_AttackerCond())endfunctionfunction AI_Lucci_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Lucci_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Lucci_Act takes nothing returns nothinglocal unit AI_1local unit AI_2local location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Lucci_AttackedType())thenset AI_2=GetAttacker()set AI_1=GetTriggerUnit()else
set AI_1=GetAttacker()set AI_2=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(AI_1)>34. or(GetUnitLifePercent(AI_2)<15. and IsUnitType(AI_2,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(AI_1)>0)thencall SelectHeroSkill(AI_1,'A0CZ')call SelectHeroSkill(AI_1,'A0CY')call SelectHeroSkill(AI_1,'A0CX')call SelectHeroSkill(AI_1,'A0CV')call SelectHeroSkill(AI_1,'A0CU')endifset ResultHP=(GetUnitLifePercent(AI_1)-GetUnitLifePercent(AI_2))
set AI_Point1=GetUnitLoc(AI_1)set AI_Point2=GetUnitLoc(AI_2)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499 and ResultHP>29.)thencall IssuePointOrderByIdLoc(AI_1,$D022D,AI_Point2)call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifset AI_Point3=GetUnitLoc(AI_2)call IssuePointOrderByIdLoc(AI_1,$D009D,AI_Point3)call RemoveLocation(AI_Point3)set AI_Point3=nullif(IsUnitType(AI_2,UNIT_TYPE_HERO))thencall IssueTargetOrderById(AI_1,$D0065,AI_2)call IssueTargetOrderById(AI_1,$D007F,AI_2)if(AI_Attacker)thencall IssueImmediateOrderById(AI_1,$D02B7)call IssueImmediateOrderById(AI_1,$D0277)set AI_Attacker=falseendifendifendifset AI_1=nullset AI_2=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Lucci takes nothing returns nothing
set udg_AI_Trig[31]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[31],Condition(function AI_Lucci_Cond))call TriggerAddAction(udg_AI_Trig[31],function AI_Lucci_Act)
endfunctionfunction Trig_Tpk_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CU')endfunctionfunction Trig_Tpk_Actions takes nothing returns nothingset udg_Tpk_Unit[0]=GetTriggerUnit()
set udg_Tpk_Loc[0]=GetSpellTargetLoc()set udg_Tpk_Loc[1]=GetUnitLoc(udg_Tpk_Unit[0])set udg_Tpk_Real[0]=AngleBetweenPoints(udg_Tpk_Loc[1],udg_Tpk_Loc[0])call RemoveLocation(udg_Tpk_Loc[0])set udg_Tpk_Loc[0]=nullset udg_Tpk_Loc[2]=PolarProjectionBJ(udg_Tpk_Loc[1],100.,udg_Tpk_Real[0])call RemoveLocation(udg_Tpk_Loc[1])set udg_Tpk_Loc[1]=nullset udg_Tpk_Own=GetOwningPlayer(udg_Tpk_Unit[0])
set udg_Tpk_Unit[1]=CreateUnit(udg_Tpk_Own,'h0AP',GetLocationX(udg_Tpk_Loc[2]),GetLocationY(udg_Tpk_Loc[2]),udg_Tpk_Real[0])
set udg_Tpk_Unit[2]=CreateUnit(udg_Tpk_Own,'h0AT',GetLocationX(udg_Tpk_Loc[3]),GetLocationY(udg_Tpk_Loc[2]),udg_Tpk_Real[0])
call RemoveLocation(udg_Tpk_Loc[2])set udg_Tpk_Loc[2]=nullcall SetUnitTimeScale(udg_Tpk_Unit[1],2.)call DisplayText("Rankyaku",udg_Tpk_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SetUnitVertexColor(udg_Tpk_Unit[2],0,0,0,$FF)set udg_Tpk_Real[1]=62.set udg_Tpk_Real[2]=250.
set udg_Tpk_Real[3]=BasicDmg_Q(udg_Tpk_Unit[0],'A0CU',1)
if(GetUnitTypeId(udg_Tpk_Unit[0])=='N01V')thenset udg_Tpk_Real[3]=udg_Tpk_Real[3]+125.
endifset udg_Tpk_Int=$Fcall EnableTrigger(gg_trg_TpkL)endfunctionfunction InitTrig_Tpk takes nothing returns nothingset gg_trg_Tpk=CreateTrigger()call TriggerAddCondition(gg_trg_Tpk,Condition(function Trig_Tpk_Conditions))
call TriggerAddAction(gg_trg_Tpk,function Trig_Tpk_Actions)endfunctionfunction Trig_TpkL_Func001Func008002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Tpk_Group2)==false)
endfunctionfunction Trig_TpkL_Func001Func008002003002001 takes nothing returns booleanreturn(IsUnitAlly(GetFilterUnit(),udg_Tpk_Own)==false)endfunctionfunction Trig_TpkL_Func001Func008002003002002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_TpkL_Func001Func008002003002002002 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_TpkL_Func001Func008002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_TpkL_Func001Func008002003002002001(),Trig_TpkL_Func001Func008002003002002002())endfunctionfunction Trig_TpkL_Func001Func008002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_TpkL_Func001Func008002003002001(),Trig_TpkL_Func001Func008002003002002())endfunctionfunction Trig_TpkL_Func001Func008002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_TpkL_Func001Func008002003001(),Trig_TpkL_Func001Func008002003002())endfunctionfunction Trig_TpkL_Func001Func011A takes nothing returns nothing
local unit u=GetEnumUnit()local location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h04R',udg_Tpk_Own,loc,GetRandomReal(0,360))call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
call GroupAddUnit(udg_Tpk_Group2,u)call UnitDamageTarget(udg_Tpk_Unit[0],u,udg_Tpk_Real[3],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_TpkL_Func001C takes nothing returns booleanreturn(udg_Tpk_Int>0)endfunctionfunction Trig_TpkL_Actions takes nothing returns nothing
if(Trig_TpkL_Func001C())then
set udg_Tpk_Loc[0]=GetUnitLoc(udg_Tpk_Unit[1])set udg_Tpk_Loc[1]=PolarProjectionBJ(udg_Tpk_Loc[0],udg_Tpk_Real[1],udg_Tpk_Real[0])
call RemoveLocation(udg_Tpk_Loc[0])set udg_Tpk_Loc[0]=nullcall SetUnitPositionLoc(udg_Tpk_Unit[1],udg_Tpk_Loc[1])call SetUnitPositionLoc(udg_Tpk_Unit[2],udg_Tpk_Loc[1])call EnumDestructablesInCircleBJ(udg_Tpk_Real[2],udg_Tpk_Loc[1],function TreeKiller)
set udg_Tpk_Group=GetUnitsInRangeOfLocMatching(udg_Tpk_Real[2],udg_Tpk_Loc[1],Condition(function Trig_TpkL_Func001Func008002003))call RemoveLocation(udg_Tpk_Loc[1])set udg_Tpk_Loc[1]=nullcall ForGroupBJ(udg_Tpk_Group,function Trig_TpkL_Func001Func011A)call DestroyGroup(udg_Tpk_Group)
set udg_Tpk_Group=nullset udg_Tpk_Int=(udg_Tpk_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitAnimation(udg_Tpk_Unit[1],"death")call SetUnitAnimation(udg_Tpk_Unit[2],"death")call UnitApplyTimedLife(udg_Tpk_Unit[1],'BTLF',1.)call UnitApplyTimedLife(udg_Tpk_Unit[2],'BTLF',1.)call GroupClear(udg_Tpk_Group2)set udg_Tpk_Own=null
set udg_Tpk_Unit[0]=null
set udg_Tpk_Unit[1]=null
set udg_Tpk_Unit[2]=null
set udg_Tpk_Real[0]=.0set udg_Tpk_Real[1]=.0set udg_Tpk_Real[2]=.0set udg_Tpk_Real[3]=.0set udg_Tpk_Int=0endifendfunctionfunction InitTrig_TpkL takes nothing returns nothing
set gg_trg_TpkL=CreateTrigger()call DisableTrigger(gg_trg_TpkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TpkL,.04)call TriggerAddAction(gg_trg_TpkL,function Trig_TpkL_Actions)endfunctionfunction Trig_Shigan_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CV')endfunctionfunction Trig_Shigan_Actions takes nothing returns nothinglocal unit array ulocal location array loc
local integer sklvlocal real array rlocal boolean blocal player plocal effect eff
local integer iset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set sklv=GetUnitAbilityLevel(u[0],'A0CV')call SetUnitAnimation(u[0],"spell slam")
if(GetUnitTypeId(u[0])=='N01V')thenset b=trueset eff=AddSpecialEffectTarget("SadoBuff.mdl",u[0],"hand left")else
set b=falseset eff=AddSpecialEffectTarget("Abilities\\Weapons\\IllidanMissile\\IllidanMissile.mdl",u[0],"hand right")endifcall TriggerSleepAction(.01)
set p=GetOwningPlayer(u[0])set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set r[0]=AngleBetweenPoints(loc[0],loc[1])call CreateNUnitsAtLoc(1,'h01J',p,loc[0],r[0])call SetUnitScale(bj_lastCreatedUnit,.5,.5,.5)call SetUnitFlyHeight(bj_lastCreatedUnit,50.,.0)
call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set loc[2]=PolarProjectionBJ(loc[1],-110.,r[0])set r[1]=(DistanceBetweenPoints(loc[0],loc[2])/ 5.)set i=1loop
exitwhen i>5
set loc[3]=PolarProjectionBJ(loc[0],(r[1]*I2R(i)),r[0])call CreateNUnitsAtLoc(1,'h013',p,loc[3],r[0])call SetUnitScale(bj_lastCreatedUnit,.8,.8,.8)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[3])set loc[3]=nullset i=i+1endloopif(b)thenset b=falsecall EnumDestructablesInCircleBJ(300.,loc[1],function TreeKiller)call CreateNUnitsAtLoc(1,'u003',p,loc[1],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A0CW')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A0CW',sklv)
call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc[0])set loc[0]=nullcall CreateNUnitsAtLoc(1,'h04R',p,loc[1],GetRandomReal(0,360.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc[1])set loc[1]=nullcall SetUnitPositionLocFacingBJ(u[0],loc[2],r[0])call RemoveLocation(loc[2])set loc[2]=nullcall DisplayText("Shigan",u[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Lucci\\Shigan.wav",GetUnitX(u[0]),GetUnitY(u[0]))call UnitDamageTarget(u[0],u[1],(125.+(75.*I2R(sklv))),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call DestroyEffect(AddSpecialEffectTarget("BloodElementalMissile.mdl",u[1],"chest"))
call TriggerSleepAction(.04)
call DestroyEffect(eff)set eff=null
set p=nullset u[0]=nullset u[1]=nullset r[0]=0set r[1]=0set sklv=0set i=0endfunctionfunction InitTrig_Shigan takes nothing returns nothingset gg_trg_Shigan=CreateTrigger()call TriggerAddCondition(gg_trg_Shigan,Condition(function Trig_Shigan_Conditions))call TriggerAddAction(gg_trg_Shigan,function Trig_Shigan_Actions)endfunctionfunction Trig_TkiInit_Cond takes nothing returns boolean
return(GetLearnedSkill()=='A0CX')endfunctionfunction Trig_TkiA_Act takes nothing returns nothing
local unit u=GetAttacker()local unit u2=GetTriggerUnit()local player p=GetOwningPlayer(u2)local location array loc
local real facingset loc[0]=GetUnitLoc(u2)set loc[1]=GetUnitLoc(u)
set facing=AngleBetweenPoints(loc[0],loc[1])
call CreateNUnitsAtLoc(1,'h042',p,loc[0],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call CreateNUnitsAtLoc(1,'h017',p,loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set loc[2]=PolarProjectionBJ(loc[1],180.,facing)
if(IsTerrainPathable(GetLocationX(loc[2]),GetLocationY(loc[2]),PATHING_TYPE_WALKABILITY)==false and IsUnitType(u,UNIT_TYPE_ANCIENT)==false)thencall SetUnitX(u,GetLocationX(loc[2]))call SetUnitY(u,GetLocationY(loc[2]))endifcall UnitDamageTargetBJ(u2,u,GetRandomReal(300,800),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)
if(GetUnitState(u,UNIT_STATE_LIFE)>0)thencall CreateNUnitsAtLoc(1,'u003',p,loc[2],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call SetUnitAbilityLevelSwapped(udg_GlobalSkill[2],bj_lastCreatedUnit,5)
call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullset p=nullset u=nullset u2=nullset facing=.0endfunctionfunction Trig_TkiA_Cond takes nothing returns booleanif(IsUnitType(GetAttacker(),UNIT_TYPE_MELEE_ATTACKER)==false)thenreturn false
elseif(GetRandomInt(1,'d')>udg_Tki_Int)thenreturn false
endifreturn trueendfunctionfunction Trig_TkiInit_Actions takes nothing returns nothingset udg_Tki_Int=20set udg_Tki_TrigAttack=CreateTrigger()call TriggerRegisterUnitEvent(udg_Tki_TrigAttack,GetLearningUnit(),EVENT_UNIT_ATTACKED)call TriggerAddCondition(udg_Tki_TrigAttack,Condition(function Trig_TkiA_Cond))call TriggerAddAction(udg_Tki_TrigAttack,function Trig_TkiA_Act)
call DisableTrigger(udg_Tki_TrigAttack)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Tki_Init takes nothing returns nothing
set gg_trg_Tki_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Tki_Init,Condition(function Trig_TkiInit_Cond))call TriggerAddAction(gg_trg_Tki_Init,function Trig_TkiInit_Actions)
endfunctionfunction Trig_Tki_Cond takes nothing returns boolean
return(GetSpellAbilityId()=='A0CX')endfunctionfunction Trig_Tki_Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer mybuff='B02X'local real delay=.1call DisplayText("Tekkai",u,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Lucci\\Tekkai.wav",GetUnitX(u),GetUnitY(u))
if(GetUnitTypeId(u)=='N01V')then
call SetUnitAnimation(u,"spell")
endifcall EnableTrigger(udg_Tki_TrigAttack)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,mybuff)<1)endloopcall DisableTrigger(udg_Tki_TrigAttack)set u=nullset mybuff=0
set delay=.0
endfunctionfunction InitTrig_Tki takes nothing returns nothingset gg_trg_Tki=CreateTrigger()call TriggerAddCondition(gg_trg_Tki,Condition(function Trig_Tki_Cond))call TriggerAddAction(gg_trg_Tki,function Trig_Tki_Act)endfunctionfunction Trig_BafInit_AtkAct takes nothing returns nothinglocal unit u=GetAttacker()local real facing=GetUnitFacing(u)local real distlocal real array xyset dist=60.
set xy[0]=GetUnitX(u)set xy[1]=GetUnitY(u)set xy[2]=PolarX(xy[0],dist,facing)set xy[3]=PolarY(xy[1],dist,facing)set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(u),'h0AQ',xy[2],xy[3],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)set u=nullendfunctionfunction Trig_BafInit_AtkCond takes nothing returns booleanreturn(GetAttacker()==udg_Baf_Unit and IsUnitEnemy(GetAttacker(),udg_Baf_Own))endfunctionfunction Trig_BafInit_DieAct takes nothing returns nothingcall DisableTrigger(udg_Baf_TrigDie)
call DisableTrigger(udg_Baf_TrigAtk)
set udg_Baf_Unit=nullendfunctionfunction Trig_BafInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0CY')endfunctionfunction Trig_BafInit_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()set udg_Baf_TrigDie=CreateTrigger()call DisableTrigger(udg_Baf_TrigDie)
call TriggerRegisterUnitEvent(udg_Baf_TrigDie,u,EVENT_UNIT_DEATH)call TriggerAddAction(udg_Baf_TrigDie,function Trig_BafInit_DieAct)set udg_Baf_TrigAtk=CreateTrigger()call DisableTrigger(udg_Baf_TrigAtk)
call TriggerRegisterAnyUnitEventBJ(udg_Baf_TrigAtk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_Baf_TrigAtk,Condition(function Trig_BafInit_AtkCond))call TriggerAddAction(udg_Baf_TrigAtk,function Trig_BafInit_AtkAct)set u=nullcall DestroyTrigger(gg_trg_Baf_Init)
endfunctionfunction InitTrig_Baf_Init takes nothing returns nothing
set gg_trg_Baf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Baf_Init,Condition(function Trig_BafInit_Conditions))call TriggerAddAction(gg_trg_Baf_Init,function Trig_BafInit_Actions)
endfunctionfunction Trig_Baf_Cond takes nothing returns boolean
return(GetSpellAbilityId()=='A0CY')endfunctionfunction Trig_Baf_Act takes nothing returns nothinglocal player plocal real x
local real y
if(udg_Baf_Unit==null)thenset udg_Baf_Unit=GetTriggerUnit()endifset p=GetOwningPlayer(udg_Baf_Unit)set x=GetUnitX(udg_Baf_Unit)
set y=GetUnitY(udg_Baf_Unit)
set bj_lastCreatedUnit=CreateUnit(p,'h04D',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)if(GetUnitTypeId(udg_Baf_Unit)!='N01V')thencall EnableTrigger(udg_Baf_TrigDie)call EnableTrigger(udg_Baf_TrigAtk)set bj_lastCreatedUnit=CreateUnit(p,'h04A',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h048',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,'d',50,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call TransfromAction(udg_Baf_Unit,x,y)set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Baf_Unit)
else
call DisableTrigger(udg_Baf_TrigDie)
call DisableTrigger(udg_Baf_TrigAtk)
set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Baf_Unit)
set udg_Baf_Unit=nullendifendfunctionfunction InitTrig_Baf takes nothing returns nothingset gg_trg_Baf=CreateTrigger()call TriggerAddCondition(gg_trg_Baf,Condition(function Trig_Baf_Cond))call TriggerAddAction(gg_trg_Baf,function Trig_Baf_Act)endfunctionfunction Trig_Rog_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0CZ')endfunctionfunction Trig_Rog_Actions takes nothing returns nothingset udg_Rog_Unit[0]=GetTriggerUnit()
set udg_Rog_Unit[1]=GetSpellTargetUnit()
call PauseSystem(udg_Rog_Unit[0],true)call PauseSystem(udg_Rog_Unit[1],true)call SetUnitInvulnerable(udg_Rog_Unit[0],true)call SetUnitInvulnerable(udg_Rog_Unit[1],true)call SetUnitPathing(udg_Rog_Unit[0],false)set udg_Rog_Loc[0]=GetUnitLoc(udg_Rog_Unit[0])set udg_Rog_Loc[1]=GetUnitLoc(udg_Rog_Unit[1])set udg_Rog_Real[0]=AngleBetweenPoints(udg_Rog_Loc[0],udg_Rog_Loc[1])set udg_Rog_Real[1]=DistanceBetweenPoints(udg_Rog_Loc[0],udg_Rog_Loc[1])
set udg_Rog_XY[0]=GetLocationX(udg_Rog_Loc[0])set udg_Rog_XY[1]=GetLocationY(udg_Rog_Loc[0])call RemoveLocation(udg_Rog_Loc[0])set udg_Rog_Loc[0]=nullcall RemoveLocation(udg_Rog_Loc[1])set udg_Rog_Loc[1]=nullset udg_Rog_Int[0]=(R2I(udg_Rog_Real[1])/ 300)set udg_Rog_Int[1]=0
if(GetRandomInt(0,1)==0)then
set udg_Rog_Bool=falseelse
set udg_Rog_Bool=trueendifset udg_Rog_Own=GetOwningPlayer(udg_Rog_Unit[0])
set udg_Rog_Eff[0]=AddSpecialEffectTarget("AvengerMissile.mdl",udg_Rog_Unit[0],"hand left")set udg_Rog_Eff[1]=AddSpecialEffectTarget("AvengerMissile.mdl",udg_Rog_Unit[0],"hand right")
set udg_Rog_Eff[2]=AddSpecialEffectTarget("AvengerMissile.mdl",udg_Rog_Unit[0],"foot left")set udg_Rog_Eff[3]=AddSpecialEffectTarget("AvengerMissile.mdl",udg_Rog_Unit[0],"foot right")
set udg_Rog_Eff[4]=AddSpecialEffectTarget("AvengerMissile.mdl",udg_Rog_Unit[0],"chest")call EnableTrigger(gg_trg_RogL)endfunctionfunction InitTrig_Rog takes nothing returns nothingset gg_trg_Rog=CreateTrigger()call TriggerAddCondition(gg_trg_Rog,Condition(function Trig_Rog_Conditions))
call TriggerAddAction(gg_trg_Rog,function Trig_Rog_Actions)endfunctionfunction Trig_RogL_Func002C takes nothing returns booleanreturn(udg_Rog_Int[0]>0)
endfunctionfunction Trig_RogL_Actions takes nothing returns nothing
if(Trig_RogL_Func002C())then
set udg_Rog_Int[1]=(udg_Rog_Int[1]+1)set udg_Rog_Loc[0]=Location(udg_Rog_XY[0],udg_Rog_XY[1])
set udg_Rog_Loc[1]=PolarProjectionBJ(udg_Rog_Loc[0],(I2R(udg_Rog_Int[1])*240.),udg_Rog_Real[0])if(udg_Rog_Bool)then
set udg_Rog_Bool=falseset udg_Rog_Loc[2]=PolarProjectionBJ(udg_Rog_Loc[1],GetRandomReal(200.,300.),(udg_Rog_Real[0]+89.))else
set udg_Rog_Bool=trueset udg_Rog_Loc[2]=PolarProjectionBJ(udg_Rog_Loc[1],GetRandomReal(200.,300.),(udg_Rog_Real[0]-90.))endifcall Dynamic_3D("Sounds\\Soru.wav",GetLocationX(udg_Rog_Loc[1]),GetLocationY(udg_Rog_Loc[1]))call RemoveLocation(udg_Rog_Loc[0])set udg_Rog_Loc[0]=nullcall RemoveLocation(udg_Rog_Loc[1])set udg_Rog_Loc[1]=nullcall CreateNUnitsAtLoc(1,'h013',udg_Rog_Own,udg_Rog_Loc[2],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitPositionLocFacingBJ(udg_Rog_Unit[0],udg_Rog_Loc[2],udg_Rog_Real[0])call RemoveLocation(udg_Rog_Loc[2])set udg_Rog_Loc[2]=nullset udg_Rog_Int[0]=(udg_Rog_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())set udg_Rog_Loc[0]=GetUnitLoc(udg_Rog_Unit[1])call Dynamic_3D("Sounds\\Soru.wav",GetLocationX(udg_Rog_Loc[0]),GetLocationY(udg_Rog_Loc[0]))set udg_Rog_Loc[1]=PolarProjectionBJ(udg_Rog_Loc[0],-100.,udg_Rog_Real[0])call RemoveLocation(udg_Rog_Loc[0])set udg_Rog_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h013',udg_Rog_Own,udg_Rog_Loc[1],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitPositionLocFacingBJ(udg_Rog_Unit[0],udg_Rog_Loc[1],udg_Rog_Real[0])call RemoveLocation(udg_Rog_Loc[1])set udg_Rog_Loc[1]=nullcall TriggerSleepAction(.01)
call SetUnitTimeScale(udg_Rog_Unit[0],.6)if(GetUnitTypeId(udg_Rog_Unit[0])=='N01V')thencall SetUnitAnimation(udg_Rog_Unit[0],"spell")else
call SetUnitAnimation(udg_Rog_Unit[0],"stand ready")
endifcall Dynamic_Sound("Sounds\\Rokuogan.mp3")call DisplayText("ROKUOGAN !",udg_Rog_Unit[0],.023,false,$DC,5,5,$FF)set udg_Rog_Loc[0]=GetUnitLoc(udg_Rog_Unit[0])set udg_Rog_Int[0]=1
loop
exitwhen udg_Rog_Int[0]>5call CreateNUnitsAtLoc(1,'h0AR',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call TriggerSleepAction(.0)set udg_Rog_Int[0]=udg_Rog_Int[0]+1endloopcall RemoveLocation(udg_Rog_Loc[0])set udg_Rog_Loc[0]=nullcall DestroyEffect(udg_Rog_Eff[0])call DestroyEffect(udg_Rog_Eff[1])call DestroyEffect(udg_Rog_Eff[2])call DestroyEffect(udg_Rog_Eff[3])call DestroyEffect(udg_Rog_Eff[4])set udg_Rog_Eff[0]=nullset udg_Rog_Eff[1]=nullset udg_Rog_Eff[2]=nullset udg_Rog_Eff[3]=nullset udg_Rog_Eff[4]=nullcall TriggerSleepAction(.24)
set udg_Rog_Loc[0]=GetUnitLoc(udg_Rog_Unit[1])call Dynamic_GroupShake(GetLocationX(udg_Rog_Loc[0]),GetLocationY(udg_Rog_Loc[0]),1.,udg_CameraShakePow,udg_CameraArea,null)
call CreateNUnitsAtLoc(1,'h074',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call SetUnitScale(bj_lastCreatedUnit,8.,8.,8.)call SetUnitVertexColor(bj_lastCreatedUnit,0,$FF,20,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h04D',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h09Z',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h043',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h0AS',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h0AS',udg_Rog_Own,udg_Rog_Loc[0],udg_Rog_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(udg_Rog_Loc[0])set udg_Rog_Loc[0]=nullcall PauseSystem(udg_Rog_Unit[0],false)call PauseSystem(udg_Rog_Unit[1],false)call SetUnitInvulnerable(udg_Rog_Unit[0],false)call SetUnitInvulnerable(udg_Rog_Unit[1],false)call SetUnitPathing(udg_Rog_Unit[0],true)call SetUnitTimeScale(udg_Rog_Unit[0],1.4)if(GetUnitTypeId(udg_Rog_Unit[0])=='N01V')thencall SetUnitAnimation(udg_Rog_Unit[0],"spell slam")else
call SetUnitAnimation(udg_Rog_Unit[0],"spell")endifset udg_Rog_Real[2]=(2000.+((10.*I2R(GetUnitAbilityLevelSwapped('A0CZ',udg_Rog_Unit[0])))*I2R(GetHeroStatBJ(1,udg_Rog_Unit[0],false))))call DisplayText(I2S(R2I(udg_Rog_Real[2]))+"!",udg_Rog_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Rog_Unit[0],udg_Rog_Unit[1],udg_Rog_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call TriggerSleepAction(.1)call SetUnitTimeScale(udg_Rog_Unit[0],1.)set udg_Rog_Own=null
set udg_Rog_Unit[0]=null
set udg_Rog_Unit[1]=null
set udg_Rog_Real[0]=.0set udg_Rog_Real[1]=.0set udg_Rog_Real[2]=.0set udg_Rog_XY[0]=.0
set udg_Rog_XY[1]=.0
set udg_Rog_Int[0]=0
set udg_Rog_Int[1]=0
set udg_Rog_Bool=falseendifendfunctionfunction InitTrig_RogL takes nothing returns nothing
set gg_trg_RogL=CreateTrigger()call DisableTrigger(gg_trg_RogL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RogL,.16)call TriggerAddAction(gg_trg_RogL,function Trig_RogL_Actions)endfunctionfunction AI_Tobi_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='O00A')endfunctionfunction AI_Tobi_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='O00A')
endfunctionfunction AI_Tobi_AttackedCond takes nothing returns booleanif(not AI_Tobi_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Tobi_AttackerCond takes nothing returns booleanif(not AI_Tobi_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Tobi_CondOR takes nothing returns booleanreturn(AI_Tobi_AttackedCond()or AI_Tobi_AttackerCond())endfunctionfunction AI_Tobi_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Tobi_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Tobi_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal location AI_Point1
local location AI_Point2
local location AI_Point3
local real ResultHPlocal boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Tobi_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0DI')call SelectHeroSkill(MySelf,'A0DE')call SelectHeroSkill(MySelf,'A0DD')call SelectHeroSkill(MySelf,'A0DC')call SelectHeroSkill(MySelf,'A0DA')endifset ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set AI_Point1=GetUnitLoc(MySelf)
set AI_Point2=GetUnitLoc(MyTarget)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499.)thencall IssuePointOrderByIdLoc(MySelf,$D022D,AI_Point2)
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifendifset AI_Point3=GetUnitLoc(MyTarget)if(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssuePointOrderByIdLoc(MySelf,$D0208,AI_Point3)
if(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D0084)set AI_Attacker=falseendifendifcall IssuePointOrderByIdLoc(MySelf,$D00FA,AI_Point3)
call RemoveLocation(AI_Point3)set AI_Point3=nullendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Tobi takes nothing returns nothingset udg_AI_Trig[32]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[32],Condition(function AI_Tobi_Cond))call TriggerAddAction(udg_AI_Trig[32],function AI_Tobi_Act)endfunctionfunction Trig_TimeSpace_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0DM')endfunctionfunction Trig_TimeSpace_Actions takes nothing returns nothinglocal location array loc
local player plocal unit dummy
set udg_SpaceTime_Unit=GetTriggerUnit()set p=GetOwningPlayer(udg_SpaceTime_Unit)set loc[0]=GetSpellTargetLoc()set loc[1]=GetUnitLoc(udg_SpaceTime_Unit)set dummy=CreateUnit(p,'h051',GetLocationX(loc[1]),GetLocationY(loc[1]),bj_UNIT_FACING)set udg_SpaceTime_Dummy=CreateUnit(p,'h0AY',GetLocationX(loc[1]),GetLocationY(loc[1]),AngleBetweenPoints(loc[1],loc[0]))
call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall SetUnitFlyHeight(dummy,45.,.0)call SetUnitScale(dummy,.3,.3,.3)call SetUnitTimeScale(dummy,1.75)call SetUnitAnimation(dummy,"death")
call UnitApplyTimedLife(dummy,'BTLF',.75)call DestroyEffect(AddSpecialEffectTarget("BlackBlink.mdl",udg_SpaceTime_Unit,"origin"))
call EnableTrigger(gg_trg_TimeSpaceL)set p=nullset dummy=nullendfunctionfunction InitTrig_TimeSpace takes nothing returns nothingset gg_trg_TimeSpace=CreateTrigger()
call TriggerAddCondition(gg_trg_TimeSpace,Condition(function Trig_TimeSpace_Conditions))
call TriggerAddAction(gg_trg_TimeSpace,function Trig_TimeSpace_Actions)endfunctionfunction Trig_TimeSpaceL_Actions takes nothing returns nothinglocal integer iif(udg_SpaceTime_Int<16)then
set i=(udg_SpaceTime_Int*16)
if(udg_SwitchBody_Bool==false or i<$83)thencall SetUnitVertexColor(udg_SpaceTime_Unit,$FF,$FF,$FF,i)endifcall SetUnitVertexColor(udg_SpaceTime_Dummy,$FF,$FF,$FF,$FF-i)set udg_SpaceTime_Int=(udg_SpaceTime_Int+1)else
call DisableTrigger(GetTriggeringTrigger())if(udg_SwitchBody_Bool==false)thencall SetUnitVertexColor(udg_SpaceTime_Unit,$FF,$FF,$FF,$FF)endifcall RemoveUnit(udg_SpaceTime_Dummy)
set udg_SpaceTime_Unit=nullset udg_SpaceTime_Dummy=null
set udg_SpaceTime_Int=0endifendfunctionfunction InitTrig_TimeSpaceL takes nothing returns nothingset gg_trg_TimeSpaceL=CreateTrigger()call DisableTrigger(gg_trg_TimeSpaceL)call TriggerRegisterTimerEventPeriodic(gg_trg_TimeSpaceL,.05)call TriggerAddAction(gg_trg_TimeSpaceL,function Trig_TimeSpaceL_Actions)endfunctionfunction Trig_Kot_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DA')endfunctionfunction Trig_Kot_Actions takes nothing returns nothingset udg_Kot_Unit[0]=GetTriggerUnit()
set udg_Kot_Loc[0]=GetSpellTargetLoc()set udg_Kot_Loc[1]=GetUnitLoc(udg_Kot_Unit[0])set udg_Kot_Real[0]=AngleBetweenPoints(udg_Kot_Loc[1],udg_Kot_Loc[0])call RemoveLocation(udg_Kot_Loc[0])set udg_Kot_Loc[0]=nullset udg_Kot_Loc[2]=PolarProjectionBJ(udg_Kot_Loc[1],100.,udg_Kot_Real[0])call RemoveLocation(udg_Kot_Loc[1])set udg_Kot_Loc[1]=nullset udg_Kot_Own=GetOwningPlayer(udg_Kot_Unit[0])
set udg_Kot_Unit[1]=CreateUnit(udg_Kot_Own,'h03H',GetLocationX(udg_Kot_Loc[2]),GetLocationY(udg_Kot_Loc[2]),udg_Kot_Real[0])
call RemoveLocation(udg_Kot_Loc[2])set udg_Kot_Loc[2]=nullcall DisplayText("Katon Gokakyu no Jutsu",udg_Kot_Unit[0],.023,true,$FF,$FF,$FF,$FF)
set udg_Kot_Real[1]=32.set udg_Kot_Real[2]=270.
set udg_Kot_Real[3]=BasicDmg_Q(udg_Kot_Unit[0],'A0DA',1)
set udg_Kot_Int=30set udg_Kot_Count=2call EnableTrigger(gg_trg_KotL)endfunctionfunction InitTrig_Kot takes nothing returns nothingset gg_trg_Kot=CreateTrigger()call TriggerAddCondition(gg_trg_Kot,Condition(function Trig_Kot_Conditions))
call TriggerAddAction(gg_trg_Kot,function Trig_Kot_Actions)endfunctionfunction Trig_KotL_Func001Func014002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Kot_Group2)==false)
endfunctionfunction Trig_KotL_Func001Func014002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Kot_Own))
endfunctionfunction Trig_KotL_Func001Func014002003002002 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_KotL_Func001Func014002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_KotL_Func001Func014002003002001(),Trig_KotL_Func001Func014002003002002())endfunctionfunction Trig_KotL_Func001Func014002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_KotL_Func001Func014002003001(),Trig_KotL_Func001Func014002003002())endfunctionfunction Trig_KotL_Func001Func017A takes nothing returns nothing
local unit u=GetEnumUnit()local location loccall GroupAddUnit(udg_Kot_Group2,u)call UnitDamageTarget(udg_Kot_Unit[0],u,udg_Kot_Real[3],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u003',udg_Kot_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0DB')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction Trig_KotL_Func001C takes nothing returns booleanreturn(udg_Kot_Int>0)endfunctionfunction Trig_KotL_Actions takes nothing returns nothing
if(Trig_KotL_Func001C())then
set udg_Kot_Loc[0]=GetUnitLoc(udg_Kot_Unit[1])if(udg_Kot_Count==2)then
call CreateNUnitsAtLoc(1,'h03I',udg_Kot_Own,udg_Kot_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set udg_Kot_Count=0else
set udg_Kot_Count=(udg_Kot_Count+1)endifset udg_Kot_Loc[1]=PolarProjectionBJ(udg_Kot_Loc[0],udg_Kot_Real[1],udg_Kot_Real[0])
call RemoveLocation(udg_Kot_Loc[0])set udg_Kot_Loc[0]=nullcall SetUnitPositionLoc(udg_Kot_Unit[1],udg_Kot_Loc[1])call EnumDestructablesInCircleBJ(udg_Kot_Real[2],udg_Kot_Loc[1],function TreeKiller)
set udg_Kot_Group=GetUnitsInRangeOfLocMatching(udg_Kot_Real[2],udg_Kot_Loc[1],Condition(function Trig_KotL_Func001Func014002003))call RemoveLocation(udg_Kot_Loc[1])set udg_Kot_Loc[1]=nullcall ForGroupBJ(udg_Kot_Group,function Trig_KotL_Func001Func017A)call DestroyGroup(udg_Kot_Group)
set udg_Kot_Group=nullset udg_Kot_Int=(udg_Kot_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Kot_Group2)call SetUnitAnimation(udg_Kot_Unit[1],"death")call UnitApplyTimedLife(udg_Kot_Unit[1],'BTLF',1.8)set udg_Kot_Own=null
set udg_Kot_Unit[0]=null
set udg_Kot_Unit[1]=null
set udg_Kot_Real[0]=.0set udg_Kot_Real[1]=.0set udg_Kot_Real[2]=.0set udg_Kot_Real[3]=.0set udg_Kot_Int=0set udg_Kot_Count=0endifendfunctionfunction InitTrig_KotL takes nothing returns nothing
set gg_trg_KotL=CreateTrigger()call DisableTrigger(gg_trg_KotL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KotL,.04)call TriggerAddAction(gg_trg_KotL,function Trig_KotL_Actions)endfunctionfunction Trig_Kamui_Strike_Learn_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0DC')endfunctionfunction Trig_Kamui_Strike_Learn_Actions takes nothing returns nothinglocal integer sk_lvif(udg_KamuiStrike_Unit==null)thenset udg_KamuiStrike_Unit=GetLearningUnit()set udg_KamuiStrike_Delay=2.
call EnableTrigger(gg_trg_Kamui_Strike)endifset sk_lv=GetUnitAbilityLevel(udg_KamuiStrike_Unit,'A0DC')set udg_KamuiStrike_Chance=((sk_lv*2)+30)if(sk_lv==5)then
set sk_lv=0call DestroyTrigger(GetTriggeringTrigger())else
set sk_lv=0endifendfunctionfunction InitTrig_Kamui_Strike_Learn takes nothing returns nothingset gg_trg_Kamui_Strike_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_Kamui_Strike_Learn,Condition(function Trig_Kamui_Strike_Learn_Conditions))call TriggerAddAction(gg_trg_Kamui_Strike_Learn,function Trig_Kamui_Strike_Learn_Actions)endfunctionfunction Trig_Kamui_Strike_Conditions takes nothing returns booleanif(GetAttacker()!=udg_KamuiStrike_Unit)thenreturn false
elseif(GetRandomInt(0,99)>udg_KamuiStrike_Chance)thenreturn false
else
return trueendifendfunctionfunction Trig_Kamui_Strike_Actions takes nothing returns nothing
local unit KamuiStrike_Target=GetTriggerUnit()local player p=GetOwningPlayer(udg_KamuiStrike_Unit)
local location array KamuiStrike_Loc
local integer array my_skill
local unit dummy
set my_skill[0]='A0DC'set my_skill[1]='A0DK'call SetPlayerAbilityAvailable(p,my_skill[0],false)call UnitAddAbility(udg_KamuiStrike_Unit,my_skill[1])if(udg_Izanagi_Bool)then
call SetUnitAbilityLevel(udg_KamuiStrike_Unit,my_skill[1],6)
else
call SetUnitAbilityLevel(udg_KamuiStrike_Unit,my_skill[1],GetUnitAbilityLevel(udg_KamuiStrike_Unit,my_skill[0]))
endifset KamuiStrike_Loc[0]=GetUnitLoc(udg_KamuiStrike_Unit)set dummy=CreateUnit(Player($E),'h05Z',GetLocationX(KamuiStrike_Loc[0]),GetLocationY(KamuiStrike_Loc[0]),bj_UNIT_FACING)
call RemoveLocation(KamuiStrike_Loc[0])set KamuiStrike_Loc[0]=nullcall SetPlayerAlliance(Player($E),p,ALLIANCE_PASSIVE,true)call IssueTargetOrderById(dummy,$D006B,udg_KamuiStrike_Unit)
call SetPlayerAlliance(Player($E),p,ALLIANCE_PASSIVE,false)call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=nullset KamuiStrike_Loc[1]=GetUnitLoc(KamuiStrike_Target)set KamuiStrike_Loc[2]=PolarProjectionBJ(KamuiStrike_Loc[1],100.,GetRandomReal(0,360))call DisableTrigger(gg_trg_Kamui_Strike)
if(IsTerrainPathable(GetLocationX(KamuiStrike_Loc[2]),GetLocationY(KamuiStrike_Loc[2]),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(150.,KamuiStrike_Loc[2],function TreeKiller)call CreateNUnitsAtLoc(1,'h03G',p,KamuiStrike_Loc[2],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call SetUnitX(udg_KamuiStrike_Unit,GetLocationX(KamuiStrike_Loc[2]))
call SetUnitY(udg_KamuiStrike_Unit,GetLocationY(KamuiStrike_Loc[2]))
call SetUnitFacing(udg_KamuiStrike_Unit,AngleBetweenPoints(KamuiStrike_Loc[2],KamuiStrike_Loc[1]))else
set KamuiStrike_Loc[3]=GetUnitLoc(udg_KamuiStrike_Unit)call CreateNUnitsAtLoc(1,'h03G',p,KamuiStrike_Loc[3],bj_UNIT_FACING)
call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)call RemoveLocation(KamuiStrike_Loc[3])set KamuiStrike_Loc[3]=nullendifcall DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdx",KamuiStrike_Target,"chest"))call UnitDamageTarget(udg_KamuiStrike_Unit,KamuiStrike_Target,(1.*GetHeroAgi(udg_KamuiStrike_Unit,true)),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call RemoveLocation(KamuiStrike_Loc[1])set KamuiStrike_Loc[1]=nullcall RemoveLocation(KamuiStrike_Loc[2])set KamuiStrike_Loc[2]=nullset KamuiStrike_Target=nullcall TriggerSleepAction(udg_KamuiStrike_Delay)call UnitRemoveAbility(udg_KamuiStrike_Unit,my_skill[1])
call SetPlayerAbilityAvailable(p,my_skill[0],true)set my_skill[0]=0set my_skill[1]=0set p=nullcall EnableTrigger(gg_trg_Kamui_Strike)endfunctionfunction InitTrig_Kamui_Strike takes nothing returns nothing
set gg_trg_Kamui_Strike=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Kamui_Strike,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Kamui_Strike,Condition(function Trig_Kamui_Strike_Conditions))call TriggerAddAction(gg_trg_Kamui_Strike,function Trig_Kamui_Strike_Actions)endfunctionfunction Trig_Kmo_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DD')endfunctionfunction Trig_Kmo_Actions takes nothing returns nothingset udg_Kmo_Unit[0]=GetTriggerUnit()
set udg_Kmo_Loc[0]=GetSpellTargetLoc()set udg_Kmo_Own=GetOwningPlayer(udg_Kmo_Unit[0])
set udg_Kmo_Unit[1]=CreateUnit(udg_Kmo_Own,'h050',GetLocationX(udg_Kmo_Loc[0]),GetLocationY(udg_Kmo_Loc[0]),bj_UNIT_FACING)set udg_Kmo_Unit[2]=CreateUnit(udg_Kmo_Own,'h051',GetLocationX(udg_Kmo_Loc[0]),GetLocationY(udg_Kmo_Loc[0]),bj_UNIT_FACING)set udg_Kmo_Loc[1]=GetUnitLoc(udg_Kmo_Unit[0])set udg_Kmo_Real[0]=AngleBetweenPoints(udg_Kmo_Loc[1],udg_Kmo_Loc[0])call RemoveLocation(udg_Kmo_Loc[0])set udg_Kmo_Loc[0]=nullset udg_Kmo_Loc[2]=PolarProjectionBJ(udg_Kmo_Loc[1],20.,udg_Kmo_Real[0])
call RemoveLocation(udg_Kmo_Loc[1])set udg_Kmo_Loc[1]=nullset udg_Kmo_Unit[3]=CreateUnit(udg_Kmo_Own,'h051',GetLocationX(udg_Kmo_Loc[2]),GetLocationY(udg_Kmo_Loc[2]),udg_Kmo_Real[0])
call RemoveLocation(udg_Kmo_Loc[2])set udg_Kmo_Loc[2]=nullcall SetUnitAnimation(udg_Kmo_Unit[2],"death")call SetUnitScale(udg_Kmo_Unit[3],.3,.3,.3)call SetUnitFlyHeight(udg_Kmo_Unit[3],97.,.0)call SetUnitAnimation(udg_Kmo_Unit[3],"death")call UnitApplyTimedLife(udg_Kmo_Unit[3],'BTLF',1.)call DisplayText("Kamui",udg_Kmo_Unit[0],.023,false,$FF,$FF,$FF,$FF)
set udg_Kmo_Int=25set udg_Kmo_Real[0]=450.
set udg_Kmo_Real[1]=32.set udg_Kmo_Real[2]=(350.+((4.+I2R(GetUnitAbilityLevel(udg_Kmo_Unit[0],'A0DD')))*I2R(GetHeroAgi(udg_Kmo_Unit[0],true))))
call EnableTrigger(gg_trg_KmoL)set udg_Kmo_Unit[3]=null
endfunctionfunction InitTrig_Kmo takes nothing returns nothingset gg_trg_Kmo=CreateTrigger()call TriggerAddCondition(gg_trg_Kmo,Condition(function Trig_Kmo_Conditions))
call TriggerAddAction(gg_trg_Kmo,function Trig_Kmo_Actions)endfunctionfunction Trig_KmoL_Func001Func002002003001 takes nothing returns boolean
return(IsUnitInGroup(GetFilterUnit(),udg_Kmo_Group2)==false)
endfunctionfunction Trig_KmoL_Func001Func002002003002001 takes nothing returns booleanreturn(IsUnitEnemy(GetFilterUnit(),udg_Kmo_Own))
endfunctionfunction Trig_KmoL_Func001Func002002003002002001 takes nothing returns booleanreturn(IsUnitDeadBJ(GetFilterUnit())==false)
endfunctionfunction Trig_KmoL_Func001Func002002003002002002001 takes nothing returns booleanreturn(GetUnitAbilityLevelSwapped(udg_GlobalSkill[0],GetFilterUnit())==0)endfunctionfunction Trig_KmoL_Func001Func002002003002002002002 takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_ANCIENT)==false)!=nullendfunctionfunction Trig_KmoL_Func001Func002002003002002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_KmoL_Func001Func002002003002002002001(),Trig_KmoL_Func001Func002002003002002002002())endfunctionfunction Trig_KmoL_Func001Func002002003002002 takes nothing returns booleanreturn GetBooleanAnd(Trig_KmoL_Func001Func002002003002002001(),Trig_KmoL_Func001Func002002003002002002())endfunctionfunction Trig_KmoL_Func001Func002002003002 takes nothing returns boolean
return GetBooleanAnd(Trig_KmoL_Func001Func002002003002001(),Trig_KmoL_Func001Func002002003002002())endfunctionfunction Trig_KmoL_Func001Func002002003 takes nothing returns booleanreturn GetBooleanAnd(Trig_KmoL_Func001Func002002003001(),Trig_KmoL_Func001Func002002003002())endfunctionfunction Trig_KmoL_Func001Func003A takes nothing returns nothing
local unit u=GetEnumUnit()local location array loc
set loc[0]=GetUnitLoc(u)
if(DistanceBetweenPoints(udg_Kmo_Loc[0],loc[0])<30.)then
call SetUnitInvulnerable(u,true)
call PauseSystem(u,true)
call ShowUnitHide(u)
call GroupAddUnit(udg_Kmo_Group2,u)else
set loc[1]=PolarProjectionBJ(loc[0],udg_Kmo_Real[1],AngleBetweenPoints(loc[0],udg_Kmo_Loc[0]))if(IsTerrainPathable(GetLocationX(loc[1]),GetLocationY(loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call SetUnitX(u,GetLocationX(loc[1]))call SetUnitY(u,GetLocationY(loc[1]))endifcall RemoveLocation(loc[1])set loc[1]=nullendifcall RemoveLocation(loc[0])set loc[0]=nullset u=nullendfunctionfunction Trig_KmoL_Func001Func029A takes nothing returns nothing
local unit u=GetEnumUnit()local location loccall SetUnitInvulnerable(u,false)call PauseSystem(u,false)call ShowUnitShow(u)
call SelectUnitAddForPlayer(u,GetOwningPlayer(u))if(udg_Kmo_Bool)then
set loc=Location(udg_SwitchBody_X,udg_SwitchBody_Y)else
set loc=PolarProjectionBJ(udg_Kmo_Loc[0],GetRandomReal(75.,260.),GetRandomReal(0,360))endifcall SetUnitPositionLoc(u,loc)call DestroyEffect(AddSpecialEffectLoc("Darkblast.mdl",loc))
call UnitDamageTarget(udg_Kmo_Unit[0],u,udg_Kmo_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u)>0)thencall CreateNUnitsAtLoc(1,'u003',udg_Kmo_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[3],2)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall RemoveLocation(loc)
set loc=null
set u=nullendfunctionfunction Trig_KmoL_Func001C takes nothing returns booleanreturn(udg_Kmo_Int>0)endfunctionfunction Trig_KmoL_Actions takes nothing returns nothing
if(Trig_KmoL_Func001C())then
set udg_Kmo_Loc[0]=GetUnitLoc(udg_Kmo_Unit[1])set udg_Kmo_Group=GetUnitsInRangeOfLocMatching(udg_Kmo_Real[0],udg_Kmo_Loc[0],Condition(function Trig_KmoL_Func001Func002002003))call ForGroupBJ(udg_Kmo_Group,function Trig_KmoL_Func001Func003A)call RemoveLocation(udg_Kmo_Loc[0])set udg_Kmo_Loc[0]=nullcall DestroyGroup(udg_Kmo_Group)
set udg_Kmo_Group=nullset udg_Kmo_Int=(udg_Kmo_Int-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Kmo_Unit[1])
call RemoveUnit(udg_Kmo_Unit[2])
call TriggerSleepAction(.1)set udg_Kmo_Group=CreateGroup()call GroupAddGroup(udg_Kmo_Group2,udg_Kmo_Group)
call GroupClear(udg_Kmo_Group2)set udg_Kmo_Loc[0]=GetUnitLoc(udg_Kmo_Unit[0])if(IsTerrainPathable(GetLocationX(udg_Kmo_Loc[0]),GetLocationY(udg_Kmo_Loc[0]),PATHING_TYPE_WALKABILITY)and(udg_SwitchBody_X!=.0 or udg_SwitchBody_Y!=.0))thenset udg_Kmo_Bool=trueendifcall EnumDestructablesInCircleBJ(360.,udg_Kmo_Loc[0],function TreeKiller)call DestroyEffect(AddSpecialEffectLoc("Blacknova.mdl",udg_Kmo_Loc[0]))call CreateNUnitsAtLoc(1,'h050',udg_Kmo_Own,udg_Kmo_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitAnimation(bj_lastCreatedUnit,"death")call CreateNUnitsAtLoc(1,'h019',udg_Kmo_Own,udg_Kmo_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.2)call SetUnitVertexColor(bj_lastCreatedUnit,'d','d',$FF,$FF)call ForGroupBJ(udg_Kmo_Group,function Trig_KmoL_Func001Func029A)call DestroyGroup(udg_Kmo_Group)
set udg_Kmo_Group=nullcall RemoveLocation(udg_Kmo_Loc[0])set udg_Kmo_Loc[0]=nullset udg_Kmo_Own=null
set udg_Kmo_Real[0]=.0set udg_Kmo_Real[1]=.0set udg_Kmo_Real[2]=.0set udg_Kmo_Unit[0]=null
set udg_Kmo_Unit[1]=null
set udg_Kmo_Unit[2]=null
set udg_Kmo_Int=0set udg_Kmo_Bool=falseendifendfunctionfunction InitTrig_KmoL takes nothing returns nothing
set gg_trg_KmoL=CreateTrigger()call DisableTrigger(gg_trg_KmoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KmoL,.04)call TriggerAddAction(gg_trg_KmoL,function Trig_KmoL_Actions)endfunctionfunction Trig_Switch_Body_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0DE')endfunctionfunction Trig_Switch_Body_Init_Actions takes nothing returns nothing
local unit u=GetLearningUnit()call TriggerRegisterUnitEvent(gg_trg_Switch_Body_Dmg,u,EVENT_UNIT_DAMAGED)call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0DH',false)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Switch_Body_Init takes nothing returns nothing
set gg_trg_Switch_Body_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Switch_Body_Init,Condition(function Trig_Switch_Body_Init_Conditions))call TriggerAddAction(gg_trg_Switch_Body_Init,function Trig_Switch_Body_Init_Actions)endfunctionfunction Trig_Switch_Body_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DE')endfunctionfunction Trig_Switch_Body_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.12
local integer my_skill='A0DH'local integer my_buff='B022'
local location loclocal location loc2call SetUnitPathing(u,false)
call DestroyEffect(AddSpecialEffectTarget("BlackBlink.mdl",u,"origin"))call UnitAddAbility(u,my_skill)call SetUnitAbilityLevelSwapped('A09F',u,2)set udg_SwitchBody_Bool=true
call SetUnitVertexColor(u,$FF,$FF,$FF,$82)set loc=GetUnitLoc(u)set udg_SwitchBody_X=GetLocationX(loc)set udg_SwitchBody_Y=GetLocationY(loc)call RemoveLocation(loc)
set loc=null
call EnableTrigger(gg_trg_Switch_Body_Dmg)loop
call TriggerSleepAction(delay)set loc=GetUnitLoc(u)if(IsTerrainPathable(GetLocationX(loc),GetLocationY(loc),PATHING_TYPE_WALKABILITY)==false)thenset udg_SwitchBody_X=GetLocationX(loc)set udg_SwitchBody_Y=GetLocationY(loc)endifcall RemoveLocation(loc)
set loc=null
exitwhen(GetUnitAbilityLevel(u,my_buff)<1)endloopcall DisableTrigger(gg_trg_Switch_Body_Dmg)call UnitRemoveAbility(u,my_skill)call SetUnitVertexColor(u,$FF,$FF,$FF,$FF)set udg_SwitchBody_Bool=falseif(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call EnumDestructablesInCircleBJ(220.,loc,function TreeKiller)if(IsTerrainPathable(GetLocationX(loc),GetLocationY(loc),PATHING_TYPE_WALKABILITY))thenset loc2=Location(udg_SwitchBody_X,udg_SwitchBody_Y)
call SetUnitPositionLoc(u,loc2)call PanCameraToTimedLocForPlayer(GetOwningPlayer(u),loc2,0)
call RemoveLocation(loc2)set loc2=nullendifcall RemoveLocation(loc)
set loc=null
endifcall SetUnitPathing(u,true)call DestroyEffect(AddSpecialEffectTarget("BlackBlink.mdl",u,"origin"))set u=nullset delay=.0
set my_skill=0set my_buff=0call TriggerSleepAction(1.)set udg_SwitchBody_X=.0set udg_SwitchBody_Y=.0endfunctionfunction InitTrig_Switch_Body takes nothing returns nothingset gg_trg_Switch_Body=CreateTrigger()call TriggerAddCondition(gg_trg_Switch_Body,Condition(function Trig_Switch_Body_Conditions))
call TriggerAddAction(gg_trg_Switch_Body,function Trig_Switch_Body_Actions)endfunctionfunction Trig_Switch_Body_Dmg_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local location loc=GetUnitLoc(GetEventDamageSource())call CreateTextTagLocBJ("miss",loc,0,10.,'d',2.,2.,0)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,60.,90.)
call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagLifespan(bj_lastCreatedTextTag,2.5)call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)call RemoveLocation(loc)
set loc=null
set u=nullendfunctionfunction InitTrig_Switch_Body_Dmg takes nothing returns nothingset gg_trg_Switch_Body_Dmg=CreateTrigger()call DisableTrigger(gg_trg_Switch_Body_Dmg)call TriggerAddAction(gg_trg_Switch_Body_Dmg,function Trig_Switch_Body_Dmg_Actions)endfunctionfunction Trig_Izanagi_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0DI')endfunctionfunction Trig_Izanagi_Init_Actions takes nothing returns nothing
call TriggerRegisterUnitLifeEvent(gg_trg_Izanagi,GetLearningUnit(),LESS_THAN,.01)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Izanagi_Init takes nothing returns nothing
set gg_trg_Izanagi_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Izanagi_Init,Condition(function Trig_Izanagi_Init_Conditions))call TriggerAddAction(gg_trg_Izanagi_Init,function Trig_Izanagi_Init_Actions)endfunctionfunction Izanagi_Cond takes nothing returns booleanreturn(GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA)>349)endfunctionfunction Izanagi_Act takes nothing returns nothinglocal location loclocal real delay
local integer iset udg_Izanagi_Unit=GetTriggerUnit()call DisableTrigger(GetTriggeringTrigger())call Dynamic_Sound("Sounds\\Sharingan.mp3")call DisplayText("Izanagi",udg_Izanagi_Unit,.023,true,$DC,5,5,$FF)set udg_Izanagi_Own=GetOwningPlayer(udg_Izanagi_Unit)set delay=145.-(GetUnitAbilityLevel(udg_Izanagi_Unit,'A0DI')*5.)
set loc=GetUnitLoc(udg_Izanagi_Unit)
call CreateNUnitsAtLoc(1,'h036',udg_Izanagi_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
call CreateNUnitsAtLoc(1,'h07H',udg_Izanagi_Own,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLifeBJ(1.5,'BTLF',bj_lastCreatedUnit)
set i=0loop
call CreateNUnitsAtLoc(1,'h0AX',udg_Izanagi_Own,loc,(I2R(i)*40.))set udg_Izanagi_Dummy[i]=bj_lastCreatedUnitcall UnitApplyTimedLife(udg_Izanagi_Dummy[i],'BTLF',3.)set i=i+1exitwhen i>9
endloopcall RemoveLocation(loc)
set loc=null
call SetUnitVertexColor(udg_Izanagi_Unit,$FF,$FF,$FF,0)call SetUnitVertexColor(udg_Izanagi_Unit,$FF,0,0,$FF)set udg_Izanagi_Int=1call EnableTrigger(gg_trg_Izanagi_L)
call TriggerExecute(gg_trg_Izanagi_Speed)set i=0call TriggerSleepAction(delay)set delay=.0
call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Izanagi takes nothing returns nothingset gg_trg_Izanagi=CreateTrigger()call TriggerAddCondition(gg_trg_Izanagi,Condition(function Izanagi_Cond))call TriggerAddAction(gg_trg_Izanagi,function Izanagi_Act)endfunctionfunction Trig_Izanagi_L_Func002C takes nothing returns booleanreturn(udg_Izanagi_Int<32)endfunctionfunction Trig_Izanagi_L_Actions takes nothing returns nothingif(Trig_Izanagi_L_Func002C())thencall SelectUnitAddForPlayer(udg_Izanagi_Unit,udg_Izanagi_Own)call SetUnitVertexColor(udg_Izanagi_Unit,$FF,$FF,$FF,(udg_Izanagi_Int*8))set udg_Izanagi_Count=0loop
exitwhen udg_Izanagi_Count>9
set udg_Izanagi_Loc[0]=GetUnitLoc(udg_Izanagi_Dummy[udg_Izanagi_Count])set udg_Izanagi_Loc[1]=PolarProjectionBJ(udg_Izanagi_Loc[0],40.,(I2R(udg_Izanagi_Count)*40.))call RemoveLocation(udg_Izanagi_Loc[0])set udg_Izanagi_Loc[0]=nullcall SetUnitPositionLoc(udg_Izanagi_Dummy[udg_Izanagi_Count],udg_Izanagi_Loc[1])
call RemoveLocation(udg_Izanagi_Loc[1])set udg_Izanagi_Loc[1]=nullset udg_Izanagi_Count=udg_Izanagi_Count+1endloopset udg_Izanagi_Int=(udg_Izanagi_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitVertexColor(udg_Izanagi_Unit,$FF,$FF,$FF,$FF)set udg_Izanagi_Count=0loop
exitwhen udg_Izanagi_Count>9
set udg_Izanagi_Dummy[udg_Izanagi_Count]=nullset udg_Izanagi_Count=udg_Izanagi_Count+1endloopset udg_Izanagi_Int=0set udg_Izanagi_Count=0call TriggerSleepAction(6.)set udg_Izanagi_Unit=nullset udg_Izanagi_Own=null
endifendfunctionfunction InitTrig_Izanagi_L takes nothing returns nothingset gg_trg_Izanagi_L=CreateTrigger()
call DisableTrigger(gg_trg_Izanagi_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Izanagi_L,.05)
call TriggerAddAction(gg_trg_Izanagi_L,function Trig_Izanagi_L_Actions)endfunctionfunction Trig_Izanagi_Speed_Actions takes nothing returns nothinglocal location loclocal real delay
local integer my_skilllocal integer my_buffcall TriggerSleepAction(.05)
if(GetWidgetLife(udg_Izanagi_Unit)>0)thenset delay=.1
set my_skill='A0DL'set my_buff='B033'set udg_Izanagi_Bool=trueset udg_KamuiStrike_Delay=.4
set udg_KamuiStrike_Chance=udg_KamuiStrike_Chance+60
call UnitAddAbility(udg_Izanagi_Unit,my_skill)set loc=GetUnitLoc(udg_Izanagi_Unit)
call CreateNUnitsAtLoc(1,'u003',udg_Izanagi_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0DJ')call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,udg_Izanagi_Unit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(udg_Izanagi_Unit,my_buff)<1)endloopset udg_KamuiStrike_Delay=2.
set udg_KamuiStrike_Chance=udg_KamuiStrike_Chance-60
set udg_Izanagi_Bool=falsecall UnitRemoveAbility(udg_Izanagi_Unit,my_skill)set delay=.0
set my_skill=0set my_buff=0endifendfunctionfunction InitTrig_Izanagi_Speed takes nothing returns nothingset gg_trg_Izanagi_Speed=CreateTrigger()
call TriggerAddAction(gg_trg_Izanagi_Speed,function Trig_Izanagi_Speed_Actions)endfunctionfunction AI_Starrk_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='E007')endfunctionfunction AI_Starrk_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='E007')
endfunctionfunction AI_Starrk_AttackedCond takes nothing returns booleanif(not AI_Starrk_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Starrk_AttackerCond takes nothing returns booleanif(not AI_Starrk_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Starrk_CondOR takes nothing returns booleanreturn(AI_Starrk_AttackedCond()or AI_Starrk_AttackerCond())endfunctionfunction AI_Starrk_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Starrk_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Starrk_Act takes nothing returns nothing
local unit MySelflocal unit MyTargetlocal location AI_Point1
local location AI_Point2
local location AI_Point3
local real ResultHPlocal boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Starrk_AttackedType())then
set MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0DU')call SelectHeroSkill(MySelf,'A0DS')call SelectHeroSkill(MySelf,'A0DR')call SelectHeroSkill(MySelf,'A0DN')call SelectHeroSkill(MySelf,'A0DO')endifset ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set AI_Point1=GetUnitLoc(MySelf)
set AI_Point2=GetUnitLoc(MyTarget)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499.)thencall IssuePointOrderByIdLoc(MySelf,$D022D,AI_Point2)
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifendifset AI_Point3=GetUnitLoc(MyTarget)if(IsUnitType(MyTarget,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssueImmediateOrder(MySelf,"Locustswarm")call IssueImmediateOrderById(MySelf,$D0277)call IssuePointOrderByIdLoc(MySelf,$D009D,AI_Point3)
set AI_Attacker=falseendifendifcall IssuePointOrderByIdLoc(MySelf,$D00FA,AI_Point3)
call RemoveLocation(AI_Point3)set AI_Point3=nullendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Starrk takes nothing returns nothingset udg_AI_Trig[33]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[33],Condition(function AI_Starrk_Cond))
call TriggerAddAction(udg_AI_Trig[33],function AI_Starrk_Act)endfunctionfunction Trig_Rapid_Shot_Learn_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0DO')endfunctionfunction Trig_Rapid_Shot_Learn_Actions takes nothing returns nothing
local integer sk_lvif(udg_Rapid_Unit==null)then
set udg_Rapid_Unit=GetLearningUnit()
set udg_Rapid_Delay=2.5call EnableTrigger(gg_trg_Rapid_Shot)endifset sk_lv=GetUnitAbilityLevel(udg_Rapid_Unit,'A0DO')
set udg_Rapid_Chance=((sk_lv*2)+30)if(sk_lv==5)then
set sk_lv=0call DestroyTrigger(GetTriggeringTrigger())else
set sk_lv=0endifendfunctionfunction InitTrig_Rapid_Shot_Learn takes nothing returns nothing
set gg_trg_Rapid_Shot_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_Rapid_Shot_Learn,Condition(function Trig_Rapid_Shot_Learn_Conditions))call TriggerAddAction(gg_trg_Rapid_Shot_Learn,function Trig_Rapid_Shot_Learn_Actions)endfunctionfunction Trig_Rapid_Shot_Conditions takes nothing returns booleanif(GetAttacker()!=udg_Rapid_Unit)thenreturn false
elseif(GetRandomInt(0,99)>udg_Rapid_Chance)thenreturn false
else
return trueendifendfunctionfunction Trig_Rapid_Shot_Actions takes nothing returns nothinglocal player p=GetOwningPlayer(udg_Rapid_Unit)local location Rapid_Loc
local integer array my_skill
local unit dummy
set my_skill[0]='A0DO'set my_skill[1]='A0DP'call SetPlayerAbilityAvailable(p,my_skill[0],false)call UnitAddAbility(udg_Rapid_Unit,my_skill[1])call SetUnitAbilityLevel(udg_Rapid_Unit,my_skill[1],GetUnitAbilityLevel(udg_Rapid_Unit,my_skill[0]))
set Rapid_Loc=GetUnitLoc(udg_Rapid_Unit)
set dummy=CreateUnit(Player($E),'h05Z',GetLocationX(Rapid_Loc),GetLocationY(Rapid_Loc),bj_UNIT_FACING)call CreateNUnitsAtLoc(1,'u003',p,Rapid_Loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0DQ')call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,udg_Rapid_Unit)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(Rapid_Loc)set Rapid_Loc=nullcall SetPlayerAlliance(Player($E),p,ALLIANCE_PASSIVE,true)call IssueTargetOrderById(dummy,$D006B,udg_Rapid_Unit)call SetPlayerAlliance(Player($E),p,ALLIANCE_PASSIVE,false)call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=nullcall DisableTrigger(gg_trg_Rapid_Shot)call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdx",udg_Rapid_Unit,"hand right"))call TriggerSleepAction(udg_Rapid_Delay)
call UnitRemoveAbility(udg_Rapid_Unit,my_skill[1])call SetPlayerAbilityAvailable(p,my_skill[0],true)set my_skill[0]=0set my_skill[1]=0set p=nullcall EnableTrigger(gg_trg_Rapid_Shot)endfunctionfunction InitTrig_Rapid_Shot takes nothing returns nothingset gg_trg_Rapid_Shot=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Rapid_Shot,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Rapid_Shot,Condition(function Trig_Rapid_Shot_Conditions))call TriggerAddAction(gg_trg_Rapid_Shot,function Trig_Rapid_Shot_Actions)endfunctionfunction Trig_Shs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DR')endfunctionfunction Trig_Shs_Actions takes nothing returns nothingset udg_Shs_Unit=GetTriggerUnit()set udg_Shs_Real[0]=GetUnitFacing(udg_Shs_Unit)set udg_Shs_Real[1]=(udg_Shs_Real[0]+90.)set udg_Shs_Real[2]=(udg_Shs_Real[0]-91.)set udg_Shs_Real[3]=90.set udg_Shs_Loc[0]=GetUnitLoc(udg_Shs_Unit)set udg_Shs_Real[4]=GetLocationX(udg_Shs_Loc[0])
set udg_Shs_Real[5]=GetLocationY(udg_Shs_Loc[0])
call RemoveLocation(udg_Shs_Loc[0])set udg_Shs_Loc[0]=nullset udg_Shs_Real[6]=220.
set udg_Shs_Real[7]=(400.+(200.*I2R(GetUnitAbilityLevel(udg_Shs_Unit,'A0DR'))))set udg_Shs_Own=GetOwningPlayer(udg_Shs_Unit)set udg_Shs_Int=0call EnableTrigger(gg_trg_ShsL)endfunctionfunction InitTrig_Shs takes nothing returns nothingset gg_trg_Shs=CreateTrigger()call TriggerAddCondition(gg_trg_Shs,Condition(function Trig_Shs_Conditions))
call TriggerAddAction(gg_trg_Shs,function Trig_Shs_Actions)endfunctionfunction Shs_GroupAct takes nothing returns nothinglocal unit u=GetEnumUnit()local location loccall GroupAddUnit(udg_Shs_Group2,u)call UnitDamageTarget(udg_Shs_Unit,u,udg_Shs_Real[7],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u003',udg_Shs_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[3])call SetUnitAbilityLevel(bj_lastCreatedUnit,udg_GlobalSkill[3],3)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction Trig_ShsL_Actions takes nothing returns nothing
if(udg_Shs_Int<35)thenset udg_Shs_Real[1]=(udg_Shs_Real[1]+12.)set udg_Shs_Real[2]=(udg_Shs_Real[2]+12.)set udg_Shs_Real[3]=(udg_Shs_Real[3]+26.)set udg_Shs_Loc[0]=Location(udg_Shs_Real[4],udg_Shs_Real[5])
set udg_Shs_Loc[1]=PolarProjectionBJ(udg_Shs_Loc[0],udg_Shs_Real[3],udg_Shs_Real[1])
set udg_Shs_Loc[2]=PolarProjectionBJ(udg_Shs_Loc[0],udg_Shs_Real[3],udg_Shs_Real[2])
call RemoveLocation(udg_Shs_Loc[0])set udg_Shs_Loc[0]=nullcall CreateNUnitsAtLoc(1,'h0B4',udg_Shs_Own,udg_Shs_Loc[1],udg_Shs_Real[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitAnimation(bj_lastCreatedUnit,"death")call CreateNUnitsAtLoc(1,'h0B4',udg_Shs_Own,udg_Shs_Loc[2],udg_Shs_Real[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitAnimation(bj_lastCreatedUnit,"death")call CreateNUnitsAtLoc(1,'h0B5',udg_Shs_Own,udg_Shs_Loc[1],udg_Shs_Real[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h0B5',udg_Shs_Own,udg_Shs_Loc[2],udg_Shs_Real[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call EnumDestructablesInCircleBJ(udg_Shs_Real[6],udg_Shs_Loc[1],function TreeKiller)
call EnumDestructablesInCircleBJ(udg_Shs_Real[6],udg_Shs_Loc[2],function TreeKiller)
set udg_Shs_Group[0]=DynamicCreateGroup2(udg_Shs_Loc[1],udg_Shs_Real[6],udg_Shs_Own,udg_Shs_Group2)set udg_Shs_Group[1]=DynamicCreateGroup2(udg_Shs_Loc[2],udg_Shs_Real[6],udg_Shs_Own,udg_Shs_Group2)call RemoveLocation(udg_Shs_Loc[1])set udg_Shs_Loc[1]=nullcall RemoveLocation(udg_Shs_Loc[2])set udg_Shs_Loc[2]=nullcall GroupAddGroup(udg_Shs_Group[1],udg_Shs_Group[0])call DestroyGroup(udg_Shs_Group[1])set udg_Shs_Group[1]=nullcall ForGroupBJ(udg_Shs_Group[0],function Shs_GroupAct)call DestroyGroup(udg_Shs_Group[0])set udg_Shs_Group[0]=nullset udg_Shs_Int=(udg_Shs_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Shs_Group2)set udg_Shs_Own=null
set udg_Shs_Unit=nullset udg_Shs_Real[0]=.0set udg_Shs_Real[1]=.0set udg_Shs_Real[2]=.0set udg_Shs_Real[3]=.0set udg_Shs_Real[4]=.0set udg_Shs_Real[5]=.0set udg_Shs_Real[6]=.0set udg_Shs_Real[7]=.0set udg_Shs_Int=0endifendfunctionfunction InitTrig_ShsL takes nothing returns nothing
set gg_trg_ShsL=CreateTrigger()call DisableTrigger(gg_trg_ShsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_ShsL,.03)call TriggerAddAction(gg_trg_ShsL,function Trig_ShsL_Actions)endfunctionfunction Trig_Iah_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DS')endfunctionfunction Trig_Iah_Actions takes nothing returns nothinglocal integer sklvset udg_Iah_Unit[0]=GetTriggerUnit()
set udg_Iah_Loc[0]=GetSpellTargetLoc()call TriggerSleepAction(.0)set sklv=GetUnitAbilityLevel(udg_Iah_Unit[0],'A0DS')
call DisplayText("Cero Metralleta",udg_Iah_Unit[0],.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Starrk\\InfiniteCero.wav",GetUnitX(udg_Iah_Unit[0]),GetUnitY(udg_Iah_Unit[0]))call PauseSystem(udg_Iah_Unit[0],true)call SetUnitTimeScale(udg_Iah_Unit[0],2.7)set udg_Iah_Loc[1]=GetUnitLoc(udg_Iah_Unit[0])set udg_Iah_Real[0]=AngleBetweenPoints(udg_Iah_Loc[1],udg_Iah_Loc[0])call RemoveLocation(udg_Iah_Loc[0])set udg_Iah_Loc[0]=nullset udg_Iah_Loc[2]=PolarProjectionBJ(udg_Iah_Loc[1],50.,udg_Iah_Real[0])
set udg_Iah_Loc[3]=PolarProjectionBJ(udg_Iah_Loc[1],210.,udg_Iah_Real[0])set udg_Iah_X[0]=GetLocationX(udg_Iah_Loc[1])set udg_Iah_Y[0]=GetLocationY(udg_Iah_Loc[1])set udg_Iah_Own=GetOwningPlayer(udg_Iah_Unit[0])
call CreateNUnitsAtLoc(1,'h02R',udg_Iah_Own,udg_Iah_Loc[1],bj_UNIT_FACING)set udg_Iah_Unit[1]=bj_lastCreatedUnitcall RemoveLocation(udg_Iah_Loc[1])set udg_Iah_Loc[1]=nullset udg_Iah_X[1]=GetLocationX(udg_Iah_Loc[2])set udg_Iah_Y[1]=GetLocationY(udg_Iah_Loc[2])set udg_Iah_X[2]=GetLocationX(udg_Iah_Loc[3])set udg_Iah_Y[2]=GetLocationY(udg_Iah_Loc[3])call RemoveLocation(udg_Iah_Loc[2])set udg_Iah_Loc[2]=nullcall RemoveLocation(udg_Iah_Loc[3])set udg_Iah_Loc[3]=nullset udg_Iah_Real[1]=85.set udg_Iah_Real[2]=220.
set udg_Iah_Real[3]=(50.+(10.*sklv)+((.7+(sklv*.2))*I2R(GetHeroAgi(udg_Iah_Unit[0],true))))set udg_Iah_Hash=InitHashtable()
set udg_Iah_Int[0]=45set udg_Iah_Int[1]=25set udg_Iah_Int[2]=2
set udg_Iah_Int[3]=1
set udg_Iah_Map=Rect(udg_MapSize[0],udg_MapSize[1],udg_MapSize[2],udg_MapSize[3])call EnableTrigger(gg_trg_IahL)call EnableTrigger(gg_trg_IahM)call EnableTrigger(gg_trg_IahP)call EnableTrigger(gg_trg_IahC)call UnitAddAbility(udg_Iah_Unit[1],'A0DT')call SelectUnitForPlayerSingle(udg_Iah_Unit[1],udg_Iah_Own)endfunctionfunction InitTrig_Iah takes nothing returns nothingset gg_trg_Iah=CreateTrigger()call TriggerAddCondition(gg_trg_Iah,Condition(function Trig_Iah_Conditions))
call TriggerAddAction(gg_trg_Iah,function Trig_Iah_Actions)endfunctionfunction Trig_IahL_Func003C takes nothing returns booleanreturn(udg_Iah_Int[0]>0)and(IsUnitDeadBJ(udg_Iah_Unit[0])==false)endfunctionfunction Trig_IahL_Actions takes nothing returns nothing
local unit dummy
local real facingif(Trig_IahL_Func003C())then
set facing=(udg_Iah_Real[0]+GetRandomReal(-30.,31.))
if(udg_Iah_Int[2]==2)thenset udg_Iah_Int[2]=0
set udg_Iah_Loc[0]=Location(udg_Iah_X[0],udg_Iah_Y[0])call CreateNUnitsAtLoc(1,'h0B7',udg_Iah_Own,udg_Iah_Loc[0],facing)set dummy=bj_lastCreatedUnit
call UnitApplyTimedLife(dummy,'BTLF',.5)
call SetUnitVertexColor(dummy,$FF,$FF,$FF,'d')call SetUnitTimeScale(dummy,2.5)
call RemoveLocation(udg_Iah_Loc[0])set udg_Iah_Loc[0]=nullcall SetUnitAnimation(udg_Iah_Unit[0],"attack")call SetUnitAnimation(dummy,"attack")set dummy=nullelse
set udg_Iah_Int[2]=(udg_Iah_Int[2]+1)endifif(udg_Iah_Int[3]==1)thenset udg_Iah_Int[3]=0
set udg_Iah_Loc[1]=Location(udg_Iah_X[1],udg_Iah_Y[1])call CreateNUnitsAtLoc(1,'h0B0',udg_Iah_Own,udg_Iah_Loc[1],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call CreateNUnitsAtLoc(1,'h0B3',udg_Iah_Own,udg_Iah_Loc[1],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call CreateNUnitsAtLoc(1,'h0AZ',udg_Iah_Own,udg_Iah_Loc[1],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call RemoveLocation(udg_Iah_Loc[1])set udg_Iah_Loc[1]=nullelse
set udg_Iah_Int[3]=(udg_Iah_Int[3]+1)endifset udg_Iah_Loc[2]=Location(udg_Iah_X[2],udg_Iah_Y[2])call CreateNUnitsAtLoc(1,'h0B6',udg_Iah_Own,udg_Iah_Loc[2],facing)call SetUnitUserData(bj_lastCreatedUnit,udg_Iah_Int[1])call GroupAddUnit(udg_Iah_GroupDummy,bj_lastCreatedUnit)
call RemoveLocation(udg_Iah_Loc[2])set udg_Iah_Loc[2]=nullset udg_Iah_Int[0]=(udg_Iah_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call DisableTrigger(gg_trg_IahC)
call SetUnitTimeScale(udg_Iah_Unit[0],1.)call PauseSystem(udg_Iah_Unit[0],false)call RemoveUnit(udg_Iah_Unit[1])
call SelectUnitForPlayerSingle(udg_Iah_Unit[0],udg_Iah_Own)call TriggerSleepAction(1.1)
call DisableTrigger(gg_trg_IahM)
call DisableTrigger(gg_trg_IahP)
call RemoveRect(udg_Iah_Map)
set udg_Iah_Map=null
call FlushParentHashtableBJ(udg_Iah_Hash)set udg_Iah_Hash=nullset udg_Iah_Own=null
set udg_Iah_Unit[0]=null
set udg_Iah_Unit[1]=null
set udg_Iah_X[0]=.0set udg_Iah_Y[0]=.0set udg_Iah_X[1]=.0set udg_Iah_Y[1]=.0set udg_Iah_X[2]=.0set udg_Iah_Y[2]=.0set udg_Iah_Real[0]=.0set udg_Iah_Real[1]=.0set udg_Iah_Real[2]=.0set udg_Iah_Real[3]=.0set udg_Iah_Int[0]=0
set udg_Iah_Int[1]=0
set udg_Iah_Int[2]=0
set udg_Iah_Int[3]=0
endifendfunctionfunction InitTrig_IahL takes nothing returns nothing
set gg_trg_IahL=CreateTrigger()call DisableTrigger(gg_trg_IahL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahL,.06)call TriggerAddAction(gg_trg_IahL,function Trig_IahL_Actions)endfunctionfunction Iah_GroupPush takes nothing returns nothing
local unit u=GetEnumUnit()local integer uid=GetHandleId(u)
local location array loc
call SaveInteger(udg_Iah_Hash,uid,0,$A)set loc[0]=Location(udg_Iah_X[0],udg_Iah_Y[0])set loc[1]=GetUnitLoc(u)
call SaveReal(udg_Iah_Hash,uid,1,AngleBetweenPoints(loc[0],loc[1]))call RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullif(IsUnitInGroup(u,udg_Iah_GroupPush)==false)thencall GroupAddUnit(udg_Iah_GroupPush,u)endifif(IsUnitInGroup(u,udg_Iah_GroupDmg)==false)then
call UnitDamageTarget(udg_Iah_Unit[0],u,udg_Iah_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u)>0)thencall SaveInteger(udg_Iah_Hash,uid,2,4)call GroupAddUnit(udg_Iah_GroupDmg,u)endifendifset u=nullset uid=0endfunctionfunction Trig_IahM_Actions takes nothing returns nothing
local unit pickedlocal integer ilocal location array loc
local group g=CreateGroup()local group g2call GroupAddGroup(udg_Iah_GroupDummy,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set i=GetUnitUserData(picked)if(i>0)thencall SetUnitUserData(picked,i-1)
set loc[0]=GetUnitLoc(picked)set loc[1]=PolarProjectionBJ(loc[0],udg_Iah_Real[1],GetUnitFacing(picked))call RemoveLocation(loc[0])set loc[0]=nullif(RectContainsLoc(udg_Iah_Map,loc[1]))thencall SetUnitX(picked,GetLocationX(loc[1]))call SetUnitY(picked,GetLocationY(loc[1]))call EnumDestructablesInCircleBJ(udg_Iah_Real[2],loc[1],function TreeKiller)
set g2=DynamicCreateGroup(loc[1],udg_Iah_Real[2],udg_Iah_Own)call ForGroupBJ(g2,function Iah_GroupPush)call DestroyGroup(g2)set g2=nullendifcall RemoveLocation(loc[1])set loc[1]=nullelse
call GroupRemoveUnit(udg_Iah_GroupDummy,picked)call RemoveUnit(picked)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_IahM takes nothing returns nothing
set gg_trg_IahM=CreateTrigger()call DisableTrigger(gg_trg_IahM)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahM,.04)call TriggerAddAction(gg_trg_IahM,function Trig_IahM_Actions)endfunctionfunction Trig_IahP_Actions takes nothing returns nothing
local unit pickedlocal location array loc
local integer uidlocal integer stack_push
local real facinglocal integer stack_dmglocal group g1=CreateGroup()
call GroupAddGroup(udg_Iah_GroupPush,g1)
loop
set picked=FirstOfGroup(g1)exitwhen picked==nullcall GroupRemoveUnit(g1,picked)set uid=GetHandleId(picked)set stack_push=LoadInteger(udg_Iah_Hash,uid,0)set stack_dmg=LoadInteger(udg_Iah_Hash,uid,2)if(stack_push>0)then
set stack_push=stack_push-1call SaveInteger(udg_Iah_Hash,uid,0,stack_push)set facing=LoadReal(udg_Iah_Hash,uid,1)set loc[0]=GetUnitLoc(picked)set loc[1]=PolarProjectionBJ(loc[0],8.,facing)call RemoveLocation(loc[0])set loc[0]=nullcall UnitMoveXY(picked,GetLocationX(loc[1]),GetLocationY(loc[1]))call RemoveLocation(loc[1])set loc[1]=nullelse
call GroupRemoveUnit(udg_Iah_GroupPush,picked)endifif(stack_dmg>0)thenset stack_dmg=stack_dmg-1call SaveInteger(udg_Iah_Hash,uid,2,stack_dmg)else
call GroupRemoveUnit(udg_Iah_GroupDmg,picked)endifset picked=nullendloopcall DestroyGroup(g1)set g1=nullendfunctionfunction InitTrig_IahP takes nothing returns nothing
set gg_trg_IahP=CreateTrigger()call DisableTrigger(gg_trg_IahP)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahP,.04)call TriggerAddAction(gg_trg_IahP,function Trig_IahP_Actions)endfunctionfunction Trig_IahC_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DT')endfunctionfunction Trig_IahC_Actions takes nothing returns nothing
set udg_Iah_Int[0]=0
endfunctionfunction InitTrig_IahC takes nothing returns nothing
set gg_trg_IahC=CreateTrigger()call DisableTrigger(gg_trg_IahC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_IahC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_IahC,Condition(function Trig_IahC_Conditions))call TriggerAddAction(gg_trg_IahC,function Trig_IahC_Actions)endfunctionfunction Wlv_Cond1 takes nothing returns boolean
return(GetSpellAbilityId()=='A0DU')endfunctionfunction Trig_Wlv_Act1 takes nothing returns nothing
local location locset udg_Wlv_Unit=GetTriggerUnit()set udg_Wlv_Own=GetOwningPlayer(udg_Wlv_Unit)set udg_Wlv_Type='u00I'set udg_Wlv_Int[0]=$Cset udg_Wlv_Int[1]=0
set udg_Wlv_Real[0]=300.
set udg_Wlv_Real[1]=(250.+((1.5+(I2R(GetUnitAbilityLevel(udg_Wlv_Unit,'A0DU'))*.2))*I2R(GetHeroAgi(udg_Wlv_Unit,true))))
set loc=GetUnitLoc(udg_Wlv_Unit)
call CreateNUnitsAtLoc(1,'h056',udg_Wlv_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call RemoveLocation(loc)
set loc=null
call EnableTrigger(udg_Wlv_Trigger[1])call EnableTrigger(udg_Wlv_Trigger[2])call EnableTrigger(udg_Wlv_Trigger[3])call EnableTrigger(udg_Wlv_Trigger[4])endfunctionfunction Wlv_Cond2 takes nothing returns boolean
return(GetUnitTypeId(GetEnteringUnit())==udg_Wlv_Type)endfunctionfunction Trig_Wlv_Act2 takes nothing returns nothing
local unit u=GetEnteringUnit()set udg_Wlv_Int[1]=udg_Wlv_Int[1]+1set udg_Wlv_Int[0]=udg_Wlv_Int[0]-1call UnitApplyTimedLife(u,'BTLF',(15.-(udg_Wlv_Int[1]*.2)))call SetUnitUserData(u,0)call SetUnitVertexColor(u,$FF,$FF,$FF,'}')call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdl",u,"origin"))call DestroyEffect(AddSpecialEffectTarget("Encourage.mdl",u,"origin"))if(udg_Wlv_Int[0]<1)then
call DisableTrigger(udg_Wlv_Trigger[1])endifset u=nullendfunctionfunction Wlv_Cond3 takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==udg_Wlv_Type)endfunctionfunction Trig_Wlv_Act3 takes nothing returns nothing
local unit u=GetTriggerUnit()call SetUnitMoveSpeed(u,522.)call SetUnitAnimation(u,"attack slam")set u=nullendfunctionfunction Wlv_Cond4 takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())==udg_Wlv_Type)endfunctionfunction Wlv_Group takes nothing returns nothing
local unit u=GetEnumUnit()call UnitDamageTarget(udg_Wlv_Unit,u,udg_Wlv_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_Wlv_Act4 takes nothing returns nothing
local unit u=GetAttacker()local location loc=GetUnitLoc(GetTriggerUnit())local group g=DynamicCreateGroup(loc,udg_Wlv_Real[0],udg_Wlv_Own)call CreateNUnitsAtLoc(1,'h05O',udg_Wlv_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call CreateNUnitsAtLoc(1,'h02L',udg_Wlv_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)call SetUnitTimeScale(bj_lastCreatedUnit,2.5)call SetUnitScale(bj_lastCreatedUnit,1.4,1.4,1.4)call CreateNUnitsAtLoc(1,'h04R',udg_Wlv_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitScale(bj_lastCreatedUnit,2.4,2.4,2.4)call EnumDestructablesInCircleBJ(udg_Wlv_Real[0],loc,function TreeKiller)call RemoveLocation(loc)
set loc=null
call ForGroupBJ(g,function Wlv_Group)call DestroyGroup(g)
set g=nullcall SetUnitUserData(u,1)call KillUnit(u)
set u=nullendfunctionfunction Wlv_Cond5 takes nothing returns boolean
return(GetUnitTypeId(GetDyingUnit())==udg_Wlv_Type)endfunctionfunction Trig_Wlv_Act5 takes nothing returns nothing
local unit u=GetDyingUnit()local location locif(GetUnitUserData(u)==0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'h04D',udg_Wlv_Own,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call RemoveLocation(loc)
set loc=null
endifcall RemoveUnit(u)set u=nullset udg_Wlv_Int[1]=udg_Wlv_Int[1]-1if(udg_Wlv_Int[1]==0)thenset udg_Wlv_Unit=nullset udg_Wlv_Own=null
set udg_Wlv_Type=0set udg_Wlv_Int[0]=0
set udg_Wlv_Int[1]=0
set udg_Wlv_Real[0]=.0set udg_Wlv_Real[1]=.0if(IsTriggerEnabled(udg_Wlv_Trigger[1]))then
call DisableTrigger(udg_Wlv_Trigger[1])endifcall DisableTrigger(udg_Wlv_Trigger[2])call DisableTrigger(udg_Wlv_Trigger[3])call DisableTrigger(udg_Wlv_Trigger[4])endifendfunctionfunction InitTrig_Wlv takes nothing returns nothingset udg_Wlv_Trigger[0]=CreateTrigger()call TriggerAddCondition(udg_Wlv_Trigger[0],Condition(function Wlv_Cond1))call TriggerAddAction(udg_Wlv_Trigger[0],function Trig_Wlv_Act1)
set udg_Wlv_Trigger[1]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[1])call TriggerRegisterEnterRectSimple(udg_Wlv_Trigger[1],GetWorldBounds())
call TriggerAddCondition(udg_Wlv_Trigger[1],Condition(function Wlv_Cond2))call TriggerAddAction(udg_Wlv_Trigger[1],function Trig_Wlv_Act2)
set udg_Wlv_Trigger[2]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[2])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[2],EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(udg_Wlv_Trigger[2],Condition(function Wlv_Cond3))call TriggerAddAction(udg_Wlv_Trigger[2],function Trig_Wlv_Act3)
set udg_Wlv_Trigger[3]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[3])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[3],EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_Wlv_Trigger[3],Condition(function Wlv_Cond4))call TriggerAddAction(udg_Wlv_Trigger[3],function Trig_Wlv_Act4)
set udg_Wlv_Trigger[4]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[4])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[4],EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(udg_Wlv_Trigger[4],Condition(function Wlv_Cond5))call TriggerAddAction(udg_Wlv_Trigger[4],function Trig_Wlv_Act5)
endfunctionfunction AIAkainu___isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIAkainu___AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIAkainu___isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIAkainu___AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIAkainu___Cond takes nothing returns booleanif(not(AIAkainu___isAtked()or AIAkainu___isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIAkainu___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIAkainu___AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIAkainu___isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0E6')call SelectHeroSkill(mySelf,'A0E4')call SelectHeroSkill(mySelf,'A0E2')call SelectHeroSkill(mySelf,'A0E0')call SelectHeroSkill(mySelf,'A0DW')endifif(isAttacking)thencall IssueImmediateOrderById(mySelf,$D00A1)call IssueTargetOrderById(mySelf,$D0106,myTarget)endifif(isHeroTarget)then
call IssueTargetOrderById(mySelf,$D0065,myTarget)if(isAttacking)thencall IssueTargetOrderById(mySelf,$D0270,myTarget)call IssueImmediateOrderById(mySelf,$D0084)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIAkainu___AINo])
endfunctionfunction AIAkainu___Init takes nothing returns nothingset udg_AI_Trig[AIAkainu___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIAkainu___AINo],Condition(function AIAkainu___Cond))call TriggerAddAction(udg_AI_Trig[AIAkainu___AINo],function AIAkainu___Act)endfunctionfunction Trig_Mgh_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0DW')endfunctionfunction Trig_Mgh_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.5local location loc=GetUnitLoc(u)
call FrozenItemSwap(u,true)call CreateNUnitsAtLoc(1,'u003',GetOwningPlayer(u),loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0E5')call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
set udg_Mgh_Count=0set udg_Mgh_Skill='A0DZ'
set udg_Mgh_Buff='B038'set udg_Mgh_DmgBuff[0]='B036'set udg_Mgh_DmgBuff[1]='B037'call UnitAddAbility(u,udg_Mgh_Skill)
call EnableTrigger(gg_trg_MghA)call TriggerSleepAction(.5)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,udg_Mgh_Buff)<1)endloopcall DisableTrigger(gg_trg_MghA)
if(GetUnitAbilityLevel(u,udg_Mgh_Skill)>0)thencall UnitRemoveAbility(u,udg_Mgh_Skill)endifcall FrozenItemSwap(u,false)
set u=nullset udg_Mgh_Skill=0set udg_Mgh_Buff=0set udg_Mgh_DmgBuff[0]=0
set udg_Mgh_DmgBuff[1]=0
set delay=.0
set udg_Mgh_Count=0endfunctionfunction InitTrig_Mgh takes nothing returns nothingset gg_trg_Mgh=CreateTrigger()call TriggerAddCondition(gg_trg_Mgh,Condition(function Trig_Mgh_Conditions))
call TriggerAddAction(gg_trg_Mgh,function Trig_Mgh_Actions)endfunctionfunction MghA_DMGTakenCond takes nothing returns boolean
local unit u=GetTriggerUnit()if(GetUnitAbilityLevel(u,udg_Mgh_DmgBuff[0])>0 or GetUnitAbilityLevel(u,udg_Mgh_DmgBuff[1])>0)thenset u=nullreturn trueendifset u=nullreturn false
endfunctionfunction MghA_DMGTaken takes nothing returns nothing
local unit atker=GetEventDamageSource()local unit atked=GetTriggerUnit()local unit pickedlocal integer sklvlocal real dmglocal player plocal location loclocal group gcall UnitRemoveAbility(atked,udg_Mgh_DmgBuff[0])
call UnitRemoveAbility(atked,udg_Mgh_DmgBuff[1])
set udg_Mgh_Count=udg_Mgh_Count+1if(udg_Mgh_Count==3)then
call UnitRemoveAbility(atker,udg_Mgh_Skill)set sklv=GetUnitAbilityLevel(atker,'A0DW')set dmg=((5.+(I2R(sklv)*1.))*I2R(GetHeroStr(atker,false)))set p=GetOwningPlayer(atker)
set loc=GetUnitLoc(atked)call CreateNUnitsAtLoc(1,'h0BA',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h0BB',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call SetUnitAnimation(bj_lastCreatedUnit,"spell")call CreateNUnitsAtLoc(1,'h02K',p,loc,GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h02L',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.)set g=DynamicCreateGroup(loc,300.,p)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(atker,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall RemoveLocation(loc)
set loc=null
call DestroyGroup(g)
set g=nullcall UnitRemoveAbility(atker,udg_Mgh_Buff)set p=nullset dmg=.0set sklv=0endifset atker=nullset atked=nullendfunctionfunction MghA_Conditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),udg_Mgh_Buff)>0)endfunctionfunction MghA_Actions takes nothing returns nothinglocal unit atked=GetTriggerUnit()local trigger tg
local triggercondition trgCondlocal triggeraction trgActif(IsUnitInGroup(atked,udg_Mgh_Group)==false)thencall GroupAddUnit(udg_Mgh_Group,atked)set tg=CreateTrigger()call TriggerRegisterUnitEvent(tg,atked,EVENT_UNIT_DAMAGED)set trgCond=TriggerAddCondition(tg,Condition(function MghA_DMGTakenCond))set trgAct=TriggerAddAction(tg,function MghA_DMGTaken)call TriggerSleepAction(5.)call GroupRemoveUnit(udg_Mgh_Group,atked)call TriggerRemoveAction(tg,trgAct)call TriggerRemoveCondition(tg,trgCond)call DestroyTrigger(tg)set trgAct=nullset trgCond=null
set tg=nullendifset atked=nullendfunctionfunction InitTrig_MghA takes nothing returns nothing
set gg_trg_MghA=CreateTrigger()call DisableTrigger(gg_trg_MghA)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MghA,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_MghA,Condition(function MghA_Conditions))call TriggerAddAction(gg_trg_MghA,function MghA_Actions)
endfunctionfunction Trig_Ing_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E0')endfunctionfunction Trig_Ing_Actions takes nothing returns nothingset udg_Ing_Unit[0]=GetTriggerUnit()
set udg_Ing_Unit[1]=GetSpellTargetUnit()
set udg_Ing_Own=GetOwningPlayer(udg_Ing_Unit[0])
set udg_Ing_Loc[0]=GetUnitLoc(udg_Ing_Unit[0])set udg_Ing_Loc[1]=GetUnitLoc(udg_Ing_Unit[1])set udg_Ing_Real[0]=AngleBetweenPoints(udg_Ing_Loc[0],udg_Ing_Loc[1])set udg_Ing_Loc[2]=PolarProjectionBJ(udg_Ing_Loc[0],80.,(udg_Ing_Real[0]-89.))call CreateNUnitsAtLoc(1,'h0B9',udg_Ing_Own,udg_Ing_Loc[2],(udg_Ing_Real[0]+193.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Ing_Loc[3]=PolarProjectionBJ(udg_Ing_Loc[0],80.,udg_Ing_Real[0])
set udg_Ing_Loc[4]=PolarProjectionBJ(udg_Ing_Loc[0],120.,udg_Ing_Real[0])call RemoveLocation(udg_Ing_Loc[0])set udg_Ing_Loc[0]=nullcall RemoveLocation(udg_Ing_Loc[1])set udg_Ing_Loc[1]=nullcall RemoveLocation(udg_Ing_Loc[2])set udg_Ing_Loc[2]=nullset udg_Ing_Unit[2]=CreateUnit(udg_Ing_Own,'h0BD',GetLocationX(udg_Ing_Loc[3]),GetLocationY(udg_Ing_Loc[3]),udg_Ing_Real[0])
call RemoveLocation(udg_Ing_Loc[3])set udg_Ing_Loc[3]=nullcall CreateNUnitsAtLoc(1,'h0BF',udg_Ing_Own,udg_Ing_Loc[4],(udg_Ing_Real[0]+190.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call RemoveLocation(udg_Ing_Loc[4])set udg_Ing_Loc[4]=nullcall SetUnitTimeScale(udg_Ing_Unit[2],1.6)call SetUnitAnimation(udg_Ing_Unit[2],"morph alternate")
call DisplayText("Inugami Guren",udg_Ing_Unit[0],.023,true,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Akainu\\InugamiGuren.wav",GetUnitX(udg_Ing_Unit[0]),GetUnitY(udg_Ing_Unit[0]))set udg_Ing_Int[0]=0
set udg_Ing_Int[1]=40set udg_Ing_Real[0]=55.set udg_Ing_Real[1]=140.
set udg_Ing_Real[2]=(5.*I2R(GetHeroStr(udg_Ing_Unit[0],false)))set udg_Ing_Real[3]=(udg_Ing_Real[2]*.7)
call EnableTrigger(gg_trg_IngL)endfunctionfunction InitTrig_Ing takes nothing returns nothingset gg_trg_Ing=CreateTrigger()call TriggerAddCondition(gg_trg_Ing,Condition(function Trig_Ing_Conditions))
call TriggerAddAction(gg_trg_Ing,function Trig_Ing_Actions)endfunctionfunction IngL_GroupAct takes nothing returns nothing
call UnitPureDamageTarget(udg_Ing_Unit[0],GetEnumUnit(),udg_Ing_Real[3])
endfunctionfunction IngL_Cond takes nothing returns boolean
return( not(udg_Ing_Real[1]>DistanceBetweenPoints(udg_Ing_Loc[0],udg_Ing_Loc[1])))and( not(udg_Ing_Int[1]<udg_Ing_Int[0]))and( not(GetWidgetLife(udg_Ing_Unit[1])<1))endfunctionfunction IngL_Actions takes nothing returns nothingset udg_Ing_Loc[0]=GetUnitLoc(udg_Ing_Unit[2])set udg_Ing_Loc[1]=GetUnitLoc(udg_Ing_Unit[1])if(IngL_Cond())thenset udg_Ing_Real[4]=AngleBetweenPoints(udg_Ing_Loc[0],udg_Ing_Loc[1])set udg_Ing_Loc[2]=PolarProjectionBJ(udg_Ing_Loc[0],udg_Ing_Real[0],udg_Ing_Real[4])
call RemoveLocation(udg_Ing_Loc[0])set udg_Ing_Loc[0]=nullcall RemoveLocation(udg_Ing_Loc[1])set udg_Ing_Loc[1]=nullcall SetUnitPositionLocFacingBJ(udg_Ing_Unit[2],udg_Ing_Loc[2],udg_Ing_Real[4])call RemoveLocation(udg_Ing_Loc[2])set udg_Ing_Loc[2]=nullset udg_Ing_Int[0]=((udg_Ing_Int[0]+1)+1)else
call DisableTrigger(GetTriggeringTrigger())if(udg_Ing_Real[1]>DistanceBetweenPoints(udg_Ing_Loc[0],udg_Ing_Loc[1]))then
call CreateNUnitsAtLoc(1,'h0BC',udg_Ing_Own,udg_Ing_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call CreateNUnitsAtLoc(1,'h0BE',udg_Ing_Own,udg_Ing_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)call UnitPureDamageTarget(udg_Ing_Unit[0],udg_Ing_Unit[1],udg_Ing_Real[2])if(GetWidgetLife(udg_Ing_Unit[1])<1)then
set udg_Ing_Real[4]=300.
call EnumDestructablesInCircleBJ(udg_Ing_Real[4],udg_Ing_Loc[1],function TreeKiller)
set udg_Ing_Group=DynamicCreateGroup(udg_Ing_Loc[1],udg_Ing_Real[4],udg_Ing_Own)
call ForGroupBJ(udg_Ing_Group,function IngL_GroupAct)call DestroyGroup(udg_Ing_Group)
set udg_Ing_Group=nullcall CreateNUnitsAtLoc(1,'h0BB',udg_Ing_Own,udg_Ing_Loc[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call SetUnitAnimation(bj_lastCreatedUnit,"spell")call CreateNUnitsAtLoc(1,'h0BB',udg_Ing_Own,udg_Ing_Loc[1],GetRandomReal(0,360.))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call SetUnitAnimation(bj_lastCreatedUnit,"spell")else
call CreateNUnitsAtLoc(1,'u003',udg_Ing_Own,udg_Ing_Loc[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0DX')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,udg_Ing_Unit[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendifcall RemoveLocation(udg_Ing_Loc[0])set udg_Ing_Loc[0]=nullcall RemoveLocation(udg_Ing_Loc[1])set udg_Ing_Loc[1]=nullcall SetUnitTimeScale(udg_Ing_Unit[2],2.4)call SetUnitAnimation(udg_Ing_Unit[2],"death")call UnitApplyTimedLife(udg_Ing_Unit[2],'BTLF',4.)set udg_Ing_Own=null
set udg_Ing_Unit[0]=null
set udg_Ing_Unit[1]=null
set udg_Ing_Unit[2]=null
set udg_Ing_Real[0]=.0set udg_Ing_Real[1]=.0set udg_Ing_Real[2]=.0set udg_Ing_Real[3]=.0set udg_Ing_Real[4]=.0set udg_Ing_Int[0]=0
set udg_Ing_Int[1]=0
endifendfunctionfunction InitTrig_IngL takes nothing returns nothing
set gg_trg_IngL=CreateTrigger()call DisableTrigger(gg_trg_IngL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IngL,.04)call TriggerAddAction(gg_trg_IngL,function IngL_Actions)
endfunctionfunction DmgCond takes nothing returns booleanlocal unit u=GetTriggerUnit()if(GetUnitAbilityLevel(u,MagmaFrenzy___skBuff)>0)thencall BlockDamageAct(u,(GetEventDamage()*MagmaFrenzy___dmgDef))endifset u=nullreturn false
endfunctionfunction Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E2')endfunctionfunction MagmaFrenzy___Act takes nothing returns nothing
local unit u=GetTriggerUnit()local unit pickedlocal player p=GetOwningPlayer(u)local group glocal real x
local real y
local real garea=300.local real delay=.4local real dmg=(GetHeroStr(u,true)*delay)local integer skStrBonus='A0E3'set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.5)set bj_lastCreatedUnit=CreateUnit(p,'h096',x,y,GetRandomReal(0,360))
call SetUnitVertexColor(bj_lastCreatedUnit,$FF,50,50,$FF)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)set bj_lastCreatedUnit=CreateUnit(p,'h096',x,y,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,50,50,$FF)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)set bj_lastCreatedUnit=CreateUnit(p,'h03I',x,y,GetRandomReal(0,360))
call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h0BB',x,y,GetRandomReal(0,360))
call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h0BB',x,y,GetRandomReal(0,360))
call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h0BB',x,y,GetRandomReal(0,360))
call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call SetUnitVertexColor(u,$FF,39,0,$FF)call UnitAddAbility(u,skStrBonus)call EnableTrigger(Akainu_MagmaFrenzyDmg)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,MagmaFrenzy___skBuff)<1)set g=CreateGroupXY(GetUnitX(u),GetUnitY(u),garea,p)
loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdx",picked,"origin"))call UnitPureDamageTarget(u,picked,dmg)endloopcall DestroyGroup(g)
set g=nullendloopcall UnitRemoveAbility(u,skStrBonus)
call DisableTrigger(Akainu_MagmaFrenzyDmg)call SetUnitVertexColor(u,$FF,$FF,$FF,$FF)set u=nullset p=nullendfunctionfunction MagmaFrenzy___Init takes nothing returns nothingset gg_trg_Magma_Frenzy=CreateTrigger()call TriggerAddCondition(gg_trg_Magma_Frenzy,Condition(function Cond))call TriggerAddAction(gg_trg_Magma_Frenzy,function MagmaFrenzy___Act)call DisableTrigger(Akainu_MagmaFrenzyDmg)call TriggerAddCondition(Akainu_MagmaFrenzyDmg,Condition(function DmgCond))endfunctionfunction Trig_Ryu_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E4')endfunctionfunction Trig_Ryu_Actions takes nothing returns nothingset udg_Ryu_Unit=GetTriggerUnit()set udg_Ryu_Loc[0]=GetSpellTargetLoc()set udg_Ryu_Loc[1]=GetUnitLoc(udg_Ryu_Unit)set udg_Ryu_Real[0]=AngleBetweenPoints(udg_Ryu_Loc[1],udg_Ryu_Loc[0])set udg_Ryu_Rect=RectFromCenterSizeBJ(udg_Ryu_Loc[0],600.,600.)call RemoveLocation(udg_Ryu_Loc[0])set udg_Ryu_Loc[0]=nullcall RemoveLocation(udg_Ryu_Loc[1])set udg_Ryu_Loc[1]=nullset udg_Ryu_Int[0]=GetUnitAbilityLevel(udg_Ryu_Unit,'A0E4')set udg_Ryu_Real[1]=1.6set udg_Ryu_Real[2]=250.
set udg_Ryu_Real[3]=(220.+(80.*I2R(udg_Ryu_Int[0])))
set udg_Ryu_Int[0]=(18+(2*udg_Ryu_Int[0]))call DisplayText("Ryusei Kazan",udg_Ryu_Unit,.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Akainu\\RyuseiKazan.wav",GetUnitX(udg_Ryu_Unit),GetUnitY(udg_Ryu_Unit))
set udg_Ryu_Own=GetOwningPlayer(udg_Ryu_Unit)call TriggerSleepAction(.01)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Akainu\\RyuseiKazanEffect.wav",GetUnitX(udg_Ryu_Unit),GetUnitY(udg_Ryu_Unit))call EnableTrigger(gg_trg_RyuL)set udg_Ryu_Int[1]=1
loop
exitwhen udg_Ryu_Int[1]>udg_Ryu_Int[0]set udg_Ryu_Loc[0]=GetRandomLocInRect(udg_Ryu_Rect)call CreateNUnitsAtLoc(1,'h0BI',udg_Ryu_Own,udg_Ryu_Loc[0],udg_Ryu_Real[0])call GroupAddUnit(udg_Ryu_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,udg_Ryu_Real[1])call SetUnitUserData(bj_lastCreatedUnit,24)call RemoveLocation(udg_Ryu_Loc[0])set udg_Ryu_Loc[0]=nullcall TriggerSleepAction(.08)
set udg_Ryu_Int[1]=udg_Ryu_Int[1]+1endloopcall RemoveRect(udg_Ryu_Rect)set udg_Ryu_Rect=nullcall TriggerSleepAction(1.5)
call DisableTrigger(gg_trg_RyuL)
set udg_Ryu_Own=null
set udg_Ryu_Unit=nullset udg_Ryu_Real[0]=.0set udg_Ryu_Real[1]=.0set udg_Ryu_Real[2]=.0set udg_Ryu_Real[3]=.0set udg_Ryu_Int[0]=0
set udg_Ryu_Int[1]=0
endfunctionfunction InitTrig_Ryu takes nothing returns nothingset gg_trg_Ryu=CreateTrigger()call TriggerAddCondition(gg_trg_Ryu,Condition(function Trig_Ryu_Conditions))
call TriggerAddAction(gg_trg_Ryu,function Trig_Ryu_Actions)endfunctionfunction Trig_RyuD_Actions takes nothing returns nothing
local unit pickedlocal unit picked2local integer ilocal location loclocal group gset g=CreateGroup()call GroupAddGroup(udg_Ryu_GroupDummy,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set i=GetUnitUserData(picked)if(i>0)thenset i=i-1call SetUnitUserData(picked,i)else
set loc=GetUnitLoc(picked)call CreateNUnitsAtLoc(1,'h00F',udg_Ryu_Own,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h0C5',udg_Ryu_Own,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h0BB',udg_Ryu_Own,loc,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,2.1,2.1,2.1)call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call EnumDestructablesInCircleBJ(udg_Ryu_Real[2],loc,function TreeKiller)set udg_Ryu_Group=DynamicCreateGroup(loc,udg_Ryu_Real[2],udg_Ryu_Own)call RemoveLocation(loc)
set loc=null
loop
set picked2=FirstOfGroup(udg_Ryu_Group)exitwhen picked2==nullcall GroupRemoveUnit(udg_Ryu_Group,picked2)call UnitPureDamageTarget(udg_Ryu_Unit,picked2,udg_Ryu_Real[3])set picked2=null
endloopcall DestroyGroup(udg_Ryu_Group)
set udg_Ryu_Group=nullcall RemoveUnit(picked)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_RyuL takes nothing returns nothing
set gg_trg_RyuL=CreateTrigger()call DisableTrigger(gg_trg_RyuL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RyuL,.05)call TriggerAddAction(gg_trg_RyuL,function Trig_RyuD_Actions)endfunctionfunction Trig_Mgo_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E6')endfunctionfunction Trig_Mgo_Actions takes nothing returns nothingset udg_Mgo_Unit[0]=GetTriggerUnit()
set udg_Mgo_Unit[1]=GetSpellTargetUnit()
call SetUnitInvulnerable(udg_Mgo_Unit[0],true)call SetUnitInvulnerable(udg_Mgo_Unit[1],true)call PauseSystem(udg_Mgo_Unit[0],true)call PauseSystem(udg_Mgo_Unit[1],true)call TriggerSleepAction(.01)
call Dynamic_Sound("Sounds\\Meigo.mp3")call DisplayText("Meigo",udg_Mgo_Unit[0],.023,false,$DC,5,5,$FF)
set udg_Mgo_Own=GetOwningPlayer(udg_Mgo_Unit[0])
set udg_Mgo_Loc[0]=GetUnitLoc(udg_Mgo_Unit[0])call DestroyEffect(AddSpecialEffectLoc("Foly_Fire_Slam2.mdl",udg_Mgo_Loc[0]))call CreateNUnitsAtLoc(1,'h096',udg_Mgo_Own,udg_Mgo_Loc[0],GetRandomReal(0,360.))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h096',udg_Mgo_Own,udg_Mgo_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h00F',udg_Mgo_Own,udg_Mgo_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(udg_Mgo_Loc[0])set udg_Mgo_Loc[0]=nullset udg_Mgo_Eff=AddSpecialEffectTarget("Magmablast.mdl",udg_Mgo_Unit[0],"hand right")call SetUnitAnimation(udg_Mgo_Unit[0],"attack")call SetUnitTimeScale(udg_Mgo_Unit[0],.3)call TriggerSleepAction(.5)set udg_Mgo_Real[0]=161.
set udg_Mgo_Real[1]=70.call EnableTrigger(gg_trg_MgoL)endfunctionfunction InitTrig_Mgo takes nothing returns nothingset gg_trg_Mgo=CreateTrigger()call TriggerAddCondition(gg_trg_Mgo,Condition(function Trig_Mgo_Conditions))
call TriggerAddAction(gg_trg_Mgo,function Trig_Mgo_Actions)endfunctionfunction Trig_MgoL_Cond takes nothing returns booleanif(DistanceBetweenPoints(udg_Mgo_Loc[0],udg_Mgo_Loc[1])<udg_Mgo_Real[0])then
return false
elseif(GetWidgetLife(udg_Mgo_Unit[0])<1)then
return false
elseif(GetWidgetLife(udg_Mgo_Unit[1])<1)then
return false
endifreturn trueendfunctionfunction Trig_MgoL_Actions takes nothing returns nothing
local real x
local real y
set udg_Mgo_Loc[0]=GetUnitLoc(udg_Mgo_Unit[0])set udg_Mgo_Loc[1]=GetUnitLoc(udg_Mgo_Unit[1])if(Trig_MgoL_Cond())then
set udg_Mgo_Loc[2]=PolarProjectionBJ(udg_Mgo_Loc[0],udg_Mgo_Real[1],AngleBetweenPoints(udg_Mgo_Loc[0],udg_Mgo_Loc[1]))set x=GetLocationX(udg_Mgo_Loc[2])set y=GetLocationY(udg_Mgo_Loc[2])if(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY))thencall SetUnitPositionLoc(udg_Mgo_Unit[0],udg_Mgo_Loc[1])else
call EnumDestructablesInCircleBJ(120.,udg_Mgo_Loc[2],function TreeKiller)call SetUnitX(udg_Mgo_Unit[0],x)
call SetUnitY(udg_Mgo_Unit[0],y)
endifcall SetUnitFacing(udg_Mgo_Unit[0],AngleBetweenPoints(udg_Mgo_Loc[2],udg_Mgo_Loc[1]))call RemoveLocation(udg_Mgo_Loc[0])set udg_Mgo_Loc[0]=nullcall RemoveLocation(udg_Mgo_Loc[1])set udg_Mgo_Loc[1]=nullcall RemoveLocation(udg_Mgo_Loc[2])set udg_Mgo_Loc[2]=nullelse
call DisableTrigger(GetTriggeringTrigger())if(DistanceBetweenPoints(udg_Mgo_Loc[0],udg_Mgo_Loc[1])<udg_Mgo_Real[0])then
set x=AngleBetweenPoints(udg_Mgo_Loc[0],udg_Mgo_Loc[1])call RemoveLocation(udg_Mgo_Loc[0])set udg_Mgo_Loc[0]=nullcall RemoveLocation(udg_Mgo_Loc[1])set udg_Mgo_Loc[1]=nullcall SetUnitTimeScale(udg_Mgo_Unit[0],1.5)call TriggerSleepAction(.05)
call SetUnitInvulnerable(udg_Mgo_Unit[0],false)call SetUnitInvulnerable(udg_Mgo_Unit[1],false)call PauseSystem(udg_Mgo_Unit[0],false)call PauseSystem(udg_Mgo_Unit[1],false)set udg_Mgo_Loc[0]=GetUnitLoc(udg_Mgo_Unit[1])call CreateNUnitsAtLoc(1,'h01U',udg_Mgo_Own,udg_Mgo_Loc[0],x)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitFlyHeight(bj_lastCreatedUnit,140.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h07I',udg_Mgo_Own,udg_Mgo_Loc[0],x)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call CreateNUnitsAtLoc(1,'h025',udg_Mgo_Own,udg_Mgo_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h0BB',udg_Mgo_Own,udg_Mgo_Loc[0],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h0BB',udg_Mgo_Own,udg_Mgo_Loc[0],GetRandomReal(0,360))
call SetUnitAnimation(bj_lastCreatedUnit,"spell")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call Dynamic_GroupShake(GetLocationX(udg_Mgo_Loc[0]),GetLocationY(udg_Mgo_Loc[0]),1.,udg_CameraShakePow,udg_CameraArea,null)
call RemoveLocation(udg_Mgo_Loc[0])set udg_Mgo_Loc[0]=nullset udg_Mgo_Real[2]=(2000.+((I2R(GetUnitAbilityLevel(udg_Mgo_Unit[0],'A0E6'))*10.)*I2R(GetHeroStr(udg_Mgo_Unit[0],false))))call DisplayText(I2S(R2I(udg_Mgo_Real[2]))+"!",udg_Mgo_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Mgo_Unit[0],udg_Mgo_Unit[1],udg_Mgo_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_Mgo_Real[2]=.0else
call RemoveLocation(udg_Mgo_Loc[0])set udg_Mgo_Loc[0]=nullcall RemoveLocation(udg_Mgo_Loc[1])set udg_Mgo_Loc[1]=nullcall SetUnitInvulnerable(udg_Mgo_Unit[0],false)call SetUnitInvulnerable(udg_Mgo_Unit[1],false)call PauseSystem(udg_Mgo_Unit[0],false)call PauseSystem(udg_Mgo_Unit[1],false)endifcall SetUnitTimeScale(udg_Mgo_Unit[0],1.)call DestroyEffect(udg_Mgo_Eff)set udg_Mgo_Eff=null
set udg_Mgo_Own=null
set udg_Mgo_Unit[0]=null
set udg_Mgo_Unit[1]=null
set udg_Mgo_Real[0]=.0set udg_Mgo_Real[1]=.0endifendfunctionfunction InitTrig_MgoL takes nothing returns nothing
set gg_trg_MgoL=CreateTrigger()call DisableTrigger(gg_trg_MgoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_MgoL,.04)call TriggerAddAction(gg_trg_MgoL,function Trig_MgoL_Actions)endfunctionfunction AI_Hashirama_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='U00F')endfunctionfunction AI_Hashirama_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='U00F')
endfunctionfunction AI_Hashirama_AttackedCond takes nothing returns boolean
if(not AI_Hashirama_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Hashirama_AttackerCond takes nothing returns boolean
if(not AI_Hashirama_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Hashirama_CondOR takes nothing returns booleanreturn(AI_Hashirama_AttackedCond()or AI_Hashirama_AttackerCond())endfunctionfunction AI_Hashirama_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Hashirama_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Hashirama_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal location AI_Point2
local boolean AI_Attacker=falsecall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Hashirama_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A05I')call SelectHeroSkill(MySelf,'A0E8')call SelectHeroSkill(MySelf,'A0EB')call SelectHeroSkill(MySelf,'A0EA')call SelectHeroSkill(MySelf,'A0E7')endifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(MySelf,$D0106,MyTarget)call IssueTargetOrderById(MySelf,$D0065,MyTarget)if(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D009F)call IssueImmediateOrderById(MySelf,$D0277)call IssueImmediateOrderById(MySelf,$D0080)endifendifif(AI_Attacker)thenset AI_Point2=GetUnitLoc(MyTarget)call IssuePointOrderByIdLoc(MySelf,$D009D,AI_Point2)
call RemoveLocation(AI_Point2)set AI_Point2=nullset AI_Attacker=falseendifendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Hashirama takes nothing returns nothing
set udg_AI_Trig[35]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[35],Condition(function AI_Hashirama_Cond))call TriggerAddAction(udg_AI_Trig[35],function AI_Hashirama_Act)
endfunctionfunction Trig_Universe_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EC')endfunctionfunction Trig_Universe_Actions takes nothing returns nothing
local unit array ulocal location array loc
local real r
local effect eff
set u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set r=(4.*I2R(GetHeroStr(u[0],true)))set loc[0]=GetUnitLoc(u[0])set loc[1]=GetUnitLoc(u[1])set loc[2]=PolarProjectionBJ(loc[1],100.,AngleBetweenPoints(loc[1],loc[0]))call RemoveLocation(loc[0])set loc[0]=nullset eff=AddSpecialEffectTarget("HashiramaBuff.mdl",u[0],"hand right")call TriggerSleepAction(.01)
call SetUnitPositionLocFacingLocBJ(u[0],loc[2],loc[1])call CreateNUnitsAtLoc(1,'h0BJ',GetOwningPlayer(u[0]),loc[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullcall UnitDamageTarget(u[0],u[1],r,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u[0])>0 and GetWidgetLife(u[1])<1)thencall SetUnitAnimation(u[0],"attack")
elseif(GetWidgetLife(u[0])>0 and GetWidgetLife(u[1])>0)thencall IssueTargetOrderById(u[0],$D000F,u[1])endifcall DisplayText("Mokuton: Shinra Bansho",u[0],.023,false,$FF,$FF,$FF,$FF)set u[0]=nullset u[1]=nullcall TriggerSleepAction(.1)call DestroyEffect(eff)set eff=null
endfunctionfunction InitTrig_Universe takes nothing returns nothing
set gg_trg_Universe=CreateTrigger()call TriggerAddCondition(gg_trg_Universe,Condition(function Trig_Universe_Conditions))call TriggerAddAction(gg_trg_Universe,function Trig_Universe_Actions)endfunctionfunction Trig_Wgf_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E7')endfunctionfunction Trig_Wgf_Actions takes nothing returns nothingset udg_Wgf_Unit=GetTriggerUnit()set udg_Wgf_Loc[0]=GetSpellTargetLoc()set udg_Wgf_Loc[1]=GetUnitLoc(udg_Wgf_Unit)set udg_Wgf_Real[0]=AngleBetweenPoints(udg_Wgf_Loc[1],udg_Wgf_Loc[0])set udg_Wgf_X=GetLocationX(udg_Wgf_Loc[1])set udg_Wgf_Y=GetLocationY(udg_Wgf_Loc[1])call RemoveLocation(udg_Wgf_Loc[0])set udg_Wgf_Loc[0]=nullcall RemoveLocation(udg_Wgf_Loc[1])set udg_Wgf_Loc[1]=nullcall DisplayText("Mokuton: Daijurin no Jutsu",udg_Wgf_Unit,.023,true,$FF,$FF,$FF,$FF)set udg_Wgf_Real[1]=110.
set udg_Wgf_Real[2]=250.
set udg_Wgf_Real[3]=BasicDmg_Q(udg_Wgf_Unit,'A0E7',0)set udg_Wgf_Int[0]=0
set udg_Wgf_Int[1]=$Aset udg_Wgf_Own=GetOwningPlayer(udg_Wgf_Unit)call EnableTrigger(gg_trg_WgfL)endfunctionfunction InitTrig_Wgf takes nothing returns nothingset gg_trg_Wgf=CreateTrigger()call TriggerAddCondition(gg_trg_Wgf,Condition(function Trig_Wgf_Conditions))
call TriggerAddAction(gg_trg_Wgf,function Trig_Wgf_Actions)endfunctionfunction Trig_WgfL_Func001Func026A takes nothing returns nothing
local unit u=GetEnumUnit()call GroupAddUnit(udg_Wgf_Group2,u)call UnitDamageTarget(udg_Wgf_Unit,u,udg_Wgf_Real[3],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u=nullendfunctionfunction Trig_WgfL_Func001Func037A takes nothing returns nothing
local unit u=GetEnumUnit()call SetUnitTimeScale(u,1.)call UnitApplyTimedLife(u,'BTLF',.6)
call SetUnitAnimation(u,"death")
set u=nullendfunctionfunction Trig_WgfL_Func001C takes nothing returns booleanreturn(udg_Wgf_Int[0]<udg_Wgf_Int[1])endfunctionfunction Trig_WgfL_Actions takes nothing returns nothing
if(Trig_WgfL_Func001C())then
set udg_Wgf_X=udg_Wgf_X+udg_Wgf_Real[1]*Cos(udg_Wgf_Real[0]*bj_DEGTORAD)
set udg_Wgf_Y=udg_Wgf_Y+udg_Wgf_Real[1]*Sin(udg_Wgf_Real[0]*bj_DEGTORAD)
set udg_Wgf_Loc[0]=Location(udg_Wgf_X,udg_Wgf_Y)
call CreateNUnitsAtLoc(1,'h0BL',udg_Wgf_Own,udg_Wgf_Loc[0],bj_UNIT_FACING)call GroupAddUnit(udg_Wgf_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call CreateNUnitsAtLoc(1,'h0BL',udg_Wgf_Own,udg_Wgf_Loc[0],GetRandomReal(0,360.))call GroupAddUnit(udg_Wgf_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call CreateNUnitsAtLoc(1,'h0BL',udg_Wgf_Own,udg_Wgf_Loc[0],GetRandomReal(0,360.))call GroupAddUnit(udg_Wgf_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call CreateNUnitsAtLoc(1,'h0BL',udg_Wgf_Own,udg_Wgf_Loc[0],GetRandomReal(0,360.))call GroupAddUnit(udg_Wgf_GroupDummy,bj_lastCreatedUnit)
call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call CreateNUnitsAtLoc(1,'h0BA',udg_Wgf_Own,udg_Wgf_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.4,1.4,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h0BJ',udg_Wgf_Own,udg_Wgf_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.6)call EnumDestructablesInCircleBJ(udg_Wgf_Real[3],udg_Wgf_Loc[0],function TreeKiller)
set udg_Wgf_Group=DynamicCreateGroup2(udg_Wgf_Loc[0],udg_Wgf_Real[2],udg_Wgf_Own,udg_Wgf_Group2)
call RemoveLocation(udg_Wgf_Loc[0])set udg_Wgf_Loc[0]=nullcall ForGroupBJ(udg_Wgf_Group,function Trig_WgfL_Func001Func026A)call DestroyGroup(udg_Wgf_Group)
set udg_Wgf_Group=nullset udg_Wgf_Int[0]=(udg_Wgf_Int[0]+1)else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Wgf_Group2)call TriggerSleepAction(.8)set udg_Wgf_Group=CreateGroup()call GroupAddGroup(udg_Wgf_GroupDummy,udg_Wgf_Group)
call GroupClear(udg_Wgf_GroupDummy)call ForGroupBJ(udg_Wgf_Group,function Trig_WgfL_Func001Func037A)call DestroyGroup(udg_Wgf_Group)
set udg_Wgf_Group=nullset udg_Wgf_Own=null
set udg_Wgf_Unit=nullset udg_Wgf_Real[0]=.0set udg_Wgf_Real[1]=.0set udg_Wgf_Real[2]=.0set udg_Wgf_Real[3]=.0set udg_Wgf_X=.0
set udg_Wgf_Y=.0
set udg_Wgf_Int[0]=0
set udg_Wgf_Int[1]=0
endifendfunctionfunction InitTrig_WgfL takes nothing returns nothing
set gg_trg_WgfL=CreateTrigger()call DisableTrigger(gg_trg_WgfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WgfL,.04)call TriggerAddAction(gg_trg_WgfL,function Trig_WgfL_Actions)endfunctionfunction Trig_Wood_Destruction_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EA')endfunctionfunction Trig_Wood_Destruction_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local unit pickedlocal real array rlocal integer ilocal location loclocal player p=GetOwningPlayer(u)local group glocal group g_dummy=CreateGroup()set r[0]=GetUnitFacing(u)set r[1]=72.
set r[2]=(400.+((2.5+(I2R(GetUnitAbilityLevel(u,'A0EA'))*.5))*I2R(GetHeroStr(u,true))))call DisplayText("Mokuton: Jurin Taiho",u,.023,false,$FF,$FF,$FF,$FF)call TriggerSleepAction(.01)
set i=0set loc=GetUnitLoc(u)loop
exitwhen i>3
call CreateNUnitsAtLoc(1,'h0C2',p,loc,(r[0]+r[1]))call GroupAddUnit(g_dummy,bj_lastCreatedUnit)set r[1]=(r[1]+120.)
set i=i+1endloopcall CreateNUnitsAtLoc(1,'h0C3',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h0BX',p,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.1,2.1,2.1)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set g=DynamicCreateGroup(loc,350.,p)
call RemoveLocation(loc)
set loc=null
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(u,picked,r[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set picked=nullendloopcall DestroyGroup(g)
set g=nullcall TriggerSleepAction(.2)set g=CreateGroup()call GroupAddGroup(g_dummy,g)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call SetUnitAnimation(picked,"death")call UnitApplyTimedLife(picked,'BTLF',2.)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall DestroyGroup(g_dummy)set g_dummy=null
set u=nullset p=nullset i=0set r[0]=.0set r[1]=.0set r[2]=.0endfunctionfunction InitTrig_Wood_Destruction takes nothing returns nothing
set gg_trg_Wood_Destruction=CreateTrigger()call TriggerAddCondition(gg_trg_Wood_Destruction,Condition(function Trig_Wood_Destruction_Conditions))call TriggerAddAction(gg_trg_Wood_Destruction,function Trig_Wood_Destruction_Actions)endfunctionfunction Trig_Rmg_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EB')endfunctionfunction Trig_Rmg_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit array dummylocal unit pickedlocal real array rlocal location loclocal integer ilocal integer array redlocal integer array greenlocal integer array blue
local string array anim_birthlocal string array anim_deathlocal group glocal player p=GetOwningPlayer(u)set r[0]=GetUnitFacing(u)set r[1]=250.set r[2]=270.set r[3]=300.set r[4]=(240.+(60.*I2R(GetUnitAbilityLevel(u,'A0EB'))))
set anim_birth[0]="spell one"set anim_birth[1]="spell two"set anim_birth[2]="spell three"set anim_birth[3]="spell four"set anim_birth[4]="spell five"set anim_death[0]="death one"set anim_death[1]="death two"set anim_death[2]="death three"set anim_death[3]="death four"set anim_death[4]="death five"set red[0]=$FFset red[1]=0
set red[2]=0
set red[3]=$E5set red[4]=$FFset green[0]=$87
set green[1]=$FF
set green[2]=$96
set green[3]=89set green[4]=0set blue[0]=$Dset blue[1]=69set blue[2]=$FFset blue[3]=$C8set blue[4]=0call DisplayText("Kuchiyose: Goju Rashomon",u,.023,true,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Hashirama\\Rashomon.wav",GetUnitX(u),GetUnitY(u))
set r[5]=GetUnitX(u)
set r[6]=GetUnitY(u)
set i=0loop
exitwhen i>4
set r[5]=r[5]+r[1]*Cos(r[0]*bj_DEGTORAD)
set r[6]=r[6]+r[1]*Sin(r[0]*bj_DEGTORAD)
set dummy[i]=CreateUnit(p,'h0C4',r[5],r[6],r[0])
call SetUnitTimeScale(dummy[i],2.)call SetUnitAnimation(dummy[i],anim_birth[i])set loc=Location(r[5],r[6])call CreateNUnitsAtLoc(1,'h096',p,loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,red[i],green[i],blue[i],$FF)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h0C5',p,loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,red[i],green[i],blue[i],$FF)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call CreateNUnitsAtLoc(1,'h0BX',p,loc,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set g=DynamicCreateGroup(loc,r[3],p)
call EnumDestructablesInCircleBJ(r[3],loc,function TreeKiller)call RemoveLocation(loc)
set loc=null
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(u,picked,r[4],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set picked=nullendloopcall DestroyGroup(g)
set g=nullset i=i+1call TriggerSleepAction(.1)endloopcall TriggerSleepAction(3.)set i=0loop
exitwhen i>4
call SetUnitTimeScale(dummy[i],.7)call SetUnitAnimation(dummy[i],anim_death[i])call UnitApplyTimedLife(dummy[i],'BTLF',.5)set dummy[i]=nullset i=i+1endloopset u=nullset p=nullset anim_birth[0]=nullset anim_birth[1]=nullset anim_birth[2]=nullset anim_birth[3]=nullset anim_birth[4]=nullset anim_death[0]=nullset anim_death[1]=nullset anim_death[2]=nullset anim_death[3]=nullset anim_death[4]=nullendfunctionfunction InitTrig_Five_Rashomon takes nothing returns nothingset gg_trg_Five_Rashomon=CreateTrigger()
call TriggerAddCondition(gg_trg_Five_Rashomon,Condition(function Trig_Rmg_Conditions))call TriggerAddAction(gg_trg_Five_Rashomon,function Trig_Rmg_Actions)endfunctionfunction Trig_Wdm_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0E8')endfunctionfunction Trig_Wdm_Func020A takes nothing returns nothing
call UnitDamageTarget(udg_Wdm_Unit,GetEnumUnit(),udg_Wdm_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endfunctionfunction Trig_Wdm_Func026A takes nothing returns nothing
local unit u=GetEnumUnit()local location loccall UnitDamageTarget(udg_Wdm_Unit,u,udg_Wdm_Real[3],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(u)>0)thenset loc=GetUnitLoc(u)call CreateNUnitsAtLoc(1,'u003',udg_Wdm_Own,loc,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0E9')call IssueTargetOrderById(bj_lastCreatedUnit,$D00CB,u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call RemoveLocation(loc)
set loc=null
endifset u=nullendfunctionfunction Trig_Wdm_Actions takes nothing returns nothingset udg_Wdm_Unit=GetTriggerUnit()set udg_Wdm_Real[0]=1600.set udg_Wdm_Real[1]=1000.set udg_Wdm_Real[2]=(9.*I2R(GetHeroStr(udg_Wdm_Unit,true)))set udg_Wdm_Real[3]=(450.+(150.*I2R(GetUnitAbilityLevel(udg_Wdm_Unit,'A0E8'))))set udg_Wdm_Own=GetOwningPlayer(udg_Wdm_Unit)set udg_Wdm_Loc[0]=GetUnitLoc(udg_Wdm_Unit)call CreateNUnitsAtLoc(1,'h0C0',udg_Wdm_Own,udg_Wdm_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h0C0',udg_Wdm_Own,udg_Wdm_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h034',udg_Wdm_Own,udg_Wdm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,8.,8.,8.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call CreateNUnitsAtLoc(1,'h034',udg_Wdm_Own,udg_Wdm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,8.,8.,8.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Wdm_Rect=RectFromCenterSizeBJ(udg_Wdm_Loc[0],udg_Wdm_Real[0],udg_Wdm_Real[0])set udg_Wdm_Group=DynamicCreateGroup(udg_Wdm_Loc[0],400.,udg_Wdm_Own)call ForGroupBJ(udg_Wdm_Group,function Trig_Wdm_Func020A)call DestroyGroup(udg_Wdm_Group)
set udg_Wdm_Group=nullset udg_Wdm_Group=DynamicCreateGroup(udg_Wdm_Loc[0],udg_Wdm_Real[1],udg_Wdm_Own)
call RemoveLocation(udg_Wdm_Loc[0])set udg_Wdm_Loc[0]=nullcall ForGroupBJ(udg_Wdm_Group,function Trig_Wdm_Func026A)call DestroyGroup(udg_Wdm_Group)
set udg_Wdm_Group=nullcall DisplayText("Mokuton Hijutsu: Jukai Kotan",udg_Wdm_Unit,.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Hashirama\\JukaiKotan.wav",GetUnitX(udg_Wdm_Unit),GetUnitY(udg_Wdm_Unit))
set udg_Wdm_Int=0call EnableTrigger(gg_trg_Wdm_L)
endfunctionfunction InitTrig_Wdm takes nothing returns nothingset gg_trg_Wdm=CreateTrigger()call TriggerAddCondition(gg_trg_Wdm,Condition(function Trig_Wdm_Conditions))
call TriggerAddAction(gg_trg_Wdm,function Trig_Wdm_Actions)endfunctionfunction Trig_Wdm_L_Actions takes nothing returns nothinglocal unit pickedif(udg_Wdm_Int<75)thenset udg_Wdm_Real[4]=GetRandomReal(1.,1.7)set udg_Wdm_Loc[0]=GetRandomLocInRect(udg_Wdm_Rect)call CreateNUnitsAtLoc(1,'h0C1',udg_Wdm_Own,udg_Wdm_Loc[0],GetRandomReal(0,360))
call GroupAddUnit(udg_Wdm_GroupDummy,bj_lastCreatedUnit)
call UnitHideSelect(bj_lastCreatedUnit)call SetUnitScale(bj_lastCreatedUnit,udg_Wdm_Real[4],udg_Wdm_Real[4],udg_Wdm_Real[4])call SetUnitTimeScale(bj_lastCreatedUnit,50.)call SetUnitAnimation(bj_lastCreatedUnit,"birth")call CreateNUnitsAtLoc(1,'h0BA',udg_Wdm_Own,udg_Wdm_Loc[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(udg_Wdm_Loc[0])set udg_Wdm_Loc[0]=nullset udg_Wdm_Int=(udg_Wdm_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveRect(udg_Wdm_Rect)set udg_Wdm_Rect=nullset udg_Wdm_Own=null
set udg_Wdm_Unit=nullset udg_Wdm_Real[0]=.0set udg_Wdm_Real[1]=.0set udg_Wdm_Real[2]=.0set udg_Wdm_Real[3]=.0set udg_Wdm_Real[4]=.0set udg_Wdm_Int=0call TriggerSleepAction(3.)set udg_Wdm_Group=CreateGroup()call GroupAddGroup(udg_Wdm_GroupDummy,udg_Wdm_Group)
call GroupClear(udg_Wdm_GroupDummy)loop
set picked=FirstOfGroup(udg_Wdm_Group)exitwhen picked==nullcall GroupRemoveUnit(udg_Wdm_Group,picked)call RemoveUnit(picked)set picked=nullendloopcall DestroyGroup(udg_Wdm_Group)
set udg_Wdm_Group=nullendifendfunctionfunction InitTrig_Wdm_L takes nothing returns nothingset gg_trg_Wdm_L=CreateTrigger()
call DisableTrigger(gg_trg_Wdm_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Wdm_L,.05)
call TriggerAddAction(gg_trg_Wdm_L,function Trig_Wdm_L_Actions)endfunctionfunction Trig_Tmk_Cond takes nothing returns boolean
return(GetSpellAbilityId()=='A05I')endfunctionfunction Trig_Wmk_Actions takes nothing returns nothinglocal real x
local real y
local integer array unitType
local integer countset udg_Wmk_Unit[0]=GetTriggerUnit()
set udg_Wmk_Unit[1]=GetSpellTargetUnit()
set udg_Wmk_Loc[0]=GetUnitLoc(udg_Wmk_Unit[0])set udg_Wmk_Loc[1]=GetUnitLoc(udg_Wmk_Unit[1])set udg_Wmk_Real[0]=AngleBetweenPoints(udg_Wmk_Loc[0],udg_Wmk_Loc[1])set udg_Wmk_Own=GetOwningPlayer(udg_Wmk_Unit[0])
set udg_Wmk_Unit[2]=CreateUnit(udg_Wmk_Own,'h0BM',GetLocationX(udg_Wmk_Loc[0]),GetLocationY(udg_Wmk_Loc[0]),udg_Wmk_Real[0])
set udg_Wmk_Loc[2]=PolarProjectionBJ(udg_Wmk_Loc[1],-910.,udg_Wmk_Real[0])call RemoveLocation(udg_Wmk_Loc[0])set udg_Wmk_Loc[0]=nullset x=GetLocationX(udg_Wmk_Loc[1])set y=GetLocationY(udg_Wmk_Loc[1])call RemoveLocation(udg_Wmk_Loc[1])set udg_Wmk_Loc[1]=nullcall SetUnitInvulnerable(udg_Wmk_Unit[0],true)call SetUnitInvulnerable(udg_Wmk_Unit[1],true)call PauseSystem(udg_Wmk_Unit[0],true)call PauseSystem(udg_Wmk_Unit[1],true)call SetUnitAnimation(udg_Wmk_Unit[0],"spell two")set udg_Wmk_Real[1]=500.
set udg_Wmk_Real[2]=300.
set udg_Wmk_Real[3]=(2000.+((I2R(GetUnitAbilityLevel(udg_Wmk_Unit[0],'A05I'))*10.)*I2R(GetHeroStr(udg_Wmk_Unit[0],false))))set udg_Wmk_Real[4]=(udg_Wmk_Real[3]/ 40.)set udg_Wmk_Unit[3]=CreateUnit(udg_Wmk_Own,'h0BO',GetLocationX(udg_Wmk_Loc[2]),GetLocationY(udg_Wmk_Loc[2]),udg_Wmk_Real[0])
call RemoveLocation(udg_Wmk_Loc[2])set udg_Wmk_Loc[2]=nullcall SetUnitTimeScale(udg_Wmk_Unit[3],1.4)call DisplayText("Senpo Mokuton: Shin Susenju",udg_Wmk_Unit[0],.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\HashiramaBuddha.mp3")set unitType[0]='h0BP'set unitType[1]='h0BQ'set unitType[2]='h0BR'set unitType[3]='h0BS'set unitType[4]='h0BT'set unitType[5]='h0BU'set unitType[6]='h0BV'set unitType[7]='h0BW'set count=0loop
set udg_Wmk_Loc[0]=Location(x,y)
set udg_Wmk_Loc[1]=PolarProjectionBJ(udg_Wmk_Loc[0],-830.-(I2R(udg_Wmk_Int[0])*30.),udg_Wmk_Real[0])
call RemoveLocation(udg_Wmk_Loc[0])set udg_Wmk_Loc[0]=nullset udg_Wmk_Loc[2]=PolarProjectionBJ(udg_Wmk_Loc[1],-18.,udg_Wmk_Real[0]+90.)set udg_Wmk_Loc[3]=PolarProjectionBJ(udg_Wmk_Loc[1],18.,udg_Wmk_Real[0]+90.)
call RemoveLocation(udg_Wmk_Loc[1])set udg_Wmk_Loc[1]=nullset udg_Wmk_Int[1]=0
loop
if(udg_Wmk_Int[1]<2)then
call CreateNUnitsAtLoc(1,'h0BN',udg_Wmk_Own,udg_Wmk_Loc[2],udg_Wmk_Real[0])set udg_Wmk_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,unitType[count],udg_Wmk_Own,udg_Wmk_Loc[2],udg_Wmk_Real[0])
set udg_Wmk_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,unitType[count],udg_Wmk_Own,udg_Wmk_Loc[2],udg_Wmk_Real[0])
set udg_Wmk_Unit[6]=bj_lastCreatedUnitelse
call CreateNUnitsAtLoc(1,'h0BN',udg_Wmk_Own,udg_Wmk_Loc[3],udg_Wmk_Real[0])set udg_Wmk_Unit[4]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,unitType[count],udg_Wmk_Own,udg_Wmk_Loc[3],udg_Wmk_Real[0])
set udg_Wmk_Unit[5]=bj_lastCreatedUnitcall CreateNUnitsAtLoc(1,unitType[count],udg_Wmk_Own,udg_Wmk_Loc[3],udg_Wmk_Real[0])
set udg_Wmk_Unit[6]=bj_lastCreatedUnitendifcall SetUnitTimeScale(udg_Wmk_Unit[4],.36)call UnitApplyTimedLife(udg_Wmk_Unit[4],'BTLF',4.)call GroupAddUnit(udg_Wmk_GroupDummy,udg_Wmk_Unit[5])call GroupAddUnit(udg_Wmk_GroupDummy,udg_Wmk_Unit[6])call SetUnitFlyHeight(udg_Wmk_Unit[6],150.,.0)set udg_Wmk_Unit[4]=null
set udg_Wmk_Unit[5]=null
set udg_Wmk_Unit[6]=null
set count=count+1set udg_Wmk_Int[1]=udg_Wmk_Int[1]+1exitwhen(udg_Wmk_Int[1]>3)endloopcall RemoveLocation(udg_Wmk_Loc[2])set udg_Wmk_Loc[2]=nullcall RemoveLocation(udg_Wmk_Loc[3])set udg_Wmk_Loc[3]=nullset udg_Wmk_Int[0]=udg_Wmk_Int[0]+1exitwhen(udg_Wmk_Int[0]>2)endloopcall TriggerSleepAction(1.2)
call SetUnitAnimation(udg_Wmk_Unit[3],"attack")call TriggerSleepAction(.5)set udg_Wmk_Group=CreateGroup()call GroupAddGroup(udg_Wmk_GroupDummy,udg_Wmk_Group)
loop
set udg_Wmk_Unit[4]=FirstOfGroup(udg_Wmk_Group)exitwhen udg_Wmk_Unit[4]==nullcall GroupRemoveUnit(udg_Wmk_Group,udg_Wmk_Unit[4])call SetUnitAnimation(udg_Wmk_Unit[4],"attack")call SetUnitTimeScale(udg_Wmk_Unit[4],GetRandomReal(3.,4.5))
set udg_Wmk_Unit[4]=null
endloopcall DestroyGroup(udg_Wmk_Group)
set udg_Wmk_Group=nullset udg_Wmk_Bool=trueset udg_Wmk_Rect=Rect(x-udg_Wmk_Real[1]*.5,y-udg_Wmk_Real[1]*.5,x+udg_Wmk_Real[1]*.5,y+udg_Wmk_Real[1]*.5)set udg_Wmk_Int[0]=30call EnableTrigger(gg_trg_WmkL)endfunctionfunction InitTrig_Wmk takes nothing returns nothingset gg_trg_Wmk=CreateTrigger()call TriggerAddCondition(gg_trg_Wmk,Condition(function Trig_Tmk_Cond))call TriggerAddAction(gg_trg_Wmk,function Trig_Wmk_Actions)endfunctionfunction WmkGroupCond takes nothing returns booleanreturn IsUnitInGroup(GetFilterUnit(),udg_Wdm_GroupDummy)
endfunctionfunction Trig_WmkL_Actions takes nothing returns nothing
if(udg_Wmk_Int[0]>0 and GetWidgetLife(udg_Wmk_Unit[1])>0)thenset udg_Wmk_Loc[0]=GetRandomLocInRect(udg_Wmk_Rect)call CreateNUnitsAtLoc(1,'h0BY',udg_Wmk_Own,udg_Wmk_Loc[0],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)call CreateNUnitsAtLoc(1,'h0BX',udg_Wmk_Own,udg_Wmk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(udg_Wmk_Bool)then
set udg_Wmk_Group=GetUnitsInRangeOfLocMatching(udg_Wmk_Real[2],udg_Wmk_Loc[0],Condition(function WmkGroupCond))loop
set udg_Wmk_Unit[4]=FirstOfGroup(udg_Wmk_Group)exitwhen udg_Wmk_Unit[4]==nullcall GroupRemoveUnit(udg_Wmk_Group,udg_Wmk_Unit[4])call GroupRemoveUnit(udg_Wdm_GroupDummy,udg_Wmk_Unit[4])
call SetUnitTimeScale(udg_Wmk_Unit[4],1.)call SetUnitAnimation(udg_Wmk_Unit[4],"death")call UnitAddAbility(udg_Wmk_Unit[4],'Aloc')call UnitApplyTimedLife(udg_Wmk_Unit[4],'BTLF',1.5)set udg_Wmk_Unit[4]=null
endloopcall DestroyGroup(udg_Wmk_Group)
set udg_Wmk_Group=nullcall EnumDestructablesInCircleBJ(udg_Wmk_Real[2],udg_Wmk_Loc[0],function TreeKiller)
call Dynamic_GroupShake(GetLocationX(udg_Wmk_Loc[0]),GetLocationY(udg_Wmk_Loc[0]),.5,7.,udg_CameraArea,null)
set udg_Wmk_Group=DynamicCreateGroup(udg_Wmk_Loc[0],udg_Wmk_Real[2],udg_Wmk_Own)
call RemoveLocation(udg_Wmk_Loc[0])set udg_Wmk_Loc[0]=nullloop
set udg_Wmk_Unit[4]=FirstOfGroup(udg_Wmk_Group)exitwhen udg_Wmk_Unit[4]==nullcall GroupRemoveUnit(udg_Wmk_Group,udg_Wmk_Unit[4])call UnitDamageTarget(udg_Wmk_Unit[0],udg_Wmk_Unit[4],udg_Wmk_Real[4],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_Wmk_Unit[4]=null
endloopcall DestroyGroup(udg_Wmk_Group)
set udg_Wmk_Group=nullset udg_Wmk_Bool=falseelse
call CreateNUnitsAtLoc(1,'h0BZ',udg_Wmk_Own,udg_Wmk_Loc[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)call RemoveLocation(udg_Wmk_Loc[0])set udg_Wmk_Loc[0]=nullset udg_Wmk_Bool=trueendifset udg_Wmk_Int[0]=(udg_Wmk_Int[0]-1)else
call DisableTrigger(GetTriggeringTrigger())call RemoveRect(udg_Wmk_Rect)set udg_Wmk_Rect=nullcall RemoveUnit(udg_Wmk_Unit[2])
call SetUnitAnimation(udg_Wmk_Unit[3],"death")call SetUnitTimeScale(udg_Wmk_Unit[3],.7)call UnitApplyTimedLife(udg_Wmk_Unit[3],'BTLF',2.)set udg_Wmk_Group=CreateGroup()call GroupAddGroup(udg_Wmk_GroupDummy,udg_Wmk_Group)
call GroupClear(udg_Wmk_GroupDummy)loop
set udg_Wmk_Unit[4]=FirstOfGroup(udg_Wmk_Group)exitwhen udg_Wmk_Unit[4]==nullcall GroupRemoveUnit(udg_Wmk_Group,udg_Wmk_Unit[4])call RemoveUnit(udg_Wmk_Unit[4])
set udg_Wmk_Unit[4]=null
endloopcall DestroyGroup(udg_Wmk_Group)
set udg_Wmk_Group=nullcall PauseSystem(udg_Wmk_Unit[0],false)call PauseSystem(udg_Wmk_Unit[1],false)call SetUnitInvulnerable(udg_Wmk_Unit[0],false)call SetUnitInvulnerable(udg_Wmk_Unit[1],false)call SetUnitAnimation(udg_Wmk_Unit[0],"stand")call DisplayText(I2S(R2I(udg_Wmk_Real[3]))+"!",udg_Wmk_Unit[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(udg_Wmk_Unit[0],udg_Wmk_Unit[1],udg_Wmk_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call RemoveRect(udg_Wmk_Rect)set udg_Wmk_Rect=nullset udg_Wmk_Own=null
set udg_Wmk_Unit[0]=null
set udg_Wmk_Unit[1]=null
set udg_Wmk_Unit[2]=null
set udg_Wmk_Unit[3]=null
set udg_Wmk_Real[0]=.0set udg_Wmk_Real[1]=.0set udg_Wmk_Real[2]=.0set udg_Wmk_Real[3]=.0set udg_Wmk_Real[4]=.0set udg_Wmk_Int[0]=0
set udg_Wmk_Int[0]=0
set udg_Wmk_Bool=falseendifendfunctionfunction InitTrig_WmkL takes nothing returns nothing
set gg_trg_WmkL=CreateTrigger()call DisableTrigger(gg_trg_WmkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WmkL,.09)call TriggerAddAction(gg_trg_WmkL,function Trig_WmkL_Actions)endfunctionfunction AI_Ulquiorra_AttackedType takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())=='U00G' or GetUnitTypeId(GetTriggerUnit())=='U00J')endfunctionfunction AI_Ulquiorra_AttackerType takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())=='U00G' or GetUnitTypeId(GetAttacker())=='U00J')
endfunctionfunction AI_Ulquiorra_AttackedCond takes nothing returns boolean
if(not AI_Ulquiorra_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Ulquiorra_AttackerCond takes nothing returns boolean
if(not AI_Ulquiorra_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Ulquiorra_CondOR takes nothing returns booleanreturn(AI_Ulquiorra_AttackedCond()or AI_Ulquiorra_AttackerCond())endfunctionfunction AI_Ulquiorra_Cond takes nothing returns boolean
if(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Ulquiorra_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Ulquiorra_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal location AI_Point1
local location AI_Point2
local location AI_Point3
local boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Ulquiorra_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0EN')call SelectHeroSkill(MySelf,'A0EL')call SelectHeroSkill(MySelf,'A0EK')call SelectHeroSkill(MySelf,'A0EI')call SelectHeroSkill(MySelf,'A0EH')endifset ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set AI_Point1=GetUnitLoc(MySelf)
set AI_Point2=GetUnitLoc(MyTarget)if(DistanceBetweenPoints(AI_Point1,AI_Point2)>499.)thencall IssuePointOrderByIdLoc(MySelf,$D022D,AI_Point2)
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullcall TriggerSleepAction(.5)else
call RemoveLocation(AI_Point1)set AI_Point1=nullcall RemoveLocation(AI_Point2)set AI_Point2=nullendifendifif(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D0080)endifif(GetUnitLifePercent(MySelf)<60.)thencall IssueImmediateOrderById(MySelf,$D0277)endifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thenif(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D02B7)endifset AI_Point3=GetUnitLoc(MyTarget)call IssuePointOrderByIdLoc(MySelf,$D00FA,AI_Point3)
call IssuePointOrderByIdLoc(MySelf,$D009D,AI_Point3)
call RemoveLocation(AI_Point3)set AI_Point3=nullendifendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Ulquiorra takes nothing returns nothing
set udg_AI_Trig[36]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[36],Condition(function AI_Ulquiorra_Cond))call TriggerAddAction(udg_AI_Trig[36],function AI_Ulquiorra_Act)
endfunctionfunction Trig_Memory_Erasing_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EH')endfunctionfunction Trig_Memory_Erasing_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit pickedlocal player p=GetOwningPlayer(u)local real area=350.
local real dmg=BasicDmg_Q(u,'A0EH',1)local group glocal location loc_pickedlocal location loc=GetUnitLoc(u)
call CreateNUnitsAtLoc(1,'h019',p,loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,50,$FF,40,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h019',p,loc,GetRandomReal(0,360))call SetUnitVertexColor(bj_lastCreatedUnit,50,$FF,40,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call CreateNUnitsAtLoc(1,'h00E',p,loc,bj_UNIT_FACING)call SetUnitVertexColor(bj_lastCreatedUnit,50,$FF,50,$FF)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call EnumDestructablesInCircleBJ(area,loc,function TreeKiller)set g=DynamicCreateGroup(loc,area,p)
call RemoveLocation(loc)
set loc=null
loop
set picked=FirstOfGroup(g)exitwhen picked==nullset loc_picked=GetUnitLoc(picked)call CreateNUnitsAtLoc(1,'h0C6',p,loc_picked,bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call RemoveLocation(loc_picked)set loc_picked=nullcall UnitDamageTarget(u,picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
call GroupRemoveUnit(g,picked)set picked=nullendloopcall DestroyGroup(g)
set g=nullset u=nullset p=nullendfunctionfunction InitTrig_Memory_Erasing takes nothing returns nothingset gg_trg_Memory_Erasing=CreateTrigger()call TriggerAddCondition(gg_trg_Memory_Erasing,Condition(function Trig_Memory_Erasing_Conditions))call TriggerAddAction(gg_trg_Memory_Erasing,function Trig_Memory_Erasing_Actions)endfunctionfunction Trig_Hoq_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EK')endfunctionfunction Trig_Hoq_Actions takes nothing returns nothingset udg_Hoq_Unit=GetTriggerUnit()call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",udg_Hoq_Unit,"origin"))set udg_Hoq_Real[1]=110.
set udg_Hoq_Real[2]=(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,udg_Hoq_Unit)/ 100.)set udg_Hoq_Real[3]=(GetUnitStateSwap(UNIT_STATE_MAX_MANA,udg_Hoq_Unit)/ 100.)call EnableTrigger(gg_trg_HoqL)endfunctionfunction InitTrig_Hoq takes nothing returns nothingset gg_trg_Hoq=CreateTrigger()call TriggerAddCondition(gg_trg_Hoq,Condition(function Trig_Hoq_Conditions))
call TriggerAddAction(gg_trg_Hoq,function Trig_Hoq_Actions)endfunctionfunction Trig_HoqL_Actions takes nothing returns nothing
set udg_Hoq_Real[1]=udg_Hoq_Real[1]-1if(udg_Hoq_Real[1]<1.)thencall DisableTrigger(GetTriggeringTrigger())call UnitRemoveAbility(udg_Hoq_Unit,'B03F')set udg_Hoq_Unit=nullset udg_Hoq_Real[1]=.0set udg_Hoq_Real[2]=.0set udg_Hoq_Real[3]=.0else
call SetUnitState(udg_Hoq_Unit,UNIT_STATE_LIFE,(GetUnitStateSwap(UNIT_STATE_LIFE,udg_Hoq_Unit))+udg_Hoq_Real[2])
call SetUnitState(udg_Hoq_Unit,UNIT_STATE_MANA,(GetUnitStateSwap(UNIT_STATE_MANA,udg_Hoq_Unit))+udg_Hoq_Real[3])
endifendfunctionfunction InitTrig_HoqL takes nothing returns nothing
set gg_trg_HoqL=CreateTrigger()call DisableTrigger(gg_trg_HoqL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HoqL,.04)call TriggerAddAction(gg_trg_HoqL,function Trig_HoqL_Actions)endfunctionfunction Trig_UrsInit_DieAct takes nothing returns nothinglocal unit u=GetDyingUnit()if(GetUnitAbilityLevel(u,'A0EM')>0)thencall UnitRemoveAbility(u,'A0EM')
call DisableTrigger(gg_trg_Urs_Atk)set udg_Urs_Unit=nullset udg_Urs_Bool=falseset udg_Urs_Delay=.0
endifset u=nullendfunctionfunction Trig_UrsInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0EL')endfunctionfunction Trig_UrsInit_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()local trigger t=CreateTrigger()call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0EM',false)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddAction(t,function Trig_UrsInit_DieAct)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Urs_Init takes nothing returns nothing
set gg_trg_Urs_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Urs_Init,Condition(function Trig_UrsInit_Conditions))call TriggerAddAction(gg_trg_Urs_Init,function Trig_UrsInit_Actions)
endfunctionfunction Trig_Urs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EL')endfunctionfunction Trig_Urs_Actions takes nothing returns nothinglocal player plocal location locset udg_Urs_Unit=nullset udg_Urs_Unit=GetTriggerUnit()if(GetUnitTypeId(udg_Urs_Unit)!='U00J')thenset udg_Urs_Delay=(.9-(.1*GetUnitAbilityLevel(udg_Urs_Unit,'A0EL')))
set udg_Urs_Bool=truecall EnableTrigger(gg_trg_Urs_Atk)set p=GetOwningPlayer(udg_Urs_Unit)call DisplayText("Resurreccion: Segunda Etapa",udg_Urs_Unit,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Ulquiorra\\SegundaEtapa.wav",GetUnitX(udg_Urs_Unit),GetUnitY(udg_Urs_Unit))set loc=GetUnitLoc(udg_Urs_Unit)
call CreateNUnitsAtLoc(1,'h0C9',p,loc,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call CreateNUnitsAtLoc(1,'h0CD',p,loc,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call TransfromAction(udg_Urs_Unit,GetLocationX(loc),GetLocationY(loc))call RemoveLocation(loc)
set loc=null
set p=nullcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Urs_Unit)
else
call UnitRemoveAbility(udg_Urs_Unit,'A0EM')set udg_Urs_Unit=nullset udg_Urs_Bool=falsecall DisableTrigger(gg_trg_Urs_Atk)set udg_Urs_Delay=.0
call TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(udg_Urs_Unit)
set udg_Urs_Unit=nullendifendfunctionfunction InitTrig_Urs takes nothing returns nothingset gg_trg_Urs=CreateTrigger()call TriggerAddCondition(gg_trg_Urs,Condition(function Trig_Urs_Conditions))
call TriggerAddAction(gg_trg_Urs,function Trig_Urs_Actions)endfunctionfunction Trig_Urs_Atk_Conditions takes nothing returns booleanreturn(GetAttacker()==udg_Urs_Unit)endfunctionfunction Trig_Urs_Atk_Actions takes nothing returns nothinglocal unit Atker=udg_Urs_Unitlocal unit Atked=GetTriggerUnit()local location array loc
call DisableTrigger(gg_trg_Urs_Atk)set loc[0]=GetUnitLoc(Atked)
set loc[1]=PolarProjectionBJ(loc[0],100.,GetRandomReal(0,360))set loc[2]=GetUnitLoc(Atker)
call CreateNUnitsAtLoc(1,'h03G',GetOwningPlayer(Atker),loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)if(IsTerrainPathable(GetLocationX(loc[1]),GetLocationY(loc[1]),PATHING_TYPE_WALKABILITY)==false)then
call EnumDestructablesInCircleBJ(150.,loc[1],function TreeKiller)call SetUnitX(Atker,GetLocationX(loc[1]))call SetUnitY(Atker,GetLocationY(loc[1]))call SetUnitFacing(Atker,AngleBetweenPoints(loc[1],loc[0]))else
call CreateNUnitsAtLoc(1,'h03G',GetOwningPlayer(Atker),loc[2],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(1.,'BTLF',bj_lastCreatedUnit)endifcall RemoveLocation(loc[0])set loc[0]=nullcall RemoveLocation(loc[1])set loc[1]=nullcall RemoveLocation(loc[2])set loc[2]=nullset Atked=nullset Atker=nullcall TriggerSleepAction(udg_Urs_Delay)if(udg_Urs_Bool)then
call EnableTrigger(gg_trg_Urs_Atk)endifendfunctionfunction InitTrig_Urs_Atk takes nothing returns nothingset gg_trg_Urs_Atk=CreateTrigger()call DisableTrigger(gg_trg_Urs_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Urs_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Urs_Atk,Condition(function Trig_Urs_Atk_Conditions))
call TriggerAddAction(gg_trg_Urs_Atk,function Trig_Urs_Atk_Actions)endfunctionfunction Lance_of_Lightning_Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EN')endfunctionfunction Lance_of_LightningL_Act takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer id=GetHandleId(t)local unit caster=LoadUnitHandle(udg_Lance_of_Lightning_Hash,id,0)local unit dummy=LoadUnitHandle(udg_Lance_of_Lightning_Hash,id,1)local unit pickedlocal player p=GetOwningPlayer(caster)local group glocal real array xylocal real speed=70.
local real facing=GetUnitFacing(dummy)local real arealocal real dmglocal integer array iset i[0]=LoadInteger(udg_Lance_of_Lightning_Hash,id,2)set i[0]=i[0]-1set xy[0]=LoadReal(udg_Lance_of_Lightning_Hash,id,3)
set xy[1]=LoadReal(udg_Lance_of_Lightning_Hash,id,4)
set xy[2]=GetUnitX(dummy)set xy[3]=GetUnitY(dummy)if(i[0]>0 and DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>100.)thencall SaveInteger(udg_Lance_of_Lightning_Hash,id,2,i[0])set xy[2]=PolarX(xy[2],speed,facing)
set xy[3]=PolarY(xy[3],speed,facing)
call SetUnitX(dummy,xy[2])call SetUnitY(dummy,xy[3])if(ModuloInteger(i[0],2)==0)then
set bj_lastCreatedUnit=CreateUnit(p,'h01M',xy[2],xy[3],facing)call SetUnitScale(bj_lastCreatedUnit,.7,.7,.7)call SetUnitFlyHeight(bj_lastCreatedUnit,160.,.0)call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.75)endifelse
call Dynamic_GroupShake(xy[2],xy[3],1.2,udg_CameraShakePow,udg_CameraArea,null)set bj_lastCreatedUnit=CreateUnit(p,'h0CC',xy[2],xy[3],facing)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0EO')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)set bj_lastCreatedUnit=CreateUnit(p,'h019',xy[2],xy[3],facing)call SetUnitScale(bj_lastCreatedUnit,7.,7.,7.)call SetUnitVertexColor(bj_lastCreatedUnit,0,$FF,0,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(p,'h0CB',xy[2],xy[3],facing)call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set i[0]=1loop
set speed=(I2R(i[0])*220.)set i[1]=1loop
set facing=(I2R(i[1])*60.)set bj_lastCreatedUnit=CreateUnit(p,'h01H',PolarX(xy[2],speed,facing),PolarY(xy[3],speed,facing),facing)
call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set i[1]=i[1]+1exitwhen i[1]>6endloopset i[0]=i[0]+1exitwhen i[0]>2endloopcall PauseTimer(t)call DestroyTimer(t)
call RemoveUnit(dummy)set area=700.set dmg=(1000.+((5.+(I2R(GetUnitAbilityLevel(caster,'A0EN'))*2.))*I2R(GetHeroAgi(caster,true))))
call DestroyTreeXY(xy[2],xy[3],area)
set g=CreateGroupXY(xy[2],xy[3],area,p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(dmg))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(caster,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set picked=nullendloopcall DestroyGroup(g)
set g=nullcall FlushChildHashtable(udg_Lance_of_Lightning_Hash,id)
endifset caster=nullset dummy=nullset p=nullset t=nullendfunctionfunction Lance_of_Lightning_Act takes nothing returns nothinglocal unit caster=GetTriggerUnit()local unit dummy
local real array xylocal real array rlocal real perlocal player plocal timer tlocal integer id
set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(caster)set xy[3]=GetUnitY(caster)set r[0]=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])
set xy[4]=PolarX(xy[2],-50.,89.+r[0])set xy[5]=PolarY(xy[3],-50.,89.+r[0])set r[0]=AngleBetweenXY(xy[4],xy[5],xy[0],xy[1])
set p=GetOwningPlayer(caster)set dummy=CreateUnit(p,'h0CA',xy[4],xy[5],r[0])call DisplayText("Lanza del Relampago",caster,.023,true,$DC,5,5,$FF)
call Dynamic_Sound("Sounds\\Lanza.mp3")set per=.04set t=CreateTimer()set id=GetHandleId(t)call SaveUnitHandle(udg_Lance_of_Lightning_Hash,id,0,caster)
call SaveUnitHandle(udg_Lance_of_Lightning_Hash,id,1,dummy)call SaveInteger(udg_Lance_of_Lightning_Hash,id,2,45)call SaveReal(udg_Lance_of_Lightning_Hash,id,3,xy[0])call SaveReal(udg_Lance_of_Lightning_Hash,id,4,xy[1])call TimerStart(t,per,true,function Lance_of_LightningL_Act)
set caster=nullset dummy=nullset p=nullendfunctionfunction InitTrig_Lance_of_Lightning takes nothing returns nothingset gg_trg_Lance_of_Lightning=CreateTrigger()call TriggerAddCondition(gg_trg_Lance_of_Lightning,Condition(function Lance_of_Lightning_Cond))call TriggerAddAction(gg_trg_Lance_of_Lightning,function Lance_of_Lightning_Act)
endfunctionfunction AI_Kizaru_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='N01W' or GetUnitTypeId(GetTriggerUnit())=='N01Z')endfunctionfunction AI_Kizaru_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='N01W' or GetUnitTypeId(GetAttacker())=='N01Z')
endfunctionfunction AI_Kizaru_AttackedCond takes nothing returns booleanif(not AI_Kizaru_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Kizaru_AttackerCond takes nothing returns booleanif(not AI_Kizaru_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Kizaru_CondOR takes nothing returns booleanreturn(AI_Kizaru_AttackedCond()or AI_Kizaru_AttackerCond())endfunctionfunction AI_Kizaru_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Kizaru_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Kizaru_Act takes nothing returns nothing
local unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Kizaru_AttackedType())then
set MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0EX')call SelectHeroSkill(MySelf,'A0EW')call SelectHeroSkill(MySelf,'A0ES')call SelectHeroSkill(MySelf,'A0EQ')call SelectHeroSkill(MySelf,'A0EP')endifset xy[2]=GetUnitX(MyTarget)
set xy[3]=GetUnitY(MyTarget)
set ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set xy[0]=GetUnitX(MySelf)set xy[1]=GetUnitY(MySelf)if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>499.)thencall IssuePointOrderById(MySelf,$D022D,xy[2],xy[3])call TriggerSleepAction(.5)endifendifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(MySelf,$D0065,MyTarget)if(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D02B7)call IssuePointOrderById(MySelf,$D0208,xy[2],xy[3])call IssueImmediateOrderById(MySelf,$D026C)endifendifcall IssuePointOrderById(MySelf,$D0270,xy[2],xy[3])endifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Kizaru takes nothing returns nothingset udg_AI_Trig[37]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[37],Condition(function AI_Kizaru_Cond))
call TriggerAddAction(udg_AI_Trig[37],function AI_Kizaru_Act)endfunctionfunction Trig_Lsc_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EP')endfunctionfunction Trig_Lsc_Actions takes nothing returns nothingset udg_Lsc_Unit=GetTriggerUnit()set udg_Lsc_XY[0]=GetSpellTargetX()set udg_Lsc_XY[1]=GetSpellTargetY()set udg_Lsc_XY[2]=GetUnitX(udg_Lsc_Unit)
set udg_Lsc_XY[3]=GetUnitY(udg_Lsc_Unit)
set udg_Lsc_Real[0]=AngleBetweenXY(udg_Lsc_XY[2],udg_Lsc_XY[3],udg_Lsc_XY[0],udg_Lsc_XY[1])call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Kizaru\\Laser.wav",GetUnitX(udg_Lsc_Unit),GetUnitY(udg_Lsc_Unit))set udg_Lsc_Real[1]=70.set udg_Lsc_XY[2]=PolarX(udg_Lsc_XY[2],udg_Lsc_Real[1],udg_Lsc_Real[0])set udg_Lsc_XY[3]=PolarY(udg_Lsc_XY[3],udg_Lsc_Real[1],udg_Lsc_Real[0])set udg_Lsc_Real[1]=33.set udg_Lsc_Real[2]=udg_Lsc_Real[0]-90.set udg_Lsc_XY[2]=PolarX(udg_Lsc_XY[2],udg_Lsc_Real[1],udg_Lsc_Real[2])set udg_Lsc_XY[3]=PolarY(udg_Lsc_XY[3],udg_Lsc_Real[1],udg_Lsc_Real[2])set udg_Lsc_Real[0]=AngleBetweenXY(udg_Lsc_XY[2],udg_Lsc_XY[3],udg_Lsc_XY[0],udg_Lsc_XY[1])set udg_Lsc_Own=GetOwningPlayer(udg_Lsc_Unit)set bj_lastCreatedUnit=CreateUnit(udg_Lsc_Own,'h0CE',udg_Lsc_XY[2],udg_Lsc_XY[3],udg_Lsc_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.4)set udg_Lsc_Real[1]=100.
set bj_lastCreatedUnit=CreateUnit(udg_Lsc_Own,'h0CG',PolarX(udg_Lsc_XY[2],udg_Lsc_Real[1],udg_Lsc_Real[0]),PolarY(udg_Lsc_XY[3],udg_Lsc_Real[1],udg_Lsc_Real[0]),(udg_Lsc_Real[0]-180.))
call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set udg_Lsc_Real[1]=160.
set udg_Lsc_Real[2]=90.set udg_Lsc_Real[3]=400.
set udg_Lsc_Real[4]=BasicDmg_Q(udg_Lsc_Unit,'A0EP',1)call EnableTrigger(gg_trg_LscL)endfunctionfunction InitTrig_Lsc takes nothing returns nothingset gg_trg_Lsc=CreateTrigger()call TriggerAddCondition(gg_trg_Lsc,Condition(function Trig_Lsc_Conditions))
call TriggerAddAction(gg_trg_Lsc,function Trig_Lsc_Actions)endfunctionfunction Trig_LscL_Actions takes nothing returns nothing
local unit pickedif(DistanceBetweenXY(udg_Lsc_XY[0],udg_Lsc_XY[1],udg_Lsc_XY[2],udg_Lsc_XY[3])>udg_Lsc_Real[1])thenset udg_Lsc_XY[2]=PolarX(udg_Lsc_XY[2],udg_Lsc_Real[2],udg_Lsc_Real[0])set udg_Lsc_XY[3]=PolarY(udg_Lsc_XY[3],udg_Lsc_Real[2],udg_Lsc_Real[0])set bj_lastCreatedUnit=CreateUnit(udg_Lsc_Own,'h0CF',udg_Lsc_XY[2],udg_Lsc_XY[3],udg_Lsc_Real[0])call GroupAddUnit(udg_Lsc_Group2,bj_lastCreatedUnit)
else
call DisableTrigger(GetTriggeringTrigger())set udg_Lsc_Group=CreateGroup()call GroupAddGroup(udg_Lsc_Group2,udg_Lsc_Group)
loop
set picked=FirstOfGroup(udg_Lsc_Group)exitwhen picked==nullcall GroupRemoveUnit(udg_Lsc_Group,picked)call RemoveUnit(picked)set picked=nullendloopcall DestroyGroup(udg_Lsc_Group)
set udg_Lsc_Group=nullset bj_lastCreatedUnit=CreateUnit(udg_Lsc_Own,'h02L',udg_Lsc_XY[0],udg_Lsc_XY[1],udg_Lsc_Real[0])call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)set bj_lastCreatedUnit=CreateUnit(udg_Lsc_Own,'h083',udg_Lsc_XY[0],udg_Lsc_XY[1],(udg_Lsc_Real[0]-180.))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',8.)call DestroyTreeXY(udg_Lsc_XY[0],udg_Lsc_XY[1],udg_Lsc_Real[3])set udg_Lsc_Group=CreateGroupXY(udg_Lsc_XY[0],udg_Lsc_XY[1],udg_Lsc_Real[3],udg_Lsc_Own)
loop
set picked=FirstOfGroup(udg_Lsc_Group)exitwhen picked==nullcall GroupRemoveUnit(udg_Lsc_Group,picked)call UnitDamageTarget(udg_Lsc_Unit,picked,udg_Lsc_Real[4],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(udg_Lsc_Group)
set udg_Lsc_Group=nullcall GroupClear(udg_Lsc_Group2)set udg_Lsc_Unit=nullset udg_Lsc_Own=null
set udg_Lsc_XY[0]=.0
set udg_Lsc_XY[1]=.0
set udg_Lsc_XY[2]=.0
set udg_Lsc_XY[3]=.0
set udg_Lsc_Real[0]=.0set udg_Lsc_Real[1]=.0set udg_Lsc_Real[2]=.0endifendfunctionfunction InitTrig_LscL takes nothing returns nothing
set gg_trg_LscL=CreateTrigger()call DisableTrigger(gg_trg_LscL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LscL,.03)call TriggerAddAction(gg_trg_LscL,function Trig_LscL_Actions)endfunctionfunction AmanoMurakumo___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==AmanoMurakumo___skId)endfunctionfunction AmanoMurakumo___DeathCond takes nothing returns boolean
if(GetUnitTypeId(GetDyingUnit())==AmanoMurakumo___morpType)thencall DisableTrigger(AmanoMurakumo___atkTrg)endifreturn false
endfunctionfunction AmanoMurakumo___AtkCond takes nothing returns booleanlocal unit atker=GetAttacker()local unit atked=GetTriggerUnit()if(GetUnitTypeId(atker)==AmanoMurakumo___morpType)and(GetRandomInt(0,99)<AmanoMurakumo___chacne)then
set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(atker),'u003',GetUnitX(atked),GetUnitY(atked),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A02M')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,atked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset atker=nullset atked=nullreturn false
endfunctionfunction AmanoMurakumo___Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!=AmanoMurakumo___morpType)thencall EnableTrigger(AmanoMurakumo___atkTrg)set p=GetOwningPlayer(u)
call DisplayText("Ama no Murakumo",u,.023,false,$FF,$FF,$FF,$FF)
set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h0CL',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h08W',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call TransfromAction(u,x,y)set p=nullelse
call DisableTrigger(AmanoMurakumo___atkTrg)endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction AmanoMurakumo___Init takes nothing returns nothingset gg_trg_Ama_no_Murakumo=CreateTrigger()call TriggerAddCondition(gg_trg_Ama_no_Murakumo,Condition(function AmanoMurakumo___Cond))call TriggerAddAction(gg_trg_Ama_no_Murakumo,function AmanoMurakumo___Act)set AmanoMurakumo___atkTrg=CreateTrigger()call DisableTrigger(AmanoMurakumo___atkTrg)call TriggerRegisterAnyUnitEventBJ(AmanoMurakumo___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(AmanoMurakumo___atkTrg,Condition(function AmanoMurakumo___AtkCond))
call TriggerAddCondition(Kizaru_Ama_no_MurakumoD,Condition(function AmanoMurakumo___DeathCond))endfunctionfunction Trig_Eight_Span_Mirror_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0ES')endfunctionfunction Trig_Eight_Span_Mirror_Actions takes nothing returns nothinglocal unit caster=GetTriggerUnit()local unit target=GetSpellTargetUnit()local unit array dummylocal unit pickedlocal group glocal group g_dummy=CreateGroup()local real array xylocal real array rlocal player plocal boolean array blocal integer ilocal integer slot=1
local integer sk_dummy='A0ET'set xy[0]=GetUnitX(caster)set xy[1]=GetUnitY(caster)set xy[2]=GetUnitX(target)set xy[3]=GetUnitY(target)set r[0]=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])
set r[1]=400.set r[2]=(600.+((3.+I2R(GetUnitAbilityLevel(caster,'A0ES')))*I2R(GetHeroAgi(caster,true))))set r[3]=22.
set xy[4]=PolarX(xy[0],r[3],r[0])set xy[5]=PolarY(xy[1],r[3],r[0])call PauseSystem(caster,true)call SetUnitAnimation(caster,"spell three")call DisplayText("Yata no Kagami",caster,.023,false,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_OnePiece+"\\Kizaru\\YatanoKagami.wav",GetUnitX(caster),GetUnitY(caster))set p=GetOwningPlayer(caster)set bj_lastCreatedUnit=CreateUnit(p,'h0CE',xy[0],xy[1],r[0])
call SetUnitScale(bj_lastCreatedUnit,.9,.9,.9)call GroupAddUnit(g_dummy,bj_lastCreatedUnit)set bj_lastCreatedUnit=CreateUnit(p,'h0CJ',xy[4],xy[5],r[0])
call SetUnitFlyHeight(bj_lastCreatedUnit,130.,.0)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call GroupAddUnit(g_dummy,bj_lastCreatedUnit)set dummy[1]=CreateUnit(p,'h0CN',xy[4],xy[5],r[0])call UnitHideSelect(dummy[1])call SetUnitVertexColor(dummy[1],$FF,$FF,$FF,0)call SetUnitFlyHeight(dummy[1],80.,.0)call GroupAddUnit(g_dummy,dummy[1])call UnitAddAbility(dummy[1],sk_dummy)set dummy[0]=CreateUnit(p,'h0CN',xy[2],xy[3],r[0])call UnitHideSelect(dummy[0])call SetUnitVertexColor(dummy[0],$FF,$FF,$FF,0)call SetUnitFlyHeight(dummy[0],170.,.0)call GroupAddUnit(g_dummy,dummy[0])set r[3]=(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])/ 500.)set i=R2I(r[3])if(i>0)thenif(GetRandomInt(0,1)==1)then
set b[0]=trueelse
set b[0]=falseendifif(GetRandomInt(0,1)==1)then
set b[1]=trueelse
set b[1]=falseendifset xy[4]=xy[0]set xy[5]=xy[1]set r[3]=250.loop
exitwhen(i<1)set i=i-1set slot=slot+1set xy[4]=PolarX(xy[4],r[3],r[0])set xy[5]=PolarY(xy[5],r[3],r[0])if(b[0])then
set b[0]=falseset r[4]=GetRandomReal(420,620)else
set b[0]=trueset r[4]=GetRandomReal(-420,-620)endifset xy[6]=PolarX(xy[4],r[4],r[0]-90.)set xy[7]=PolarY(xy[5],r[4],r[0]-90.)if(b[1])then
set b[1]=falseset r[4]=GetRandomReal(500,650)else
set b[1]=trueset r[4]=GetRandomReal($FA,470)endifset bj_lastCreatedUnit=CreateUnit(p,'h0CJ',xy[6],xy[7],r[0])
call SetUnitFlyHeight(bj_lastCreatedUnit,r[4],.0)call GroupAddUnit(g_dummy,bj_lastCreatedUnit)set dummy[slot]=CreateUnit(p,'h0CN',xy[6],xy[7],r[0])call UnitHideSelect(dummy[slot])
call SetUnitVertexColor(dummy[slot],$FF,$FF,$FF,0)call SetUnitFlyHeight(dummy[slot],r[4]-50.,.0)call GroupAddUnit(g_dummy,dummy[slot])call UnitAddAbility(dummy[slot],sk_dummy)call UnitRemoveAbility(dummy[slot-1],'Amov')
call IssueTargetOrderById(dummy[slot-1],$D0097,dummy[slot])set xy[4]=PolarX(xy[4],r[3],r[0])set xy[5]=PolarY(xy[5],r[3],r[0])call TriggerSleepAction(.01)
endloopendifcall UnitRemoveAbility(dummy[slot],'Amov')call IssueTargetOrderById(dummy[slot],$D0097,dummy[0])call TriggerSleepAction(.1)loop
set picked=FirstOfGroup(g_dummy)
exitwhen picked==nullcall GroupRemoveUnit(g_dummy,picked)
call RemoveUnit(picked)set picked=nullendloopcall DestroyGroup(g_dummy)set g_dummy=null
if(GetWidgetLife(caster)>0)thencall SetUnitPathing(caster,false)set bj_lastCreatedUnit=CreateUnit(p,'h0CK',xy[0],xy[1],r[0])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitX(caster,xy[2])call SetUnitY(caster,xy[3])if(GetWidgetLife(target)>0)thenset bj_lastCreatedUnit=CreateUnit(p,'h0CK',xy[2],xy[3],r[0])
call SetUnitFlyHeight(bj_lastCreatedUnit,170.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitTimeScale(caster,1.3)call SetUnitAnimation(caster,"spell four")call TriggerSleepAction(.18)
set bj_lastCreatedUnit=CreateUnit(p,'h02L',xy[2],xy[3],r[0])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)set bj_lastCreatedUnit=CreateUnit(p,'h0BX',xy[2],xy[3],r[0])
call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h08Q',xy[2],xy[3],r[0])
call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0EU')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.4)call DestroyTreeXY(xy[2],xy[3],r[1])
set g=CreateGroupXY(xy[2],xy[3],r[1],p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(caster,picked,r[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall SetUnitTimeScale(caster,1.)
call TriggerSleepAction(.01)
call SetUnitPathing(caster,true)
else
set bj_lastCreatedUnit=CreateUnit(p,'h0CK',xy[2],xy[3],r[0])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitAnimation(caster,"birth")call TriggerSleepAction(.1)endifendifcall PauseSystem(caster,false)set caster=nullset target=nullset p=nullloop
set dummy[slot]=null
set slot=slot-1exitwhen slot<0endloopendfunctionfunction InitTrig_Eight_Span_Mirror takes nothing returns nothingset gg_trg_Eight_Span_Mirror=CreateTrigger()
call TriggerAddCondition(gg_trg_Eight_Span_Mirror,Condition(function Trig_Eight_Span_Mirror_Conditions))
call TriggerAddAction(gg_trg_Eight_Span_Mirror,function Trig_Eight_Span_Mirror_Actions)endfunctionfunction LightRegeneration___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==LightRegeneration___skId)endfunctionfunction LightRegeneration___ActL takes nothing returns nothingif(LightRegeneration___i>0)and(GetUnitState(LightRegeneration___self,UNIT_STATE_LIFE)>0)then
set LightRegeneration___i=LightRegeneration___i-1call UnitRemoveBuffs(LightRegeneration___self,false,true)call SetUnitState(LightRegeneration___self,UNIT_STATE_LIFE,(GetUnitState(LightRegeneration___self,UNIT_STATE_LIFE)+LightRegeneration___healHP))call SetUnitState(LightRegeneration___self,UNIT_STATE_MANA,(GetUnitState(LightRegeneration___self,UNIT_STATE_MANA)+LightRegeneration___healMP))else
call PauseTimer(LightRegeneration___t)call DestroyTimer(LightRegeneration___t)
set LightRegeneration___t=nullcall UnitRemoveAbility(LightRegeneration___self,'B03H')set LightRegeneration___self=nullendifendfunctionfunction LightRegeneration___Act takes nothing returns nothingset LightRegeneration___self=GetTriggerUnit()set LightRegeneration___healHP=(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,LightRegeneration___self)/ 100.)set LightRegeneration___healMP=(GetUnitStateSwap(UNIT_STATE_MAX_MANA,LightRegeneration___self)/ 100.)set LightRegeneration___i='}'set LightRegeneration___t=CreateTimer()call TimerStart(LightRegeneration___t,.04,true,function LightRegeneration___ActL)endfunctionfunction LightRegeneration___Init takes nothing returns nothingset gg_trg_Light_Regeneration=CreateTrigger()call TriggerAddCondition(gg_trg_Light_Regeneration,Condition(function LightRegeneration___Cond))
call TriggerAddAction(gg_trg_Light_Regeneration,function LightRegeneration___Act)endfunctionfunction Trig_Cje_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EX')endfunctionfunction Trig_Cje_Actions takes nothing returns nothinglocal texttag ft
set udg_Cje_Unit=GetTriggerUnit()set udg_Cje_XY[0]=GetSpellTargetX()set udg_Cje_XY[1]=GetSpellTargetY()set udg_Cje_XY[2]=GetUnitX(udg_Cje_Unit)
set udg_Cje_XY[3]=GetUnitY(udg_Cje_Unit)
set udg_Cje_Skill='A0EY'
set udg_Cje_Real[0]=200.
set udg_Cje_Real[1]=(75.+((.7+(I2R(GetUnitAbilityLevel(udg_Cje_Unit,'A0EX'))*.2))*I2R(GetHeroAgi(udg_Cje_Unit,false))))set udg_Cje_Real[2]=AngleBetweenXY(udg_Cje_XY[2],udg_Cje_XY[3],udg_Cje_XY[0],udg_Cje_XY[1])set udg_Cje_Real[3]=600.
call PauseSystem(udg_Cje_Unit,true)call SetUnitAnimation(udg_Cje_Unit,"spell five")
call Dynamic_Sound("Sounds\\YasakaniMagatama.mp3")set ft=CreateTextTag()call SetTextTagTextBJ(ft,"Yasakani no Magatama",$A)call SetTextTagPos(ft,PolarX(udg_Cje_XY[2],-110.,.0),PolarY(udg_Cje_XY[3],-110.,.0),600.)call SetTextTagColorBJ(ft,86.,2.,2.,0)call SetTextTagFadepoint(ft,2)call SetTextTagPermanent(ft,false)call SetTextTagLifespan(ft,2.)set ft=nullset udg_Cje_Own=GetOwningPlayer(udg_Cje_Unit)set udg_Cje_Rect=CreateRectXY(udg_Cje_XY[0],udg_Cje_XY[1],udg_Cje_Real[3],udg_Cje_Real[3])set udg_Cje_Int=50call EnableTrigger(gg_trg_CjeL)call EnableTrigger(gg_trg_CjeC)endfunctionfunction InitTrig_Cje takes nothing returns nothingset gg_trg_Cje=CreateTrigger()call TriggerAddCondition(gg_trg_Cje,Condition(function Trig_Cje_Conditions))
call TriggerAddAction(gg_trg_Cje,function Trig_Cje_Actions)endfunctionfunction Trig_CjeL_Actions takes nothing returns nothing
local integer id
local integer ilocal unit last_dummyif(GetWidgetLife(udg_Cje_Unit)>0 and udg_Cje_Int>0)thenset udg_Cje_Int=udg_Cje_Int-1if(ModuloInteger(udg_Cje_Int,2)==0)thenset bj_lastCreatedUnit=CreateUnit(udg_Cje_Own,'h0CK',udg_Cje_XY[2],udg_Cje_XY[3],udg_Cje_Real[0])call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call SetUnitFlyHeight(bj_lastCreatedUnit,330.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset i=2loop
set udg_Cje_XY[4]=RandomXInRect(udg_Cje_Rect)set udg_Cje_XY[5]=RandomYInRect(udg_Cje_Rect)set last_dummy=CreateUnit(udg_Cje_Own,'h000',udg_Cje_XY[4],udg_Cje_XY[5],bj_UNIT_FACING)
call GroupAddUnit(udg_Cje_GroupDummy,last_dummy)
call UnitHideSelect(last_dummy)set bj_lastCreatedUnit=CreateUnit(udg_Cje_Own,'h000',udg_Cje_XY[2],udg_Cje_XY[3],AngleBetweenXY(udg_Cje_XY[2],udg_Cje_XY[3],udg_Cje_XY[4],udg_Cje_XY[5]))call SetUnitScale(bj_lastCreatedUnit,.5,.5,.5)call SetUnitFlyHeight(bj_lastCreatedUnit,GetRandomReal(350.,550.),.0)call UnitAddAbility(bj_lastCreatedUnit,udg_Cje_Skill)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,last_dummy)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set last_dummy=nullset i=i-1exitwhen i<1
endloopelse
call DisableTrigger(gg_trg_CjeL)
call PauseSystem(udg_Cje_Unit,false)
call SetUnitAnimation(udg_Cje_Unit,"stand")call TriggerSleepAction(.1)call DisableTrigger(gg_trg_CjeC)
call RemoveRect(udg_Cje_Rect)set udg_Cje_Rect=nullset udg_Cje_Unit=nullset udg_Cje_Own=null
set udg_Cje_XY[0]=.0
set udg_Cje_XY[1]=.0
set udg_Cje_XY[2]=.0
set udg_Cje_XY[3]=.0
set udg_Cje_XY[4]=.0
set udg_Cje_XY[5]=.0
set udg_Cje_Real[0]=.0set udg_Cje_Real[1]=.0set udg_Cje_Real[2]=.0set udg_Cje_Real[3]=.0set udg_Cje_Skill=0set udg_Cje_Int=0endifendfunctionfunction InitTrig_CjeL takes nothing returns nothing
set gg_trg_CjeL=CreateTrigger()call DisableTrigger(gg_trg_CjeL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CjeL,.08)call TriggerAddAction(gg_trg_CjeL,function Trig_CjeL_Actions)endfunctionfunction Trig_CjeC_Conditions takes nothing returns booleanreturn(IsUnitInGroup(GetSpellTargetUnit(),udg_Cje_GroupDummy))endfunctionfunction Trig_CjeC_Actions takes nothing returns nothing
local unit caster=GetTriggerUnit()local unit target=GetSpellTargetUnit()local unit pickedlocal real array xlocal real array ylocal real delay
local group gset x[0]=GetUnitX(caster)set y[0]=GetUnitY(caster)set x[1]=GetUnitX(target)set y[1]=GetUnitY(target)set delay=(DistanceBetweenXY(x[0],y[0],x[1],y[1])/ 5000.)call RemoveUnit(target)set caster=nullset target=nullcall TriggerSleepAction(delay)call TerrainDeformationRippleXY(.4,false,x[1],y[1],100.,100.,37,.5,512)set bj_lastCreatedUnit=CreateUnit(udg_Cje_Own,'h0CM',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(GetRandomInt(0,1)==1)then
set bj_lastCreatedUnit=CreateUnit(udg_Cje_Own,'h0BX',x[1],y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifcall DestroyTreeXY(x[1],y[1],udg_Cje_Real[0])set g=CreateGroupXY(x[1],y[1],udg_Cje_Real[0],udg_Cje_Own)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(udg_Cje_Unit,picked,udg_Cje_Real[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_CjeC takes nothing returns nothing
set gg_trg_CjeC=CreateTrigger()call DisableTrigger(gg_trg_CjeC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_CjeC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_CjeC,Condition(function Trig_CjeC_Conditions))call TriggerAddAction(gg_trg_CjeC,function Trig_CjeC_Actions)endfunctionfunction AI_Tobirama_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='O00B')endfunctionfunction AI_Tobirama_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='O00B')
endfunctionfunction AI_Tobirama_AttackedCond takes nothing returns booleanif(not AI_Tobirama_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Tobirama_AttackerCond takes nothing returns booleanif(not AI_Tobirama_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Tobirama_CondOR takes nothing returns booleanreturn(AI_Tobirama_AttackedCond()or AI_Tobirama_AttackerCond())endfunctionfunction AI_Tobirama_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Tobirama_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Tobirama_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Tobirama_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0F7')call SelectHeroSkill(MySelf,'A0F4')call SelectHeroSkill(MySelf,'A0F3')call SelectHeroSkill(MySelf,'A0F2')call SelectHeroSkill(MySelf,'A0F0')endifset xy[2]=GetUnitX(MyTarget)
set xy[3]=GetUnitY(MyTarget)
set ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set xy[0]=GetUnitX(MySelf)set xy[1]=GetUnitY(MySelf)if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>499.)thenset xy[0]=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])set xy[1]=190.set xy[4]=PolarX(xy[2],xy[1],xy[0])set xy[5]=PolarY(xy[3],xy[1],xy[0])call IssuePointOrderById(MySelf,$D00FA,xy[4],xy[5])call TriggerSleepAction(.5)endifendifcall IssuePointOrderById(MySelf,$D009D,xy[2],xy[3])if(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssuePointOrderById(MySelf,$D0271,xy[2],xy[3])if(AI_Attacker)thencall IssuePointOrderById(MySelf,$D0270,xy[2],xy[3])call IssueImmediateOrderById(MySelf,$D0277)endifcall IssueTargetOrderById(MySelf,$D0106,MyTarget)endifendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Tobirama takes nothing returns nothingset udg_AI_Trig[38]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[38],Condition(function AI_Tobirama_Cond))call TriggerAddAction(udg_AI_Trig[38],function AI_Tobirama_Act)endfunctionfunction Trig_Wvf_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0EZ')endfunctionfunction Trig_Wvf_Actions takes nothing returns nothingset udg_Wvf_Unit=GetTriggerUnit()set udg_Wvf_XY[0]=GetSpellTargetX()set udg_Wvf_XY[1]=GetSpellTargetY()set udg_Wvf_XY[2]=GetUnitX(udg_Wvf_Unit)
set udg_Wvf_XY[3]=GetUnitY(udg_Wvf_Unit)
set udg_Wvf_Real[0]=AngleBetweenXY(udg_Wvf_XY[2],udg_Wvf_XY[3],udg_Wvf_XY[0],udg_Wvf_XY[1])set udg_Wvf_Real[1]=70.set udg_Wvf_Real[2]=200.
set udg_Wvf_Real[3]=(3.*I2R(GetHeroAgi(udg_Wvf_Unit,true)))set udg_Wvf_Int=R2I(DistanceBetweenXY(udg_Wvf_XY[2],udg_Wvf_XY[3],udg_Wvf_XY[0],udg_Wvf_XY[1])/ udg_Wvf_Real[1])
set udg_Wvf_Own=GetOwningPlayer(udg_Wvf_Unit)call EnableTrigger(gg_trg_WvfL)endfunctionfunction InitTrig_Wvf takes nothing returns nothingset gg_trg_Wvf=CreateTrigger()call TriggerAddCondition(gg_trg_Wvf,Condition(function Trig_Wvf_Conditions))
call TriggerAddAction(gg_trg_Wvf,function Trig_Wvf_Actions)endfunctionfunction Trig_WvfL_Actions takes nothing returns nothing
local group glocal unit pickedif(udg_Wvf_Int>0 and GetWidgetLife(udg_Wvf_Unit)>0)thenset udg_Wvf_XY[2]=PolarX(udg_Wvf_XY[2],udg_Wvf_Real[1],udg_Wvf_Real[0])set udg_Wvf_XY[3]=PolarY(udg_Wvf_XY[3],udg_Wvf_Real[1],udg_Wvf_Real[0])set bj_lastCreatedUnit=CreateUnit(udg_Wvf_Own,'h0AD',udg_Wvf_XY[2],udg_Wvf_XY[3],udg_Wvf_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.7)call DestroyTreeXY(udg_Wvf_XY[2],udg_Wvf_XY[3],udg_Wvf_Real[2])call UnitMoveXY(udg_Wvf_Unit,udg_Wvf_XY[2],udg_Wvf_XY[3])set g=CreateGroupXY2(udg_Wvf_XY[2],udg_Wvf_XY[3],udg_Wvf_Real[2],udg_Wvf_Own,udg_Wvf_Group2)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call GroupAddUnit(udg_Wvf_Group2,picked)
call UnitDamageTarget(udg_Wvf_Unit,picked,udg_Wvf_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset udg_Wvf_Int=udg_Wvf_Int-1else
call DisableTrigger(GetTriggeringTrigger())call GroupClear(udg_Wvf_Group2)set udg_Wvf_Unit=nullset udg_Wvf_Own=null
set udg_Wvf_XY[0]=.0
set udg_Wvf_XY[1]=.0
set udg_Wvf_XY[2]=.0
set udg_Wvf_XY[3]=.0
set udg_Wvf_Real[0]=.0set udg_Wvf_Real[1]=.0set udg_Wvf_Real[2]=.0set udg_Wvf_Real[3]=.0set udg_Wvf_Int=0endifendfunctionfunction InitTrig_WvfL takes nothing returns nothing
set gg_trg_WvfL=CreateTrigger()call DisableTrigger(gg_trg_WvfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WvfL,.04)call TriggerAddAction(gg_trg_WvfL,function Trig_WvfL_Actions)endfunctionfunction Trig_Giant_Water_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0F0')endfunctionfunction Trig_Giant_Water_GroupAct takes unit u,unit picked,real dmg,player p returns nothinglocal real x
local real y
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\CrushingWave\\CrushingWaveDamage.mdl",picked,"origin"))
call UnitDamageTarget(u,picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(picked)>0)thenset x=GetUnitX(picked)set y=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(p,'h000',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0F1')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendfunctionfunction Trig_Giant_Water_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit pickedlocal player p=GetOwningPlayer(u)local group g=CreateGroup()local group g2=CreateGroup()
local group g_dummylocal real array xylocal real array rset xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(u)set xy[3]=GetUnitY(u)set r[0]=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])
set r[1]=400.set r[2]=BasicDmg_Q(u,'A0F0',1)call DisplayText("Suiton: Suidan no Jutsu",u,.023,true,$FF,$FF,$FF,$FF)set r[3]=420.set xy[2]=PolarX(xy[2],r[3],r[0])set xy[3]=PolarY(xy[3],r[3],r[0])set bj_lastCreatedUnit=CreateUnit(p,'h0CO',xy[2],xy[3],r[0])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.7)call TriggerSleepAction(.01)
set r[3]=-300.set xy[2]=PolarX(xy[2],r[3],r[0])set xy[3]=PolarY(xy[3],r[3],r[0])set g_dummy=CreateGroupXY(xy[2],xy[3],r[1],p)loop
set picked=FirstOfGroup(g_dummy)
exitwhen picked==nullcall GroupRemoveUnit(g_dummy,picked)
call GroupAddUnit(g2,picked)
call Trig_Giant_Water_GroupAct(u,picked,r[2],p)set picked=nullendloopcall DestroyGroup(g_dummy)set g_dummy=null
call TriggerSleepAction(.01)
set r[3]=200.set xy[2]=PolarX(xy[2],r[3],r[0])set xy[3]=PolarY(xy[3],r[3],r[0])set g_dummy=CreateGroupXY2(xy[2],xy[3],r[1],p,g2)call GroupAddGroup(g_dummy,g)call DestroyGroup(g_dummy)set g_dummy=null
set r[3]=200.set xy[4]=PolarX(xy[2],r[3],r[0]-89.)set xy[5]=PolarY(xy[3],r[3],r[0]-89.)set g_dummy=CreateGroupXY2(xy[4],xy[5],r[1],p,g2)call GroupAddGroup(g_dummy,g)call DestroyGroup(g_dummy)set g_dummy=null
set r[3]=-200.set xy[4]=PolarX(xy[2],r[3],r[0]-89.)set xy[5]=PolarY(xy[3],r[3],r[0]-89.)set g_dummy=CreateGroupXY2(xy[4],xy[5],r[1],p,g2)call GroupAddGroup(g_dummy,g)call DestroyGroup(g_dummy)set g_dummy=null
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call Trig_Giant_Water_GroupAct(u,picked,r[2],p)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall DestroyGroup(g2)set g2=nullset u=nullset p=nullendfunctionfunction InitTrig_Giant_Water takes nothing returns nothingset gg_trg_Giant_Water=CreateTrigger()call TriggerAddCondition(gg_trg_Giant_Water,Condition(function Trig_Giant_Water_Conditions))
call TriggerAddAction(gg_trg_Giant_Water,function Trig_Giant_Water_Actions)endfunctionfunction Trig_Wdj_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0F2')endfunctionfunction Trig_Wdj_Actions takes nothing returns nothingset udg_Wdj_Unit[0]=GetTriggerUnit()
set udg_Wdj_Unit[1]=GetSpellTargetUnit()
set udg_Wdj_XY[0]=GetUnitX(udg_Wdj_Unit[0])set udg_Wdj_XY[1]=GetUnitY(udg_Wdj_Unit[0])set udg_Wdj_XY[2]=GetUnitX(udg_Wdj_Unit[1])set udg_Wdj_XY[3]=GetUnitY(udg_Wdj_Unit[1])set udg_Wdj_Real[0]=AngleBetweenXY(udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_XY[2],udg_Wdj_XY[3])set udg_Wdj_Real[1]=70.set udg_Wdj_XY[0]=PolarX(udg_Wdj_XY[0],udg_Wdj_Real[1],udg_Wdj_Real[0])set udg_Wdj_XY[1]=PolarY(udg_Wdj_XY[1],udg_Wdj_Real[1],udg_Wdj_Real[0])set udg_Wdj_Own=GetOwningPlayer(udg_Wdj_Unit[0])
call DisplayText("Suiton: Suiryudan no Jutsu",udg_Wdj_Unit[0],.023,true,$FF,$FF,$FF,$FF)
set bj_lastCreatedUnit=CreateUnit(udg_Wdj_Own,'h0AD',udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Wdj_Unit[2]=CreateUnit(udg_Wdj_Own,'h0CP',udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_Real[0])set udg_Wdj_Real[1]=45.set udg_Wdj_Real[2]=100.
set udg_Wdj_Int=31call EnableTrigger(gg_trg_WdjL)endfunctionfunction InitTrig_Wdj takes nothing returns nothingset gg_trg_Wdj=CreateTrigger()call TriggerAddCondition(gg_trg_Wdj,Condition(function Trig_Wdj_Conditions))
call TriggerAddAction(gg_trg_Wdj,function Trig_Wdj_Actions)endfunctionfunction Trig_WdjL_Actions takes nothing returns nothing
local group glocal unit pickedlocal real dmgset udg_Wdj_XY[0]=GetUnitX(udg_Wdj_Unit[2])set udg_Wdj_XY[1]=GetUnitY(udg_Wdj_Unit[2])set udg_Wdj_XY[2]=GetUnitX(udg_Wdj_Unit[1])set udg_Wdj_XY[3]=GetUnitY(udg_Wdj_Unit[1])if((DistanceBetweenXY(udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_XY[2],udg_Wdj_XY[3])>udg_Wdj_Real[2])and(GetWidgetLife(udg_Wdj_Unit[1])>0)and udg_Wdj_Int>0)thenset udg_Wdj_Real[0]=AngleBetweenXY(udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_XY[2],udg_Wdj_XY[3])set udg_Wdj_XY[0]=PolarX(udg_Wdj_XY[0],udg_Wdj_Real[1],udg_Wdj_Real[0])set udg_Wdj_XY[1]=PolarY(udg_Wdj_XY[1],udg_Wdj_Real[1],udg_Wdj_Real[0])call SetUnitX(udg_Wdj_Unit[2],udg_Wdj_XY[0])
call SetUnitY(udg_Wdj_Unit[2],udg_Wdj_XY[1])
else
call DisableTrigger(GetTriggeringTrigger())if((GetWidgetLife(udg_Wdj_Unit[1])>0)and udg_Wdj_Int>0)thenset dmg=(300.+((2.+I2R(GetUnitAbilityLevel(udg_Wdj_Unit[0],'A0F2')))*I2R(GetHeroAgi(udg_Wdj_Unit[0],true))))
set g=CreateGroupXY(udg_Wdj_XY[2],udg_Wdj_XY[3],300.,udg_Wdj_Own)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(udg_Wdj_Unit[0],picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset bj_lastCreatedUnit=CreateUnit(udg_Wdj_Own,'h07D',udg_Wdj_XY[2],udg_Wdj_XY[3],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)if(GetWidgetLife(udg_Wdj_Unit[1])>0)then
call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0E1')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,udg_Wdj_Unit[1])
endifcall DestroyTreeXY(udg_Wdj_XY[2],udg_Wdj_XY[3],250.)
set udg_Wdj_Real[1]=120.
set udg_Wdj_Int=5loop
set udg_Wdj_Real[2]=I2R(udg_Wdj_Int*72)set udg_Wdj_XY[0]=PolarX(udg_Wdj_XY[2],udg_Wdj_Real[1],udg_Wdj_Real[2])set udg_Wdj_XY[1]=PolarY(udg_Wdj_XY[3],udg_Wdj_Real[1],udg_Wdj_Real[2])set bj_lastCreatedUnit=CreateUnit(udg_Wdj_Own,'h0AD',udg_Wdj_XY[0],udg_Wdj_XY[1],udg_Wdj_Real[0])call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set udg_Wdj_Int=udg_Wdj_Int-1exitwhen udg_Wdj_Int<1endloopendifcall SetUnitAnimation(udg_Wdj_Unit[2],"death")call UnitApplyTimedLife(udg_Wdj_Unit[2],'BTLF',3.)set udg_Wdj_Unit[0]=null
set udg_Wdj_Unit[1]=null
set udg_Wdj_Unit[2]=null
set udg_Wdj_Own=null
set udg_Wdj_XY[0]=.0
set udg_Wdj_XY[1]=.0
set udg_Wdj_XY[2]=.0
set udg_Wdj_XY[3]=.0
set udg_Wdj_Real[0]=.0set udg_Wdj_Real[1]=.0set udg_Wdj_Real[2]=.0endifendfunctionfunction InitTrig_WdjL takes nothing returns nothing
set gg_trg_WdjL=CreateTrigger()call DisableTrigger(gg_trg_WdjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WdjL,.04)call TriggerAddAction(gg_trg_WdjL,function Trig_WdjL_Actions)endfunctionfunction Trig_Www_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0F3')endfunctionfunction Trig_Www_Actions takes nothing returns nothingset udg_Www_Unit=GetTriggerUnit()set udg_Www_Real[0]=GetUnitX(udg_Www_Unit)set udg_Www_Real[1]=GetUnitY(udg_Www_Unit)set udg_Www_Own=GetOwningPlayer(udg_Www_Unit)set udg_Www_Int=0loop
set udg_Www_Dummy[udg_Www_Int]=CreateUnit(udg_Www_Own,'h0CQ',udg_Www_Real[0],udg_Www_Real[1],I2R(udg_Www_Int*'x'))call SetUnitTimeScale(udg_Www_Dummy[udg_Www_Int],1.7)set udg_Www_Int=udg_Www_Int+1exitwhen udg_Www_Int>2endloopset udg_Www_Real[2]=350.
set udg_Www_Real[3]=(6.+(2.*I2R(GetUnitAbilityLevel(udg_Www_Unit,'A0F3')))+((.06+(I2R(GetUnitAbilityLevel(udg_Www_Unit,'A0F3'))*.02))*I2R(GetHeroAgi(udg_Www_Unit,true))))call DestroyTreeXY(udg_Www_Real[0],udg_Www_Real[1],udg_Www_Real[2])call PauseSystem(udg_Www_Unit,true)call SetUnitAnimation(udg_Www_Unit,"spell throw")call DisplayText("Suiton: Suijinheki",udg_Www_Unit,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Tobirama\\Waterwall.wav",GetUnitX(udg_Www_Unit),GetUnitY(udg_Www_Unit))set udg_Www_Int=50call EnableTrigger(gg_trg_WwwL)endfunctionfunction InitTrig_Www takes nothing returns nothingset gg_trg_Www=CreateTrigger()call TriggerAddCondition(gg_trg_Www,Condition(function Trig_Www_Conditions))
call TriggerAddAction(gg_trg_Www,function Trig_Www_Actions)endfunctionfunction Trig_WwwL_Actions takes nothing returns nothing
local group glocal unit pickedlocal integer iif(udg_Www_Int>0 and GetWidgetLife(udg_Www_Unit)>0)thenset udg_Www_Real[0]=GetUnitX(udg_Www_Unit)set udg_Www_Real[1]=GetUnitY(udg_Www_Unit)set g=CreateGroupXY(udg_Www_Real[0],udg_Www_Real[1],udg_Www_Real[2],udg_Www_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitPureDamageTarget(udg_Www_Unit,picked,udg_Www_Real[3])set picked=nullendloopcall DestroyGroup(g)
set g=nullif(ModuloInteger(udg_Www_Int,$A)==0)then
set udg_Www_Real[4]=130.
set i=4loop
set udg_Www_Real[5]=I2R(i*90)set udg_Www_Real[6]=PolarX(udg_Www_Real[0],udg_Www_Real[4],udg_Www_Real[5])set udg_Www_Real[7]=PolarY(udg_Www_Real[1],udg_Www_Real[4],udg_Www_Real[5])set bj_lastCreatedUnit=CreateUnit(udg_Www_Own,'h0AD',udg_Www_Real[6],udg_Www_Real[7],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set i=i-1exitwhen i<1
endloopendifset udg_Www_Int=udg_Www_Int-1else
call DisableTrigger(GetTriggeringTrigger())set udg_Www_Int=2loop
call SetUnitAnimation(udg_Www_Dummy[udg_Www_Int],"death")call UnitApplyTimedLife(udg_Www_Dummy[udg_Www_Int],'BTLF',2.5)set udg_Www_Int=udg_Www_Int-1exitwhen udg_Www_Int<0endloopcall PauseSystem(udg_Www_Unit,false)
if(GetWidgetLife(udg_Www_Unit)>0)thencall SetUnitAnimation(udg_Www_Unit,"stand")endifset udg_Www_Unit=nullset udg_Www_Own=null
set udg_Www_Real[0]=.0set udg_Www_Real[1]=.0set udg_Www_Real[2]=.0set udg_Www_Real[3]=.0set udg_Www_Real[4]=.0set udg_Www_Real[5]=.0set udg_Www_Real[6]=.0set udg_Www_Real[7]=.0set udg_Www_Int=0endifendfunctionfunction InitTrig_WwwL takes nothing returns nothing
set gg_trg_WwwL=CreateTrigger()call DisableTrigger(gg_trg_WwwL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WwwL,.06)call TriggerAddAction(gg_trg_WwwL,function Trig_WwwL_Actions)endfunctionfunction Trig_Water_Wave_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0F4')endfunctionfunction Trig_Water_Wave_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit dummy
local player plocal real array xylocal real array rlocal rect rctlocal integer ilocal integer sk
local integer sklvset xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(u)set xy[3]=GetUnitY(u)set r[0]=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])
set r[1]=.01
set r[2]=r[0]+85.set rct=CreateRectXY(xy[2],xy[3],2500.,2500.)set r[3]=-450.set xy[2]=PolarX(xy[2],r[3],r[0])set xy[3]=PolarY(xy[3],r[3],r[0])set sk='A0F5'set sklv=GetUnitAbilityLevel(u,'A0F4')set p=GetOwningPlayer(u)
call DisplayText("Suiton: Suishoha",u,.023,true,$FF,$FF,$FF,$FF)
call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Tobirama\\Waterwave.wav",GetUnitX(u),GetUnitY(u))
set i=0loop
if(GetWidgetLife(u)<1)thenset i=35
else
call TriggerSleepAction(r[1])set r[3]=GetRandomReal(-600.,600.)set xy[4]=PolarX(xy[2],r[3],r[2])set xy[5]=PolarY(xy[3],r[3],r[2])set dummy=CreateUnit(p,'h0AD',xy[4],xy[5],r[0])call SetUnitScale(dummy,2.5,2.5,2.5)
set xy[4]=PolarX(xy[4],600.,r[0])set xy[5]=PolarY(xy[5],600.,r[0])call UnitRemoveAbility(dummy,'Amov')
call UnitAddAbility(dummy,sk)call SetUnitAbilityLevel(dummy,sk,sklv)call IssuePointOrderById(dummy,$D009D,xy[4],xy[5])call UnitApplyTimedLife(dummy,'BTLF',4.)
set dummy=nullset i=i+1endifset xy[4]=RandomXInRect(rct)
set xy[5]=RandomYInRect(rct)
set bj_lastCreatedUnit=CreateUnit(p,'h0CR',xy[4],xy[5],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.5)exitwhen i>34endloopcall RemoveRect(rct)
set rct=null
set u=nullset p=nullendfunctionfunction InitTrig_Water_Wave takes nothing returns nothingset gg_trg_Water_Wave=CreateTrigger()call TriggerAddCondition(gg_trg_Water_Wave,Condition(function Trig_Water_Wave_Conditions))call TriggerAddAction(gg_trg_Water_Wave,function Trig_Water_Wave_Actions)endfunctionfunction Infinite_Darkness_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0F7')endfunctionfunction Infinite_Darkness_SetVision takes player p,boolean b returns nothinglocal integer slot=GetPlayerId(p)local integer ilocal integer i_endif(slot>$B)thenreturnelseif(slot>5)thenset i=6set i_end=$B
else
set i=0set i_end=5endifif(b)thenloop
if(i!=slot)thencall SetPlayerAlliance(Player(i),p,ALLIANCE_SHARED_VISION,true)endifset i=i+1exitwhen i>i_end
endloopcall FogModifierStart(udg_Vision_Duel1[slot])call FogModifierStart(udg_Vision_Duel2[slot])call FogModifierStart(udg_Vision_Home[slot])
call FogModifierStart(udg_Vision_Golem[slot])call FogModifierStart(udg_Vision_BossLeft[slot])
call FogModifierStart(udg_Vision_BossRight[slot])call FogModifierStart(udg_Vision_Center[slot])else
loop
if(i!=slot)thencall SetPlayerAlliance(Player(i),p,ALLIANCE_SHARED_VISION,false)
endifset i=i+1exitwhen i>i_end
endloopcall FogModifierStop(udg_Vision_Duel1[slot])
call FogModifierStop(udg_Vision_Duel2[slot])
call FogModifierStop(udg_Vision_Home[slot])call FogModifierStop(udg_Vision_Golem[slot])
call FogModifierStop(udg_Vision_BossLeft[slot])call FogModifierStop(udg_Vision_BossRight[slot])
call FogModifierStop(udg_Vision_Center[slot])endifendfunctionfunction Trig_Infinite_Darkness_Reset takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer icall PauseTimer(t)call DestroyTimer(t)
set t=nullset i=0loop
call RemoveUnit(udg_Infinite_Darkness_Dummy[i])set udg_Infinite_Darkness_Dummy[i]=nullset i=i+1exitwhen i>4
endloopcall UnitRemoveAbility(udg_Infinite_Darkness_Unit,udg_Infinite_Darkness_Ability)
set udg_Infinite_Darkness_Unit=nullset udg_Infinite_Darkness_Ability=0endfunctionfunction Trig_Infinite_Darkness_Actions takes nothing returns nothinglocal unit pickedlocal real array xylocal real delay
local real durlocal real array rlocal group glocal group g2local player plocal integer buflocal integer array sklocal integer ilocal timer tlocal boolean dayset udg_Infinite_Darkness_Unit=GetTriggerUnit()set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set udg_Infinite_Darkness_Ability='A0F9'
set sk[0]='A0F6'
set sk[1]='A0F8'
set day=CheckDay()if(day)thenset sk[2]=sk[0]else
set sk[2]=sk[1]endifset buf='B03L'set delay=.1
set dur=4.5+(I2R(GetUnitAbilityLevel(udg_Infinite_Darkness_Unit,'A0F7'))*.5)
call UnitAddAbility(udg_Infinite_Darkness_Unit,udg_Infinite_Darkness_Ability)set p=GetOwningPlayer(udg_Infinite_Darkness_Unit)set bj_lastCreatedUnit=CreateUnit(p,'h07H',xy[0],xy[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h0CS',xy[0],xy[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set r[0]=550.set i=0loop
set r[1]=I2R(72*i)set xy[2]=PolarX(xy[0],r[0],r[1])set xy[3]=PolarY(xy[1],r[0],r[1])set udg_Infinite_Darkness_Dummy[i]=CreateUnit(p,'h06Q',xy[2],xy[3],bj_UNIT_FACING)call SetUnitTimeScale(udg_Infinite_Darkness_Dummy[i],.0)
set i=i+1exitwhen i>4
endloopcall DisplayText("Kokuangyo no Jutsu",udg_Infinite_Darkness_Unit,.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\InfinitiesDarkness.mp3")
call TriggerSleepAction(.01)
set t=CreateTimer()call TimerStart(t,dur,false,function Trig_Infinite_Darkness_Reset)set g2=CreateGroup()
set g=CreateGroupXY(xy[0],xy[1],1000.,p)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(GetUnitAbilityLevel(picked,buf)>0 and IsUnitType(picked,UNIT_TYPE_HERO))thencall UnitAddAbility(picked,sk[2])call Infinite_Darkness_SetVision(GetOwningPlayer(picked),false)call GroupAddUnit(g2,picked)
set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(p,'h019',xy[0],xy[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,0,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullloop
call TriggerSleepAction(delay)if(day!=CheckDay())thenset g=CreateGroup()call GroupAddGroup(g2,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitRemoveAbility(picked,sk[2])
if(day)thenset sk[2]=sk[1]else
set sk[2]=sk[0]endifcall UnitAddAbility(picked,sk[2])set picked=nullendloopcall DestroyGroup(g)
set g=nullendifset g=CreateGroup()call GroupAddGroup(g2,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(GetUnitAbilityLevel(picked,buf)<1)thencall UnitRemoveAbility(picked,sk[2])
call Infinite_Darkness_SetVision(GetOwningPlayer(picked),true)call GroupRemoveUnit(g2,picked)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullexitwhen(GroupCountUnits(g2)<1)endloopcall DestroyGroup(g2)set g2=nullset p=nullendfunctionfunction InitTrig_Infinite_Darkness takes nothing returns nothingset gg_trg_Infinite_Darkness=CreateTrigger()
call TriggerAddCondition(gg_trg_Infinite_Darkness,Condition(function Infinite_Darkness_Conditions))call TriggerAddAction(gg_trg_Infinite_Darkness,function Trig_Infinite_Darkness_Actions)endfunctionfunction AI_Gimmjow_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='U00H' or GetUnitTypeId(GetTriggerUnit())=='U00K')endfunctionfunction AI_Gimmjow_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='U00H' or GetUnitTypeId(GetAttacker())=='U00K')
endfunctionfunction AI_Gimmjow_AttackedCond takes nothing returns booleanif(not AI_Gimmjow_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Gimmjow_AttackerCond takes nothing returns booleanif(not AI_Gimmjow_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Gimmjow_CondOR takes nothing returns boolean
return(AI_Gimmjow_AttackedCond()or AI_Gimmjow_AttackerCond())endfunctionfunction AI_Gimmjow_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Gimmjow_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Gimmjow_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Gimmjow_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0FD')call SelectHeroSkill(MySelf,'A0FC')call SelectHeroSkill(MySelf,'A0FE')call SelectHeroSkill(MySelf,'A0FB')call SelectHeroSkill(MySelf,'A0FA')endifset xy[2]=GetUnitX(MyTarget)
set xy[3]=GetUnitY(MyTarget)
set ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set xy[0]=GetUnitX(MySelf)set xy[1]=GetUnitY(MySelf)if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>499.)thencall IssuePointOrderById(MySelf,$D022D,xy[2],xy[3])call TriggerSleepAction(.5)endifendifif(AI_Attacker)thencall IssueTargetOrderById(MySelf,$D0065,MyTarget)endifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(MySelf,$D0065,MyTarget)call IssuePointOrderById(MySelf,$D0264,xy[2],xy[3])if(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D02B7)endifendifcall IssuePointOrderById(MySelf,$D00FA,xy[2],xy[3])endifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Grimmjow takes nothing returns nothingset udg_AI_Trig[39]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[39],Condition(function AI_Gimmjow_Cond))call TriggerAddAction(udg_AI_Trig[39],function AI_Gimmjow_Act)endfunctionfunction Trig_Cpt_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FA')endfunctionfunction Trig_Cpt_Actions takes nothing returns nothingset udg_Cpt_Unit[0]=GetTriggerUnit()
set udg_Cpt_Unit[1]=GetSpellTargetUnit()
set udg_Cpt_Eff[0]=AddSpecialEffectTarget("SadoBuff.mdl",udg_Cpt_Unit[0],"hand right")set udg_Cpt_Eff[1]=AddSpecialEffectTarget("SadoBuff.mdl",udg_Cpt_Unit[0],"hand left")set udg_Cpt_Int=20set udg_Cpt_Real[0]=120.
set udg_Cpt_Real[1]=87.call PauseSystem(udg_Cpt_Unit[0],true)call SetUnitAnimationByIndex(udg_Cpt_Unit[0],$B)
call EnableTrigger(gg_trg_CptL)endfunctionfunction InitTrig_Cpt takes nothing returns nothingset gg_trg_Cpt=CreateTrigger()call TriggerAddCondition(gg_trg_Cpt,Condition(function Trig_Cpt_Conditions))
call TriggerAddAction(gg_trg_Cpt,function Trig_Cpt_Actions)endfunctionfunction Trig_CptL_Actions takes nothing returns nothing
local group glocal unit pickedlocal player plocal real array xylocal real r
local real dmgset xy[0]=GetUnitX(udg_Cpt_Unit[0])set xy[1]=GetUnitY(udg_Cpt_Unit[0])set xy[2]=GetUnitX(udg_Cpt_Unit[1])set xy[3]=GetUnitY(udg_Cpt_Unit[1])set r=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])if((DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>udg_Cpt_Real[0]and GetWidgetLife(udg_Cpt_Unit[0])>0)and udg_Cpt_Int>0)thenset udg_Cpt_Int=udg_Cpt_Int-1set xy[0]=PolarX(xy[0],udg_Cpt_Real[1],r)set xy[1]=PolarY(xy[1],udg_Cpt_Real[1],r)call UnitMoveXY(udg_Cpt_Unit[0],xy[0],xy[1])
else
call DisableTrigger(gg_trg_CptL)
call PauseSystem(udg_Cpt_Unit[0],false)if(not(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>udg_Cpt_Real[0])and GetWidgetLife(udg_Cpt_Unit[1])>0)thencall DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdl",udg_Cpt_Unit[1],"origin"))
call IssueTargetOrderById(udg_Cpt_Unit[0],$D000F,udg_Cpt_Unit[1])set p=GetOwningPlayer(udg_Cpt_Unit[0])set r=180.set dmg=((50.+(100.*I2R(GetUnitAbilityLevel(udg_Cpt_Unit[0],'A0FA'))))+I2R(GetHeroAgi(udg_Cpt_Unit[0],true)))set bj_lastCreatedUnit=CreateUnit(p,'h04R',xy[2],xy[3],GetRandomReal(0,360))
call SetUnitScale(bj_lastCreatedUnit,1.8,1.8,1.8)call UnitAddAbility(bj_lastCreatedUnit,'A0GJ')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyTreeXY(xy[2],xy[3],r)set g=CreateGroupXY(xy[2],xy[3],r,p)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(udg_Cpt_Unit[0],picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset p=nullendifcall DestroyEffect(udg_Cpt_Eff[0])call DestroyEffect(udg_Cpt_Eff[1])set udg_Cpt_Unit[0]=null
set udg_Cpt_Unit[1]=null
set udg_Cpt_Eff[0]=nullset udg_Cpt_Eff[1]=nullset udg_Cpt_Int=0set udg_Cpt_Real[0]=.0set udg_Cpt_Real[1]=.0endifendfunctionfunction InitTrig_CptL takes nothing returns nothing
set gg_trg_CptL=CreateTrigger()call DisableTrigger(gg_trg_CptL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CptL,.03)call TriggerAddAction(gg_trg_CptL,function Trig_CptL_Actions)endfunctionfunction Trig_BerserkerBlood_Learn_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0FE')endfunctionfunction Trig_BerserkerBlood_AddHP takes unit u,integer lv returns nothinglocal integer iif(lv<1)then
returnendifset i=1loop
call UnitAddAbility(u,'A0GI')call SetUnitAbilityLevel(u,'A0GI',2)
call UnitRemoveAbility(u,'A0GI')
set i=i+1exitwhen(i>lv)endloopendfunctionfunction Trig_BerserkerBlood_Learn_Actions takes nothing returns nothing
local unit u=GetLearningUnit()local integer sklv=GetLearnedSkillLevel()if(sklv==1)thenset udg_BerserkerBlood_Hash=InitHashtable()set udg_BerserkerBlood_Skill[0]='A0FE'set udg_BerserkerBlood_Skill[1]='A0FF'set udg_BerserkerBlood_Skill[2]='A0FG'set udg_BerserkerBlood_Skill[3]='A0FH'set udg_BerserkerBlood_Skill[4]='B03N'set udg_BerserkerBlood_Skill[5]='A0FI'set udg_BerserkerBlood_BuffDur=2.5call EnableTrigger(gg_trg_BerserkerBlood)call Trig_BerserkerBlood_AddHP(u,5)else
call Trig_BerserkerBlood_AddHP(u,1)if(sklv>4)thencall DestroyTrigger(GetTriggeringTrigger())endifendifset u=nullendfunctionfunction InitTrig_BerserkerBlood_Learn takes nothing returns nothing
set gg_trg_BerserkerBlood_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_BerserkerBlood_Learn,Condition(function Trig_BerserkerBlood_Learn_Conditions))call TriggerAddAction(gg_trg_BerserkerBlood_Learn,function Trig_BerserkerBlood_Learn_Actions)endfunctionfunction Trig_BerserkerBlood_RemoveBuff takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer array idlocal integer stacklocal unit atker
call PauseTimer(t)call DestroyTimer(t)
set id[0]=GetHandleId(t)
set id[1]=LoadInteger(udg_BerserkerBlood_Hash,id[0],0)set stack=(LoadInteger(udg_BerserkerBlood_Hash,id[1],1))-1if(stack<1)thenset atker=LoadUnitHandle(udg_BerserkerBlood_Hash,id[1],2)call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[1],1)call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[2],1)call UnitRemoveAbility(atker,udg_BerserkerBlood_Skill[4])set atker=nullcall FlushChildHashtable(udg_BerserkerBlood_Hash,id[1])else
call SaveInteger(udg_BerserkerBlood_Hash,id[1],1,stack)endifcall FlushChildHashtable(udg_BerserkerBlood_Hash,id[0])set t=nullendfunctionfunction Trig_BerserkerBlood_Conditions takes nothing returns booleanreturn GetUnitAbilityLevel(GetAttacker(),udg_BerserkerBlood_Skill[0])>0endfunctionfunction Trig_BerserkerBlood_Actions takes nothing returns nothinglocal unit atker=GetAttacker()local unit atked=GetTriggerUnit()local unit old_targlocal timer buff_timerlocal integer array idlocal integer sklvlocal integer maxlocal integer stacklocal integer rounds
local real array xylocal player pif(not(IsUnitInGroup(atker,udg_BerserkerBlood_GroupDelay)))thencall GroupAddUnit(udg_BerserkerBlood_GroupDelay,atker)set id[0]=GetHandleId(atker)
set old_targ=LoadUnitHandle(udg_BerserkerBlood_Hash,id[0],0)
if(atked==old_targ)thenset sklv=GetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[1])+1set max=(GetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[0])*4)+4
if(sklv<max)then
call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[1],sklv)
call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[2],sklv)
endifset stack=(LoadInteger(udg_BerserkerBlood_Hash,id[0],1))+1call SaveInteger(udg_BerserkerBlood_Hash,id[0],1,stack)call SaveUnitHandle(udg_BerserkerBlood_Hash,id[0],2,atker)set buff_timer=CreateTimer()
call SaveInteger(udg_BerserkerBlood_Hash,GetHandleId(buff_timer),0,id[0])call TimerStart(buff_timer,udg_BerserkerBlood_BuffDur,false,function Trig_BerserkerBlood_RemoveBuff)
set buff_timer=nullset rounds=(LoadInteger(udg_BerserkerBlood_Hash,id[0],3))+1if(rounds==6)thencall SaveInteger(udg_BerserkerBlood_Hash,id[0],3,0)set p=GetOwningPlayer(atker)
set xy[0]=GetUnitX(atker)set xy[1]=GetUnitY(atker)set bj_lastCreatedUnit=CreateUnit(p,'u003',xy[0],xy[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_BerserkerBlood_Skill[3])call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,atker)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set xy[0]=GetUnitX(atked)set xy[1]=GetUnitY(atked)set bj_lastCreatedUnit=CreateUnit(p,'u003',xy[0],xy[1],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_BerserkerBlood_Skill[5])call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,atked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set p=nullelse
call SaveInteger(udg_BerserkerBlood_Hash,id[0],3,rounds)
endifelse
call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[1],1)call SetUnitAbilityLevel(atker,udg_BerserkerBlood_Skill[2],1)call UnitRemoveAbility(atker,udg_BerserkerBlood_Skill[4])set stack=LoadInteger(udg_BerserkerBlood_Hash,id[0],1)call FlushChildHashtable(udg_BerserkerBlood_Hash,id[0])call SaveUnitHandle(udg_BerserkerBlood_Hash,id[0],0,atked)call SaveInteger(udg_BerserkerBlood_Hash,id[0],1,stack)call SaveUnitHandle(udg_BerserkerBlood_Hash,id[0],2,atker)endifcall TriggerSleepAction(.06)
call GroupRemoveUnit(udg_BerserkerBlood_GroupDelay,atker)endifset atker=nullset atked=nullendfunctionfunction InitTrig_BerserkerBlood takes nothing returns nothingset gg_trg_BerserkerBlood=CreateTrigger()call DisableTrigger(gg_trg_BerserkerBlood)call TriggerRegisterAnyUnitEventBJ(gg_trg_BerserkerBlood,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_BerserkerBlood,Condition(function Trig_BerserkerBlood_Conditions))call TriggerAddAction(gg_trg_BerserkerBlood,function Trig_BerserkerBlood_Actions)endfunctionfunction Trig_Grimmjow_ResInit_DieAct takes nothing returns nothinglocal unit u=GetDyingUnit()if(GetUnitAbilityLevel(u,'A0FJ')>0)thencall UnitRemoveAbility(u,'A0FJ')
endifset u=nullendfunctionfunction Trig_Grimmjow_ResInit_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0FC')endfunctionfunction Trig_Grimmjow_ResInit_Actions takes nothing returns nothing
local unit u=GetLearningUnit()local trigger t=CreateTrigger()call SetPlayerAbilityAvailable(GetOwningPlayer(u),'A0FJ',false)call TriggerRegisterUnitEvent(t,u,EVENT_UNIT_DEATH)call TriggerAddAction(t,function Trig_Grimmjow_ResInit_DieAct)set u=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_Grimmjow_Res_Init takes nothing returns nothingset gg_trg_Grimmjow_Res_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_Grimmjow_Res_Init,Condition(function Trig_Grimmjow_ResInit_Conditions))call TriggerAddAction(gg_trg_Grimmjow_Res_Init,function Trig_Grimmjow_ResInit_Actions)endfunctionfunction Trig_Grimmjow_Res_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FC')endfunctionfunction Trig_Grimmjow_Res_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='U00K')then
set p=GetOwningPlayer(u)
call DisplayText("Grind: Pantera",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Grimmjow\\Pantera.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h0CV',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h028',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call TransfromAction(u,x,y)set p=nullelse
call UnitRemoveAbility(u,'A0FJ')
endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Grimmjow_Res takes nothing returns nothing
set gg_trg_Grimmjow_Res=CreateTrigger()call TriggerAddCondition(gg_trg_Grimmjow_Res,Condition(function Trig_Grimmjow_Res_Conditions))call TriggerAddAction(gg_trg_Grimmjow_Res,function Trig_Grimmjow_Res_Actions)endfunctionfunction Trig_Pkc_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FD')endfunctionfunction Trig_Pkc_Actions takes nothing returns nothingset udg_Pkc_Unit[0]=GetTriggerUnit()
set udg_Pkc_XY[0]=GetSpellTargetX()set udg_Pkc_XY[1]=GetSpellTargetY()set udg_Pkc_XY[2]=GetUnitX(udg_Pkc_Unit[0])set udg_Pkc_XY[3]=GetUnitY(udg_Pkc_Unit[0])set udg_Pkc_Real[0]=AngleBetweenXY(udg_Pkc_XY[2],udg_Pkc_XY[3],udg_Pkc_XY[0],udg_Pkc_XY[1])set udg_Pkc_Real[1]=65.set udg_Pkc_Real[2]=300.
set udg_Pkc_Real[3]=(1300.+((5.+(I2R(GetUnitAbilityLevel(udg_Pkc_Unit[0],'A0FD'))*5.))*I2R(GetHeroAgi(udg_Pkc_Unit[0],false))))set udg_Pkc_Own=GetOwningPlayer(udg_Pkc_Unit[0])
call DisplayText("Desgarron",udg_Pkc_Unit[0],.023,true,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\Desgarron.mp3")set bj_lastCreatedUnit=CreateUnit(udg_Pkc_Own,'h04A',udg_Pkc_XY[2],udg_Pkc_XY[3],udg_Pkc_Real[0])call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set udg_Pkc_Real[4]=70.set udg_Pkc_XY[2]=PolarX(udg_Pkc_XY[2],udg_Pkc_Real[4],udg_Pkc_Real[0])set udg_Pkc_XY[3]=PolarY(udg_Pkc_XY[3],udg_Pkc_Real[4],udg_Pkc_Real[0])set udg_Pkc_Unit[1]=CreateUnit(udg_Pkc_Own,'h0CW',udg_Pkc_XY[2],udg_Pkc_XY[3],udg_Pkc_Real[0])set udg_Pkc_Real[4]=100.
set udg_Pkc_Real[5]=udg_Pkc_Real[0]-90.set udg_Pkc_XY[4]=PolarX(udg_Pkc_XY[2],udg_Pkc_Real[4],udg_Pkc_Real[5])set udg_Pkc_XY[5]=PolarY(udg_Pkc_XY[3],udg_Pkc_Real[4],udg_Pkc_Real[5])set udg_Pkc_Real[4]=-100.set udg_Pkc_XY[6]=PolarX(udg_Pkc_XY[2],udg_Pkc_Real[4],udg_Pkc_Real[5])set udg_Pkc_XY[7]=PolarY(udg_Pkc_XY[3],udg_Pkc_Real[4],udg_Pkc_Real[5])set udg_Pkc_Bool=trueset udg_Pkc_Int=30call EnableTrigger(gg_trg_PkcL)endfunctionfunction InitTrig_Pkc takes nothing returns nothingset gg_trg_Pkc=CreateTrigger()call TriggerAddCondition(gg_trg_Pkc,Condition(function Trig_Pkc_Conditions))
call TriggerAddAction(gg_trg_Pkc,function Trig_Pkc_Actions)endfunctionfunction Trig_PkcL_Actions takes nothing returns nothing
if(udg_Pkc_Int>0)thenset udg_Pkc_Int=udg_Pkc_Int-1set udg_Pkc_XY[2]=GetUnitX(udg_Pkc_Unit[1])set udg_Pkc_XY[3]=GetUnitY(udg_Pkc_Unit[1])set udg_Pkc_XY[2]=PolarX(udg_Pkc_XY[2],udg_Pkc_Real[1],udg_Pkc_Real[0])set udg_Pkc_XY[3]=PolarY(udg_Pkc_XY[3],udg_Pkc_Real[1],udg_Pkc_Real[0])call SetUnitX(udg_Pkc_Unit[1],udg_Pkc_XY[2])
call SetUnitY(udg_Pkc_Unit[1],udg_Pkc_XY[3])
call DestroyTreeXY(udg_Pkc_XY[2],udg_Pkc_XY[3],udg_Pkc_Real[2])call Dynamic_GroupShake(udg_Pkc_XY[2],udg_Pkc_XY[3],1.2,5.,udg_CameraArea,udg_Pkc_GroupShake)set udg_Pkc_Group=CreateGroupXY2(udg_Pkc_XY[2],udg_Pkc_XY[3],udg_Pkc_Real[2],udg_Pkc_Own,udg_Pkc_Group2)
loop
set udg_Pkc_Unit[2]=FirstOfGroup(udg_Pkc_Group)exitwhen udg_Pkc_Unit[2]==nullcall GroupRemoveUnit(udg_Pkc_Group,udg_Pkc_Unit[2])call GroupAddUnit(udg_Pkc_Group2,udg_Pkc_Unit[2])set udg_Pkc_XY[0]=GetUnitX(udg_Pkc_Unit[2])set udg_Pkc_XY[1]=GetUnitY(udg_Pkc_Unit[2])set bj_lastCreatedUnit=CreateUnit(udg_Pkc_Own,'h03F',udg_Pkc_XY[0],udg_Pkc_XY[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(IsUnitType(udg_Pkc_Unit[2],UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Pkc_Real[3]))+"!",udg_Pkc_Unit[2],.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(udg_Pkc_Unit[0],udg_Pkc_Unit[2],udg_Pkc_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set udg_Pkc_Unit[2]=null
endloopcall DestroyGroup(udg_Pkc_Group)
set udg_Pkc_Group=nullset udg_Pkc_XY[4]=PolarX(udg_Pkc_XY[4],udg_Pkc_Real[1],udg_Pkc_Real[0])set udg_Pkc_XY[5]=PolarY(udg_Pkc_XY[5],udg_Pkc_Real[1],udg_Pkc_Real[0])set udg_Pkc_XY[6]=PolarX(udg_Pkc_XY[6],udg_Pkc_Real[1],udg_Pkc_Real[0])set udg_Pkc_XY[7]=PolarY(udg_Pkc_XY[7],udg_Pkc_Real[1],udg_Pkc_Real[0])if(udg_Pkc_Bool)then
set udg_Pkc_Bool=falseset bj_lastCreatedUnit=CreateUnit(udg_Pkc_Own,'h00E',udg_Pkc_XY[4],udg_Pkc_XY[5],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(udg_Pkc_Own,'h00E',udg_Pkc_XY[6],udg_Pkc_XY[7],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
set udg_Pkc_Bool=trueendifelse
call EnableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Pkc_Unit[1])
call GroupClear(udg_Pkc_Group2)call GroupClear(udg_Pkc_GroupShake)set udg_Pkc_Unit[0]=null
set udg_Pkc_Unit[1]=null
set udg_Pkc_Own=null
set udg_Pkc_Real[0]=.0set udg_Pkc_Real[1]=.0set udg_Pkc_Real[2]=.0set udg_Pkc_Real[3]=.0set udg_Pkc_Real[4]=.0set udg_Pkc_Real[5]=.0set udg_Pkc_Int=7loop
set udg_Pkc_XY[udg_Pkc_Int]=.0set udg_Pkc_Int=udg_Pkc_Int-1exitwhen udg_Pkc_Int<0endloopendifendfunctionfunction InitTrig_PkcL takes nothing returns nothing
set gg_trg_PkcL=CreateTrigger()call DisableTrigger(gg_trg_PkcL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PkcL,.04)call TriggerAddAction(gg_trg_PkcL,function Trig_PkcL_Actions)endfunctionfunction AI_Fujitora_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='H0AW')endfunctionfunction AI_Fujitora_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='H0AW')
endfunctionfunction AI_Fujitora_AttackedCond takes nothing returns booleanif(not AI_Fujitora_AttackedType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Fujitora_AttackerCond takes nothing returns booleanif(not AI_Fujitora_AttackerType())thenreturn false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Fujitora_CondOR takes nothing returns booleanreturn(AI_Fujitora_AttackedCond()or AI_Fujitora_AttackerCond())endfunctionfunction AI_Fujitora_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Fujitora_CondOR())then
return false
endifreturn trueendfunctionfunction AI_Fujitora_Act takes nothing returns nothinglocal unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Fujitora_AttackedType())thenset MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0FU')call SelectHeroSkill(MySelf,'A0FO')call SelectHeroSkill(MySelf,'A0FM')call SelectHeroSkill(MySelf,'A0FL')call SelectHeroSkill(MySelf,'A0FP')endifset xy[2]=GetUnitX(MyTarget)
set xy[3]=GetUnitY(MyTarget)
set ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set xy[0]=GetUnitX(MySelf)set xy[1]=GetUnitY(MySelf)if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>499.)thenset xy[0]=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])set xy[1]=120.set xy[4]=PolarX(xy[2],xy[1],xy[0])set xy[5]=PolarY(xy[3],xy[1],xy[0])call IssuePointOrderById(MySelf,$D022D,xy[4],xy[5])call TriggerSleepAction(.5)endifendifif(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D0080)endifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssuePointOrderById(MySelf,$D0271,xy[2],xy[3])if(AI_Attacker)thencall IssuePointOrderById(MySelf,$D0270,xy[2],xy[3])endifcall IssuePointOrderById(MySelf,$D0264,xy[2],xy[3])endifendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Fujitora takes nothing returns nothingset udg_AI_Trig[40]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[40],Condition(function AI_Fujitora_Cond))call TriggerAddAction(udg_AI_Trig[40],function AI_Fujitora_Act)endfunctionfunction Trig_GravityBlade_Init_Conditions takes nothing returns boolean
return(GetLearnedSkill()=='A0FP')endfunctionfunction Trig_GravityBlade_Init_Actions takes nothing returns nothinglocal integer sklv=GetLearnedSkillLevel()if(sklv==1)thenset udg_GravityBlade_Unit=GetLearningUnit()set udg_GravityBlade_Delay=1.set udg_GravityBlade_TrigDelay=4.set udg_GravityBlade_Buff[0]='B03Q'set udg_GravityBlade_Buff[1]='B03R'set udg_GravityBlade_Chance=30set udg_GravityBlade_Dmg=100.set udg_GravityBlade_IsCooldown=falseset udg_GravityBlade_Ability[0]='A0FP'set udg_GravityBlade_Ability[1]='A0FT'call UnitAddAbility(udg_GravityBlade_Unit,'A0FQ')call EnableTrigger(gg_trg_GravityBlade)endifset udg_GravityBlade_Dmg=udg_GravityBlade_Dmg+25.if(sklv>5)thencall DestroyTrigger(GetTriggeringTrigger())endifendfunctionfunction InitTrig_GravityBlade_Init takes nothing returns nothingset gg_trg_GravityBlade_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_GravityBlade_Init,Condition(function Trig_GravityBlade_Init_Conditions))
call TriggerAddAction(gg_trg_GravityBlade_Init,function Trig_GravityBlade_Init_Actions)endfunctionfunction GravityBlade_DMGTakenCond takes nothing returns boolean
local unit u=GetTriggerUnit()if(GetUnitAbilityLevel(u,udg_GravityBlade_Buff[0])>0 or GetUnitAbilityLevel(u,udg_GravityBlade_Buff[1])>0)thenset u=nullreturn trueendifset u=nullreturn false
endfunctionfunction GravityBlade_End takes nothing returns nothinglocal timer t=GetExpiredTimer()call PauseTimer(t)call DestroyTimer(t)
set t=nullset udg_GravityBlade_IsCooldown=falseendfunctionfunction GravityBlade_DMGTaken takes nothing returns nothing
local unit atker=GetEventDamageSource()local unit atked=GetTriggerUnit()local unit pickedlocal player plocal real array xylocal group glocal timer tcall UnitRemoveAbility(atked,udg_GravityBlade_Buff[0])call UnitRemoveAbility(atked,udg_GravityBlade_Buff[1])if(udg_GravityBlade_IsCooldown==false and udg_GravityBlade_Chance>GetRandomInt(1,'d'))thenset udg_GravityBlade_IsCooldown=true
call DisplayText("Gravito",atker,.023,true,$FF,$FF,$FF,$FF)set p=GetOwningPlayer(atker)
set xy[0]=GetUnitX(atked)set xy[1]=GetUnitY(atked)set g=CreateGroupXY(xy[0],xy[1],170.,p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(atker,picked,udg_GravityBlade_Dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset bj_lastCreatedUnit=CreateUnit(p,'h0CZ',xy[0],xy[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.1)if(GetWidgetLife(atked)>0)thencall UnitAddAbility(bj_lastCreatedUnit,'A0FS')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,atked)endifset xy[0]=GetUnitX(atker)set xy[1]=GetUnitY(atker)set p=nullcall SetAbilityCooldown(atker,udg_GravityBlade_Ability[0],udg_GravityBlade_Ability[1],udg_GravityBlade_Delay)set t=CreateTimer()call TimerStart(t,(udg_GravityBlade_Delay+.1),false,function GravityBlade_End)set t=nullendifset atker=nullset atked=nullendfunctionfunction Trig_GravityBlade_Conditions takes nothing returns booleanif(GetAttacker()!=udg_GravityBlade_Unit)then
return false
elseif(IsUnitInGroup(GetTriggerUnit(),udg_GravityBlade_Group))thenreturn false
endifreturn trueendfunctionfunction Trig_GravityBlade_Actions takes nothing returns nothing
local unit atked=GetTriggerUnit()local trigger tg=CreateTrigger()
local triggercondition trgCond=TriggerAddCondition(tg,Condition(function GravityBlade_DMGTakenCond))
local triggeraction trgAct=TriggerAddAction(tg,function GravityBlade_DMGTaken)call GroupAddUnit(udg_GravityBlade_Group,atked)call TriggerRegisterUnitEvent(tg,atked,EVENT_UNIT_DAMAGED)call TriggerSleepAction(udg_GravityBlade_TrigDelay)call TriggerRemoveAction(tg,trgAct)call TriggerRemoveCondition(tg,trgCond)call DestroyTrigger(tg)set trgAct=nullset trgCond=null
set tg=nullcall GroupRemoveUnit(udg_GravityBlade_Group,atked)set atked=nullendfunctionfunction InitTrig_GravityBlade takes nothing returns nothing
set gg_trg_GravityBlade=CreateTrigger()call DisableTrigger(gg_trg_GravityBlade)
call TriggerRegisterAnyUnitEventBJ(gg_trg_GravityBlade,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_GravityBlade,Condition(function Trig_GravityBlade_Conditions))call TriggerAddAction(gg_trg_GravityBlade,function Trig_GravityBlade_Actions)endfunctionfunction Trig_Gravity_Slam_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FL')endfunctionfunction Trig_Gravity_Slam_Actions takes nothing returns nothing
local real array xylocal real r
local real dmglocal unit u=GetTriggerUnit()local unit pickedlocal player p=GetOwningPlayer(u)local group glocal group g2=CreateGroup()
local integer iset xy[0]=GetUnitX(u)set xy[1]=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h0CY',xy[0],xy[1],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,.75)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h0CZ',xy[0],xy[1],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,3.)
call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call TriggerSleepAction(.01)
call DestroyTreeXY(xy[0],xy[1],600.)
set g=CreateGroupXY(xy[0],xy[1],2000.,p)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(GetUnitAbilityLevel(picked,'B03P')>0)then
call GroupAddUnit(g2,picked)
endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset r=.8
set dmg=(2.5*I2R(GetHeroStr(u,true)))set i=0loop
call TriggerSleepAction(r)set g=CreateGroup()call GroupAddGroup(g2,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(p,'h0CZ',xy[0],xy[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call UnitDamageTarget(u,picked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(picked)<1)thencall GroupRemoveUnit(g2,picked)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset i=i+1exitwhen(i>3)or(GroupCountUnits(g2)<1)endloopset u=nullset p=nullendfunctionfunction InitTrig_Gravity_Slam takes nothing returns nothing
set gg_trg_Gravity_Slam=CreateTrigger()call TriggerAddCondition(gg_trg_Gravity_Slam,Condition(function Trig_Gravity_Slam_Conditions))call TriggerAddAction(gg_trg_Gravity_Slam,function Trig_Gravity_Slam_Actions)endfunctionfunction Trig_Gvs_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FM')endfunctionfunction Trig_Gvs_Actions takes nothing returns nothinglocal group gset udg_Gvs_Unit=GetTriggerUnit()set udg_Gvs_XY[0]=GetSpellTargetX()set udg_Gvs_XY[1]=GetSpellTargetY()set udg_Gvs_XY[2]=GetUnitX(udg_Gvs_Unit)
set udg_Gvs_XY[3]=GetUnitY(udg_Gvs_Unit)
set udg_Gvs_Real[0]=AngleBetweenXY(udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_XY[0],udg_Gvs_XY[1])set udg_Gvs_XY[0]=PolarX(udg_Gvs_XY[0],50.,udg_Gvs_Real[0])set udg_Gvs_XY[1]=PolarY(udg_Gvs_XY[1],50.,udg_Gvs_Real[0])set udg_Gvs_Real[1]=45.set udg_Gvs_Real[2]=250.
set udg_Gvs_Real[3]=(350.+(50.*I2R(GetUnitAbilityLevel(udg_Gvs_Unit,'A0FM')))+((3.5+(I2R(GetUnitAbilityLevel(udg_Gvs_Unit,'A0FM'))*.5))*I2R(GetHeroStr(udg_Gvs_Unit,true))))
set udg_Gvs_SEff="Abilities\\Spells\\Items\\AIil\\AIilTarget.mdl"set udg_Gvs_Own=GetOwningPlayer(udg_Gvs_Unit)call DisplayText("Jigoku Tabi",udg_Gvs_Unit,.023,true,$FF,$FF,$FF,$FF)set udg_Gvs_Eff=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",udg_Gvs_Unit,"hand right")
set bj_lastCreatedUnit=CreateUnit(udg_Gvs_Own,'h0D0',udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call PauseSystem(udg_Gvs_Unit,true)call SetUnitTimeScale(udg_Gvs_Unit,2.5)set udg_Gvs_Int[0]=35set udg_Gvs_Int[1]=6
call EnableTrigger(gg_trg_GvsL)endfunctionfunction InitTrig_Gvs takes nothing returns nothingset gg_trg_Gvs=CreateTrigger()call TriggerAddCondition(gg_trg_Gvs,Condition(function Trig_Gvs_Conditions))
call TriggerAddAction(gg_trg_Gvs,function Trig_Gvs_Actions)endfunctionfunction GvsL_Cond takes nothing returns boolean
if(DistanceBetweenXY(udg_Gvs_XY[0],udg_Gvs_XY[1],udg_Gvs_XY[2],udg_Gvs_XY[3])<70.)thenreturn false
elseif(GetWidgetLife(udg_Gvs_Unit)<1)thenreturn false
elseif(udg_Gvs_Int[0]<1)then
return false
else
return trueendifendfunctionfunction Trig_GvsL_Actions takes nothing returns nothing
local group glocal unit pickedlocal unit dummy
set udg_Gvs_XY[2]=GetUnitX(udg_Gvs_Unit)
set udg_Gvs_XY[3]=GetUnitY(udg_Gvs_Unit)
set udg_Gvs_Real[0]=AngleBetweenXY(udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_XY[0],udg_Gvs_XY[1])set udg_Gvs_Int[0]=udg_Gvs_Int[0]-1if(GvsL_Cond())thenif(udg_Gvs_Int[1]==6)thenset udg_Gvs_Int[1]=0
call SetUnitAnimation(udg_Gvs_Unit,"attack")
else
set udg_Gvs_Int[1]=udg_Gvs_Int[1]+1endifset bj_lastCreatedUnit=CreateUnit(udg_Gvs_Own,'h017',udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_Real[0])call KillUnit(bj_lastCreatedUnit)set udg_Gvs_XY[2]=PolarX(udg_Gvs_XY[2],udg_Gvs_Real[1],udg_Gvs_Real[0])set udg_Gvs_XY[3]=PolarY(udg_Gvs_XY[3],udg_Gvs_Real[1],udg_Gvs_Real[0])call SetUnitFacing(udg_Gvs_Unit,udg_Gvs_Real[0])
call UnitMoveXY(udg_Gvs_Unit,udg_Gvs_XY[2],udg_Gvs_XY[3])call DestroyTreeXY(udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_Real[2])set g=CreateGroupXY2(udg_Gvs_XY[2],udg_Gvs_XY[3],udg_Gvs_Real[2],udg_Gvs_Own,udg_Gvs_Group)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call GroupAddUnit(udg_Gvs_Group,picked)call DestroyEffect(AddSpecialEffectTarget(udg_Gvs_SEff,picked,"origin"))
set picked=nullendloopcall DestroyGroup(g)
set g=nullelse
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.01)
call DestroyEffect(udg_Gvs_Eff)set udg_Gvs_Eff=null
set g=CreateGroup()call GroupAddGroup(udg_Gvs_Group,g)call GroupClear(udg_Gvs_Group)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set udg_Gvs_XY[0]=GetUnitX(picked)set udg_Gvs_XY[1]=GetUnitY(picked)call TerrainDeformCrater(udg_Gvs_XY[0],udg_Gvs_XY[1],300.,200.,$9C4,false)set bj_lastCreatedUnit=CreateUnit(udg_Gvs_Own,'h08Q',udg_Gvs_XY[0],udg_Gvs_XY[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call UnitDamageTarget(udg_Gvs_Unit,picked,udg_Gvs_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set dummy=CreateUnit(udg_Gvs_Own,'h0CZ',udg_Gvs_XY[0],udg_Gvs_XY[1],bj_UNIT_FACING)call SetUnitScale(dummy,2.,2.,2.)call UnitApplyTimedLife(dummy,'BTLF',1.5)if(GetWidgetLife(picked)>0)thencall UnitRemoveAbility(dummy,'Amov')
call UnitAddAbility(dummy,'A0GH')call IssueTargetOrderById(dummy,$D007F,picked)endifset picked=nullset dummy=nullendloopcall DestroyGroup(g)
set g=nullcall SetUnitTimeScale(udg_Gvs_Unit,1.)call PauseSystem(udg_Gvs_Unit,false)
set udg_Gvs_Unit=nullset udg_Gvs_Own=null
set udg_Gvs_SEff=nullset udg_Gvs_XY[0]=.0
set udg_Gvs_XY[1]=.0
set udg_Gvs_XY[2]=.0
set udg_Gvs_XY[3]=.0
set udg_Gvs_Real[0]=.0set udg_Gvs_Real[1]=.0set udg_Gvs_Real[2]=.0set udg_Gvs_Real[3]=.0set udg_Gvs_Int[0]=0
set udg_Gvs_Int[1]=0
endifendfunctionfunction InitTrig_GvsL takes nothing returns nothing
set gg_trg_GvsL=CreateTrigger()call DisableTrigger(gg_trg_GvsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvsL,.04)call TriggerAddAction(gg_trg_GvsL,function Trig_GvsL_Actions)endfunctionfunction Trig_Meteor_Storm_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FO')endfunctionfunction Trig_Meteor_Storm_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local unit pickedlocal unit array dummylocal player p=GetOwningPlayer(u)local group glocal group g2local real array xylocal real array rlocal integer array iset r[0]=300.set r[1]=(800.+((2.+I2R(GetUnitAbilityLevel(u,'A0FO')))*I2R(GetHeroStr(u,true))))call Dynamic_Sound("Sounds\\FujitoraMeteor.mp3")
set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set g=CreateGroupXY(xy[0],xy[1],1200.,p)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thenset xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set dummy[i[0]]=CreateUnit(p,'h0D1',xy[0],xy[1],bj_UNIT_FACING)set i[0]=i[0]+1endifset picked=nullendloopcall DestroyGroup(g)
set g=nullif(i[0]>0)thencall TriggerSleepAction(.7)set i[1]=i[0]loop
set i[1]=i[1]-1set xy[0]=GetUnitX(dummy[i[1]])set xy[1]=GetUnitY(dummy[i[1]])set bj_lastCreatedUnit=CreateUnit(p,'h0D2',xy[0],xy[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',5.5)exitwhen(i[1]<1)
endloopcall TriggerSleepAction(.75)
set g2=CreateGroup()
loop
set i[0]=i[0]-1set xy[0]=GetUnitX(dummy[i[0]])set xy[1]=GetUnitY(dummy[i[0]])call RemoveUnit(dummy[i[0]])
set dummy[i[0]]=null
set bj_lastCreatedUnit=CreateUnit(p,'h095',xy[0],xy[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.5,3.5,3.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call DestroyTreeXY(xy[0],xy[1],r[0])
set g=CreateGroupXY2(xy[0],xy[1],r[0],p,g2)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call GroupAddUnit(g2,picked)
call UnitPureDamageTarget(u,picked,r[1])
set picked=nullendloopcall DestroyGroup(g)
set g=nullexitwhen(i[0]<1)
endloopcall DestroyGroup(g2)set g2=nullendifset u=nullset p=nullendfunctionfunction InitTrig_Meteor_Storm takes nothing returns nothing
set gg_trg_Meteor_Storm=CreateTrigger()call TriggerAddCondition(gg_trg_Meteor_Storm,Condition(function Trig_Meteor_Storm_Conditions))call TriggerAddAction(gg_trg_Meteor_Storm,function Trig_Meteor_Storm_Actions)endfunctionfunction Trig_Fgr_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FU')endfunctionfunction Trig_Fgr_Actions takes nothing returns nothingset udg_Fgr_Unit=GetTriggerUnit()set udg_Fgr_XY[0]=GetSpellTargetX()set udg_Fgr_XY[1]=GetSpellTargetY()set udg_Fgr_XY[2]=GetUnitX(udg_Fgr_Unit)
set udg_Fgr_XY[3]=GetUnitY(udg_Fgr_Unit)
call PauseSystem(udg_Fgr_Unit,true)call SetUnitAnimation(udg_Fgr_Unit,"spell two")call DisplayText("Moko",udg_Fgr_Unit,.023,false,$DC,5,5,$FF)
call Dynamic_Sound("Sounds\\Moko.mp3")call TriggerSleepAction(.15)
call SetUnitTimeScale(udg_Fgr_Unit,.1)set udg_Fgr_Own=GetOwningPlayer(udg_Fgr_Unit)set udg_Fgr_Int[0]=$Acall EnableTrigger(gg_trg_FgrC)endfunctionfunction InitTrig_Fgr takes nothing returns nothingset gg_trg_Fgr=CreateTrigger()call TriggerAddCondition(gg_trg_Fgr,Condition(function Trig_Fgr_Conditions))
call TriggerAddAction(gg_trg_Fgr,function Trig_Fgr_Actions)endfunctionfunction Trig_FgrC_Actions takes nothing returns nothing
if(udg_Fgr_Int[0]>0 and GetWidgetLife(udg_Fgr_Unit)>0)thenset udg_Fgr_Int[0]=udg_Fgr_Int[0]-1set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h0D4',udg_Fgr_XY[2],udg_Fgr_XY[3],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
call DisableTrigger(GetTriggeringTrigger())if(GetWidgetLife(udg_Fgr_Unit)>0)thencall Dynamic_Sound("Sounds\\ShakeIsland.mp3")set udg_Fgr_XY[2]=GetUnitX(udg_Fgr_Unit)
set udg_Fgr_XY[3]=GetUnitY(udg_Fgr_Unit)
set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h0D5',udg_Fgr_XY[2],udg_Fgr_XY[3],bj_UNIT_FACING)
call SetUnitTimeScale(bj_lastCreatedUnit,.5)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call SetUnitTimeScale(udg_Fgr_Unit,1.2)set udg_Fgr_Real[0]=AngleBetweenXY(udg_Fgr_XY[2],udg_Fgr_XY[3],udg_Fgr_XY[0],udg_Fgr_XY[1])set udg_Fgr_Real[1]=65.set udg_Fgr_Real[2]=350.
set udg_Fgr_Real[3]=(2000.+((10.+(I2R(GetUnitAbilityLevel(udg_Fgr_Unit,'A0FU'))*5.))*I2R(GetHeroStr(udg_Fgr_Unit,false))))set udg_Fgr_Real[4]=150.
set udg_Fgr_XY[2]=PolarX(udg_Fgr_XY[2],udg_Fgr_Real[4],udg_Fgr_Real[0])set udg_Fgr_XY[3]=PolarY(udg_Fgr_XY[3],udg_Fgr_Real[4],udg_Fgr_Real[0])set udg_Fgr_Real[4]=200.
set udg_Fgr_Real[5]=udg_Fgr_Real[0]-90.set udg_Fgr_XY[4]=PolarX(udg_Fgr_XY[2],udg_Fgr_Real[4],udg_Fgr_Real[5])set udg_Fgr_XY[5]=PolarY(udg_Fgr_XY[3],udg_Fgr_Real[4],udg_Fgr_Real[5])set udg_Fgr_Real[5]=udg_Fgr_Real[0]+90.set udg_Fgr_XY[6]=PolarX(udg_Fgr_XY[2],udg_Fgr_Real[4],udg_Fgr_Real[5])set udg_Fgr_XY[7]=PolarY(udg_Fgr_XY[3],udg_Fgr_Real[4],udg_Fgr_Real[5])set udg_Fgr_Real[4]=udg_Fgr_Real[0]-90.set udg_Fgr_Hash=InitHashtable()
set udg_Fgr_Bool=trueset udg_Fgr_Int[0]=25set udg_Fgr_Real[5]=12.call EnableTrigger(gg_trg_FgrL)call EnableTrigger(gg_trg_FgrL2)
call TriggerSleepAction(.02)
call SetUnitTimeScale(udg_Fgr_Unit,1.)call PauseSystem(udg_Fgr_Unit,false)
else
call SetUnitTimeScale(udg_Fgr_Unit,1.)call PauseSystem(udg_Fgr_Unit,false)
set udg_Fgr_Unit=nullset udg_Fgr_Own=null
set udg_Fgr_XY[0]=.0
set udg_Fgr_XY[1]=.0
set udg_Fgr_XY[2]=.0
set udg_Fgr_XY[3]=.0
set udg_Fgr_Int[0]=0
endifendifendfunctionfunction InitTrig_FgrC takes nothing returns nothing
set gg_trg_FgrC=CreateTrigger()call DisableTrigger(gg_trg_FgrC)
call TriggerRegisterTimerEventPeriodic(gg_trg_FgrC,.1)call TriggerAddAction(gg_trg_FgrC,function Trig_FgrC_Actions)endfunctionfunction Trig_FgrL_Actions takes nothing returns nothing
local group glocal unit pickedlocal real array xyif(udg_Fgr_Int[0]>0)then
set udg_Fgr_Int[0]=udg_Fgr_Int[0]-1set udg_Fgr_Int[1]=2
loop
set udg_Fgr_Int[2]=udg_Fgr_Int[1]+1set udg_Fgr_XY[udg_Fgr_Int[1]]=PolarX(udg_Fgr_XY[udg_Fgr_Int[1]],udg_Fgr_Real[1],udg_Fgr_Real[0])set udg_Fgr_XY[udg_Fgr_Int[2]]=PolarY(udg_Fgr_XY[udg_Fgr_Int[2]],udg_Fgr_Real[1],udg_Fgr_Real[0])call Dynamic_GroupShake(udg_Fgr_XY[udg_Fgr_Int[1]],udg_Fgr_XY[udg_Fgr_Int[2]],1.6,9.,udg_CameraArea,udg_Fgr_GroupShake)call DestroyTreeXY(udg_Fgr_XY[udg_Fgr_Int[1]],udg_Fgr_XY[udg_Fgr_Int[2]],udg_Fgr_Real[2])set g=CreateGroupXY2(udg_Fgr_XY[udg_Fgr_Int[1]],udg_Fgr_XY[udg_Fgr_Int[2]],udg_Fgr_Real[2],udg_Fgr_Own,udg_Fgr_Group)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call GroupAddUnit(udg_Fgr_Group,picked)call SaveInteger(udg_Fgr_Hash,GetHandleId(picked),0,25)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h00E',xy[0],xy[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Fgr_Real[3]))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(udg_Fgr_Unit,picked,udg_Fgr_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset udg_Fgr_Int[1]=udg_Fgr_Int[1]+2exitwhen udg_Fgr_Int[1]>6endloopif(udg_Fgr_Bool)then
set udg_Fgr_Bool=falseset bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h0D3',udg_Fgr_XY[2],udg_Fgr_XY[3],udg_Fgr_Real[4])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h0D3',udg_Fgr_XY[4],udg_Fgr_XY[5],udg_Fgr_Real[4])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h0D3',udg_Fgr_XY[6],udg_Fgr_XY[7],udg_Fgr_Real[4])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)else
set udg_Fgr_Bool=trueendifelse
call DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(1.5)
call DisableTrigger(gg_trg_FgrL2)call GroupClear(udg_Fgr_GroupShake)call GroupClear(udg_Fgr_Group)call FlushParentHashtable(udg_Fgr_Hash)set udg_Fgr_Hash=nullset udg_Fgr_Unit=nullset udg_Fgr_Own=null
set udg_Fgr_XY[0]=.0
set udg_Fgr_XY[1]=.0
set udg_Fgr_XY[2]=.0
set udg_Fgr_XY[3]=.0
set udg_Fgr_XY[4]=.0
set udg_Fgr_XY[5]=.0
set udg_Fgr_XY[6]=.0
set udg_Fgr_XY[7]=.0
set udg_Fgr_Real[0]=.0set udg_Fgr_Real[1]=.0set udg_Fgr_Real[2]=.0set udg_Fgr_Real[3]=.0set udg_Fgr_Real[4]=.0set udg_Fgr_Real[4]=.0set udg_Fgr_Real[5]=.0set udg_Fgr_Int[0]=0
set udg_Fgr_Int[1]=0
set udg_Fgr_Int[2]=0
set udg_Fgr_Bool=falseendifendfunctionfunction InitTrig_FgrL takes nothing returns nothing
set gg_trg_FgrL=CreateTrigger()call DisableTrigger(gg_trg_FgrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FgrL,.04)call TriggerAddAction(gg_trg_FgrL,function Trig_FgrL_Actions)endfunctionfunction Trig_FgrL2_Actions takes nothing returns nothinglocal unit pickedlocal real array xylocal integer id
local integer ilocal group g=CreateGroup()call GroupAddGroup(udg_Fgr_Group,g)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set id=GetHandleId(picked)set i=LoadInteger(udg_Fgr_Hash,id,0)-1if(i<1)thencall GroupRemoveUnit(udg_Fgr_Group,picked)else
call SaveInteger(udg_Fgr_Hash,id,0,i)endifset xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(udg_Fgr_Own,'h017',xy[0],xy[1],udg_Fgr_Real[0])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set xy[0]=PolarX(xy[0],udg_Fgr_Real[5],udg_Fgr_Real[0])set xy[1]=PolarY(xy[1],udg_Fgr_Real[5],udg_Fgr_Real[0])call DestroyTreeXY(xy[0],xy[1],100.)
call UnitMoveXY(picked,xy[0],xy[1])set picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_FgrL2 takes nothing returns nothingset gg_trg_FgrL2=CreateTrigger()
call DisableTrigger(gg_trg_FgrL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FgrL2,.04)
call TriggerAddAction(gg_trg_FgrL2,function Trig_FgrL2_Actions)endfunctionfunction AI_Kaguya_AttackedType takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())=='O00C')endfunctionfunction AI_Kaguya_AttackerType takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())=='O00C')
endfunctionfunction AI_Kaguya_AttackedCond takes nothing returns booleanif(not AI_Kaguya_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Kaguya_AttackerCond takes nothing returns booleanif(not AI_Kaguya_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Kaguya_CondOR takes nothing returns booleanreturn(AI_Kaguya_AttackedCond()or AI_Kaguya_AttackerCond())endfunctionfunction AI_Kaguya_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Kaguya_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Kaguya_Act takes nothing returns nothing
local unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Kaguya_AttackedType())then
set MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0GC')call SelectHeroSkill(MySelf,'A0G1')call SelectHeroSkill(MySelf,'A0FW')call SelectHeroSkill(MySelf,'A0GF')call SelectHeroSkill(MySelf,'A0FV')endifset xy[2]=GetUnitX(MyTarget)
set xy[3]=GetUnitY(MyTarget)
set ResultHP=(GetUnitLifePercent(MySelf)-GetUnitLifePercent(MyTarget))if(ResultHP>29.)then
set xy[0]=GetUnitX(MySelf)set xy[1]=GetUnitY(MySelf)if(DistanceBetweenXY(xy[0],xy[1],xy[2],xy[3])>499.)thenset xy[0]=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])set xy[1]=120.set xy[4]=PolarX(xy[2],xy[1],xy[0])set xy[5]=PolarY(xy[3],xy[1],xy[0])call IssuePointOrderById(MySelf,$D022D,xy[4],xy[5])call TriggerSleepAction(.5)endifendifcall IssueImmediateOrderById(MySelf,$D0084)if(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(MySelf,$D00CB,MyTarget)if(AI_Attacker)thencall IssuePointOrderById(MySelf,$D0270,xy[2],xy[3])call IssueImmediateOrderById(MySelf,$D009B)endifendifcall IssuePointOrderById(MySelf,$D00FA,xy[2],xy[3])endifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Kaguya takes nothing returns nothingset udg_AI_Trig[41]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[41],Condition(function AI_Kaguya_Cond))
call TriggerAddAction(udg_AI_Trig[41],function AI_Kaguya_Act)endfunctionfunction Trig_Ush_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0GG')endfunctionfunction Trig_Ush_Actions takes nothing returns nothinglocal real array xylocal player pset udg_Ush_Unit=GetTriggerUnit()set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(udg_Ush_Unit)
set xy[3]=GetUnitY(udg_Ush_Unit)
set udg_Ush_Real[0]=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])set xy[4]=PolarX(xy[2],-40.,udg_Ush_Real[0])
set xy[5]=PolarY(xy[3],-40.,udg_Ush_Real[0])
set p=GetOwningPlayer(udg_Ush_Unit)call DisplayText("Yomotsu Hirasaka",udg_Ush_Unit,.023,true,$FF,$FF,$FF,$FF)set udg_Ush_Dummy=CreateUnit(p,'h0DH',xy[2],xy[3],udg_Ush_Real[0])set bj_lastCreatedUnit=CreateUnit(p,'h0DG',xy[4],xy[5],udg_Ush_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,.7)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set udg_Ush_Real[0]=udg_Ush_Real[0]-180.
set bj_lastCreatedUnit=CreateUnit(p,'h0DG',xy[0],xy[1],udg_Ush_Real[0])call SetUnitTimeScale(bj_lastCreatedUnit,.7)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set udg_Ush_Real[1]=4.call SetUnitVertexColor(udg_Ush_Unit,$FF,$FF,$FF,0)call EnableTrigger(gg_trg_UshL)set p=nullendfunctionfunction InitTrig_Ush takes nothing returns nothingset gg_trg_Ush=CreateTrigger()call TriggerAddCondition(gg_trg_Ush,Condition(function Trig_Ush_Conditions))
call TriggerAddAction(gg_trg_Ush,function Trig_Ush_Actions)endfunctionfunction Trig_UshL_Actions takes nothing returns nothing
local integer ilocal real array xyif(udg_Ush_Int<20)thenset i=(udg_Ush_Int*$C)call SetUnitVertexColor(udg_Ush_Unit,$FF,$FF,$FF,i)call SetUnitVertexColor(udg_Ush_Dummy,$FF,$FF,$FF,$DC-i)
if(udg_Ush_Int<$A)thenset xy[0]=GetUnitX(udg_Ush_Dummy)set xy[1]=GetUnitY(udg_Ush_Dummy)set xy[0]=PolarX(xy[0],udg_Ush_Real[1],udg_Ush_Real[0])set xy[1]=PolarY(xy[1],udg_Ush_Real[1],udg_Ush_Real[0])call SetUnitX(udg_Ush_Dummy,xy[0])call SetUnitY(udg_Ush_Dummy,xy[1])endifset udg_Ush_Int=(udg_Ush_Int+1)else
call DisableTrigger(GetTriggeringTrigger())call SetUnitVertexColor(udg_Ush_Unit,$FF,$FF,$FF,$FF)call RemoveUnit(udg_Ush_Dummy)set udg_Ush_Unit=nullset udg_Ush_Dummy=nullset udg_Ush_Real[0]=.0set udg_Ush_Real[1]=.0set udg_Ush_Int=0endifendfunctionfunction InitTrig_UshL takes nothing returns nothing
set gg_trg_UshL=CreateTrigger()call DisableTrigger(gg_trg_UshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_UshL,.05)call TriggerAddAction(gg_trg_UshL,function Trig_UshL_Actions)endfunctionfunction Trig_Tbi_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FV')endfunctionfunction Trig_Tbi_Actions takes nothing returns nothingset udg_Tbi_Unit=GetTriggerUnit()set udg_Tbi_XY[0]=GetSpellTargetX()set udg_Tbi_XY[1]=GetSpellTargetY()set udg_Tbi_XY[2]=GetUnitX(udg_Tbi_Unit)
set udg_Tbi_XY[3]=GetUnitY(udg_Tbi_Unit)
set udg_Tbi_Real[0]=AngleBetweenXY(udg_Tbi_XY[2],udg_Tbi_XY[3],udg_Tbi_XY[0],udg_Tbi_XY[1])set udg_Tbi_Real[1]=82.set udg_Tbi_Real[2]=200.
set udg_Tbi_Real[3]=(68.+(72.*I2R(GetUnitAbilityLevel(udg_Tbi_Unit,'A0FV')))+(1.2*I2R(GetHeroInt(udg_Tbi_Unit,true))))set udg_Tbi_Own=GetOwningPlayer(udg_Tbi_Unit)if(GetUnitAbilityLevel(udg_Tbi_Unit,'B03S')>0)thenset udg_Tbi_BonusBool=trueelse
set udg_Tbi_BonusBool=falseendifset udg_Tbi_Real[4]=-300.set udg_Tbi_XY[2]=PolarX(udg_Tbi_XY[2],udg_Tbi_Real[4],udg_Tbi_Real[0])set udg_Tbi_XY[3]=PolarY(udg_Tbi_XY[3],udg_Tbi_Real[4],udg_Tbi_Real[0])set udg_Tbi_Dummy=CreateUnit(udg_Tbi_Own,'h0D6',udg_Tbi_XY[2],udg_Tbi_XY[3],udg_Tbi_Real[0])
call SetUnitScale(udg_Tbi_Dummy,6.,6.,6.)call SetUnitTimeScale(udg_Tbi_Dummy,1.5)
call SetUnitAnimation(udg_Tbi_Dummy,"spell")
call SetUnitFlyHeight(udg_Tbi_Dummy,120.,.0)
set udg_Tbi_Real[4]=100.
set udg_Tbi_XY[2]=PolarX(udg_Tbi_XY[2],udg_Tbi_Real[4],udg_Tbi_Real[0])set udg_Tbi_XY[3]=PolarY(udg_Tbi_XY[3],udg_Tbi_Real[4],udg_Tbi_Real[0])set udg_Tbi_Int=18set udg_Tbi_Real[4]=udg_Tbi_Real[0]-90.set udg_Tbi_Real[5]=.7set udg_Tbi_Hash=InitHashtable()
call EnableTrigger(gg_trg_TbiC)call EnableTrigger(gg_trg_TbiL)endfunctionfunction InitTrig_Tbi takes nothing returns nothingset gg_trg_Tbi=CreateTrigger()call TriggerAddCondition(gg_trg_Tbi,Condition(function Trig_Tbi_Conditions))
call TriggerAddAction(gg_trg_Tbi,function Trig_Tbi_Actions)endfunctionfunction Trig_TbiC_Actions takes nothing returns nothing
local real array xylocal real r
local integer ilocal unit dummy
if(udg_Tbi_Int>0)thenset udg_Tbi_Int=udg_Tbi_Int-1set r=GetRandomReal(-150.,150.)set xy[0]=PolarX(udg_Tbi_XY[2],r,udg_Tbi_Real[4])set xy[1]=PolarY(udg_Tbi_XY[3],r,udg_Tbi_Real[4])set r=GetRandomReal(50.,270.)set i=GetRandomInt(0,4)set dummy=CreateUnit(udg_Tbi_Own,'h0D7',xy[0],xy[1],udg_Tbi_Real[0])
call SetUnitUserData(dummy,$F)call GroupAddUnit(udg_Tbi_GroupDummy,dummy)call SetUnitFlyHeight(dummy,r,.0)if(i==1)then
call SetUnitVertexColor(dummy,0,$FF,$FF,$FF)
elseif(i==2)then
call SetUnitVertexColor(dummy,$FF,0,$FF,$FF)
elseif(i==3)then
call SetUnitVertexColor(dummy,$FF,$FF,0,$FF)
endifset dummy=nullelse
call DisableTrigger(GetTriggeringTrigger())call SetUnitTimeScale(udg_Tbi_Dummy,1.)call SetUnitAnimation(udg_Tbi_Dummy,"death")
call UnitApplyTimedLife(udg_Tbi_Dummy,'BTLF',1.)
set udg_Tbi_Dummy=nullcall TriggerSleepAction(1.5)
call DisableTrigger(gg_trg_TbiL)
call GroupClear(udg_Tbi_GroupDummy)set udg_Tbi_Unit=nullset udg_Tbi_Own=null
set udg_Tbi_XY[0]=.0
set udg_Tbi_XY[1]=.0
set udg_Tbi_XY[2]=.0
set udg_Tbi_XY[3]=.0
set udg_Tbi_Real[0]=.0set udg_Tbi_Real[1]=.0set udg_Tbi_Real[2]=.0set udg_Tbi_Real[3]=.0set udg_Tbi_Real[4]=.0set udg_Tbi_Real[5]=.0set udg_Tbi_Int=0set udg_Tbi_BonusBool=falsecall TriggerSleepAction(2.)call GroupClear(udg_Tbi_Group2)call FlushParentHashtable(udg_Tbi_Hash)set udg_Tbi_Hash=nullendifendfunctionfunction InitTrig_TbiC takes nothing returns nothing
set gg_trg_TbiC=CreateTrigger()call DisableTrigger(gg_trg_TbiC)
call TriggerRegisterTimerEventPeriodic(gg_trg_TbiC,.08)call TriggerAddAction(gg_trg_TbiC,function Trig_TbiC_Actions)endfunctionfunction TnhA_DOT takes nothing returns nothinglocal timer t=GetExpiredTimer()local effect eff
local integer atked_idlocal integer stacklocal integer timer_id=GetHandleId(t)local integer i=LoadInteger(udg_Tnh_Hash,timer_id,0)-1local unit atker
local unit atked=LoadUnitHandle(udg_Tnh_Hash,timer_id,2)
set atked_id=GetHandleId(atked)if(GetWidgetLife(atked)<1 or i<1)thencall PauseTimer(t)call DestroyTimer(t)
call FlushChildHashtable(udg_Tnh_Hash,timer_id)set atked_id=GetHandleId(atked)set stack=LoadInteger(udg_Tnh_Hash,atked_id,0)-1
if(stack<1)thenset eff=LoadEffectHandle(udg_Tnh_Hash,atked_id,1)call DestroyEffect(eff)set eff=null
call FlushChildHashtable(udg_Tnh_Hash,atked_id)else
call SaveInteger(udg_Tnh_Hash,atked_id,0,stack)endifelse
call SaveInteger(udg_Tnh_Hash,timer_id,0,i)set atker=LoadUnitHandle(udg_Tnh_Hash,timer_id,1)call UnitDamageTarget(atker,atked,udg_Tnh_Dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(atked)<1)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",atked,"origin"))endifset atker=nullendifset t=nullset atked=nullendfunctionfunction Trig_TbiL_FlushUnit_Actions takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u=LoadUnitHandle(udg_Tbi_Hash,GetHandleId(t),0)call PauseTimer(t)call DestroyTimer(t)
call GroupRemoveUnit(udg_Tbi_Group2,u)set t=nullset u=nullendfunctionfunction Trig_TbiL_Actions takes nothing returns nothing
local unit pickedlocal unit pickeddmg
local real array xylocal effect eff
local timer tlocal timer t2local integer timer2_idlocal integer picked_idlocal integer stacklocal integer ilocal group gdmg
local group g=CreateGroup()call GroupAddGroup(udg_Tbi_GroupDummy,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set i=GetUnitUserData(picked)-1if(i==0)then
call GroupRemoveUnit(udg_Tbi_GroupDummy,picked)call RemoveUnit(picked)else
call SetUnitUserData(picked,i)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set xy[0]=PolarX(xy[0],udg_Tbi_Real[1],udg_Tbi_Real[0])set xy[1]=PolarY(xy[1],udg_Tbi_Real[1],udg_Tbi_Real[0])call SetUnitX(picked,xy[0])call SetUnitY(picked,xy[1])call DestroyTreeXY(xy[0],xy[1],udg_Tbi_Real[2])set gdmg=CreateGroupXY2(xy[0],xy[1],udg_Tbi_Real[2],udg_Tbi_Own,udg_Tbi_Group2)loop
set pickeddmg=FirstOfGroup(gdmg)
exitwhen pickeddmg==null
call GroupRemoveUnit(gdmg,pickeddmg)
call GroupAddUnit(udg_Tbi_Group2,pickeddmg)call UnitDamageTarget(udg_Tbi_Unit,pickeddmg,udg_Tbi_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(pickeddmg)>0)thenset t=CreateTimer()call SaveUnitHandle(udg_Tbi_Hash,GetHandleId(t),0,pickeddmg)
call TimerStart(t,udg_Tbi_Real[5],false,function Trig_TbiL_FlushUnit_Actions)set t=nullif(udg_Tbi_BonusBool)thenset picked_id=GetHandleId(pickeddmg)
set stack=LoadInteger(udg_Tnh_Hash,picked_id,0)if(stack<5)thencall SaveInteger(udg_Tnh_Hash,picked_id,0,stack+1)if(LoadEffectHandle(udg_Tnh_Hash,picked_id,1)==null)then
set eff=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Barkskin\\BarkSkinTarget.mdl",pickeddmg,"chest")call SaveEffectHandle(udg_Tnh_Hash,picked_id,1,eff)set eff=null
endifset t2=CreateTimer()
set timer2_id=GetHandleId(t2)call SaveInteger(udg_Tnh_Hash,timer2_id,0,udg_Tnh_Max)call SaveUnitHandle(udg_Tnh_Hash,timer2_id,1,udg_Tbi_Unit)call SaveUnitHandle(udg_Tnh_Hash,timer2_id,2,pickeddmg)call TimerStart(t2,udg_Tnh_Per,true,function TnhA_DOT)set t=nullendifendifendifset pickeddmg=nullendloopcall DestroyGroup(gdmg)set gdmg=nullendifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_TbiL takes nothing returns nothing
set gg_trg_TbiL=CreateTrigger()call DisableTrigger(gg_trg_TbiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TbiL,.04)call TriggerAddAction(gg_trg_TbiL,function Trig_TbiL_Actions)endfunctionfunction Trig_Dark_Roots_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0GF')endfunctionfunction Trig_Dark_Roots_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit tar=GetSpellTargetUnit()local unit dummy
local real x=GetUnitX(tar)local real y=GetUnitY(tar)local player p=GetOwningPlayer(u)local integer buf='B040'
local real delay=.1call DestroyEffect(AddSpecialEffectTarget("BlueDeathCoil.mdl",tar,"origin"))
set dummy=CreateUnit(p,'h0DF',x,y,bj_UNIT_FACING)call SetUnitAnimation(dummy,"birth")
loop
call TriggerSleepAction(delay)exitwhen GetUnitAbilityLevel(tar,buf)<1set x=GetUnitX(tar)set y=GetUnitY(tar)call SetUnitX(dummy,x)call SetUnitY(dummy,y)endloopcall SetUnitAnimation(dummy,"death")
call UnitApplyTimedLife(dummy,'BTLF',.5)
set u=nullset tar=null
set dummy=nullset p=nullendfunctionfunction InitTrig_Dark_Roots takes nothing returns nothingset gg_trg_Dark_Roots=CreateTrigger()call TriggerAddCondition(gg_trg_Dark_Roots,Condition(function Trig_Dark_Roots_Conditions))call TriggerAddAction(gg_trg_Dark_Roots,function Trig_Dark_Roots_Actions)endfunctionfunction Trig_Tnh_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0FW')endfunctionfunction Trig_Tnh_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.1local integer array sklocal integer sklv=GetUnitAbilityLevel(u,'A0FW')
call DisplayText("Tomogoroshi no Haikotsu",u,.023,false,$FF,$FF,$FF,$FF)
call FrozenItemSwap(u,true)set udg_Tnh_TrigDelay=4.
set udg_Tnh_Dmg=((80.+(20.*I2R(sklv))+((.8+(I2R(sklv)*.2))*I2R(GetHeroInt(u,true))))/ I2R(udg_Tnh_Max))set udg_Tnh_Buff[0]='B03S'set udg_Tnh_Buff[1]='B03T'set udg_Tnh_Buff[2]='B03U'set sk[0]='A0FX'
set sk[1]='A0FY'
set sk[2]='A0FZ'
call UnitAddAbility(u,sk[0])
call UnitAddAbility(u,sk[1])
call UnitAddAbility(u,sk[2])
call EnableTrigger(gg_trg_TnhA)loop
call TriggerSleepAction(delay)exitwhen GetUnitAbilityLevel(u,udg_Tnh_Buff[0])<1set udg_Tnh_Dmg=((80.+(20.*I2R(sklv))+((.8+(I2R(sklv)*.2))*I2R(GetHeroInt(u,true))))/ I2R(udg_Tnh_Max))endloopcall DisableTrigger(gg_trg_TnhA)
call UnitRemoveAbility(u,sk[0])call UnitRemoveAbility(u,sk[1])call UnitRemoveAbility(u,sk[2])call FrozenItemSwap(u,false)
set u=nullendfunctionfunction InitTrig_Tnh takes nothing returns nothingset gg_trg_Tnh=CreateTrigger()call TriggerAddCondition(gg_trg_Tnh,Condition(function Trig_Tnh_Conditions))
call TriggerAddAction(gg_trg_Tnh,function Trig_Tnh_Actions)endfunctionfunction TnhA_DMGTakenCond takes nothing returns boolean
local unit u=GetTriggerUnit()if(GetUnitAbilityLevel(u,udg_Tnh_Buff[1])>0 or GetUnitAbilityLevel(u,udg_Tnh_Buff[2])>0)then
return trueelse
return false
endifendfunctionfunction TnhA_DMGTaken takes nothing returns nothing
local unit atker=GetEventDamageSource()local unit atked=GetTriggerUnit()local timer tlocal effect eff
local integer timer_idlocal integer atked_id=GetHandleId(atked)local integer stack=LoadInteger(udg_Tnh_Hash,atked_id,0)
call UnitRemoveAbility(atked,udg_Tnh_Buff[1])call UnitRemoveAbility(atked,udg_Tnh_Buff[2])if(stack<5)thencall SaveInteger(udg_Tnh_Hash,atked_id,0,stack+1)if(LoadEffectHandle(udg_Tnh_Hash,atked_id,1)==null)thenset eff=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Barkskin\\BarkSkinTarget.mdl",atked,"chest")call SaveEffectHandle(udg_Tnh_Hash,atked_id,1,eff)set eff=null
endifset t=CreateTimer()set timer_id=GetHandleId(t)call SaveInteger(udg_Tnh_Hash,timer_id,0,udg_Tnh_Max)call SaveUnitHandle(udg_Tnh_Hash,timer_id,1,atker)call SaveUnitHandle(udg_Tnh_Hash,timer_id,2,atked)call TimerStart(t,udg_Tnh_Per,true,function TnhA_DOT)set t=nullendifset atker=nullset atked=nullendfunctionfunction Trig_TnhA_Conditions takes nothing returns booleanif(GetUnitAbilityLevel(GetAttacker(),udg_Tnh_Buff[0])<1)then
return false
elseif(IsUnitInGroup(GetTriggerUnit(),udg_TnhA_Group))thenreturn false
endifreturn trueendfunctionfunction Trig_TnhA_Actions takes nothing returns nothing
local unit atked=GetTriggerUnit()local trigger tg=CreateTrigger()
call GroupAddUnit(udg_TnhA_Group,atked)call TriggerRegisterUnitEvent(tg,atked,EVENT_UNIT_DAMAGED)call TriggerAddCondition(tg,Condition(function TnhA_DMGTakenCond))call TriggerAddAction(tg,function TnhA_DMGTaken)
call TriggerSleepAction(udg_Tnh_TrigDelay)call DestroyTrigger(tg)set tg=nullcall GroupRemoveUnit(udg_TnhA_Group,atked)set atked=nullendfunctionfunction InitTrig_TnhA takes nothing returns nothing
set gg_trg_TnhA=CreateTrigger()call DisableTrigger(gg_trg_TnhA)
call TriggerRegisterAnyUnitEventBJ(gg_trg_TnhA,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_TnhA,Condition(function Trig_TnhA_Conditions))call TriggerAddAction(gg_trg_TnhA,function Trig_TnhA_Actions)endfunctionfunction Trig_Aoi_Learn_Conditions takes nothing returns boolean
return(GetLearnedSkill()=='A0G1')endfunctionfunction Trig_Aoi_Learn_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()local integer sklv=GetLearnedSkillLevel()if(sklv>1)thencall SetUnitAbilityLevel(u,'A0G2',sklv)call SetUnitAbilityLevel(u,'A0G3',sklv)call SetUnitAbilityLevel(u,'A0G4',sklv)call SetUnitAbilityLevel(u,'A0G5',sklv)if(sklv>4)thencall DestroyTrigger(GetTriggeringTrigger())endifendifset u=nullendfunctionfunction InitTrig_Aoi_Learn takes nothing returns nothingset gg_trg_Aoi_Learn=CreateTrigger()
call TriggerAddCondition(gg_trg_Aoi_Learn,Condition(function Trig_Aoi_Learn_Conditions))
call TriggerAddAction(gg_trg_Aoi_Learn,function Trig_Aoi_Learn_Actions)endfunctionfunction Aoi_TurnOff takes nothing returns nothingset udg_Aoi_Bool=falseendfunctionfunction Aoi_Reverse_Act takes nothing returns nothinglocal integer i=0local integer max=3local real array xyloop
set xy[0]=RandomXInRect(udg_Aoi_Rect)set xy[1]=RandomYInRect(udg_Aoi_Rect)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h0DB',xy[0],xy[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=i+1exitwhen i>maxendloopendfunctionfunction Aoi_Sand_Act takes nothing returns nothinglocal group g=CreateGroup()local unit pickedlocal real array xycall GroupAddGroup(udg_Aoi_GroupDummy,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set xy[0]=RandomXInRect(udg_Aoi_Rect)set xy[1]=RandomYInRect(udg_Aoi_Rect)call IssuePointOrderById(picked,$D0016,xy[0],xy[1])set picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction Aoi_Dissolve_Act takes nothing returns nothinglocal group glocal unit pickedset g=CreateGroupXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0],udg_Aoi_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitDamageTarget(udg_Aoi_Unit,picked,udg_Aoi_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(picked)<1)thencall DestroyEffect(AddSpecialEffectTarget("DoomDeathLowEff.mdl",picked,"origin"))endifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction Aoi_CreateDummy takes integer utype,integer max returns nothing
local integer i=1local real array xyloop
set xy[0]=RandomXInRect(udg_Aoi_Rect)set xy[1]=RandomYInRect(udg_Aoi_Rect)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,utype,xy[0],xy[1],GetRandomReal(0,360))call GroupAddUnit(udg_Aoi_GroupDummy,bj_lastCreatedUnit)
set i=i+1exitwhen i>maxendloopendfunctionfunction Aoi_ReFillTerrain_Act takes nothing returns nothing
call SetTerrainType(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Int[4],udg_Aoi_Int[0],udg_Aoi_Int[1],udg_Aoi_Int[2])
endfunctionfunction Trig_Aoi_Conditions takes nothing returns booleanlocal integer skId=GetSpellAbilityId()if(skId=='A0G2')then
return trueelseif(skId=='A0G3')then
return trueelseif(skId=='A0G4')then
return trueelseif(skId=='A0G5')then
return trueendifreturn false
endfunctionfunction Trig_Aoi_InitTerrain takes integer ttype returns nothingcall SetTerrainType(udg_Aoi_XY[0],udg_Aoi_XY[1],ttype,udg_Aoi_Int[0],udg_Aoi_Int[1],udg_Aoi_Int[2])call DestroyTreeXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0])endfunctionfunction Trig_Aoi_Actions takes nothing returns nothinglocal integer sk_main=GetSpellAbilityId()local integer sk_dummylocal integer old_terlocal real duringlocal real delay
local real array xylocal group glocal unit pickedlocal unit dummy
local timer tlocal timer t2set udg_Aoi_Unit=GetTriggerUnit()set udg_Aoi_Bool=trueset udg_Aoi_Own=GetOwningPlayer(udg_Aoi_Unit)call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G2',false)
call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G3',false)
call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G4',false)
call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G5',false)
set udg_Aoi_Real[0]=1190.set udg_Aoi_Real[1]=2.5set udg_Aoi_Real[2]=((2.+(I2R(GetUnitAbilityLevel(udg_Aoi_Unit,sk_main))*1.))*I2R(GetHeroInt(udg_Aoi_Unit,true)))set udg_Aoi_XY[0]=GetUnitX(udg_Aoi_Unit)
set udg_Aoi_XY[1]=GetUnitY(udg_Aoi_Unit)
set udg_Aoi_Int[0]=-1set udg_Aoi_Int[1]=$Aset udg_Aoi_Int[2]=0
set udg_Aoi_Int[3]=GetUnitAbilityLevel(udg_Aoi_Unit,'A0G1')set udg_Aoi_Rect=CreateRectXY(udg_Aoi_XY[0],udg_Aoi_XY[1],1700.,1700.)set old_ter=GetTerrainType(udg_Aoi_XY[0],udg_Aoi_XY[1])set during=18.+(I2R(udg_Aoi_Int[3])*2.)call DisplayText("Amenominaka",udg_Aoi_Unit,.023,false,$FF,$FF,$FF,$FF)call SoundPatch_Spell(udg_soundPatch_Naruto+"\\Kaguya\\Amenominaka.wav",GetUnitX(udg_Aoi_Unit),GetUnitY(udg_Aoi_Unit))set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h039',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitTimeScale(bj_lastCreatedUnit,7.)
call SetUnitScale(bj_lastCreatedUnit,9.5,9.5,9.5)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h039',udg_Aoi_XY[0],udg_Aoi_XY[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitTimeScale(bj_lastCreatedUnit,7.)
call SetUnitScale(bj_lastCreatedUnit,9.5,9.5,9.5)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h039',udg_Aoi_XY[0],udg_Aoi_XY[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitTimeScale(bj_lastCreatedUnit,7.)
call SetUnitScale(bj_lastCreatedUnit,9.5,9.5,9.5)if(sk_main=='A0G2')thenset udg_Aoi_Int[4]='Dlav'call Aoi_CreateDummy('h09D',$E)set udg_Aoi_Real[3]=udg_Aoi_Real[2]*1.5set g=CreateGroupXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0],udg_Aoi_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("DoomDeathLowEff.mdl",picked,"origin"))call UnitDamageTarget(udg_Aoi_Unit,picked,udg_Aoi_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset udg_Aoi_Real[2]=udg_Aoi_Real[2]*.35set udg_Aoi_Real[3]=1.set t2=CreateTimer()
call TimerStart(t2,udg_Aoi_Real[3],true,function Aoi_Dissolve_Act)elseif(sk_main=='A0G3')thenset udg_Aoi_Int[4]='Isnw'call Aoi_CreateDummy('h0D9',$E)set dummy=CreateUnit(udg_Aoi_Own,'h000',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)call UnitAddAbility(dummy,'A0G7')set g=CreateGroupXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0],udg_Aoi_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdl",picked,"origin"))set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h0D9',xy[0],xy[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call UnitDamageTarget(udg_Aoi_Unit,picked,udg_Aoi_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h0D8',xy[0],xy[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)if(GetWidgetLife(picked)>0)thencall UnitAddAbility(bj_lastCreatedUnit,'A0G6')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,picked)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullelseif(sk_main=='A0G4')thenset udg_Aoi_Int[4]='Idtr'call Aoi_CreateDummy('h0DC',3)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h0DA',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0G8')call IssuePointOrderById(bj_lastCreatedUnit,$D0270,udg_Aoi_XY[0],udg_Aoi_XY[1])call SetUnitAnimation(bj_lastCreatedUnit,"death")set dummy=CreateUnit(udg_Aoi_Own,'h0DA',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)call UnitAddAbility(dummy,'A0G9')call SetUnitAbilityLevel(dummy,'A0G9',udg_Aoi_Int[3])call SetUnitAnimation(dummy,"death")
set g=CreateGroupXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0],udg_Aoi_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("Sandsplash.mdl",picked,"origin"))
call UnitDamageTarget(udg_Aoi_Unit,picked,udg_Aoi_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall Aoi_Sand_Act()set udg_Aoi_Real[3]=3.set t2=CreateTimer()
call TimerStart(t2,udg_Aoi_Real[3],true,function Aoi_Sand_Act)else
set udg_Aoi_Int[4]='Jsqd'set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'u003',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,'A0GA')call IssuePointOrderById(bj_lastCreatedUnit,$D0270,udg_Aoi_XY[0],udg_Aoi_XY[1])set dummy=CreateUnit(udg_Aoi_Own,'h000',udg_Aoi_XY[0],udg_Aoi_XY[1],bj_UNIT_FACING)call UnitAddAbility(dummy,'A0GB')call SetUnitAbilityLevel(dummy,'A0GB',udg_Aoi_Int[3])set g=CreateGroupXY(udg_Aoi_XY[0],udg_Aoi_XY[1],udg_Aoi_Real[0],udg_Aoi_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set xy[0]=GetUnitX(picked)set xy[1]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(udg_Aoi_Own,'h0DB',xy[0],xy[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\DemonBoltImpact\\DemonBoltImpact.mdl",picked,"origin"))
call DestroyEffect(AddSpecialEffectTarget("BlackBlink.mdl",picked,"origin"))
call UnitDamageTarget(udg_Aoi_Unit,picked,udg_Aoi_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset udg_Aoi_Real[3]=.5set t2=CreateTimer()
call TimerStart(t2,udg_Aoi_Real[3],true,function Aoi_Reverse_Act)endifcall Trig_Aoi_InitTerrain(udg_Aoi_Int[4])set t=CreateTimer()call TimerStart(t,udg_Aoi_Real[1],true,function Aoi_ReFillTerrain_Act)set delay=.4
if(udg_Aoi_Timer==null)thenset udg_Aoi_Timer=CreateTimer()endifcall TimerStart(udg_Aoi_Timer,during,false,function Aoi_TurnOff)
call TriggerSleepAction(delay)call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G2',true)call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G3',true)call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G4',true)call SetPlayerAbilityAvailable(udg_Aoi_Own,'A0G5',true)loop
if(GetUnitState(udg_Aoi_Unit,UNIT_STATE_LIFE)<1)then
call Aoi_TurnOff()endifexitwhen not(udg_Aoi_Bool)call TriggerSleepAction(delay)endloopcall PauseTimer(udg_Aoi_Timer)call DestroyTimer(udg_Aoi_Timer)
set udg_Aoi_Timer=nullif(sk_main!='A0G2')thencall RemoveUnit(dummy)set dummy=nullendifif(sk_main!='A0G3')thencall PauseTimer(t2)call DestroyTimer(t2)set t2=nullendifcall PauseTimer(t)call DestroyTimer(t)
set t=nullset g=CreateGroup()call GroupAddGroup(udg_Aoi_GroupDummy,g)
call GroupClear(udg_Aoi_GroupDummy)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitApplyTimedLife(picked,'BTLF',.5)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall RemoveRect(udg_Aoi_Rect)set udg_Aoi_Rect=nullcall TriggerSleepAction(.5)call SetTerrainType(udg_Aoi_XY[0],udg_Aoi_XY[1],old_ter,udg_Aoi_Int[0],udg_Aoi_Int[1],udg_Aoi_Int[2])set udg_Aoi_Unit=nullset udg_Aoi_Own=null
set udg_Aoi_Real[0]=.0set udg_Aoi_Real[1]=.5set udg_Aoi_Real[2]=.0set udg_Aoi_XY[0]=.0
set udg_Aoi_XY[1]=.0
set udg_Aoi_Int[0]=0
set udg_Aoi_Int[1]=0
set udg_Aoi_Int[2]=0
set udg_Aoi_Int[3]=0
set udg_Aoi_Int[4]=0
endfunctionfunction InitTrig_Aoi takes nothing returns nothingset gg_trg_Aoi=CreateTrigger()call TriggerAddCondition(gg_trg_Aoi,Condition(function Trig_Aoi_Conditions))
call TriggerAddAction(gg_trg_Aoi,function Trig_Aoi_Actions)endfunctionfunction Trig_Tso_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0GC')or(GetSpellAbilityId()=='A0GD')endfunctionfunction Trig_Tso_Actions takes nothing returns nothinglocal integer sk=GetSpellAbilityId()
set udg_Tso_Unit[0]=GetTriggerUnit()
set udg_Tso_XY[0]=GetSpellTargetX()set udg_Tso_XY[1]=GetSpellTargetY()set udg_Tso_Real[0]=.04set udg_Tso_Real[1]=1000.if(sk=='A0GD')thenset udg_Tso_Real[2]=(1000.+((18.+(I2R(GetUnitAbilityLevel(udg_Tso_Unit[0],sk))*4.))*I2R(GetHeroInt(udg_Tso_Unit[0],true))))else
set udg_Tso_Real[2]=(1000.+((10.+(I2R(GetUnitAbilityLevel(udg_Tso_Unit[0],sk))*4.))*I2R(GetHeroInt(udg_Tso_Unit[0],true))))endifset udg_Tso_Own=GetOwningPlayer(udg_Tso_Unit[0])
call DisplayText("Bocho Gudodama",udg_Tso_Unit[0],.023,false,$DC,5,5,$FF)call Dynamic_Sound("Sounds\\Gudodama.mp3")set udg_Tso_Unit[1]=CreateUnit(udg_Tso_Own,'h0DD',udg_Tso_XY[0],udg_Tso_XY[1],bj_UNIT_FACING)set udg_Tso_Int[0]=0
set udg_Tso_Int[1]=$82set udg_Tso_Int[2]=$8Cset udg_Tso_Int[3]=4
call EnableTrigger(gg_trg_TsoL)endfunctionfunction InitTrig_Tso takes nothing returns nothingset gg_trg_Tso=CreateTrigger()call TriggerAddCondition(gg_trg_Tso,Condition(function Trig_Tso_Conditions))
call TriggerAddAction(gg_trg_Tso,function Trig_Tso_Actions)endfunctionfunction Trig_TsoL_Actions takes nothing returns nothing
local group glocal unit pickedlocal real r
if(udg_Tso_Int[0]<udg_Tso_Int[1]and GetWidgetLife(udg_Tso_Unit[0])>0)thenset udg_Tso_Int[0]=udg_Tso_Int[0]+1set r=(udg_Tso_Real[0]*I2R(udg_Tso_Int[0]))call SetUnitScale(udg_Tso_Unit[1],r,r,r)
if(udg_Tso_Int[0]<udg_Tso_Int[2]and udg_Tso_Int[3]==4)thenset udg_Tso_Int[3]=0
set bj_lastCreatedUnit=CreateUnit(udg_Tso_Own,'h0DE',udg_Tso_XY[0],udg_Tso_XY[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)else
set udg_Tso_Int[3]=udg_Tso_Int[3]+1endifelse
call DisableTrigger(GetTriggeringTrigger())call RemoveUnit(udg_Tso_Unit[1])
if(udg_Tso_Int[0]==udg_Tso_Int[1])thencall Dynamic_Sound("Sounds\\Explosion.mp3")set bj_lastCreatedUnit=CreateUnit(udg_Tso_Own,'h083',udg_Tso_XY[0],udg_Tso_XY[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,6.,6.,6.)call SetUnitVertexColor(bj_lastCreatedUnit,'d',0,40,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',7.)set bj_lastCreatedUnit=CreateUnit(udg_Tso_Own,'h088',udg_Tso_XY[0],udg_Tso_XY[1],bj_UNIT_FACING)
call SetUnitVertexColor(bj_lastCreatedUnit,50,20,'d',$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(udg_Tso_Own,'h02L',udg_Tso_XY[0],udg_Tso_XY[1],bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(udg_Tso_Own,'h01W',udg_Tso_XY[0],udg_Tso_XY[1],bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call Dynamic_GroupShake(udg_Tso_XY[0],udg_Tso_XY[1],udg_CameraShakeTime,20.,udg_CameraArea,null)
call DestroyTreeXY(udg_Tso_XY[0],udg_Tso_XY[1],udg_Tso_Real[1])set g=CreateGroupXY(udg_Tso_XY[0],udg_Tso_XY[1],udg_Tso_Real[1],udg_Tso_Own)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Tso_Real[2]))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(udg_Tso_Unit[0],picked,udg_Tso_Real[2],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullendifset udg_Tso_Unit[0]=null
set udg_Tso_Unit[0]=null
set udg_Tso_Own=null
set udg_Tso_XY[0]=.0
set udg_Tso_XY[1]=.0
set udg_Tso_Real[0]=.0set udg_Tso_Real[1]=.0set udg_Tso_Real[2]=.0set udg_Tso_Int[0]=0
set udg_Tso_Int[1]=0
set udg_Tso_Int[2]=0
set udg_Tso_Int[3]=0
endifendfunctionfunction InitTrig_TsoL takes nothing returns nothing
set gg_trg_TsoL=CreateTrigger()call DisableTrigger(gg_trg_TsoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TsoL,.04)call TriggerAddAction(gg_trg_TsoL,function Trig_TsoL_Actions)endfunctionfunction AI_Ikkaku_AttackedType takes nothing returns booleanlocal unit u=GetTriggerUnit()return(GetUnitTypeId(u)=='U00L' or Is_IkkakuBankai(u))endfunctionfunction AI_Ikkaku_AttackerType takes nothing returns booleanlocal unit u=GetAttacker()return(GetUnitTypeId(u)=='U00L' or Is_IkkakuBankai(u))endfunctionfunction AI_Ikkaku_AttackedCond takes nothing returns booleanif(not AI_Ikkaku_AttackedType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetTriggerUnit()))!=MAP_CONTROL_COMPUTER)then
return false
endifreturn trueendfunctionfunction AI_Ikkaku_AttackerCond takes nothing returns booleanif(not AI_Ikkaku_AttackerType())then
return false
elseif(GetPlayerController(GetOwningPlayer(GetAttacker()))!=MAP_CONTROL_COMPUTER)thenreturn false
endifreturn trueendfunctionfunction AI_Ikkaku_CondOR takes nothing returns booleanreturn(AI_Ikkaku_AttackedCond()or AI_Ikkaku_AttackerCond())endfunctionfunction AI_Ikkaku_Cond takes nothing returns booleanif(IsUnitAlly(GetAttacker(),GetOwningPlayer(GetTriggerUnit())))thenreturn false
elseif(not AI_Ikkaku_CondOR())thenreturn false
endifreturn trueendfunctionfunction AI_Ikkaku_Act takes nothing returns nothing
local unit MySelflocal unit MyTargetlocal real array xylocal boolean AI_Attacker=falselocal real ResultHPcall DisableTrigger(GetTriggeringTrigger())call TriggerSleepAction(.05)
if(AI_Ikkaku_AttackedType())then
set MyTarget=GetAttacker()set MySelf=GetTriggerUnit()else
set MySelf=GetAttacker()
set MyTarget=GetTriggerUnit()set AI_Attacker=true
endifif(GetUnitLifePercent(MySelf)>34. or(GetUnitLifePercent(MyTarget)<15. and IsUnitType(MyTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(MySelf)>0)then
call SelectHeroSkill(MySelf,'A0HC')call SelectHeroSkill(MySelf,'A0H8')call SelectHeroSkill(MySelf,'A0H6')call SelectHeroSkill(MySelf,'A0H5')call SelectHeroSkill(MySelf,'A0H4')endifif(AI_Attacker)thencall IssueTargetOrderById(MySelf,$D007F,MyTarget)endifif(IsUnitType(MyTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(MySelf,$D0271,MyTarget)call IssueImmediateOrderById(MySelf,$D0277)if(AI_Attacker)thencall IssueImmediateOrderById(MySelf,$D02B7)endifendifendifset MySelf=nullset MyTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(GetTriggeringTrigger())endfunctionfunction InitTrig_AI_Ikkaku takes nothing returns nothingset udg_AI_Trig[42]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[42],Condition(function AI_Ikkaku_Cond))
call TriggerAddAction(udg_AI_Trig[42],function AI_Ikkaku_Act)endfunctionfunction Trig_Great_Cleave_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0H4')endfunctionfunction Trig_Great_Cleave_Actions takes nothing returns nothing
local unit caster=GetTriggerUnit()local unit target=GetSpellTargetUnit()local unit pickedlocal player p=GetOwningPlayer(caster)local real array xylocal real array rlocal effect array efflocal group gset eff[0]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\Cripple\\CrippleTarget.mdl",caster,"origin")set eff[1]=AddSpecialEffectTarget("SadoBuff.mdl",caster,"hand,left")
set eff[2]=AddSpecialEffectTarget("SadoBuff.mdl",caster,"hand,right")set xy[0]=GetUnitX(caster)set xy[1]=GetUnitY(caster)set xy[2]=GetUnitX(target)set xy[3]=GetUnitY(target)set r[0]=AngleBetweenXY(xy[0],xy[1],xy[2],xy[3])
set r[1]=-175.set xy[4]=PolarX(xy[2],r[1],r[0])set xy[5]=PolarY(xy[3],r[1],r[0])call TriggerSleepAction(.01)
call SetUnitPosition(caster,xy[4],xy[5])
call SetUnitFacing(caster,r[0])set r[2]=(150.+(100.*I2R(GetUnitAbilityLevel(caster,'A0H4')))+I2R(GetHeroStr(caster,true)))set g=CreateGroupXY(xy[2],xy[3],300.,p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set xy[4]=GetUnitX(picked)set xy[5]=GetUnitY(picked)set bj_lastCreatedUnit=CreateUnit(p,'h00E',xy[4],xy[5],GetRandomReal(0,360))
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitDamageTarget(caster,picked,r[2],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset caster=nullset target=nullset p=nullcall TriggerSleepAction(.5)call DestroyEffect(eff[0])call DestroyEffect(eff[1])call DestroyEffect(eff[2])set eff[0]=nullset eff[1]=nullset eff[2]=nullendfunctionfunction InitTrig_Great_Cleave takes nothing returns nothing
set gg_trg_Great_Cleave=CreateTrigger()call TriggerAddCondition(gg_trg_Great_Cleave,Condition(function Trig_Great_Cleave_Conditions))call TriggerAddAction(gg_trg_Great_Cleave,function Trig_Great_Cleave_Actions)endfunctionfunction Trig_Counter_Spin_Conditions takes nothing returns booleanlocal unit u=GetTriggerUnit()local integer sklv=GetUnitAbilityLevel(u,udg_CounterSpin_Ability[0])
if(1>sklv)thenreturn false
elseif(IsUnitInGroup(u,udg_CounterSpin_Group))thenreturn false
elseif(GetUnitAbilityLevel(u,udg_CounterSpin_Ability[1])!=0)then
return false
elseif(GetRandomInt(1,'d')>6+(sklv*3))thenreturn false
else
return trueendifendfunctionfunction CounerSpinGroupRemove takes nothing returns nothing
local timer t=GetExpiredTimer()local integer id=GetHandleId(t)local unit u=LoadUnitHandle(udg_CounterSpin_Hash,id,0)call GroupRemoveUnit(udg_CounterSpin_Group,u)call FlushChildHashtable(udg_CounterSpin_Hash,id)call DestroyTimer(t)
set t=nullset u=nullendfunctionfunction Trig_Counter_Spin_Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local unit pickedlocal group glocal real array rlocal real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)local effect eff=AddSpecialEffectTarget("AttackSpin.mdl",u,"origin")
local timer tif(GetUnitAbilityLevel(u,udg_CounterSpin_Ability[2])>0)thenset r[0]=410.set r[1]=(175.+(3.*I2R(GetHeroStr(u,true))))
else
set r[0]=320.set r[1]=(175.+(2.*I2R(GetHeroStr(u,true))))
endifif(IsUnitIllusion(u))thencall GroupAddUnit(udg_CounterSpin_Group,u)set t=CreateTimer()call SaveUnitHandle(udg_CounterSpin_Hash,GetHandleId(t),0,u)
call TimerStart(t,1.07,false,function CounerSpinGroupRemove)
set t=nullelse
call SetAbilityCooldown(u,udg_CounterSpin_Ability[0],udg_CounterSpin_Ability[1],1.)endifcall SetUnitAnimation(u,"spell two")
call QueueUnitAnimation(u,"stand ready")
call DestroyTreeXY(x,y,r[0])
set g=CreateGroupXY(x,y,r[0],p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("BloodElementalMissile_LowEff.mdl",picked,"origin"))call UnitDamageTarget(u,picked,r[1],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set picked=nullendloopcall DestroyGroup(g)
set g=nullset u=nullset p=nullcall TriggerSleepAction(.3)call DestroyEffect(eff)set eff=null
endfunctionfunction InitTrig_Counter_Spin takes nothing returns nothing
set gg_trg_Counter_Spin=CreateTrigger()call DisableTrigger(gg_trg_Counter_Spin)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Counter_Spin,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Counter_Spin,Condition(function Trig_Counter_Spin_Conditions))call TriggerAddAction(gg_trg_Counter_Spin,function Trig_Counter_Spin_Actions)endfunctionfunction Trig_Ikkaku_Bankai_Death_Actions takes nothing returns nothinglocal unit u=GetDyingUnit()if(GetUnitAbilityLevel(u,udg_Ikkaku_UpgradeSk)>0)thencall UnitRemoveAbility(u,udg_Ikkaku_UpgradeSk)endifset u=nullendfunctionfunction Trig_Ikkaku_Bankai_Init_Conditions takes nothing returns booleanreturn(GetLearnedSkill()=='A0H8')endfunctionfunction Trig_Ikkaku_Bankai_Init_Actions takes nothing returns nothinglocal unit u=GetLearningUnit()local trigger trig=CreateTrigger()call TriggerRegisterUnitEvent(trig,u,EVENT_UNIT_DEATH)call TriggerAddAction(trig,function Trig_Ikkaku_Bankai_Death_Actions)set u=nullcall DestroyTrigger(gg_trg_Ikkaku_Bankai_Init)endfunctionfunction InitTrig_Ikkaku_Bankai_Init takes nothing returns nothingset gg_trg_Ikkaku_Bankai_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Ikkaku_Bankai_Init,Condition(function Trig_Ikkaku_Bankai_Init_Conditions))call TriggerAddAction(gg_trg_Ikkaku_Bankai_Init,function Trig_Ikkaku_Bankai_Init_Actions)endfunctionfunction Trig_Ikkaku_Bankai_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0H6')endfunctionfunction Trig_Ikkaku_Bankai_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
call SetUnitAnimation(u,"stand ready")if(not(Is_IkkakuBankai(u)))thenset p=GetOwningPlayer(u)
call DisplayText("Bankai Ryumon Hozukimaru",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h02L',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.5)set bj_lastCreatedUnit=CreateUnit(p,'h096',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.5)call TransfromAction(u,x,y)set p=nullelse
call UnitRemoveAbility(u,udg_Ikkaku_UpgradeSk)endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction InitTrig_Ikkaku_Bankai takes nothing returns nothingset gg_trg_Ikkaku_Bankai=CreateTrigger()
call TriggerAddCondition(gg_trg_Ikkaku_Bankai,Condition(function Trig_Ikkaku_Bankai_Conditions))
call TriggerAddAction(gg_trg_Ikkaku_Bankai,function Trig_Ikkaku_Bankai_Actions)endfunctionfunction Trig_Dragon_Charge_Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0HB')endfunctionfunction Trig_Dragon_Charge_Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.2local real per=(3.-(.2*I2R(GetUnitAbilityLevel(u,'A0HB'))))local real roundCount=.0
local real maxDur=30.local integer array buflocal integer skDummy='A0H9'
local integer skLv=2
local integer skMaxLv=$B
set buf[0]='B045'set buf[1]='A0H2'call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",u,"hand left"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MarkOfChaos\\MarkOfChaosTarget.mdl",u,"hand right"))call SetUnitAbilityLevel(u,skDummy,skLv)
call DisplayText(I2S(skLv-1)+"/10",u,.023,true,$DC,5,5,$FF)loop
call TriggerSleepAction(delay)exitwhen(maxDur<=0)or(GetUnitAbilityLevel(u,buf[0])==0)or(GetUnitAbilityLevel(u,buf[1])==0)set maxDur=maxDur-delayif(skLv<skMaxLv)then
set roundCount=roundCount+delayif(roundCount>=per)thenset roundCount=.0set skLv=skLv+1call SetUnitAbilityLevel(u,skDummy,skLv)
if(skLv==$B)then
call DisplayText("Maximum !",u,.023,true,$DC,5,5,$FF)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",u,"origin"))
else
call DisplayText(I2S(skLv-1)+"/10",u,.023,true,$DC,5,5,$FF)endifendifendifendloopif(GetUnitAbilityLevel(u,buf[0])>0)thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",u,"chest"))call UnitRemoveAbility(u,buf[0])
endifcall SetUnitAbilityLevel(u,skDummy,1)set u=nullendfunctionfunction InitTrig_Dragon_Charge takes nothing returns nothingset gg_trg_Dragon_Charge=CreateTrigger()
call TriggerAddCondition(gg_trg_Dragon_Charge,Condition(function Trig_Dragon_Charge_Conditions))
call TriggerAddAction(gg_trg_Dragon_Charge,function Trig_Dragon_Charge_Actions)endfunctionfunction Trig_Fnm_Conditions takes nothing returns booleanreturn(GetSpellAbilityId()=='A0HD')endfunctionfunction Trig_Fnm_Actions takes nothing returns nothinglocal real array xyset udg_Fnm_Unit=GetTriggerUnit()set xy[0]=GetSpellTargetX()set xy[1]=GetSpellTargetY()set xy[2]=GetUnitX(udg_Fnm_Unit)
set xy[3]=GetUnitY(udg_Fnm_Unit)
set udg_Fnm_Own=GetOwningPlayer(udg_Fnm_Unit)set udg_Fnm_Real[0]=AngleBetweenXY(xy[2],xy[3],xy[0],xy[1])set udg_Fnm_Real[1]=45.set udg_Fnm_Real[2]=350.
set udg_Fnm_Real[3]=(1800.+((10.+(I2R(GetUnitAbilityLevel(udg_Fnm_Unit,'A0HD'))*5.))*I2R(GetHeroStr(udg_Fnm_Unit,false))))set udg_Fnm_Real[4]=(GetUnitState(udg_Fnm_Unit,UNIT_STATE_LIFE)*.12)/ $A
set udg_Fnm_Real[5]=30.set udg_Fnm_Real[6]=.82set udg_Fnm_Int[0]=36set udg_Fnm_Int[1]=36set udg_Fnm_Hash=InitHashtable()
call PauseSystem(udg_Fnm_Unit,true)call SetUnitTimeScale(udg_Fnm_Unit,.6)call SetUnitAnimation(udg_Fnm_Unit,"spell three")call TriggerSleepAction(.01)
set udg_Fnm_Bool=truecall EnableTrigger(gg_trg_FnmL)call EnableTrigger(gg_trg_FnmL2)
endfunctionfunction InitTrig_Fnm takes nothing returns nothingset gg_trg_Fnm=CreateTrigger()call TriggerAddCondition(gg_trg_Fnm,Condition(function Trig_Fnm_Conditions))
call TriggerAddAction(gg_trg_Fnm,function Trig_Fnm_Actions)endfunctionfunction FnmL_DummySpawn takes real x,real y returns nothing
if(udg_Fnm_Bool)then
set udg_Fnm_Bool=falseset bj_lastCreatedUnit=CreateUnit(udg_Fnm_Own,'h0BX',x,y,bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.6,1.6,1.6)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
set udg_Fnm_Bool=trueendifendfunctionfunction Trig_FnmL_Actions takes nothing returns nothing
local group glocal unit pickedlocal real array xylocal real hplocal integer id
if(GetUnitStatePercent(udg_Fnm_Unit,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<$F)then
set udg_Fnm_Int[0]=0
else
set hp=GetUnitState(udg_Fnm_Unit,UNIT_STATE_LIFE)-udg_Fnm_Real[4]call SetUnitState(udg_Fnm_Unit,UNIT_STATE_LIFE,RMaxBJ(0,hp))
endifif(udg_Fnm_Int[0]>0)then
set xy[0]=GetUnitX(udg_Fnm_Unit)
set xy[1]=GetUnitY(udg_Fnm_Unit)
set xy[2]=PolarX(xy[0],udg_Fnm_Real[1],udg_Fnm_Real[0])set xy[3]=PolarY(xy[1],udg_Fnm_Real[1],udg_Fnm_Real[0])if(UnitMoveXY(udg_Fnm_Unit,xy[2],xy[3]))then
call FnmL_DummySpawn(xy[2],xy[3])else
call FnmL_DummySpawn(xy[0],xy[1])endifcall DestroyTreeXY(xy[2],xy[3],udg_Fnm_Real[2])set g=CreateGroupXY2(xy[2],xy[3],udg_Fnm_Real[2],udg_Fnm_Own,udg_Fnm_Group2)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call GroupAddUnit(udg_Fnm_Group2,picked)
call GroupAddUnit(udg_Fnm_Group3,picked)
set id=GetHandleId(picked)set xy[4]=GetUnitX(picked)set xy[5]=GetUnitY(picked)call SaveInteger(udg_Fnm_Hash,id,0,udg_Fnm_Int[1])call SaveReal(udg_Fnm_Hash,id,1,AngleBetweenXY(xy[2],xy[3],xy[4],xy[5]))
call SaveReal(udg_Fnm_Hash,id,2,udg_Fnm_Real[5])
if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(udg_Fnm_Real[3]))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(udg_Fnm_Unit,picked,udg_Fnm_Real[3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(picked)>0)thenset bj_lastCreatedUnit=CreateUnit(udg_Fnm_Own,'u003',xy[0],xy[1],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A0HE')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullset udg_Fnm_Int[0]=udg_Fnm_Int[0]-1else
call DisableTrigger(gg_trg_FnmL)
call GroupClear(udg_Fnm_Group2)call PauseSystem(udg_Fnm_Unit,false)
call SetUnitTimeScale(udg_Fnm_Unit,1.)call QueueUnitAnimation(udg_Fnm_Unit,"stand")set udg_Fnm_Unit=nullset udg_Fnm_Real[0]=.0set udg_Fnm_Real[1]=.0set udg_Fnm_Real[2]=.0set udg_Fnm_Real[3]=.0set udg_Fnm_Real[4]=.0set udg_Fnm_Real[5]=.0set udg_Fnm_Int[0]=0
set udg_Fnm_Int[1]=0
set udg_Fnm_Bool=falsecall TriggerSleepAction(2.)call DisableTrigger(gg_trg_FnmL2)call GroupClear(udg_Fnm_Group3)call FlushParentHashtable(udg_Fnm_Hash)set udg_Fnm_Hash=nullset udg_Fnm_Own=null
set udg_Fnm_Real[6]=.0endifendfunctionfunction InitTrig_FnmL takes nothing returns nothing
set gg_trg_FnmL=CreateTrigger()call DisableTrigger(gg_trg_FnmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FnmL,.03)call TriggerAddAction(gg_trg_FnmL,function Trig_FnmL_Actions)endfunctionfunction Trig_FnmL2_Actions takes nothing returns nothinglocal group g=CreateGroup()local unit pickedlocal integer id
local integer ilocal real array xylocal real speed
local real facingcall GroupAddGroup(udg_Fnm_Group3,g)
loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)set id=GetHandleId(picked)set i=LoadInteger(udg_Fnm_Hash,id,0)-1if(i<1)thencall GroupRemoveUnit(udg_Fnm_Group3,picked)else
set facing=LoadReal(udg_Fnm_Hash,id,1)set speed=LoadReal(udg_Fnm_Hash,id,2)-udg_Fnm_Real[6]set xy[0]=PolarX(GetUnitX(picked),speed,facing)set xy[1]=PolarY(GetUnitY(picked),speed,facing)call UnitMoveXY(picked,xy[0],xy[1])call DestroyTreeXY(xy[0],xy[1],150.)
set bj_lastCreatedUnit=CreateUnit(udg_Fnm_Own,'h017',xy[0],xy[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SaveInteger(udg_Fnm_Hash,id,0,i)call SaveReal(udg_Fnm_Hash,id,2,speed)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullendfunctionfunction InitTrig_FnmL2 takes nothing returns nothingset gg_trg_FnmL2=CreateTrigger()
call DisableTrigger(gg_trg_FnmL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FnmL2,.04)
call TriggerAddAction(gg_trg_FnmL2,function Trig_FnmL2_Actions)endfunctionfunction AIAokiji___isAtked takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==AIAokiji___AIType1 or GetUnitTypeId(GetTriggerUnit())==AIAokiji___AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIAokiji___isAtker takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==AIAokiji___AIType1 or GetUnitTypeId(GetAttacker())==AIAokiji___AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIAokiji___Cond takes nothing returns booleanif(not(AIAokiji___isAtked()or AIAokiji___isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIAokiji___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real x
local real y
local real facinglocal boolean isAttacking=falsecall DisableTrigger(udg_AI_Trig[AIAokiji___AINo])call TriggerSleepAction(.05)
if(AIAokiji___isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifif(GetUnitLifePercent(mySelf)>34. or(GetUnitLifePercent(myTarget)<15. and IsUnitType(myTarget,UNIT_TYPE_HERO)))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0HP')call SelectHeroSkill(mySelf,'A0HO')call SelectHeroSkill(mySelf,'A0HN')call SelectHeroSkill(mySelf,'A0HM')call SelectHeroSkill(mySelf,'A0HF')endifif(isAttacking)thencall IssueTargetOrderById(mySelf,$D00FA,myTarget)endifif(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueImmediateOrderById(mySelf,$D0277)call IssueTargetOrderById(mySelf,$D0270,myTarget)set x=GetUnitX(myTarget)
set y=GetUnitY(myTarget)
set facing=AngleBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),x,y)
set x=PolarX(x,200.,facing)set y=PolarY(y,200.,facing)call IssuePointOrderById(mySelf,$D0271,x,y)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)else
call IssueImmediateOrderById(mySelf,$D026C)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(.5)call EnableTrigger(udg_AI_Trig[AIAokiji___AINo])
endfunctionfunction AIAokiji___Init takes nothing returns nothingset udg_AI_Trig[AIAokiji___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIAokiji___AINo],Condition(function AIAokiji___Cond))call TriggerAddAction(udg_AI_Trig[AIAokiji___AINo],function AIAokiji___Act)endfunctionfunction FrostCounter___DmgConditions takes nothing returns booleanreturn(GetUnitAbilityLevel(GetTriggerUnit(),FrostCounter___buffid)>0 and IsUnitType(GetEventDamageSource(),UNIT_TYPE_HERO))!=nullendfunctionfunction FrostCounter___DmgActions takes nothing returns nothing
local unit u=GetTriggerUnit()local real x=GetUnitX(u)
local real y=GetUnitY(u)
local player p=GetOwningPlayer(u)local real dmg=(GetHeroAgi(u,true)*4.)local unit pickedlocal group gset bj_lastCreatedUnit=CreateUnit(p,'h07Y',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p,'h02M',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)call DestroyTreeXY(x,y,FrostCounter___garea)
set g=CreateGroupXY(x,y,FrostCounter___garea,p)loop
set picked=FirstOfGroup(g)exitwhen picked==nullcall GroupRemoveUnit(g,picked)call UnitPureDamageTarget(u,picked,dmg)if(GetWidgetLife(picked)>0)thenset bj_lastCreatedUnit=CreateUnit(p,'h0DN',GetUnitX(picked),GetUnitY(picked),bj_UNIT_FACING)
call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullcall DisableTrigger(Aokiji_FrostCounterDmg)call UnitRemoveAbility(u,FrostCounter___blockSkid)set u=nullset p=nullendfunctionfunction FrostCounter___Conditions takes nothing returns boolean
return(GetSpellAbilityId()==FrostCounter___skid)
endfunctionfunction FrostCounter___Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.04
call EnableTrigger(Aokiji_FrostCounterDmg)call UnitAddAbility(u,FrostCounter___blockSkid)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,FrostCounter___buffid)<1)
endloopif(IsTriggerEnabled(Aokiji_FrostCounterDmg))then
call DisableTrigger(Aokiji_FrostCounterDmg)call UnitRemoveAbility(u,FrostCounter___blockSkid)endifset u=nullendfunctionfunction FrostCounter___Init takes nothing returns nothingcall TriggerAddCondition(Aokiji_FrostCounterDmg,Condition(function FrostCounter___DmgConditions))call TriggerAddAction(Aokiji_FrostCounterDmg,function FrostCounter___DmgActions)
set gg_trg_FrostCounter=CreateTrigger()call TriggerAddCondition(gg_trg_FrostCounter,Condition(function FrostCounter___Conditions))call TriggerAddAction(gg_trg_FrostCounter,function FrostCounter___Actions)endfunctionfunction PheasantBeak___Conditions takes nothing returns boolean
return(GetSpellAbilityId()==PheasantBeak___skid)
endfunctionfunction PheasantBeak___ActionsL takes nothing returns nothinglocal unit pickedlocal unit dummy
local group glocal real x
local real y
set PheasantBeak___i=PheasantBeak___i-1if(PheasantBeak___i>0)thenset x=PolarX(GetUnitX(PheasantBeak___u[1]),PheasantBeak___r,PheasantBeak___facing)set y=PolarY(GetUnitY(PheasantBeak___u[1]),PheasantBeak___r,PheasantBeak___facing)call SetUnitX(PheasantBeak___u[1],x)
call SetUnitY(PheasantBeak___u[1],y)
set dummy=CreateUnit(PheasantBeak___p,'h04O',x,y,PheasantBeak___facing)call SetUnitScale(dummy,1.6,1.6,1.6)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FreezingBreath\\FreezingBreathMissile.mdx",dummy,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdx",dummy,"origin"))call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=nullcall DestroyTreeXY(x,y,PheasantBeak___garea)
set g=CreateGroupXY2(x,y,PheasantBeak___garea,PheasantBeak___p,PheasantBeak___gcheck)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call GroupAddUnit(PheasantBeak___gcheck,picked)set bj_lastCreatedUnit=CreateUnit(PheasantBeak___p,'h0DN',GetUnitX(picked),GetUnitY(picked),bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitDamageTarget(PheasantBeak___u[0],picked,PheasantBeak___dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(PheasantBeak___t)call DestroyTimer(PheasantBeak___t)set PheasantBeak___t=nullset PheasantBeak___r=120.set x=PolarX(GetUnitX(PheasantBeak___u[1]),PheasantBeak___r,PheasantBeak___facing)set y=PolarY(GetUnitY(PheasantBeak___u[1]),PheasantBeak___r,PheasantBeak___facing)set bj_lastCreatedUnit=CreateUnit(PheasantBeak___p,'h05D',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call SetUnitFlyHeight(bj_lastCreatedUnit,50.,.0)
call SetUnitAnimation(bj_lastCreatedUnit,"death")call RemoveUnit(PheasantBeak___u[1])
call GroupClear(PheasantBeak___gcheck)set PheasantBeak___u[0]=null
set PheasantBeak___u[1]=null
set PheasantBeak___p=nullendifendfunctionfunction PheasantBeak___Actions takes nothing returns nothinglocal real array xlocal real array yset PheasantBeak___u[0]=GetTriggerUnit()
set x[0]=GetSpellTargetX()set y[0]=GetSpellTargetY()set x[1]=GetUnitX(PheasantBeak___u[0])set y[1]=GetUnitY(PheasantBeak___u[0])set PheasantBeak___facing=AngleBetweenXY(x[1],y[1],x[0],y[0])set PheasantBeak___r=180.set x[0]=PolarX(x[1],PheasantBeak___r,PheasantBeak___facing)
set y[0]=PolarY(y[1],PheasantBeak___r,PheasantBeak___facing)
set PheasantBeak___p=GetOwningPlayer(PheasantBeak___u[0])call DisplayText("Ice Block: Pheasant Beak",PheasantBeak___u[0],.023,true,$FF,$FF,$FF,$FF)set PheasantBeak___u[1]=CreateUnit(PheasantBeak___p,'h0DM',x[0],y[0],PheasantBeak___facing)set PheasantBeak___dmg=BasicDmg_Q(PheasantBeak___u[0],PheasantBeak___skid,1)
set PheasantBeak___garea=250.set PheasantBeak___r=45.
set PheasantBeak___i=17set PheasantBeak___t=CreateTimer()call TimerStart(PheasantBeak___t,.04,true,function PheasantBeak___ActionsL)endfunctionfunction PheasantBeak___Init takes nothing returns nothingset gg_trg_Pheasant_Beak=CreateTrigger()
call TriggerAddCondition(gg_trg_Pheasant_Beak,Condition(function PheasantBeak___Conditions))
call TriggerAddAction(gg_trg_Pheasant_Beak,function PheasantBeak___Actions)endfunctionfunction IceSaber___atkTrgCond takes nothing returns boolean
local integer iif(GetAttacker()!=IceSaber___iSaberUnit)then
return false
else
set i=GetRandomInt(0,99)
return(i<IceSaber___freezeRate)endifendfunctionfunction IceSaber___atkTrgActs takes nothing returns nothing
local unit atked=GetTriggerUnit()local unit pickedlocal player plocal group glocal real x
local real y
if(IceSaber___iSaberUnit!=null)thenset p=GetOwningPlayer(IceSaber___iSaberUnit)
set x=GetUnitX(atked)set y=GetUnitY(atked)set bj_lastCreatedUnit=CreateUnit(p,'h04O',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitAddAbility(bj_lastCreatedUnit,'A056')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A056',4)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,atked)call DestroyEffect(AddSpecialEffectTarget("IceNova2.mdl",bj_lastCreatedUnit,"origin"))set g=CreateGroupXY(x,y,IceSaber___garea,p)set p=nullloop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call UnitDamageTarget(IceSaber___iSaberUnit,picked,IceSaber___freezeDmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullendifset atked=nullendfunctionfunction IceSaber___deathTrgActs takes nothing returns nothingif(IsTriggerEnabled(IceSaber___atkTrg))thencall DisableTrigger(IceSaber___atkTrg)set IceSaber___iSaberUnit=nullendifendfunctionfunction IceSaber___Conditions takes nothing returns boolean
return(GetSpellAbilityId()=='A0HM')endfunctionfunction IceSaber___Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!='N02F')then
if(IceSaber___deathTrg==null)thenset IceSaber___deathTrg=CreateTrigger()call TriggerRegisterUnitEvent(IceSaber___deathTrg,u,EVENT_UNIT_DEATH)call TriggerAddAction(IceSaber___deathTrg,function IceSaber___deathTrgActs)endifset IceSaber___iSaberUnit=ucall EnableTrigger(IceSaber___atkTrg)set p=GetOwningPlayer(u)
call DisplayText("Ice Saber",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h07U',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h07S',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitVertexColor(bj_lastCreatedUnit,0,0,0,$FF)call TransfromAction(u,x,y)set p=nullelse
call IceSaber___deathTrgActs()endifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)set u=nullendfunctionfunction IceSaber___Init takes nothing returns nothingset gg_trg_Ice_Saber=CreateTrigger()
call TriggerAddCondition(gg_trg_Ice_Saber,Condition(function IceSaber___Conditions))
call TriggerAddAction(gg_trg_Ice_Saber,function IceSaber___Actions)set IceSaber___atkTrg=CreateTrigger()call DisableTrigger(IceSaber___atkTrg)call TriggerRegisterAnyUnitEventBJ(IceSaber___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(IceSaber___atkTrg,Condition(function IceSaber___atkTrgCond))call TriggerAddAction(IceSaber___atkTrg,function IceSaber___atkTrgActs)set IceSaber___deathTrg=null
endfunctionfunction IceTime___Conditions takes nothing returns booleanreturn(GetSpellAbilityId()==IceTime___skid)endfunctionfunction IceTime___Actions takes nothing returns nothing
local unit array ulocal player plocal effect array efflocal real array xlocal real array ylocal real array rlocal real facinglocal real dmglocal real garea
local integer ilocal group glocal group gcheckset u[0]=GetTriggerUnit()set x[0]=GetSpellTargetX()set y[0]=GetSpellTargetY()set x[1]=GetUnitX(u[0])set y[1]=GetUnitY(u[0])set facing=AngleBetweenXY(x[1],y[1],x[0],y[0])set r[0]=DistanceBetweenXY(x[1],y[1],x[0],y[0])set dmg=(150.+(50.*I2R(GetUnitAbilityLevel(u[0],IceTime___skid)))+((2.5+(I2R(GetUnitAbilityLevel(u[0],IceTime___skid))*.5))*I2R(GetHeroAgi(u[0],true))))
set garea=250.set p=GetOwningPlayer(u[0])call SetUnitVertexColor(u[0],0,0,$FF,$FF)set eff[0]=AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdx",u[0],"hand right")set eff[1]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",u[0],"hand right")set eff[2]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",u[0],"hand left")set eff[3]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",u[0],"chest")call TriggerSleepAction(.01)
call UnitMoveXY(u[0],x[0],y[0])call DisplayText("Ice Time",u[0],.023,true,$FF,$FF,$FF,$FF)set gcheck=CreateGroup()
set i=5set r[0]=DistanceBetweenXY(x[1],y[1],x[0],y[0])set r[0]=r[0]/ I2R(i)loop
exitwhen(i<1)set i=i-1set r[1]=r[0]*I2R(i)
set x[0]=PolarX(x[1],r[1],facing)set y[0]=PolarY(y[1],r[1],facing)call DestroyEffect(AddSpecialEffect("IceNova2.mdx",x[0],y[0]))set bj_lastCreatedUnit=CreateUnit(p,'h07P',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call DestroyTreeXY(x[0],y[0],garea)set g=CreateGroupXY2(x[0],y[0],garea,p,gcheck)loop
set u[1]=FirstOfGroup(g)
exitwhen(u[1]==null)
call GroupRemoveUnit(g,u[1])
call GroupAddUnit(gcheck,u[1])set u[2]=CreateUnit(p,'h0DN',GetUnitX(u[1]),GetUnitY(u[1]),bj_UNIT_FACING)call UnitApplyTimedLife(u[2],'BTLF',1.2)
call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetWidgetLife(u[1])>0)thencall SetUnitAbilityLevel(u[2],'A056',2)call UnitRemoveAbility(u[2],'Amov')call IssueTargetOrderById(u[2],$D007F,u[1])endifset u[1]=nullset u[2]=nullendloopcall DestroyGroup(g)
set g=nullendloopcall DestroyGroup(gcheck)set gcheck=nullcall TriggerSleepAction(.16)
call SetUnitVertexColor(u[0],$FF,$FF,$FF,$FF)set u[0]=nullcall DestroyEffect(eff[0])call DestroyEffect(eff[1])call DestroyEffect(eff[2])call DestroyEffect(eff[3])set eff[0]=nullset eff[1]=nullset eff[2]=nullset eff[3]=nullendfunctionfunction IceTime___Init takes nothing returns nothingset gg_trg_Ice_Time=CreateTrigger()call TriggerAddCondition(gg_trg_Ice_Time,Condition(function IceTime___Conditions))call TriggerAddAction(gg_trg_Ice_Time,function IceTime___Actions)endfunctionfunction Partisan___Conditions takes nothing returns boolean
return(GetSpellAbilityId()==Partisan___skid)
endfunctionfunction Partisan___ActionsL takes nothing returns nothinglocal unit pickedlocal group glocal real array rlocal integer jset Partisan___i=Partisan___i-1if(Partisan___i>0)thenset j=Partisan___maxDummyloop
exitwhen(j<1)set r[0]=I2R(GetUnitUserData(Partisan___u[j]))call SetUnitX(Partisan___u[j],PolarX(GetUnitX(Partisan___u[j]),Partisan___speed,r[0]))call SetUnitY(Partisan___u[j],PolarY(GetUnitY(Partisan___u[j]),Partisan___speed,r[0]))set j=j-1endloopelse
call PauseTimer(Partisan___t)call DestroyTimer(Partisan___t)set Partisan___t=nullset Partisan___i=Partisan___maxDummy
loop
exitwhen(Partisan___i<1)
call RemoveUnit(Partisan___u[Partisan___i])set Partisan___u[Partisan___i]=nullset Partisan___i=Partisan___i-1endloopset bj_lastCreatedUnit=CreateUnit(Partisan___p,'h0DN',Partisan___x[0],Partisan___y[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set bj_lastCreatedUnit=CreateUnit(Partisan___p,'h07P',Partisan___x[0],Partisan___y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(Partisan___p,'h04O',Partisan___x[0],Partisan___y[0],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call DestroyEffect(AddSpecialEffectTarget("IceNova2.mdx",bj_lastCreatedUnit,"origin"))call DestroyEffect(AddSpecialEffectTarget("IceStomp.mdx",bj_lastCreatedUnit,"origin"))call SetUnitScale(bj_lastCreatedUnit,7.,7.,7.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdx",bj_lastCreatedUnit,"origin"))
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\FrostBolt\\FrostBoltMissile.mdx",bj_lastCreatedUnit,"origin"))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyTreeXY(Partisan___x[0],Partisan___y[0],Partisan___garea)
set g=CreateGroupXY(Partisan___x[0],Partisan___y[0],Partisan___garea,Partisan___p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call UnitDamageTarget(Partisan___u[0],picked,Partisan___dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullset Partisan___u[0]=null
set Partisan___p=nullendifendfunctionfunction Partisan___Actions takes nothing returns nothinglocal real array rset Partisan___u[0]=GetTriggerUnit()
set Partisan___x[0]=GetSpellTargetX()set Partisan___y[0]=GetSpellTargetY()call DisplayText("Ice Block: Partisan",Partisan___u[0],.023,false,$FF,$FF,$FF,$FF)set Partisan___p=GetOwningPlayer(Partisan___u[0])set Partisan___dmg=((300.+(100.*I2R(GetUnitAbilityLevel(Partisan___u[0],Partisan___skid))))+(5.*I2R(GetHeroAgi(Partisan___u[0],true))))set r[0]=500.set Partisan___i=Partisan___maxDummy
set r[1]=360/ I2R(Partisan___i)loop
exitwhen(Partisan___i<1)
set r[2]=I2R(Partisan___i)*r[1]set Partisan___x[1]=PolarX(Partisan___x[0],r[0],r[2])set Partisan___y[1]=PolarY(Partisan___y[0],r[0],r[2])set r[2]=AngleBetweenXY(Partisan___x[1],Partisan___y[1],Partisan___x[0],Partisan___y[0])
set bj_lastCreatedUnit=CreateUnit(Partisan___p,'h0DP',Partisan___x[1],Partisan___y[1],r[2])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set Partisan___u[Partisan___i]=CreateUnit(Partisan___p,'h0DO',Partisan___x[1],Partisan___y[1],r[2])call SetUnitUserData(Partisan___u[Partisan___i],R2I(r[2]))call UnitApplyTimedLife(Partisan___u[Partisan___i],'BTLF',10.)set Partisan___i=Partisan___i-1endloopcall TriggerSleepAction(.5)set Partisan___i=Partisan___maxDummy
loop
exitwhen(Partisan___i<1)
call SetUnitFlyHeight(Partisan___u[Partisan___i],100.,300.)set Partisan___i=Partisan___i-1endloopset Partisan___i=R2I(r[0]/ Partisan___speed)
set Partisan___t=CreateTimer()call TimerStart(Partisan___t,.04,true,function Partisan___ActionsL)endfunctionfunction Partisan___Init takes nothing returns nothingset gg_trg_Partisan=CreateTrigger()call TriggerAddCondition(gg_trg_Partisan,Condition(function Partisan___Conditions))call TriggerAddAction(gg_trg_Partisan,function Partisan___Actions)endfunctionfunction IceAge___Conditions takes nothing returns booleanreturn(GetSpellAbilityId()==IceAge___skid)endfunctionfunction IceAge___ActionEnd takes nothing returns nothinglocal unit pickedcall PauseTimer(IceAge___t)call DestroyTimer(IceAge___t)set IceAge___t=nullloop
set picked=FirstOfGroup(IceAge___gdummy)
exitwhen(picked==null)call GroupRemoveUnit(IceAge___gdummy,picked)
call RemoveUnit(picked)set picked=nullendloopcall DestroyGroup(IceAge___gdummy)set IceAge___gdummy=null
endfunctionfunction IceAge___ActionsL takes nothing returns nothing
local unit pickedlocal real xxlocal real yylocal group glocal real array rlocal integer jlocal integer maxIce
local real dist=220.
set IceAge___i=IceAge___i+1if(IceAge___i<IceAge___maxL)then
set maxIce=IceAge___i*8set r[0]=360/ maxIce
set r[1]=dist*I2R(IceAge___i)set j=1loop
exitwhen(j>maxIce)set r[2]=j*r[0]set xx=PolarX(IceAge___x,r[1],r[2])set yy=PolarY(IceAge___y,r[1],r[2])set r[2]=.85+(.15*I2R(IceAge___i))if(IceAge___b)thenset bj_lastCreatedUnit=CreateUnit(IceAge___p,'h0DN',xx,yy,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)endifset bj_lastCreatedUnit=CreateUnit(IceAge___p,'h0DQ',xx,yy,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,r[2],r[2],r[2])
call GroupAddUnit(IceAge___gdummy,bj_lastCreatedUnit)set j=j+1endloopset r[1]=r[1]+300.call DestroyTreeXY(IceAge___x,IceAge___y,r[1])set g=CreateGroupXY2(IceAge___x,IceAge___y,r[1],IceAge___p,IceAge___gcheck)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)set xx=GetUnitX(picked)set yy=GetUnitY(picked)if(DistanceBetweenXY(xx,yy,IceAge___x,IceAge___y)>(dist*(I2R(IceAge___i)-1)))thencall GroupAddUnit(IceAge___gcheck,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(IceAge___dmg))+"!",picked,.027,true,$FF,0,0,$FF)endifcall UnitDamageTarget(IceAge___u,picked,IceAge___dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)if(GetWidgetLife(picked)>0)thenset bj_lastCreatedUnit=CreateUnit(IceAge___p,'u003',xx,yy,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A056')call SetUnitAbilityLevel(bj_lastCreatedUnit,'A056',3)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendifset picked=nullendloopcall DestroyGroup(g)
set g=nullif(IceAge___b)thenset IceAge___b=false
else
set IceAge___b=trueendifcall SetTerrainType(IceAge___x,IceAge___y,'Wsnw',-1,(9+IceAge___i),0)else
call PauseTimer(IceAge___t)call DestroyTimer(IceAge___t)set IceAge___t=nullset IceAge___u=nullset IceAge___p=nullcall DestroyGroup(IceAge___gcheck)set IceAge___gcheck=null
set IceAge___t=CreateTimer()
call TimerStart(IceAge___t,5.5,false,function IceAge___ActionEnd)endifendfunctionfunction IceAge___Actions takes nothing returns nothinglocal real r
set IceAge___u=GetTriggerUnit()set IceAge___x=GetUnitX(IceAge___u)set IceAge___y=GetUnitY(IceAge___u)call Dynamic_Sound("Sounds\\IceAge.mp3")
call DisplayText("Ice Age",IceAge___u,.023,false,$DC,5,5,$FF)set IceAge___p=GetOwningPlayer(IceAge___u)set IceAge___dmg=((2000.)+(20.*I2R(GetUnitAbilityLevel(IceAge___u,IceAge___skid))))call SetUnitTimeScale(IceAge___u,1.5)call TriggerSleepAction(.05)
call SetUnitTimeScale(IceAge___u,1.)
set r=2.7set bj_lastCreatedUnit=CreateUnit(IceAge___p,'h02M',IceAge___x,IceAge___y,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,r,r,r)call SetUnitTimeScale(bj_lastCreatedUnit,.3)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(IceAge___p,'h02M',IceAge___x,IceAge___y,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,r,r,r)call SetUnitTimeScale(bj_lastCreatedUnit,.6)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set bj_lastCreatedUnit=CreateUnit(IceAge___p,'h02M',IceAge___x,IceAge___y,GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,3.2,3.2,3.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.5)set IceAge___gdummy=CreateGroup()set IceAge___gcheck=CreateGroup()set IceAge___b=trueset IceAge___i=0
set IceAge___t=CreateTimer()
call TimerStart(IceAge___t,.08,true,function IceAge___ActionsL)endfunctionfunction IceAge___Init takes nothing returns nothing
set gg_trg_IceAge=CreateTrigger()call TriggerAddCondition(gg_trg_IceAge,Condition(function IceAge___Conditions))call TriggerAddAction(gg_trg_IceAge,function IceAge___Actions)endfunctionfunction AIMinato___isAtked takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==AIMinato___AIType1 or GetUnitTypeId(GetTriggerUnit())==AIMinato___AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIMinato___isAtker takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==AIMinato___AIType1 or GetUnitTypeId(GetAttacker())==AIMinato___AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIMinato___Cond takes nothing returns booleanif(not(AIMinato___isAtked()or AIMinato___isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIMinato___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal real facinglocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIMinato___AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIMinato___isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0I1')call SelectHeroSkill(mySelf,'A0HZ')call SelectHeroSkill(mySelf,'A0HY')call SelectHeroSkill(mySelf,'A0HW')call SelectHeroSkill(mySelf,'A0HL')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueImmediateOrderById(mySelf,$D00A1)set targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)set facing=AngleBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)
set targetX=PolarX(targetX,150.,facing)set targetY=PolarY(targetY,150.,facing)call IssuePointOrderById(mySelf,$D00FA,targetX,targetY)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D0084)endifif(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueTargetOrderById(mySelf,$D007F,myTarget)call IssueTargetOrderById(mySelf,$D0270,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIMinato___AINo])
endfunctionfunction AIMinato___Init takes nothing returns nothingset udg_AI_Trig[AIMinato___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIMinato___AINo],Condition(function AIMinato___Cond))call TriggerAddAction(udg_AI_Trig[AIMinato___AINo],function AIMinato___Act)endfunctionfunction FlyingThunderGod___BlinkClearData takes nothing returns nothing
if(FlyingThunderGod___u[0]!=null)thencall UnitRemoveAbility(FlyingThunderGod___u[0],FlyingThunderGod___skid2)
set FlyingThunderGod___u[0]=null
call DisableTrigger(Minato_FlyingThunderGodB)call SetPlayerAbilityAvailable(FlyingThunderGod___p,FlyingThunderGod___skid1,true)if(IsUnitType(FlyingThunderGod___u[2],UNIT_TYPE_MECHANICAL))then
call RemoveUnit(FlyingThunderGod___u[2])
endifset FlyingThunderGod___u[2]=null
set FlyingThunderGod___p=nullendifendfunctionfunction FlyingThunderGod___BlinkCDEnd takes nothing returns nothing
call PauseTimer(FlyingThunderGod___t)call DestroyTimer(FlyingThunderGod___t)set FlyingThunderGod___t=nullcall FlyingThunderGod___BlinkClearData()
endfunctionfunction FlyingThunderGod___BlinkCond takes nothing returns booleanreturn(GetSpellAbilityId()==FlyingThunderGod___skid2)endfunctionfunction FlyingThunderGod___BlinkAct takes nothing returns nothinglocal real x
local real y
local real r
local boolean bcall TriggerSleepAction(.01)
if(FlyingThunderGod___u[0]!=null and FlyingThunderGod___u[2]!=null and FlyingThunderGod___p!=null)thenset x=GetUnitX(FlyingThunderGod___u[0])set y=GetUnitY(FlyingThunderGod___u[0])set bj_lastCreatedUnit=CreateUnit(FlyingThunderGod___p,'h0DT',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set FlyingThunderGod___facing=AngleBetweenXY(x,y,GetUnitX(FlyingThunderGod___u[2]),GetUnitY(FlyingThunderGod___u[2]))set b=IsUnitType(FlyingThunderGod___u[2],UNIT_TYPE_HERO)
if(b)thenset r=120.else
set r=.0
endifset x=PolarX(GetUnitX(FlyingThunderGod___u[2]),r,FlyingThunderGod___facing)set y=PolarY(GetUnitY(FlyingThunderGod___u[2]),r,FlyingThunderGod___facing)if(IsUnitSamePlace(FlyingThunderGod___u[0],FlyingThunderGod___u[2]))then
if not(UnitMoveXY(FlyingThunderGod___u[0],x,y))thencall SetUnitPosition(FlyingThunderGod___u[0],x,y)endifif(b)thencall IssueTargetOrderById(FlyingThunderGod___u[0],$D000F,FlyingThunderGod___u[2])endifset bj_lastCreatedUnit=CreateUnit(FlyingThunderGod___p,'h0DT',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)endifendifcall FlyingThunderGod___BlinkClearData()
endfunctionfunction FlyingThunderGod___ActL takes nothing returns nothinglocal unit pickedlocal group glocal real x
local real y
set FlyingThunderGod___i=FlyingThunderGod___i-1if(FlyingThunderGod___i>0)thenset x=PolarX(GetUnitX(FlyingThunderGod___u[1]),FlyingThunderGod___speed,FlyingThunderGod___facing)set y=PolarY(GetUnitY(FlyingThunderGod___u[1]),FlyingThunderGod___speed,FlyingThunderGod___facing)call SetUnitX(FlyingThunderGod___u[1],x)
call SetUnitY(FlyingThunderGod___u[1],y)
call DestroyTreeXY(x,y,FlyingThunderGod___garea1)set g=CreateGroupXY2(x,y,FlyingThunderGod___garea1,FlyingThunderGod___p,FlyingThunderGod___gcheck)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call GroupAddUnit(FlyingThunderGod___gcheck,picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdx",picked,"chest"))call UnitDamageTarget(FlyingThunderGod___u[0],picked,FlyingThunderGod___dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set x=GetUnitX(picked)set y=GetUnitY(picked)if(FlyingThunderGod___u[2]==null and IsUnitType(picked,UNIT_TYPE_HERO)and GetWidgetLife(picked)>0 and AngleBetweenXY(x,y,GetUnitX(FlyingThunderGod___u[1]),GetUnitY(FlyingThunderGod___u[1]))<FlyingThunderGod___garea2)then
set FlyingThunderGod___u[2]=pickedset FlyingThunderGod___i=0set bj_lastCreatedUnit=CreateUnit(FlyingThunderGod___p,'h00E',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,udg_GlobalSkill[2])call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D006B,picked)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset picked=nullendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(FlyingThunderGod___t)call DestroyTimer(FlyingThunderGod___t)set FlyingThunderGod___t=nullcall DestroyGroup(FlyingThunderGod___gcheck)
set FlyingThunderGod___gcheck=nullif(FlyingThunderGod___u[2]==null)thencall SetUnitX(FlyingThunderGod___u[1],FlyingThunderGod___spellX)
call SetUnitY(FlyingThunderGod___u[1],FlyingThunderGod___spellY)
set FlyingThunderGod___u[2]=CreateUnit(FlyingThunderGod___p,'h0DS',FlyingThunderGod___spellX,FlyingThunderGod___spellY,FlyingThunderGod___facing)call UnitApplyTimedLife(FlyingThunderGod___u[2],'BTLF',10.)endifcall RemoveUnit(FlyingThunderGod___u[1])
set FlyingThunderGod___u[1]=null
call EnableTrigger(Minato_FlyingThunderGodB)
call SetPlayerAbilityAvailable(FlyingThunderGod___p,FlyingThunderGod___skid1,false)call UnitAddAbility(FlyingThunderGod___u[0],FlyingThunderGod___skid2)call UnitMakeAbilityPermanent(FlyingThunderGod___u[0],true,FlyingThunderGod___skid2)
set FlyingThunderGod___t=CreateTimer()call TimerStart(FlyingThunderGod___t,6.,false,function FlyingThunderGod___BlinkCDEnd)endifendfunctionfunction FlyingThunderGod___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==FlyingThunderGod___skid1)endfunctionfunction FlyingThunderGod___Act takes nothing returns nothinglocal real x
local real y
local real r
set FlyingThunderGod___u[0]=GetTriggerUnit()
set FlyingThunderGod___spellX=GetSpellTargetX()set FlyingThunderGod___spellY=GetSpellTargetY()set x=GetUnitX(FlyingThunderGod___u[0])set y=GetUnitY(FlyingThunderGod___u[0])set FlyingThunderGod___facing=AngleBetweenXY(x,y,FlyingThunderGod___spellX,FlyingThunderGod___spellY)set r=80.set x=PolarX(x,r,FlyingThunderGod___facing)set y=PolarY(y,r,FlyingThunderGod___facing)set FlyingThunderGod___p=GetOwningPlayer(FlyingThunderGod___u[0])call DisplayText("Hiraishin no Jutsu",FlyingThunderGod___u[0],.023,true,$FF,$FF,$FF,$FF)
set FlyingThunderGod___u[1]=CreateUnit(FlyingThunderGod___p,'h0DR',x,y,FlyingThunderGod___facing)call UnitApplyTimedLife(FlyingThunderGod___u[1],'BTLF',10.)set FlyingThunderGod___dmg=((130.+(GetUnitAbilityLevel(FlyingThunderGod___u[0],FlyingThunderGod___skid1)*70.))+(GetHeroAgi(FlyingThunderGod___u[0],true)*2.))set r=DistanceBetweenXY(x,y,FlyingThunderGod___spellX,FlyingThunderGod___spellY)
set FlyingThunderGod___i=R2I(r/ FlyingThunderGod___speed)set FlyingThunderGod___u[2]=null
set FlyingThunderGod___gcheck=CreateGroup()set FlyingThunderGod___t=CreateTimer()call TimerStart(FlyingThunderGod___t,.04,true,function FlyingThunderGod___ActL)endfunctionfunction FlyingThunderGod___Init takes nothing returns nothingset gg_trg_Flying_Thunder_God=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Thunder_God,Condition(function FlyingThunderGod___Cond))call TriggerAddAction(gg_trg_Flying_Thunder_God,function FlyingThunderGod___Act)
call DisableTrigger(Minato_FlyingThunderGodB)call TriggerAddCondition(Minato_FlyingThunderGodB,Condition(function FlyingThunderGod___BlinkCond))call TriggerAddAction(Minato_FlyingThunderGodB,function FlyingThunderGod___BlinkAct)
endfunctionfunction FlyingRaijinSlash___AttackCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetAttacker(),FlyingRaijinSlash___buffid)>0)endfunctionfunction FlyingRaijinSlash___AttackAct takes nothing returns nothing
local unit atker=GetAttacker()local unit atked=GetTriggerUnit()local player p=GetOwningPlayer(atker)local real r
local real array xlocal real array ylocal real distancelocal real facinglocal integer ilocal real j
set FlyingRaijinSlash___times=FlyingRaijinSlash___times-1if(FlyingRaijinSlash___times<1)thencall UnitRemoveAbility(atker,FlyingRaijinSlash___buffid)
endifset x[0]=GetUnitX(atker)
set y[0]=GetUnitY(atker)
set r=120.set x[1]=GetUnitX(atked)
set y[1]=GetUnitY(atked)
set facing=(AngleBetweenXY(x[0],y[0],x[1],y[1])+GetRandomReal(-80,80))set x[1]=PolarX(x[1],r,facing)set y[1]=PolarY(y[1],r,facing)set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set distance=DistanceBetweenXY(x[0],y[0],x[1],y[1])set r=.0
set i=5set j=1.
set distance=(distance/ i)loop
exitwhen(i<1)set r=r+distance
set x[2]=PolarX(x[0],r,facing)set y[2]=PolarY(y[0],r,facing)if(GetUnitTypeId(atker)==FlyingRaijinSlash___morpId)then
set bj_lastCreatedUnit=CreateUnit(p,'h0DV',x[2],y[2],facing)
else
set bj_lastCreatedUnit=CreateUnit(p,'h0DU',x[2],y[2],facing)
endifcall SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,63)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',((j*.02)+.08))
set i=i-1set j=j+1.endloopcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdx",atker,"origin"))call DestroyTreeXY(x[1],y[1],140.)call UnitMoveXY(atker,x[1],y[1])
call SetUnitFacing(atker,(facing-180.))call SetUnitAnimation(atker,"attack")call UnitPureDamageTarget(atker,atked,FlyingRaijinSlash___dmg)set atker=nullset atked=nullset p=nullendfunctionfunction FlyingRaijinSlash___BlinkClearData takes nothing returns nothingif(FlyingRaijinSlash___spellU[1]!=null)thencall RemoveUnit(FlyingRaijinSlash___spellU[1])set FlyingRaijinSlash___spellU[1]=nullcall UnitRemoveAbility(FlyingRaijinSlash___spellU[0],FlyingRaijinSlash___skid2)call SetPlayerAbilityAvailable(FlyingRaijinSlash___spellP,FlyingRaijinSlash___skid1,true)set FlyingRaijinSlash___spellU[0]=nullset FlyingRaijinSlash___spellP=nullcall DisableTrigger(Minato_FlyingRaijinSlashB)endifendfunctionfunction FlyingRaijinSlash___BlinkCond takes nothing returns boolean
return(GetSpellAbilityId()==FlyingRaijinSlash___skid2)endfunctionfunction FlyingRaijinSlash___BlinkAct takes nothing returns nothinglocal real x
local real y
call TriggerSleepAction(.01)
if(FlyingRaijinSlash___spellU[0]!=null and FlyingRaijinSlash___spellU[1]!=null and FlyingRaijinSlash___spellP!=null)then
set bj_lastCreatedUnit=CreateUnit(FlyingRaijinSlash___spellP,'h0DT',GetUnitX(FlyingRaijinSlash___spellU[0]),GetUnitY(FlyingRaijinSlash___spellU[0]),bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set x=GetUnitX(FlyingRaijinSlash___spellU[1])set y=GetUnitY(FlyingRaijinSlash___spellU[1])if(IsUnitSamePlace(FlyingRaijinSlash___spellU[0],FlyingRaijinSlash___spellU[1]))then
if not(UnitMoveXY(FlyingRaijinSlash___spellU[0],x,y))thencall SetUnitPosition(FlyingRaijinSlash___spellU[0],x,y)endifset bj_lastCreatedUnit=CreateUnit(FlyingRaijinSlash___spellP,'h0DT',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)endifendifcall FlyingRaijinSlash___BlinkClearData()endfunctionfunction FlyingRaijinSlash___Act2 takes nothing returns nothingcall PauseTimer(FlyingRaijinSlash___t)call DestroyTimer(FlyingRaijinSlash___t)
set FlyingRaijinSlash___t=nullcall FlyingRaijinSlash___BlinkClearData()endfunctionfunction FlyingRaijinSlash___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==FlyingRaijinSlash___skid1)endfunctionfunction FlyingRaijinSlash___Act takes nothing returns nothinglocal unit u=GetTriggerUnit()local real delay=.06
call DisplayText("Hiraishingiri",u,.023,true,$FF,$FF,$FF,$FF)set FlyingRaijinSlash___spellU[0]=uset FlyingRaijinSlash___dmg=(GetHeroAgi(FlyingRaijinSlash___spellU[0],true)*.7)set FlyingRaijinSlash___spellP=GetOwningPlayer(FlyingRaijinSlash___spellU[0])set FlyingRaijinSlash___spellU[1]=CreateUnit(FlyingRaijinSlash___spellP,'h0DS',GetUnitX(FlyingRaijinSlash___spellU[0]),GetUnitY(FlyingRaijinSlash___spellU[0]),bj_UNIT_FACING)call UnitApplyTimedLife(FlyingRaijinSlash___spellU[1],'BTLF',10.)call EnableTrigger(Minato_FlyingRaijinSlashB)call SetPlayerAbilityAvailable(FlyingRaijinSlash___spellP,FlyingRaijinSlash___skid1,false)call UnitAddAbility(FlyingRaijinSlash___spellU[0],FlyingRaijinSlash___skid2)
call UnitMakeAbilityPermanent(FlyingRaijinSlash___spellU[0],true,FlyingRaijinSlash___skid2)set FlyingRaijinSlash___t=CreateTimer()call TimerStart(FlyingRaijinSlash___t,6.,false,function FlyingRaijinSlash___Act2)if(GetUnitTypeId(u)==FlyingRaijinSlash___morpId)then
set FlyingRaijinSlash___times=(2+GetUnitAbilityLevel(u,FlyingRaijinSlash___skid1))else
set FlyingRaijinSlash___times=(3+GetUnitAbilityLevel(u,FlyingRaijinSlash___skid1))endifcall EnableTrigger(Minato_FlyingRaijinSlashA)loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(u,FlyingRaijinSlash___buffid)<1)endloopif(IsTriggerEnabled(Minato_FlyingRaijinSlashA))thencall DisableTrigger(Minato_FlyingRaijinSlashA)endifset u=nullendfunctionfunction FlyingRaijinSlash___Init takes nothing returns nothingset gg_trg_Flying_Raijin_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Raijin_Slash,Condition(function FlyingRaijinSlash___Cond))call TriggerAddAction(gg_trg_Flying_Raijin_Slash,function FlyingRaijinSlash___Act)call DisableTrigger(Minato_FlyingRaijinSlashA)call TriggerRegisterAnyUnitEventBJ(Minato_FlyingRaijinSlashA,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Minato_FlyingRaijinSlashA,Condition(function FlyingRaijinSlash___AttackCond))call TriggerAddAction(Minato_FlyingRaijinSlashA,function FlyingRaijinSlash___AttackAct)call DisableTrigger(Minato_FlyingRaijinSlashB)call TriggerAddCondition(Minato_FlyingRaijinSlashB,Condition(function FlyingRaijinSlash___BlinkCond))call TriggerAddAction(Minato_FlyingRaijinSlashB,function FlyingRaijinSlash___BlinkAct)endfunctionfunction NineTailsMode___Conditions takes nothing returns booleanreturn(GetSpellAbilityId()==NineTailsMode___skid)endfunctionfunction NineTailsMode___Actions takes nothing returns nothinglocal unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!=NineTailsMode___morpId)then
set p=GetOwningPlayer(u)
call DisplayText("Kyubi Chakura Modo",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)set bj_lastCreatedUnit=CreateUnit(p,'h02B',x,y,bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h02B',x,y,GetRandomReal(0,360))
call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h02A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h02A',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call TransfromAction(u,x,y)set p=nullendifset u=nullendfunctionfunction NineTailsMode___Init takes nothing returns nothingset gg_trg_NineTails_Mode=CreateTrigger()call TriggerAddCondition(gg_trg_NineTails_Mode,Condition(function NineTailsMode___Conditions))call TriggerAddAction(gg_trg_NineTails_Mode,function NineTailsMode___Actions)endfunctionfunction RinbukoSanshiki___ActL takes nothing returns nothinglocal unit pickedlocal group glocal real x
local real y
local integer jlocal integer kset RinbukoSanshiki___i=RinbukoSanshiki___i-1if(RinbukoSanshiki___i>0)and(GetUnitState(RinbukoSanshiki___u[1],UNIT_STATE_LIFE)>0)then
set RinbukoSanshiki___spellX=GetUnitX(RinbukoSanshiki___u[1])set RinbukoSanshiki___spellY=GetUnitY(RinbukoSanshiki___u[1])set k=GetRandomInt(RinbukoSanshiki___minDummy,RinbukoSanshiki___maxDummy)call UnitMoveXY(RinbukoSanshiki___u[0],GetUnitX(RinbukoSanshiki___kunai[k]),GetUnitY(RinbukoSanshiki___kunai[k]))set j=RinbukoSanshiki___minDummy
loop
exitwhen(j>RinbukoSanshiki___maxDummy)set RinbukoSanshiki___r[2]=(RinbukoSanshiki___r[0]*I2R(j))set x=PolarX(RinbukoSanshiki___spellX,RinbukoSanshiki___r[1],RinbukoSanshiki___r[2])
set y=PolarY(RinbukoSanshiki___spellY,RinbukoSanshiki___r[1],RinbukoSanshiki___r[2])
call SetUnitX(RinbukoSanshiki___kunai[j],x)call SetUnitY(RinbukoSanshiki___kunai[j],y)call SetUnitX(RinbukoSanshiki___dummy[j],x)call SetUnitY(RinbukoSanshiki___dummy[j],y)set k=GetRandomIntDist(RinbukoSanshiki___minDummy,RinbukoSanshiki___maxDummy,GetUnitUserData(RinbukoSanshiki___dummy[j]))call SetUnitUserData(RinbukoSanshiki___dummy[RinbukoSanshiki___i],k)
set x=GetUnitX(RinbukoSanshiki___kunai[k])set y=GetUnitY(RinbukoSanshiki___kunai[k])call SetUnitX(RinbukoSanshiki___dummy[j],x)call SetUnitY(RinbukoSanshiki___dummy[j],y)if(RinbukoSanshiki___b)thenset RinbukoSanshiki___b=falseset bj_lastCreatedUnit=CreateUnit(RinbukoSanshiki___p,'h02A',x,y,bj_UNIT_FACING)
call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)else
set RinbukoSanshiki___b=true
endifset j=j+1endloopset g=CreateGroupXY(RinbukoSanshiki___spellX,RinbukoSanshiki___spellY,RinbukoSanshiki___garea,RinbukoSanshiki___p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdx",picked,"chest"))call UnitDamageTarget(RinbukoSanshiki___u[0],picked,RinbukoSanshiki___dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullelse
call PauseTimer(RinbukoSanshiki___t)
call DestroyTimer(RinbukoSanshiki___t)set RinbukoSanshiki___t=null
call SetUnitVertexColor(RinbukoSanshiki___u[0],$FF,$FF,$FF,$FF)call SetUnitInvulnerable(RinbukoSanshiki___u[0],false)call PauseSystem(RinbukoSanshiki___u[0],false)set RinbukoSanshiki___p=null
set RinbukoSanshiki___u[0]=nullset RinbukoSanshiki___u[1]=nullset RinbukoSanshiki___i=RinbukoSanshiki___minDummyloop
exitwhen(RinbukoSanshiki___i>RinbukoSanshiki___maxDummy)
call RemoveUnit(RinbukoSanshiki___kunai[RinbukoSanshiki___i])set RinbukoSanshiki___kunai[RinbukoSanshiki___i]=nullcall RemoveUnit(RinbukoSanshiki___dummy[RinbukoSanshiki___i])set RinbukoSanshiki___dummy[RinbukoSanshiki___i]=nullset RinbukoSanshiki___i=RinbukoSanshiki___i+1endloopendifendfunctionfunction RinbukoSanshiki___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==RinbukoSanshiki___skid)endfunctionfunction RinbukoSanshiki___Act takes nothing returns nothing
local real x
local real y
local integer dummyTypeset RinbukoSanshiki___u[0]=GetTriggerUnit()set RinbukoSanshiki___u[1]=GetSpellTargetUnit()set RinbukoSanshiki___spellX=GetUnitX(RinbukoSanshiki___u[1])set RinbukoSanshiki___spellY=GetUnitY(RinbukoSanshiki___u[1])call DisplayText("Rasen Senko Cho Rinbuko Sanshiki",RinbukoSanshiki___u[0],.023,true,$FF,$FF,$FF,$FF)set RinbukoSanshiki___dmg=(900.+I2R((5+GetUnitAbilityLevel(RinbukoSanshiki___u[0],RinbukoSanshiki___skid))*GetHeroAgi(RinbukoSanshiki___u[0],true)))
set RinbukoSanshiki___p=GetOwningPlayer(RinbukoSanshiki___u[0])if(GetUnitTypeId(RinbukoSanshiki___u[0])=='O00E')thenset dummyType='h0DV'
else
set dummyType='h0DU'
endifset RinbukoSanshiki___r[0]=360./ RinbukoSanshiki___maxDummyset RinbukoSanshiki___r[1]=500.set RinbukoSanshiki___i=RinbukoSanshiki___minDummyloop
exitwhen(RinbukoSanshiki___i>RinbukoSanshiki___maxDummy)
set RinbukoSanshiki___r[2]=(RinbukoSanshiki___r[0]*I2R(RinbukoSanshiki___i))
set x=PolarX(RinbukoSanshiki___spellX,RinbukoSanshiki___r[1],RinbukoSanshiki___r[2])
set y=PolarY(RinbukoSanshiki___spellY,RinbukoSanshiki___r[1],RinbukoSanshiki___r[2])
set RinbukoSanshiki___kunai[RinbukoSanshiki___i]=CreateUnit(RinbukoSanshiki___p,'h0DS',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(RinbukoSanshiki___kunai[RinbukoSanshiki___i],'BTLF',10.)
set RinbukoSanshiki___dummy[RinbukoSanshiki___i]=CreateUnit(RinbukoSanshiki___p,dummyType,x,y,(RinbukoSanshiki___r[2]-180.))
call SetUnitVertexColor(RinbukoSanshiki___dummy[RinbukoSanshiki___i],$FF,$FF,$FF,63)
call UnitAddAbility(RinbukoSanshiki___dummy[RinbukoSanshiki___i],'A0I0')
call SetUnitUserData(RinbukoSanshiki___dummy[RinbukoSanshiki___i],RinbukoSanshiki___i)call UnitApplyTimedLife(RinbukoSanshiki___dummy[RinbukoSanshiki___i],'BTLF',10.)
set RinbukoSanshiki___i=RinbukoSanshiki___i+1endloopcall SetUnitInvulnerable(RinbukoSanshiki___u[0],true)call PauseSystem(RinbukoSanshiki___u[0],true)call SetUnitVertexColor(RinbukoSanshiki___u[0],$FF,$FF,$FF,63)call DestroyTreeXY(RinbukoSanshiki___spellX,RinbukoSanshiki___spellY,RinbukoSanshiki___garea)set RinbukoSanshiki___b=true
set RinbukoSanshiki___i=35+1
set RinbukoSanshiki___dmg=(RinbukoSanshiki___dmg/ I2R(RinbukoSanshiki___i))*1.5set RinbukoSanshiki___dmg=RinbukoSanshiki___dmg*2.set RinbukoSanshiki___t=CreateTimer()call TimerStart(RinbukoSanshiki___t,RinbukoSanshiki___timerDelay,true,function RinbukoSanshiki___ActL)endfunctionfunction RinbukoSanshiki___Init takes nothing returns nothingset gg_trg_Rinbuko_Sanshiki=CreateTrigger()call TriggerAddCondition(gg_trg_Rinbuko_Sanshiki,Condition(function RinbukoSanshiki___Cond))
call TriggerAddAction(gg_trg_Rinbuko_Sanshiki,function RinbukoSanshiki___Act)endfunctionfunction FlyingRaijinRasengan___ActL4 takes nothing returns nothinglocal real r
local integer jif(FlyingRaijinRasengan___i>0)thenset FlyingRaijinRasengan___i=FlyingRaijinRasengan___i-1set FlyingRaijinRasengan___x[0]=GetUnitX(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___y[0]=GetUnitY(FlyingRaijinRasengan___u[1])set r=52.set FlyingRaijinRasengan___x[1]=PolarX(FlyingRaijinRasengan___x[0],r,FlyingRaijinRasengan___facing)set FlyingRaijinRasengan___y[1]=PolarY(FlyingRaijinRasengan___y[0],r,FlyingRaijinRasengan___facing)call DestroyTreeXY(FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___tarea)
if(UnitMoveXY(FlyingRaijinRasengan___u[1],FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1]))thenset j=1else
set j=0endifcall SetUnitX(FlyingRaijinRasengan___u['d'],FlyingRaijinRasengan___x[j])
call SetUnitY(FlyingRaijinRasengan___u['d'],FlyingRaijinRasengan___y[j])
set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h017',FlyingRaijinRasengan___x[j],FlyingRaijinRasengan___y[j],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.)
set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DY',FlyingRaijinRasengan___x[j],FlyingRaijinRasengan___y[j],FlyingRaijinRasengan___facing)
call SetUnitScale(bj_lastCreatedUnit,.8,.8,.8)call SetUnitFlyHeight(bj_lastCreatedUnit,120.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
call PauseTimer(FlyingRaijinRasengan___t)call DestroyTimer(FlyingRaijinRasengan___t)set FlyingRaijinRasengan___t=nullcall RemoveUnit(FlyingRaijinRasengan___u['d'])set FlyingRaijinRasengan___u['d']=nullcall SetUnitInvulnerable(FlyingRaijinRasengan___u[1],false)call PauseSystem(FlyingRaijinRasengan___u[1],false)set FlyingRaijinRasengan___x[1]=GetUnitX(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___y[1]=GetUnitY(FlyingRaijinRasengan___u[1])set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DX',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DX',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DX',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitAnimation(bj_lastCreatedUnit,"death")call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set j=1loop
exitwhen(j>6)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0AO',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitTimeScale(bj_lastCreatedUnit,GetRandomReal(.3,.8))call SetUnitFlyHeight(bj_lastCreatedUnit,I2R(j*60),.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set j=j+1endloopset bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DW',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DW',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0CZ',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$FF,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0CZ',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call SetUnitVertexColor(bj_lastCreatedUnit,0,50,$FF,$FF)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DisplayText(I2S(R2I(FlyingRaijinRasengan___dmg))+"!",FlyingRaijinRasengan___u[1],.027,true,$FF,0,0,$FF)
call Dynamic_GroupShake(FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],1.5,udg_CameraShakePow,udg_CameraArea,null)call UnitDamageTarget(FlyingRaijinRasengan___u[0],FlyingRaijinRasengan___u[1],FlyingRaijinRasengan___dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DZ',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)if(GetWidgetLife(FlyingRaijinRasengan___u[1])>0)then
call UnitAddAbility(bj_lastCreatedUnit,'A0GH')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,FlyingRaijinRasengan___u[1])
call SetUnitAnimation(FlyingRaijinRasengan___u[1],"death")endifset bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DZ',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set FlyingRaijinRasengan___u[0]=null
set FlyingRaijinRasengan___u[1]=null
set FlyingRaijinRasengan___p=nullendifendfunctionfunction FlyingRaijinRasengan___ActL3 takes nothing returns nothingif(FlyingRaijinRasengan___i>0)thenset FlyingRaijinRasengan___i=FlyingRaijinRasengan___i-1set FlyingRaijinRasengan___x[1]=GetUnitX(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___y[1]=GetUnitY(FlyingRaijinRasengan___u[1])set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DX',PolarX(FlyingRaijinRasengan___x[1],70.,FlyingRaijinRasengan___facing),PolarY(FlyingRaijinRasengan___y[1],70.,FlyingRaijinRasengan___facing),bj_UNIT_FACING)call SetUnitFlyHeight(bj_lastCreatedUnit,.0,.0)call SetUnitTimeScale(bj_lastCreatedUnit,1.)
call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.5)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DY',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
call PauseTimer(FlyingRaijinRasengan___t)call DestroyTimer(FlyingRaijinRasengan___t)set FlyingRaijinRasengan___t=nullset bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h06C',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___facing)
call SetUnitScale(bj_lastCreatedUnit,2.2,2.2,2.2)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h02Z',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___facing)
call SetUnitAnimation(bj_lastCreatedUnit,"death")call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)call DestroyEffect(FlyingRaijinRasengan___eff[0])set FlyingRaijinRasengan___eff[0]=nullcall DestroyEffect(FlyingRaijinRasengan___eff[1])set FlyingRaijinRasengan___eff[1]=nullcall SetUnitVertexColor(FlyingRaijinRasengan___u['d'],$FF,$FF,$FF,$FF)call SetUnitInvulnerable(FlyingRaijinRasengan___u[0],false)call PauseSystem(FlyingRaijinRasengan___u[0],false)call QueueUnitAnimation(FlyingRaijinRasengan___u[0],"stand ready")set FlyingRaijinRasengan___i=19set FlyingRaijinRasengan___t=CreateTimer()call TimerStart(FlyingRaijinRasengan___t,.03,true,function FlyingRaijinRasengan___ActL4)
endifendfunctionfunction FlyingRaijinRasengan___ActL2 takes nothing returns nothinglocal real array rif(FlyingRaijinRasengan___i>0)thenset FlyingRaijinRasengan___i=FlyingRaijinRasengan___i-1set FlyingRaijinRasengan___x[0]=PolarX(FlyingRaijinRasengan___x[0],FlyingRaijinRasengan___distan,FlyingRaijinRasengan___facing)set FlyingRaijinRasengan___y[0]=PolarY(FlyingRaijinRasengan___y[0],FlyingRaijinRasengan___distan,FlyingRaijinRasengan___facing)set r[0]=GetRandomReal(150.,450.)if(FlyingRaijinRasengan___b)then
set FlyingRaijinRasengan___b=falseset r[1]=FlyingRaijinRasengan___facing+90.else
set FlyingRaijinRasengan___b=trueset r[1]=FlyingRaijinRasengan___facing-90.endifset FlyingRaijinRasengan___x[1]=PolarX(FlyingRaijinRasengan___x[0],r[0],r[1])set FlyingRaijinRasengan___y[1]=PolarY(FlyingRaijinRasengan___y[0],r[0],r[1])call DestroyTreeXY(FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___tarea)
call UnitMoveXY(FlyingRaijinRasengan___u[0],FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1])
call DestroyEffect(AddSpecialEffect("DTKuning.mdx",FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1]))
else
call PauseTimer(FlyingRaijinRasengan___t)call DestroyTimer(FlyingRaijinRasengan___t)set FlyingRaijinRasengan___t=nullset FlyingRaijinRasengan___x[0]=GetUnitX(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___y[0]=GetUnitY(FlyingRaijinRasengan___u[1])set r[0]=160.set r[1]=FlyingRaijinRasengan___facing-180.set FlyingRaijinRasengan___x[1]=PolarX(FlyingRaijinRasengan___x[0],r[0],r[1])set FlyingRaijinRasengan___y[1]=PolarY(FlyingRaijinRasengan___y[0],r[0],r[1])call DestroyTreeXY(FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___tarea)
call UnitMoveXY(FlyingRaijinRasengan___u[0],FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1])
call DestroyEffect(AddSpecialEffect("YellowBlink.mdx",FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1]))call SetUnitAnimation(FlyingRaijinRasengan___u[0],"spell two")call Dynamic_GroupShake(FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],.5,(udg_CameraShakePow*.75),udg_CameraArea,null)
call DisplayText("Rasengan",FlyingRaijinRasengan___u[0],.023,false,$DC,5,5,$FF)set FlyingRaijinRasengan___u['d']=CreateUnit(FlyingRaijinRasengan___p,'h0E0',FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1],FlyingRaijinRasengan___facing)call SetUnitVertexColor(FlyingRaijinRasengan___u['d'],$FF,$FF,$FF,0)
call UnitApplyTimedLife(FlyingRaijinRasengan___u['d'],'BTLF',10.)set FlyingRaijinRasengan___i=$Fset FlyingRaijinRasengan___t=CreateTimer()call TimerStart(FlyingRaijinRasengan___t,.06,true,function FlyingRaijinRasengan___ActL3)
endifendfunctionfunction FlyingRaijinRasengan___ActL1 takes nothing returns nothingif(FlyingRaijinRasengan___i>0)thenset FlyingRaijinRasengan___i=FlyingRaijinRasengan___i-1set FlyingRaijinRasengan___x[0]=GetUnitX(FlyingRaijinRasengan___u[0])set FlyingRaijinRasengan___y[0]=GetUnitY(FlyingRaijinRasengan___u[0])set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0D5',FlyingRaijinRasengan___x[0],FlyingRaijinRasengan___y[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)set bj_lastCreatedUnit=CreateUnit(FlyingRaijinRasengan___p,'h0DW',FlyingRaijinRasengan___x[0],FlyingRaijinRasengan___y[0],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.3)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)else
call PauseTimer(FlyingRaijinRasengan___t)call DestroyTimer(FlyingRaijinRasengan___t)set FlyingRaijinRasengan___t=nullcall SetUnitTimeScale(FlyingRaijinRasengan___u[0],1.)set FlyingRaijinRasengan___x[0]=GetUnitX(FlyingRaijinRasengan___u[0])set FlyingRaijinRasengan___y[0]=GetUnitY(FlyingRaijinRasengan___u[0])set FlyingRaijinRasengan___x[1]=GetUnitX(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___y[1]=GetUnitY(FlyingRaijinRasengan___u[1])set FlyingRaijinRasengan___facing=AngleBetweenXY(FlyingRaijinRasengan___x[0],FlyingRaijinRasengan___y[0],FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1])call SetUnitFacing(FlyingRaijinRasengan___u[0],FlyingRaijinRasengan___facing)if(GetRandomInt(0,1)==1)then
set FlyingRaijinRasengan___b=trueelse
set FlyingRaijinRasengan___b=falseendifset FlyingRaijinRasengan___i=R2I(DistanceBetweenXY(FlyingRaijinRasengan___x[0],FlyingRaijinRasengan___y[0],FlyingRaijinRasengan___x[1],FlyingRaijinRasengan___y[1])/ FlyingRaijinRasengan___distan)-1set FlyingRaijinRasengan___t=CreateTimer()call TimerStart(FlyingRaijinRasengan___t,.16,true,function FlyingRaijinRasengan___ActL2)
endifendfunctionfunction FlyingRaijinRasengan___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==FlyingRaijinRasengan___skid)
endfunctionfunction FlyingRaijinRasengan___Act takes nothing returns nothingset FlyingRaijinRasengan___u[0]=GetTriggerUnit()
set FlyingRaijinRasengan___u[1]=GetSpellTargetUnit()
set FlyingRaijinRasengan___dmg=(1500.+(GetHeroAgi(FlyingRaijinRasengan___u[0],false)*(GetUnitAbilityLevel(FlyingRaijinRasengan___u[0],FlyingRaijinRasengan___skid)*10.)))call SetUnitInvulnerable(FlyingRaijinRasengan___u[0],true)call SetUnitInvulnerable(FlyingRaijinRasengan___u[1],true)call PauseSystem(FlyingRaijinRasengan___u[0],true)call PauseSystem(FlyingRaijinRasengan___u[1],true)call Dynamic_Sound("Sounds\\Rasengan.mp3")call SetUnitTimeScale(FlyingRaijinRasengan___u[0],.3)call SetUnitAnimation(FlyingRaijinRasengan___u[0],"spell one")set FlyingRaijinRasengan___eff[0]=AddSpecialEffectTarget("Rasengan.mdx",FlyingRaijinRasengan___u[0],"right hand")set FlyingRaijinRasengan___eff[1]=AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Rejuvenation\\RejuvenationTarget.mdx",FlyingRaijinRasengan___u[0],"chest")call DestroyEffect(AddSpecialEffectTarget("SuperShinyThingy.mdx",FlyingRaijinRasengan___u[0],"right hand"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdx",FlyingRaijinRasengan___u[0],"right hand"))set FlyingRaijinRasengan___p=GetOwningPlayer(FlyingRaijinRasengan___u[0])set FlyingRaijinRasengan___i=$Aset FlyingRaijinRasengan___t=CreateTimer()call TimerStart(FlyingRaijinRasengan___t,.14,true,function FlyingRaijinRasengan___ActL1)
endfunctionfunction FlyingRaijinRasengan___Init takes nothing returns nothingset gg_trg_Flying_Raijin_Rasengan=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Raijin_Rasengan,Condition(function FlyingRaijinRasengan___Cond))call TriggerAddAction(gg_trg_Flying_Raijin_Rasengan,function FlyingRaijinRasengan___Act)
endfunctionfunction AISoifon___isAtked takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==AISoifon___AIType1 or GetUnitTypeId(GetTriggerUnit())==AISoifon___AIType2)and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AISoifon___isAtker takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==AISoifon___AIType1 or GetUnitTypeId(GetAttacker())==AISoifon___AIType2)and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AISoifon___Cond takes nothing returns booleanif(not(AISoifon___isAtked()or AISoifon___isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AISoifon___Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AISoifon___AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AISoifon___isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0I9')call SelectHeroSkill(mySelf,'A0I8')call SelectHeroSkill(mySelf,'A0I7')call SelectHeroSkill(mySelf,'A0I5')call SelectHeroSkill(mySelf,'A0I2')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifif(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueImmediateOrderById(mySelf,$D00A1)call IssueTargetOrderById(mySelf,$D007F,myTarget)call IssueTargetOrderById(mySelf,$D0270,myTarget)if(isAttacking)thencall IssueImmediateOrderById(mySelf,$D02B7)endifendifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AISoifon___AINo])
endfunctionfunction AISoifon___Init takes nothing returns nothingset udg_AI_Trig[AISoifon___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AISoifon___AINo],Condition(function AISoifon___Cond))call TriggerAddAction(udg_AI_Trig[AISoifon___AINo],function AISoifon___Act)endfunctionfunction DmgEnd takes nothing returns nothinglocal timer t=GetExpiredTimer()call PauseTimer(t)call DestroyTimer(t)
set t=nullset Suzumebachi___isCooldown=falseendfunctionfunction Suzumebachi___DmgCond takes nothing returns boolean
return(GetEventDamageSource()==Suzumebachi___u and not(Suzumebachi___isCooldown))endfunctionfunction Suzumebachi___DmgAct takes nothing returns nothinglocal unit atker=GetEventDamageSource()local unit atked=GetTriggerUnit()local real dmg=.0local player plocal real x
local real y
local unit dummy
local timer tif(GetUnitAbilityLevel(atked,Suzumebachi___stunBuff)>0)thenset Suzumebachi___isCooldown=trueset t=CreateTimer()call TimerStart(t,Suzumebachi___cooldown,false,function DmgEnd)set t=nullset x=GetUnitX(atked)set y=GetUnitY(atked)set p=Player($E)
call SetAbilityCooldown(atker,Suzumebachi___skId,'A0I4',Suzumebachi___cooldown)call UnitMakeAbilityPermanent(atker,true,'A0I4')
if(GetUnitAbilityLevel(atked,Suzumebachi___skBuff)>0)thencall UnitRemoveAbility(atked,Suzumebachi___skBuff)set dmg=(GetHeroAgi(atker,true)*(Suzumebachi___dmgMulti*2.))
set dummy=CreateUnit(p,'h04R',x,y,bj_UNIT_FACING)else
set dmg=(GetHeroAgi(atker,true)*Suzumebachi___dmgMulti)set dummy=CreateUnit(p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(dummy,Suzumebachi___dmySkId)
call IssueTargetOrderById(dummy,$D008E,atked)call UnitApplyTimedLife(dummy,'BTLF',1.)
set dummy=CreateUnit(p,'u003',x,y,bj_UNIT_FACING)call UnitAddAbility(dummy,Suzumebachi___dmySkId)
call IssueTargetOrderById(dummy,$D008E,atked)endifcall UnitApplyTimedLife(dummy,'BTLF',1.)
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdx",atked,"origin"))call DestroyEffect(AddSpecialEffectTarget("BloodElementalMissile_LowEff.mdx",atked,"origin"))call UnitDamageTarget(atker,atked,dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call DisplayCriticalText(I2S(R2I(dmg))+"!",atker,$DC,5,5,$FF)set dummy=nullset p=nullendifset atker=nullset atked=nullendfunctionfunction Suzumebachi___Cond takes nothing returns booleanreturn( not(GetAttacker()!=Suzumebachi___u or Suzumebachi___isCooldown or LoadBoolean(Soifon_AtkedHash,GetHandleId(GetTriggerUnit()),0)))endfunctionfunction Suzumebachi___Act takes nothing returns nothing
local unit atked=GetTriggerUnit()local integer atkedId=GetHandleId(atked)
local trigger trgDmg=CreateTrigger()
local triggercondition trgDmgCond=TriggerAddCondition(trgDmg,Condition(function Suzumebachi___DmgCond))local triggeraction trgDmgAct=TriggerAddAction(trgDmg,function Suzumebachi___DmgAct)
call SaveBoolean(Soifon_AtkedHash,atkedId,0,true)call TriggerRegisterUnitEvent(trgDmg,atked,EVENT_UNIT_DAMAGED)call TriggerSleepAction(Suzumebachi___cooldown)call TriggerRemoveAction(trgDmg,trgDmgAct)call TriggerRemoveCondition(trgDmg,trgDmgCond)call DestroyTrigger(trgDmg)set trgDmgAct=nullset trgDmgCond=nullset trgDmg=nullset atked=nullcall FlushChildHashtable(Soifon_AtkedHash,atkedId)endfunctionfunction Suzumebachi___LearnCond takes nothing returns booleanreturn(GetLearnedSkill()==Suzumebachi___skId)endfunctionfunction Suzumebachi___LearnAct takes nothing returns nothinglocal integer skLv=GetLearnedSkillLevel()set Suzumebachi___u=GetLearningUnit()if(GetUnitAbilityLevel(Suzumebachi___u,'A0IN')<1)thencall SetPlayerAbilityAvailable(GetOwningPlayer(Suzumebachi___u),'A0IN',false)call UnitAddAbility(Suzumebachi___u,'A0IN')endifset Suzumebachi___dmgMulti=(2.8+(.2*I2R(skLv)))if not(IsTriggerEnabled(gg_trg_Suzumebachi))then
call EnableTrigger(gg_trg_Suzumebachi)endifif(skLv>5)thencall DestroyTrigger(Soifon_SuzumebachiLearn)
set Soifon_SuzumebachiLearn=null
endifendfunctionfunction Suzumebachi___Init takes nothing returns nothingcall TriggerAddCondition(Soifon_SuzumebachiLearn,Condition(function Suzumebachi___LearnCond))call TriggerAddAction(Soifon_SuzumebachiLearn,function Suzumebachi___LearnAct)set gg_trg_Suzumebachi=CreateTrigger()call DisableTrigger(gg_trg_Suzumebachi)call TriggerRegisterAnyUnitEventBJ(gg_trg_Suzumebachi,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Suzumebachi,Condition(function Suzumebachi___Cond))call TriggerAddAction(gg_trg_Suzumebachi,function Suzumebachi___Act)
endfunctionfunction WindBlast___ActL takes nothing returns nothinglocal timer tif(GetUnitAbilityLevel(WindBlast___u,WindBlast___bWwId)<1)thenset t=GetExpiredTimer()call PauseTimer(t)call DestroyTimer(t)
set t=nullif(WindBlast___u!=null)and(GetUnitState(WindBlast___u,UNIT_STATE_LIFE)>0)thenset bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(WindBlast___u),'u003',GetUnitX(WindBlast___u),GetUnitY(WindBlast___u),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,WindBlast___sAspdId)call IssueTargetOrderById(bj_lastCreatedUnit,$D00F1,WindBlast___u)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set WindBlast___u=nullendifendifendfunctionfunction WindBlast___Cond takes nothing returns booleanreturn(GetSpellAbilityId()==WindBlast___skId)endfunctionfunction WindBlast___Act takes nothing returns nothinglocal timer tset WindBlast___u=GetTriggerUnit()call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdx",WindBlast___u,"chest"))set t=CreateTimer()call TimerStart(t,.04,true,function WindBlast___ActL)set t=nullendfunctionfunction WindBlast___Init takes nothing returns nothingset gg_trg_Wind_Blast=CreateTrigger()call TriggerAddCondition(gg_trg_Wind_Blast,Condition(function WindBlast___Cond))
call TriggerAddAction(gg_trg_Wind_Blast,function WindBlast___Act)endfunctionfunction NigekiKessatsu___Cond takes nothing returns boolean
return(GetSpellAbilityId()==NigekiKessatsu___skId)endfunctionfunction NigekiKessatsu___Act takes nothing returns nothinglocal unit array ulocal player plocal real array xlocal real array ylocal real dmglocal real facinglocal real ratio
local real pHPlocal real r
local integer iset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set dmg=(400.+((3.+GetUnitAbilityLevel(u[0],NigekiKessatsu___skId))*GetHeroAgi(u[0],true)))call TriggerSleepAction(.0)set p=GetOwningPlayer(u[0])set x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set r=120.set x[2]=PolarX(x[1],r,facing)set y[2]=PolarY(y[1],r,facing)set r=1.
set ratio=40.set i=R2I(DistanceBetweenXY(x[0],y[0],x[2],y[2])/ ratio)
loop
exitwhen(i<1)set x[0]=PolarX(x[0],ratio,facing)set y[0]=PolarY(y[0],ratio,facing)set bj_lastCreatedUnit=CreateUnit(p,'h0E1',x[0],y[0],facing)
call SetUnitAnimation(bj_lastCreatedUnit,"attack slam")call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,63)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',((r*.02)+.06))
set i=i-1set r=r+1.endloopset bj_lastCreatedUnit=CreateUnit(p,'h04R',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set bj_lastCreatedUnit=CreateUnit(p,'h04R',x[1],y[1],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call DestroyTreeXY(x[2],y[2],140.)if not(UnitMoveXY(u[0],x[2],y[2]))thencall SetUnitPosition(u[0],x[2],y[2])
endifcall IssueTargetOrderById(u[0],$D000F,u[1])call DisplayText("Nigeki Kessatsu",u[0],.023,false,$FF,$FF,$FF,$FF)set pHP=(100.-GetUnitStatePercent(u[1],UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE))/ 3.
if(GetUnitTypeId(u[0])=='O00G')thenset pHP=pHP+10.endifif(GetUnitAbilityLevel(u[1],'B04B')>0 and GetRandomInt(0,'d')<R2I(pHP))thencall DisplayCriticalText("999999!",u[0],$DC,5,5,$FF)
call SetUnitState(u[1],UNIT_STATE_LIFE,1.)set bj_lastCreatedUnit=CreateUnit(p,'h0CZ',x[1],y[1],facing)
call SetUnitScale(bj_lastCreatedUnit,1.5,1.5,1.5)call SetUnitVertexColor(bj_lastCreatedUnit,$FF,20,20,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set bj_lastCreatedUnit=CreateUnit(p,'h07I',x[1],y[1],facing)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)call UnitDamageTarget(bj_lastCreatedUnit,u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)else
call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
if(GetUnitState(u[1],UNIT_STATE_LIFE)>0)then
set bj_lastCreatedUnit=CreateUnit(p,'u003',x[1],y[1],bj_UNIT_FACING)
call UnitAddAbility(bj_lastCreatedUnit,'A0I3')call IssueTargetOrderById(bj_lastCreatedUnit,$D008E,u[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendifset u[0]=nullset u[1]=nullset p=nullendfunctionfunction NigekiKessatsu___Init takes nothing returns nothing
set gg_trg_Nigeki_Kessatsu=CreateTrigger()call TriggerAddCondition(gg_trg_Nigeki_Kessatsu,Condition(function NigekiKessatsu___Cond))call TriggerAddAction(gg_trg_Nigeki_Kessatsu,function NigekiKessatsu___Act)endfunctionfunction SoiFonShonko__Conditions takes nothing returns booleanreturn(GetSpellAbilityId()==SoiFonShonko__skId)endfunctionfunction SoiFonShonko__Actions takes nothing returns nothing
local unit u=GetTriggerUnit()local player plocal real x
local real y
if(GetUnitTypeId(u)!=SoiFonShonko__morpId)thenset p=GetOwningPlayer(u)
call DisplayText("Shunko",u,.023,false,$FF,$FF,$FF,$FF)set x=GetUnitX(u)set y=GetUnitY(u)call SoundPatch_Spell(udg_soundPatch_Bleach+"\\Yoruichi\\Shunkou.wav",x,y)set bj_lastCreatedUnit=CreateUnit(p,'h056',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,udg_TransformSkill)call IssueImmediateOrderById(bj_lastCreatedUnit,$D0080)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h04T',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p,'h04U',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.5,4.5,4.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(p,'h091',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set bj_lastCreatedUnit=CreateUnit(p,'h04R',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,4.,4.,4.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call TransfromAction(u,x,y)set p=nullendifcall TriggerSleepAction(udg_PermanentBonus_Delay)call BonusAbilityCheck(u)if(GetUnitAbilityLevel(u,'A0IN')<1)and(GetUnitAbilityLevel(u,'A0I2')>0)thencall UnitAddAbility(u,'A0IN')endifset u=nullendfunctionfunction SoiFonShonko__Init takes nothing returns nothingset gg_trg_Soifon_Shunkou=CreateTrigger()call TriggerAddCondition(gg_trg_Soifon_Shunkou,Condition(function SoiFonShonko__Conditions))
call TriggerAddAction(gg_trg_Soifon_Shunkou,function SoiFonShonko__Actions)endfunctionfunction Trig_Soifon_ShunkouD_Act takes nothing returns nothinglocal unit u=GetDyingUnit()local integer mainSkId='A0IN'call TriggerSleepAction((udg_Revive_Time+1.5))if(GetUnitAbilityLevel(u,mainSkId)<1)and(GetUnitAbilityLevel(u,'A0I2')>0)thencall UnitAddAbility(u,mainSkId)endifset u=nullendfunctionfunction InitTrig_Soifon_ShunkouD takes nothing returns nothingset gg_trg_Soifon_ShunkouD=CreateTrigger()call TriggerAddAction(gg_trg_Soifon_ShunkouD,function Trig_Soifon_ShunkouD_Act)endfunctionfunction JakuhoRaikoben__ActClear takes nothing returns nothingcall PauseTimer(JakuhoRaikoben__t2)call DestroyTimer(JakuhoRaikoben__t2)set JakuhoRaikoben__t2=nullset JakuhoRaikoben__u[0]=nullset JakuhoRaikoben__p=nullendfunctionfunction JakuhoRaikoben__ActL2 takes nothing returns nothing
local unit pickedlocal group glocal real x
local real y
if(JakuhoRaikoben__j>0)thenset JakuhoRaikoben__j=JakuhoRaikoben__j-1set x=PolarX(GetUnitX(JakuhoRaikoben__u[0]),JakuhoRaikoben__backSpeed,JakuhoRaikoben__facing[1])
set y=PolarY(GetUnitY(JakuhoRaikoben__u[0]),JakuhoRaikoben__backSpeed,JakuhoRaikoben__facing[1])
call DestroyTreeXY(x,y,JakuhoRaikoben__garea1)call UnitMoveXY(JakuhoRaikoben__u[0],x,y)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h017',x,y,bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.7)else
call PauseTimer(JakuhoRaikoben__t2)call DestroyTimer(JakuhoRaikoben__t2)set JakuhoRaikoben__t2=nullset JakuhoRaikoben__t2=CreateTimer()
call TimerStart(JakuhoRaikoben__t2,3.,false,function JakuhoRaikoben__ActClear)endifendfunctionfunction JakuhoRaikoben__ActL takes nothing returns nothinglocal unit pickedlocal group glocal real x
local real y
if(JakuhoRaikoben__i>0)thenset JakuhoRaikoben__i=JakuhoRaikoben__i-1set x=PolarX(GetUnitX(JakuhoRaikoben__u[1]),JakuhoRaikoben__dummySpeed,JakuhoRaikoben__facing[0])set y=PolarY(GetUnitY(JakuhoRaikoben__u[1]),JakuhoRaikoben__dummySpeed,JakuhoRaikoben__facing[0])set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h0DY',x,y,JakuhoRaikoben__facing[1])call SetUnitScale(bj_lastCreatedUnit,.4,.4,.4)call SetUnitFlyHeight(bj_lastCreatedUnit,130.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyTreeXY(x,y,JakuhoRaikoben__garea1)call SetUnitX(JakuhoRaikoben__u[1],x)call SetUnitY(JakuhoRaikoben__u[1],y)set JakuhoRaikoben__backSpeed=JakuhoRaikoben__backSpeed-4.else
call PauseTimer(JakuhoRaikoben__t1)call DestroyTimer(JakuhoRaikoben__t1)set JakuhoRaikoben__t1=nullset x=GetUnitX(JakuhoRaikoben__u[1])
set y=GetUnitY(JakuhoRaikoben__u[1])
call Dynamic_GroupShake(x,y,1.2,udg_CameraShakePow,udg_CameraArea,null)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h083',x,y,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0A8')call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueImmediateOrderById(bj_lastCreatedUnit,$D009F)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',8.)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h08V',x,y,bj_UNIT_FACING)call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set g=CreateGroupXY(x,y,JakuhoRaikoben__garea2,JakuhoRaikoben__p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(IsUnitType(picked,UNIT_TYPE_HERO))thencall DisplayText(I2S(R2I(JakuhoRaikoben__dmg))+"!",picked,.027,true,$FF,0,0,$FF)
endifcall UnitDamageTarget(JakuhoRaikoben__u[0],picked,JakuhoRaikoben__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set picked=nullendloopcall DestroyGroup(g)
set g=nullcall SetUnitTimeScale(JakuhoRaikoben__u[1],4.)call UnitApplyTimedLife(JakuhoRaikoben__u[1],'BTLF',2.)call SetUnitAnimation(JakuhoRaikoben__u[1],"death")set JakuhoRaikoben__u[1]=nullendifendfunctionfunction JakuhoRaikoben__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==JakuhoRaikoben__skId)endfunctionfunction JakuhoRaikoben__Act takes nothing returns nothinglocal real array xlocal real array ylocal real r
set JakuhoRaikoben__u[0]=GetTriggerUnit()set x[0]=GetSpellTargetX()set y[0]=GetSpellTargetY()set x[1]=GetUnitX(JakuhoRaikoben__u[0])set y[1]=GetUnitY(JakuhoRaikoben__u[0])set JakuhoRaikoben__facing[1]=AngleBetweenXY(x[0],y[0],x[1],y[1])set JakuhoRaikoben__facing[0]=(JakuhoRaikoben__facing[1]+90.)set r=12.set x[1]=PolarX(x[1],r,JakuhoRaikoben__facing[0])set y[1]=PolarY(y[1],r,JakuhoRaikoben__facing[0])set JakuhoRaikoben__facing[0]=AngleBetweenXY(x[1],y[1],x[0],y[0])set JakuhoRaikoben__p=GetOwningPlayer(JakuhoRaikoben__u[0])call Dynamic_Sound("Sounds\\JakuhoRaikoben.mp3")
call DisplayText("Jakuho Raikoben",JakuhoRaikoben__u[0],.023,true,$DC,5,5,$FF)set JakuhoRaikoben__dmg=((1000.+(GetUnitAbilityLevel(JakuhoRaikoben__u[0],JakuhoRaikoben__skId)*5.))+(GetHeroAgi(JakuhoRaikoben__u[0],false)*5.))set JakuhoRaikoben__u[1]=CreateUnit(JakuhoRaikoben__p,'h0E2',x[1],y[1],JakuhoRaikoben__facing[0])call TriggerSleepAction(.0)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h0BF',x[1],y[1],JakuhoRaikoben__facing[0])call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call SetUnitFlyHeight(bj_lastCreatedUnit,150.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h0BF',x[1],y[1],JakuhoRaikoben__facing[0])call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)call SetUnitFlyHeight(bj_lastCreatedUnit,150.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',3.)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h0B9',x[1],y[1],JakuhoRaikoben__facing[1])call SetUnitFlyHeight(bj_lastCreatedUnit,110.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set bj_lastCreatedUnit=CreateUnit(JakuhoRaikoben__p,'h0DY',x[1],y[1],JakuhoRaikoben__facing[1])call SetUnitScale(bj_lastCreatedUnit,3.,3.,3.)call SetUnitFlyHeight(bj_lastCreatedUnit,120.,.0)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)set r=DistanceBetweenXY(x[0],y[0],x[1],y[1])
set JakuhoRaikoben__i=R2I(r/ JakuhoRaikoben__dummySpeed)
set JakuhoRaikoben__t1=CreateTimer()
call TimerStart(JakuhoRaikoben__t1,.03,true,function JakuhoRaikoben__ActL)set JakuhoRaikoben__backSpeed=72.set JakuhoRaikoben__j=$C
set JakuhoRaikoben__t2=CreateTimer()
call TimerStart(JakuhoRaikoben__t2,.04,true,function JakuhoRaikoben__ActL2)endfunctionfunction JakuhoRaikoben__Init takes nothing returns nothingset gg_trg_Jakuho_Raikoben=CreateTrigger()call TriggerAddCondition(gg_trg_Jakuho_Raikoben,Condition(function JakuhoRaikoben__Cond))call TriggerAddAction(gg_trg_Jakuho_Raikoben,function JakuhoRaikoben__Act)endfunctionfunction AIDoflamingo__isAtked takes nothing returns boolean
return(GetUnitTypeId(GetTriggerUnit())==AIDoflamingo__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIDoflamingo__isAtker takes nothing returns boolean
return(GetUnitTypeId(GetAttacker())==AIDoflamingo__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)
endfunctionfunction AIDoflamingo__Cond takes nothing returns booleanif(not(AIDoflamingo__isAtked()or AIDoflamingo__isAtker()))thenreturn false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIDoflamingo__Act takes nothing returns nothing
local unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIDoflamingo__AINo])
call TriggerSleepAction(AI_TrigDelayRun)
if(AIDoflamingo__isAtked())thenset myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0IH')call SelectHeroSkill(mySelf,'A0IE')call SelectHeroSkill(mySelf,'A0ID')call SelectHeroSkill(mySelf,'A0IB')call SelectHeroSkill(mySelf,'A0IA')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifif(IsUnitType(myTarget,UNIT_TYPE_HERO))thencall IssueImmediateOrderById(mySelf,$D009B)call IssueTargetOrderById(mySelf,$D00FA,myTarget)call IssueTargetOrderById(mySelf,$D0065,myTarget)call IssueTargetOrderById(mySelf,$D0097,myTarget)endifif(isAttacking)thencall IssueTargetOrderById(mySelf,$D009D,myTarget)endifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIDoflamingo__AINo])endfunctionfunction AIDoflamingo__Init takes nothing returns nothingset udg_AI_Trig[AIDoflamingo__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIDoflamingo__AINo],Condition(function AIDoflamingo__Cond))
call TriggerAddAction(udg_AI_Trig[AIDoflamingo__AINo],function AIDoflamingo__Act)endfunctionfunction Goshikito__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==Goshikito__skId)
endfunctionfunction Goshikito__GoshikitoAct takes unit self,real targetX,real targetY,real dmg returns nothinglocal unit array ulocal player plocal group glocal real garea=500.local real array xlocal real array ylocal real r
local integer ilocal integer array redlocal integer array greenlocal integer array blue
set u[0]=selfset x[0]=targetX
set y[0]=targetY
set red[0]=$FFset green[0]=$FF
set blue[0]=$FFset red[1]=$FFset green[1]=0set blue[1]=0set red[2]=0
set green[2]=$FF
set blue[2]=0set red[3]=0
set green[3]=50set blue[3]=$FFset red[4]=$FFset green[4]=0set blue[4]=$FFset red[5]=$FFset green[5]=0set blue[5]=$FFset p=GetOwningPlayer(u[0])call DisplayText("Goshikito",u[0],.023,false,$FF,$FF,$FF,$FF)set x[1]=GetUnitX(u[0])set y[1]=GetUnitY(u[0])set g=CreateGroupXY(x[1],y[1],garea,p)loop
set u[1]=FirstOfGroup(g)
exitwhen(u[1]==null)
call GroupRemoveUnit(g,u[1])
call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdx",u[1],"chest"))set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set i=GetRandomInt(0,5)if(GetRandomInt(0,1)==0)then
set bj_lastCreatedUnit=CreateUnit(p,'h0E3',x[1],y[1],GetRandomReal(0,360))else
set bj_lastCreatedUnit=CreateUnit(p,'h038',x[1],y[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,.3,.3,.3)endifcall SetUnitVertexColor(bj_lastCreatedUnit,red[i],green[i],blue[i],$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=GetRandomInt(0,5)if(GetRandomInt(0,1)==0)then
set bj_lastCreatedUnit=CreateUnit(p,'h0E3',x[1],y[1],GetRandomReal(0,360))else
set bj_lastCreatedUnit=CreateUnit(p,'h038',x[1],y[1],GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,.4,.4,.4)endifcall SetUnitVertexColor(bj_lastCreatedUnit,red[i],green[i],blue[i],$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(g)
set g=nullset u[0]=nullset p=nullendfunctionfunction Goshikito__Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit clone
local real targetX=GetSpellTargetX()
local real targetY=GetSpellTargetY()
local real x
local real y
local real dmg=BasicDmg_Q(self,Goshikito__skId,1)local real array rlocal group glocal effect array effset g=CreateGroupUnitType(Goshikito__cloneId,GetOwningPlayer(self))loop
set clone=FirstOfGroup(g)exitwhen(clone==null)or(GetUnitAbilityLevel(clone,Goshikito__cloneBuffId)>0)
call GroupRemoveUnit(g,clone)endloopcall DestroyGroup(g)
set g=nullset eff[0]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",self,"hand left")set eff[1]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",self,"hand right")set r[0]=110.set r[1]=AngleBetweenXY(GetUnitX(self),GetUnitY(self),targetX,targetY)if(clone!=null and DistanceBetweenXY(GetUnitX(clone),GetUnitY(clone),targetX,targetY)<1000.)then
set dmg=dmg*1.2call SetUnitAnimation(clone,"spell five")call SetUnitFacing(clone,AngleBetweenXY(GetUnitX(clone),GetUnitY(clone),targetX,targetY))set eff[2]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",clone,"hand left")set eff[3]=AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",clone,"hand right")
call TriggerSleepAction(.0)call UnitMoveXY2(self,PolarX(targetX,r[0],r[1]),PolarY(targetY,r[0],r[1]))set r[1]=AngleBetweenXY(GetUnitX(clone),GetUnitY(clone),targetX,targetY)
call UnitMoveXY2(clone,PolarX(targetX,r[0],r[1]),PolarY(targetY,r[0],r[1]))call Goshikito__GoshikitoAct(self,targetX,targetY,dmg)call TriggerSleepAction(.1)call DestroyEffect(eff[2])call DestroyEffect(eff[3])set eff[2]=nullset eff[3]=nullelse
call TriggerSleepAction(.0)call UnitMoveXY2(self,PolarX(targetX,r[0],r[1]),PolarY(targetY,r[0],r[1]))call Goshikito__GoshikitoAct(self,targetX,targetY,dmg)call TriggerSleepAction(.1)endifcall DestroyEffect(eff[0])call DestroyEffect(eff[1])set eff[0]=nullset eff[1]=nullset self=nullset clone=nullendfunctionfunction Goshikito__Init takes nothing returns nothingset gg_trg_Goshikito=CreateTrigger()
call TriggerAddCondition(gg_trg_Goshikito,Condition(function Goshikito__Cond))call TriggerAddAction(gg_trg_Goshikito,function Goshikito__Act)endfunctionfunction Tamaito__Cond takes nothing returns boolean
return(GetSpellAbilityId()==Tamaito__skId)endfunctionfunction Tamaito__TamaitoActL takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer id=GetHandleId(t)local unit array ulocal real array xlocal real array ylocal integer ilocal real facingset u[1]=LoadUnitHandle(Joker_TamaitoHash,id,1)set u[2]=LoadUnitHandle(Joker_TamaitoHash,id,2)set i=LoadInteger(Joker_TamaitoHash,id,3)set x[0]=GetUnitX(u[2])set y[0]=GetUnitY(u[2])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])if(i>1 and DistanceBetweenXY(x[0],y[0],x[1],y[1])>Tamaito__speed)thencall SaveInteger(Joker_TamaitoHash,id,3,(i-1))set x[0]=PolarX(x[0],Tamaito__speed,facing)set y[0]=PolarY(y[0],Tamaito__speed,facing)call SetUnitX(u[2],x[0])
call SetUnitY(u[2],y[0])
else
call PauseTimer(t)call DestroyTimer(t)
call SetUnitX(u[2],x[1])
call SetUnitY(u[2],y[1])
call SetUnitAnimation(u[2],"death")call UnitApplyTimedLife(u[2],'BTLF',1.)if(i>1 and(GetUnitState(u[1],UNIT_STATE_LIFE)>0))thenset u[0]=CreateUnit(LoadPlayerHandle(Joker_TamaitoHash,id,4),'h0E5',x[1],y[1],facing)call SetUnitTimeScale(u[0],1.5)call UnitDamageTarget(u[0],u[1],LoadReal(Joker_TamaitoHash,id,5),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)if(GetUnitState(u[1],UNIT_STATE_LIFE)>0)then
call UnitRemoveAbility(u[0],'Amov')call IssueTargetOrderById(u[0],$D007F,u[1])endifcall UnitApplyTimedLife(u[0],'BTLF',5.)set u[0]=nullendifcall FlushChildHashtable(Joker_TamaitoHash,id)endifset u[1]=nullset u[2]=nullset t=nullendfunctionfunction Tamaito__TamaitoAct takes unit self,unit target,real dmg returns nothinglocal unit array ulocal real array xlocal real array ylocal real facinglocal real r
local player plocal timer tlocal integer iset u[0]=selfset u[1]=targetset x[0]=GetUnitX(u[0])set y[0]=GetUnitY(u[0])set x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set r=80.set x[2]=PolarX(x[0],r,facing)set y[2]=PolarY(y[0],r,facing)set r=40.set facing=facing+90.set x[2]=PolarX(x[2],r,facing)set y[2]=PolarY(y[2],r,facing)set p=GetOwningPlayer(u[0])call DisplayText("Tamaito",u[0],.023,true,$FF,$FF,$FF,$FF)set r=80.set facing=AngleBetweenXY(x[2],y[2],GetUnitX(u[1]),GetUnitY(u[1]))set bj_lastCreatedUnit=CreateUnit(p,'h05I',PolarX(x[2],r,facing),PolarY(y[2],r,facing),(facing-180.))call SetUnitScale(bj_lastCreatedUnit,1.,1.,1.)call SetUnitFlyHeight(bj_lastCreatedUnit,130.,.0)call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)set u[2]=CreateUnit(p,'h0E4',x[2],y[2],facing)set x[0]=GetUnitX(u[2])set y[0]=GetUnitY(u[2])set t=CreateTimer()set i=GetHandleId(t)
call SaveUnitHandle(Joker_TamaitoHash,i,1,u[1])call SaveUnitHandle(Joker_TamaitoHash,i,2,u[2])call SaveInteger(Joker_TamaitoHash,i,3,18)call SavePlayerHandle(Joker_TamaitoHash,i,4,p)call SaveReal(Joker_TamaitoHash,i,5,dmg)
call TimerStart(t,.03,true,function Tamaito__TamaitoActL)set u[0]=nullset u[1]=nullset u[2]=nullset p=nullset t=nullendfunctionfunction Tamaito__Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit target=GetSpellTargetUnit()local unit clone
local real dmg=(250.+(GetUnitAbilityLevel(self,Tamaito__skId)*50.))local group g=CreateGroupUnitType(Tamaito__cloneId,GetOwningPlayer(self))loop
set clone=FirstOfGroup(g)exitwhen(clone==null)or(GetUnitAbilityLevel(clone,Tamaito__cloneBuffId)>0)call GroupRemoveUnit(g,clone)endloopcall DestroyGroup(g)
set g=nullcall Tamaito__TamaitoAct(self,target,dmg)if(clone!=null and DistanceBetweenXY(GetUnitX(clone),GetUnitY(clone),GetUnitX(target),GetUnitY(target))<1000.)thencall IssueImmediateOrderById(clone,$D0004)call SetUnitAnimation(clone,"spell two")
call Tamaito__TamaitoAct(clone,target,(dmg*.5))endifset self=nullset target=nullset clone=nullendfunctionfunction Tamaito__Init takes nothing returns nothing
set gg_trg_Tamaito=CreateTrigger()call TriggerAddCondition(gg_trg_Tamaito,Condition(function Tamaito__Cond))call TriggerAddAction(gg_trg_Tamaito,function Tamaito__Act)endfunctionfunction BlackKnight__summonCond takes nothing returns booleanreturn(GetUnitAbilityLevel(GetSummonedUnit(),BlackKnight__cloneBuffId)>0)endfunctionfunction BlackKnight__summonAct takes nothing returns nothinglocal unit sumUnit=GetSummonedUnit()
local player p=GetOwningPlayer(sumUnit)call DisableTrigger(BlackKnight__summonTrg)call SetUnitAnimation(BlackKnight__u,"spell four")call SetUnitAnimation(sumUnit,"spell four")call SelectUnitAddForPlayer(sumUnit,p)set bj_lastCreatedUnit=CreateUnit(p,'h0AO',GetUnitX(sumUnit),GetUnitY(sumUnit),bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set bj_lastCreatedUnit=CreateUnit(p,'h0AO',GetUnitX(BlackKnight__u),GetUnitY(BlackKnight__u),bj_UNIT_FACING)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.,2.,2.)set sumUnit=null
set BlackKnight__u=nullset p=nullendfunctionfunction BlackKnight__Cond takes nothing returns boolean
return(GetSpellAbilityId()==BlackKnight__skId)endfunctionfunction BlackKnight__Act takes nothing returns nothingset BlackKnight__u=GetTriggerUnit()call DisplayText("Black Knight",BlackKnight__u,.023,true,$FF,$FF,$FF,$FF)call EnableTrigger(BlackKnight__summonTrg)call TriggerSleepAction(1.)if(IsTriggerEnabled(BlackKnight__summonTrg))then
call DisableTrigger(BlackKnight__summonTrg)set BlackKnight__u=nullendifendfunctionfunction BlackKnight__Init takes nothing returns nothing
set gg_trg_Black_Knight=CreateTrigger()call TriggerAddCondition(gg_trg_Black_Knight,Condition(function BlackKnight__Cond))call TriggerAddAction(gg_trg_Black_Knight,function BlackKnight__Act)
set BlackKnight__summonTrg=CreateTrigger()call DisableTrigger(BlackKnight__summonTrg)call TriggerRegisterAnyUnitEventBJ(BlackKnight__summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(BlackKnight__summonTrg,Condition(function BlackKnight__summonCond))
call TriggerAddAction(BlackKnight__summonTrg,function BlackKnight__summonAct)endfunctionfunction SoranoMichi__SoraActL takes nothing returns nothing
local timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local unit array ulocal real array xlocal real array ylocal integer ilocal player plocal real dmglocal real distanlocal real speed
local real facinglocal group glocal unit pickedset u[0]=LoadUnitHandle(Joker_SoraHash,tId,0)set u[1]=LoadUnitHandle(Joker_SoraHash,tId,1)set i=LoadInteger(Joker_SoraHash,tId,2)set p=LoadPlayerHandle(Joker_SoraHash,tId,3)
set dmg=LoadReal(Joker_SoraHash,tId,4)set distan=LoadReal(Joker_SoraHash,tId,5)set speed=LoadReal(Joker_SoraHash,tId,6)
if(GetUnitState(u[0],UNIT_STATE_LIFE)>0)then
if(i<SoranoMichi__max)thenset i=i+1call SetUnitFly(u[0])call SaveInteger(Joker_SoraHash,tId,2,i)
if(i<=SoranoMichi__halfMax)thencall SetUnitFlyHeight(u[0],(SoranoMichi__heightRate*i),.0)set distan=(distan-(speed/ 2))else
call SetUnitFlyHeight(u[0],(SoranoMichi__maxHeight-(SoranoMichi__heightRate*i)),.0)set distan=(distan-(speed/ 2))endifset x[1]=GetUnitX(u[1])set y[1]=GetUnitY(u[1])set facing=LoadReal(Joker_SoraHash,tId,7)set x[1]=PolarX(x[1],SoranoMichi__polarTarget,facing)set y[1]=PolarY(y[1],SoranoMichi__polarTarget,facing)set facing=AngleBetweenXY(x[1],y[1],GetUnitX(u[0]),GetUnitY(u[0]))call SaveReal(Joker_SoraHash,tId,5,distan)set x[1]=PolarX(x[1],distan,facing)set y[1]=PolarY(y[1],distan,facing)call DestroyTreeXY(x[1],y[1],SoranoMichi__polarTarget)call UnitMoveXY(u[0],x[1],y[1])set i=(LoadInteger(Joker_SoraHash,tId,8)+1)if(i>SoranoMichi__countRun)thencall SaveInteger(Joker_SoraHash,tId,8,0)
set g=CreateGroupXY(x[1],y[1],SoranoMichi__garea,p)loop
set picked=FirstOfGroup(g)exitwhen(picked==null)call GroupRemoveUnit(g,picked)if(GetRandomInt(0,1)==0)then
set bj_lastCreatedUnit=CreateUnit(p,'h0E3',GetUnitX(picked),GetUnitY(picked),GetRandomReal(0,360))else
set bj_lastCreatedUnit=CreateUnit(p,'h038',GetUnitX(picked),GetUnitY(picked),GetRandomReal(0,360))call SetUnitScale(bj_lastCreatedUnit,.3,.3,.3)endifcall UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",picked,"chest"))call UnitDamageTarget(u[0],picked,dmg,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endloopcall DestroyGroup(g)
set g=nullelse
call SaveInteger(Joker_SoraHash,tId,8,i)
endifelse
call PauseTimer(t)call DestroyTimer(t)
call DestroyEffect(LoadEffectHandle(Joker_SoraHash,tId,9))call DestroyEffect(LoadEffectHandle(Joker_SoraHash,tId,$A))call FlushChildHashtable(Joker_SoraHash,tId)
call SetUnitFly(u[0])call SetUnitFlyHeight(u[0],0,.0)
endifelse
call PauseTimer(t)call DestroyTimer(t)
call DestroyEffect(LoadEffectHandle(Joker_SoraHash,tId,9))call DestroyEffect(LoadEffectHandle(Joker_SoraHash,tId,$A))call FlushChildHashtable(Joker_SoraHash,tId)
call SetUnitFly(u[0])call SetUnitFlyHeight(u[0],0,.0)
endifset u[0]=nullset u[1]=nullset t=nullset p=nullendfunctionfunction SoranoMichi__SoraAct takes unit self,unit target,real dmg returns nothinglocal real array xlocal real array ylocal real facinglocal real r
local player plocal timer tlocal integer iset p=GetOwningPlayer(self)set x[0]=GetUnitX(self)set y[0]=GetUnitY(self)set x[1]=GetUnitX(target)set y[1]=GetUnitY(target)set facing=AngleBetweenXY(x[0],y[0],x[1],y[1])set x[1]=PolarX(x[1],SoranoMichi__polarTarget,facing)set y[1]=PolarY(y[1],SoranoMichi__polarTarget,facing)call DisplayText("Sora no Michi",self,.023,true,$FF,$FF,$FF,$FF)
set t=CreateTimer()set i=GetHandleId(t)
call SaveUnitHandle(Joker_SoraHash,i,0,self)
call SaveUnitHandle(Joker_SoraHash,i,1,target)call SaveInteger(Joker_SoraHash,i,2,0)call SavePlayerHandle(Joker_SoraHash,i,3,p)call SaveReal(Joker_SoraHash,i,4,dmg)set r=DistanceBetweenXY(x[0],y[0],x[1],y[1])
call SaveReal(Joker_SoraHash,i,5,r)call SaveReal(Joker_SoraHash,i,6,(r/ SoranoMichi__halfMax))call SaveReal(Joker_SoraHash,i,7,facing)
call SaveInteger(Joker_SoraHash,i,8,SoranoMichi__countRun)call SaveEffectHandle(Joker_SoraHash,i,9,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",self,"hand left"))call SaveEffectHandle(Joker_SoraHash,i,$A,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdx",self,"hand right"))call TimerStart(t,.03,true,function SoranoMichi__SoraActL)set self=nullset target=nullset p=nullset t=nullendfunctionfunction SoranoMichi__timerAct takes nothing returns nothing
local timer t=GetExpiredTimer()local integer tId=GetHandleId(t)
local unit u=LoadUnitHandle(Joker_SoraCDHash,tId,50)
if(GetUnitAbilityLevel(u,SoranoMichi__cdSkId)>0)then
call UnitRemoveAbility(u,SoranoMichi__cdSkId)call SetPlayerAbilityAvailable(GetOwningPlayer(u),SoranoMichi__skId,true)endifcall PauseTimer(t)call DestroyTimer(t)
set t=nullset u=nullset SoranoMichi__stack=SoranoMichi__stack+1call FlushChildHashtable(Joker_SoraCDHash,tId)endfunctionfunction SoranoMichi__Cond takes nothing returns boolean
return(GetSpellAbilityId()==SoranoMichi__skId)endfunctionfunction SoranoMichi__Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit target=GetSpellTargetUnit()local player p=GetOwningPlayer(self)
local group glocal unit clone
local real dmg=(GetHeroAgi(self,true)*.42)local real targetX=GetSpellTargetX()
local real targetY=GetSpellTargetY()
local timer t=CreateTimer()set SoranoMichi__stack=SoranoMichi__stack-1call TimerStart(t,SoranoMichi__cooldown,false,function SoranoMichi__timerAct)if(SoranoMichi__stack<1)then
call SetPlayerAbilityAvailable(p,SoranoMichi__skId,false)call UnitAddAbility(self,SoranoMichi__cdSkId)endifcall SaveUnitHandle(Joker_SoraCDHash,GetHandleId(t),50,self)
set t=nullif(target==null)then
set target=CreateUnit(p,'u003',targetX,targetY,bj_UNIT_FACING)call UnitApplyTimedLife(target,'BTLF',5.)else
if(GetUnitAbilityLevel(target,SoranoMichi__cloneBuffId)>0)thenset target=CreateUnit(p,'u003',targetX,targetY,bj_UNIT_FACING)call UnitApplyTimedLife(target,'BTLF',5.)endifif(IsUnitEnemy(target,p))thenset bj_lastCreatedUnit=CreateUnit(p,'u003',targetX,targetY,bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,SoranoMichi__dummySkId)call SetUnitAbilityLevel(bj_lastCreatedUnit,SoranoMichi__dummySkId,GetUnitAbilityLevel(self,SoranoMichi__skId))call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D00B5,target)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifendifcall SoranoMichi__SoraAct(self,target,dmg)set g=CreateGroupUnitType(SoranoMichi__cloneId,p)loop
set clone=FirstOfGroup(g)exitwhen(clone==null)or(GetUnitAbilityLevel(clone,SoranoMichi__cloneBuffId)>0)call GroupRemoveUnit(g,clone)endloopcall DestroyGroup(g)
set g=nullif(clone!=null and DistanceBetweenXY(GetUnitX(clone),GetUnitY(clone),targetX,targetY)<2000.)then
call IssueImmediateOrderById(clone,$D0004)call SetUnitAnimation(clone,"spell three")call SoranoMichi__SoraAct(clone,target,dmg)endifset self=nullset target=nullset clone=nullset p=nullendfunctionfunction SoranoMichi__Init takes nothing returns nothing
set gg_trg_Sora_no_Michi=CreateTrigger()
call TriggerAddCondition(gg_trg_Sora_no_Michi,Condition(function SoranoMichi__Cond))
call TriggerAddAction(gg_trg_Sora_no_Michi,function SoranoMichi__Act)endfunctionfunction GodThread__ActL takes nothing returns nothinglocal real array xlocal real array ylocal real array rif(GodThread__i>0 and(GetUnitState(GodThread__u[0],UNIT_STATE_LIFE)>0)and(GetUnitState(GodThread__u[1],UNIT_STATE_LIFE)>0))thenset GodThread__i=GodThread__i-1set x[0]=GetUnitX(GodThread__u[1])set y[0]=GetUnitY(GodThread__u[1])call SetUnitX(GodThread__u[2],x[0])call SetUnitY(GodThread__u[2],y[0])if(GetUnitAbilityLevel(GodThread__u[1],GodThread__bufRootId)<1)thenset bj_lastCreatedUnit=CreateUnit(GodThread__p,'u003',x[0],y[0],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,GodThread__skRootId)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call IssueTargetOrderById(bj_lastCreatedUnit,$D00CB,GodThread__u[1])
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)endifset r[0]=-600.set x[1]=PolarX(x[0],r[0],GodThread__angle)set y[1]=PolarY(y[0],r[0],GodThread__angle)set r[0]=GetRandomReal(-400.,400.)set r[1]=GodThread__angle+90.set x[1]=PolarX(x[1],r[0],r[1])set y[1]=PolarY(y[1],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(GodThread__p,'h0E6',x[1],y[1],AngleBetweenXY(x[1],y[1],x[0],y[0]))
call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.3)set r[0]=GetRandomReal(-400.,400.)set r[1]=GodThread__angle+90.set x[1]=PolarX(x[1],r[0],r[1])set y[1]=PolarY(y[1],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(GodThread__p,'h0E6',x[1],y[1],AngleBetweenXY(x[1],y[1],x[0],y[0]))
call SetUnitTimeScale(bj_lastCreatedUnit,1.4)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.3)set bj_lastCreatedUnit=CreateUnit(GodThread__p,'h0E8',x[1],y[1],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,2.)
call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)if(GodThread__b)then
set GodThread__b=falsecall SetUnitAnimation(GodThread__u[1],"death")call DestroyTreeXY(x[0],y[0],200.)call Dynamic_GroupShake(x[0],y[0],.5,8.,udg_CameraArea,null)
set bj_lastCreatedUnit=CreateUnit(GodThread__p,'h08H',x[0],y[0],GetRandomReal(0,360))call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set r[0]=GetRandomReal(0,200.)set r[1]=GetRandomReal(0,360.)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(GodThread__p,'h01H',x[1],y[1],bj_UNIT_FACING)call SetUnitTimeScale(bj_lastCreatedUnit,1.7)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',.44)call UnitDamageTarget(GodThread__u[0],GodThread__u[1],GodThread__dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)else
set GodThread__b=trueendifelse
call PauseTimer(GodThread__t)call DestroyTimer(GodThread__t)set GodThread__t=nullif(GetUnitAbilityLevel(GodThread__u[1],GodThread__bufRootId)>0)thencall SetUnitAnimation(GodThread__u[1],"stand")call UnitRemoveAbility(GodThread__u[1],GodThread__bufRootId)
endifcall UnitApplyTimedLife(GodThread__u[2],'BTLF',1.)call SetUnitAnimation(GodThread__u[2],"death")set GodThread__u[0]=null
set GodThread__u[1]=null
set GodThread__u[2]=null
set GodThread__p=nullendifendfunctionfunction GodThread__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==GodThread__skId)
endfunctionfunction GodThread__Act takes nothing returns nothinglocal real array xlocal real array ylocal real r
set GodThread__u[0]=GetTriggerUnit()
set GodThread__u[1]=GetSpellTargetUnit()
set GodThread__p=GetOwningPlayer(GodThread__u[0])set GodThread__dmg=(50.+(GetHeroAgi(GodThread__u[0],false)*.5))call Dynamic_Sound("Sounds\\Joker.mp3")set x[0]=GetUnitX(GodThread__u[0])set y[0]=GetUnitY(GodThread__u[0])set x[1]=GetUnitX(GodThread__u[1])set y[1]=GetUnitY(GodThread__u[1])set GodThread__angle=AngleBetweenXY(x[0],y[0],x[1],y[1])
call DisplayText("God Thread",GodThread__u[0],.023,true,$DC,5,5,$FF)
set GodThread__u[2]=CreateUnit(GodThread__p,'h0E7',x[1],y[1],GetRandomReal(0,360))call SetUnitAnimation(GodThread__u[2],"birth")set GodThread__i=49+((GetUnitAbilityLevel(GodThread__u[0],GodThread__skId))*4)set GodThread__b=trueset GodThread__t=CreateTimer()call TimerStart(GodThread__t,.06,true,function GodThread__ActL)endfunctionfunction GodThread__Init takes nothing returns nothingset gg_trg_God_Thread=CreateTrigger()call TriggerAddCondition(gg_trg_God_Thread,Condition(function GodThread__Cond))call TriggerAddAction(gg_trg_God_Thread,function GodThread__Act)
endfunctionfunction AIShunsui__isAtked takes nothing returns booleanreturn(GetUnitTypeId(GetTriggerUnit())==AIShunsui__AIType and GetPlayerController(GetOwningPlayer(GetTriggerUnit()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIShunsui__isAtker takes nothing returns booleanreturn(GetUnitTypeId(GetAttacker())==AIShunsui__AIType and GetPlayerController(GetOwningPlayer(GetAttacker()))==MAP_CONTROL_COMPUTER)endfunctionfunction AIShunsui__Cond takes nothing returns booleanif(not(AIShunsui__isAtked()or AIShunsui__isAtker()))then
return false
endifreturn(IsUnitEnemy(GetAttacker(),GetOwningPlayer(GetTriggerUnit()))and IsUnitIllusion(GetAttacker())==false and IsUnitIllusion(GetTriggerUnit())==false)
endfunctionfunction AIShunsui__Act takes nothing returns nothinglocal unit mySelflocal unit myTargetlocal real selfHPPercent
local real targetHPPercentlocal real targetXlocal real targetYlocal boolean isAttacking=falselocal boolean isHeroTargetcall DisableTrigger(udg_AI_Trig[AIShunsui__AINo])call TriggerSleepAction(AI_TrigDelayRun)
if(AIShunsui__isAtked())then
set myTarget=GetAttacker()set mySelf=GetTriggerUnit()else
set mySelf=GetAttacker()
set myTarget=GetTriggerUnit()set isAttacking=true
endifset selfHPPercent=GetUnitStatePercent(mySelf,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set targetHPPercent=GetUnitStatePercent(myTarget,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)set isHeroTarget=IsUnitType(myTarget,UNIT_TYPE_HERO)
if(selfHPPercent>AI_AtkSelfHP or(targetHPPercent<AI_AtkTargetHPBelow and isHeroTarget))thenif(GetHeroSkillPoints(mySelf)>0)then
call SelectHeroSkill(mySelf,'A0JP')call SelectHeroSkill(mySelf,'A0JQ')call SelectHeroSkill(mySelf,'A0JM')call SelectHeroSkill(mySelf,'A0JL')call SelectHeroSkill(mySelf,'A0JK')endifif((selfHPPercent-targetHPPercent)>AI_AtkSelfHPAvt)thenset targetX=GetUnitX(myTarget)set targetY=GetUnitY(myTarget)if(DistanceBetweenXY(GetUnitX(mySelf),GetUnitY(mySelf),targetX,targetY)>AI_OrderBlinkDistance)thencall IssuePointOrderById(mySelf,$D022D,targetX,targetY)call TriggerSleepAction(AI_DelayAfterBlink)endifendifcall IssueTargetOrderById(mySelf,$D009D,myTarget)if(IsUnitType(myTarget,UNIT_TYPE_HERO))thenif(isAttacking)thencall IssueImmediateOrderById(mySelf,$D0277)call IssueImmediateOrderById(mySelf,$D00A1)call IssueImmediateOrderById(mySelf,$D0084)endifcall IssueTargetOrderById(mySelf,$D0097,myTarget)endifendifset mySelf=nullset myTarget=nullcall TriggerSleepAction(AI_TrigDelayEnable)call EnableTrigger(udg_AI_Trig[AIShunsui__AINo])
endfunctionfunction AIShunsui__Init takes nothing returns nothingset udg_AI_Trig[AIShunsui__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIShunsui__AINo],Condition(function AIShunsui__Cond))call TriggerAddAction(udg_AI_Trig[AIShunsui__AINo],function AIShunsui__Act)endfunctionfunction Bushogoma__Cond takes nothing returns booleanreturn(GetSpellAbilityId()=='A0JK')endfunctionfunction Bushogoma__Act takes nothing returns nothingcall DisplayText("Bushogoma",GetTriggerUnit(),.023,false,$FF,$FF,$FF,$FF)endfunctionfunction Bushogoma__Init takes nothing returns nothingset gg_trg_Bushogoma=CreateTrigger()
call TriggerAddCondition(gg_trg_Bushogoma,Condition(function Bushogoma__Cond))call TriggerAddAction(gg_trg_Bushogoma,function Bushogoma__Act)endfunctionfunction KatenKyokotsu__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==KatenKyokotsu__skId)
endfunctionfunction KatenKyokotsu__Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local real delay=.1local integer buffId='B04S'local integer skBook='A0JN'call DisplayText("Katen Kyokotsu",self,.023,false,$FF,$FF,$FF,$FF)call UnitAddAbility(self,skBook)
loop
call TriggerSleepAction(delay)exitwhen(GetUnitAbilityLevel(self,buffId)<1)
endloopcall UnitRemoveAbility(self,skBook)set self=nullendfunctionfunction KatenKyokotsu__Init takes nothing returns nothingset gg_trg_Katen_Kyokotsu=CreateTrigger()call TriggerAddCondition(gg_trg_Katen_Kyokotsu,Condition(function KatenKyokotsu__Cond))call TriggerAddAction(gg_trg_Katen_Kyokotsu,function KatenKyokotsu__Act)
endfunctionfunction Kageoni__Cond takes nothing returns boolean
return(GetSpellAbilityId()==Kageoni__skId)endfunctionfunction Kageoni__ActL takes nothing returns nothing
if(GetUnitAbilityLevel(Kageoni__self,Kageoni__buffId)>0)then
set bj_lastCreatedUnit=CreateUnit(Kageoni__p,'h00D',GetUnitX(Kageoni__self),GetUnitY(Kageoni__self),bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',2.)call SetUnitScale(bj_lastCreatedUnit,.2,.2,.2)call SetUnitTimeScale(bj_lastCreatedUnit,.8)
else
call PauseTimer(Kageoni__t)call DestroyTimer(Kageoni__t)set Kageoni__t=nullcall SetUnitAbilityLevel(Kageoni__self,Kageoni__skDmg,0)
call UnitRemoveAbility(Kageoni__self,Kageoni__skInvis)call UnitRemoveAbility(Kageoni__self,Kageoni__skStrike)call SetPlayerAbilityAvailable(Kageoni__p,Kageoni__skId,true)set Kageoni__self=nullset Kageoni__p=nullendifendfunctionfunction Kageoni__Act takes nothing returns nothingset Kageoni__self=GetTriggerUnit()set Kageoni__p=GetOwningPlayer(Kageoni__self)call DisplayText("Kageoni",Kageoni__self,.023,false,$FF,$FF,$FF,$FF)
set bj_lastCreatedUnit=CreateUnit(Kageoni__p,'u003',GetUnitX(Kageoni__self),GetUnitY(Kageoni__self),bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,'A0JS')call IssueTargetOrderById(bj_lastCreatedUnit,$D0085,Kageoni__self)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitAbilityLevel(Kageoni__self,Kageoni__skDmg,(GetUnitAbilityLevel(Kageoni__self,Kageoni__skId)+1))call SetPlayerAbilityAvailable(Kageoni__p,Kageoni__skId,false)call UnitAddAbility(Kageoni__self,Kageoni__skInvis)call UnitAddAbility(Kageoni__self,Kageoni__skStrike)
set Kageoni__t=CreateTimer()
call TimerStart(Kageoni__t,.05,true,function Kageoni__ActL)endfunctionfunction Kageoni__Init takes nothing returns nothing
set gg_trg_Kageoni=CreateTrigger()call TriggerAddCondition(gg_trg_Kageoni,Condition(function Kageoni__Cond))call TriggerAddAction(gg_trg_Kageoni,function Kageoni__Act)endfunctionfunction KageoniStrike__Cond takes nothing returns booleanreturn(GetSpellAbilityId()==KageoniStrike__skId)
endfunctionfunction KageoniStrike__Act takes nothing returns nothinglocal unit self=GetTriggerUnit()
local unit target=GetSpellTargetUnit()local real x=GetUnitX(target)local real y=GetUnitY(target)local real dist=120.
local real facing=AngleBetweenXY(GetUnitX(self),GetUnitY(self),x,y)set bj_lastCreatedUnit=CreateUnit(GetOwningPlayer(self),'h06S',x,y,GetRandomReal(0,360))
call SetUnitTimeScale(bj_lastCreatedUnit,1.5)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.5)set x=PolarX(x,dist,facing)set y=PolarY(y,dist,facing)call UnitMoveXY2(self,x,y)set self=nullset target=nullendfunctionfunction KageoniStrike__Init takes nothing returns nothingset gg_trg_Kageoni_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Kageoni_Strike,Condition(function KageoniStrike__Cond))call TriggerAddAction(gg_trg_Kageoni_Strike,function KageoniStrike__Act)
endfunctionfunction KaramatsuShinju__restoreSkill takes unit u,player p2 returns nothingcall UnitRemoveAbility(u,KaramatsuShinju__skId2)
call SetPlayerAbilityAvailable(p2,KaramatsuShinju__skId1,true)endfunctionfunction KaramatsuShinju__ItokiribasamiCond takes nothing returns booleanreturn(GetSpellAbilityId()==KaramatsuShinju__skId2)endfunctionfunction KaramatsuShinju__ItokiribasamiAct takes nothing returns nothing
local unit array ulocal player p2local real dmglocal real array xlocal real array ylocal real array rlocal integer iset u[0]=GetTriggerUnit()set u[1]=GetSpellTargetUnit()set p2=GetOwningPlayer(u[0])
set dmg=(700.+((7*GetUnitAbilityLevel(u[0],KaramatsuShinju__skId2))*GetHeroAgi(u[0],false)))
call DisplayText("Shime no Dan: Itokiribasami Chizome no Nodobue",u[0],.023,false,$DC,5,5,$FF)call KaramatsuShinju__restoreSkill(u[0],p2)set x[0]=GetUnitX(u[1])set y[0]=GetUnitY(u[1])call Dynamic_GroupShake(x[0],y[0],.1,udg_CameraShakePow,udg_CameraArea,null)
set bj_lastCreatedUnit=CreateUnit(p2,'h038',x[0],y[0],GetRandomReal(0,360))call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p2,'h038',x[0],y[0],GetRandomReal(0,360))call SetUnitVertexColor(bj_lastCreatedUnit,$FF,$FF,$FF,$FF)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set bj_lastCreatedUnit=CreateUnit(p2,'h07I',x[0],y[0],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p2,'h07I',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p2,'h00P',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set bj_lastCreatedUnit=CreateUnit(p2,'h00E',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)set bj_lastCreatedUnit=CreateUnit(p2,'h00E',x[0],y[0],GetRandomReal(0,360))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.2)call SetUnitScale(bj_lastCreatedUnit,2.5,2.5,2.5)set r[0]=150.set i=0loop
exitwhen(8<i)set r[1]=I2R(45*i)set x[1]=PolarX(x[0],r[0],r[1])set y[1]=PolarY(y[0],r[0],r[1])set bj_lastCreatedUnit=CreateUnit(KaramatsuShinju__p,'h00Q',x[1],y[1],r[1])call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',4.)set i=i+1endloopcall DisplayText(I2S(R2I(dmg))+"!",u[1],.027,true,$FF,0,0,$FF)call UnitDamageTarget(u[0],u[1],dmg,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)
set u[0]=nullset u[1]=nullset p2=nullendfunctionfunction KaramatsuShinju__Cond takes nothing returns boolean
return(GetSpellAbilityId()==KaramatsuShinju__skId1)endfunctionfunction KaramatsuShinju__ActL takes nothing returns nothing
local real x
local real y
if(GetUnitAbilityLevel(KaramatsuShinju__self,KaramatsuShinju__buffId)>0)then
set x=GetUnitX(KaramatsuShinju__self)set y=GetUnitY(KaramatsuShinju__self)call SetUnitX(KaramatsuShinju__dummy,x)call SetUnitY(KaramatsuShinju__dummy,y)set bj_lastCreatedUnit=CreateUnit(KaramatsuShinju__p,'h07H',x,y,bj_UNIT_FACING)call UnitRemoveAbility(bj_lastCreatedUnit,'Amov')call UnitAddAbility(bj_lastCreatedUnit,KaramatsuShinju__skHowl)call IssueImmediateOrderById(bj_lastCreatedUnit,$D026C)call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)call SetUnitScale(bj_lastCreatedUnit,5.,5.,5.)else
call PauseTimer(KaramatsuShinju__t)call DestroyTimer(KaramatsuShinju__t)set KaramatsuShinju__t=nullif(GetUnitAbilityLevel(KaramatsuShinju__self,KaramatsuShinju__skId2)>0)thencall KaramatsuShinju__restoreSkill(KaramatsuShinju__self,KaramatsuShinju__p)
endifcall UnitRemoveAbility(KaramatsuShinju__self,KaramatsuShinju__skBook)call RemoveUnit(KaramatsuShinju__dummy)set KaramatsuShinju__dummy=nullset KaramatsuShinju__self=nullset KaramatsuShinju__p=nullendifendfunctionfunction KaramatsuShinju__Act takes nothing returns nothinglocal real x
local real y
local real array rlocal integer skSpiritWave='A0JX'local integer iset KaramatsuShinju__self=GetTriggerUnit()set KaramatsuShinju__p=GetOwningPlayer(KaramatsuShinju__self)call DisplayText("Bankai: Katen Kyokotsu: Karamatsu Shinju",KaramatsuShinju__self,.023,true,$DC,5,5,$FF)
call SetPlayerAbilityAvailable(KaramatsuShinju__p,KaramatsuShinju__skId1,false)call UnitAddAbility(KaramatsuShinju__self,KaramatsuShinju__skId2)call UnitAddAbility(KaramatsuShinju__self,KaramatsuShinju__skBook)set x=GetUnitX(KaramatsuShinju__self)set y=GetUnitY(KaramatsuShinju__self)set KaramatsuShinju__dummy=CreateUnit(KaramatsuShinju__p,'h08I',x,y,bj_UNIT_FACING)set i=1loop
exitwhen(i>18)set r[0]=200.set r[1]=I2R(i*20)set bj_lastCreatedUnit=CreateUnit(KaramatsuShinju__p,'u003',x,y,r[1])call UnitAddAbility(bj_lastCreatedUnit,skSpiritWave)
call IssuePointOrderById(bj_lastCreatedUnit,$D0264,PolarX(x,r[0],r[1]),PolarY(y,r[0],r[1]))call UnitApplyTimedLife(bj_lastCreatedUnit,'BTLF',1.)set i=i+1endloopset KaramatsuShinju__t=CreateTimer()
call TimerStart(KaramatsuShinju__t,1.,true,function KaramatsuShinju__ActL)endfunctionfunction KaramatsuShinju__Init takes nothing returns nothing
set gg_trg_Karamatsu_Shinju=CreateTrigger()call TriggerAddCondition(gg_trg_Karamatsu_Shinju,Condition(function KaramatsuShinju__Cond))call TriggerAddAction(gg_trg_Karamatsu_Shinju,function KaramatsuShinju__Act)
set Shunsui_Itokiribasami=CreateTrigger()call TriggerAddCondition(Shunsui_Itokiribasami,Condition(function KaramatsuShinju__ItokiribasamiCond))call TriggerAddAction(Shunsui_Itokiribasami,function KaramatsuShinju__ItokiribasamiAct)endfunctionfunction InitCustomTriggers takes nothing returns nothingcall InitTrig_Initialization1()call InitTrig_Initalization2()call InitTrig_Initalization3()call InitTrig_Global_Variables()
call InitTrig_Game_Score()call InitTrig_Hero_Setup()call InitTrig_Teleport_Setup()call InitTrig_Player_Setup()
call InitTrig_Creep_Setup()call InitTrig_Golem_Setup()call InitTrig_Blue_Staff_Setup()
call InitTrig_Music_Setup()call InitTrig_Sound_Setup()call InitTrig_Preload_System()call InitTrig_Terrain_Set()call InitTrig_Restore_Tree()
call InitTrig_VisionStart1()
call InitTrig_VisionStart2()
call InitTrig_Board()call InitTrig_Board_Update()
call InitTrig_Mode_On()call InitTrig_Mode_Checker()
call InitTrig_All_Random()call InitTrig_No_Event()
call InitTrig_BountyHunter()
call InitTrig_BountyHunterSet()call InitTrig_BountyHunterRun()call InitTrig_BountyHunterCheck()call InitTrig_Fast_Hunt()call InitTrig_SuperCreep()call InitTrig_ScSpawn()call InitTrig_ScDie()call InitTrig_DoubleScore()call InitTrig_Maximum_Score()call InitTrig_Event_1v1()call InitTrig_Pick()
call InitTrig_Random()call InitTrig_Repick()call InitTrig_AI_Blink()
call InitTrig_AI_Run()call InitTrig_AI_Start()
call InitTrig_AI_Action()call InitTrig_AI_Return_1()call InitTrig_AI_Return_2()call InitTrig_AI_Duel()call InitTrig_AI_Item()call InitTrig_Teleport_Run()
call InitTrig_All_Teleport()
call InitTrig_Duel_Warning()
call InitTrig_Duel()
call InitTrig_Duel_Invul()call InitTrig_Duel_Vul()
call InitTrig_Duel_Kill()call InitTrig_Duel_OverTime()call InitTrig_Duel_Move()call InitTrig_Atk_Disable()call InitTrig_Kill()
call InitTrig_First_Blood()call InitTrig_Lvup()
call InitTrig_Kill_Countdown()call InitTrig_Revive()call InitTrig_Home_Set()
call InitTrig_Home_Regen()call InitTrig_Remove_Regen()
call InitTrig_Home1_Kill()call InitTrig_Home2_Kil()call InitTrig_Leavegame()call InitTrig_Remove_Unit()call InitTrig_Golem_Spawn()call InitTrig_Golem_Leave()call InitTrig_Golem_Die()call InitTrig_Golem_Final()call InitTrig_Boss_Setup()call InitTrig_Boss_Spawn()call InitTrig_Boss_BackL()call InitTrig_Boss_BackR()call InitTrig_FinalBoss_Ability1()call InitTrig_FinalBoss_Ability2()call InitTrig_FinalBoss()call InitTrig_Gate_Boss()call InitTrig_Gate_Boss_Back()call InitTrig_Forgot_Init()call InitTrig_Forgot_Boss()call InitTrig_Forgot_Back()call InitTrig_Forgot_Die()call InitTrig_Divine_Init()call InitTrig_Divine_Warp()call InitTrig_DivineSword()call InitTrig_Divine_Back()call InitTrig_Divine_Death()
call InitTrig_Bonus_Gold()call InitTrig_Item_Stacking()call InitTrig_Remove_Item()call InitTrig_Permanent_Bonus()call InitTrig_RegenRune()call InitTrig_Fuison()call InitTrig_Fusion2()call InitTrig_Fusion3()call InitTrig_DagonActive()call InitTrig_HexActive()call InitTrig_DiffusalActive()call InitTrig_DoomSearing()call InitTrig_Spiritual()call InitTrig_Frostmourne_Stack()call InitTrig_Frostmourne_Remove()call InitTrig_Frostmourne_Attack()call InitTrig_Orb_of_Frost_Stack()call InitTrig_Orb_of_Frost_Remove()call InitTrig_Orb_of_Frost_Attack()call InitTrig_Shop5_Upgrade()call InitTrig_Space_Boots()call InitTrig_Natural_Boots()call InitTrig_Heavy_Boots()call InitTrig_Fire_Boots()call InitTrig_Adventure_Boots()call InitTrig_Red_Boots()call InitTrig_Helm_Battle_Thirst()call InitTrig_God_Sphere()call InitTrig_Arcanite_Shield()call InitTrig_Frostmourne()call InitTrig_Blood_Sword()call InitTrig_Corrupted_Desolator()call InitTrig_Zanbato()call InitTrig_EyeSkadi()
call InitTrig_TheHeaven()call InitTrig_Hogyoku()call InitTrig_Hex()call InitTrig_Monkey()call InitTrig_HellCrusher()call InitTrig_UltimaSword()call InitTrig_MysticStaff()call InitTrig_Assault()call InitTrig_HyperStone()call InitTrig_AncientFigurine()call InitTrig_Maximillian()call InitTrig_TheRedButterfly()call InitTrig_SilverHelm()call InitTrig_Excalibur()call InitTrig_Evasion()call InitTrig_Quarterstaff()
call InitTrig_Dagon()call InitTrig_UltimateOrb()call InitTrig_Linken()call InitTrig_Satanic()call InitTrig_Heart()call InitTrig_Messerschmid()
call InitTrig_Radiance()
call InitTrig_SacredRelic()call InitTrig_BoosSpeed()call InitTrig_GloveHaste()call InitTrig_MithrilHammer()call InitTrig_MaelStrom()call InitTrig_DemonEdge()call InitTrig_Buriza()call InitTrig_Lothar()call InitTrig_Eaglehorn()call InitTrig_PointBooster()
call InitTrig_VitBooster()call InitTrig_Shield()call InitTrig_Planeswalker()
call InitTrig_HelmIronWill()
call InitTrig_ChainMail()call InitTrig_BladeMail()call InitTrig_BroadSword()call InitTrig_BladeAtk()
call InitTrig_Crystalys()call InitTrig_Berserk()call InitTrig_MaskofDeath()call InitTrig_Vladmi()call InitTrig_Diffusal()
call InitTrig_StaffWizard()call InitTrig_BladeAgi()
call InitTrig_OrgeAxe()call InitTrig_Searing()call InitTrig_Sange()call InitTrig_Yasha()call InitTrig_EnergyBooster()call InitTrig_SobiMask()
call InitTrig_RingProtect()call InitTrig_RobeMagi()
call InitTrig_BootsAgi()
call InitTrig_BeltStr()call InitTrig_GiantStr()
call InitTrig_Slipper()call InitTrig_Mantle()call InitTrig_Circlet()call InitTrig_VoidStone()call InitTrig_RingHealth()call InitTrig_Ultimate_Upgrade()
call InitTrig_Remove_Upgrade()call InitTrig_Ms_Show()call InitTrig_CameraNormal()
call InitTrig_CameraHigh()call InitTrig_CameraLow()call InitTrig_Clear()call InitTrig_Music_Command()call InitTrig_SoundPatch_Enable()call InitTrig_SoundPatch_Disable()call InitTrig_End_Skill()call InitTrig_End_Dialog()call InitTrig_Stop_Shake()call InitTrig_Return()call InitTrig_Skill_Point_Manage()call InitTrig_Destroy_AI()call InitTrig_Blink1()call InitTrig_Blink2()call InitTrig_Cero()
call InitTrig_Fgt_Init()
call InitTrig_Fgt()call InitTrig_FgtAtk()call InitTrig_FgtDeath()
call InitTrig_Gat()call InitTrig_GatL()
call InitTrig_GatC()
call InitTrig_Gear4_Init()call InitTrig_Gear4()call InitTrig_Rdw()call InitTrig_Rdw2()
call InitTrig_RdwV()
call InitTrig_Kkg()call InitTrig_KkgL()
call InitTrig_KkgS()
call InitTrig_KkgS2()call InitTrig_Lrs()call InitTrig_LrsL()
call InitTrig_Jiton_RasenganC()call InitTrig_Cbr()call InitTrig_CbrS()
call InitTrig_CbrL()
call InitTrig_Trs()call InitTrig_TrsL()
call InitTrig_Smt()call InitTrig_Hkr()call InitTrig_HkrC()
call InitTrig_HkrL()
call InitTrig_HkrCancel()call InitTrig_WhiteSword()call InitTrig_AI_Zoro()call InitTrig_Ssn()call InitTrig_Ykd()call InitTrig_YkdL()
call InitTrig_Sph()call InitTrig_SphL()
call InitTrig_Csp()call InitTrig_CspL()
call InitTrig_Tmk()call InitTrig_TmkR()
call InitTrig_Sds()call InitTrig_SdsL()
call InitTrig_SdsV()
call InitTrig_Amenotejikara()call InitTrig_Sasuke_Genjutsu()call InitTrig_Gkn()call InitTrig_GknL()
call InitTrig_GknD()
call InitTrig_Dot()call InitTrig_DotL()
call InitTrig_Sck()call InitTrig_SckL()
call InitTrig_AI_Sado()call InitTrig_Osg()call InitTrig_OsgL()
call InitTrig_Dsf_Init()
call InitTrig_Dsf()call InitTrig_BrazoDiablo()call InitTrig_Ets()call InitTrig_Tdh()call InitTrig_TdhL()
call InitTrig_AI_Nami()call InitTrig_Lrt()call InitTrig_LrtL()
call InitTrig_Tbt()call InitTrig_Mto()call InitTrig_MtoC()
call InitTrig_Scs()call InitTrig_ScsL()
call InitTrig_Tlt()call InitTrig_TltR()
call InitTrig_Rkb()call InitTrig_RkbC()
call InitTrig_RkbD()
call InitTrig_Lib()call InitTrig_LibL()
call InitTrig_Kml()call InitTrig_KmlL()
call InitTrig_Lie()call InitTrig_LieL()
call InitTrig_Tls()call InitTrig_TlsL()
call InitTrig_AI_Ishida()call InitTrig_Mts()call InitTrig_Lrg()call InitTrig_LrgM()
call InitTrig_LrgL()
call InitTrig_Sda()call InitTrig_SdaR()
call InitTrig_SdaC()
call InitTrig_SdaL()
call InitTrig_Sgr()call InitTrig_Qff()call InitTrig_QffC()
call InitTrig_QffL()
call InitTrig_AI_Usopp()
call InitTrig_Dial()
call InitTrig_DialL()call InitTrig_Tjr()call InitTrig_Stf_Init()
call InitTrig_StfU()
call InitTrig_Stf()call InitTrig_Seg()call InitTrig_Abe()call InitTrig_Ipf()call InitTrig_IpfB()
call InitTrig_IpfL()
call InitTrig_IpfL2()call InitTrig_AI_Neji()call InitTrig_Gef()call InitTrig_Eth()call InitTrig_EthL()
call InitTrig_Rti()call InitTrig_RtiL()
call InitTrig_Bkg()call InitTrig_BkgC()
call InitTrig_BkgDmg()call InitTrig_Hns()call InitTrig_HnsL()
call InitTrig_HnsC()
call InitTrig_Etp()call InitTrig_EtpL()
call InitTrig_Etp2()
call InitTrig_Tcb()call InitTrig_TcbL()
call InitTrig_Srl()call InitTrig_Anl()call InitTrig_AnlL()
call InitTrig_AnlE()
call InitTrig_Wes()call InitTrig_AI_Shirohige()
call InitTrig_Endurance()call InitTrig_Nrt()call InitTrig_NrtL()
call InitTrig_Grc_Init()
call InitTrig_Grc()call InitTrig_Gks()call InitTrig_GksL()
call InitTrig_Kin()call InitTrig_KinL()
call InitTrig_Isk()call InitTrig_IskD()
call InitTrig_Madara_SixPath()call InitTrig_Mti()call InitTrig_MtiL()
call InitTrig_Khg()call InitTrig_KhgL()
call InitTrig_Hik()call InitTrig_HikL()
call InitTrig_Hdb()call InitTrig_HdbL()
call InitTrig_Eti()call InitTrig_EtiL()
call InitTrig_Ffb_Init()
call InitTrig_Ffb()call InitTrig_FfbL()
call InitTrig_Iss_Init()
call InitTrig_Iss()call InitTrig_Iss_Anim()
call InitTrig_Hii()call InitTrig_HiiL()
call InitTrig_AI_Hitsugaya()
call InitTrig_Hnm()call InitTrig_HnmL()
call InitTrig_Inv()call InitTrig_InvL()
call InitTrig_Inv2()
call InitTrig_InvL2()call InitTrig_Daiguren_Init()call InitTrig_Daiguren()
call InitTrig_Dhf()call InitTrig_DhfL()
call InitTrig_Hho()call InitTrig_HhoL()
call InitTrig_HhoR()
call InitTrig_AI_Crocodile()
call InitTrig_Sand_Skin()call InitTrig_Dsd()call InitTrig_DsdL()
call InitTrig_Csd()call InitTrig_CsdL()
call InitTrig_Crocodile_Init()call InitTrig_Gse()call InitTrig_GseL()
call InitTrig_Sad()call InitTrig_SadL()
call InitTrig_Coe()call InitTrig_AI_Pain()call InitTrig_Samsara()call InitTrig_Amp()call InitTrig_AmpL()
call InitTrig_Uvp()call InitTrig_UvpL()
call InitTrig_Rkj()call InitTrig_Pdn()call InitTrig_PdnL()
call InitTrig_PdnL2()call InitTrig_Sdt()call InitTrig_Sdt_Die()call InitTrig_AI_Kenpachi()call InitTrig_Thrilling_Spiritual()call InitTrig_Czj()call InitTrig_CzjL()
call InitTrig_Release_Eye()call InitTrig_Release_Eye_Attack()call InitTrig_Kds()call InitTrig_AI_Enel()call InitTrig_Jog()call InitTrig_Tmt()call InitTrig_Tmt_Attack()call InitTrig_Vri_Cast()
call InitTrig_Vri_L()call InitTrig_Vri()call InitTrig_Mmg()call InitTrig_MmgL()
call InitTrig_Rgo()call InitTrig_RgoL()
call InitTrig_AI_Deidara()call InitTrig_C13()call InitTrig_C13L()
call InitTrig_C1()call InitTrig_C1_Bomb()call InitTrig_C12()call InitTrig_C12L()
call InitTrig_C3()call InitTrig_C3L()call InitTrig_C4()call InitTrig_C4L()call InitTrig_C4L2()
call InitTrig_C0()call InitTrig_C0L()call InitTrig_AI_Yamamoto()call InitTrig_Fsw()call InitTrig_FswL()
call InitTrig_Lot_Init()
call InitTrig_Lot()call InitTrig_Lot_Atk()call InitTrig_Cin()call InitTrig_CinL()
call InitTrig_CinL2()call InitTrig_CinL3()call InitTrig_Kjd()call InitTrig_KjdL()
call InitTrig_Kjd_Atk()call InitTrig_AI_Mihawk()call InitTrig_Ovp()call InitTrig_Ovp_Atk()call InitTrig_Bst()call InitTrig_BstV()
call InitTrig_Hws()call InitTrig_HwsL()
call InitTrig_Wof()call InitTrig_Bwt()call InitTrig_BwtL()
call InitTrig_BwtL2()call InitTrig_AI_Hidan()
call InitTrig_Scythe_Slash()
call InitTrig_Wielding_Strike()call InitTrig_Blood_Die()call InitTrig_Czs()call InitTrig_Czs_L()call InitTrig_Czs_End()call InitTrig_Curse_Jutsu()call InitTrig_Curse_Dmg()call InitTrig_Curse_Area()call InitTrig_Spear_Self_Pain()call InitTrig_AI_Evil_Ichigo()call InitTrig_White_Getsuga()call InitTrig_Getsuga_Strike()call InitTrig_Btz_Init()
call InitTrig_Btz()call InitTrig_Btz_Atk()call InitTrig_Hsm()call InitTrig_HsmL()
call InitTrig_HsmL2()call InitTrig_Evil_Moon_Slash()call InitTrig_AI_Sanji()
call InitTrig_Ptk_Cast()
call InitTrig_Ptk()call InitTrig_PtkL()
call InitTrig_Veal_Shot()call InitTrig_Diable_Jambe()
call InitTrig_Csh()call InitTrig_CshL()
call InitTrig_Lsh()call InitTrig_LshL()
call InitTrig_Lsh2()
call InitTrig_Lsh3()
call InitTrig_AI_Zabuza()call InitTrig_Water_Prison()
call InitTrig_Wdg()call InitTrig_WdgL()
call InitTrig_Flying_Turn_Slash()call InitTrig_Hidden_Mist_Jutsu()call InitTrig_Skl()call InitTrig_SklV()
call InitTrig_Demon_Power()call InitTrig_Demon_Power_Attack()call InitTrig_Gvj()call InitTrig_GvjL()
call InitTrig_GvjM()
call InitTrig_AI_Yoruichi()call InitTrig_Flb()call InitTrig_FlbL()
call InitTrig_Flw()call InitTrig_Flw_Atk()call InitTrig_FlwL()
call InitTrig_Flash_Strike()
call InitTrig_Shunko_Init()call InitTrig_Shunko()call InitTrig_Flo()call InitTrig_FloL()
call InitTrig_FloL2()call InitTrig_AI_Lucci()
call InitTrig_Tpk()call InitTrig_TpkL()
call InitTrig_Shigan()call InitTrig_Tki_Init()
call InitTrig_Tki()call InitTrig_Baf_Init()
call InitTrig_Baf()call InitTrig_Rog()call InitTrig_RogL()
call InitTrig_AI_Tobi()call InitTrig_TimeSpace()call InitTrig_TimeSpaceL()call InitTrig_Kot()call InitTrig_KotL()
call InitTrig_Kamui_Strike_Learn()call InitTrig_Kamui_Strike()
call InitTrig_Kmo()call InitTrig_KmoL()
call InitTrig_Switch_Body_Init()
call InitTrig_Switch_Body()call InitTrig_Switch_Body_Dmg()call InitTrig_Izanagi_Init()
call InitTrig_Izanagi()call InitTrig_Izanagi_L()call InitTrig_Izanagi_Speed()call InitTrig_AI_Starrk()call InitTrig_Rapid_Shot_Learn()
call InitTrig_Rapid_Shot()call InitTrig_Shs()call InitTrig_ShsL()
call InitTrig_Iah()call InitTrig_IahL()
call InitTrig_IahM()
call InitTrig_IahP()
call InitTrig_IahC()
call InitTrig_Wlv()call InitTrig_Mgh()call InitTrig_MghA()
call InitTrig_Ing()call InitTrig_IngL()
call InitTrig_Ryu()call InitTrig_RyuL()
call InitTrig_Mgo()call InitTrig_MgoL()
call InitTrig_AI_Hashirama()
call InitTrig_Universe()
call InitTrig_Wgf()call InitTrig_WgfL()
call InitTrig_Wood_Destruction()
call InitTrig_Five_Rashomon()call InitTrig_Wdm()call InitTrig_Wdm_L()call InitTrig_Wmk()call InitTrig_WmkL()
call InitTrig_AI_Ulquiorra()
call InitTrig_Memory_Erasing()call InitTrig_Hoq()call InitTrig_HoqL()
call InitTrig_Urs_Init()
call InitTrig_Urs()call InitTrig_Urs_Atk()call InitTrig_Lance_of_Lightning()call InitTrig_AI_Kizaru()call InitTrig_Lsc()call InitTrig_LscL()
call InitTrig_Eight_Span_Mirror()call InitTrig_Cje()call InitTrig_CjeL()
call InitTrig_CjeC()
call InitTrig_AI_Tobirama()call InitTrig_Wvf()call InitTrig_WvfL()
call InitTrig_Giant_Water()call InitTrig_Wdj()call InitTrig_WdjL()
call InitTrig_Www()call InitTrig_WwwL()
call InitTrig_Water_Wave()call InitTrig_Infinite_Darkness()call InitTrig_AI_Grimmjow()call InitTrig_Cpt()call InitTrig_CptL()
call InitTrig_BerserkerBlood_Learn()
call InitTrig_BerserkerBlood()call InitTrig_Grimmjow_Res_Init()call InitTrig_Grimmjow_Res()
call InitTrig_Pkc()call InitTrig_PkcL()
call InitTrig_AI_Fujitora()call InitTrig_GravityBlade_Init()call InitTrig_GravityBlade()
call InitTrig_Gravity_Slam()
call InitTrig_Gvs()call InitTrig_GvsL()
call InitTrig_Meteor_Storm()
call InitTrig_Fgr()call InitTrig_FgrC()
call InitTrig_FgrL()
call InitTrig_FgrL2()call InitTrig_AI_Kaguya()call InitTrig_Ush()call InitTrig_UshL()
call InitTrig_Tbi()call InitTrig_TbiC()
call InitTrig_TbiL()
call InitTrig_Dark_Roots()call InitTrig_Tnh()call InitTrig_TnhA()
call InitTrig_Aoi_Learn()call InitTrig_Aoi()call InitTrig_Tso()call InitTrig_TsoL()
call InitTrig_AI_Ikkaku()call InitTrig_Great_Cleave()
call InitTrig_Counter_Spin()
call InitTrig_Ikkaku_Bankai_Init()call InitTrig_Ikkaku_Bankai()call InitTrig_Dragon_Charge()call InitTrig_Fnm()call InitTrig_FnmL()
call InitTrig_FnmL2()call InitTrig_Soifon_ShunkouD()endfunctionfunction RunInitializationTriggers takes nothing returns nothing
call ConditionalTriggerExecute(gg_trg_Initialization1)endfunctionfunction InitCustomPlayerSlots takes nothing returns nothing
call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(0),false)call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(1),false)call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(2),false)call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(3),false)call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(4),false)call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(5),false)call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(6),false)call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(7),false)call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(8),false)call SetPlayerController(Player(8),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),9)
call ForcePlayerStartLocation(Player(9),9)call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(9),false)call SetPlayerController(Player(9),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player($A),$A)call ForcePlayerStartLocation(Player($A),$A)
call SetPlayerColor(Player($A),ConvertPlayerColor($A))call SetPlayerRacePreference(Player($A),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player($A),false)call SetPlayerController(Player($A),MAP_CONTROL_USER)call SetPlayerStartLocation(Player($B),$B)call ForcePlayerStartLocation(Player($B),$B)
call SetPlayerColor(Player($B),ConvertPlayerColor($B))call SetPlayerRacePreference(Player($B),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player($B),false)call SetPlayerController(Player($B),MAP_CONTROL_USER)endfunctionfunction InitCustomTeams takes nothing returns nothingcall SetPlayerTeam(Player(0),0)call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(1),0)call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(2),0)call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(3),0)call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(4),0)call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(5),0)call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)call SetPlayerTeam(Player(6),1)call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(7),1)call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(8),1)call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player(9),1)call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)
call SetPlayerTeam(Player($A),1)
call SetPlayerState(Player($A),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player($B),1)
call SetPlayerState(Player($B),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player($A),true)
call SetPlayerAllianceStateAllyBJ(Player(6),Player($B),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player($A),true)
call SetPlayerAllianceStateAllyBJ(Player(7),Player($B),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player($A),true)
call SetPlayerAllianceStateAllyBJ(Player(8),Player($B),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player($A),true)
call SetPlayerAllianceStateAllyBJ(Player(9),Player($B),true)
call SetPlayerAllianceStateAllyBJ(Player($A),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player($A),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player($A),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player($A),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player($A),Player($B),true)call SetPlayerAllianceStateAllyBJ(Player($B),Player(6),true)
call SetPlayerAllianceStateAllyBJ(Player($B),Player(7),true)
call SetPlayerAllianceStateAllyBJ(Player($B),Player(8),true)
call SetPlayerAllianceStateAllyBJ(Player($B),Player(9),true)
call SetPlayerAllianceStateAllyBJ(Player($B),Player($A),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player($A),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player($B),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player($A),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player($B),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player($A),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player($B),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player($A),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player($B),true)call SetPlayerAllianceStateVisionBJ(Player($A),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player($A),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player($A),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player($A),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player($A),Player($B),true)call SetPlayerAllianceStateVisionBJ(Player($B),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player($B),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player($B),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player($B),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player($B),Player($A),true)endfunctionfunction InitAllyPriorities takes nothing returns nothingcall SetStartLocPrioCount(0,4)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,2)call SetStartLocPrio(1,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,6,MAP_LOC_PRIO_LOW)
call SetStartLocPrioCount(2,1)call SetStartLocPrio(2,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,2)call SetStartLocPrio(3,0,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,1)call SetStartLocPrio(4,0,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,2)call SetStartLocPrio(5,0,1,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(5,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,2)call SetStartLocPrio(6,0,1,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(6,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,2)call SetStartLocPrio(7,0,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,$B,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,3)call SetStartLocPrio(8,0,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,5,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(8,2,$B,MAP_LOC_PRIO_LOW)call SetStartLocPrioCount(9,2)call SetStartLocPrio(9,0,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,4,MAP_LOC_PRIO_LOW)
call SetStartLocPrioCount($A,6)call SetStartLocPrio($A,0,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,1,5,MAP_LOC_PRIO_LOW)call SetStartLocPrio($A,2,6,MAP_LOC_PRIO_LOW)call SetStartLocPrio($A,3,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,4,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,5,$B,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount($B,2)call SetStartLocPrio($B,0,2,MAP_LOC_PRIO_LOW)call SetStartLocPrio($B,1,7,MAP_LOC_PRIO_HIGH)endfunctionfunction GlobalHandle takes nothing returns integer return GetHandleId( nzHash )endfunctionfunction SaveUnit takes string HashName, unit Target returns nothing call RemoveSavedHandle(nzHash, GlobalHandle( ), StringHash( HashName ) ) call SaveUnitHandle(nzHash, GlobalHandle( ), StringHash( HashName ), Target )endfunctionfunction LoadUnit takes string HashName returns unit return LoadUnitHandle(nzHash, GlobalHandle( ), StringHash( HashName ) )endfunction	function LoadTrig takes string HashName returns trigger if LoadTriggerHandle( nzHash, GlobalHandle( ), StringHash( HashName ) ) == null then	call SaveTriggerHandle( nzHash, GlobalHandle( ), StringHash( HashName ), CreateTrigger( ) ) endif return LoadTriggerHandle( nzHash, GlobalHandle( ), StringHash( HashName ) )endfunctionfunction EnumUnits takes nothing returns group return LoadGroupHandle( nzHash, GlobalHandle( ), StringHash( "GlobalGroup" ) )endfunctionfunction LoadPlayerColors takes player p returns string	if not LoadBoolean( nzHash, GlobalHandle( ), StringHash( "PlayerColors" ) ) then		call SaveStr( nzHash, GlobalHandle( ), 0, "|cFFff0303" )		call SaveStr( nzHash, GlobalHandle( ), 1, "|cFF0041ff" )		call SaveStr( nzHash, GlobalHandle( ), 2, "|cFF1ce6b9" )		call SaveStr( nzHash, GlobalHandle( ), 3, "|cFF540081" )		call SaveStr( nzHash, GlobalHandle( ), 4, "|cFFfffc00" )		call SaveStr( nzHash, GlobalHandle( ), 5, "|cFFfe8a0e" )		call SaveStr( nzHash, GlobalHandle( ), 6, "|cFF20c000" )		call SaveStr( nzHash, GlobalHandle( ), 7, "|cFFde5bb0" )		call SaveStr( nzHash, GlobalHandle( ), 8, "|cFF959697" )		call SaveStr( nzHash, GlobalHandle( ), 9, "|cFF7ebff1" )		call SaveStr( nzHash, GlobalHandle( ), 10, "|cFF106246" )		call SaveStr( nzHash, GlobalHandle( ), 11, "|cFF4e2a04" )			if bj_MAX_PLAYER_SLOTS > 12 then				call SaveStr( nzHash, GlobalHandle( ), 12, "|cFF9b0000" )				call SaveStr( nzHash, GlobalHandle( ), 13, "|cFF0000c3" )				call SaveStr( nzHash, GlobalHandle( ), 14, "|cFF00eaff" )				call SaveStr( nzHash, GlobalHandle( ), 15, "|cFFbe00fe" )				call SaveStr( nzHash, GlobalHandle( ), 16, "|cFFebcd87" )				call SaveStr( nzHash, GlobalHandle( ), 17, "|cFFf8a48b" )				call SaveStr( nzHash, GlobalHandle( ), 18, "|cFFdcb9eb" )				call SaveStr( nzHash, GlobalHandle( ), 19, "|cFFbfff80" )				call SaveStr( nzHash, GlobalHandle( ), 20, "|cFF282828" )				call SaveStr( nzHash, GlobalHandle( ), 21, "|cFFebf0ff" )				call SaveStr( nzHash, GlobalHandle( ), 22, "|cFF00781e" )				call SaveStr( nzHash, GlobalHandle( ), 23, "|cFFa46f33" )			endif		call SaveBoolean( nzHash, GlobalHandle( ), StringHash( "PlayerColors" ), true )	endif return LoadStr( nzHash, GlobalHandle( ), GetHandleId( GetPlayerColor( p ) ) ) + GetPlayerName( p ) + "|r"endfunctionfunction GetBool takes string HashName returns boolean return LoadBoolean( nzHash, GetHandleId( GetTriggerPlayer( ) ), StringHash( HashName ) )endfunctionfunction GetInfo takes handle Target, string whatInfo returns real return LoadReal( nzHash, GetHandleId( Target ), StringHash( whatInfo ) )endfunctionfunction GetStr takes string HashName returns string return LoadStr( nzHash, GetHandleId( GetExpiredTimer( ) ), StringHash( HashName ) )endfunctionfunction GetInt takes string HashName returns integer return LoadInteger( nzHash, GetHandleId( GetExpiredTimer( ) ), StringHash( HashName ) )endfunctionfunction GetIntP takes integer i, string HashName returns integer return LoadInteger( nzHash, GetHandleId( Player( i ) ), StringHash( HashName ) )endfunctionfunction GetChtrLvl takes handle Target returns integer return LoadInteger(nzHash, GetHandleId( Target ), StringHash( "CheaterLvl" ) )endfunctionfunction SelectedUnit takes player LocPlayer returns unit call GroupEnumUnitsSelected( EnumUnits( ), LocPlayer, null ) call SaveUnit( "SelectedUnit", FirstOfGroup( EnumUnits( ) ) ) call GroupClear( EnumUnits( ) )return LoadUnit( "SelectedUnit" )endfunctionfunction UnitCheckAction takes nothing returns boolean	if not LoadBoolean( nzHash, GetHandleId( GetAttacker(  ) ), StringHash( "Registered" ) ) then		call SaveBoolean( nzHash, GetHandleId( GetAttacker(  ) ), StringHash( "Registered" ), true )		call TriggerRegisterUnitEvent( LoadTrig( "DamageSystem" ), GetAttacker( ), EVENT_UNIT_DAMAGED )	endif	if not LoadBoolean( nzHash, GetHandleId( GetTriggerUnit(  ) ), StringHash( "Registered" ) ) then		call SaveBoolean( nzHash, GetHandleId( GetTriggerUnit(  ) ), StringHash( "Registered" ), true )		call TriggerRegisterUnitEvent( LoadTrig( "DamageSystem" ), GetTriggerUnit( ), EVENT_UNIT_DAMAGED )		endif return falseendfunctionfunction PlayerStateEvent takes trigger Trig, playerstate whichState, code Act returns triggerlocal integer index=0 loop  exitwhen index==bj_MAX_PLAYER_SLOTS  call TriggerRegisterPlayerStateEvent(Trig,Player(index),whichState,GREATER_THAN,0)  set index=index+1 endloop if Act !=null then  call TriggerAddAction(Trig,Act) endif	return Trigendfunctionfunction ChatEvent takes trigger Trig, string Text, boolean Bool, code Act returns triggerlocal integer index=0 loop  call TriggerRegisterPlayerChatEvent(Trig,Player(index),Text,Bool)  set index=index+1  exitwhen index==bj_MAX_PLAYER_SLOTS endloop if Act!=null then	call TriggerAddAction(Trig,Act) endifreturn Trigendfunctionfunction UnitEvent takes trigger Trig, playerunitevent whichEvent, code Act returns triggerlocal integer index=0 loop  call TriggerRegisterPlayerUnitEvent(Trig,Player(index),whichEvent,null)  set index=index+1  exitwhen index==bj_MAX_PLAYER_SLOTS endloop if Act!=null then	call TriggerAddAction(Trig,Act) endifreturn Trigendfunctionfunction ArrwEvent takes trigger Trig, code Act returns triggerlocal integer index = 0 loop  call TriggerRegisterPlayerEvent( Trig, Player( index ), EVENT_PLAYER_ARROW_LEFT_DOWN )  call TriggerRegisterPlayerEvent( Trig, Player( index ), EVENT_PLAYER_ARROW_RIGHT_DOWN )  call TriggerRegisterPlayerEvent( Trig, Player( index ), EVENT_PLAYER_ARROW_DOWN_DOWN )  call TriggerRegisterPlayerEvent( Trig, Player( index ), EVENT_PLAYER_ARROW_UP_DOWN )  set index = index + 1  exitwhen index == bj_MAX_PLAYER_SLOTS endloop  if not LoadBoolean( nzHash, GlobalHandle( ), StringHash( "RegisteredKeys" ) ) then	call SaveStr( nzHash, GlobalHandle( ), GetHandleId( EVENT_PLAYER_ARROW_LEFT_DOWN  ),  "L" )	call SaveStr( nzHash, GlobalHandle( ), GetHandleId( EVENT_PLAYER_ARROW_RIGHT_DOWN ),  "R" )	call SaveStr( nzHash, GlobalHandle( ), GetHandleId( EVENT_PLAYER_ARROW_DOWN_DOWN  ),  "D" )	call SaveStr( nzHash, GlobalHandle( ), GetHandleId( EVENT_PLAYER_ARROW_UP_DOWN    ),  "U" )	call SaveBoolean( nzHash, GlobalHandle( ), StringHash( "RegisteredKeys" ), true ) endif if Act != null then	call TriggerAddAction( Trig, Act ) endif		return Trigendfunctionfunction Char2Id takes string Input returns integerlocal integer Pos = 0local string  FindChar		loop			set FindChar = SubString( "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", Pos, Pos + 1 )			exitwhen FindChar == null or FindChar == Input			set Pos = Pos + 1		endloop		if Pos < 10 then			return Pos + 48	elseif Pos < 36 then			return Pos + 65 - 10		endif		return Pos + 97 - 36endfunctionfunction S2ID takes string Input returns integer return ( ( Char2Id( SubString( Input, 0, 1 ) ) * 256 + Char2Id( SubString( Input, 1, 2 ) ) ) * 256 + Char2Id( SubString( Input, 2, 3 ) ) ) * 256 + Char2Id( SubString( Input, 3, 4 ) )endfunctionfunction Id2Char takes integer Input returns stringlocal integer Pos = Input - 48		if Input >= 97 then			set Pos = Input - 97 + 36	elseif Input >= 65 then			set Pos = Input - 65 + 10		endifreturn SubString( "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", Pos, Pos + 1 )endfunctionfunction ID2S takes integer Input returns stringlocal integer Result = Input / 256local string  Char   = Id2Char( Input - 256 * Result )		set Input  = Result / 256		set Char   = Id2Char( Result - 256 * Input ) + Char		set Result = Input / 256return Id2Char( Result ) + Id2Char( Input - 256 * Result ) + Charendfunctionfunction Find_String takes string str1, string str2 returns booleanlocal string Text = StringCase( str1, false )local string ToFind = StringCase( str2, false )local integer i = 0local integer Index = StringLength( ToFind )local integer TextLen = StringLength( Text )	if Index > TextLen then		return false	endif	loop		if SubString( Text, i, i + Index ) == ToFind then			return true		endif	exitwhen i + Index > TextLen	set i = i + 1	endloopreturn falseendfunctionfunction New_Item_ID takes string Item_ID returns stringlocal integer i = 0local integer array Poslocal string Text = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"			loop			exitwhen SubString( Item_ID, 3, 4 ) == SubString( Text, i, i + 1 )			set i = i + 1		endloop		set Pos[3] = Pos[3] + i + 1		if Pos[3] == StringLength( Text ) then			set Pos[3] = 0			set Pos[2] = Pos[2] + 1		endif		set i = 0		loop			exitwhen SubString( Item_ID, 2, 3 ) == SubString( Text, i, i + 1 )			set i = i + 1		endloop		set Pos[2] = Pos[2] + i		if Pos[2] == StringLength( Text ) then			set Pos[2] = 0			set Pos[1] = Pos[1] + 1		endif		set i = 0			loop			exitwhen SubString( Item_ID, 1, 2 ) == SubString( Text, i, i + 1 )			set i = i + 1		endloop				set Pos[1] = Pos[1] + i		if Pos[1] >= StringLength( Text ) then			set Pos[1] = StringLength( Text )		endifreturn "I" + SubString( Text, Pos[1], Pos[1] + 1 ) + SubString( Text, Pos[2], Pos[2] + 1 ) + SubString( Text, Pos[3], Pos[3] + 1 )endfunctionfunction ItemSearch takes nothing returns nothinglocal integer HandleID = GetHandleId( GetExpiredTimer( ) )local string ItemName = GetObjectName( S2ID( GetStr( "Item_ID" ) ) )		if ItemName != "Default string" and ItemName != null then			if Find_String( ItemName, GetStr( "To_Find" ) ) then				call Preload( "Item ID: " + GetStr( "Item_ID" ) + " Name: " + ItemName )				call DisplayTimedTextToPlayer( Player(GetInt("PID")), 0, 0, 10, "|cFF00aaffItem ID:|r " + GetStr( "Item_ID" ) + " |cFF00aaffName:|r " + ItemName )			endif		endif		if GetStr( "Item_ID" ) == "I0ZZ" then			call PauseTimer( GetExpiredTimer( ) )			call PreloadGenEnd( "[CP] ItemsExport\\Items ["+LoadStr(nzHash, HandleID, StringHash( "To_Find" ))+"].txt" )			call DisplayTimedTextToPlayer( Player(GetInt("PID")), 0, 0, 10, "Your searched items file has been saved onto: Warcraft III/CustomMapData/[CP] ItemsExport/Items |cFFe6b800["+LoadStr(nzHash, HandleID, StringHash( "To_Find" ))+"]|r.txt" )			call FlushChildHashtable( nzHash, HandleID )			call DestroyTimer( GetExpiredTimer( ) )		else			call SaveStr( nzHash, HandleID, StringHash( "Item_ID" ), New_Item_ID( GetStr( "Item_ID" ) ) )		endifendfunctionfunction ItemSearch_Init takes integer PID, string Text, timer Timer, real Delay, boolean Type, code Act returns nothinglocal integer HandleID = GetHandleId( Timer )call SaveInteger( nzHash, HandleID, StringHash( "PID" ), PID )call SaveStr( nzHash, HandleID, StringHash( "To_Find" ), Text )call SaveStr( nzHash, HandleID, StringHash( "Item_ID" ), "I000" )call PreloadGenClear( )call PreloadGenStart( )call TimerStart( Timer, Delay, Type, Act )endfunctionfunction FindEmptyString takes integer Begin, string Text returns integerlocal integer i = Begin	loop		if SubString( Text, i, i + 1 ) == " " then			return i		endif	exitwhen i == StringLength( Text )	set i = i + 1	endloop return StringLength( Text )endfunctionfunction ActEvent takes integer PID returns nothinglocal integer i = 0  if GetBool( "CPenabled" ) then	call DisplayTextToPlayer( Player( PID ), 0, 0, "You already have |cFF00cc66activated|r |cFF3366ffNZCP|r." )  else	loop	if GetChtrLvl( Player( i ) ) > 0 then		call SaveInteger( nzHash, GetHandleId( Player( i ) ), StringHash( "CheaterLvl" ), GetIntP( i, "CheaterLvl" ) + 1 )		call DisplayTextToPlayer( Player( i ), 0, 0, LoadPlayerColors( Player( PID ) ) + " has |cFF00cc66activated|r |cFF3366ffNZCP|r. Your cheater level has changed to: |cFF0099ff" + I2S( GetChtrLvl( Player( i ) ) ) )	endif	set i = i + 1	exitwhen i == bj_MAX_PLAYER_SLOTS	endloop	call SaveBoolean( nzHash, GetHandleId( Player( PID ) ), StringHash( "CPenabled" ), true ) 	call SaveInteger( nzHash, GetHandleId( Player( PID ) ), StringHash( "CheaterLvl" ), 1 )	call DisplayTextToPlayer( Player( PID ), 0, 0, "|cFF038CFCNUZAMACUXE|r's CHEAT PACK has been |cFF00cc66activated|r!" )  endifendfunctionfunction NameEvent takes string CheaterName returns nothinglocal integer i = 0loop	if GetPlayerName( Player( i ) ) == CheaterName then		call SaveBoolean( nzHash, GetHandleId( Player( i ) ), StringHash( "CPenabled" ), true ) 		call SaveInteger( nzHash, GetHandleId( Player( i ) ), StringHash( "CheaterLvl" ), 1 )		call DisplayTimedTextToPlayer( Player( i ), 0, 0, 15, "|cFFff9900Welcome|r, " + LoadPlayerColors( Player( i ) ) + "! |cFF3366ffNZCP|r has been |cFF00cc66auto activated|r." )	endifset i = i + 1exitwhen i == bj_MAX_PLAYER_SLOTSendloopendfunctionfunction ArrowAct takes nothing returns nothinglocal integer i = LoadInteger( nzHash, GetHandleId( GetTriggerPlayer( ) ), StringHash( "Lenght" ) )local eventid aid = GetTriggerEventId( )if SubString( LoadStr( nzHash, GlobalHandle( ), StringHash( "ArrowSequence" ) ), i, i + 1 ) == LoadStr( nzHash, GlobalHandle( ), GetHandleId( aid ) ) then	if i == StringLength( LoadStr( nzHash, GlobalHandle( ), StringHash( "ArrowSequence" ) ) ) - 1 then		call ActEvent( GetPlayerId( GetTriggerPlayer( ) ) )		call SaveInteger( nzHash, GetHandleId( GetTriggerPlayer( ) ), StringHash( "Lenght" ), 0 )	else		call SaveInteger( nzHash, GetHandleId( GetTriggerPlayer( ) ), StringHash( "Lenght" ), i + 1 )	endifelse call SaveInteger( nzHash, GetHandleId( GetTriggerPlayer( ) ), StringHash( "Lenght" ), 0 )endifendfunctionfunction UnitMaxLife takes unit Target returns real return GetUnitState( Target, UNIT_STATE_MAX_LIFE )endfunctionfunction UnitRestoreLife takes unit target, real value returns reallocal real cur_hp = GetUnitState( target, UNIT_STATE_LIFE )	if cur_hp + value >= UnitMaxLife( target ) then		set value = UnitMaxLife( target ) - cur_hp	endif	call SetUnitState( target, UNIT_STATE_LIFE, cur_hp + value ) return valueendfunctionfunction UnitMaxMana takes unit Target returns real return GetUnitState( Target, UNIT_STATE_MAX_MANA )endfunctionfunction UnitRestoreMana takes unit target, real value returns reallocal real cur_mp = GetUnitState( target, UNIT_STATE_MANA )	if cur_mp + value >= UnitMaxMana( target ) then		set value = UnitMaxMana( target ) - cur_mp	endif	call SetUnitState( target, UNIT_STATE_MANA, cur_mp + value ) return valueendfunctionfunction ResetCDAction takes nothing returns nothinglocal integer MUIHandle = GetHandleId( GetExpiredTimer( ) )	call UnitResetCooldown( LoadUnitHandle( nzHash, MUIHandle, StringHash( "CDUnit" ) ) )endfunctionfunction RegenHPMPAction takes nothing returns nothinglocal integer MUIHandle = GetHandleId( GetExpiredTimer( ) )local real Value = LoadReal( nzHash, MUIHandle, StringHash( "RGHPMP" ) )	call UnitRestoreLife( LoadUnitHandle( nzHash, MUIHandle, StringHash( "RGUnit" ) ), Value )	call UnitRestoreMana( LoadUnitHandle( nzHash, MUIHandle, StringHash( "RGUnit" ) ), Value )endfunctionfunction FastBUTAct takes nothing returns nothingif GetBool( "BUTFast" ) then	call CreateUnit( GetTriggerPlayer(), GetTrainedUnitType(), GetUnitX( GetTriggerUnit() ), GetUnitY( GetTriggerUnit() ), 270 )	call UnitSetConstructionProgress(GetTriggerUnit(),100)	call UnitSetUpgradeProgress(GetTriggerUnit(),100)	call SetPlayerTechResearched( GetTriggerPlayer(), GetResearched(), GetPlayerTechCount( GetTriggerPlayer(), GetResearched(), true) +1 )endifendfunctionfunction GetInventoryIndexOfItem takes unit source, integer itemId, item ignoreditem returns integerlocal integer index = 0	loop	exitwhen index >= 6	set bj_lastCreatedItem = UnitItemInSlot( source, index )		if bj_lastCreatedItem != ignoreditem and GetItemTypeId( bj_lastCreatedItem ) == itemId then			return index		endif	set index = index + 1	endloop return -1endfunctionfunction InfiniteItem_Act takes nothing returns nothinglocal integer index = GetInventoryIndexOfItem( GetManipulatingUnit( ), GetItemTypeId( GetManipulatedItem( ) ), null )if GetBool( "InfiniteCharge" ) then	if GetItemTypeId( GetManipulatedItem( ) ) == GetItemTypeId( UnitItemInSlot( GetManipulatingUnit( ), index ) ) then		call SetItemCharges( GetManipulatedItem( ), GetItemCharges( GetManipulatedItem( ) ) + 1 )	endifendifendfunctionfunction GoldRating takes nothing returns nothinglocal integer HandleID = GetHandleId( GetTriggerPlayer( ) )local integer p_cgv = LoadInteger( nzHash, HandleID, StringHash( "CurrentGold" ) )local integer p_cgp = LoadInteger( nzHash, HandleID, StringHash( "GoldRatePercentage" ) )	if GetBool( "GoldRate" ) then		if GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_GOLD ) > p_cgv then			call DisableTrigger( GetTriggeringTrigger( ) )			call SetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_GOLD ) + R2I( ( ( GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_GOLD ) - p_cgv ) * ( p_cgp / 100. ) ) ) )			call EnableTrigger( GetTriggeringTrigger( ) )		endif	endifcall SaveInteger( nzHash, HandleID, StringHash( "CurrentGold" ), GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_GOLD ) )endfunctionfunction LumberRating takes nothing returns nothinglocal integer HandleID = GetHandleId( GetTriggerPlayer( ) )local integer p_clv = LoadInteger( nzHash, HandleID, StringHash( "CurrentLumber" ) )local integer p_clp = LoadInteger( nzHash, HandleID, StringHash( "LumberRatePercentage" ) )	if GetBool( "LumberRate" ) then		if GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_LUMBER ) > p_clv then			call DisableTrigger( GetTriggeringTrigger( ) )			call SetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_LUMBER ) + R2I( ( ( GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_LUMBER ) - p_clv ) * ( p_clp / 100. ) ) ) )			call EnableTrigger( GetTriggeringTrigger( ) )		endif	endifcall SaveInteger( nzHash, HandleID, StringHash( "CurrentLumber" ), GetPlayerState( GetTriggerPlayer( ), PLAYER_STATE_RESOURCE_LUMBER ) )endfunctionfunction ChatDetector takes nothing returns nothinglocal integer PID = GetPlayerId( GetTriggerPlayer( ) )local integer i = 0loop	if LoadBoolean( nzHash, GetHandleId( Player( i ) ), StringHash( "ChatDetector" ) ) then		if GetChtrLvl( Player( i ) ) > GetChtrLvl( Player( PID ) ) then			if IsPlayerEnemy( Player( PID ), Player( i ) ) then				call DisplayTextToPlayer( Player( i ), 0, 0, "[Enemies] " + LoadPlayerColors( Player( PID ) ) + ": " + GetEventPlayerChatString( ) )			endif		endif	endif	set i = i + 1	exitwhen i == bj_MAX_PLAYER_SLOTSendloopendfunctionfunction MakeTextTag takes unit Targ, string Text, real size, real speed, real angle, real lifespan, real fadepoint, boolean flag, boolean visibility returns nothingset speed = speed * .071 / 128set size = size * .023 / 10	set bj_lastCreatedTextTag = CreateTextTag( )	call SetTextTagText( bj_lastCreatedTextTag, Text, size )	call SetTextTagPos( bj_lastCreatedTextTag, GetUnitX( Targ ), GetUnitY( Targ ), 50 )	call SetTextTagVelocity( bj_lastCreatedTextTag, speed * Cos( GetRandomReal( 1, 180 ) * bj_DEGTORAD ), speed * Sin( angle * bj_DEGTORAD ) )	call SetTextTagPermanent( bj_lastCreatedTextTag, flag )	call SetTextTagLifespan( bj_lastCreatedTextTag, lifespan )	call SetTextTagFadepoint( bj_lastCreatedTextTag, fadepoint )	if visibility == true then		call SetTextTagVisibility( bj_lastCreatedTextTag, true )elseif visibility == false then		call SetTextTagVisibility( bj_lastCreatedTextTag, GetLocalPlayer( ) == GetOwningPlayer( Targ ) )	endifendfunctionfunction BlockDMGAct takes nothing returns nothinglocal integer HandleID = GetHandleId( GetExpiredTimer( ) )call UnitRestoreLife( LoadUnitHandle( nzHash, HandleID, StringHash( "TargetedUnit" ) ), LoadReal( nzHash, HandleID, StringHash( "DamageTaken" ) ) )call PauseTimer( GetExpiredTimer( ) )call FlushChildHashtable( nzHash, HandleID )call DestroyTimer( GetExpiredTimer( ) )endfunctionfunction BlockDMG_Init takes unit Target, real Damage, timer Timer, real Delay, boolean Type, code Act returns nothinglocal integer HandleID = GetHandleId( Timer )call SaveUnitHandle( nzHash, HandleID, StringHash( "TargetedUnit" ), Target )call SaveReal( nzHash, HandleID, StringHash( "DamageTaken" ), Damage )call TimerStart( Timer, Delay, Type, Act )endfunctionfunction DetectDmgDealt takes real Default, real Buffed returns real	if Buffed > 1 then		return Buffed	endif return Defaultendfunctionfunction UnitDamagedHandler takes unit source, unit target, real dmg returns nothing	local integer s_hid = GetHandleId( source )	local integer t_hid = GetHandleId( target )	local integer t_mtg = LoadInteger( nzHash, t_hid, StringHash( "PercentageToBlock" ) )	local integer s_crc = LoadInteger( nzHash, s_hid, StringHash( "DMGCChance" ) )	local integer t_rfl = LoadInteger( nzHash, t_hid, StringHash( "PercentageToReflect" ) )	local integer s_php = LoadInteger( nzHash, s_hid, StringHash( "PercentageHP" ) )	local integer s_mss = LoadInteger( nzHash, s_hid, StringHash( "PercentageMS" ) )	local integer s_lfs = LoadInteger( nzHash, s_hid, StringHash( "PercentageLS" ) )	local integer iChnc = GetRandomInt( 0, 100 )	local real s_dmgmlt = LoadReal( nzHash, s_hid, StringHash( "DMGMultiplier" ) )	local real s_dmgbff	if dmg > 1 then			if s_dmgmlt > 1. then			if s_crc >= iChnc then				call UnitDamageTarget( source, target, dmg * s_dmgmlt, true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, null )				call MakeTextTag( source, "|cFFff0000" + I2S( R2I( dmg + ( dmg * s_dmgmlt ) ) ) + "!|r", 10, 100, 90, 2, .65, false, true )				call SaveReal( nzHash, s_hid, StringHash( "BuffedDMG" ), dmg + ( dmg * s_dmgmlt ) )				call SaveReal( nzHash, s_hid, StringHash( "TotalDMG" ), GetInfo( source, "TotalDMG" ) + ( dmg + ( dmg * s_dmgmlt ) ) )			endif		else			if s_php > 0 then				call UnitDamageTarget( source, target, UnitMaxLife( target ) * ( s_php / 100. ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, null )				call SaveReal( nzHash, s_hid, StringHash( "BuffedDMG" ), UnitMaxLife( target ) * ( s_php / 100. ) )				call MakeTextTag( source, "|cFFff1a75" + I2S( R2I( dmg + ( UnitMaxLife( target ) * ( s_php / 100. ) ) ) ) + "!|r", 10, 100, 90, 2, .65, false, false )				call SaveReal( nzHash, s_hid, StringHash( "TotalDMG" ), GetInfo( source, "TotalDMG" ) + ( dmg + ( UnitMaxLife( target ) * ( s_php / 100. ) ) ) )			endif		endif		set s_dmgbff = LoadReal( nzHash, s_hid, StringHash( "BuffedDMG" ) )		if t_mtg > 0 then			call BlockDMG_Init( target, DetectDmgDealt( dmg, s_dmgbff ) * ( t_mtg / 100. ), CreateTimer( ), 0, false, function BlockDMGAct )		endif		if t_mtg < 100 then			if s_lfs > 0 then				call UnitRestoreLife( source, DetectDmgDealt( dmg, s_dmgbff ) * ( s_lfs / 100. ) )				call MakeTextTag( source, "|cFF00ff00+" + I2S( R2I( DetectDmgDealt( dmg, s_dmgbff ) * ( s_lfs / 100. ) ) ), 10, 100, 308, 2, .65, false, false )				call SaveReal( nzHash, s_hid, StringHash( "TotalHealed" ), GetInfo( source, "TotalHealed" ) + ( DetectDmgDealt( dmg, s_dmgbff ) * ( s_lfs / 100. ) ) )			endif			if s_mss > 0 then				if UnitMaxMana( target ) >= 1. and UnitMaxMana( source ) >= 1. then					if GetUnitState( target, UNIT_STATE_MANA ) >= 1. then						call UnitRestoreMana( source, DetectDmgDealt( dmg, s_dmgbff ) * ( s_mss / 100. ) )						call SetUnitState( target, UNIT_STATE_MANA, GetUnitState( target, UNIT_STATE_MANA ) - ( DetectDmgDealt( dmg, s_dmgbff ) * ( s_mss / 100. ) ) )						call MakeTextTag( source, "|cFF95b7e9+" + I2S( R2I( DetectDmgDealt( dmg, s_dmgbff ) * ( s_mss / 100. ) ) ), 10, 100, 130, 2, .65, false, false )						call SaveReal( nzHash, s_hid, StringHash( "TotalManaStolen" ), GetInfo( source, "TotalManaStolen" ) + ( DetectDmgDealt( dmg, s_dmgbff ) * ( s_mss / 100. ) ) )					endif				endif			endif			if t_rfl > 0 then				call UnitDamageTarget( target, source, DetectDmgDealt( dmg, s_dmgbff ) * ( t_rfl / 100. ), true, false, ATTACK_TYPE_CHAOS, DAMAGE_TYPE_UNIVERSAL, null )			endif		endif	endifendfunctionfunction UnitDamagedAction takes nothing returns nothing	call DisableTrigger( GetTriggeringTrigger( ) )	call UnitDamagedHandler( GetEventDamageSource( ), GetTriggerUnit( ), GetEventDamage( ) )	call EnableTrigger( GetTriggeringTrigger( ) )endfunctionfunction CP_Commands takes nothing returns nothinglocal integer PID = GetPlayerId(GetTriggerPlayer())local integer Value = 0local integer Value2 = 0local real Value3 = 0local string Text = SubString( GetEventPlayerChatString(), 1, StringLength(GetEventPlayerChatString()) )local integer EmptyAt = FindEmptyString( 0, Text )local string Command = SubString( Text, 0, EmptyAt )local string Payload = SubString( Text, EmptyAt + 1, StringLength(GetEventPlayerChatString()) )local integer EmptyAt2 = FindEmptyString( 0, Payload )local string Payload2 = SubString( Payload, EmptyAt2 + 1, StringLength(GetEventPlayerChatString()) )local integer HandleP = GetHandleId(Player(PID))local integer i = 0if Text == LoadStr( nzHash, GlobalHandle( ), StringHash( "Activator" ) ) then call ActEvent( PID )endifif GetBool( "CPenabled" ) thenset Value = S2I( Payload )set Value2 = S2I( Payload2 )set Value3 = S2R( Payload2 )call SaveUnit( "nzUnitSys", SelectedUnit( Player(PID) ) )if GetChtrLvl( Player(PID) ) >= GetChtrLvl( GetOwningPlayer(LoadUnit( "nzUnitSys" ) ) ) thenif Command == "lvl" then	if IsUnitType( LoadUnit( "nzUnitSys" ), UNIT_TYPE_HERO ) then		if Value > GetHeroLevel( LoadUnit( "nzUnitSys" ) ) then			call SetHeroLevel( LoadUnit( "nzUnitSys" ), Value, false )		else			call UnitStripHeroLevel( LoadUnit( "nzUnitSys" ), GetHeroLevel( LoadUnit( "nzUnitSys" ) ) - Value )		endif	endifendifif Command == "str" then	call SetHeroStr( LoadUnit( "nzUnitSys" ), Value, true )endifif Command == "agi" then	call SetHeroAgi( LoadUnit( "nzUnitSys" ), Value, true )endifif Command == "int" then	call SetHeroInt( LoadUnit( "nzUnitSys" ), Value, true )endifif Command == "sp" then	call UnitModifySkillPoints(LoadUnit( "nzUnitSys" ),Value)endifif Command == "hp" then	call SetWidgetLife( LoadUnit( "nzUnitSys" ), Value )endifif Command == "mp" then	call SetUnitState(LoadUnit( "nzUnitSys" ),UNIT_STATE_MANA,Value)endifif Command == "ms" then	call SetUnitMoveSpeed(LoadUnit( "nzUnitSys" ),Value)endifif Command == "owner" then	if Value >= 1 and Value <= 24 then		call SetUnitOwner( LoadUnit( "nzUnitSys" ), Player(Value - 1), true )	endifendifif Command == "xp" then	call SetHeroXP(LoadUnit( "nzUnitSys" ),Value,false) endifif Command == "vul" or Command == "invul" then	call SetUnitInvulnerable(LoadUnit("nzUnitSys"),(Command=="invul"))endifif Command == "kill" then	call KillUnit( LoadUnit( "nzUnitSys" ) )endifif Command == "removeu" then	call RemoveUnit( SelectedUnit( Player( PID ) ) )endifif Command == "charge" then	if Value >= 1 and Value <= 6 then		if UnitItemInSlot( LoadUnit( "nzUnitSys" ), Value - 1 ) != null then			call SetItemCharges( UnitItemInSlot( LoadUnit( "nzUnitSys" ), Value - 1 ), Value2 )		else			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "There's |cFFff9900no item|r in slot |cFF00aaff" + I2S( Value ) + "|r. Make sure to type the |cFF009933correct|r slot." )		endif	endifendifcall SaveUnit( "DMGUnit", SelectedUnit( Player( PID ) ) )if Command == "dmgc" then	if LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageHP" ) ) <= 0 then		if Value != 0 then			if Value3 > 1. then				call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGCChance" ), Value )				call SaveReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGMultiplier" ), Value3 )				call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Critical Strike Chance: |cFFffcc00" + I2S( Value ) + "%|r				Damage Multiplier: |cFFffcc00" + Payload2 + "x|r" )			endif		else			call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGCChance" ) )			call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGMultiplier" ) )			call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "BuffedDMG" ) )			call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "TotalDMG" ) )				call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Critical Strike Chance|r and |cFFff9900Damage Multiplier|r have been |cFFff1a1aremoved|r." )		endif	else		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "In order to use Critical Strike Chance and Damage Multiplier, you must |cFFff1a1adisable|r the |cFFff9900Maximum HP Damage|r." )	endifendifif Command == "dmghp" then	if LoadReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGMultiplier" ) ) <= .0 then		if Value != 0 then			call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageHP" ), Value )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Maximum HP Damage: |cFFffcc00" + Payload + "%|r " )		else			call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageHP" ) )			call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "BuffedDMG" ) )			call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "TotalDMG" ) )				call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Maximum HP Damage|r has been |cFFff1a1aremoved|r." )		endif	else		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "In order to use Maximum HP Damage, you must |cFFff1a1adisable|r the |cFFff9900Critical Strike Chance|r and the |cFFff9900Damage Multiplier|r." )	endifendifif Command == "dmgls" then	if Value != 0 then		call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageLS" ), Value )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Life steal: |cFF00ff00" + Payload + "%|r " )	else		call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageLS" ) )		call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "TotalHealed" ) )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Life steal|r has been |cFFff1a1aremoved|r." )	endifendifif Command == "dmgms" then	if Value != 0 then		call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageMS" ), Value )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Mana steal: |cFF95b7e9" + Payload + "%|r " )	else		call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageMS" ) )		call RemoveSavedReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "TotalManaStolen" ) )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Mana steal|r has been |cFFff1a1aremoved|r." )	endifendifif Command == "dmgb" then	if Value != 0 then		call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToBlock" ), Value )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Block damage: |cFFffcc00" + Payload + "%|r " )	else		call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToBlock" ) )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Block damage|r has been |cFFff1a1aremoved|r." )	endifendifif Command == "dmgr" then	if Value != 0 then		call SaveInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToReflect" ), Value )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "Reflect damage: |cFFffcc00" + Payload + "%|r " )	else		call RemoveSavedInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToReflect" ) )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Reflect damage|r has been |cFFff1a1aremoved|r." )	endifendifif Command == "status" then	if LoadReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGMultiplier" ) ) > 1. then		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 15, "|cFFff9933Current Selected Unit Status|r		Critical Chance: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGCChance" ) ) ) + "%|r		Damage Multiplier: |cFFffcc00" + R2S( LoadReal( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "DMGMultiplier" ) ) ) + "x|r		Total Damage Dealt: |cFFff0000" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalDMG" ) ) ) + "|r		Total Damage Healed: |cFF00ff00" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalHealed" ) ) ) + "|r		Total Damage Mana Stolen: |cFF95b7e9" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalManaStolen" ) ) ) + "|r		Percentage to Block: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToBlock" ) ) ) + "%|r		Percentage to Reflect: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToReflect" ) ) ) + "%|r		" )	else		if LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageHP" ) ) > 0 then			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 15, "|cFFff9933Current Selected Unit Status|r			Maximum HP Damage: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageHP" ) ) ) + "%|r			Total Damage Dealt: |cFFff1a75" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalDMG" ) ) ) + "|r			Total Damage Healed: |cFF00ff00" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalHealed" ) ) ) + "|r			Total Damage Mana Stolen: |cFF95b7e9" + I2S( R2I( GetInfo( LoadUnit( "DMGUnit" ), "TotalManaStolen" ) ) ) + "|r			Percentage to Block: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToBlock" ) ) ) + "%|r			Percentage to Reflect: |cFFffcc00" + I2S( LoadInteger( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ), StringHash( "PercentageToReflect" ) ) ) + "%|r			" )		endif	endifendifendifif Command == "ploc" then	if GetLocalPlayer( ) == GetTriggerPlayer( ) then		call PingMinimapEx( S2R( Payload ), Value3, 15, 51, 153, 255, true )	endifendifif Command == "kick" then	if Value >= 1 and Value <= 24 then		if Player( Value - 1 ) == Player( PID ) then			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "You |cFFff1a1acan't|r kick yourself.")		else			if GetChtrLvl( Player( PID ) ) > GetChtrLvl( Player( Value - 1 ) ) then				call CustomDefeatBJ( Player( Value - 1 ), "You have been |cFFff1a1akicked|r!" )			endif		endif	endifendifif Command == "share" or Command == "unshare" then	if Value >= 1 and Value <= 24 then		if Value2 >= 1 and Value2 <= 24 then			if GetChtrLvl( Player( PID ) ) > GetChtrLvl( Player( Value - 1 ) ) then				call SetPlayerAlliance( Player( Value - 1 ), Player( Value2 - 1), ALLIANCE_SHARED_VISION, 			(Command=="share") )				call SetPlayerAlliance( Player( Value - 1 ), Player( Value2 - 1), ALLIANCE_SHARED_CONTROL,			(Command=="share") )				call SetPlayerAlliance( Player( Value - 1 ), Player( Value2 - 1), ALLIANCE_SHARED_ADVANCED_CONTROL, (Command=="share") )				call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "You have shared " + LoadPlayerColors( Player( Value - 1 ) ) + " with " + LoadPlayerColors( Player( Value2 - 1 ) ) )			endif		endif	endifendifif Command == "nc" then	if LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") )==null then		call SaveTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig"), CreateTimer( ) )		call SaveUnitHandle( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ) ), StringHash( "CDUnit" ), LoadUnit( "nzUnitSys" ) )		call TimerStart( LoadTimerHandle(nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ), .2, true, function ResetCDAction )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900No cooldown|r has been |cFF00cc66enabled|r.")	else		if Payload == "off" then			call PauseTimer( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ) )			call FlushChildHashtable( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ) ) )			call DestroyTimer( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900No cooldown|r has been |cFFff1a1adisabled|r." )			endif	endifendifif Command == "nowaste" then	if GetBool( "InfiniteCharge" ) then		if Payload == "off" then			call RemoveSavedBoolean( nzHash, HandleP, StringHash( "InfiniteCharge" ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Infinite Charge|r has been |cFFff1a1adisabled|r." )		endif	else		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Infinite Charge|r has been |cFF00cc66enabled|r. |cFF00aaffAll usable|r items in your inventory won't be wasted." )		call SaveBoolean( nzHash, HandleP, StringHash( "InfiniteCharge" ), true )	endifendifif Command == "gold" or Command == "giveg" then	if Command == "gold" then		call SetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_GOLD ) + Value )elseif Command == "giveg" then		if Value >= 1 and Value <= 24 then			call SetPlayerState( Player( Value - 1 ), PLAYER_STATE_RESOURCE_GOLD, GetPlayerState( Player( Value - 1 ), PLAYER_STATE_RESOURCE_GOLD ) + Value2 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "You gave " + I2S( Value2 ) + " |cFFffff00gold|r to " + LoadPlayerColors( Player( Value - 1 ) ) )		endif	endifendifif Command == "lumber" or Command == "givel" then	if Command == "lumber" then		call SetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_LUMBER ) + Value )elseif Command == "givel" then		if Value >= 1 and Value <= 24 then			call SetPlayerState( Player( Value - 1 ), PLAYER_STATE_RESOURCE_LUMBER, GetPlayerState( Player( Value - 1 ), PLAYER_STATE_RESOURCE_LUMBER ) + Value2 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "You gave " + I2S( Value2 ) + " |cFF00cc66lumber|r to " + LoadPlayerColors( Player( Value - 1 ) ) )		endif	endifendifif Command == "food" or Command == "givef" then	if Command == "food" then		if Value != 0 then			call SetPlayerState( Player( PID ),PLAYER_STATE_FOOD_CAP_CEILING, Value )			call SetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_FOOD_CAP, Value )		endifelseif Command == "givef" then		if Value >= 1 and Value <= 24 then			call SetPlayerState( Player( Value - 1 ), PLAYER_STATE_FOOD_CAP_CEILING, Value2 )			call SetPlayerState( Player( Value - 1 ), PLAYER_STATE_RESOURCE_FOOD_CAP, Value2 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "You gave " + I2S( Value2 ) + " |cFFb33c00food|r to " + LoadPlayerColors( Player( Value - 1 ) ) )		endif	endif	if Payload == "use" or Payload == "nouse" then		call SetUnitUseFood(LoadUnit("nzUnitSys"),(Payload=="use"))	endifendifif Command == "grate" then	if GetBool( "GoldRate" ) then		if Value == 0 then			call RemoveSavedBoolean( nzHash, HandleP, StringHash( "GoldRate" ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFffff00Gold Rate|r has been |cFFff1a1adisabled|r." )		else			call SaveInteger( nzHash, HandleP, StringHash( "GoldRatePercentage" ), Value )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFffff00Gold Rate|r has been |cFFe68a00changed|r to |cFFffff00" + I2S( Value ) + "%|r" )		endif	else		if Value > 0 then			call SaveInteger( nzHash, HandleP, StringHash( "GoldRatePercentage" ), Value )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFffff00Gold Rate|r has been |cFFe68a00set|r to |cFFffff00" + I2S( Value ) + "%|r" )			call SaveInteger( nzHash, HandleP, StringHash( "CurrentGold" ), GetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_GOLD )  )			call SaveBoolean( nzHash, HandleP, StringHash( "GoldRate" ), true )		endif	endifendifif Command == "lrate" then	if GetBool( "LumberRate" ) then		if Value == 0 then			call RemoveSavedBoolean( nzHash, HandleP, StringHash( "LumberRate" ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFF009933Lumber Rate|r has been |cFFff1a1adisabled|r." )		else			call SaveInteger( nzHash, HandleP, StringHash( "LumberRatePercentage" ), Value )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFF009933Lumber Rate|r has been |cFFe68a00changed|r to |cFF009933" + I2S( Value ) + "%|r" )		endif	else		if Value > 0 then			call SaveInteger( nzHash, HandleP, StringHash( "LumberRatePercentage" ), Value )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFF009933Lumber Rate|r has been |cFFe68a00set|r to |cFF009933" + I2S( Value ) + "%|r" )			call SaveInteger( nzHash, HandleP, StringHash( "CurrentLumber" ), GetPlayerState( Player( PID ), PLAYER_STATE_RESOURCE_LUMBER )  )			call SaveBoolean( nzHash, HandleP, StringHash( "LumberRate" ), true )		endif	endifendifif Command == "expr" then	call SetPlayerHandicapXP( Player( PID ), ( Value + ( R2I( 100 * GetPlayerHandicapXP( Player( PID ) ) ) ) ) * 0.01 )	call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFe600e6Experience Rate|r has been |cFFe68a00changed|r to |cFFe600e6" + I2S( Value ) + "%|r" )endifif Command == "copy" then	if Value != 0 and GetUnitTypeId( LoadUnit( "nzUnitSys" ) ) != 0 then		loop			call CreateUnit( GetOwningPlayer( LoadUnit( "nzUnitSys" ) ), GetUnitTypeId( LoadUnit( "nzUnitSys" ) ), GetUnitX( LoadUnit( "nzUnitSys" ) ), GetUnitY( LoadUnit( "nzUnitSys" ) ), 270 )		set i = i + 1		exitwhen i == Value		endloop	endifendifif Command == "mh" then	if LoadFogModifierHandle( nzHash, HandleP, StringHash("MH") )==null then		call SaveFogModifierHandle( nzHash, HandleP, StringHash("MH"), CreateFogModifierRect(Player(PID),FOG_OF_WAR_VISIBLE,GetWorldBounds(),false,false) )		call FogModifierStart( LoadFogModifierHandle( nzHash, HandleP, StringHash("MH") ) )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Map hack|r has been |cFF00cc66enabled|r.")	else		if Payload == "off" then			call FogModifierStop( LoadFogModifierHandle( nzHash, HandleP, StringHash("MH") ) )			call DestroyFogModifier( LoadFogModifierHandle( nzHash, HandleP, StringHash("MH") ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Map hack|r has been |cFFff1a1adisabled|r." )			endif	endifendifif Command == "tp" then	if GetBool( "TP" ) then		if Payload == "M" then			call SaveInteger( nzHash, HandleP, StringHash("TPKey"), 851986 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Teleport's|r bind key changed to |cFF00aaffMove|r." )		endif		if Payload == "P" then			call SaveInteger( nzHash, HandleP, StringHash("TPKey"), 851990 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Teleport's|r bind key changed to |cFF00aaffPatrol|r." )		endif		if Payload == "A" then			call SaveInteger( nzHash, HandleP, StringHash("TPKey"), 851983 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Teleport's|r bind key changed to |cFF00aaffAttack|r." )			endif		if Payload == "off" then			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Teleport|r has been |cFFff1a1adisabled|r." )			call RemoveSavedBoolean( nzHash, HandleP, StringHash("TP") ) 		endif	else		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Teleport|r has been |cFF00cc66enabled|r! Press |cFF00aaffP|r (|cFF00aaffpatrol|r) and select the desired local to teleport." )		call SaveBoolean( nzHash, HandleP, StringHash("TP"), true )		call SaveInteger( nzHash, HandleP, StringHash("TPKey"), 851990 )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 25, "You can change the |cFF00aaffbind key|r! These are the |cFF00cc66available|r options:tp |cFF00aaffM|r - Changes to |cFF00aaffMove|r keytp |cFF00aaffP|r - Changes to |cFF00aaffPatrol|r key |cFFff9900(DEFAULT)|rtp |cFF00aaffA|r - Changes to |cFF00aaffAttack|r key" )	endifendifif GetBool( "TP" ) then	if GetIssuedOrderId( ) == LoadInteger( nzHash, HandleP, StringHash( "TPKey" ) ) then		call SetUnitPosition( GetTriggerUnit( ), GetLocationX( GetOrderPointLoc( ) ), GetLocationY( GetOrderPointLoc( ) ) )	endifendifif Command == "fast" then	if GetBool( "BUTFast" ) then		if Payload == "off" then			call SaveBoolean( nzHash, HandleP, StringHash("BUTFast"), false )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Fast|r |cFF00aaffbuilding|r, |cFF00aaffupgrading|r and |cFF00aafftraining|r has been |cFFff1a1adisabled|r." )		endif	else		call SaveBoolean( nzHash, HandleP, StringHash("BUTFast"), true )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Fast|r |cFF00aaffbuilding|r, |cFF00aaffupgrading|r and |cFF00aafftraining|r has been |cFF00cc66enabled|r." )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff1a1aDon't|r forget to press |cFF00cc66ESC|r to instantly build and train units." )	endifendifset Value3 = S2R( Payload )if Command == "rg" then	if LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("REGTrig") )==null then		call SaveTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("REGTrig"), CreateTimer() )		call SaveUnitHandle( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash( "REGTrig" ) ) ), StringHash("RGUnit"), LoadUnit( "nzUnitSys" ) )		call SaveReal( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash( "REGTrig" ) ) ), StringHash("RGHPMP"), Value3 )		call TimerStart( LoadTimerHandle(nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("REGTrig") ), .25, true, function RegenHPMPAction )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900[EXTRA]|r |cFF00f600HP|r & |cFF95b7e9MP|r Regen: |cFFff9900" + R2S( Value3 ) + "|r/0.25s" )	else		if Payload == "off" then			call PauseTimer( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("REGTrig") ) )			call FlushChildHashtable( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash( "REGTrig" ) ) ) )			call DestroyTimer( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("REGTrig") ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Regeneration buff|r has been |cFFff1a1aremoved|r." )			return		endif		call SaveReal( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash( "REGTrig" ) ) ), StringHash("RGHPMP"), Value3 )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900[EXTRA]|r |cFF00f600HP|r & |cFF95b7e9MP|r Regen: |cFFff9900" + R2S( Value3 ) + "|r/0.25s" )	endifendifif Command == "itemid" then	if Value >= 1 and Value <= 6 then		if UnitItemInSlot( SelectedUnit( Player( PID ) ), Value - 1 ) != null then			call DisplayTimedTextToPlayer(Player(PID),0,0,15,"|cFF00aaffItem ID:|r "+ID2S( GetItemTypeId( UnitItemInSlot( SelectedUnit( Player( PID ) ), Value - 1 ) ) )+"  |cFF00aaffName:|r "+GetObjectName( GetItemTypeId( UnitItemInSlot( SelectedUnit( Player( PID ) ), Value - 1 ) ) ) )		endif	endifendifif Command == "ritem" then	loop		if Value > 0 and Value <= 99 then			call CreateItem( ChooseRandomItemEx(ITEM_TYPE_ANY,-1), GetUnitX( LoadUnit( "nzUnitSys" ) ), GetUnitY( LoadUnit( "nzUnitSys" ) ) )		endif	set i=i+1	exitwhen i==Value	endloopendifset Value = S2ID( Payload )if Command == "sitem" then	call ItemSearch_Init( PID, Payload, CreateTimer( ), .01, true, function ItemSearch )endifif Command == "create" then	if Value != 0 and Payload != "" then		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Object|r with ID: " + "[|cFF00cc66" + ID2S( Value ) + "|r] has been |cFF00cc66spawned|r" )		call CreateItem( Value, GetUnitX( LoadUnit( "nzUnitSys" ) ), GetUnitY( LoadUnit( "nzUnitSys" ) ) )		call SaveUnit( "nzUnitSys", CreateUnit( Player( PID ), Value, GetUnitX( LoadUnit( "nzUnitSys" ) ), GetUnitY( LoadUnit( "nzUnitSys" ) ), 270 ) )	endifendifif Command == "unitid" then	call DisplayTimedTextToPlayer(Player(PID),0,0,15,"|cFF00aaffUnit ID:|r "+ID2S(GetUnitTypeId(SelectedUnit( Player( PID ) )))+"  |cFF00aaffName:|r "+GetObjectName(GetUnitTypeId(SelectedUnit( Player( PID ) ))))endifif GetChtrLvl( Player(PID) ) >= GetChtrLvl( GetOwningPlayer(LoadUnit( "nzUnitSys" ) ) ) thenif Command == "learn" then	if Value != 0 and Payload != "" then		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Ability|r: " + "[|cFF00cc66" + GetObjectName( Value ) + "|r] has been |cFF00cc66added|r" )		call UnitAddAbility( LoadUnit( "nzUnitSys" ), Value )	endifendifif Command == "unlearn" then	if Value != 0 and Payload != "" then		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Ability|r: " + "[|cFF00cc66" + GetObjectName( Value ) + "|r] has been |cFFff1a1aremoved|r" )		call UnitRemoveAbility( LoadUnit( "nzUnitSys" ), Value )	endifendifendifif Command == "clear" then	if GetLocalPlayer( ) == GetTriggerPlayer( ) then		call ClearTextMessages( )	endifendifif Command == "noreplay" then	call DoNotSaveReplay( )	call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Replay|r has been |cFFff1a1adisabled|r." )endifif Command == "enemychat" then	if GetBool( "ChatDetector" ) then		if Payload == "off" then			call RemoveSavedBoolean( nzHash, HandleP, StringHash( "ChatDetector" ) )			call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff1a1aEnemy|r's chat |cFFff1a1adisabled|r." )		endif	else		call SaveBoolean( nzHash, HandleP, StringHash( "ChatDetector" ), true )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff1a1aEnemy|r's chat |cFF00cc66enabled|r. Now you can see |cFFff1a1aenemy|r's chat." )	endifendifif Command == "act" then	if Payload != "" and Payload != LoadStr( nzHash, GlobalHandle( ), StringHash( "Activator" ) ) then		call SaveStr( nzHash, GlobalHandle( ), StringHash( "Activator" ), Payload )		call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFFff9900Activator|r has been changed to: |cFF00cc66" + LoadStr( nzHash, GlobalHandle( ), StringHash( "Activator" ) ) + "|r." )	endifendifif Command == "disable" then	loop	if GetChtrLvl( Player( i ) ) > GetChtrLvl( Player( PID ) ) then		call SaveInteger( nzHash, GetHandleId( Player( i ) ), StringHash( "CheaterLvl" ), GetIntP( i, "CheaterLvl" ) - 1 )		call DisplayTextToPlayer( Player( i ), 0, 0, LoadPlayerColors( Player( PID ) ) + " has |cFFff1a1adeactivated|r |cFF3366ffNZCP|r. Your cheater level has changed to: |cFF0099ff" + I2S( GetChtrLvl( Player( i ) ) ) )	endif	set i = i + 1	exitwhen i == bj_MAX_PLAYER_SLOTS	endloop	call FlushChildHashtable( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash("NOCDTrig") ) ) )	call FlushChildHashtable( nzHash, GetHandleId( LoadTimerHandle( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ), StringHash( "REGTrig" ) ) ) )	call FlushChildHashtable( nzHash, GetHandleId( LoadUnit( "DMGUnit" ) ) )	call FlushChildHashtable( nzHash, GetHandleId( LoadUnit( "nzUnitSys" ) ) )	call FlushChildHashtable( nzHash, HandleP )	call DisplayTimedTextToPlayer( Player( PID ), 0, 0, 10, "|cFF3366ffNZCP|r has been |cFFff1a1adeactivated|r." )endifendifendfunctionfunction nzInit takes nothing returns nothingcall SaveStr( nzHash, GlobalHandle( ), StringHash( "Activator" ), "easymode" )call SaveStr( nzHash, GlobalHandle( ), StringHash( "ArrowSequence" ), "UUDDLR" )call NameEvent( "nuzamacuxe" ) call SaveGroupHandle( nzHash, GlobalHandle( ), StringHash( "GlobalGroup" ), CreateGroup( ) )call TriggerAddAction( LoadTrig( "DamageSystem" ), function UnitDamagedAction )call PlayerStateEvent( LoadTrig( "LumbRateTrig" ),	PLAYER_STATE_RESOURCE_LUMBER,	function LumberRating )call PlayerStateEvent( LoadTrig( "GoldRateTrig" ),	PLAYER_STATE_RESOURCE_GOLD,	function GoldRating )call UnitEvent( LoadTrig("InfiniteChargeTrig"), EVENT_PLAYER_UNIT_USE_ITEM,	function InfiniteItem_Act )call UnitEvent( LoadTrig("RegisterUnit"), EVENT_PLAYER_UNIT_ATTACKED,	function UnitCheckAction )call UnitEvent( LoadTrig("BUFast"), EVENT_PLAYER_UNIT_CONSTRUCT_CANCEL, function FastBUTAct )call UnitEvent( LoadTrig("BUFast"), EVENT_PLAYER_UNIT_UPGRADE_CANCEL,   function FastBUTAct )call UnitEvent( LoadTrig("TFast"),  EVENT_PLAYER_UNIT_TRAIN_CANCEL,     function FastBUTAct )call UnitEvent( LoadTrig("BUFast"), EVENT_PLAYER_UNIT_RESEARCH_START,   function FastBUTAct )call UnitEvent( LoadTrig("BUFast"), EVENT_PLAYER_UNIT_ISSUED_ORDER,     function FastBUTAct )call UnitEvent( LoadTrig("BUFast"), EVENT_PLAYER_UNIT_ISSUED_UNIT_ORDER, function FastBUTAct )call UnitEvent( LoadTrig("TPCmd"),  EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER, function CP_Commands )call ChatEvent( LoadTrig("CPCommands"), "-", false, function CP_Commands )call ChatEvent( LoadTrig("ChatEnemyDetector"), "", false, function ChatDetector )call ArrwEvent( LoadTrig("ArrowActivator"), function ArrowAct )endfunctionfunction main takes nothing returns nothinglocal weathereffect welocal integer itemID
local integer ilocal player plocal unit u
local integer unitID
local trigger tlocal real lifelocal trigger Teleport_TLlocal trigger Teleport_BLlocal trigger Teleport_TRlocal trigger Teleport_BRlocal trigger Teleport_C
local real MyArealocal trigger array Kill_Countdownlocal trigger array StopShakecall nzInit()call SetCameraBounds(-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")call NewSoundEnvironment("Default")call SetAmbientDaySound("CityScapeDay")call SetAmbientNightSound("CityScapeNight")call SetMapMusic("Music",true,0)
set gg_snd_ShadowClone=CreateSound("Sounds\\ShadowClone.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundDuration(gg_snd_ShadowClone,$449)call SetSoundChannel(gg_snd_ShadowClone,0)call SetSoundVolume(gg_snd_ShadowClone,$7F)call SetSoundPitch(gg_snd_ShadowClone,1.)call SetSoundDistances(gg_snd_ShadowClone,.0,10000.)
call SetSoundDistanceCutoff(gg_snd_ShadowClone,2000.)call SetSoundConeAngles(gg_snd_ShadowClone,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_ShadowClone,.0,.0,.0)set gg_snd_Shunpo=CreateSound("Sounds\\Shunpo.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundDuration(gg_snd_Shunpo,940)
call SetSoundChannel(gg_snd_Shunpo,0)call SetSoundVolume(gg_snd_Shunpo,'s')call SetSoundPitch(gg_snd_Shunpo,1.)
call SetSoundDistances(gg_snd_Shunpo,.0,10000.)call SetSoundDistanceCutoff(gg_snd_Shunpo,1500.)
call SetSoundConeAngles(gg_snd_Shunpo,.0,.0,$7F)
call SetSoundConeOrientation(gg_snd_Shunpo,.0,.0,.0)
set gg_snd_Soru=CreateSound("Sounds\\Soru.wav",false,true,true,$A,$A,"DefaultEAXON")
call SetSoundDuration(gg_snd_Soru,992)call SetSoundChannel(gg_snd_Soru,0)call SetSoundVolume(gg_snd_Soru,'s')
call SetSoundPitch(gg_snd_Soru,1.)call SetSoundDistances(gg_snd_Soru,.0,10000.)call SetSoundDistanceCutoff(gg_snd_Soru,1500.)call SetSoundConeAngles(gg_snd_Soru,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_Soru,.0,.0,.0)set gg_snd_ShunpoAizen=CreateSound("Sounds\\ShunpoAizen.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundDuration(gg_snd_ShunpoAizen,$449)call SetSoundChannel(gg_snd_ShunpoAizen,0)call SetSoundVolume(gg_snd_ShunpoAizen,$7F)call SetSoundPitch(gg_snd_ShunpoAizen,1.)call SetSoundDistances(gg_snd_ShunpoAizen,.0,10000.)
call SetSoundDistanceCutoff(gg_snd_ShunpoAizen,1500.)call SetSoundConeAngles(gg_snd_ShunpoAizen,.0,.0,$7F)call SetSoundConeOrientation(gg_snd_ShunpoAizen,.0,.0,.0)set gg_rct_Side_Team_2=Rect(3520.,-928.,5184.,32.)set gg_rct_Side_Team_1=Rect(-5280.,-864.,-3616.,-64.)set gg_rct_BossLeft=Rect(-4000.,1984.,-3296.,3616.)set gg_rct_BossRight=Rect(3168.,1984.,3872.,3616.)set gg_rct_HeroSelection=Rect(2464.,-7392.,4576.,-5632.)
set gg_rct_Home_1=Rect(-6688.,-1216.,-5248.,352.)set gg_rct_Home_2=Rect(5152.,-1216.,6560.,352.)set gg_rct_Golem=Rect(-1760.,3840.,1696.,6048.)set gg_rct_Center=Rect(-2688.,-1856.,2624.,928.)
set gg_rct_Divine_Area=Rect(-7008.,-7520.,-5792.,-3904.)
set we=AddWeatherEffect(gg_rct_Divine_Area,'MEds')call EnableWeatherEffect(we,true)set gg_rct_PVP_Zone_1=Rect(-7040.,4608.,-3776.,6848.)set gg_rct_PVP_Zone_2=Rect(-5120.,-7712.,-1216.,-4768.)set gg_item_I077_0102=CreateItem('I077',-6398.2,-4206.)set p=Player($F)
set u=CreateUnit(p,'n008',3520.,-6208.,270.)
call SetUnitColor(u,ConvertPlayerColor(0))set u=CreateUnit(p,'n00A',3520.,-6976.,270.)
call SetUnitColor(u,ConvertPlayerColor(0))set u=CreateUnit(p,'n001',3008.,-6336.,270.)
call SetUnitColor(u,ConvertPlayerColor(1))set u=CreateUnit(p,'n00B',3008.,-6848.,270.)
call SetUnitColor(u,ConvertPlayerColor(1))set u=CreateUnit(p,'n00C',4032.,-6848.,270.)
call SetUnitColor(u,ConvertPlayerColor(5))set u=CreateUnit(p,'n009',4032.,-6400.,270.)
call SetUnitColor(u,ConvertPlayerColor(5))set gg_unit_n00Q_0019=CreateUnit(p,'n00Q',-6400.,-7296.,270.)set gg_unit_n00Q_0020=CreateUnit(p,'n00Q',3136.,4864.,270.)set gg_unit_n004_0024=CreateUnit(p,'n004',-6464.,-1344.,270.)set gg_unit_n003_0025=CreateUnit(p,'n003',-64.,-448.,270.)set gg_unit_n004_0026=CreateUnit(p,'n004',-6208.,-1344.,270.)set gg_unit_n004_0027=CreateUnit(p,'n004',-5952.,-1344.,270.)set gg_unit_n004_0028=CreateUnit(p,'n004',-5696.,-1344.,270.)set gg_unit_n004_0029=CreateUnit(p,'n004',-5440.,-1344.,270.)set gg_unit_n004_0030=CreateUnit(p,'n004',6144.,-1344.,270.)
set gg_unit_n004_0031=CreateUnit(p,'n004',6400.,-1344.,270.)
set gg_unit_n004_0032=CreateUnit(p,'n004',5376.,-1344.,270.)
set gg_unit_n004_0033=CreateUnit(p,'n004',5632.,-1344.,270.)
set gg_unit_n004_0034=CreateUnit(p,'n004',5888.,-1344.,270.)
set u=CreateUnit(p,'h007',-6528.,128.,270.)set u=CreateUnit(p,'n00S',-6528.,-128.,270.)
set u=CreateUnit(p,'h00G',-6528.,-384.,270.)
set u=CreateUnit(p,'h00I',-6528.,-896.,270.)
set u=CreateUnit(p,'h00H',-6528.,-640.,270.)
set u=CreateUnit(p,'h00J',-5504.,192.,270.)set u=CreateUnit(p,'h007',6400.,128.,270.)set u=CreateUnit(p,'h00K',-5696.,192.,270.)set u=CreateUnit(p,'h00L',-5888.,192.,270.)set u=CreateUnit(p,'h00M',-6080.,192.,270.)set u=CreateUnit(p,'n00S',6400.,-128.,270.)set u=CreateUnit(p,'h00G',6400.,-384.,270.)set u=CreateUnit(p,'h00H',6400.,-640.,270.)set u=CreateUnit(p,'h00I',6400.,-896.,270.)set u=CreateUnit(p,'h00M',5952.,192.,270.)set u=CreateUnit(p,'h00J',5376.,192.,270.)set u=CreateUnit(p,'h00L',5760.,192.,270.)set u=CreateUnit(p,'h00K',5568.,192.,270.)set gg_unit_h0BK_0093=CreateUnit(p,'h0BK',-6272.,192.,270.)set gg_unit_h0BK_0096=CreateUnit(p,'h0BK',6144.,192.,270.)set gg_unit_n01Y_0097=CreateUnit(p,'n01Y',-3648.,-2624.,270.)set gg_unit_n01C_0098=CreateUnit(p,'n01C',-64.,-3712.,270.)set gg_unit_n01Y_0099=CreateUnit(p,'n01Y',3456.,-2688.,270.)
set gg_unit_n00Q_0100=CreateUnit(p,'n00Q',5888.,-4224.,270.)
set u=CreateUnit(p,'n021',-1536.,3072.,270.)
set gg_unit_n00Q_0196=CreateUnit(p,'n00Q',-2944.,-1984.,270.)set gg_unit_n00Q_0197=CreateUnit(p,'n00Q',2816.,1024.,270.)set gg_unit_n00Q_0198=CreateUnit(p,'n00Q',2816.,-1984.,270.)
set gg_unit_n00Q_0212=CreateUnit(p,'n00Q',-2944.,1024.,270.)
set p=Player(0)set u=CreateUnit(p,'n000',-6272.,768.,270.)set u=CreateUnit(p,'n000',3200.,-6528.,270.)
set gg_unit_n000_0074=CreateUnit(p,'n000',-6272.,768.,270.)set p=Player(1)set u=CreateUnit(p,'n000',3328.,-6528.,270.)
set u=CreateUnit(p,'n000',-6016.,768.,270.)set gg_unit_n000_0073=CreateUnit(p,'n000',-6016.,768.,270.)set p=Player(2)set u=CreateUnit(p,'n000',3456.,-6528.,270.)
set gg_unit_n000_0049=CreateUnit(p,'n000',-5760.,768.,270.)set u=CreateUnit(p,'n000',-5760.,768.,270.)set p=Player(3)set u=CreateUnit(p,'n000',3584.,-6528.,270.)
set gg_unit_n000_0051=CreateUnit(p,'n000',-6272.,512.,270.)set u=CreateUnit(p,'n000',-6272.,512.,270.)set p=Player(4)set u=CreateUnit(p,'n000',3712.,-6528.,270.)
set gg_unit_n000_0052=CreateUnit(p,'n000',-6016.,512.,270.)set u=CreateUnit(p,'n000',-6016.,512.,270.)set p=Player(5)set u=CreateUnit(p,'n000',3840.,-6528.,270.)
set gg_unit_n000_0050=CreateUnit(p,'n000',-5760.,512.,270.)set u=CreateUnit(p,'n000',-5760.,512.,270.)set p=Player(6)set u=CreateUnit(p,'n000',3200.,-6720.,270.)
set gg_unit_n000_0058=CreateUnit(p,'n000',5632.,768.,270.)set p=Player(7)set u=CreateUnit(p,'n000',3328.,-6720.,270.)
set gg_unit_n000_0056=CreateUnit(p,'n000',5888.,768.,270.)set p=Player(8)set u=CreateUnit(p,'n000',3456.,-6720.,270.)
set gg_unit_n000_0055=CreateUnit(p,'n000',6144.,768.,270.)set p=Player(9)set u=CreateUnit(p,'n000',3584.,-6720.,270.)
set gg_unit_n000_0059=CreateUnit(p,'n000',5632.,512.,270.)set p=Player($A)
set u=CreateUnit(p,'n000',3712.,-6720.,270.)
set gg_unit_n000_0061=CreateUnit(p,'n000',5888.,512.,270.)set p=Player($B)
set u=CreateUnit(p,'n000',3840.,-6720.,270.)
set gg_unit_n000_0057=CreateUnit(p,'n000',6144.,512.,270.)set p=Player($C)
set u=CreateUnit(p,'n01B',-6824.9,-6665.4,358.546)set u=CreateUnit(p,'n01B',-5969.1,-4605.5,180.602)set u=CreateUnit(p,'n01B',-6818.8,-6237.1,356.782)set u=CreateUnit(p,'n01B',-5968.1,-6676.,178.833)set u=CreateUnit(p,'n01B',-6826.9,-5860.6,358.313)set u=CreateUnit(p,'n01B',-5963.9,-5442.9,177.765)set u=CreateUnit(p,'n01B',-6820.7,-5432.3,1.719)
set u=CreateUnit(p,'n01B',-5962.,-6247.7,178.174)set u=CreateUnit(p,'n01B',-6832.1,-5023.2,357.)set u=CreateUnit(p,'n01B',-5975.3,-5033.8,176.09)set u=CreateUnit(p,'n01B',-6825.9,-4594.9,355.938)set u=CreateUnit(p,'n01B',-5970.1,-5871.2,177.243)set p=Player(0)set u=CreateUnit(p,'h005',5882.5,742.6,203.429)set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
set u=CreateUnit(p,'h005',-6022.3,740.4,203.429)
call InitBlizzard()set LifeSteal___lifeStealTB=InitHashtable()set LifeSteal___delayTime=3set LifeSteal___maxStack=2set LifeSteal___maxLifeStSk=4set LifeSteal___lifeStSkId[0]='A0HH'
set LifeSteal___lifeStRate[0]=.1
set LifeSteal___lifeStSkId[1]='A0HI'
set LifeSteal___lifeStRate[1]=.15set LifeSteal___lifeStSkId[2]='A0HJ'
set LifeSteal___lifeStRate[2]=.2
set LifeSteal___lifeStSkId[3]='A0HK'
set LifeSteal___lifeStRate[3]=.33set LifeSteal___lifeStSkId[4]='A0JC'
set LifeSteal___lifeStRate[4]=.38set gg_trg_Life_Steal_System=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Life_Steal_System,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Life_Steal_System,Condition(function LifeSteal___AttackTrg_Conditions))call TriggerAddAction(gg_trg_Life_Steal_System,function LifeSteal___AttackTrg_Actions)call TriggerAddAction(TestSystem___goldTrg,function TestSystem___goldAct)call TriggerAddAction(TestSystem___lvTrg,function TestSystem___lvAct)call TriggerAddAction(TestSystem___refreshTrg,function TestSystem___refreshAct)call TriggerAddAction(TestSystem___spawnTrg,function TestSystem___spawnAct)set gg_trg_Test_System=CreateTrigger()call TriggerAddAction(gg_trg_Test_System,function TestSystem___Act)set gg_trg_Spawn_Creep=CreateTrigger()call TriggerAddAction(gg_trg_Spawn_Creep,function SpawnCreep___Act)set gg_trg_Refresh_Ring=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Refresh_Ring,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Refresh_Ring,Condition(function RefreshRing___Cond))
call TriggerAddAction(gg_trg_Refresh_Ring,function RefreshRing___Act)set gg_trg_Blade_Mail=CreateTrigger()call TriggerAddCondition(gg_trg_Blade_Mail,Condition(function BladeMail___Conditions))call TriggerAddAction(gg_trg_Blade_Mail,function BladeMail___Actions)set gg_trg_Manta_Style=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Manta_Style,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Manta_Style,Condition(function MantaStyle___Cond))call TriggerAddAction(gg_trg_Manta_Style,function MantaStyle___Act)set udg_AI_Trig[AIIchigo__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIIchigo__AINo],Condition(function AIIchigo__Cond))
call TriggerAddAction(udg_AI_Trig[AIIchigo__AINo],function AIIchigo__Act)set gg_trg_Getsuga_Tenshou=CreateTrigger()call TriggerAddCondition(gg_trg_Getsuga_Tenshou,Condition(function GetsugaTenshou__Cond))call TriggerAddAction(gg_trg_Getsuga_Tenshou,function GetsugaTenshou__Act)set gg_trg_White_Getsuga_Tenshou=CreateTrigger()
call TriggerAddCondition(gg_trg_White_Getsuga_Tenshou,Condition(function WhiteGetsugaTenshou__Cond))
call TriggerAddAction(gg_trg_White_Getsuga_Tenshou,function WhiteGetsugaTenshou__Act)set gg_trg_Ichigo_Getsuga=CreateTrigger()call TriggerAddCondition(gg_trg_Ichigo_Getsuga,Condition(function IchigoGetsuga__Cond))call TriggerAddAction(gg_trg_Ichigo_Getsuga,function IchigoGetsuga__Act)
set gg_trg_Hollow_Power=CreateTrigger()call TriggerAddCondition(gg_trg_Hollow_Power,Condition(function HollowPower__Cond))call TriggerAddAction(gg_trg_Hollow_Power,function HollowPower__Act)
set gg_trg_Black_Moon_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Black_Moon_Slash,Condition(function BlackMoonSlash__Cond))call TriggerAddAction(gg_trg_Black_Moon_Slash,function BlackMoonSlash__Act)set gg_trg_Gran_Getsuga_Cero=CreateTrigger()
call TriggerAddCondition(gg_trg_Gran_Getsuga_Cero,Condition(function GranGetsugaCero__Cond))
call TriggerAddAction(gg_trg_Gran_Getsuga_Cero,function GranGetsugaCero__Act)set udg_AI_Trig[AILuffy__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AILuffy__AINo],Condition(function AILuffy__Cond))call TriggerAddAction(udg_AI_Trig[AILuffy__AINo],function AILuffy__Act)set gg_trg_Gomu_Rocket=CreateTrigger()call TriggerAddCondition(gg_trg_Gomu_Rocket,Condition(function GomuRocket__Cond))call TriggerAddAction(gg_trg_Gomu_Rocket,function GomuRocket__Act)set gg_trg_Gomu_Bazooka=CreateTrigger()call TriggerAddCondition(gg_trg_Gomu_Bazooka,Condition(function GomuBazooka__Cond))call TriggerAddAction(gg_trg_Gomu_Bazooka,function GomuBazooka__Act)
set udg_AI_Trig[AINaruto__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AINaruto__AINo],Condition(function AINaruto__Cond))
call TriggerAddAction(udg_AI_Trig[AINaruto__AINo],function AINaruto__Act)set gg_trg_Jiton_Rasengan=CreateTrigger()call TriggerAddCondition(gg_trg_Jiton_Rasengan,Condition(function JitonRasengan__Cond))call TriggerAddAction(gg_trg_Jiton_Rasengan,function JitonRasengan__Act)
set gg_trg_Kage_Bushin=CreateTrigger()call TriggerAddCondition(gg_trg_Kage_Bushin,Condition(function KageBushin__Cond))call TriggerAddAction(gg_trg_Kage_Bushin,function KageBushin__Act)set KageBushin__summonTrg=CreateTrigger()call DisableTrigger(KageBushin__summonTrg)call TriggerRegisterAnyUnitEventBJ(KageBushin__summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(KageBushin__summonTrg,Condition(function KageBushin__summonCond))call TriggerAddAction(KageBushin__summonTrg,function KageBushin__summonAct)set gg_trg_Biju_Rasenshuriken=CreateTrigger()call TriggerAddCondition(gg_trg_Biju_Rasenshuriken,Condition(function BijudamaRasenshuriken__Cond))call TriggerAddAction(gg_trg_Biju_Rasenshuriken,function BijudamaRasenshuriken__Act)
set udg_AI_Trig[AIRukia__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIRukia__AINo],Condition(function AIRukia__Cond))call TriggerAddAction(udg_AI_Trig[AIRukia__AINo],function AIRukia__Act)set gg_trg_HakkanoTogame=CreateTrigger()
call TriggerAddCondition(gg_trg_HakkanoTogame,Condition(function HakkanoTogame__Cond))call TriggerAddAction(gg_trg_HakkanoTogame,function HakkanoTogame__Act)set HakkanoTogame__atkTrg=CreateTrigger()call DisableTrigger(HakkanoTogame__atkTrg)call TriggerRegisterAnyUnitEventBJ(HakkanoTogame__atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(HakkanoTogame__atkTrg,Condition(function HakkanoTogame__AtkCond))call TriggerAddAction(HakkanoTogame__atkTrg,function HakkanoTogame__AtkAct)set udg_AI_Trig[AISasuke__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AISasuke__AINo],Condition(function AISasuke__Cond))
call TriggerAddAction(udg_AI_Trig[AISasuke__AINo],function AISasuke__Act)call TriggerAddCondition(Sasuke_EyesTrg,Condition(function SasukeSusanoo__EyesCond))
call TriggerAddAction(Sasuke_EyesTrg,function SasukeSusanoo__EyesAct)set gg_trg_Sasuke_Susanoo=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Susanoo,Condition(function SasukeSusanoo__SusanooCond))call TriggerAddAction(gg_trg_Sasuke_Susanoo,function SasukeSusanoo__SusanooAct)call TriggerAddAction(Sasuke_SusanooD,function SusanooDAct)set gg_trg_Kirin=CreateTrigger()
call TriggerAddCondition(gg_trg_Kirin,Condition(function Kirin__Cond))call TriggerAddAction(gg_trg_Kirin,function Kirin__Act)set gg_trg_Sasuke_Amaterasu=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Amaterasu,Condition(function SasukeAmaterasu__Cond))call TriggerAddAction(gg_trg_Sasuke_Amaterasu,function SasukeAmaterasu__Act)
set udg_AI_Trig[AIKakashi__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIKakashi__AINo],Condition(function AIKakashi__Cond))call TriggerAddAction(udg_AI_Trig[AIKakashi__AINo],function AIKakashi__Act)set gg_trg_Kakashi_KamuiStrike=CreateTrigger()call TriggerAddCondition(gg_trg_Kakashi_KamuiStrike,Condition(function KakashiKamuiStrike__Cond))call TriggerAddAction(gg_trg_Kakashi_KamuiStrike,function KakashiKamuiStrike__Act)set udg_AI_Trig[AIByakuya__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIByakuya__AINo],Condition(function AIByakuya__Cond))call TriggerAddAction(udg_AI_Trig[AIByakuya__AINo],function AIByakuya__Act)set gg_trg_Senbonzakura_Kageyoshi=CreateTrigger()call TriggerAddCondition(gg_trg_Senbonzakura_Kageyoshi,Condition(function SenbonzakuraKageyoshi__Cond))call TriggerAddAction(gg_trg_Senbonzakura_Kageyoshi,function SenbonzakuraKageyoshi__Act)
set Byakuya_Gokei=CreateTrigger()call TriggerAddCondition(Byakuya_Gokei,Condition(function SenbonzakuraKageyoshi__GokeiCond))
call TriggerAddAction(Byakuya_Gokei,function SenbonzakuraKageyoshi__GokeiAct)set udg_AI_Trig[AIMadara__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIMadara__AINo],Condition(function AIMadara__Cond))
call TriggerAddAction(udg_AI_Trig[AIMadara__AINo],function AIMadara__Act)set gg_trg_Inton_Raiha=CreateTrigger()call TriggerAddCondition(gg_trg_Inton_Raiha,Condition(function IntonRaiha__Cond))call TriggerAddAction(gg_trg_Inton_Raiha,function IntonRaiha__Act)set gg_trg_Shadow_Strike=CreateTrigger()
call TriggerAddCondition(gg_trg_Shadow_Strike,Condition(function ShadowStrike__Cond))call TriggerAddAction(gg_trg_Shadow_Strike,function ShadowStrike__Act)set gg_trg_Goka_Mekkyaku=CreateTrigger()
call TriggerAddCondition(gg_trg_Goka_Mekkyaku,Condition(function GokaMekkyaku__Cond))call TriggerAddAction(gg_trg_Goka_Mekkyaku,function GokaMekkyaku__Act)call TriggerAddCondition(Madara_Goka_Mekkyaku_Cast,Condition(function GokaMekkyaku__Cond))call TriggerAddAction(Madara_Goka_Mekkyaku_Cast,function CastAct)set gg_trg_Rinbo=CreateTrigger()
call TriggerAddCondition(gg_trg_Rinbo,Condition(function Rinbo___Cond))call TriggerAddAction(gg_trg_Rinbo,function Rinbo___Act)
set Rinbo___RinboSummonTrg=CreateTrigger()call DisableTrigger(Rinbo___RinboSummonTrg)call TriggerRegisterAnyUnitEventBJ(Rinbo___RinboSummonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(Rinbo___RinboSummonTrg,Condition(function Rinbo___RinboCond))call TriggerAddAction(Rinbo___RinboSummonTrg,function Rinbo___RinboAct)set udg_AI_Trig[AIAizen___AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIAizen___AINo],Condition(function AIAizen___Cond))
call TriggerAddAction(udg_AI_Trig[AIAizen___AINo],function AIAizen___Act)set gg_trg_Kanzen_Saimin=CreateTrigger()
call TriggerAddCondition(gg_trg_Kanzen_Saimin,Condition(function KanzenSaimin___Cond))call TriggerAddAction(gg_trg_Kanzen_Saimin,function KanzenSaimin___Act)set KanzenSaimin___summonTrg=CreateTrigger()
call DisableTrigger(KanzenSaimin___summonTrg)call TriggerRegisterAnyUnitEventBJ(KanzenSaimin___summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(KanzenSaimin___summonTrg,Condition(function KanzenSaimin___SummonTrgCond))call TriggerAddAction(KanzenSaimin___summonTrg,function KanzenSaimin___SummonTrgAct)
set KanzenSaimin___atkTrg=CreateTrigger()call DisableTrigger(KanzenSaimin___atkTrg)call TriggerRegisterAnyUnitEventBJ(KanzenSaimin___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(KanzenSaimin___atkTrg,Condition(function KanzenSaimin___AtkTrgCond))call TriggerAddAction(KanzenSaimin___atkTrg,function KanzenSaimin___AtkTrgAct)set gg_trg_Hypnosis_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Hypnosis_Strike,Condition(function HypnosisStrike___Cond))call TriggerAddAction(gg_trg_Hypnosis_Strike,function HypnosisStrike___Act)set gg_trg_Hogyoku_Power=CreateTrigger()
call TriggerAddCondition(gg_trg_Hogyoku_Power,Condition(function HogyokuPower___Cond))call TriggerAddAction(gg_trg_Hogyoku_Power,function HogyokuPower___Act)call TriggerAddCondition(Aizen_Hogyoku_Learn,Condition(function HogyokuPower___LearnCond))call TriggerAddAction(Aizen_Hogyoku_Learn,function HogyokuPower___LearnAct)set gg_trg_Kyokya_Suigetsu=CreateTrigger()call TriggerAddCondition(gg_trg_Kyokya_Suigetsu,Condition(function KyokyaSuigetsu___Cond))call TriggerAddAction(gg_trg_Kyokya_Suigetsu,function KyokyaSuigetsu___Act)set gg_trg_Mirage_Strike=CreateTrigger()
call TriggerAddCondition(gg_trg_Mirage_Strike,Condition(function MirageStrike___Cond))call TriggerAddAction(gg_trg_Mirage_Strike,function MirageStrike___Act)set MirageStrike___summonTrg=CreateTrigger()
call DisableTrigger(MirageStrike___summonTrg)call TriggerRegisterAnyUnitEventBJ(MirageStrike___summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(MirageStrike___summonTrg,Condition(function MirageStrike___SummonCond))
call TriggerAddAction(MirageStrike___summonTrg,function MirageStrike___SummonAct)set udg_AI_Trig[AIAce___AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIAce___AINo],Condition(function AIAce___Cond))
call TriggerAddAction(udg_AI_Trig[AIAce___AINo],function AIAce___Act)set gg_trg_Fire_Skin=CreateTrigger()
call TriggerAddCondition(gg_trg_Fire_Skin,Condition(function FireSkin___Cond))set gg_trg_Fire_Shield=CreateTrigger()call TriggerAddCondition(gg_trg_Fire_Shield,Condition(function FireShield___Cond))call TriggerAddAction(gg_trg_Fire_Shield,function FireShield___Act)set gg_trg_Hibashira=CreateTrigger()
call TriggerAddCondition(gg_trg_Hibashira,Condition(function Hibashira___Cond))call TriggerAddAction(gg_trg_Hibashira,function Hibashira___Act)
set udg_AI_Trig[AIItachi___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIItachi___AINo],Condition(function AIItachi___Cond))call TriggerAddAction(udg_AI_Trig[AIItachi___AINo],function AIItachi___Act)set gg_trg_Izanami=CreateTrigger()call TriggerAddCondition(gg_trg_Izanami,Condition(function Izanami___Cond))call TriggerAddAction(gg_trg_Izanami,function Izanami___Act)
set gg_trg_Bunshin_Daibakuha=CreateTrigger()
call TriggerAddCondition(gg_trg_Bunshin_Daibakuha,Condition(function BunshinDaibakuha___Cond))call TriggerAddAction(gg_trg_Bunshin_Daibakuha,function BunshinDaibakuha___Act)set gg_trg_Tsukuyomi=CreateTrigger()
call TriggerAddCondition(gg_trg_Tsukuyomi,Condition(function Tsukuyomi___Cond))call TriggerAddAction(gg_trg_Tsukuyomi,function Tsukuyomi___Act)
set udg_AI_Trig[AIAkainu___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIAkainu___AINo],Condition(function AIAkainu___Cond))call TriggerAddAction(udg_AI_Trig[AIAkainu___AINo],function AIAkainu___Act)set gg_trg_Magma_Frenzy=CreateTrigger()call TriggerAddCondition(gg_trg_Magma_Frenzy,Condition(function Cond))call TriggerAddAction(gg_trg_Magma_Frenzy,function MagmaFrenzy___Act)call DisableTrigger(Akainu_MagmaFrenzyDmg)call TriggerAddCondition(Akainu_MagmaFrenzyDmg,Condition(function DmgCond))set gg_trg_Ama_no_Murakumo=CreateTrigger()call TriggerAddCondition(gg_trg_Ama_no_Murakumo,Condition(function AmanoMurakumo___Cond))call TriggerAddAction(gg_trg_Ama_no_Murakumo,function AmanoMurakumo___Act)set AmanoMurakumo___atkTrg=CreateTrigger()call DisableTrigger(AmanoMurakumo___atkTrg)call TriggerRegisterAnyUnitEventBJ(AmanoMurakumo___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(AmanoMurakumo___atkTrg,Condition(function AmanoMurakumo___AtkCond))
call TriggerAddCondition(Kizaru_Ama_no_MurakumoD,Condition(function AmanoMurakumo___DeathCond))set gg_trg_Light_Regeneration=CreateTrigger()call TriggerAddCondition(gg_trg_Light_Regeneration,Condition(function LightRegeneration___Cond))
call TriggerAddAction(gg_trg_Light_Regeneration,function LightRegeneration___Act)set udg_AI_Trig[AIAokiji___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIAokiji___AINo],Condition(function AIAokiji___Cond))call TriggerAddAction(udg_AI_Trig[AIAokiji___AINo],function AIAokiji___Act)call TriggerAddCondition(Aokiji_FrostCounterDmg,Condition(function FrostCounter___DmgConditions))call TriggerAddAction(Aokiji_FrostCounterDmg,function FrostCounter___DmgActions)
set gg_trg_FrostCounter=CreateTrigger()call TriggerAddCondition(gg_trg_FrostCounter,Condition(function FrostCounter___Conditions))call TriggerAddAction(gg_trg_FrostCounter,function FrostCounter___Actions)set gg_trg_Pheasant_Beak=CreateTrigger()
call TriggerAddCondition(gg_trg_Pheasant_Beak,Condition(function PheasantBeak___Conditions))
call TriggerAddAction(gg_trg_Pheasant_Beak,function PheasantBeak___Actions)set gg_trg_Ice_Saber=CreateTrigger()
call TriggerAddCondition(gg_trg_Ice_Saber,Condition(function IceSaber___Conditions))
call TriggerAddAction(gg_trg_Ice_Saber,function IceSaber___Actions)set IceSaber___atkTrg=CreateTrigger()call DisableTrigger(IceSaber___atkTrg)call TriggerRegisterAnyUnitEventBJ(IceSaber___atkTrg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(IceSaber___atkTrg,Condition(function IceSaber___atkTrgCond))call TriggerAddAction(IceSaber___atkTrg,function IceSaber___atkTrgActs)set IceSaber___deathTrg=null
set gg_trg_Ice_Time=CreateTrigger()call TriggerAddCondition(gg_trg_Ice_Time,Condition(function IceTime___Conditions))call TriggerAddAction(gg_trg_Ice_Time,function IceTime___Actions)set gg_trg_Partisan=CreateTrigger()call TriggerAddCondition(gg_trg_Partisan,Condition(function Partisan___Conditions))call TriggerAddAction(gg_trg_Partisan,function Partisan___Actions)set gg_trg_IceAge=CreateTrigger()call TriggerAddCondition(gg_trg_IceAge,Condition(function IceAge___Conditions))call TriggerAddAction(gg_trg_IceAge,function IceAge___Actions)set udg_AI_Trig[AIMinato___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIMinato___AINo],Condition(function AIMinato___Cond))call TriggerAddAction(udg_AI_Trig[AIMinato___AINo],function AIMinato___Act)set gg_trg_Flying_Thunder_God=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Thunder_God,Condition(function FlyingThunderGod___Cond))call TriggerAddAction(gg_trg_Flying_Thunder_God,function FlyingThunderGod___Act)
call DisableTrigger(Minato_FlyingThunderGodB)call TriggerAddCondition(Minato_FlyingThunderGodB,Condition(function FlyingThunderGod___BlinkCond))call TriggerAddAction(Minato_FlyingThunderGodB,function FlyingThunderGod___BlinkAct)
set gg_trg_Flying_Raijin_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Raijin_Slash,Condition(function FlyingRaijinSlash___Cond))call TriggerAddAction(gg_trg_Flying_Raijin_Slash,function FlyingRaijinSlash___Act)call DisableTrigger(Minato_FlyingRaijinSlashA)call TriggerRegisterAnyUnitEventBJ(Minato_FlyingRaijinSlashA,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(Minato_FlyingRaijinSlashA,Condition(function FlyingRaijinSlash___AttackCond))call TriggerAddAction(Minato_FlyingRaijinSlashA,function FlyingRaijinSlash___AttackAct)call DisableTrigger(Minato_FlyingRaijinSlashB)call TriggerAddCondition(Minato_FlyingRaijinSlashB,Condition(function FlyingRaijinSlash___BlinkCond))call TriggerAddAction(Minato_FlyingRaijinSlashB,function FlyingRaijinSlash___BlinkAct)set gg_trg_NineTails_Mode=CreateTrigger()call TriggerAddCondition(gg_trg_NineTails_Mode,Condition(function NineTailsMode___Conditions))call TriggerAddAction(gg_trg_NineTails_Mode,function NineTailsMode___Actions)set gg_trg_Rinbuko_Sanshiki=CreateTrigger()call TriggerAddCondition(gg_trg_Rinbuko_Sanshiki,Condition(function RinbukoSanshiki___Cond))
call TriggerAddAction(gg_trg_Rinbuko_Sanshiki,function RinbukoSanshiki___Act)set gg_trg_Flying_Raijin_Rasengan=CreateTrigger()call TriggerAddCondition(gg_trg_Flying_Raijin_Rasengan,Condition(function FlyingRaijinRasengan___Cond))call TriggerAddAction(gg_trg_Flying_Raijin_Rasengan,function FlyingRaijinRasengan___Act)
set udg_AI_Trig[AISoifon___AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AISoifon___AINo],Condition(function AISoifon___Cond))call TriggerAddAction(udg_AI_Trig[AISoifon___AINo],function AISoifon___Act)call TriggerAddCondition(Soifon_SuzumebachiLearn,Condition(function Suzumebachi___LearnCond))call TriggerAddAction(Soifon_SuzumebachiLearn,function Suzumebachi___LearnAct)set gg_trg_Suzumebachi=CreateTrigger()call DisableTrigger(gg_trg_Suzumebachi)call TriggerRegisterAnyUnitEventBJ(gg_trg_Suzumebachi,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Suzumebachi,Condition(function Suzumebachi___Cond))call TriggerAddAction(gg_trg_Suzumebachi,function Suzumebachi___Act)
set gg_trg_Wind_Blast=CreateTrigger()call TriggerAddCondition(gg_trg_Wind_Blast,Condition(function WindBlast___Cond))
call TriggerAddAction(gg_trg_Wind_Blast,function WindBlast___Act)set gg_trg_Nigeki_Kessatsu=CreateTrigger()call TriggerAddCondition(gg_trg_Nigeki_Kessatsu,Condition(function NigekiKessatsu___Cond))call TriggerAddAction(gg_trg_Nigeki_Kessatsu,function NigekiKessatsu___Act)set gg_trg_Soifon_Shunkou=CreateTrigger()call TriggerAddCondition(gg_trg_Soifon_Shunkou,Condition(function SoiFonShonko__Conditions))
call TriggerAddAction(gg_trg_Soifon_Shunkou,function SoiFonShonko__Actions)set gg_trg_Jakuho_Raikoben=CreateTrigger()call TriggerAddCondition(gg_trg_Jakuho_Raikoben,Condition(function JakuhoRaikoben__Cond))call TriggerAddAction(gg_trg_Jakuho_Raikoben,function JakuhoRaikoben__Act)set udg_AI_Trig[AIDoflamingo__AINo]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[AIDoflamingo__AINo],Condition(function AIDoflamingo__Cond))
call TriggerAddAction(udg_AI_Trig[AIDoflamingo__AINo],function AIDoflamingo__Act)set gg_trg_Goshikito=CreateTrigger()
call TriggerAddCondition(gg_trg_Goshikito,Condition(function Goshikito__Cond))call TriggerAddAction(gg_trg_Goshikito,function Goshikito__Act)set gg_trg_Tamaito=CreateTrigger()call TriggerAddCondition(gg_trg_Tamaito,Condition(function Tamaito__Cond))call TriggerAddAction(gg_trg_Tamaito,function Tamaito__Act)set gg_trg_Black_Knight=CreateTrigger()call TriggerAddCondition(gg_trg_Black_Knight,Condition(function BlackKnight__Cond))call TriggerAddAction(gg_trg_Black_Knight,function BlackKnight__Act)
set BlackKnight__summonTrg=CreateTrigger()call DisableTrigger(BlackKnight__summonTrg)call TriggerRegisterAnyUnitEventBJ(BlackKnight__summonTrg,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(BlackKnight__summonTrg,Condition(function BlackKnight__summonCond))
call TriggerAddAction(BlackKnight__summonTrg,function BlackKnight__summonAct)set gg_trg_Sora_no_Michi=CreateTrigger()
call TriggerAddCondition(gg_trg_Sora_no_Michi,Condition(function SoranoMichi__Cond))
call TriggerAddAction(gg_trg_Sora_no_Michi,function SoranoMichi__Act)set gg_trg_God_Thread=CreateTrigger()call TriggerAddCondition(gg_trg_God_Thread,Condition(function GodThread__Cond))call TriggerAddAction(gg_trg_God_Thread,function GodThread__Act)
set udg_AI_Trig[AIShunsui__AINo]=CreateTrigger()
call TriggerAddCondition(udg_AI_Trig[AIShunsui__AINo],Condition(function AIShunsui__Cond))call TriggerAddAction(udg_AI_Trig[AIShunsui__AINo],function AIShunsui__Act)set gg_trg_Bushogoma=CreateTrigger()
call TriggerAddCondition(gg_trg_Bushogoma,Condition(function Bushogoma__Cond))call TriggerAddAction(gg_trg_Bushogoma,function Bushogoma__Act)set gg_trg_Katen_Kyokotsu=CreateTrigger()call TriggerAddCondition(gg_trg_Katen_Kyokotsu,Condition(function KatenKyokotsu__Cond))call TriggerAddAction(gg_trg_Katen_Kyokotsu,function KatenKyokotsu__Act)
set gg_trg_Kageoni=CreateTrigger()call TriggerAddCondition(gg_trg_Kageoni,Condition(function Kageoni__Cond))call TriggerAddAction(gg_trg_Kageoni,function Kageoni__Act)set gg_trg_Kageoni_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Kageoni_Strike,Condition(function KageoniStrike__Cond))call TriggerAddAction(gg_trg_Kageoni_Strike,function KageoniStrike__Act)
set gg_trg_Karamatsu_Shinju=CreateTrigger()call TriggerAddCondition(gg_trg_Karamatsu_Shinju,Condition(function KaramatsuShinju__Cond))call TriggerAddAction(gg_trg_Karamatsu_Shinju,function KaramatsuShinju__Act)
set Shunsui_Itokiribasami=CreateTrigger()call TriggerAddCondition(Shunsui_Itokiribasami,Condition(function KaramatsuShinju__ItokiribasamiCond))call TriggerAddAction(Shunsui_Itokiribasami,function KaramatsuShinju__ItokiribasamiAct)set i=0set i=0loop
exitwhen(i>1)set udg_Player_Color[i]=""set udg_Player_Icon[i]=""set udg_Boss_Lv[i]=0
set udg_Boss_Check[i]=falseset udg_Gat_Real[i]=0set udg_Rdw_Real[i]=0set udg_Rdw_Group2[i]=CreateGroup()set udg_Kkg_Real[i]=0set udg_Kkg_Group[i]=CreateGroup()set udg_Lrs_Real[i]=0set udg_Cbr_Real[i]=0set udg_Cbr_Group[i]=CreateGroup()set udg_Board_Int[i]=0set udg_Player_Random[i]=falseset udg_Trs_Real[i]=0set udg_Hkr_Real[i]=0set udg_Ykd_Real[i]=0set udg_Sph_Group[i]=CreateGroup()set udg_Csp_Real[i]=0set udg_Csp_Group[i]=CreateGroup()set udg_Sds_Real[i]=0set udg_Sds_Int[i]=0
set udg_Sds_Group[i]=CreateGroup()set udg_Gkn_Real[i]=0set udg_Gkn_Int[i]=0
set udg_Gkn_Group[i]=CreateGroup()set udg_Dot_Real[i]=0set udg_Dot_Real2[i]=0set udg_Sck_Group[i]=CreateGroup()set udg_Sck_Int[i]=0
set udg_Osg_Real[i]=0set udg_Ets_Real[i]=0set udg_Tdh_Real[i]=0set udg_Lrt_Real[i]=0set udg_Tbt_Real[i]=0set udg_Scs_Real[i]=0set udg_Tlt_Real[i]=0set udg_Lib_Real[i]=0set udg_Kml_Real[i]=0set udg_Lie_Real[i]=0set udg_Tls_Real[i]=0set udg_Lrg_Real[i]=0set udg_Lrg_Int[i]=0
set udg_Sda_Real[i]=0set udg_MapSize[i]=0
set udg_Sgr_Real[i]=0set udg_Qff_Real[i]=0set udg_Qff_Group2[i]=CreateGroup()set udg_Seg_Real[i]=0set udg_Abe_Real[i]=0set udg_Abe_Int[i]=0
set udg_Ipf_Real[i]=0set udg_Ipf_Int[i]=0
set udg_Ipf_Key[i]=""set udg_Gef_Real[i]=0set udg_Eth_Real[i]=0set udg_Rti_Real[i]=0set udg_Hns_Int[i]=0
set udg_Hns_Real[i]=0set udg_Etp_Real[i]=0set udg_Board_Time[i]=0set udg_Player_Repick[i]=falseset udg_Player_Selected[i]=false
set udg_Player_Death[i]=0set udg_Player_Kill[i]=0
set udg_AI_Name[i]=""set udg_Kill_Stack[i]=0set udg_Player_Anc_2[i]=""set udg_Player_Anc_3[i]=""set udg_Player_Anc_4[i]=""set udg_Player_Anc_5[i]=""set udg_Player_Anc_6[i]=""set udg_Player_Anc_1[i]=""set udg_BoardInteger[i]=0set udg_Tcb_Real[i]=0set udg_Anl_Real[i]=0set udg_Anl_Int[i]=0
set udg_Wes_Real[i]=0set udg_Mti_Real[i]=0set udg_Nrt_Real[i]=0set udg_Ggs_Real[i]=0set udg_Kin_Real[i]=0set udg_Bug_Return[i]=falseset udg_Bug_ReturnAlive[i]=false
set udg_Hnm_Real[i]=0set udg_Inv_Real[i]=0set udg_Inv_Int[i]=0
set udg_Dhf_Real[i]=0set udg_Dhf_Int[i]=0
set udg_Hho_Real[i]=0set udg_Hik_Real[i]=0set udg_Hik_Int[i]=0
set udg_Hdb_Real[i]=0set udg_Eti_Real[i]=0set udg_Ffb_Real[i]=0set udg_Ffb_Int[i]=0
set udg_Cge_Real[i]=0set udg_Hii_Real[i]=0set udg_Hii_Int[i]=0
set udg_Dsd_Real[i]=0set udg_Csd_Real[i]=0set udg_Gse_Real[i]=0set udg_Sad_Real[i]=0set udg_Coe_Real[i]=0set udg_Amp_Real[i]=0set udg_Uvp_Real[i]=0set udg_Pdn_Real[i]=0set udg_Czj_Real[i]=0set udg_Czj_Speed[i]=0set udg_Kds_Real[i]=0set udg_Jog_Real[i]=0set udg_Jog_Int[i]=0
set udg_Vri_Real[i]=0set udg_Mmg_Int[i]=0
set udg_Rgo_Real[i]=0set udg_Weather_Stack[i]=0set udg_C1_Int[i]=0set udg_C1_Real[i]=0
set udg_C12_RealLoc[i]=0
set udg_C12_Real[i]=0set udg_C3_Real[i]=0
set udg_C4_Real[i]=0
set udg_C0_Real[i]=0
set udg_C13_Real[i]=0set udg_Cin_Int[i]=0
set udg_Cin_RealLoc[i]=0
set udg_Cin_Real[i]=0set udg_Cin_Dmg[i]=0
set udg_Kjd_Int[i]=0
set udg_Hws_Real[i]=0set udg_Bwt_Real[i]=0set udg_Czs_Real[i]=0set udg_Hsm_Real[i]=0set udg_Ptk_Real[i]=0set udg_Csh_Real[i]=0set udg_Csh_Int[i]=0
set udg_Lsh_Real[i]=0set udg_Wdg_Real[i]=0set udg_Gvj_Real[i]=0set udg_Gvj_Int[i]=0
set udg_Flb_Real[i]=0set udg_Flw_Real[i]=0set udg_Flo_Real[i]=0set udg_Tpk_Real[i]=0set udg_Rog_Real[i]=0set udg_Rog_XY[i]=0set udg_Rog_Int[i]=0
set udg_Player_PermanentBonus[i]=0set udg_Kot_Real[i]=0set udg_Kmo_Real[i]=0set udg_Shs_Real[i]=0set udg_Shs_Group[i]=CreateGroup()set udg_Iah_Real[i]=0set udg_Iah_X[i]=0set udg_Iah_Y[i]=0set udg_Iah_Int[i]=0
set udg_Wlv_Int[i]=0
set udg_Wlv_Real[i]=0set udg_Ing_Real[i]=0set udg_Ing_Int[i]=0
set udg_Ryu_Real[i]=0set udg_Mgo_Real[i]=0set udg_Wgf_Real[i]=0set udg_Wgf_Int[i]=0
set udg_Wmk_Real[i]=0set udg_Wmk_Int[i]=0
set udg_Wdm_Real[i]=0set udg_Dial_Real[i]=0set udg_Hoq_Real[i]=0set udg_Lsc_XY[i]=0set udg_Lsc_Real[i]=0set udg_Teleport_UnitX[i]=0set udg_Teleport_UnitY[i]=0set udg_Cje_Real[i]=0set udg_Cje_XY[i]=0set udg_Wvf_Real[i]=0set udg_Wvf_XY[i]=0set udg_Wdj_Real[i]=0set udg_Wdj_XY[i]=0set udg_Www_Real[i]=0set udg_Pkc_Real[i]=0set udg_Pkc_XY[i]=0set udg_Gvs_Int[i]=0
set udg_Gvs_Real[i]=0set udg_Fgr_Int[i]=0
set udg_Fgr_Real[i]=0set udg_Fgr_XY[i]=0set udg_Tbi_Real[i]=0set udg_Tbi_XY[i]=0set udg_Tnh_Buff[i]=0set udg_Aoi_Int[i]=0
set udg_Aoi_Real[i]=0set udg_Aoi_XY[i]=0set udg_Tso_Int[i]=0
set udg_Tso_Real[i]=0set udg_Tso_XY[i]=0set udg_Ush_Real[i]=0set udg_Gvs_XY[i]=0set udg_Cpt_Real[i]=0set udg_SoundPatch_List_Bleach[i]=""
set udg_SoundPatch_List_Naruto[i]=""
set udg_SoundPatch_List_OnePiece[i]=""set udg_SoundPatch_List_Wc3[i]=""set udg_CounterSpin_Ability[i]=0
set udg_WindWalk_Ability[i]=0set udg_Fnm_Int[i]=0
set udg_Fnm_Real[i]=0set i=i+1endloopset udg_Searing_Group=CreateGroup()set udg_Hogyoku_G=CreateGroup()set udg_Fgt_Group=CreateGroup()set udg_Gat_Group=CreateGroup()set udg_Gat_Group2=CreateGroup()
set udg_Rdw_Group=CreateGroup()set udg_Lrs_Group=CreateGroup()set udg_BossTimer=CreateTimer()set udg_Timer_SuperCreeps=CreateTimer()set udg_Kill_Timer1=CreateTimer()set udg_Trs_Group=CreateGroup()set udg_Smt_Group=CreateGroup()set udg_Hkr_Group=CreateGroup()set udg_Hkr_Group2=CreateGroup()
set udg_Ykd_Group=CreateGroup()set udg_Ykd_Group2=CreateGroup()
set udg_Sph_Group2=CreateGroup()
set udg_Tmk_Group=CreateGroup()set udg_Tmk_Group2=CreateGroup()
set udg_Gkn_Group2=CreateGroup()
set udg_Dot_Group=CreateGroup()set udg_Osg_Group=CreateGroup()set udg_Osg_Group5=CreateGroup()
set udg_Osg_Group4=CreateGroup()
set udg_Osg_Group3=CreateGroup()
set udg_Osg_Group2=CreateGroup()
set udg_Osg_Group7=CreateGroup()
set udg_Osg_Group6=CreateGroup()
set udg_Lao_Group=CreateGroup()set udg_Ets_Group=CreateGroup()set udg_Lrt_Group=CreateGroup()set udg_Tbt_Group=CreateGroup()set udg_Scs_Group=CreateGroup()set udg_Tlt_Group2=CreateGroup()
set udg_Tlt_Group=CreateGroup()set udg_Tlt_Group3=CreateGroup()
set udg_Rkb_Group=CreateGroup()set udg_Lib_Group=CreateGroup()set udg_Kml_Group=CreateGroup()set udg_Kml_Group2=CreateGroup()
set udg_Lie_Group=CreateGroup()set udg_Lie_Group2=CreateGroup()
set udg_Lrg_Group=CreateGroup()set udg_Sda_Group=CreateGroup()set udg_Sda_Group2=CreateGroup()
set udg_Sgr_Group2=CreateGroup()
set udg_Sgr_Group=CreateGroup()set udg_Qff_Group=CreateGroup()set udg_Seg_Group=CreateGroup()set udg_Abe_Group=CreateGroup()set udg_Abe_Group2=CreateGroup()
set udg_Ipf_Group3=CreateGroup()
set udg_Ipf_Group=CreateGroup()set udg_Ipf_Group2=CreateGroup()
set udg_Ipf_Group4=CreateGroup()
set udg_Eth_Group=CreateGroup()set udg_Eth_Group2=CreateGroup()
set udg_Rti_Group2=CreateGroup()
set udg_Rti_Group3=CreateGroup()
set udg_Rti_Group=CreateGroup()set udg_Bkg_Group=CreateGroup()set udg_Bkg_Group2=CreateGroup()
set udg_Hns_Group=CreateGroup()set udg_Hns_Group2=CreateGroup()
set udg_ShakeTimer1=CreateTimer()set udg_DummyCheckerGroup=CreateGroup()set udg_DummyCheckDisplay=CreateGroup()set udg_Game_Timer=CreateTimer()
set udg_Timer_Mode=CreateTimer()
set udg_Timer_Creep=CreateTimer()set udg_Duel_Team1=CreateGroup()
set udg_Duel_Team2=CreateGroup()
set udg_Leave_Group=CreateGroup()set udg_Duel_DummyTeam1=CreateGroup()set udg_Duel_DummyTeam2=CreateGroup()set udg_Timer_DuelReal=CreateTimer()
set udg_Kill_Timer2=CreateTimer()set udg_Kill_Timer3=CreateTimer()set udg_Kill_Timer4=CreateTimer()set udg_Kill_Timer5=CreateTimer()set udg_Kill_Timer6=CreateTimer()set udg_Kill_Timer7=CreateTimer()set udg_Kill_Timer8=CreateTimer()set udg_Kill_Timer9=CreateTimer()set udg_Kill_Timer10=CreateTimer()set udg_Kill_Timer11=CreateTimer()set udg_Kill_Timer12=CreateTimer()set udg_End_GroupDummy=CreateGroup()
set udg_End_Group=CreateGroup()set udg_ShakeTimer2=CreateTimer()set udg_ShakeTimer3=CreateTimer()set udg_ShakeTimer4=CreateTimer()set udg_ShakeTimer5=CreateTimer()set udg_ShakeTimer6=CreateTimer()set udg_ShakeTimer7=CreateTimer()set udg_ShakeTimer8=CreateTimer()set udg_ShakeTimer9=CreateTimer()set udg_ShakeTimer10=CreateTimer()set udg_ShakeTimer11=CreateTimer()set udg_ShakeTimer12=CreateTimer()set udg_End_DialogWin=DialogCreate()
set udg_End_DialogLose=DialogCreate()set udg_Home_RegenTimer=CreateTimer()set udg_Creep_SpawnTimer=CreateTimer()set udg_Golem_Timer=CreateTimer()set udg_AI_Team1=CreateGroup()set udg_AI_Team2=CreateGroup()set udg_AI_Timer=CreateTimer()set udg_Timer_Duel=CreateTimer()
set udg_Etp_Group=CreateGroup()set udg_Ipf_GroupShake=CreateGroup()
set udg_Tcb_Group=CreateGroup()set udg_Tcb_Group2=CreateGroup()
set udg_Srl_Group=CreateGroup()set udg_Anl_Group1=CreateGroup()
set udg_Anl_GroupHakke=CreateGroup()
set udg_Anl_Group2=CreateGroup()
set udg_Anl_Group=CreateGroup()set udg_Mti_GroupDummy=CreateGroup()
set udg_Mti_Group=CreateGroup()set udg_Nrt_Group=CreateGroup()set udg_Nrt_GroupFly=CreateGroup()set udg_Gks_Group=CreateGroup()set udg_Gks_Group2=CreateGroup()
set udg_Kin_GroupDummy=CreateGroup()
set udg_Kin_Group=CreateGroup()set udg_Kin_Group2=CreateGroup()
set udg_Kin_Group3=CreateGroup()
set udg_Isk_Group=CreateGroup()set udg_Isk_GroupShake=CreateGroup()
set udg_Cof_Group=CreateGroup()set udg_Hnm_Group=CreateGroup()set udg_Hnm_Group2=CreateGroup()
set udg_Inv_Group=CreateGroup()set udg_Inv_Group2=CreateGroup()
set udg_Dhf_Group=CreateGroup()set udg_Dhf_Group2=CreateGroup()
set udg_Hho_Group=CreateGroup()set udg_Hho_GroupDummy=CreateGroup()
set udg_Hik_Group=CreateGroup()set udg_Hik_Group2=CreateGroup()
set udg_Hdb_Group=CreateGroup()set udg_Hdb_Group2=CreateGroup()
set udg_Eti_Group=CreateGroup()set udg_Ffb_Group2=CreateGroup()
set udg_Ffb_GroupFire=CreateGroup()set udg_Ffb_Group=CreateGroup()set udg_Cge_Group=CreateGroup()set udg_Hii_Group=CreateGroup()set udg_Dsd_Group2=CreateGroup()
set udg_Dsd_Group=CreateGroup()set udg_Gse_Group=CreateGroup()set udg_Sad_Group=CreateGroup()set udg_Sad_Group2=CreateGroup()
set udg_Coe_Group=CreateGroup()set udg_Coe_GroupShake=CreateGroup()
set udg_Amp_Group=CreateGroup()set udg_Amp_Group2=CreateGroup()
set udg_Uvp_Group=CreateGroup()set udg_Rkj_Group=CreateGroup()set udg_Rkj_Group2=CreateGroup()
set udg_Pdn_Group=CreateGroup()set udg_Pdn_GroupDummy=CreateGroup()
set udg_Czj_Group=CreateGroup()set udg_Kds_Group=CreateGroup()set udg_Kds_Group2=CreateGroup()
set udg_Jog_Group=CreateGroup()set udg_Vri_Group=CreateGroup()set udg_Rgo_Group=CreateGroup()set udg_C1_Group=CreateGroup()set udg_C1_GroupDummy=CreateGroup()set udg_C12_Group=CreateGroup()set udg_C3_Group=CreateGroup()set udg_C4_Group=CreateGroup()set udg_C4_Group2=CreateGroup()set udg_C0_Group=CreateGroup()set udg_Fsw_Group=CreateGroup()set udg_Cin_Group=CreateGroup()set udg_Cin_GroupDummy=CreateGroup()
set udg_Cin_Group2=CreateGroup()
set udg_Cin_GroupTake=CreateGroup()set udg_Kjd_GroupAtk=CreateGroup()set udg_Kjd_GroupDummy=CreateGroup()
set udg_Kjd_Group=CreateGroup()set udg_Timer_DuelWarning=CreateTimer()set udg_Tjr_Group=CreateGroup()set udg_Hws_Group=CreateGroup()set udg_Hws_Group2=CreateGroup()
set udg_Hws_GroupDummy=CreateGroup()
set udg_Hws_GroupShake=CreateGroup()
set udg_Czs_Group=CreateGroup()set udg_Ptk_Group=CreateGroup()set udg_Ptk_Group2=CreateGroup()
set udg_Csh_Group=CreateGroup()set udg_Wdg_Group=CreateGroup()set udg_Gvj_GroupDummy=CreateGroup()
set udg_Gvj_GroupDummy2=CreateGroup()set udg_Gvj_Group2=CreateGroup()
set udg_Gvj_GroupMove=CreateGroup()set udg_Gvj_GroupShake=CreateGroup()
set udg_Gvj_GroupDmg=CreateGroup()set udg_Flb_Group=CreateGroup()set udg_Flb_Group2=CreateGroup()
set udg_Flw_Group=CreateGroup()set udg_Tpk_Group=CreateGroup()set udg_Tpk_Group2=CreateGroup()
set udg_Kot_Group=CreateGroup()set udg_Kot_Group2=CreateGroup()
set udg_Kmo_Group=CreateGroup()set udg_Kmo_Group2=CreateGroup()
set udg_Shs_Group2=CreateGroup()
set udg_Iah_GroupDummy=CreateGroup()
set udg_Iah_GroupPush=CreateGroup()set udg_Iah_GroupDmg=CreateGroup()set udg_Mgh_Group=CreateGroup()set udg_Ing_Group=CreateGroup()set udg_Ryu_Group=CreateGroup()set udg_Ryu_GroupDummy=CreateGroup()
set udg_Wgf_Group=CreateGroup()set udg_Wgf_GroupDummy=CreateGroup()
set udg_Wgf_Group2=CreateGroup()
set udg_Wmk_GroupDummy=CreateGroup()
set udg_Wmk_Group=CreateGroup()set udg_Wdm_Group=CreateGroup()set udg_Wdm_GroupDummy=CreateGroup()
set udg_Kml_GroupDummy=CreateGroup()
set udg_Dial_Group=CreateGroup()
set udg_Dial_Group2=CreateGroup()set udg_Pdn_Group2=CreateGroup()
set udg_Lsc_Group=CreateGroup()set udg_Lsc_Group2=CreateGroup()
set udg_Cje_GroupDummy=CreateGroup()
set udg_Wvf_Group2=CreateGroup()
set udg_Pkc_Group=CreateGroup()set udg_Pkc_Group2=CreateGroup()
set udg_Pkc_GroupShake=CreateGroup()
set udg_BerserkerBlood_GroupDelay=CreateGroup()set udg_Gvs_Group=CreateGroup()set udg_GravityBlade_Group=CreateGroup()
set udg_Fgr_Group=CreateGroup()set udg_Fgr_GroupShake=CreateGroup()
set udg_Tbi_Group=CreateGroup()set udg_Tbi_Group2=CreateGroup()
set udg_Tbi_GroupDummy=CreateGroup()
set udg_TnhA_Group=CreateGroup()
set udg_Aoi_GroupDummy=CreateGroup()
set udg_Aoi_Timer=CreateTimer()set udg_Divine_Group=CreateGroup()set udg_SoundPatch_EnableGroup=CreateForce()
set udg_CounterSpin_Group=CreateGroup()set udg_Fnm_Group2=CreateGroup()
set udg_Fnm_Group3=CreateGroup()
set gg_trg_Initialization1=CreateTrigger()call TriggerAddAction(gg_trg_Initialization1,function Trig_Initialization1_Actions)set gg_trg_Initalization2=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Initalization2,udg_Timer_Mode)call TriggerAddAction(gg_trg_Initalization2,function Trig_Initalization2_Actions)set gg_trg_Initalization3=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Initalization3,udg_Timer_Creep)call TriggerAddAction(gg_trg_Initalization3,function Trig_Initalization3_Actions)set gg_trg_Global_Variables=CreateTrigger()call TriggerAddAction(gg_trg_Global_Variables,function Trig_Global_Variables_Actions)set gg_trg_Game_Score=CreateTrigger()call TriggerAddAction(gg_trg_Game_Score,function Trig_Game_Score_Actions)set gg_trg_Hero_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Hero_Setup,function Trig_Hero_Setup_Actions)set gg_trg_Teleport_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Teleport_Setup,function Trig_TeleportSetup_Actions)
set gg_trg_Player_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Player_Setup,function Trig_Player_Setup_Actions)set gg_trg_Creep_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Creep_Setup,function Trig_Creep_Setup_Actions)set gg_trg_Golem_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Golem_Setup,function Trig_Golem_Setup_Actions)set gg_trg_Blue_Staff_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Blue_Staff_Setup,function Trig_Blue_Staff_Setup_Actions)set gg_trg_Music_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Music_Setup,function Trig_Music_Setup_Actions)set gg_trg_Sound_Setup=CreateTrigger()call TriggerAddAction(gg_trg_Sound_Setup,function Trig_Sound_Setup_Actions)set gg_trg_Preload_System=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Preload_System,.5)call TriggerAddAction(gg_trg_Preload_System,function Trig_Preload_System_Actions)set gg_trg_Terrain_Set=CreateTrigger()call TriggerAddAction(gg_trg_Terrain_Set,function TerrainSys_Act)set gg_trg_Restore_Tree=CreateTrigger()call TriggerAddAction(gg_trg_Restore_Tree,function Trig_Restore_Tree_Actions)set gg_trg_VisionStart1=CreateTrigger()call TriggerAddAction(gg_trg_VisionStart1,function Trig_VisionStart1_Actions)set gg_trg_VisionStart2=CreateTrigger()call TriggerAddAction(gg_trg_VisionStart2,function VisionStart2_Act)
set gg_trg_Board=CreateTrigger()
call TriggerAddAction(gg_trg_Board,function Trig_Board_Actions)set gg_trg_Board_Update=CreateTrigger()call DisableTrigger(gg_trg_Board_Update)
call TriggerRegisterTimerExpireEvent(gg_trg_Board_Update,udg_Game_Timer)
call TriggerAddAction(gg_trg_Board_Update,function Trig_Board_Update_Actions)set p=Player(0)set gg_trg_Mode_On=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ar",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ar",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ne",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ne",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-bh",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"bh",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-fh",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"fh",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-sc",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"sc",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-ds",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"ds",false)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-max",true)call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"max",false)call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"-e1",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Mode_On,p,"e1",false)
call TriggerAddAction(gg_trg_Mode_On,function Trig_Mode_On_Actions)set p=nullset gg_trg_Mode_Checker=CreateTrigger()call TriggerAddAction(gg_trg_Mode_Checker,function Trig_GameModeSys_Actions)
set gg_trg_All_Random=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_All_Random,Player(0),"-ar",true)call TriggerRegisterPlayerChatEvent(gg_trg_All_Random,Player(0),"ar",false)call TriggerAddCondition(gg_trg_All_Random,Condition(function Trig_All_Random_Cond))
call TriggerAddAction(gg_trg_All_Random,function Trig_All_Random_Actions)set gg_trg_No_Event=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_No_Event,Player(0),"-ne",true)call TriggerRegisterPlayerChatEvent(gg_trg_No_Event,Player(0),"ne",false)call TriggerAddCondition(gg_trg_No_Event,Condition(function Trig_No_Event_Conditions))call TriggerAddAction(gg_trg_No_Event,function Trig_No_Event_Actions)set gg_trg_BountyHunter=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunter,Player(0),"-bh",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunter,Player(0),"bh",false)call TriggerAddCondition(gg_trg_BountyHunter,Condition(function Trig_BountyHunter_Conditions))call TriggerAddAction(gg_trg_BountyHunter,function Trig_BountyHunter_Actions)set gg_trg_BountyHunterSet=CreateTrigger()call DisableTrigger(gg_trg_BountyHunterSet)call TriggerRegisterAnyUnitEventBJ(gg_trg_BountyHunterSet,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_BountyHunterSet,Condition(function Trig_BountyHunterSet_Conditions))
call TriggerAddAction(gg_trg_BountyHunterSet,function Trig_BountyHunterSet_Actions)set gg_trg_BountyHunterRun=CreateTrigger()call DisableTrigger(gg_trg_BountyHunterRun)call TriggerRegisterAnyUnitEventBJ(gg_trg_BountyHunterRun,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_BountyHunterRun,Condition(function Trig_BountyHunterRun_Conditions))
call TriggerAddAction(gg_trg_BountyHunterRun,function Trig_BountyHunterRun_Actions)set gg_trg_BountyHunterCheck=CreateTrigger()
call DisableTrigger(gg_trg_BountyHunterCheck)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(0),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(1),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(2),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(3),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(4),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(5),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(6),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(7),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(8),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player(9),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player($A),"-b",true)call TriggerRegisterPlayerChatEvent(gg_trg_BountyHunterCheck,Player($B),"-b",true)call TriggerAddAction(gg_trg_BountyHunterCheck,function Trig_BountyHunterCheck_Actions)set gg_trg_Fast_Hunt=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Fast_Hunt,Player(0),"-fh",true)call TriggerRegisterPlayerChatEvent(gg_trg_Fast_Hunt,Player(0),"fh",false)call TriggerAddCondition(gg_trg_Fast_Hunt,Condition(function Trig_Fast_Hunt_Conditions))
call TriggerAddAction(gg_trg_Fast_Hunt,function Trig_Fast_Hunt_Actions)set gg_trg_SuperCreep=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_SuperCreep,Player(0),"-sc",true)call TriggerRegisterPlayerChatEvent(gg_trg_SuperCreep,Player(0),"sc",false)call TriggerAddCondition(gg_trg_SuperCreep,Condition(function Trig_SuperCreep_Conditions))call TriggerAddAction(gg_trg_SuperCreep,function Trig_SuperCreep_Actions)set gg_trg_ScSpawn=CreateTrigger()call DisableTrigger(gg_trg_ScSpawn)call TriggerRegisterTimerExpireEvent(gg_trg_ScSpawn,udg_Timer_SuperCreeps)call TriggerAddAction(gg_trg_ScSpawn,function Trig_ScSpawn_Actions)set gg_trg_ScDie=CreateTrigger()
call DisableTrigger(gg_trg_ScDie)call TriggerRegisterAnyUnitEventBJ(gg_trg_ScDie,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_ScDie,Condition(function ScDie_Cond))call TriggerAddAction(gg_trg_ScDie,function ScDie_Act)set gg_trg_DoubleScore=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_DoubleScore,Player(0),"-ds",true)
call TriggerRegisterPlayerChatEvent(gg_trg_DoubleScore,Player(0),"ds",false)
call TriggerAddCondition(gg_trg_DoubleScore,Condition(function Trig_DoubleScore_Conditions))
call TriggerAddAction(gg_trg_DoubleScore,function Trig_DoubleScore_Actions)set gg_trg_Maximum_Score=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Maximum_Score,Player(0),"-max",true)call TriggerRegisterPlayerChatEvent(gg_trg_Maximum_Score,Player(0),"max",false)call TriggerAddCondition(gg_trg_Maximum_Score,Condition(function Trig_Maximum_Score_Conditions))
call TriggerAddAction(gg_trg_Maximum_Score,function Trig_Maximum_Score_Actions)set gg_trg_Event_1v1=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Event_1v1,Player(0),"-e1",true)call TriggerRegisterPlayerChatEvent(gg_trg_Event_1v1,Player(0),"e1",false)call TriggerAddCondition(gg_trg_Event_1v1,Condition(function Trig_Event_1v1_Conditions))
call TriggerAddAction(gg_trg_Event_1v1,function Trig_Event_1v1_Actions)set gg_trg_Pick=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_Pick,gg_rct_HeroSelection)call TriggerAddAction(gg_trg_Pick,function Trig_Pick_Actions)set gg_trg_Random=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(0),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(1),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(2),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(3),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(4),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(5),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(6),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(7),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(8),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player(9),"-random",true)call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player($A),"-random",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Random,Player($B),"-random",true)
call DisableTrigger(gg_trg_Random)call TriggerAddCondition(gg_trg_Random,Condition(function Random_Cond))call TriggerAddAction(gg_trg_Random,function Random_Run)
set gg_trg_Repick=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(0),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(1),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(2),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(3),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(4),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(5),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(6),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(7),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(8),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player(9),"-repick",true)call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player($A),"-repick",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Repick,Player($B),"-repick",true)
call TriggerAddCondition(gg_trg_Repick,Condition(function Repick_Cond))call TriggerAddAction(gg_trg_Repick,function Repick_Run)
set gg_trg_AI_Blink=CreateTrigger()call TriggerAddAction(gg_trg_AI_Blink,function Trig_AI_Blink_Actions)set gg_trg_AI_Run=CreateTrigger()call TriggerAddAction(gg_trg_AI_Run,function Trig_AI_Run_Actions)set gg_trg_AI_Start=CreateTrigger()call TriggerAddAction(gg_trg_AI_Start,function Trig_AI_Start_Actions)set gg_trg_AI_Action=CreateTrigger()
call TriggerRegisterTimerExpireEvent(gg_trg_AI_Action,udg_AI_Timer)call TriggerAddCondition(gg_trg_AI_Action,Condition(function Trig_AI_Action_Conditions))
call TriggerAddAction(gg_trg_AI_Action,function Trig_AI_Action_Actions)set gg_trg_AI_Return_1=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Return_1,gg_rct_Side_Team_1)call TriggerAddCondition(gg_trg_AI_Return_1,Condition(function Trig_AI_Return_1_Conditions))
call TriggerAddAction(gg_trg_AI_Return_1,function Trig_AI_Return_1_Actions)set gg_trg_AI_Return_2=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Return_2,gg_rct_Side_Team_2)call TriggerAddCondition(gg_trg_AI_Return_2,Condition(function Trig_AI_Return_2_Conditions))
call TriggerAddAction(gg_trg_AI_Return_2,function Trig_AI_Return_2_Actions)set gg_trg_AI_Duel=CreateTrigger()call DisableTrigger(gg_trg_AI_Duel)call TriggerRegisterTimerEventPeriodic(gg_trg_AI_Duel,1.)call TriggerAddAction(gg_trg_AI_Duel,function Trig_AI_Duel_Actions)set gg_trg_AI_Item=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_AI_Item,gg_rct_Home_1)call TriggerRegisterEnterRectSimple(gg_trg_AI_Item,gg_rct_Home_2)call TriggerAddCondition(gg_trg_AI_Item,Condition(function Trig_AI_Item_Conditions))
call TriggerAddAction(gg_trg_AI_Item,function Trig_AI_Item_Actions)set gg_trg_Teleport_Run=CreateTrigger()call TriggerAddAction(gg_trg_Teleport_Run,function Trig_Teleport_Run_Actions)set Teleport_TL=CreateTrigger()set Teleport_BL=CreateTrigger()set Teleport_TR=CreateTrigger()set Teleport_BR=CreateTrigger()set Teleport_C=CreateTrigger()set MyArea=40.call TriggerRegisterUnitInRangeSimple(Teleport_TL,MyArea,gg_unit_n004_0024)call TriggerRegisterUnitInRangeSimple(Teleport_TL,MyArea,gg_unit_n004_0032)call TriggerAddCondition(Teleport_TL,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_TL,function Teleport_TL_Act)call TriggerRegisterUnitInRangeSimple(Teleport_BL,MyArea,gg_unit_n004_0026)call TriggerRegisterUnitInRangeSimple(Teleport_BL,MyArea,gg_unit_n004_0033)call TriggerAddCondition(Teleport_BL,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_BL,function Teleport_BL_Act)call TriggerRegisterUnitInRangeSimple(Teleport_TR,MyArea,gg_unit_n004_0029)call TriggerRegisterUnitInRangeSimple(Teleport_TR,MyArea,gg_unit_n004_0031)call TriggerAddCondition(Teleport_TR,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_TR,function Teleport_TR_Act)call TriggerRegisterUnitInRangeSimple(Teleport_BR,MyArea,gg_unit_n004_0028)call TriggerRegisterUnitInRangeSimple(Teleport_BR,MyArea,gg_unit_n004_0030)call TriggerAddCondition(Teleport_BR,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_BR,function Teleport_BR_Act)call TriggerRegisterUnitInRangeSimple(Teleport_C,MyArea,gg_unit_n004_0027)call TriggerRegisterUnitInRangeSimple(Teleport_C,MyArea,gg_unit_n004_0034)call TriggerAddCondition(Teleport_C,Condition(function Teleport_Cond))call TriggerAddAction(Teleport_C,function Teleport_C_Act)set gg_trg_Duel_Warning=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Duel_Warning,udg_Timer_DuelWarning)call TriggerAddAction(gg_trg_Duel_Warning,function Trig_Duel_Warning_Actions)set gg_trg_Duel=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Duel,udg_Timer_Duel)
call TriggerAddCondition(gg_trg_Duel,Condition(function Trig_Duel_Cond))
call TriggerAddAction(gg_trg_Duel,function Trig_Duel_Actions)set gg_trg_Duel_Invul=CreateTrigger()call DisableTrigger(gg_trg_Duel_Invul)call TriggerRegisterTimerEventPeriodic(gg_trg_Duel_Invul,.4)
call TriggerAddAction(gg_trg_Duel_Invul,function Trig_Duel_Invul_Actions)set gg_trg_Duel_Vul=CreateTrigger()call TriggerAddAction(gg_trg_Duel_Vul,function Trig_Duel_Vul_Actions)set gg_trg_Duel_Kill=CreateTrigger()
call DisableTrigger(gg_trg_Duel_Kill)call TriggerRegisterAnyUnitEventBJ(gg_trg_Duel_Kill,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Duel_Kill,Condition(function Trig_Duel_Kill_Conditions))
call TriggerAddAction(gg_trg_Duel_Kill,function Trig_Duel_Kill_Actions)set gg_trg_Duel_OverTime=CreateTrigger()
call DisableTrigger(gg_trg_Duel_OverTime)call TriggerRegisterTimerExpireEvent(gg_trg_Duel_OverTime,udg_Timer_DuelReal)call TriggerAddAction(gg_trg_Duel_OverTime,function Trig_Duel_OverTime_Actions)set gg_trg_Duel_Move=CreateTrigger()
call TriggerAddAction(gg_trg_Duel_Move,function Duel_Move_Actions)set gg_trg_Atk_Disable=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Atk_Disable,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddAction(gg_trg_Atk_Disable,function Trig_Atk_Disable_Actions)set gg_trg_Kill=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Kill,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Kill,Condition(function Trig_Kill_Conditions))call TriggerAddAction(gg_trg_Kill,function Trig_Kill_Actions)set gg_trg_First_Blood=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_First_Blood,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_First_Blood,Condition(function Trig_First_Blood_Conditions))
call TriggerAddAction(gg_trg_First_Blood,function Trig_First_Blood_Actions)set gg_trg_Lvup=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lvup,EVENT_PLAYER_HERO_LEVEL)call TriggerAddCondition(gg_trg_Lvup,Condition(function Trig_Lvup_Conditions))call TriggerAddAction(gg_trg_Lvup,function Trig_Lvup_Actions)set Kill_Countdown[0]=CreateTrigger()set Kill_Countdown[1]=CreateTrigger()set Kill_Countdown[2]=CreateTrigger()set Kill_Countdown[3]=CreateTrigger()set Kill_Countdown[4]=CreateTrigger()set Kill_Countdown[5]=CreateTrigger()set Kill_Countdown[6]=CreateTrigger()set Kill_Countdown[7]=CreateTrigger()set Kill_Countdown[8]=CreateTrigger()set Kill_Countdown[9]=CreateTrigger()set Kill_Countdown[$A]=CreateTrigger()set Kill_Countdown[$B]=CreateTrigger()call TriggerRegisterTimerExpireEvent(Kill_Countdown[0],udg_Kill_Timer1)call TriggerRegisterTimerExpireEvent(Kill_Countdown[1],udg_Kill_Timer2)call TriggerRegisterTimerExpireEvent(Kill_Countdown[2],udg_Kill_Timer3)call TriggerRegisterTimerExpireEvent(Kill_Countdown[3],udg_Kill_Timer4)call TriggerRegisterTimerExpireEvent(Kill_Countdown[4],udg_Kill_Timer5)call TriggerRegisterTimerExpireEvent(Kill_Countdown[5],udg_Kill_Timer6)call TriggerRegisterTimerExpireEvent(Kill_Countdown[6],udg_Kill_Timer7)call TriggerRegisterTimerExpireEvent(Kill_Countdown[7],udg_Kill_Timer8)call TriggerRegisterTimerExpireEvent(Kill_Countdown[8],udg_Kill_Timer9)call TriggerRegisterTimerExpireEvent(Kill_Countdown[9],udg_Kill_Timer10)
call TriggerRegisterTimerExpireEvent(Kill_Countdown[$A],udg_Kill_Timer11)call TriggerRegisterTimerExpireEvent(Kill_Countdown[$B],udg_Kill_Timer12)call TriggerAddAction(Kill_Countdown[0],function Kill_Trig1)
call TriggerAddAction(Kill_Countdown[1],function Kill_Trig2)
call TriggerAddAction(Kill_Countdown[2],function Kill_Trig3)
call TriggerAddAction(Kill_Countdown[3],function Kill_Trig4)
call TriggerAddAction(Kill_Countdown[4],function Kill_Trig5)
call TriggerAddAction(Kill_Countdown[5],function Kill_Trig6)
call TriggerAddAction(Kill_Countdown[6],function Kill_Trig7)
call TriggerAddAction(Kill_Countdown[7],function Kill_Trig8)
call TriggerAddAction(Kill_Countdown[8],function Kill_Trig9)
call TriggerAddAction(Kill_Countdown[9],function Kill_Trig10)call TriggerAddAction(Kill_Countdown[$A],function Kill_Trig11)call TriggerAddAction(Kill_Countdown[$B],function Kill_Trig12)set gg_trg_Revive=CreateTrigger()call TriggerAddAction(gg_trg_Revive,function Trig_Revive_Actions)set gg_trg_Home_Set=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Home_Set,1.)
call TriggerAddAction(gg_trg_Home_Set,function Trig_Home_Set_Actions)set gg_trg_Home_Regen=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Home_Regen,udg_Home_RegenTimer)call TriggerAddAction(gg_trg_Home_Regen,function Trig_Home_Regen_Actions)set gg_trg_Remove_Regen=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Remove_Regen,gg_rct_Home_1)call TriggerRegisterLeaveRectSimple(gg_trg_Remove_Regen,gg_rct_Home_2)call TriggerAddCondition(gg_trg_Remove_Regen,Condition(function Trig_Remove_Regen_Conditions))call TriggerAddAction(gg_trg_Remove_Regen,function Trig_Remove_Regen_Actions)set gg_trg_Home1_Kill=CreateTrigger()call TriggerRegisterEnterRectSimple(gg_trg_Home1_Kill,gg_rct_Home_1)
call TriggerAddCondition(gg_trg_Home1_Kill,Condition(function Trig_Home1_Kill_Conditions))call TriggerAddAction(gg_trg_Home1_Kill,function Trig_Home1_Kill_Actions)set gg_trg_Home2_Kil=CreateTrigger()
call TriggerRegisterEnterRectSimple(gg_trg_Home2_Kil,gg_rct_Home_2)call TriggerAddCondition(gg_trg_Home2_Kil,Condition(function Trig_Home2_Kill_Conditions))call TriggerAddAction(gg_trg_Home2_Kil,function Trig_Home2_Kill_Actions)
set gg_trg_Leavegame=CreateTrigger()
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(0))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(1))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(2))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(3))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(4))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(5))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(6))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(7))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(8))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player(9))
call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player($A))call TriggerRegisterPlayerEventLeave(gg_trg_Leavegame,Player($B))call TriggerAddAction(gg_trg_Leavegame,function Trig_Leavegame_Actions)set gg_trg_Remove_Unit=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Unit,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Remove_Unit,Condition(function Trig_RemoveUnit_Conditions))call TriggerAddAction(gg_trg_Remove_Unit,function Trig_RemoveUnit_Actions)set gg_trg_Golem_Spawn=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Golem_Spawn,udg_Golem_Timer)
call TriggerAddAction(gg_trg_Golem_Spawn,function Trig_Golem_Spawn_Actions)set gg_trg_Golem_Leave=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Golem_Leave,gg_rct_Golem)
call TriggerAddCondition(gg_trg_Golem_Leave,Condition(function Trig_Golem_Leave_Conditions))
call TriggerAddAction(gg_trg_Golem_Leave,function Trig_Golem_Leave_Actions)set gg_trg_Golem_Die=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Golem_Die,EVENT_PLAYER_UNIT_DEATH)
call TriggerAddCondition(gg_trg_Golem_Die,Condition(function Golem_Die_Cond))call TriggerAddAction(gg_trg_Golem_Die,function Trig_Golem_Die_Actions)set gg_trg_Golem_Final=CreateTrigger()call DisableTrigger(gg_trg_Golem_Final)call TriggerRegisterAnyUnitEventBJ(gg_trg_Golem_Final,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Golem_Final,Condition(function Trig_Golem_Final_Conditions))
call TriggerAddAction(gg_trg_Golem_Final,function Trig_Golem_Final_Actions)set gg_trg_Boss_Setup=CreateTrigger()call TriggerRegisterTimerExpireEvent(gg_trg_Boss_Setup,udg_BossTimer)call TriggerAddAction(gg_trg_Boss_Setup,function Trig_BossSetup_Actions)
set gg_trg_Boss_Spawn=CreateTrigger()call DisableTrigger(gg_trg_Boss_Spawn)call TriggerRegisterAnyUnitEventBJ(gg_trg_Boss_Spawn,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Boss_Spawn,Condition(function Trig_BossSpawn_Conditions))call TriggerAddAction(gg_trg_Boss_Spawn,function Trig_BossSpawn_Actions)
set gg_trg_Boss_BackL=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Boss_BackL,gg_rct_BossLeft)call TriggerAddCondition(gg_trg_Boss_BackL,Condition(function Trig_BossBackL_Conditions))call TriggerAddAction(gg_trg_Boss_BackL,function Trig_BossBackL_Actions)
set gg_trg_Boss_BackR=CreateTrigger()call TriggerRegisterLeaveRectSimple(gg_trg_Boss_BackR,gg_rct_BossRight)call TriggerAddCondition(gg_trg_Boss_BackR,Condition(function Trig_BossBackR_Conditions))call TriggerAddAction(gg_trg_Boss_BackR,function Trig_BossBackR_Actions)
set gg_trg_FinalBoss_Ability1=CreateTrigger()call TriggerAddCondition(gg_trg_FinalBoss_Ability1,Condition(function Trig_FinalBoss_Ability1_Conditions))call TriggerAddAction(gg_trg_FinalBoss_Ability1,function Trig_FinalBoss_Ability1_Actions)set gg_trg_FinalBoss_Ability2=CreateTrigger()call TriggerAddCondition(gg_trg_FinalBoss_Ability2,Condition(function Trig_FinalBoss_Ability2_Conditions))call TriggerAddAction(gg_trg_FinalBoss_Ability2,function Trig_FinalBoss_Ability2_Actions)set gg_trg_FinalBoss=CreateTrigger()
call TriggerAddAction(gg_trg_FinalBoss,function Trig_FinalBoss_Actions)set gg_trg_Gate_Boss=CreateTrigger()
call TriggerRegisterUnitInRangeSimple(gg_trg_Gate_Boss,70.,gg_unit_n01Y_0097)call TriggerAddCondition(gg_trg_Gate_Boss,Condition(function Trig_Gate_Boss_Conditions))
call TriggerAddAction(gg_trg_Gate_Boss,function Trig_Gate_Boss_Actions)set gg_trg_Gate_Boss_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Gate_Boss_Back,70.,gg_unit_n00Q_0020)call TriggerAddCondition(gg_trg_Gate_Boss_Back,Condition(function GateTeleportCond))
call TriggerAddAction(gg_trg_Gate_Boss_Back,function Trig_Gate_Boss_Back_Actions)set gg_trg_Forgot_Init=CreateTrigger()call TriggerAddAction(gg_trg_Forgot_Init,function Trig_Forgot_Init_Actions)set gg_trg_Forgot_Boss=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Forgot_Boss,70.,gg_unit_n01Y_0099)call TriggerAddCondition(gg_trg_Forgot_Boss,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Forgot_Boss,function Trig_Forgot_Boss_Actions)set gg_trg_Forgot_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Forgot_Back,70.,gg_unit_n00Q_0100)call TriggerAddCondition(gg_trg_Forgot_Back,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Forgot_Back,function Trig_Forgot_Back_Actions)set gg_trg_Forgot_Die=CreateTrigger()call TriggerAddAction(gg_trg_Forgot_Die,function Trig_Forgot_Die_Actions)set gg_trg_Divine_Init=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Divine_Init,10.)
call TriggerAddAction(gg_trg_Divine_Init,function Trig_Divine_Init_Actions)set gg_trg_Divine_Warp=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Divine_Warp,100.,gg_unit_n01C_0098)
call TriggerAddCondition(gg_trg_Divine_Warp,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Divine_Warp,function Trig_DivineWarp_Actions)set gg_trg_DivineSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_DivineSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_DivineSword,Condition(function Trig_DivineSword_Conditions))
call TriggerAddAction(gg_trg_DivineSword,function Trig_DivineSword_Actions)set gg_trg_Divine_Back=CreateTrigger()call TriggerRegisterUnitInRangeSimple(gg_trg_Divine_Back,70.,gg_unit_n00Q_0019)call TriggerAddCondition(gg_trg_Divine_Back,Condition(function GateTeleportCond))call TriggerAddAction(gg_trg_Divine_Back,function Trig_Divine_Back_Actions)set gg_trg_Divine_Death=CreateTrigger()call DisableTrigger(gg_trg_Divine_Death)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Divine_Death,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_Divine_Death,Condition(function Trig_Divine_Death_Conditions))set gg_trg_Bonus_Gold=CreateTrigger()call TriggerRegisterTimerEventSingle(gg_trg_Bonus_Gold,660.)
call TriggerAddAction(gg_trg_Bonus_Gold,function Trig_Bonus_Gold_Actions)set gg_trg_Item_Stacking=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Item_Stacking,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Item_Stacking,Condition(function Item_Stacking_Cond))call TriggerAddAction(gg_trg_Item_Stacking,function Item_Stacking_Actions)set gg_trg_Remove_Item=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Item,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Remove_Item,Condition(function Trig_Remove_Item_Conditions))
call TriggerAddAction(gg_trg_Remove_Item,function Trig_Remove_Item_Actions)set gg_trg_Permanent_Bonus=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Permanent_Bonus,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Permanent_Bonus,Condition(function Trig_Permanent_Bonus_Conditions))
call TriggerAddAction(gg_trg_Permanent_Bonus,function Trig_Permanent_Bonus_Actions)set gg_trg_RegenRune=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_RegenRune,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RegenRune,Condition(function Trig_RegenRune_Conditions))
call TriggerAddAction(gg_trg_RegenRune,function Trig_RegenRune_Actions)set gg_trg_Fuison=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fuison,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(gg_trg_Fuison,function Trig_Fuison_Actions)set gg_trg_Fusion2=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fusion2,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_Fusion2,function Trig_Fusion2_Actions)set gg_trg_Fusion3=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fusion3,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddAction(gg_trg_Fusion3,function Trig_Fusion3_Actions)set gg_trg_DagonActive=CreateTrigger()call TriggerAddCondition(gg_trg_DagonActive,Condition(function Trig_DagonActive_Conditions))
call TriggerAddAction(gg_trg_DagonActive,function Trig_DagonActive_Actions)set gg_trg_HexActive=CreateTrigger()
call TriggerAddCondition(gg_trg_HexActive,Condition(function Trig_HexActive_Conditions))
call TriggerAddAction(gg_trg_HexActive,function Trig_HexActive_Actions)set gg_trg_DiffusalActive=CreateTrigger()call TriggerAddCondition(gg_trg_DiffusalActive,Condition(function Trig_DiffusalActive_Conditions))call TriggerAddAction(gg_trg_DiffusalActive,function Trig_DiffusalActive_Actions)set gg_trg_DoomSearing=CreateTrigger()set gg_trg_Spiritual=CreateTrigger()
call TriggerAddCondition(gg_trg_Spiritual,Condition(function Trig_Spiritual_Conditions))
call TriggerAddAction(gg_trg_Spiritual,function Trig_Spiritual_Actions)set gg_trg_Frostmourne_Stack=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Stack,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Frostmourne_Stack,Condition(function Trig_Frostmourne_Stack_Conditions))
call TriggerAddAction(gg_trg_Frostmourne_Stack,function Trig_Frostmourne_Stack_Actions)set gg_trg_Frostmourne_Remove=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Remove,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Frostmourne_Remove,Condition(function Trig_Frostmourne_Remove_Conditions))call TriggerAddAction(gg_trg_Frostmourne_Remove,function Trig_Frostmourne_Remove_Actions)set gg_trg_Frostmourne_Attack=CreateTrigger()call DisableTrigger(gg_trg_Frostmourne_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Frostmourne_Attack,Condition(function Trig_Frostmourne_Attack_Conditions))call TriggerAddAction(gg_trg_Frostmourne_Attack,function Trig_Frostmourne_Attack_Actions)set gg_trg_Orb_of_Frost_Stack=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Stack,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Orb_of_Frost_Stack,Condition(function Trig_Orb_of_Frost_Stack_Conditions))call TriggerAddAction(gg_trg_Orb_of_Frost_Stack,function Trig_Orb_of_Frost_Stack_Actions)set gg_trg_Orb_of_Frost_Remove=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Remove,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Orb_of_Frost_Remove,Condition(function Trig_Orb_of_Frost_Remove_Conditions))
call TriggerAddAction(gg_trg_Orb_of_Frost_Remove,function Trig_Orb_of_Frost_Remove_Actions)set gg_trg_Orb_of_Frost_Attack=CreateTrigger()call DisableTrigger(gg_trg_Orb_of_Frost_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Orb_of_Frost_Attack,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Orb_of_Frost_Attack,Condition(function Trig_OrbOfFrost_Attack_Conditions))call TriggerAddAction(gg_trg_Orb_of_Frost_Attack,function Trig_OrbOfFrost_Attack_Actions)set gg_trg_Shop5_Upgrade=CreateTrigger()
call TriggerAddAction(gg_trg_Shop5_Upgrade,function Trig_Shop5_Upgrade_Actions)set gg_trg_Space_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Space_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Space_Boots,Condition(function Trig_Space_Boots_Conditions))
call TriggerAddAction(gg_trg_Space_Boots,function Trig_Space_Boots_Actions)set gg_trg_Natural_Boots=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Natural_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Natural_Boots,Condition(function Trig_Natural_Boots_Conditions))
call TriggerAddAction(gg_trg_Natural_Boots,function Trig_Natural_Boots_Actions)set gg_trg_Heavy_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Heavy_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Heavy_Boots,Condition(function Trig_Heavy_Boots_Conditions))
call TriggerAddAction(gg_trg_Heavy_Boots,function Trig_Heavy_Boots_Actions)set gg_trg_Fire_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fire_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Fire_Boots,Condition(function Trig_Fire_Boots_Conditions))call TriggerAddAction(gg_trg_Fire_Boots,function Trig_Fire_Boots_Actions)set gg_trg_Adventure_Boots=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Adventure_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Adventure_Boots,Condition(function Trig_Adventure_Boots_Conditions))
call TriggerAddAction(gg_trg_Adventure_Boots,function Trig_Adventure_Boots_Actions)set gg_trg_Red_Boots=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Red_Boots,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Red_Boots,Condition(function Trig_Red_Boots_Conditions))
call TriggerAddAction(gg_trg_Red_Boots,function Trig_Red_Boots_Actions)set gg_trg_Helm_Battle_Thirst=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Helm_Battle_Thirst,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Helm_Battle_Thirst,Condition(function Helm_Battle_Thirst_Conditions))call TriggerAddAction(gg_trg_Helm_Battle_Thirst,function Helm_Battle_Thirst_Actions)
set gg_trg_God_Sphere=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_God_Sphere,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_God_Sphere,Condition(function Trig_God_Sphere_Conditions))call TriggerAddAction(gg_trg_God_Sphere,function Trig_God_Sphere_Actions)set gg_trg_Arcanite_Shield=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Arcanite_Shield,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Arcanite_Shield,Condition(function Trig_Arcanite_Shield_Conditions))
call TriggerAddAction(gg_trg_Arcanite_Shield,function Trig_Arcanite_Shield_Actions)set gg_trg_Frostmourne=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Frostmourne,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Frostmourne,Condition(function Trig_Frostmourne_Conditions))
call TriggerAddAction(gg_trg_Frostmourne,function Trig_Frostmourne_Actions)set gg_trg_Blood_Sword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Blood_Sword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Blood_Sword,Condition(function Trig_Blood_Sword_Conditions))
call TriggerAddAction(gg_trg_Blood_Sword,function Trig_Blood_Sword_Actions)set gg_trg_Corrupted_Desolator=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Corrupted_Desolator,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Corrupted_Desolator,Condition(function Trig_Corrupted_Desolator_Conditions))
call TriggerAddAction(gg_trg_Corrupted_Desolator,function Trig_Corrupted_Desolator_Actions)set gg_trg_Zanbato=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Zanbato,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Zanbato,Condition(function Trig_Zanbato_Conditions))
call TriggerAddAction(gg_trg_Zanbato,function Trig_Zanbato_Actions)set gg_trg_EyeSkadi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_EyeSkadi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_EyeSkadi,Condition(function Trig_EyeSkadi_Conditions))call TriggerAddAction(gg_trg_EyeSkadi,function Trig_EyeSkadi_Actions)set gg_trg_TheHeaven=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_TheHeaven,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_TheHeaven,Condition(function Trig_TheHeaven_Conditions))
call TriggerAddAction(gg_trg_TheHeaven,function Trig_TheHeaven_Actions)set gg_trg_Hogyoku=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Hogyoku,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Hogyoku,Condition(function Trig_Hogyoku_Conditions))
call TriggerAddAction(gg_trg_Hogyoku,function Trig_Hogyoku_Actions)set gg_trg_Hex=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Hex,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Hex,Condition(function Trig_Hex_Conditions))
call TriggerAddAction(gg_trg_Hex,function Trig_Hex_Actions)set gg_trg_Monkey=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Monkey,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Monkey,Condition(function Trig_Monkey_Conditions))call TriggerAddAction(gg_trg_Monkey,function Trig_Monkey_Actions)set gg_trg_HellCrusher=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HellCrusher,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_HellCrusher,Condition(function Trig_HellCrusher_Conditions))
call TriggerAddAction(gg_trg_HellCrusher,function Trig_HellCrusher_Actions)set gg_trg_UltimaSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_UltimaSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_UltimaSword,Condition(function Trig_UltimaSword_Conditions))
call TriggerAddAction(gg_trg_UltimaSword,function Trig_UltimaSword_Actions)set gg_trg_MysticStaff=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_MysticStaff,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_MysticStaff,Condition(function Trig_MysticStaff_Conditions))
call TriggerAddAction(gg_trg_MysticStaff,function Trig_MysticStaff_Actions)set gg_trg_Assault=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Assault,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Assault,Condition(function Trig_Assault_Conditions))
call TriggerAddAction(gg_trg_Assault,function Trig_Assault_Actions)set gg_trg_HyperStone=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HyperStone,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_HyperStone,Condition(function Trig_HyperStone_Conditions))call TriggerAddAction(gg_trg_HyperStone,function Trig_HyperStone_Actions)set gg_trg_AncientFigurine=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_AncientFigurine,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_AncientFigurine,Condition(function Trig_AncientFigurine_Conditions))
call TriggerAddAction(gg_trg_AncientFigurine,function Trig_AncientFigurine_Actions)set gg_trg_Maximillian=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Maximillian,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Maximillian,Condition(function Trig_Maximillian_Conditions))
call TriggerAddAction(gg_trg_Maximillian,function Trig_Maximillian_Actions)set gg_trg_TheRedButterfly=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_TheRedButterfly,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_TheRedButterfly,Condition(function Trig_TheRedButterfly_Conditions))
call TriggerAddAction(gg_trg_TheRedButterfly,function Trig_TheRedButterfly_Actions)set gg_trg_SilverHelm=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SilverHelm,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_SilverHelm,Condition(function Trig_SilverHelm_Conditions))call TriggerAddAction(gg_trg_SilverHelm,function Trig_SilverHelm_Actions)set gg_trg_Excalibur=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Excalibur,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Excalibur,Condition(function Trig_Excalibur_Conditions))
call TriggerAddAction(gg_trg_Excalibur,function Trig_Excalibur_Actions)set gg_trg_Evasion=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Evasion,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Evasion,Condition(function Trig_Evasion_Conditions))
call TriggerAddAction(gg_trg_Evasion,function Trig_Evasion_Actions)set gg_trg_Quarterstaff=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Quarterstaff,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Quarterstaff,Condition(function Trig_Quarterstaff_Conditions))call TriggerAddAction(gg_trg_Quarterstaff,function Trig_Quarterstaff_Actions)set gg_trg_Dagon=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Dagon,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Dagon,Condition(function Trig_Dagon_Conditions))
call TriggerAddAction(gg_trg_Dagon,function Trig_Dagon_Actions)set gg_trg_UltimateOrb=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_UltimateOrb,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_UltimateOrb,Condition(function Trig_UltimateOrb_Conditions))
call TriggerAddAction(gg_trg_UltimateOrb,function Trig_UltimateOrb_Actions)set gg_trg_Linken=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Linken,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Linken,Condition(function Trig_Linken_Conditions))call TriggerAddAction(gg_trg_Linken,function Trig_Linken_Actions)set gg_trg_Satanic=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Satanic,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Satanic,Condition(function Trig_Satanic_Conditions))
call TriggerAddAction(gg_trg_Satanic,function Trig_Satanic_Actions)set gg_trg_Heart=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Heart,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Heart,Condition(function Trig_Heart_Conditions))
call TriggerAddAction(gg_trg_Heart,function Trig_Heart_Actions)set gg_trg_Messerschmid=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Messerschmid,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Messerschmid,Condition(function Trig_Messerschmid_Conditions))call TriggerAddAction(gg_trg_Messerschmid,function Trig_Messerschmid_Actions)set gg_trg_Radiance=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Radiance,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Radiance,Condition(function Trig_Radiance_Conditions))call TriggerAddAction(gg_trg_Radiance,function Trig_Radiance_Actions)set gg_trg_SacredRelic=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SacredRelic,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_SacredRelic,Condition(function Trig_SacredRelic_Conditions))
call TriggerAddAction(gg_trg_SacredRelic,function Trig_SacredRelic_Actions)set gg_trg_BoosSpeed=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BoosSpeed,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BoosSpeed,Condition(function Trig_BoosSpeed_Conditions))
call TriggerAddAction(gg_trg_BoosSpeed,function Trig_BoosSpeed_Actions)set gg_trg_GloveHaste=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_GloveHaste,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_GloveHaste,Condition(function Trig_GloveHaste_Conditions))call TriggerAddAction(gg_trg_GloveHaste,function Trig_GloveHaste_Actions)set gg_trg_MithrilHammer=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MithrilHammer,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_MithrilHammer,Condition(function Trig_MithrilHammer_Conditions))
call TriggerAddAction(gg_trg_MithrilHammer,function Trig_MithrilHammer_Actions)set gg_trg_MaelStrom=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_MaelStrom,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_MaelStrom,Condition(function Trig_MaelStrom_Conditions))
call TriggerAddAction(gg_trg_MaelStrom,function Trig_MaelStrom_Actions)set gg_trg_DemonEdge=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_DemonEdge,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_DemonEdge,Condition(function Trig_DemonEdge_Conditions))
call TriggerAddAction(gg_trg_DemonEdge,function Trig_DemonEdge_Actions)set gg_trg_Buriza=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Buriza,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Buriza,Condition(function Trig_Buriza_Conditions))call TriggerAddAction(gg_trg_Buriza,function Trig_Buriza_Actions)set gg_trg_Lothar=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lothar,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Lothar,Condition(function Trig_Lothar_Conditions))call TriggerAddAction(gg_trg_Lothar,function Trig_Lothar_Actions)set gg_trg_Eaglehorn=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Eaglehorn,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Eaglehorn,Condition(function Trig_Eaglehorn_Conditions))
call TriggerAddAction(gg_trg_Eaglehorn,function Trig_Eaglehorn_Actions)set gg_trg_PointBooster=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_PointBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_PointBooster,Condition(function Trig_PointBooster_Conditions))call TriggerAddAction(gg_trg_PointBooster,function Trig_PointBooster_Actions)set gg_trg_VitBooster=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_VitBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_VitBooster,Condition(function Trig_VitBooster_Conditions))call TriggerAddAction(gg_trg_VitBooster,function Trig_VitBooster_Actions)set gg_trg_Shield=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Shield,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Shield,Condition(function Trig_Shield_Conditions))call TriggerAddAction(gg_trg_Shield,function Trig_Shield_Actions)set gg_trg_Planeswalker=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Planeswalker,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Planeswalker,Condition(function Trig_Planeswalker_Conditions))call TriggerAddAction(gg_trg_Planeswalker,function Trig_Planeswalker_Actions)set gg_trg_HelmIronWill=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_HelmIronWill,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_HelmIronWill,Condition(function Trig_HelmIronWill_Conditions))call TriggerAddAction(gg_trg_HelmIronWill,function Trig_HelmIronWill_Actions)set gg_trg_ChainMail=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_ChainMail,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_ChainMail,Condition(function Trig_ChainMail_Conditions))
call TriggerAddAction(gg_trg_ChainMail,function Trig_ChainMail_Actions)set gg_trg_BladeMail=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeMail,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeMail,Condition(function Trig_BladeMail_Conditions))
call TriggerAddAction(gg_trg_BladeMail,function Trig_BladeMail_Actions)set gg_trg_BroadSword=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BroadSword,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BroadSword,Condition(function Trig_BroadSword_Conditions))call TriggerAddAction(gg_trg_BroadSword,function Trig_BroadSword_Actions)set gg_trg_BladeAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeAtk,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeAtk,Condition(function Trig_BladeAtk_Conditions))call TriggerAddAction(gg_trg_BladeAtk,function Trig_BladeAtk_Actions)set gg_trg_Crystalys=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Crystalys,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Crystalys,Condition(function Trig_Crystalys_Conditions))
call TriggerAddAction(gg_trg_Crystalys,function Trig_Crystalys_Actions)set gg_trg_Berserk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Berserk,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Berserk,Condition(function Trig_Berserk_Conditions))
call TriggerAddAction(gg_trg_Berserk,function Trig_Berserk_Actions)set gg_trg_MaskofDeath=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_MaskofDeath,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_MaskofDeath,Condition(function Trig_MaskofDeath_Conditions))
call TriggerAddAction(gg_trg_MaskofDeath,function Trig_MaskofDeath_Actions)set gg_trg_Vladmi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Vladmi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Vladmi,Condition(function Trig_Vladmi_Conditions))call TriggerAddAction(gg_trg_Vladmi,function Trig_Vladmi_Actions)set gg_trg_Diffusal=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Diffusal,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Diffusal,Condition(function Trig_Diffusal_Conditions))call TriggerAddAction(gg_trg_Diffusal,function Trig_Diffusal_Actions)set gg_trg_StaffWizard=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_StaffWizard,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_StaffWizard,Condition(function Trig_StaffWizard_Conditions))
call TriggerAddAction(gg_trg_StaffWizard,function Trig_StaffWizard_Actions)set gg_trg_BladeAgi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BladeAgi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BladeAgi,Condition(function Trig_BladeAgi_Conditions))call TriggerAddAction(gg_trg_BladeAgi,function Trig_BladeAgi_Actions)set gg_trg_OrgeAxe=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_OrgeAxe,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_OrgeAxe,Condition(function Trig_OrgeAxe_Conditions))
call TriggerAddAction(gg_trg_OrgeAxe,function Trig_OrgeAxe_Actions)set gg_trg_Searing=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Searing,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Searing,Condition(function Trig_Searing_Conditions))
call TriggerAddAction(gg_trg_Searing,function Trig_Searing_Actions)set gg_trg_Sange=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Sange,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Sange,Condition(function Trig_Sange_Conditions))
call TriggerAddAction(gg_trg_Sange,function Trig_Sange_Actions)set gg_trg_Yasha=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_Yasha,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Yasha,Condition(function Trig_Yasha_Conditions))
call TriggerAddAction(gg_trg_Yasha,function Trig_Yasha_Actions)set gg_trg_EnergyBooster=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_EnergyBooster,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_EnergyBooster,Condition(function Trig_EnergyBooster_Conditions))
call TriggerAddAction(gg_trg_EnergyBooster,function Trig_EnergyBooster_Actions)set gg_trg_SobiMask=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_SobiMask,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_SobiMask,Condition(function Trig_SobiMask_Conditions))call TriggerAddAction(gg_trg_SobiMask,function Trig_SobiMask_Actions)set gg_trg_RingProtect=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RingProtect,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_RingProtect,Condition(function Trig_RingProtect_Conditions))
call TriggerAddAction(gg_trg_RingProtect,function Trig_RingProtect_Actions)set gg_trg_RobeMagi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RobeMagi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RobeMagi,Condition(function Trig_RobeMagi_Conditions))call TriggerAddAction(gg_trg_RobeMagi,function Trig_RobeMagi_Actions)set gg_trg_BootsAgi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BootsAgi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_BootsAgi,Condition(function Trig_BootsAgi_Conditions))call TriggerAddAction(gg_trg_BootsAgi,function Trig_BootsAgi_Actions)set gg_trg_BeltStr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_BeltStr,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_BeltStr,Condition(function Trig_BeltStr_Conditions))
call TriggerAddAction(gg_trg_BeltStr,function Trig_BeltStr_Actions)set gg_trg_GiantStr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_GiantStr,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_GiantStr,Condition(function Trig_GiantStr_Conditions))call TriggerAddAction(gg_trg_GiantStr,function Trig_GiantStr_Actions)set gg_trg_Slipper=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Slipper,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Slipper,Condition(function Trig_Slipper_Conditions))
call TriggerAddAction(gg_trg_Slipper,function Trig_Slipper_Actions)set gg_trg_Mantle=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Mantle,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Mantle,Condition(function Trig_Mantle_Conditions))call TriggerAddAction(gg_trg_Mantle,function Trig_Mantle_Actions)set gg_trg_Circlet=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Circlet,EVENT_PLAYER_UNIT_PICKUP_ITEM)
call TriggerAddCondition(gg_trg_Circlet,Condition(function Trig_Circlet_Conditions))
call TriggerAddAction(gg_trg_Circlet,function Trig_Circlet_Actions)set gg_trg_VoidStone=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_VoidStone,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_VoidStone,Condition(function Trig_VoidStone_Conditions))
call TriggerAddAction(gg_trg_VoidStone,function Trig_VoidStone_Actions)set gg_trg_RingHealth=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_RingHealth,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_RingHealth,Condition(function Trig_RingHealth_Conditions))call TriggerAddAction(gg_trg_RingHealth,function Trig_RingHealth_Actions)set gg_trg_Ultimate_Upgrade=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Ultimate_Upgrade,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(gg_trg_Ultimate_Upgrade,Condition(function Scept_UpgradeCheck))
call TriggerAddAction(gg_trg_Ultimate_Upgrade,function Ultimate_Upgrade_Act)
set gg_trg_Remove_Upgrade=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Remove_Upgrade,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(gg_trg_Remove_Upgrade,Condition(function Scept_UpgradeCheck))call TriggerAddAction(gg_trg_Remove_Upgrade,function Remove_Upgrade_Act)
set gg_trg_Ms_Show=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(0),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(1),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(2),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(3),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(4),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(5),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(6),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(7),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(8),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player(9),"-ms",true)
call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player($A),"-ms",true)call TriggerRegisterPlayerChatEvent(gg_trg_Ms_Show,Player($B),"-ms",true)call TriggerAddAction(gg_trg_Ms_Show,function Trig_Ms_Show_Actions)set gg_trg_CameraNormal=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(0),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(1),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(2),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(3),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(4),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(5),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(6),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(7),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(8),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player(9),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player($A),"-cn",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraNormal,Player($B),"-cn",true)call TriggerAddAction(gg_trg_CameraNormal,function Trig_CameraNormal_Actions)set gg_trg_CameraHigh=CreateTrigger()call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(0),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(1),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(2),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(3),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(4),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(5),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(6),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(7),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(8),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player(9),"-ch",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player($A),"-ch",true)
call TriggerRegisterPlayerChatEvent(gg_trg_CameraHigh,Player($B),"-ch",true)
call TriggerAddAction(gg_trg_CameraHigh,function Trig_CameraHigh_Actions)set gg_trg_CameraLow=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(0),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(1),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(2),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(3),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(4),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(5),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(6),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(7),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(8),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player(9),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player($A),"-cl",true)call TriggerRegisterPlayerChatEvent(gg_trg_CameraLow,Player($B),"-cl",true)call TriggerAddAction(gg_trg_CameraLow,function Trig_CameraLow_Actions)set gg_trg_Clear=CreateTrigger()
call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(0),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(1),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(2),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(3),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(4),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(5),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(6),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(7),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(8),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player(9),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player($A),"-clear",true)call TriggerRegisterPlayerChatEvent(gg_trg_Clear,Player($B),"-clear",true)call TriggerAddAction(gg_trg_Clear,function Trig_Clear_Actions)call InitTrig_Music_Command()call InitTrig_SoundPatch_Enable()call InitTrig_SoundPatch_Disable()set gg_trg_End_Skill=CreateTrigger()
call TriggerRegisterAnyUnitEventBJ(gg_trg_End_Skill,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_End_Skill,Condition(function Trig_End_Skill_Conditions))
call TriggerAddAction(gg_trg_End_Skill,function Trig_End_Skill_Actions)set gg_trg_End_Dialog=CreateTrigger()call TriggerRegisterDialogEvent(gg_trg_End_Dialog,udg_End_DialogWin)
call TriggerRegisterDialogEvent(gg_trg_End_Dialog,udg_End_DialogLose)call TriggerAddAction(gg_trg_End_Dialog,function Trig_End_Dialog_Actions)set StopShake[0]=CreateTrigger()
set StopShake[1]=CreateTrigger()
set StopShake[2]=CreateTrigger()
set StopShake[3]=CreateTrigger()
set StopShake[4]=CreateTrigger()
set StopShake[5]=CreateTrigger()
set StopShake[6]=CreateTrigger()
set StopShake[7]=CreateTrigger()
set StopShake[8]=CreateTrigger()
set StopShake[9]=CreateTrigger()
set StopShake[$A]=CreateTrigger()set StopShake[$B]=CreateTrigger()call TriggerRegisterTimerExpireEvent(StopShake[0],udg_ShakeTimer1)call TriggerRegisterTimerExpireEvent(StopShake[1],udg_ShakeTimer2)call TriggerRegisterTimerExpireEvent(StopShake[2],udg_ShakeTimer3)call TriggerRegisterTimerExpireEvent(StopShake[3],udg_ShakeTimer4)call TriggerRegisterTimerExpireEvent(StopShake[4],udg_ShakeTimer5)call TriggerRegisterTimerExpireEvent(StopShake[5],udg_ShakeTimer6)call TriggerRegisterTimerExpireEvent(StopShake[6],udg_ShakeTimer7)call TriggerRegisterTimerExpireEvent(StopShake[7],udg_ShakeTimer8)call TriggerRegisterTimerExpireEvent(StopShake[8],udg_ShakeTimer9)call TriggerRegisterTimerExpireEvent(StopShake[9],udg_ShakeTimer10)call TriggerRegisterTimerExpireEvent(StopShake[$A],udg_ShakeTimer11)
call TriggerRegisterTimerExpireEvent(StopShake[$B],udg_ShakeTimer12)
call TriggerAddAction(StopShake[0],function Trig_StopShake1)
call TriggerAddAction(StopShake[1],function Trig_StopShake2)
call TriggerAddAction(StopShake[2],function Trig_StopShake3)
call TriggerAddAction(StopShake[3],function Trig_StopShake4)
call TriggerAddAction(StopShake[4],function Trig_StopShake5)
call TriggerAddAction(StopShake[5],function Trig_StopShake6)
call TriggerAddAction(StopShake[6],function Trig_StopShake7)
call TriggerAddAction(StopShake[7],function Trig_StopShake8)
call TriggerAddAction(StopShake[8],function Trig_StopShake9)
call TriggerAddAction(StopShake[9],function Trig_StopShake10)call TriggerAddAction(StopShake[$A],function Trig_StopShake11)call TriggerAddAction(StopShake[$B],function Trig_StopShake12)call InitTrig_Return()set gg_trg_Skill_Point_Manage=CreateTrigger()call TriggerAddAction(gg_trg_Skill_Point_Manage,function Trig_Skill_Point_Manage_Actions)set gg_trg_Destroy_AI=CreateTrigger()call TriggerAddAction(gg_trg_Destroy_AI,function Trig_Destroy_Function_Actions)set gg_trg_Blink1=CreateTrigger()call TriggerAddCondition(gg_trg_Blink1,Condition(function Trig_Blink1_Conditions))call TriggerAddAction(gg_trg_Blink1,function Trig_Blink1)set gg_trg_Blink2=CreateTrigger()call TriggerAddCondition(gg_trg_Blink2,Condition(function Blink_Cond))call TriggerAddAction(gg_trg_Blink2,function Blink_Act)set gg_trg_Cero=CreateTrigger()call TriggerAddCondition(gg_trg_Cero,Condition(function Trig_Cero_Conditions))call TriggerAddAction(gg_trg_Cero,function Trig_Cero_Actions)set gg_trg_Fgt_Init=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Fgt_Init,EVENT_PLAYER_HERO_SKILL)call TriggerAddCondition(gg_trg_Fgt_Init,Condition(function Trig_Fgt_Init_Conditions))call TriggerAddAction(gg_trg_Fgt_Init,function Trig_Fgt_Init_Actions)set gg_trg_Fgt=CreateTrigger()call TriggerAddCondition(gg_trg_Fgt,Condition(function Trig_Fgt_Conditions))
call TriggerAddAction(gg_trg_Fgt,function Trig_Fgt_Actions)set gg_trg_FgtAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_FgtAtk,EVENT_PLAYER_UNIT_ATTACKED)
call DisableTrigger(gg_trg_FgtAtk)call TriggerAddCondition(gg_trg_FgtAtk,Condition(function Trig_FgtAtk_Conditions))call TriggerAddAction(gg_trg_FgtAtk,function Trig_FgtAtk_Actions)set gg_trg_FgtDeath=CreateTrigger()call DisableTrigger(gg_trg_FgtDeath)
call TriggerAddCondition(gg_trg_FgtDeath,Condition(function Trig_FgtDeath_Conditions))call TriggerAddAction(gg_trg_FgtDeath,function Trig_FgtDeath_Actions)set gg_trg_Gat=CreateTrigger()call TriggerAddCondition(gg_trg_Gat,Condition(function Trig_Gat_Conditions))
call TriggerAddAction(gg_trg_Gat,function Trig_Gat_Actions)set gg_trg_GatL=CreateTrigger()call DisableTrigger(gg_trg_GatL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GatL,.08)call TriggerAddAction(gg_trg_GatL,function Trig_GatL_Actions)set gg_trg_GatC=CreateTrigger()call DisableTrigger(gg_trg_GatC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_GatC,EVENT_PLAYER_UNIT_SPELL_ENDCAST)call TriggerRegisterAnyUnitEventBJ(gg_trg_GatC,EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerAddCondition(gg_trg_GatC,Condition(function Trig_GatC_Conditions))call TriggerAddAction(gg_trg_GatC,function Trig_GatC_Actions)set gg_trg_Gear4_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Gear4_Init,Condition(function Trig_Gear4Init_Conditions))call TriggerAddAction(gg_trg_Gear4_Init,function Trig_Gear4Init_Actions)
set gg_trg_Gear4=CreateTrigger()
call TriggerAddCondition(gg_trg_Gear4,Condition(function Trig_Gear4_Conditions))
call TriggerAddAction(gg_trg_Gear4,function Trig_Gear4_Actions)set gg_trg_Rdw=CreateTrigger()call TriggerAddCondition(gg_trg_Rdw,Condition(function Trig_Rdw_Conditions))
call TriggerAddAction(gg_trg_Rdw,function Trig_Rdw_Actions)set gg_trg_Rdw2=CreateTrigger()call DisableTrigger(gg_trg_Rdw2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Rdw2,.04)call TriggerAddAction(gg_trg_Rdw2,function Trig_Rdw2_Actions)set gg_trg_RdwV=CreateTrigger()call DisableTrigger(gg_trg_RdwV)
call TriggerRegisterTimerEventPeriodic(gg_trg_RdwV,.05)call TriggerAddAction(gg_trg_RdwV,function Trig_RdwV_Actions)set gg_trg_Kkg=CreateTrigger()call TriggerAddCondition(gg_trg_Kkg,Condition(function Trig_Kkg_Conditions))
call TriggerAddAction(gg_trg_Kkg,function Trig_Kkg_Actions)set gg_trg_KkgL=CreateTrigger()call DisableTrigger(gg_trg_KkgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KkgL,.03)call TriggerAddAction(gg_trg_KkgL,function Trig_KkgL_Actions)set gg_trg_KkgS=CreateTrigger()call DisableTrigger(gg_trg_KkgS)
call TriggerRegisterTimerEventPeriodic(gg_trg_KkgS,.05)call TriggerAddAction(gg_trg_KkgS,function Trig_KkgS_Actions)set gg_trg_KkgS2=CreateTrigger()
call DisableTrigger(gg_trg_KkgS2)call TriggerRegisterTimerEventPeriodic(gg_trg_KkgS2,.04)
call TriggerAddAction(gg_trg_KkgS2,function Trig_KkgS2_Actions)set gg_trg_Lrs=CreateTrigger()call TriggerAddCondition(gg_trg_Lrs,Condition(function Trig_Lrs_Conditions))
call TriggerAddAction(gg_trg_Lrs,function Trig_Lrs_Actions)set gg_trg_LrsL=CreateTrigger()call DisableTrigger(gg_trg_LrsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrsL,.04)call TriggerAddAction(gg_trg_LrsL,function Trig_LrsL_Actions)set gg_trg_Jiton_RasenganC=CreateTrigger()call TriggerAddCondition(gg_trg_Jiton_RasenganC,Condition(function Trig_MrsC_Conditions))call TriggerAddAction(gg_trg_Jiton_RasenganC,function Trig_MrsC_Actions)
set gg_trg_Cbr=CreateTrigger()call TriggerAddCondition(gg_trg_Cbr,Condition(function Trig_Cbr_Conditions))
call TriggerAddAction(gg_trg_Cbr,function Trig_Cbr_Actions)set gg_trg_CbrS=CreateTrigger()call DisableTrigger(gg_trg_CbrS)
call TriggerRegisterTimerEventPeriodic(gg_trg_CbrS,.04)call TriggerAddAction(gg_trg_CbrS,function Trig_CbrS_Actions)set gg_trg_CbrL=CreateTrigger()call DisableTrigger(gg_trg_CbrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CbrL,.04)call TriggerAddAction(gg_trg_CbrL,function Trig_CbrL_Actions)set gg_trg_Trs=CreateTrigger()call TriggerAddCondition(gg_trg_Trs,Condition(function Trig_Trs_Conditions))
call TriggerAddAction(gg_trg_Trs,function Trig_Trs_Actions)set gg_trg_TrsL=CreateTrigger()call DisableTrigger(gg_trg_TrsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TrsL,.04)call TriggerAddAction(gg_trg_TrsL,function Trig_TrsL_Actions)set gg_trg_Smt=CreateTrigger()call TriggerAddCondition(gg_trg_Smt,Condition(function Trig_Smt_Conditions))
call TriggerAddAction(gg_trg_Smt,function Trig_Smt_Actions)set gg_trg_Hkr=CreateTrigger()call TriggerAddCondition(gg_trg_Hkr,Condition(function Trig_Hkr_Conditions))
call TriggerAddAction(gg_trg_Hkr,function Trig_Hkr_Actions)set gg_trg_HkrC=CreateTrigger()call DisableTrigger(gg_trg_HkrC)
call TriggerRegisterTimerEventPeriodic(gg_trg_HkrC,.04)call TriggerAddAction(gg_trg_HkrC,function Trig_HkrC_Actions)set gg_trg_HkrL=CreateTrigger()call DisableTrigger(gg_trg_HkrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HkrL,.1)call TriggerAddAction(gg_trg_HkrL,function Trig_HkrL_Actions)set gg_trg_HkrCancel=CreateTrigger()
call DisableTrigger(gg_trg_HkrCancel)call TriggerRegisterAnyUnitEventBJ(gg_trg_HkrCancel,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_HkrCancel,Condition(function Trig_HkrCancel_Conditions))
call TriggerAddAction(gg_trg_HkrCancel,function Trig_HkrCancel_Actions)set gg_trg_WhiteSword=CreateTrigger()call TriggerAddCondition(gg_trg_WhiteSword,Condition(function Trig_WhiteSword_Conditions))call TriggerAddAction(gg_trg_WhiteSword,function Trig_WhiteSword_Actions)set udg_AI_Trig[4]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[4],Condition(function AI_Zoro_Cond))call TriggerAddAction(udg_AI_Trig[4],function AI_Zoro_Act)set gg_trg_Ssn=CreateTrigger()call TriggerAddCondition(gg_trg_Ssn,Condition(function Trig_Ssn_Conditions))
call TriggerAddAction(gg_trg_Ssn,function Trig_Ssn_Actions)set gg_trg_Ykd=CreateTrigger()call TriggerAddCondition(gg_trg_Ykd,Condition(function Trig_Ykd_Conditions))
call TriggerAddAction(gg_trg_Ykd,function Trig_Ykd_Actions)set gg_trg_YkdL=CreateTrigger()call DisableTrigger(gg_trg_YkdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_YkdL,.04)call TriggerAddAction(gg_trg_YkdL,function Trig_YkdL_Actions)set gg_trg_Sph=CreateTrigger()call TriggerAddCondition(gg_trg_Sph,Condition(function Trig_Sph_Conditions))
call TriggerAddAction(gg_trg_Sph,function Trig_Sph_Actions)set gg_trg_SphL=CreateTrigger()call DisableTrigger(gg_trg_SphL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SphL,.06)call TriggerAddAction(gg_trg_SphL,function Trig_SphL_Actions)set gg_trg_Csp=CreateTrigger()call TriggerAddCondition(gg_trg_Csp,Condition(function Trig_Csp_Conditions))
call TriggerAddAction(gg_trg_Csp,function Trig_Csp_Actions)set gg_trg_CspL=CreateTrigger()call DisableTrigger(gg_trg_CspL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CspL,.05)call TriggerAddAction(gg_trg_CspL,function Trig_CspL_Actions)set gg_trg_Tmk=CreateTrigger()call TriggerAddCondition(gg_trg_Tmk,Condition(function Trig_Tmk_Conditions))
call TriggerAddAction(gg_trg_Tmk,function Trig_Tmk_Actions)set gg_trg_TmkR=CreateTrigger()call DisableTrigger(gg_trg_TmkR)
call TriggerRegisterTimerEventPeriodic(gg_trg_TmkR,.05)call TriggerAddAction(gg_trg_TmkR,function Trig_TmkR_Actions)set gg_trg_Sds=CreateTrigger()call TriggerAddCondition(gg_trg_Sds,Condition(function Trig_Sds_Conditions))
call TriggerAddAction(gg_trg_Sds,function Trig_Sds_Actions)set gg_trg_SdsL=CreateTrigger()call DisableTrigger(gg_trg_SdsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdsL,.04)call TriggerAddAction(gg_trg_SdsL,function Trig_SdsL_Actions)set gg_trg_SdsV=CreateTrigger()call DisableTrigger(gg_trg_SdsV)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdsV,.05)call TriggerAddAction(gg_trg_SdsV,function Trig_SdsV_Actions)set gg_trg_Amenotejikara=CreateTrigger()
call TriggerAddCondition(gg_trg_Amenotejikara,Condition(function Amenotejikara_Cond))call TriggerAddAction(gg_trg_Amenotejikara,function Amenotejikara_Act)set gg_trg_Sasuke_Genjutsu=CreateTrigger()call TriggerAddCondition(gg_trg_Sasuke_Genjutsu,Condition(function Sasuke_Genjutsu_Cond))call TriggerAddAction(gg_trg_Sasuke_Genjutsu,function Sasuke_Genjutsu_Act)set gg_trg_Gkn=CreateTrigger()call TriggerAddCondition(gg_trg_Gkn,Condition(function Trig_Gkn_Conditions))
call TriggerAddAction(gg_trg_Gkn,function Trig_Gkn_Actions)set gg_trg_GknL=CreateTrigger()call DisableTrigger(gg_trg_GknL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GknL,.04)call TriggerAddAction(gg_trg_GknL,function Trig_GknL_Actions)set gg_trg_GknD=CreateTrigger()call DisableTrigger(gg_trg_GknD)
call TriggerRegisterTimerEventPeriodic(gg_trg_GknD,.1)call TriggerAddAction(gg_trg_GknD,function Trig_GknD_Actions)set gg_trg_Dot=CreateTrigger()call TriggerAddCondition(gg_trg_Dot,Condition(function Trig_Dot_Conditions))
call TriggerAddAction(gg_trg_Dot,function Trig_Dot_Actions)set gg_trg_DotL=CreateTrigger()call DisableTrigger(gg_trg_DotL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DotL,.04)call TriggerAddAction(gg_trg_DotL,function Trig_DotL_Actions)set gg_trg_Sck=CreateTrigger()call TriggerAddCondition(gg_trg_Sck,Condition(function Trig_Sck_Conditions))
call TriggerAddAction(gg_trg_Sck,function Trig_Sck_Actions)set gg_trg_SckL=CreateTrigger()call DisableTrigger(gg_trg_SckL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SckL,.08)call TriggerAddAction(gg_trg_SckL,function Trig_SckL_Actions)set udg_AI_Trig[6]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[6],Condition(function AI_Sado_Cond))call TriggerAddAction(udg_AI_Trig[6],function AI_Sado_Act)set gg_trg_Osg=CreateTrigger()call TriggerAddCondition(gg_trg_Osg,Condition(function Trig_Osg_Conditions))
call TriggerAddAction(gg_trg_Osg,function Trig_Osg_Actions)set gg_trg_OsgL=CreateTrigger()call DisableTrigger(gg_trg_OsgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_OsgL,.04)call TriggerAddAction(gg_trg_OsgL,function Trig_OsgL_Actions)set gg_trg_Dsf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Dsf_Init,Condition(function Trig_Dsf_Init_Conditions))call TriggerAddAction(gg_trg_Dsf_Init,function Trig_Dsf_Init_Actions)set gg_trg_Dsf=CreateTrigger()call DisableTrigger(gg_trg_Dsf)call TriggerAddCondition(gg_trg_Dsf,Condition(function Dsf_Cond))call TriggerAddAction(gg_trg_Dsf,function Trig_Dsf_Actions)set gg_trg_BrazoDiablo=CreateTrigger()call TriggerAddCondition(gg_trg_BrazoDiablo,Condition(function Trig_BrazoDiablo_Conditions))
call TriggerAddAction(gg_trg_BrazoDiablo,function Trig_BrazoDiablo_Actions)set gg_trg_Ets=CreateTrigger()call TriggerAddCondition(gg_trg_Ets,Condition(function Trig_Ets_Conditions))
call TriggerAddAction(gg_trg_Ets,function Trig_Ets_Actions)set gg_trg_Tdh=CreateTrigger()call TriggerAddCondition(gg_trg_Tdh,Condition(function Trig_Tdh_Conditions))
call TriggerAddAction(gg_trg_Tdh,function Trig_Tdh_Actions)set gg_trg_TdhL=CreateTrigger()call DisableTrigger(gg_trg_TdhL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TdhL,.04)call TriggerAddAction(gg_trg_TdhL,function Trig_TdhL_Actions)set udg_AI_Trig[7]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[7],Condition(function AI_Nami_Cond))call TriggerAddAction(udg_AI_Trig[7],function AI_Nami_Act)set gg_trg_Lrt=CreateTrigger()call TriggerAddCondition(gg_trg_Lrt,Condition(function Trig_Lrt_Conditions))
call TriggerAddAction(gg_trg_Lrt,function Trig_Lrt_Actions)set gg_trg_LrtL=CreateTrigger()call DisableTrigger(gg_trg_LrtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrtL,.04)call TriggerAddAction(gg_trg_LrtL,function Trig_LrtL_Actions)set gg_trg_Tbt=CreateTrigger()call TriggerAddCondition(gg_trg_Tbt,Condition(function Trig_Tbt_Conditions))
call TriggerAddAction(gg_trg_Tbt,function Trig_Tbt_Actions)set gg_trg_Mto=CreateTrigger()call TriggerAddCondition(gg_trg_Mto,Condition(function Trig_Mto_Conditions))
call TriggerAddAction(gg_trg_Mto,function Trig_Mto_Actions)set gg_trg_MtoC=CreateTrigger()call DisableTrigger(gg_trg_MtoC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MtoC,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_MtoC,Condition(function Trig_MtoC_Conditions))call TriggerAddAction(gg_trg_MtoC,function Trig_MtoC_Actions)set gg_trg_Scs=CreateTrigger()call TriggerAddCondition(gg_trg_Scs,Condition(function Trig_Scs_Conditions))
call TriggerAddAction(gg_trg_Scs,function Trig_Scs_Actions)set gg_trg_ScsL=CreateTrigger()call DisableTrigger(gg_trg_ScsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_ScsL,.06)call TriggerAddAction(gg_trg_ScsL,function Trig_ScsL_Actions)set gg_trg_Tlt=CreateTrigger()call TriggerAddCondition(gg_trg_Tlt,Condition(function Trig_Tlt_Conditions))
call TriggerAddAction(gg_trg_Tlt,function Trig_Tlt_Actions)set gg_trg_TltR=CreateTrigger()call DisableTrigger(gg_trg_TltR)
call TriggerAddCondition(gg_trg_TltR,Condition(function Trig_TltR_Conditions))call TriggerAddAction(gg_trg_TltR,function Trig_TltR_Actions)set gg_trg_Rkb=CreateTrigger()call TriggerAddCondition(gg_trg_Rkb,Condition(function Trig_Rkb_Conditions))
call TriggerAddAction(gg_trg_Rkb,function Trig_Rkb_Actions)set gg_trg_RkbC=CreateTrigger()call DisableTrigger(gg_trg_RkbC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_RkbC,EVENT_PLAYER_UNIT_SUMMON)
call TriggerAddCondition(gg_trg_RkbC,Condition(function Trig_RkbC_Conditions))call TriggerAddAction(gg_trg_RkbC,function Trig_RkbC_Actions)set gg_trg_RkbD=CreateTrigger()call DisableTrigger(gg_trg_RkbD)
call TriggerRegisterAnyUnitEventBJ(gg_trg_RkbD,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_RkbD,Condition(function Trig_RkbD_Conditions))call TriggerAddAction(gg_trg_RkbD,function Trig_RkbD_Actions)set gg_trg_Lib=CreateTrigger()call TriggerAddCondition(gg_trg_Lib,Condition(function Trig_Lib_Conditions))
call TriggerAddAction(gg_trg_Lib,function Trig_Lib_Actions)set gg_trg_LibL=CreateTrigger()call DisableTrigger(gg_trg_LibL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LibL,.04)call TriggerAddAction(gg_trg_LibL,function Trig_LibL_Actions)set gg_trg_Kml=CreateTrigger()call TriggerAddCondition(gg_trg_Kml,Condition(function Trig_Kml_Conditions))
call TriggerAddAction(gg_trg_Kml,function Trig_Kml_Actions)set gg_trg_KmlL=CreateTrigger()call DisableTrigger(gg_trg_KmlL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KmlL,.03)call TriggerAddAction(gg_trg_KmlL,function Trig_KmlL_Actions)set gg_trg_Lie=CreateTrigger()call TriggerAddCondition(gg_trg_Lie,Condition(function Trig_Lie_Conditions))
call TriggerAddAction(gg_trg_Lie,function Trig_Lie_Actions)set gg_trg_LieL=CreateTrigger()call DisableTrigger(gg_trg_LieL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LieL,.04)call TriggerAddAction(gg_trg_LieL,function Trig_LieL_Actions)set gg_trg_Tls=CreateTrigger()call TriggerAddCondition(gg_trg_Tls,Condition(function Trig_Tls_Conditions))
call TriggerAddAction(gg_trg_Tls,function Trig_Tls_Actions)set gg_trg_TlsL=CreateTrigger()call DisableTrigger(gg_trg_TlsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TlsL,.04)call TriggerAddAction(gg_trg_TlsL,function Trig_TlsL_Actions)set udg_AI_Trig[9]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[9],Condition(function AI_Ishida_Cond))call TriggerAddAction(udg_AI_Trig[9],function AI_Ishida_Act)
set gg_trg_Mts=CreateTrigger()call TriggerAddCondition(gg_trg_Mts,Condition(function Trig_Mts_Conditions))
call TriggerAddAction(gg_trg_Mts,function Trig_Mts_Actions)set gg_trg_Lrg=CreateTrigger()call TriggerAddCondition(gg_trg_Lrg,Condition(function Trig_Lrg_Conditions))
call TriggerAddAction(gg_trg_Lrg,function Trig_Lrg_Actions)set gg_trg_LrgM=CreateTrigger()call DisableTrigger(gg_trg_LrgM)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrgM,.4)call TriggerAddAction(gg_trg_LrgM,function Trig_LrgM_Actions)set gg_trg_LrgL=CreateTrigger()call DisableTrigger(gg_trg_LrgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LrgL,.08)call TriggerAddAction(gg_trg_LrgL,function Trig_LrgL_Actions)set gg_trg_Sda=CreateTrigger()call TriggerAddCondition(gg_trg_Sda,Condition(function Trig_Sda_Conditions))
call TriggerAddAction(gg_trg_Sda,function Trig_Sda_Actions)set gg_trg_SdaR=CreateTrigger()call DisableTrigger(gg_trg_SdaR)
call TriggerRegisterAnyUnitEventBJ(gg_trg_SdaR,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_SdaR,Condition(function Trig_SdaR_Conditions))call TriggerAddAction(gg_trg_SdaR,function Trig_SdaR_Actions)set gg_trg_SdaC=CreateTrigger()call DisableTrigger(gg_trg_SdaC)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdaC,.04)call TriggerAddAction(gg_trg_SdaC,function Trig_SdaC_Actions)set gg_trg_SdaL=CreateTrigger()call DisableTrigger(gg_trg_SdaL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SdaL,.04)call TriggerAddAction(gg_trg_SdaL,function Trig_SdaL_Actions)set gg_trg_Sgr=CreateTrigger()call TriggerAddCondition(gg_trg_Sgr,Condition(function Trig_Sgr_Conditions))
call TriggerAddAction(gg_trg_Sgr,function Trig_Sgr_Actions)set gg_trg_Qff=CreateTrigger()call TriggerAddCondition(gg_trg_Qff,Condition(function Trig_Qff_Conditions))
call TriggerAddAction(gg_trg_Qff,function Trig_Qff_Actions)set gg_trg_QffC=CreateTrigger()call DisableTrigger(gg_trg_QffC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_QffC,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_QffC,Condition(function Trig_QffC_Conditions))call TriggerAddAction(gg_trg_QffC,function Trig_QffC_Actions)set gg_trg_QffL=CreateTrigger()call DisableTrigger(gg_trg_QffL)
call TriggerRegisterTimerEventPeriodic(gg_trg_QffL,1.)call TriggerAddAction(gg_trg_QffL,function Trig_QffL_Actions)set udg_AI_Trig[$A]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$A],Condition(function AI_Usopp_Cond))call TriggerAddAction(udg_AI_Trig[$A],function AI_Usopp_Act)
set gg_trg_Dial=CreateTrigger()call TriggerAddCondition(gg_trg_Dial,Condition(function Trig_Dial_Conditions))call TriggerAddAction(gg_trg_Dial,function Trig_Dial_Actions)set gg_trg_DialL=CreateTrigger()
call DisableTrigger(gg_trg_DialL)call TriggerRegisterTimerEventPeriodic(gg_trg_DialL,.04)
call TriggerAddAction(gg_trg_DialL,function Trig_DialL_Actions)set gg_trg_Tjr=CreateTrigger()call TriggerAddCondition(gg_trg_Tjr,Condition(function Trig_Tjr_Conditions))
call TriggerAddAction(gg_trg_Tjr,function Trig_Tjr_Actions)set gg_trg_Stf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Stf_Init,Condition(function Trig_Stf_Init_Conditions))call TriggerAddAction(gg_trg_Stf_Init,function Trig_Stf_Init_Actions)set gg_trg_StfU=CreateTrigger()call DisableTrigger(gg_trg_StfU)
call TriggerAddCondition(gg_trg_StfU,Condition(function Trig_StfU_Conditions))call TriggerAddAction(gg_trg_StfU,function Trig_StfU_Actions)set gg_trg_Stf=CreateTrigger()call DisableTrigger(gg_trg_Stf)call TriggerRegisterAnyUnitEventBJ(gg_trg_Stf,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Stf,Condition(function Trig_Stf_Conditions))
call TriggerAddAction(gg_trg_Stf,function Trig_Stf_Actions)set gg_trg_Seg=CreateTrigger()call TriggerAddCondition(gg_trg_Seg,Condition(function Trig_Seg_Conditions))
call TriggerAddAction(gg_trg_Seg,function Trig_Seg_Actions)set gg_trg_Abe=CreateTrigger()call TriggerAddCondition(gg_trg_Abe,Condition(function Trig_Abe_Conditions))
call TriggerAddAction(gg_trg_Abe,function Trig_Abe_Actions)set gg_trg_Ipf=CreateTrigger()call TriggerAddCondition(gg_trg_Ipf,Condition(function Trig_Ipf_Conditions))
call TriggerAddAction(gg_trg_Ipf,function Trig_Ipf_Actions)set gg_trg_IpfB=CreateTrigger()call DisableTrigger(gg_trg_IpfB)
call TriggerRegisterTimerEventPeriodic(gg_trg_IpfB,.04)call TriggerAddAction(gg_trg_IpfB,function Trig_IpfB_Actions)set gg_trg_IpfL=CreateTrigger()call DisableTrigger(gg_trg_IpfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IpfL,.04)call TriggerAddAction(gg_trg_IpfL,function Trig_IpfL_Actions)set gg_trg_IpfL2=CreateTrigger()
call DisableTrigger(gg_trg_IpfL2)call TriggerRegisterTimerEventPeriodic(gg_trg_IpfL2,.04)
call TriggerAddAction(gg_trg_IpfL2,function Trig_IpfL2_Actions)set udg_AI_Trig[$B]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$B],Condition(function AI_Neji_Cond))call TriggerAddAction(udg_AI_Trig[$B],function AI_Neji_Act)set gg_trg_Gef=CreateTrigger()call TriggerAddCondition(gg_trg_Gef,Condition(function Trig_Gef_Conditions))
call TriggerAddAction(gg_trg_Gef,function Trig_Gef_Actions)set gg_trg_Eth=CreateTrigger()call TriggerAddCondition(gg_trg_Eth,Condition(function Trig_Eth_Conditions))
call TriggerAddAction(gg_trg_Eth,function Trig_Eth_Actions)set gg_trg_EthL=CreateTrigger()call DisableTrigger(gg_trg_EthL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EthL,.04)call TriggerAddAction(gg_trg_EthL,function Trig_EthL_Actions)set gg_trg_Rti=CreateTrigger()call TriggerAddCondition(gg_trg_Rti,Condition(function Trig_Rti_Conditions))
call TriggerAddAction(gg_trg_Rti,function Trig_Rti_Actions)set gg_trg_RtiL=CreateTrigger()call DisableTrigger(gg_trg_RtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RtiL,.04)call TriggerAddAction(gg_trg_RtiL,function Trig_RtiL_Actions)set gg_trg_Bkg=CreateTrigger()call TriggerAddCondition(gg_trg_Bkg,Condition(function Trig_Bkg_Conditions))
call TriggerAddAction(gg_trg_Bkg,function Trig_Bkg_Actions)set gg_trg_BkgC=CreateTrigger()call DisableTrigger(gg_trg_BkgC)
call TriggerAddCondition(gg_trg_BkgC,Condition(function Trig_BkgC_Conditions))call TriggerAddAction(gg_trg_BkgC,function Trig_BkgC_Actions)set gg_trg_BkgDmg=CreateTrigger()call DisableTrigger(gg_trg_BkgDmg)call TriggerRegisterAnyUnitEventBJ(gg_trg_BkgDmg,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_BkgDmg,Condition(function Trig_BkgAdd_Conditions))call TriggerAddAction(gg_trg_BkgDmg,function Trig_BkgAdd_Actions)set gg_trg_Hns=CreateTrigger()call TriggerAddCondition(gg_trg_Hns,Condition(function Trig_Hns_Conditions))
call TriggerAddAction(gg_trg_Hns,function Trig_Hns_Actions)set gg_trg_HnsL=CreateTrigger()call DisableTrigger(gg_trg_HnsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HnsL,.1)call TriggerAddAction(gg_trg_HnsL,function Trig_HnsL_Actions)set gg_trg_HnsC=CreateTrigger()call DisableTrigger(gg_trg_HnsC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_HnsC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_HnsC,Condition(function Trig_HnsC_Conditions))call TriggerAddAction(gg_trg_HnsC,function Trig_HnsC_Actions)set gg_trg_Etp=CreateTrigger()call TriggerAddCondition(gg_trg_Etp,Condition(function Trig_Etp_Conditions))
call TriggerAddAction(gg_trg_Etp,function Trig_Etp_Actions)set gg_trg_EtpL=CreateTrigger()call DisableTrigger(gg_trg_EtpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EtpL,.16)call TriggerAddAction(gg_trg_EtpL,function Trig_EtpL_Actions)set gg_trg_Etp2=CreateTrigger()call DisableTrigger(gg_trg_Etp2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Etp2,.04)call TriggerAddAction(gg_trg_Etp2,function Trig_Etp2_Actions)set gg_trg_Tcb=CreateTrigger()call TriggerAddCondition(gg_trg_Tcb,Condition(function Trig_Tcb_Conditions))
call TriggerAddAction(gg_trg_Tcb,function Trig_Tcb_Actions)set gg_trg_TcbL=CreateTrigger()call DisableTrigger(gg_trg_TcbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TcbL,.04)call TriggerAddAction(gg_trg_TcbL,function Trig_TcbL_Actions)set gg_trg_Srl=CreateTrigger()call TriggerAddCondition(gg_trg_Srl,Condition(function Trig_Srl_Conditions))
call TriggerAddAction(gg_trg_Srl,function Trig_Srl_Actions)set gg_trg_Anl=CreateTrigger()call TriggerAddCondition(gg_trg_Anl,Condition(function Trig_Anl_Conditions))
call TriggerAddAction(gg_trg_Anl,function Trig_Anl_Actions)set gg_trg_AnlL=CreateTrigger()call DisableTrigger(gg_trg_AnlL)
call TriggerRegisterTimerEventPeriodic(gg_trg_AnlL,.07)call TriggerAddAction(gg_trg_AnlL,function Trig_AnlL_Actions)set gg_trg_AnlE=CreateTrigger()call DisableTrigger(gg_trg_AnlE)
call TriggerAddAction(gg_trg_AnlE,function Trig_AnlE_Actions)set gg_trg_Wes=CreateTrigger()call TriggerAddCondition(gg_trg_Wes,Condition(function Trig_Wes_Conditions))
call TriggerAddAction(gg_trg_Wes,function Trig_Wes_Actions)set udg_AI_Trig[$D]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[$D],Condition(function AI_Shirohige_Cond))call TriggerAddAction(udg_AI_Trig[$D],function AI_Shirohige_Act)
set gg_trg_Endurance=CreateTrigger()
call TriggerAddAction(gg_trg_Endurance,function Trig_Endurance_Actions)set gg_trg_Nrt=CreateTrigger()call TriggerAddCondition(gg_trg_Nrt,Condition(function Trig_Nrt_Conditions))
call TriggerAddAction(gg_trg_Nrt,function Trig_Nrt_Actions)set gg_trg_NrtL=CreateTrigger()call DisableTrigger(gg_trg_NrtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_NrtL,.04)call TriggerAddAction(gg_trg_NrtL,function Trig_NrtL_Actions)set gg_trg_Grc_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Grc_Init,Condition(function Trig_Grc_Init_Conditions))call TriggerAddAction(gg_trg_Grc_Init,function Trig_Grc_Init_Actions)set gg_trg_Grc=CreateTrigger()call DisableTrigger(gg_trg_Grc)call TriggerAddCondition(gg_trg_Grc,Condition(function Trig_Grc_Conditions))
call TriggerAddAction(gg_trg_Grc,function Trig_Grc_Actions)set gg_trg_Gks=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Gks,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Gks,Condition(function Trig_Gks_Conditions))
call TriggerAddAction(gg_trg_Gks,function Trig_Gks_Actions)set gg_trg_GksL=CreateTrigger()call DisableTrigger(gg_trg_GksL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GksL,.05)call TriggerAddAction(gg_trg_GksL,function Trig_GksL_Actions)set gg_trg_Kin=CreateTrigger()call TriggerAddCondition(gg_trg_Kin,Condition(function Trig_Kin_Conditions))
call TriggerAddAction(gg_trg_Kin,function Trig_Kin_Actions)set gg_trg_KinL=CreateTrigger()call DisableTrigger(gg_trg_KinL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KinL,.05)call TriggerAddAction(gg_trg_KinL,function Trig_KinL_Actions)set gg_trg_Isk=CreateTrigger()call TriggerAddCondition(gg_trg_Isk,Condition(function Trig_Isk_Conditions))
call TriggerAddAction(gg_trg_Isk,function Trig_Isk_Actions)set gg_trg_IskD=CreateTrigger()call DisableTrigger(gg_trg_IskD)
call TriggerAddAction(gg_trg_IskD,function Trig_IskD_Actions)set gg_trg_Madara_SixPath=CreateTrigger()call TriggerAddAction(gg_trg_Madara_SixPath,function Trig_Madara_SixPath_Actions)set gg_trg_Mti=CreateTrigger()call TriggerAddCondition(gg_trg_Mti,Condition(function Trig_Mti_Conditions))
call TriggerAddAction(gg_trg_Mti,function Trig_Mti_Actions)set gg_trg_MtiL=CreateTrigger()call DisableTrigger(gg_trg_MtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_MtiL,.05)call TriggerAddAction(gg_trg_MtiL,function Trig_MtiL_Actions)set gg_trg_Khg=CreateTrigger()call TriggerAddCondition(gg_trg_Khg,Condition(function Trig_Khg_Conditions))
call TriggerAddAction(gg_trg_Khg,function Trig_Khg_Actions)set gg_trg_KhgL=CreateTrigger()call DisableTrigger(gg_trg_KhgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KhgL,.4)call TriggerAddAction(gg_trg_KhgL,function Trig_KhgL_Actions)set gg_trg_Hik=CreateTrigger()call TriggerAddCondition(gg_trg_Hik,Condition(function Trig_Hik_Conditions))
call TriggerAddAction(gg_trg_Hik,function Trig_Hik_Actions)set gg_trg_HikL=CreateTrigger()call DisableTrigger(gg_trg_HikL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HikL,.04)call TriggerAddAction(gg_trg_HikL,function Trig_HikL_Actions)set gg_trg_Hdb=CreateTrigger()call TriggerAddCondition(gg_trg_Hdb,Condition(function Trig_Hdb_Conditions))
call TriggerAddAction(gg_trg_Hdb,function Trig_Hdb_Actions)set gg_trg_HdbL=CreateTrigger()call DisableTrigger(gg_trg_HdbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HdbL,.1)call TriggerAddAction(gg_trg_HdbL,function Trig_HdbL_Actions)set gg_trg_Eti=CreateTrigger()call TriggerAddCondition(gg_trg_Eti,Condition(function Trig_Eti_Conditions))
call TriggerAddAction(gg_trg_Eti,function Trig_Eti_Actions)set gg_trg_EtiL=CreateTrigger()call DisableTrigger(gg_trg_EtiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_EtiL,.06)call TriggerAddAction(gg_trg_EtiL,function Trig_EtiL_Actions)set gg_trg_Ffb_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Ffb_Init,Condition(function Trig_Ffb_Init_Conditions))call TriggerAddAction(gg_trg_Ffb_Init,function Trig_Ffb_Init_Actions)set gg_trg_Ffb=CreateTrigger()call TriggerAddCondition(gg_trg_Ffb,Condition(function Trig_Ffb_Conditions))
call TriggerAddAction(gg_trg_Ffb,function Trig_Ffb_Actions)set gg_trg_FfbL=CreateTrigger()call DisableTrigger(gg_trg_FfbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FfbL,.04)call TriggerAddAction(gg_trg_FfbL,function Trig_FfbL_Actions)set gg_trg_Iss_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Iss_Init,Condition(function Trig_IssInit_Cond))call TriggerAddAction(gg_trg_Iss_Init,function Trig_IssInit_Actions)
set gg_trg_Iss=CreateTrigger()call TriggerAddCondition(gg_trg_Iss,Condition(function Trig_Iss_Conditions))
call TriggerAddAction(gg_trg_Iss,function Trig_Iss_Actions)set gg_trg_Iss_Anim=CreateTrigger()call TriggerAddCondition(gg_trg_Iss_Anim,Condition(function Trig_Iss_Anim_Conditions))call TriggerAddAction(gg_trg_Iss_Anim,function Trig_Iss_Anim_Actions)set gg_trg_Hii=CreateTrigger()call TriggerAddCondition(gg_trg_Hii,Condition(function Trig_Hii_Conditions))
call TriggerAddAction(gg_trg_Hii,function Trig_Hii_Actions)set gg_trg_HiiL=CreateTrigger()call DisableTrigger(gg_trg_HiiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HiiL,.2)call TriggerAddAction(gg_trg_HiiL,function Trig_HiiL_Actions)set udg_AI_Trig[18]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[18],Condition(function AI_Hitsugaya_Cond))call TriggerAddAction(udg_AI_Trig[18],function AI_Hitsugaya_Act)
set gg_trg_Hnm=CreateTrigger()call TriggerAddCondition(gg_trg_Hnm,Condition(function Trig_Hnm_Conditions))
call TriggerAddAction(gg_trg_Hnm,function Trig_Hnm_Actions)set gg_trg_HnmL=CreateTrigger()call DisableTrigger(gg_trg_HnmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HnmL,.04)call TriggerAddAction(gg_trg_HnmL,function Trig_HnmL_Actions)set gg_trg_Inv=CreateTrigger()call TriggerAddCondition(gg_trg_Inv,Condition(function Trig_Inv_Conditions))
call TriggerAddAction(gg_trg_Inv,function Trig_Inv_Actions)set gg_trg_InvL=CreateTrigger()call DisableTrigger(gg_trg_InvL)
call TriggerRegisterTimerEventPeriodic(gg_trg_InvL,.03)call TriggerAddAction(gg_trg_InvL,function Trig_InvL_Actions)set gg_trg_Inv2=CreateTrigger()call TriggerAddCondition(gg_trg_Inv2,Condition(function Trig_Inv2_Conditions))call TriggerAddAction(gg_trg_Inv2,function Trig_Inv2_Actions)set gg_trg_InvL2=CreateTrigger()
call DisableTrigger(gg_trg_InvL2)call TriggerRegisterTimerEventPeriodic(gg_trg_InvL2,.05)
call TriggerAddAction(gg_trg_InvL2,function Trig_InvL2_Actions)set gg_trg_Daiguren_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_Daiguren_Init,Condition(function Trig_Daiguren_Init_Conditions))
call TriggerAddAction(gg_trg_Daiguren_Init,function Trig_Daiguren_Init_Actions)set gg_trg_Daiguren=CreateTrigger()call TriggerAddCondition(gg_trg_Daiguren,Condition(function Trig_Daiguren_Conditions))call TriggerAddAction(gg_trg_Daiguren,function Trig_Daiguren_Actions)set gg_trg_Dhf=CreateTrigger()call TriggerAddCondition(gg_trg_Dhf,Condition(function Trig_Dhf_Conditions))
call TriggerAddAction(gg_trg_Dhf,function Trig_Dhf_Actions)set gg_trg_DhfL=CreateTrigger()call DisableTrigger(gg_trg_DhfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DhfL,.04)call TriggerAddAction(gg_trg_DhfL,function Trig_DhfL_Actions)set gg_trg_Hho=CreateTrigger()call TriggerAddCondition(gg_trg_Hho,Condition(function Trig_Hho_Conditions))
call TriggerAddAction(gg_trg_Hho,function Trig_Hho_Actions)set gg_trg_HhoL=CreateTrigger()call DisableTrigger(gg_trg_HhoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HhoL,.12)call TriggerAddAction(gg_trg_HhoL,function Trig_HhoL_Actions)set gg_trg_HhoR=CreateTrigger()call DisableTrigger(gg_trg_HhoR)
call TriggerRegisterTimerEventPeriodic(gg_trg_HhoR,.06)call TriggerAddAction(gg_trg_HhoR,function Trig_HhoR_Actions)set udg_AI_Trig[19]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[19],Condition(function AI_Crocodile_Cond))call TriggerAddAction(udg_AI_Trig[19],function AI_Crocodile_Act)
set gg_trg_Sand_Skin=CreateTrigger()
call TriggerAddCondition(gg_trg_Sand_Skin,Condition(function SandSkin_Conditions))call TriggerAddAction(gg_trg_Sand_Skin,function SandSkin_Act)set gg_trg_Dsd=CreateTrigger()call TriggerAddCondition(gg_trg_Dsd,Condition(function Trig_Dsd_Conditions))
call TriggerAddAction(gg_trg_Dsd,function Trig_Dsd_Actions)set gg_trg_DsdL=CreateTrigger()call DisableTrigger(gg_trg_DsdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_DsdL,.04)call TriggerAddAction(gg_trg_DsdL,function Trig_DsdL_Actions)set gg_trg_Csd=CreateTrigger()call TriggerAddCondition(gg_trg_Csd,Condition(function Trig_Csd_Conditions))
call TriggerAddAction(gg_trg_Csd,function Trig_Csd_Actions)set gg_trg_CsdL=CreateTrigger()call DisableTrigger(gg_trg_CsdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CsdL,.03)call TriggerAddAction(gg_trg_CsdL,function Trig_CsdL_Actions)set gg_trg_Crocodile_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Crocodile_Init,Condition(function Trig_Crocodile_Init_Conditions))call TriggerAddAction(gg_trg_Crocodile_Init,function Trig_Crocodile_Init_Actions)set gg_trg_Gse=CreateTrigger()call TriggerAddCondition(gg_trg_Gse,Condition(function Trig_Gse_Conditions))
call TriggerAddAction(gg_trg_Gse,function Trig_Gse_Actions)set gg_trg_GseL=CreateTrigger()call DisableTrigger(gg_trg_GseL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GseL,.04)call TriggerAddAction(gg_trg_GseL,function Trig_GseL_Actions)set gg_trg_Sad=CreateTrigger()call TriggerAddCondition(gg_trg_Sad,Condition(function Trig_Sad_Conditions))
call TriggerAddAction(gg_trg_Sad,function Trig_Sad_Actions)set gg_trg_SadL=CreateTrigger()call DisableTrigger(gg_trg_SadL)
call TriggerRegisterTimerEventPeriodic(gg_trg_SadL,.04)call TriggerAddAction(gg_trg_SadL,function Trig_SadL_Actions)set gg_trg_Coe=CreateTrigger()call TriggerAddCondition(gg_trg_Coe,Condition(function Trig_Coe_Conditions))
call TriggerAddAction(gg_trg_Coe,function Trig_Coe_Actions)set udg_AI_Trig[20]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[20],Condition(function AI_Pain_Cond))call TriggerAddAction(udg_AI_Trig[20],function AI_Pain_Act)set gg_trg_Samsara=CreateTrigger()call TriggerAddCondition(gg_trg_Samsara,Condition(function Samsara_Conditions))call TriggerAddAction(gg_trg_Samsara,function Samsara_Act)set gg_trg_Amp=CreateTrigger()call TriggerAddCondition(gg_trg_Amp,Condition(function Trig_Amp_Conditions))
call TriggerAddAction(gg_trg_Amp,function Trig_Amp_Actions)set gg_trg_AmpL=CreateTrigger()call DisableTrigger(gg_trg_AmpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_AmpL,.04)call TriggerAddAction(gg_trg_AmpL,function Trig_AmpL_Actions)set gg_trg_Uvp=CreateTrigger()call TriggerAddCondition(gg_trg_Uvp,Condition(function Trig_Uvp_Conditions))
call TriggerAddAction(gg_trg_Uvp,function Trig_Uvp_Actions)set gg_trg_UvpL=CreateTrigger()call DisableTrigger(gg_trg_UvpL)
call TriggerRegisterTimerEventPeriodic(gg_trg_UvpL,.04)call TriggerAddAction(gg_trg_UvpL,function Trig_UvpL_Actions)set gg_trg_Rkj=CreateTrigger()call TriggerAddCondition(gg_trg_Rkj,Condition(function Trig_Rkj_Conditions))
call TriggerAddAction(gg_trg_Rkj,function Trig_Rkj_Actions)set gg_trg_Pdn=CreateTrigger()call TriggerAddCondition(gg_trg_Pdn,Condition(function Trig_Pdn_Conditions))
call TriggerAddAction(gg_trg_Pdn,function Trig_Pdn_Actions)set gg_trg_PdnL=CreateTrigger()call DisableTrigger(gg_trg_PdnL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PdnL,.04)call TriggerAddAction(gg_trg_PdnL,function Trig_PdnL_Actions)set gg_trg_PdnL2=CreateTrigger()
call DisableTrigger(gg_trg_PdnL2)call TriggerRegisterTimerEventPeriodic(gg_trg_PdnL2,.08)
call TriggerAddAction(gg_trg_PdnL2,function Trig_PdnL2_Actions)set gg_trg_Sdt=CreateTrigger()call TriggerAddCondition(gg_trg_Sdt,Condition(function Trig_Sdt_Conditions))
call TriggerAddAction(gg_trg_Sdt,function Trig_Sdt_Actions)set gg_trg_Sdt_Die=CreateTrigger()call DisableTrigger(gg_trg_Sdt_Die)call TriggerAddAction(gg_trg_Sdt_Die,function Trig_Sdt_Die_Actions)set udg_AI_Trig[21]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[21],Condition(function AI_Kenpachi_Cond))call TriggerAddAction(udg_AI_Trig[21],function AI_Kenpachi_Act)set gg_trg_Thrilling_Spiritual=CreateTrigger()call TriggerAddCondition(gg_trg_Thrilling_Spiritual,Condition(function Trig_Thrilling_Spiritual_Conditions))
call TriggerAddAction(gg_trg_Thrilling_Spiritual,function Trig_Thrilling_Spiritual_Actions)set gg_trg_Czj=CreateTrigger()call TriggerAddCondition(gg_trg_Czj,Condition(function Trig_Czj_Conditions))
call TriggerAddAction(gg_trg_Czj,function Trig_Czj_Actions)set gg_trg_CzjL=CreateTrigger()call DisableTrigger(gg_trg_CzjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CzjL,.03)call TriggerAddAction(gg_trg_CzjL,function Trig_CzjL_Actions)set gg_trg_Release_Eye=CreateTrigger()call TriggerAddCondition(gg_trg_Release_Eye,Condition(function Trig_Release_Eye_Conditions))
call TriggerAddAction(gg_trg_Release_Eye,function Trig_Release_Eye_Actions)set gg_trg_Release_Eye_Attack=CreateTrigger()call DisableTrigger(gg_trg_Release_Eye_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Release_Eye_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Release_Eye_Attack,Condition(function Trig_Release_Eye_Attack_Conditions))call TriggerAddAction(gg_trg_Release_Eye_Attack,function Trig_Release_Eye_Attack_Actions)set gg_trg_Kds=CreateTrigger()call TriggerAddCondition(gg_trg_Kds,Condition(function Trig_Kds_Conditions))
call TriggerAddAction(gg_trg_Kds,function Trig_Kds_Actions)set udg_AI_Trig[22]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[22],Condition(function AI_Enel_Cond))call TriggerAddAction(udg_AI_Trig[22],function AI_Enel_Act)set gg_trg_Jog=CreateTrigger()call TriggerAddCondition(gg_trg_Jog,Condition(function Trig_Jog_Conditions))
call TriggerAddAction(gg_trg_Jog,function Trig_Jog_Actions)set gg_trg_Tmt=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Tmt,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_Tmt,Condition(function Trig_Tmt_Conditions))
call TriggerAddAction(gg_trg_Tmt,function Trig_Tmt_Actions)set gg_trg_Tmt_Attack=CreateTrigger()call DisableTrigger(gg_trg_Tmt_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Tmt_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Tmt_Attack,Condition(function Trig_Tmt_Attack_Conditions))call TriggerAddAction(gg_trg_Tmt_Attack,function Trig_Tmt_Attack_Actions)set gg_trg_Vri_Cast=CreateTrigger()call TriggerAddCondition(gg_trg_Vri_Cast,Condition(function Trig_Vri_Cast_Conditions))call TriggerAddAction(gg_trg_Vri_Cast,function Trig_Vri_Cast_Actions)set gg_trg_Vri_L=CreateTrigger()
call DisableTrigger(gg_trg_Vri_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Vri_L,.05)
call TriggerAddAction(gg_trg_Vri_L,function Trig_Vri_L_Actions)set gg_trg_Vri=CreateTrigger()call DisableTrigger(gg_trg_Vri)call TriggerAddCondition(gg_trg_Vri,Condition(function Trig_Vri_Conditions))
call TriggerAddAction(gg_trg_Vri,function Trig_Vri_Actions)set gg_trg_Mmg=CreateTrigger()call TriggerAddCondition(gg_trg_Mmg,Condition(function Trig_Mmg_Conditions))
call TriggerAddAction(gg_trg_Mmg,function Trig_Mmg_Actions)set udg_Mmg_TrigDie=CreateTrigger()call DisableTrigger(udg_Mmg_TrigDie)
call TriggerAddAction(udg_Mmg_TrigDie,function Mmg_TrigDieAct)set gg_trg_MmgL=CreateTrigger()set udg_Mmg_TrigAtk=CreateTrigger()call DisableTrigger(gg_trg_MmgL)
call DisableTrigger(udg_Mmg_TrigAtk)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MmgL,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_MmgL,Condition(function MmgL_Cond))call TriggerAddAction(gg_trg_MmgL,function MmgL_Act)
call TriggerRegisterAnyUnitEventBJ(udg_Mmg_TrigAtk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_Mmg_TrigAtk,Condition(function MmgL_AtkCond))call TriggerAddAction(udg_Mmg_TrigAtk,function MmgL_AtkAct)set gg_trg_Rgo=CreateTrigger()call TriggerAddCondition(gg_trg_Rgo,Condition(function Trig_Rgo_Conditions))
call TriggerAddAction(gg_trg_Rgo,function Trig_Rgo_Actions)set gg_trg_RgoL=CreateTrigger()call DisableTrigger(gg_trg_RgoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RgoL,.04)call TriggerAddAction(gg_trg_RgoL,function Trig_RgoL_Actions)set udg_AI_Trig[23]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[23],Condition(function AI_Deidara_Cond))call TriggerAddAction(udg_AI_Trig[23],function AI_Deidara_Act)set gg_trg_C13=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_C13,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_C13,Condition(function Trig_C13_Conditions))
call TriggerAddAction(gg_trg_C13,function Trig_C13_Actions)set gg_trg_C13L=CreateTrigger()call DisableTrigger(gg_trg_C13L)
call TriggerRegisterTimerEventPeriodic(gg_trg_C13L,.04)call TriggerAddAction(gg_trg_C13L,function Trig_C13L_Actions)set gg_trg_C1=CreateTrigger()call TriggerAddCondition(gg_trg_C1,Condition(function Trig_C1_Conditions))call TriggerAddAction(gg_trg_C1,function Trig_C1_Actions)set udg_C1_TrigDie=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(udg_C1_TrigDie,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(udg_C1_TrigDie,Condition(function C1_Die_Cond))
call TriggerAddAction(udg_C1_TrigDie,function C1_Die_Act)set udg_C1_TrigAtk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(udg_C1_TrigAtk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_C1_TrigAtk,Condition(function C1_Atk_Cond))
call TriggerAddAction(udg_C1_TrigAtk,function C1_Atk_Act)set gg_trg_C1_Bomb=CreateTrigger()call DisableTrigger(gg_trg_C1_Bomb)call TriggerAddCondition(gg_trg_C1_Bomb,Condition(function Trig_C1_Bomb_Conditions))
call TriggerAddAction(gg_trg_C1_Bomb,function Trig_C1_Bomb_Actions)set gg_trg_C12=CreateTrigger()call TriggerAddCondition(gg_trg_C12,Condition(function Trig_C12_Conditions))
call TriggerAddAction(gg_trg_C12,function Trig_C12_Actions)set gg_trg_C12L=CreateTrigger()call DisableTrigger(gg_trg_C12L)
call TriggerRegisterTimerEventPeriodic(gg_trg_C12L,.04)call TriggerAddAction(gg_trg_C12L,function Trig_C12L_Actions)set gg_trg_C3=CreateTrigger()call TriggerAddCondition(gg_trg_C3,Condition(function Trig_C3_Conditions))call TriggerAddAction(gg_trg_C3,function Trig_C3_Actions)set gg_trg_C3L=CreateTrigger()call DisableTrigger(gg_trg_C3L)call TriggerRegisterTimerEventPeriodic(gg_trg_C3L,.04)call TriggerAddAction(gg_trg_C3L,function Trig_C3L_Actions)set gg_trg_C4=CreateTrigger()call TriggerAddCondition(gg_trg_C4,Condition(function Trig_C4_Conditions))call TriggerAddAction(gg_trg_C4,function Trig_C4_Actions)set gg_trg_C4L=CreateTrigger()call DisableTrigger(gg_trg_C4L)call TriggerRegisterTimerEventPeriodic(gg_trg_C4L,.06)call TriggerAddAction(gg_trg_C4L,function Trig_C4L_Actions)set gg_trg_C4L2=CreateTrigger()call DisableTrigger(gg_trg_C4L2)
call TriggerRegisterTimerEventPeriodic(gg_trg_C4L2,.04)call TriggerAddAction(gg_trg_C4L2,function Trig_C4L2_Actions)set gg_trg_C0=CreateTrigger()call TriggerAddCondition(gg_trg_C0,Condition(function Trig_C0_Conditions))call TriggerAddAction(gg_trg_C0,function Trig_C0_Actions)set gg_trg_C0L=CreateTrigger()call DisableTrigger(gg_trg_C0L)call TriggerRegisterTimerEventPeriodic(gg_trg_C0L,.04)call TriggerAddAction(gg_trg_C0L,function Trig_C0L_Actions)set udg_AI_Trig[24]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[24],Condition(function AI_Yamamoto_Cond))call TriggerAddAction(udg_AI_Trig[24],function AI_Yamamoto_Act)set gg_trg_Fsw=CreateTrigger()call TriggerAddCondition(gg_trg_Fsw,Condition(function Trig_Fsw_Conditions))
call TriggerAddAction(gg_trg_Fsw,function Trig_Fsw_Actions)set gg_trg_FswL=CreateTrigger()call DisableTrigger(gg_trg_FswL)
call TriggerRegisterAnyUnitEventBJ(gg_trg_FswL,EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(gg_trg_FswL,Condition(function Trig_FswL_Conditions))call TriggerAddAction(gg_trg_FswL,function Trig_FswL_Actions)set gg_trg_Lot_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Lot_Init,Condition(function Trig_LotInit_Conditions))call TriggerAddAction(gg_trg_Lot_Init,function Trig_LotInit_Actions)
set gg_trg_Lot=CreateTrigger()call TriggerAddCondition(gg_trg_Lot,Condition(function Trig_Lot_Conditions))
call TriggerAddAction(gg_trg_Lot,function Trig_Lot_Actions)set gg_trg_Lot_Atk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Lot_Atk,EVENT_PLAYER_UNIT_ATTACKED)call DisableTrigger(gg_trg_Lot_Atk)call TriggerAddCondition(gg_trg_Lot_Atk,Condition(function Trig_Lot_Atk_Conditions))
call TriggerAddAction(gg_trg_Lot_Atk,function Trig_Lot_Atk_Actions)set gg_trg_Cin=CreateTrigger()call TriggerAddCondition(gg_trg_Cin,Condition(function Trig_Cin_Conditions))
call TriggerAddAction(gg_trg_Cin,function Trig_Cin_Actions)set gg_trg_CinL=CreateTrigger()call DisableTrigger(gg_trg_CinL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CinL,.12)call TriggerAddAction(gg_trg_CinL,function Trig_CinL_Actions)set gg_trg_CinL2=CreateTrigger()
call DisableTrigger(gg_trg_CinL2)call TriggerRegisterTimerEventPeriodic(gg_trg_CinL2,.08)
call TriggerAddAction(gg_trg_CinL2,function Trig_CinL2_Actions)set gg_trg_CinL3=CreateTrigger()
call DisableTrigger(gg_trg_CinL3)call TriggerRegisterTimerEventPeriodic(gg_trg_CinL3,.5)call TriggerAddAction(gg_trg_CinL3,function Trig_CinL3_Actions)set gg_trg_Kjd=CreateTrigger()call TriggerAddCondition(gg_trg_Kjd,Condition(function Trig_Kjd_Conditions))
call TriggerAddAction(gg_trg_Kjd,function Trig_Kjd_Actions)set gg_trg_KjdL=CreateTrigger()call DisableTrigger(gg_trg_KjdL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KjdL,.1)call TriggerAddAction(gg_trg_KjdL,function Trig_KjdL_Actions)set gg_trg_Kjd_Atk=CreateTrigger()call DisableTrigger(gg_trg_Kjd_Atk)call TriggerRegisterTimerEventPeriodic(gg_trg_Kjd_Atk,.1)call TriggerAddAction(gg_trg_Kjd_Atk,function Trig_Kjd_Atk_Actions)set udg_AI_Trig[25]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[25],Condition(function AI_Mihawk_Cond))
call TriggerAddAction(udg_AI_Trig[25],function AI_Mihawk_Act)set gg_trg_Ovp=CreateTrigger()call TriggerAddCondition(gg_trg_Ovp,Condition(function Trig_Ovp_Conditions))
call TriggerAddAction(gg_trg_Ovp,function Trig_Ovp_Actions)set gg_trg_Ovp_Atk=CreateTrigger()call DisableTrigger(gg_trg_Ovp_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Ovp_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Ovp_Atk,Condition(function Trig_Ovp_Atk_Conditions))
call TriggerAddAction(gg_trg_Ovp_Atk,function Trig_Ovp_Atk_Actions)set gg_trg_Bst=CreateTrigger()call TriggerAddCondition(gg_trg_Bst,Condition(function Trig_Bst_Conditions))
call TriggerAddAction(gg_trg_Bst,function Trig_Bst_Actions)set gg_trg_BstV=CreateTrigger()call DisableTrigger(gg_trg_BstV)
call TriggerRegisterTimerEventPeriodic(gg_trg_BstV,.05)call TriggerAddAction(gg_trg_BstV,function Trig_BstV_Actions)set gg_trg_Hws=CreateTrigger()call TriggerAddCondition(gg_trg_Hws,Condition(function Trig_Hws_Conditions))
call TriggerAddAction(gg_trg_Hws,function Trig_Hws_Actions)set gg_trg_HwsL=CreateTrigger()call DisableTrigger(gg_trg_HwsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HwsL,.03)call TriggerAddAction(gg_trg_HwsL,function Trig_HwsL_Actions)set gg_trg_Wof=CreateTrigger()call TriggerAddCondition(gg_trg_Wof,Condition(function Trig_Wof_Conditions))
call TriggerAddAction(gg_trg_Wof,function Trig_Wof_Actions)set gg_trg_Bwt=CreateTrigger()call TriggerAddCondition(gg_trg_Bwt,Condition(function Trig_Bwt_Conditions))
call TriggerAddAction(gg_trg_Bwt,function Trig_Bwt_Actions)set gg_trg_BwtL=CreateTrigger()call DisableTrigger(gg_trg_BwtL)
call TriggerRegisterTimerEventPeriodic(gg_trg_BwtL,.05)call TriggerAddAction(gg_trg_BwtL,function Trig_BwtL_Actions)set gg_trg_BwtL2=CreateTrigger()
call DisableTrigger(gg_trg_BwtL2)call TriggerRegisterTimerEventPeriodic(gg_trg_BwtL2,.03)
call TriggerAddAction(gg_trg_BwtL2,function Trig_BwtL2_Actions)set udg_AI_Trig[26]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[26],Condition(function AI_Hidan_Cond))call TriggerAddAction(udg_AI_Trig[26],function AI_Hidan_Act)
set gg_trg_Scythe_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Scythe_Slash,Condition(function Scythe_Slash_Conditions))call TriggerAddAction(gg_trg_Scythe_Slash,function Scythe_Slash_Actions)
set gg_trg_Wielding_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Wielding_Strike,Condition(function Trig_Jump_Strike_Conditions))
call TriggerAddAction(gg_trg_Wielding_Strike,function Trig_Jump_Strike_Actions)set gg_trg_Blood_Die=CreateTrigger()
call TriggerAddCondition(gg_trg_Blood_Die,Condition(function Trig_Blood_Die_Conditions))
call TriggerAddAction(gg_trg_Blood_Die,function Trig_Blood_Die_Actions)set udg_Hidan_BloodTrig=CreateTrigger()call TriggerAddAction(udg_Hidan_BloodTrig,function Trig_Blood_Die_Actions)set gg_trg_Czs=CreateTrigger()call TriggerAddCondition(gg_trg_Czs,Condition(function Trig_Czs_Conditions))
call TriggerAddAction(gg_trg_Czs,function Trig_Czs_Actions)set gg_trg_Czs_L=CreateTrigger()
call DisableTrigger(gg_trg_Czs_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Czs_L,.2)call TriggerAddAction(gg_trg_Czs_L,function Trig_Czs_L_Actions)set gg_trg_Czs_End=CreateTrigger()call DisableTrigger(gg_trg_Czs_End)call TriggerAddCondition(gg_trg_Czs_End,Condition(function Trig_Czs_End_Conditions))
call TriggerAddAction(gg_trg_Czs_End,function Trig_Czs_End_Actions)set gg_trg_Curse_Jutsu=CreateTrigger()call TriggerAddCondition(gg_trg_Curse_Jutsu,Condition(function Trig_Curse_Jutsu_Cond))call TriggerAddAction(gg_trg_Curse_Jutsu,function Trig_Curse_Jutsu_Act)set gg_trg_Curse_Dmg=CreateTrigger()
call DisableTrigger(gg_trg_Curse_Dmg)call TriggerAddAction(gg_trg_Curse_Dmg,function Trig_Curse_Dmg_Actions)set gg_trg_Curse_Area=CreateTrigger()call DisableTrigger(gg_trg_Curse_Area)call TriggerRegisterTimerEventPeriodic(gg_trg_Curse_Area,.08)call TriggerAddAction(gg_trg_Curse_Area,function Trig_Curse_Area_Actions)set gg_trg_Spear_Self_Pain=CreateTrigger()call TriggerAddCondition(gg_trg_Spear_Self_Pain,Condition(function Spear_Self_Pain_Conditions))call TriggerAddAction(gg_trg_Spear_Self_Pain,function Spear_Self_Pain_Actions)set udg_AI_Trig[27]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[27],Condition(function AI_Evil_Ichigo_Cond))call TriggerAddAction(udg_AI_Trig[27],function AI_Evil_Ichigo_Act)set gg_trg_White_Getsuga=CreateTrigger()
call TriggerAddCondition(gg_trg_White_Getsuga,Condition(function Trig_White_Getsuga_Conditions))
call TriggerAddAction(gg_trg_White_Getsuga,function Trig_White_Getsuga_Actions)set gg_trg_Getsuga_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Getsuga_Strike,Condition(function Trig_Getsuga_Strike_Conditions))call TriggerAddAction(gg_trg_Getsuga_Strike,function Trig_Getsuga_Strike_Actions)set gg_trg_Btz_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Btz_Init,Condition(function Trig_BtzInit_Conditions))call TriggerAddAction(gg_trg_Btz_Init,function Trig_BtzInit_Actions)
set gg_trg_Btz=CreateTrigger()call TriggerAddCondition(gg_trg_Btz,Condition(function Trig_Btz_Conditions))
call TriggerAddAction(gg_trg_Btz,function Trig_Btz_Actions)set gg_trg_Btz_Atk=CreateTrigger()call DisableTrigger(gg_trg_Btz_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Btz_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Btz_Atk,Condition(function Trig_Btz_Atk_Conditions))
call TriggerAddAction(gg_trg_Btz_Atk,function Trig_Btz_Atk_Actions)set gg_trg_Hsm=CreateTrigger()call TriggerAddCondition(gg_trg_Hsm,Condition(function Trig_Hsm_Conditions))
call TriggerAddAction(gg_trg_Hsm,function Trig_Hsm_Actions)set gg_trg_HsmL=CreateTrigger()call DisableTrigger(gg_trg_HsmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HsmL,.05)call TriggerAddAction(gg_trg_HsmL,function Trig_HsmL_Actions)set gg_trg_HsmL2=CreateTrigger()
call DisableTrigger(gg_trg_HsmL2)call TriggerRegisterTimerEventPeriodic(gg_trg_HsmL2,.03)
call TriggerAddAction(gg_trg_HsmL2,function Trig_HsmL2_Actions)set gg_trg_Evil_Moon_Slash=CreateTrigger()call TriggerAddCondition(gg_trg_Evil_Moon_Slash,Condition(function Black_Moon_Slash_Conditions))
call TriggerAddAction(gg_trg_Evil_Moon_Slash,function Black_Moon_Slash_Actions)set udg_AI_Trig[28]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[28],Condition(function AI_Sanji_Cond))call TriggerAddAction(udg_AI_Trig[28],function AI_Sanji_Act)
set gg_trg_Ptk_Cast=CreateTrigger()call TriggerAddCondition(gg_trg_Ptk_Cast,Condition(function Trig_Ptk_Cast_Conditions))call TriggerAddAction(gg_trg_Ptk_Cast,function Trig_Ptk_Cast_Actions)set gg_trg_Ptk=CreateTrigger()call TriggerAddCondition(gg_trg_Ptk,Condition(function Trig_Ptk_Conditions))
call TriggerAddAction(gg_trg_Ptk,function Trig_Ptk_Actions)set gg_trg_PtkL=CreateTrigger()call DisableTrigger(gg_trg_PtkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PtkL,.04)call TriggerAddAction(gg_trg_PtkL,function Trig_PtkL_Actions)set gg_trg_Veal_Shot=CreateTrigger()
call TriggerAddCondition(gg_trg_Veal_Shot,Condition(function Trig_Veal_Shot_Conditions))
call TriggerAddAction(gg_trg_Veal_Shot,function Trig_Veal_Shot_Actions)set gg_trg_Diable_Jambe=CreateTrigger()call TriggerAddCondition(gg_trg_Diable_Jambe,Condition(function Trig_Diable_Jambe_Conditions))call TriggerAddAction(gg_trg_Diable_Jambe,function Trig_Diable_Jambe_Actions)set gg_trg_Csh=CreateTrigger()call TriggerAddCondition(gg_trg_Csh,Condition(function Trig_Csh_Conditions))
call TriggerAddAction(gg_trg_Csh,function Trig_Csh_Actions)set gg_trg_CshL=CreateTrigger()call DisableTrigger(gg_trg_CshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CshL,.04)call TriggerAddAction(gg_trg_CshL,function Trig_CshL_Actions)set gg_trg_Lsh=CreateTrigger()call TriggerAddCondition(gg_trg_Lsh,Condition(function Trig_Lsh_Conditions))
call TriggerAddAction(gg_trg_Lsh,function Trig_Lsh_Actions)set gg_trg_LshL=CreateTrigger()call DisableTrigger(gg_trg_LshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LshL,.1)call TriggerAddAction(gg_trg_LshL,function Trig_LshL_Actions)set gg_trg_Lsh2=CreateTrigger()call DisableTrigger(gg_trg_Lsh2)
call TriggerRegisterTimerEventPeriodic(gg_trg_Lsh2,.03)call TriggerAddAction(gg_trg_Lsh2,function Trig_Lsh2_Actions)set gg_trg_Lsh3=CreateTrigger()call DisableTrigger(gg_trg_Lsh3)
call TriggerRegisterTimerEventPeriodic(gg_trg_Lsh3,.03)call TriggerAddAction(gg_trg_Lsh3,function Trig_Lsh3_Actions)set udg_AI_Trig[29]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[29],Condition(function AI_Zabuza_Cond))
call TriggerAddAction(udg_AI_Trig[29],function AI_Zabuza_Act)set gg_trg_Water_Prison=CreateTrigger()call TriggerAddCondition(gg_trg_Water_Prison,Condition(function Trig_Water_Prison_Conditions))call TriggerAddAction(gg_trg_Water_Prison,function Trig_Water_Prison_Actions)set gg_trg_Wdg=CreateTrigger()call TriggerAddCondition(gg_trg_Wdg,Condition(function Trig_Wdg_Conditions))
call TriggerAddAction(gg_trg_Wdg,function Trig_Wdg_Actions)set gg_trg_WdgL=CreateTrigger()call DisableTrigger(gg_trg_WdgL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WdgL,.04)call TriggerAddAction(gg_trg_WdgL,function Trig_WdgL_Actions)set gg_trg_Flying_Turn_Slash=CreateTrigger()
call TriggerAddCondition(gg_trg_Flying_Turn_Slash,Condition(function Trig_Flying_Turn_Slash_Conditions))
call TriggerAddAction(gg_trg_Flying_Turn_Slash,function Trig_Flying_Turn_Slash_Actions)set gg_trg_Hidden_Mist_Jutsu=CreateTrigger()
call TriggerAddCondition(gg_trg_Hidden_Mist_Jutsu,Condition(function Hidden_Mist_Jutsu_Conditions))call TriggerAddAction(gg_trg_Hidden_Mist_Jutsu,function Hidden_Mist_Jutsu_Act)set gg_trg_Skl=CreateTrigger()call TriggerAddCondition(gg_trg_Skl,Condition(function Trig_Skl_Conditions))
call TriggerAddAction(gg_trg_Skl,function Trig_Skl_Actions)set gg_trg_SklV=CreateTrigger()call DisableTrigger(gg_trg_SklV)
call TriggerRegisterTimerEventPeriodic(gg_trg_SklV,.05)call TriggerAddAction(gg_trg_SklV,function Trig_SklV_Actions)set gg_trg_Demon_Power=CreateTrigger()call TriggerAddCondition(gg_trg_Demon_Power,Condition(function Trig_Demon_Power_Conditions))
call TriggerAddAction(gg_trg_Demon_Power,function Trig_Demon_Power_Actions)set gg_trg_Demon_Power_Attack=CreateTrigger()call DisableTrigger(gg_trg_Demon_Power_Attack)call TriggerRegisterAnyUnitEventBJ(gg_trg_Demon_Power_Attack,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Demon_Power_Attack,Condition(function Trig_Demon_Power_Attack_Conditions))call TriggerAddAction(gg_trg_Demon_Power_Attack,function Trig_Demon_Power_Attack_Actions)set gg_trg_Gvj=CreateTrigger()call TriggerAddCondition(gg_trg_Gvj,Condition(function Trig_Gvj_Conditions))
call TriggerAddAction(gg_trg_Gvj,function Trig_Gvj_Actions)set gg_trg_GvjL=CreateTrigger()call DisableTrigger(gg_trg_GvjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvjL,.1)call TriggerAddAction(gg_trg_GvjL,function Trig_GvjL_Actions)set gg_trg_GvjM=CreateTrigger()call DisableTrigger(gg_trg_GvjM)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvjM,.04)call TriggerAddAction(gg_trg_GvjM,function Trig_GvjM_Actions)set udg_AI_Trig[30]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[30],Condition(function AI_Yoruichi_Cond))call TriggerAddAction(udg_AI_Trig[30],function AI_Yoruichi_Act)set gg_trg_Flb=CreateTrigger()call TriggerAddCondition(gg_trg_Flb,Condition(function Trig_Flb_Conditions))
call TriggerAddAction(gg_trg_Flb,function Trig_Flb_Actions)set gg_trg_FlbL=CreateTrigger()call DisableTrigger(gg_trg_FlbL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FlbL,.03)call TriggerAddAction(gg_trg_FlbL,function Trig_FlbL_Actions)set gg_trg_Flw=CreateTrigger()call TriggerAddCondition(gg_trg_Flw,Condition(function Flw_Init_Conditions))
call TriggerAddAction(gg_trg_Flw,function Flw_Init_Act)set gg_trg_Flw_Atk=CreateTrigger()call DisableTrigger(gg_trg_Flw_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Flw_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Flw_Atk,Condition(function Trig_Strike_Conditions))call TriggerAddAction(gg_trg_Flw_Atk,function Trig_Strike_Actions)set gg_trg_FlwL=CreateTrigger()call DisableTrigger(gg_trg_FlwL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FlwL,.03)call TriggerAddAction(gg_trg_FlwL,function Trig_FlwL_Actions)set gg_trg_Flash_Strike=CreateTrigger()call TriggerAddCondition(gg_trg_Flash_Strike,Condition(function Flash_Strike_Conditions))call TriggerAddAction(gg_trg_Flash_Strike,function Flash_Strike_Actions)
set gg_trg_Shunko_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Shunko_Init,Condition(function Trig_ShunkoInit_Conditions))call TriggerAddAction(gg_trg_Shunko_Init,function Trig_ShunkoInit_Actions)set gg_trg_Shunko=CreateTrigger()call TriggerAddCondition(gg_trg_Shunko,Condition(function Trig_Shunko_Cond))
call TriggerAddAction(gg_trg_Shunko,function Trig_Shunko_Act)set gg_trg_Flo=CreateTrigger()call TriggerAddCondition(gg_trg_Flo,Condition(function Trig_Flo_Conditions))
call TriggerAddAction(gg_trg_Flo,function Trig_Flo_Actions)set gg_trg_FloL=CreateTrigger()call DisableTrigger(gg_trg_FloL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FloL,.15)call TriggerAddAction(gg_trg_FloL,function Trig_FloL_Actions)set gg_trg_FloL2=CreateTrigger()
call DisableTrigger(gg_trg_FloL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FloL2,.03)
call TriggerAddAction(gg_trg_FloL2,function Trig_FloL2_Actions)set udg_AI_Trig[31]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[31],Condition(function AI_Lucci_Cond))call TriggerAddAction(udg_AI_Trig[31],function AI_Lucci_Act)
set gg_trg_Tpk=CreateTrigger()call TriggerAddCondition(gg_trg_Tpk,Condition(function Trig_Tpk_Conditions))
call TriggerAddAction(gg_trg_Tpk,function Trig_Tpk_Actions)set gg_trg_TpkL=CreateTrigger()call DisableTrigger(gg_trg_TpkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TpkL,.04)call TriggerAddAction(gg_trg_TpkL,function Trig_TpkL_Actions)set gg_trg_Shigan=CreateTrigger()call TriggerAddCondition(gg_trg_Shigan,Condition(function Trig_Shigan_Conditions))call TriggerAddAction(gg_trg_Shigan,function Trig_Shigan_Actions)set gg_trg_Tki_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Tki_Init,Condition(function Trig_TkiInit_Cond))call TriggerAddAction(gg_trg_Tki_Init,function Trig_TkiInit_Actions)
set gg_trg_Tki=CreateTrigger()call TriggerAddCondition(gg_trg_Tki,Condition(function Trig_Tki_Cond))call TriggerAddAction(gg_trg_Tki,function Trig_Tki_Act)set gg_trg_Baf_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Baf_Init,Condition(function Trig_BafInit_Conditions))call TriggerAddAction(gg_trg_Baf_Init,function Trig_BafInit_Actions)
set gg_trg_Baf=CreateTrigger()call TriggerAddCondition(gg_trg_Baf,Condition(function Trig_Baf_Cond))call TriggerAddAction(gg_trg_Baf,function Trig_Baf_Act)set gg_trg_Rog=CreateTrigger()call TriggerAddCondition(gg_trg_Rog,Condition(function Trig_Rog_Conditions))
call TriggerAddAction(gg_trg_Rog,function Trig_Rog_Actions)set gg_trg_RogL=CreateTrigger()call DisableTrigger(gg_trg_RogL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RogL,.16)call TriggerAddAction(gg_trg_RogL,function Trig_RogL_Actions)set udg_AI_Trig[32]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[32],Condition(function AI_Tobi_Cond))call TriggerAddAction(udg_AI_Trig[32],function AI_Tobi_Act)set gg_trg_TimeSpace=CreateTrigger()
call TriggerAddCondition(gg_trg_TimeSpace,Condition(function Trig_TimeSpace_Conditions))
call TriggerAddAction(gg_trg_TimeSpace,function Trig_TimeSpace_Actions)set gg_trg_TimeSpaceL=CreateTrigger()call DisableTrigger(gg_trg_TimeSpaceL)call TriggerRegisterTimerEventPeriodic(gg_trg_TimeSpaceL,.05)call TriggerAddAction(gg_trg_TimeSpaceL,function Trig_TimeSpaceL_Actions)set gg_trg_Kot=CreateTrigger()call TriggerAddCondition(gg_trg_Kot,Condition(function Trig_Kot_Conditions))
call TriggerAddAction(gg_trg_Kot,function Trig_Kot_Actions)set gg_trg_KotL=CreateTrigger()call DisableTrigger(gg_trg_KotL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KotL,.04)call TriggerAddAction(gg_trg_KotL,function Trig_KotL_Actions)set gg_trg_Kamui_Strike_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_Kamui_Strike_Learn,Condition(function Trig_Kamui_Strike_Learn_Conditions))call TriggerAddAction(gg_trg_Kamui_Strike_Learn,function Trig_Kamui_Strike_Learn_Actions)set gg_trg_Kamui_Strike=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Kamui_Strike,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Kamui_Strike,Condition(function Trig_Kamui_Strike_Conditions))call TriggerAddAction(gg_trg_Kamui_Strike,function Trig_Kamui_Strike_Actions)set gg_trg_Kmo=CreateTrigger()call TriggerAddCondition(gg_trg_Kmo,Condition(function Trig_Kmo_Conditions))
call TriggerAddAction(gg_trg_Kmo,function Trig_Kmo_Actions)set gg_trg_KmoL=CreateTrigger()call DisableTrigger(gg_trg_KmoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_KmoL,.04)call TriggerAddAction(gg_trg_KmoL,function Trig_KmoL_Actions)set gg_trg_Switch_Body_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Switch_Body_Init,Condition(function Trig_Switch_Body_Init_Conditions))call TriggerAddAction(gg_trg_Switch_Body_Init,function Trig_Switch_Body_Init_Actions)set gg_trg_Switch_Body=CreateTrigger()call TriggerAddCondition(gg_trg_Switch_Body,Condition(function Trig_Switch_Body_Conditions))
call TriggerAddAction(gg_trg_Switch_Body,function Trig_Switch_Body_Actions)set gg_trg_Switch_Body_Dmg=CreateTrigger()call DisableTrigger(gg_trg_Switch_Body_Dmg)call TriggerAddAction(gg_trg_Switch_Body_Dmg,function Trig_Switch_Body_Dmg_Actions)set gg_trg_Izanagi_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Izanagi_Init,Condition(function Trig_Izanagi_Init_Conditions))call TriggerAddAction(gg_trg_Izanagi_Init,function Trig_Izanagi_Init_Actions)set gg_trg_Izanagi=CreateTrigger()call TriggerAddCondition(gg_trg_Izanagi,Condition(function Izanagi_Cond))call TriggerAddAction(gg_trg_Izanagi,function Izanagi_Act)set gg_trg_Izanagi_L=CreateTrigger()
call DisableTrigger(gg_trg_Izanagi_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Izanagi_L,.05)
call TriggerAddAction(gg_trg_Izanagi_L,function Trig_Izanagi_L_Actions)set gg_trg_Izanagi_Speed=CreateTrigger()
call TriggerAddAction(gg_trg_Izanagi_Speed,function Trig_Izanagi_Speed_Actions)set udg_AI_Trig[33]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[33],Condition(function AI_Starrk_Cond))
call TriggerAddAction(udg_AI_Trig[33],function AI_Starrk_Act)set gg_trg_Rapid_Shot_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_Rapid_Shot_Learn,Condition(function Trig_Rapid_Shot_Learn_Conditions))call TriggerAddAction(gg_trg_Rapid_Shot_Learn,function Trig_Rapid_Shot_Learn_Actions)set gg_trg_Rapid_Shot=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gg_trg_Rapid_Shot,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_Rapid_Shot,Condition(function Trig_Rapid_Shot_Conditions))call TriggerAddAction(gg_trg_Rapid_Shot,function Trig_Rapid_Shot_Actions)set gg_trg_Shs=CreateTrigger()call TriggerAddCondition(gg_trg_Shs,Condition(function Trig_Shs_Conditions))
call TriggerAddAction(gg_trg_Shs,function Trig_Shs_Actions)set gg_trg_ShsL=CreateTrigger()call DisableTrigger(gg_trg_ShsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_ShsL,.03)call TriggerAddAction(gg_trg_ShsL,function Trig_ShsL_Actions)set gg_trg_Iah=CreateTrigger()call TriggerAddCondition(gg_trg_Iah,Condition(function Trig_Iah_Conditions))
call TriggerAddAction(gg_trg_Iah,function Trig_Iah_Actions)set gg_trg_IahL=CreateTrigger()call DisableTrigger(gg_trg_IahL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahL,.06)call TriggerAddAction(gg_trg_IahL,function Trig_IahL_Actions)set gg_trg_IahM=CreateTrigger()call DisableTrigger(gg_trg_IahM)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahM,.04)call TriggerAddAction(gg_trg_IahM,function Trig_IahM_Actions)set gg_trg_IahP=CreateTrigger()call DisableTrigger(gg_trg_IahP)
call TriggerRegisterTimerEventPeriodic(gg_trg_IahP,.04)call TriggerAddAction(gg_trg_IahP,function Trig_IahP_Actions)set gg_trg_IahC=CreateTrigger()call DisableTrigger(gg_trg_IahC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_IahC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_IahC,Condition(function Trig_IahC_Conditions))call TriggerAddAction(gg_trg_IahC,function Trig_IahC_Actions)set udg_Wlv_Trigger[0]=CreateTrigger()call TriggerAddCondition(udg_Wlv_Trigger[0],Condition(function Wlv_Cond1))call TriggerAddAction(udg_Wlv_Trigger[0],function Trig_Wlv_Act1)
set udg_Wlv_Trigger[1]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[1])call TriggerRegisterEnterRectSimple(udg_Wlv_Trigger[1],GetWorldBounds())
call TriggerAddCondition(udg_Wlv_Trigger[1],Condition(function Wlv_Cond2))call TriggerAddAction(udg_Wlv_Trigger[1],function Trig_Wlv_Act2)
set udg_Wlv_Trigger[2]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[2])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[2],EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
call TriggerAddCondition(udg_Wlv_Trigger[2],Condition(function Wlv_Cond3))call TriggerAddAction(udg_Wlv_Trigger[2],function Trig_Wlv_Act3)
set udg_Wlv_Trigger[3]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[3])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[3],EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(udg_Wlv_Trigger[3],Condition(function Wlv_Cond4))call TriggerAddAction(udg_Wlv_Trigger[3],function Trig_Wlv_Act4)
set udg_Wlv_Trigger[4]=CreateTrigger()call DisableTrigger(udg_Wlv_Trigger[4])call TriggerRegisterAnyUnitEventBJ(udg_Wlv_Trigger[4],EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(udg_Wlv_Trigger[4],Condition(function Wlv_Cond5))call TriggerAddAction(udg_Wlv_Trigger[4],function Trig_Wlv_Act5)
set gg_trg_Mgh=CreateTrigger()call TriggerAddCondition(gg_trg_Mgh,Condition(function Trig_Mgh_Conditions))
call TriggerAddAction(gg_trg_Mgh,function Trig_Mgh_Actions)set gg_trg_MghA=CreateTrigger()call DisableTrigger(gg_trg_MghA)
call TriggerRegisterAnyUnitEventBJ(gg_trg_MghA,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_MghA,Condition(function MghA_Conditions))call TriggerAddAction(gg_trg_MghA,function MghA_Actions)
set gg_trg_Ing=CreateTrigger()call TriggerAddCondition(gg_trg_Ing,Condition(function Trig_Ing_Conditions))
call TriggerAddAction(gg_trg_Ing,function Trig_Ing_Actions)set gg_trg_IngL=CreateTrigger()call DisableTrigger(gg_trg_IngL)
call TriggerRegisterTimerEventPeriodic(gg_trg_IngL,.04)call TriggerAddAction(gg_trg_IngL,function IngL_Actions)
set gg_trg_Ryu=CreateTrigger()call TriggerAddCondition(gg_trg_Ryu,Condition(function Trig_Ryu_Conditions))
call TriggerAddAction(gg_trg_Ryu,function Trig_Ryu_Actions)set gg_trg_RyuL=CreateTrigger()call DisableTrigger(gg_trg_RyuL)
call TriggerRegisterTimerEventPeriodic(gg_trg_RyuL,.05)call TriggerAddAction(gg_trg_RyuL,function Trig_RyuD_Actions)set gg_trg_Mgo=CreateTrigger()call TriggerAddCondition(gg_trg_Mgo,Condition(function Trig_Mgo_Conditions))
call TriggerAddAction(gg_trg_Mgo,function Trig_Mgo_Actions)set gg_trg_MgoL=CreateTrigger()call DisableTrigger(gg_trg_MgoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_MgoL,.04)call TriggerAddAction(gg_trg_MgoL,function Trig_MgoL_Actions)set udg_AI_Trig[35]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[35],Condition(function AI_Hashirama_Cond))call TriggerAddAction(udg_AI_Trig[35],function AI_Hashirama_Act)
set gg_trg_Universe=CreateTrigger()call TriggerAddCondition(gg_trg_Universe,Condition(function Trig_Universe_Conditions))call TriggerAddAction(gg_trg_Universe,function Trig_Universe_Actions)set gg_trg_Wgf=CreateTrigger()call TriggerAddCondition(gg_trg_Wgf,Condition(function Trig_Wgf_Conditions))
call TriggerAddAction(gg_trg_Wgf,function Trig_Wgf_Actions)set gg_trg_WgfL=CreateTrigger()call DisableTrigger(gg_trg_WgfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WgfL,.04)call TriggerAddAction(gg_trg_WgfL,function Trig_WgfL_Actions)set gg_trg_Wood_Destruction=CreateTrigger()call TriggerAddCondition(gg_trg_Wood_Destruction,Condition(function Trig_Wood_Destruction_Conditions))call TriggerAddAction(gg_trg_Wood_Destruction,function Trig_Wood_Destruction_Actions)set gg_trg_Five_Rashomon=CreateTrigger()
call TriggerAddCondition(gg_trg_Five_Rashomon,Condition(function Trig_Rmg_Conditions))call TriggerAddAction(gg_trg_Five_Rashomon,function Trig_Rmg_Actions)set gg_trg_Wdm=CreateTrigger()call TriggerAddCondition(gg_trg_Wdm,Condition(function Trig_Wdm_Conditions))
call TriggerAddAction(gg_trg_Wdm,function Trig_Wdm_Actions)set gg_trg_Wdm_L=CreateTrigger()
call DisableTrigger(gg_trg_Wdm_L)call TriggerRegisterTimerEventPeriodic(gg_trg_Wdm_L,.05)
call TriggerAddAction(gg_trg_Wdm_L,function Trig_Wdm_L_Actions)set gg_trg_Wmk=CreateTrigger()call TriggerAddCondition(gg_trg_Wmk,Condition(function Trig_Tmk_Cond))call TriggerAddAction(gg_trg_Wmk,function Trig_Wmk_Actions)set gg_trg_WmkL=CreateTrigger()call DisableTrigger(gg_trg_WmkL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WmkL,.09)call TriggerAddAction(gg_trg_WmkL,function Trig_WmkL_Actions)set udg_AI_Trig[36]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[36],Condition(function AI_Ulquiorra_Cond))call TriggerAddAction(udg_AI_Trig[36],function AI_Ulquiorra_Act)
set gg_trg_Memory_Erasing=CreateTrigger()call TriggerAddCondition(gg_trg_Memory_Erasing,Condition(function Trig_Memory_Erasing_Conditions))call TriggerAddAction(gg_trg_Memory_Erasing,function Trig_Memory_Erasing_Actions)set gg_trg_Hoq=CreateTrigger()call TriggerAddCondition(gg_trg_Hoq,Condition(function Trig_Hoq_Conditions))
call TriggerAddAction(gg_trg_Hoq,function Trig_Hoq_Actions)set gg_trg_HoqL=CreateTrigger()call DisableTrigger(gg_trg_HoqL)
call TriggerRegisterTimerEventPeriodic(gg_trg_HoqL,.04)call TriggerAddAction(gg_trg_HoqL,function Trig_HoqL_Actions)set gg_trg_Urs_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Urs_Init,Condition(function Trig_UrsInit_Conditions))call TriggerAddAction(gg_trg_Urs_Init,function Trig_UrsInit_Actions)
set gg_trg_Urs=CreateTrigger()call TriggerAddCondition(gg_trg_Urs,Condition(function Trig_Urs_Conditions))
call TriggerAddAction(gg_trg_Urs,function Trig_Urs_Actions)set gg_trg_Urs_Atk=CreateTrigger()call DisableTrigger(gg_trg_Urs_Atk)call TriggerRegisterAnyUnitEventBJ(gg_trg_Urs_Atk,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Urs_Atk,Condition(function Trig_Urs_Atk_Conditions))
call TriggerAddAction(gg_trg_Urs_Atk,function Trig_Urs_Atk_Actions)set gg_trg_Lance_of_Lightning=CreateTrigger()call TriggerAddCondition(gg_trg_Lance_of_Lightning,Condition(function Lance_of_Lightning_Cond))call TriggerAddAction(gg_trg_Lance_of_Lightning,function Lance_of_Lightning_Act)
set udg_AI_Trig[37]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[37],Condition(function AI_Kizaru_Cond))
call TriggerAddAction(udg_AI_Trig[37],function AI_Kizaru_Act)set gg_trg_Lsc=CreateTrigger()call TriggerAddCondition(gg_trg_Lsc,Condition(function Trig_Lsc_Conditions))
call TriggerAddAction(gg_trg_Lsc,function Trig_Lsc_Actions)set gg_trg_LscL=CreateTrigger()call DisableTrigger(gg_trg_LscL)
call TriggerRegisterTimerEventPeriodic(gg_trg_LscL,.03)call TriggerAddAction(gg_trg_LscL,function Trig_LscL_Actions)set gg_trg_Eight_Span_Mirror=CreateTrigger()
call TriggerAddCondition(gg_trg_Eight_Span_Mirror,Condition(function Trig_Eight_Span_Mirror_Conditions))
call TriggerAddAction(gg_trg_Eight_Span_Mirror,function Trig_Eight_Span_Mirror_Actions)set gg_trg_Cje=CreateTrigger()call TriggerAddCondition(gg_trg_Cje,Condition(function Trig_Cje_Conditions))
call TriggerAddAction(gg_trg_Cje,function Trig_Cje_Actions)set gg_trg_CjeL=CreateTrigger()call DisableTrigger(gg_trg_CjeL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CjeL,.08)call TriggerAddAction(gg_trg_CjeL,function Trig_CjeL_Actions)set gg_trg_CjeC=CreateTrigger()call DisableTrigger(gg_trg_CjeC)
call TriggerRegisterAnyUnitEventBJ(gg_trg_CjeC,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gg_trg_CjeC,Condition(function Trig_CjeC_Conditions))call TriggerAddAction(gg_trg_CjeC,function Trig_CjeC_Actions)set udg_AI_Trig[38]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[38],Condition(function AI_Tobirama_Cond))call TriggerAddAction(udg_AI_Trig[38],function AI_Tobirama_Act)set gg_trg_Wvf=CreateTrigger()call TriggerAddCondition(gg_trg_Wvf,Condition(function Trig_Wvf_Conditions))
call TriggerAddAction(gg_trg_Wvf,function Trig_Wvf_Actions)set gg_trg_WvfL=CreateTrigger()call DisableTrigger(gg_trg_WvfL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WvfL,.04)call TriggerAddAction(gg_trg_WvfL,function Trig_WvfL_Actions)set gg_trg_Giant_Water=CreateTrigger()call TriggerAddCondition(gg_trg_Giant_Water,Condition(function Trig_Giant_Water_Conditions))
call TriggerAddAction(gg_trg_Giant_Water,function Trig_Giant_Water_Actions)set gg_trg_Wdj=CreateTrigger()call TriggerAddCondition(gg_trg_Wdj,Condition(function Trig_Wdj_Conditions))
call TriggerAddAction(gg_trg_Wdj,function Trig_Wdj_Actions)set gg_trg_WdjL=CreateTrigger()call DisableTrigger(gg_trg_WdjL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WdjL,.04)call TriggerAddAction(gg_trg_WdjL,function Trig_WdjL_Actions)set gg_trg_Www=CreateTrigger()call TriggerAddCondition(gg_trg_Www,Condition(function Trig_Www_Conditions))
call TriggerAddAction(gg_trg_Www,function Trig_Www_Actions)set gg_trg_WwwL=CreateTrigger()call DisableTrigger(gg_trg_WwwL)
call TriggerRegisterTimerEventPeriodic(gg_trg_WwwL,.06)call TriggerAddAction(gg_trg_WwwL,function Trig_WwwL_Actions)set gg_trg_Water_Wave=CreateTrigger()call TriggerAddCondition(gg_trg_Water_Wave,Condition(function Trig_Water_Wave_Conditions))call TriggerAddAction(gg_trg_Water_Wave,function Trig_Water_Wave_Actions)set gg_trg_Infinite_Darkness=CreateTrigger()
call TriggerAddCondition(gg_trg_Infinite_Darkness,Condition(function Infinite_Darkness_Conditions))call TriggerAddAction(gg_trg_Infinite_Darkness,function Trig_Infinite_Darkness_Actions)set udg_AI_Trig[39]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[39],Condition(function AI_Gimmjow_Cond))call TriggerAddAction(udg_AI_Trig[39],function AI_Gimmjow_Act)set gg_trg_Cpt=CreateTrigger()call TriggerAddCondition(gg_trg_Cpt,Condition(function Trig_Cpt_Conditions))
call TriggerAddAction(gg_trg_Cpt,function Trig_Cpt_Actions)set gg_trg_CptL=CreateTrigger()call DisableTrigger(gg_trg_CptL)
call TriggerRegisterTimerEventPeriodic(gg_trg_CptL,.03)call TriggerAddAction(gg_trg_CptL,function Trig_CptL_Actions)set gg_trg_BerserkerBlood_Learn=CreateTrigger()call TriggerAddCondition(gg_trg_BerserkerBlood_Learn,Condition(function Trig_BerserkerBlood_Learn_Conditions))call TriggerAddAction(gg_trg_BerserkerBlood_Learn,function Trig_BerserkerBlood_Learn_Actions)set gg_trg_BerserkerBlood=CreateTrigger()call DisableTrigger(gg_trg_BerserkerBlood)call TriggerRegisterAnyUnitEventBJ(gg_trg_BerserkerBlood,EVENT_PLAYER_UNIT_ATTACKED)
call TriggerAddCondition(gg_trg_BerserkerBlood,Condition(function Trig_BerserkerBlood_Conditions))call TriggerAddAction(gg_trg_BerserkerBlood,function Trig_BerserkerBlood_Actions)set gg_trg_Grimmjow_Res_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_Grimmjow_Res_Init,Condition(function Trig_Grimmjow_ResInit_Conditions))call TriggerAddAction(gg_trg_Grimmjow_Res_Init,function Trig_Grimmjow_ResInit_Actions)set gg_trg_Grimmjow_Res=CreateTrigger()call TriggerAddCondition(gg_trg_Grimmjow_Res,Condition(function Trig_Grimmjow_Res_Conditions))call TriggerAddAction(gg_trg_Grimmjow_Res,function Trig_Grimmjow_Res_Actions)set gg_trg_Pkc=CreateTrigger()call TriggerAddCondition(gg_trg_Pkc,Condition(function Trig_Pkc_Conditions))
call TriggerAddAction(gg_trg_Pkc,function Trig_Pkc_Actions)set gg_trg_PkcL=CreateTrigger()call DisableTrigger(gg_trg_PkcL)
call TriggerRegisterTimerEventPeriodic(gg_trg_PkcL,.04)call TriggerAddAction(gg_trg_PkcL,function Trig_PkcL_Actions)set udg_AI_Trig[40]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[40],Condition(function AI_Fujitora_Cond))call TriggerAddAction(udg_AI_Trig[40],function AI_Fujitora_Act)set gg_trg_GravityBlade_Init=CreateTrigger()
call TriggerAddCondition(gg_trg_GravityBlade_Init,Condition(function Trig_GravityBlade_Init_Conditions))
call TriggerAddAction(gg_trg_GravityBlade_Init,function Trig_GravityBlade_Init_Actions)set gg_trg_GravityBlade=CreateTrigger()call DisableTrigger(gg_trg_GravityBlade)
call TriggerRegisterAnyUnitEventBJ(gg_trg_GravityBlade,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_GravityBlade,Condition(function Trig_GravityBlade_Conditions))call TriggerAddAction(gg_trg_GravityBlade,function Trig_GravityBlade_Actions)set gg_trg_Gravity_Slam=CreateTrigger()call TriggerAddCondition(gg_trg_Gravity_Slam,Condition(function Trig_Gravity_Slam_Conditions))call TriggerAddAction(gg_trg_Gravity_Slam,function Trig_Gravity_Slam_Actions)set gg_trg_Gvs=CreateTrigger()call TriggerAddCondition(gg_trg_Gvs,Condition(function Trig_Gvs_Conditions))
call TriggerAddAction(gg_trg_Gvs,function Trig_Gvs_Actions)set gg_trg_GvsL=CreateTrigger()call DisableTrigger(gg_trg_GvsL)
call TriggerRegisterTimerEventPeriodic(gg_trg_GvsL,.04)call TriggerAddAction(gg_trg_GvsL,function Trig_GvsL_Actions)set gg_trg_Meteor_Storm=CreateTrigger()call TriggerAddCondition(gg_trg_Meteor_Storm,Condition(function Trig_Meteor_Storm_Conditions))call TriggerAddAction(gg_trg_Meteor_Storm,function Trig_Meteor_Storm_Actions)set gg_trg_Fgr=CreateTrigger()call TriggerAddCondition(gg_trg_Fgr,Condition(function Trig_Fgr_Conditions))
call TriggerAddAction(gg_trg_Fgr,function Trig_Fgr_Actions)set gg_trg_FgrC=CreateTrigger()call DisableTrigger(gg_trg_FgrC)
call TriggerRegisterTimerEventPeriodic(gg_trg_FgrC,.1)call TriggerAddAction(gg_trg_FgrC,function Trig_FgrC_Actions)set gg_trg_FgrL=CreateTrigger()call DisableTrigger(gg_trg_FgrL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FgrL,.04)call TriggerAddAction(gg_trg_FgrL,function Trig_FgrL_Actions)set gg_trg_FgrL2=CreateTrigger()
call DisableTrigger(gg_trg_FgrL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FgrL2,.04)
call TriggerAddAction(gg_trg_FgrL2,function Trig_FgrL2_Actions)set udg_AI_Trig[41]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[41],Condition(function AI_Kaguya_Cond))
call TriggerAddAction(udg_AI_Trig[41],function AI_Kaguya_Act)set gg_trg_Ush=CreateTrigger()call TriggerAddCondition(gg_trg_Ush,Condition(function Trig_Ush_Conditions))
call TriggerAddAction(gg_trg_Ush,function Trig_Ush_Actions)set gg_trg_UshL=CreateTrigger()call DisableTrigger(gg_trg_UshL)
call TriggerRegisterTimerEventPeriodic(gg_trg_UshL,.05)call TriggerAddAction(gg_trg_UshL,function Trig_UshL_Actions)set gg_trg_Tbi=CreateTrigger()call TriggerAddCondition(gg_trg_Tbi,Condition(function Trig_Tbi_Conditions))
call TriggerAddAction(gg_trg_Tbi,function Trig_Tbi_Actions)set gg_trg_TbiC=CreateTrigger()call DisableTrigger(gg_trg_TbiC)
call TriggerRegisterTimerEventPeriodic(gg_trg_TbiC,.08)call TriggerAddAction(gg_trg_TbiC,function Trig_TbiC_Actions)set gg_trg_TbiL=CreateTrigger()call DisableTrigger(gg_trg_TbiL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TbiL,.04)call TriggerAddAction(gg_trg_TbiL,function Trig_TbiL_Actions)set gg_trg_Dark_Roots=CreateTrigger()call TriggerAddCondition(gg_trg_Dark_Roots,Condition(function Trig_Dark_Roots_Conditions))call TriggerAddAction(gg_trg_Dark_Roots,function Trig_Dark_Roots_Actions)set gg_trg_Tnh=CreateTrigger()call TriggerAddCondition(gg_trg_Tnh,Condition(function Trig_Tnh_Conditions))
call TriggerAddAction(gg_trg_Tnh,function Trig_Tnh_Actions)set gg_trg_TnhA=CreateTrigger()call DisableTrigger(gg_trg_TnhA)
call TriggerRegisterAnyUnitEventBJ(gg_trg_TnhA,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_TnhA,Condition(function Trig_TnhA_Conditions))call TriggerAddAction(gg_trg_TnhA,function Trig_TnhA_Actions)set gg_trg_Aoi_Learn=CreateTrigger()
call TriggerAddCondition(gg_trg_Aoi_Learn,Condition(function Trig_Aoi_Learn_Conditions))
call TriggerAddAction(gg_trg_Aoi_Learn,function Trig_Aoi_Learn_Actions)set gg_trg_Aoi=CreateTrigger()call TriggerAddCondition(gg_trg_Aoi,Condition(function Trig_Aoi_Conditions))
call TriggerAddAction(gg_trg_Aoi,function Trig_Aoi_Actions)set gg_trg_Tso=CreateTrigger()call TriggerAddCondition(gg_trg_Tso,Condition(function Trig_Tso_Conditions))
call TriggerAddAction(gg_trg_Tso,function Trig_Tso_Actions)set gg_trg_TsoL=CreateTrigger()call DisableTrigger(gg_trg_TsoL)
call TriggerRegisterTimerEventPeriodic(gg_trg_TsoL,.04)call TriggerAddAction(gg_trg_TsoL,function Trig_TsoL_Actions)set udg_AI_Trig[42]=CreateTrigger()call TriggerAddCondition(udg_AI_Trig[42],Condition(function AI_Ikkaku_Cond))
call TriggerAddAction(udg_AI_Trig[42],function AI_Ikkaku_Act)set gg_trg_Great_Cleave=CreateTrigger()call TriggerAddCondition(gg_trg_Great_Cleave,Condition(function Trig_Great_Cleave_Conditions))call TriggerAddAction(gg_trg_Great_Cleave,function Trig_Great_Cleave_Actions)set gg_trg_Counter_Spin=CreateTrigger()call DisableTrigger(gg_trg_Counter_Spin)
call TriggerRegisterAnyUnitEventBJ(gg_trg_Counter_Spin,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(gg_trg_Counter_Spin,Condition(function Trig_Counter_Spin_Conditions))call TriggerAddAction(gg_trg_Counter_Spin,function Trig_Counter_Spin_Actions)set gg_trg_Ikkaku_Bankai_Init=CreateTrigger()call TriggerAddCondition(gg_trg_Ikkaku_Bankai_Init,Condition(function Trig_Ikkaku_Bankai_Init_Conditions))call TriggerAddAction(gg_trg_Ikkaku_Bankai_Init,function Trig_Ikkaku_Bankai_Init_Actions)set gg_trg_Ikkaku_Bankai=CreateTrigger()
call TriggerAddCondition(gg_trg_Ikkaku_Bankai,Condition(function Trig_Ikkaku_Bankai_Conditions))
call TriggerAddAction(gg_trg_Ikkaku_Bankai,function Trig_Ikkaku_Bankai_Actions)set gg_trg_Dragon_Charge=CreateTrigger()
call TriggerAddCondition(gg_trg_Dragon_Charge,Condition(function Trig_Dragon_Charge_Conditions))
call TriggerAddAction(gg_trg_Dragon_Charge,function Trig_Dragon_Charge_Actions)set gg_trg_Fnm=CreateTrigger()call TriggerAddCondition(gg_trg_Fnm,Condition(function Trig_Fnm_Conditions))
call TriggerAddAction(gg_trg_Fnm,function Trig_Fnm_Actions)set gg_trg_FnmL=CreateTrigger()call DisableTrigger(gg_trg_FnmL)
call TriggerRegisterTimerEventPeriodic(gg_trg_FnmL,.03)call TriggerAddAction(gg_trg_FnmL,function Trig_FnmL_Actions)set gg_trg_FnmL2=CreateTrigger()
call DisableTrigger(gg_trg_FnmL2)call TriggerRegisterTimerEventPeriodic(gg_trg_FnmL2,.04)
call TriggerAddAction(gg_trg_FnmL2,function Trig_FnmL2_Actions)set gg_trg_Soifon_ShunkouD=CreateTrigger()call TriggerAddAction(gg_trg_Soifon_ShunkouD,function Trig_Soifon_ShunkouD_Act)call ConditionalTriggerExecute(gg_trg_Initialization1)endfunctionfunction config takes nothing returns nothingcall SetMapName("TRIGSTR_062")call SetMapDescription("TRIGSTR_064")call SetPlayers($C)call SetTeams($C)call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)call DefineStartLocation(0,6912.,-5888.)
call DefineStartLocation(1,6592.,-5824.)
call DefineStartLocation(2,7040.,-6080.)
call DefineStartLocation(3,6720.,-6144.)
call DefineStartLocation(4,6784.,-5568.)
call DefineStartLocation(5,7040.,-5760.)
call DefineStartLocation(6,6976.,-5696.)
call DefineStartLocation(7,6912.,-6016.)
call DefineStartLocation(8,7296.,-5952.)
call DefineStartLocation(9,7104.,-5568.)
call DefineStartLocation($A,7232.,-5760.)call DefineStartLocation($B,6912.,-5824.)call SetPlayerStartLocation(Player(0),0)
call ForcePlayerStartLocation(Player(0),0)call SetPlayerColor(Player(0),ConvertPlayerColor(0))
call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(0),false)call SetPlayerController(Player(0),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(1),1)
call ForcePlayerStartLocation(Player(1),1)call SetPlayerColor(Player(1),ConvertPlayerColor(1))
call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(1),false)call SetPlayerController(Player(1),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(2),2)
call ForcePlayerStartLocation(Player(2),2)call SetPlayerColor(Player(2),ConvertPlayerColor(2))
call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(2),false)call SetPlayerController(Player(2),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(3),3)
call ForcePlayerStartLocation(Player(3),3)call SetPlayerColor(Player(3),ConvertPlayerColor(3))
call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(3),false)call SetPlayerController(Player(3),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(4),4)
call ForcePlayerStartLocation(Player(4),4)call SetPlayerColor(Player(4),ConvertPlayerColor(4))
call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(4),false)call SetPlayerController(Player(4),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(5),5)
call ForcePlayerStartLocation(Player(5),5)call SetPlayerColor(Player(5),ConvertPlayerColor(5))
call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(5),false)call SetPlayerController(Player(5),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(6),6)
call ForcePlayerStartLocation(Player(6),6)call SetPlayerColor(Player(6),ConvertPlayerColor(6))
call SetPlayerRacePreference(Player(6),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(6),false)call SetPlayerController(Player(6),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(7),7)
call ForcePlayerStartLocation(Player(7),7)call SetPlayerColor(Player(7),ConvertPlayerColor(7))
call SetPlayerRacePreference(Player(7),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(7),false)call SetPlayerController(Player(7),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(8),8)
call ForcePlayerStartLocation(Player(8),8)call SetPlayerColor(Player(8),ConvertPlayerColor(8))
call SetPlayerRacePreference(Player(8),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(8),false)call SetPlayerController(Player(8),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player(9),9)
call ForcePlayerStartLocation(Player(9),9)call SetPlayerColor(Player(9),ConvertPlayerColor(9))
call SetPlayerRacePreference(Player(9),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player(9),false)call SetPlayerController(Player(9),MAP_CONTROL_USER)
call SetPlayerStartLocation(Player($A),$A)call ForcePlayerStartLocation(Player($A),$A)
call SetPlayerColor(Player($A),ConvertPlayerColor($A))call SetPlayerRacePreference(Player($A),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player($A),false)call SetPlayerController(Player($A),MAP_CONTROL_USER)call SetPlayerStartLocation(Player($B),$B)call ForcePlayerStartLocation(Player($B),$B)
call SetPlayerColor(Player($B),ConvertPlayerColor($B))call SetPlayerRacePreference(Player($B),RACE_PREF_NIGHTELF)call SetPlayerRaceSelectable(Player($B),false)call SetPlayerController(Player($B),MAP_CONTROL_USER)call InitCustomTeams()call SetStartLocPrioCount(0,4)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,2)call SetStartLocPrio(1,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,6,MAP_LOC_PRIO_LOW)
call SetStartLocPrioCount(2,1)call SetStartLocPrio(2,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,2)call SetStartLocPrio(3,0,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,1)call SetStartLocPrio(4,0,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,2)call SetStartLocPrio(5,0,1,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(5,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,2)call SetStartLocPrio(6,0,1,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(6,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,2)call SetStartLocPrio(7,0,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,$B,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,3)call SetStartLocPrio(8,0,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,5,MAP_LOC_PRIO_LOW)
call SetStartLocPrio(8,2,$B,MAP_LOC_PRIO_LOW)call SetStartLocPrioCount(9,2)call SetStartLocPrio(9,0,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,4,MAP_LOC_PRIO_LOW)
call SetStartLocPrioCount($A,6)call SetStartLocPrio($A,0,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,1,5,MAP_LOC_PRIO_LOW)call SetStartLocPrio($A,2,6,MAP_LOC_PRIO_LOW)call SetStartLocPrio($A,3,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,4,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,5,$B,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount($B,2)call SetStartLocPrio($B,0,2,MAP_LOC_PRIO_LOW)call SetStartLocPrio($B,1,7,MAP_LOC_PRIO_HIGH)endfunction